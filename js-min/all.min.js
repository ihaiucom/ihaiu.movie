var __extends=(this&&this.__extends)||(function(){var extendStatics=Object.setPrototypeOf||({__proto__:[]} instanceof Array&&function(d,b){d.__proto__=b})||function(d,b){for(var p in b){if(b.hasOwnProperty(p)){d[p]=b[p]}}};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __())}})();var signals;(function(signals){var TypedSignal=(function(){function TypedSignal(){this._listeners=[]}TypedSignal.prototype.add=function(listener,self){if(!this.hasListener(listener,self)){this._listeners.push(new TypedSignalHandler(listener,self))}};TypedSignal.prototype.addOnce=function(listener,self){if(!this.hasListener(listener,self)){this._listeners.push(new TypedSignalHandler(listener,self,true))}};TypedSignal.prototype.hasListener=function(listener,self){for(var i=0;i<this._listeners.length;i++){if(this._listeners[i].equals(listener,self)){return true}}return false};TypedSignal.prototype.remove=function(listener,self){for(var i=0;i<this._listeners.length;i++){if(this._listeners[i].equals(listener,self)){this._listeners.splice(i,1);break}}};TypedSignal.prototype.removeAll=function(){this._listeners.length=0};TypedSignal.prototype.dispatch=function(value){this._listeners.forEach(function(handler){return handler.apply(value)});this._listeners=this._listeners.filter(function(handler,i,arr){return !handler.once()})};return TypedSignal}());signals.TypedSignal=TypedSignal;var TypedSignalHandler=(function(){function TypedSignalHandler(handler,self,once){if(once===void 0){once=false}this._handler=handler;this._self=self;this._once=once}TypedSignalHandler.prototype.apply=function(arg){this._handler.apply(this._self,[arg])};TypedSignalHandler.prototype.equals=function(handler,self){return this._handler==handler&&this._self==self};TypedSignalHandler.prototype.once=function(){return this._once};return TypedSignalHandler}())})(signals||(signals={}));if(!window.TypedSignal){window.TypedSignal=signals.TypedSignal}var signals;(function(signals){var Signal=(function(){function Signal(){this._listeners=[]}Signal.prototype.add=function(listener,self){if(!this.hasListener(listener,self)){this._listeners.push(new SignalHandler(listener,self))}};Signal.prototype.addOnce=function(listener,self){if(!this.hasListener(listener,self)){this._listeners.push(new SignalHandler(listener,self,true))}};Signal.prototype.hasListener=function(listener,self){for(var i=0;i<this._listeners.length;i++){if(this._listeners[i].equals(listener,self)){return true}}return false};Signal.prototype.remove=function(listener,self){for(var i=0;i<this._listeners.length;i++){if(this._listeners[i].equals(listener,self)){this._listeners.splice(i,1);break}}};Signal.prototype.removeAll=function(){this._listeners.length=0};Signal.prototype.dispatch=function(){this._listeners.forEach(function(handler){return handler.apply()});this._listeners=this._listeners.filter(function(handler,i,arr){return !handler.once()})};return Signal}());signals.Signal=Signal;var SignalHandler=(function(){function SignalHandler(handler,self,once){if(once===void 0){once=false}this._handler=handler;this._self=self;this._once=once}SignalHandler.prototype.apply=function(){this._handler.apply(this._self)};SignalHandler.prototype.equals=function(handler,self){return this._handler==handler&&this._self==self};SignalHandler.prototype.once=function(){return this._once};return SignalHandler}())})(signals||(signals={}));if(!window.Signal){window.Signal=signals.Signal}var signals;(function(signals){var Bindable=(function(){function Bindable(value){if(value===void 0){value=null}this._changeWatcher=new signals.TypedSignal();this._value=value}Object.defineProperty(Bindable.prototype,"value",{get:function(){return this._value},set:function(value){this.setValue(value)},enumerable:true,configurable:true});Bindable.prototype.add=function(listener,self){this._changeWatcher.add(listener,self)};Bindable.prototype.remove=function(listener,self){this._changeWatcher.remove(listener,self)};Bindable.prototype.removeAll=function(){this._changeWatcher.removeAll()};Bindable.prototype.bindTo=function(target){var _this=this;this.value=target.value;target.add(function(t){return _this.setValue(t)},this)};Bindable.prototype.unbind=function(target){var _this=this;target.remove(function(t){return _this.setValue(t)},this)};Bindable.prototype.setValue=function(value){if(value!=this._value){this._value=value;this._changeWatcher.dispatch(value)}};return Bindable}());signals.Bindable=Bindable})(signals||(signals={}));if(!window.Bindable){window.Bindable=signals.Bindable}var Mathf=(function(){function Mathf(){}Mathf.clamp=function(num,min,max){return Math.max(Math.min(num,Math.max(min,max)),Math.min(min,max))};Mathf.Clamp01=function(value){if(value<0){return 0}if(value>1){return 1}return value};Mathf.Lerp=function(a,b,t){return a+(b-a)*Mathf.Clamp01(t)};return Mathf}());if(DOMParser&&DOMParser.initXMl){var _jsXmlNode=DOMParser.initXMl();if(_jsXmlNode){_jsXmlNode=_jsXmlNode.constructor.prototype;if(_jsXmlNode){_jsXmlNode.setAttribute=function(name,value){if(this["attributes"]&&this["attributes"][name]){this["attributes"][name]["nodeValue"]=value}}}}}String.prototype.format=function(args){var result=this;if(arguments.length>0){if(arguments.length==1&&typeof(args)=="object"){for(var key in args){if(args[key]!=undefined){var reg=new RegExp("({"+key+"})","g");result=result.replace(reg,args[key])}}}else{for(var i=0;i<arguments.length;i++){if(arguments[i]!=undefined){var reg=new RegExp("({)"+i+"(})","g");result=result.replace(reg,arguments[i])}}}}return result};String.format=function(){if(arguments.length==0){return null}var str=arguments[0];for(var i=1;i<arguments.length;i++){var re=new RegExp("\\{"+(i-1)+"\\}","gm");str=str.replace(re,arguments[i])}return str};String.prototype.startsWith=function(str,ignoreCase){return fairygui.utils.ToolSet.startsWith(this,str,ignoreCase)};String.prototype.endsWith=function(str,ignoreCase){return fairygui.utils.ToolSet.endsWith(this,str,ignoreCase)};String.prototype.trimLeft=function(targetString){return fairygui.utils.ToolSet.trimLeft(targetString)};String.prototype.trimRight=function(targetString){return fairygui.utils.ToolSet.trimRight(targetString)};function isNumber(x){return typeof x==="number"}function isInt(s){if(s!=null){var r,re;re=/\d*/i;r=s.match(re);return(r==s)?true:false}return false}function isString(x){return typeof x==="string"}function isNullOrEmpty(x){if(x instanceof Array){return x==null||x==undefined}return x==null||x==undefined||x==""}function getClassName(obj){return obj.constructor["name"]}function getFunctionName(method){return method.name||method.toString().match(/function\s*([^(]*)\(/)[1]}function getTime(){return new Date().getTime()}function getTimeStamp(){return Math.floor(getTime()/1000)}function autoScreenSize(content,alignH,alignV){var rate=ScreenSetting.screenScaleExpand;content.width=content.sourceWidth*rate;content.height=content.sourceHeight*rate;if(alignH){var parent_1=fairygui.GRoot.inst;switch(alignH){case Laya.Stage.ALIGN_LEFT:content.x=0;break;case Laya.Stage.ALIGN_CENTER:content.x=(parent_1.width-content.width)*0.5;break;case Laya.Stage.ALIGN_RIGHT:content.x=parent_1.width-content.width;break}switch(alignV){case Laya.Stage.ALIGN_TOP:content.y=0;break;case Laya.Stage.ALIGN_MIDDLE:content.y=(parent_1.height-content.height)*0.5;break;case Laya.Stage.ALIGN_BOTTOM:content.y=parent_1.height-content.height;break}}}function centerScreen(content){content.x=(ScreenSetting.screenWidth-content.width)*0.5;content.y=(ScreenSetting.screenHeight-content.height)*0.5}function centerScreenForCenter(content){content.x=ScreenSetting.screenWidth*0.5;content.y=ScreenSetting.screenHeight*0.5}function setScreenSize(content){content.width=ScreenSetting.screenWidth;content.height=ScreenSetting.screenHeight}function getValueForPath(path,content){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}if(path.endsWith("()")){return getFunResultForPath.apply(void 0,[path,content].concat(args))}else{return getFieldValueForPath(path,content)}}function getFunResultForPath(path,content){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}if(path.endsWith("()")){path=path.replace("()","");var fun=getFieldValueForPath(path,content);if(fun){var paths=path.split(/[\.\/]/);if(paths.length==1){if(args.length==1){return fun.apply(content,args[0])}return fun.apply(content,args)}else{var objPath="";var gap="";for(var i=0;i<paths.length-1;i++){objPath+=gap+paths[i];gap="."}var obj=getFieldValueForPath(objPath,content);if(args.length==1){return fun.apply(obj,args[0])}return fun.apply(obj,args)}}}else{return getFieldValueForPath(path,content)}}function getFieldValueForPath(path,content){if(!content){content=window;if(!content){content=this}}var paths=path.split(/[\.\/]/);var val=content;for(var i=0;i<paths.length;i++){if(val[paths[i]]){val=val[paths[i]]}else{return null}}return val}function bToStr(b){if(b<1024){return b+"B"}var kb=b/1024;return kbToStr(kb)}function kbToStr(kb){if(kb<1024){return Math.ceil(kb)+"KB"}var mb=kb/1024;if(mb<1024){return(Math.ceil(mb*100)/100)+"MB"}var gb=mb/1024;return(Math.ceil(gb*100)/100)+"GB"}var Random=(function(){function Random(){}Random.range=function(min,max){var range=max-min;var rand=Math.random();return min+Math.floor(range*rand)};Random.rangeBoth=function(min,max){var range=max-min;var rand=Math.random();return min+Math.round(range*rand)};Random.rangeBetween=function(min,max){var range=max-min;var rand=Math.random();if(Math.round(rand*range)==0){return min+1}else{if(Math.round(rand*max)==max){return max-1}else{return min+Math.round(rand*range)-1}}};Random.GetDisorderList=function(list){var countNum=list.length;var listA=new Array();var listB=new Array();for(var i=0;i<countNum;i++){listA.push(list[i])}while(listB.length<countNum){var index=Random.range(0,listA.length);if(listB.indexOf(listA[index])===-1){listB.push(listA[index]);listA.splice(index,1)}}return listB};return Random}());var AppSetting=(function(){function AppSetting(){}Object.defineProperty(AppSetting,"wwwFileDir",{get:function(){return AppSetting.FileDir+"/www"},enumerable:true,configurable:true});AppSetting.wwwSize=146169628;AppSetting.platform="android";AppSetting.url="http://mbqb.ihaiu.com/Gidea-PF-Res/resources/android/web/index.html";AppSetting.appId="com.shinezone.movie.test";AppSetting.enableVersion=false;AppSetting.isDebug=false;AppSetting.AppVersionName="1.0.0";AppSetting.FileDir="/data/data/com.shinezone.movie.test/files";AppSetting.CacheDir="/data/data/com.shinezone.movie.test/cache";AppSetting.ExternalCacheDir="/storage/emulated/0/Android/data/com.shinezone.movie.test/cache";AppSetting.ExternalFilesDir="/storage/emulated/0/Android/data/com.shinezone.movie.test/files";AppSetting.ObbDir="/storage/emulated/0/Android/obb/com.shinezone.movie.test";return AppSetting}());var BrowserDetectConfig=(function(){function BrowserDetectConfig(){this.isConch=false;this.isCrosswalk=false;this.isResease=false;this.isLocal=false;this.enableGM=true;this.isShowState=true;this.isUseVersion=false;this.isDebugRecharge=true;this.urlServerListRemote="http://mbqb.ihaiu.com/GamePF/ServerList.json";this.urlServerListLocal="ServerList.json";if(window.conch){this.isConch=true}if(window&&window.navigator&&window.navigator.userAgent){var agent=window.navigator.userAgent;console.log(agent);this.isIOS=agent.indexOf("iPod")>-1||agent.indexOf("iPhone")>-1||agent.indexOf("iPad")>-1;this.isAndroid=(agent.indexOf("Android")>-1);this.isCrosswalk=(agent.indexOf("Crosswalk")>-1);this.isMobile=this.isIOS||this.isAndroid}else{this.isMobile=true;this.isApp=true}this.isMobile=true;this.isApp=this.isConch||this.isCrosswalk;this.isResease=true;if(window&&window.location&&window.location["pathname"]&&window.location["pathname"].startsWith("/GamePF")||/\/[A-Z]:\//.test(window.location["pathname"])){this.isResease=false}if(window&&window.location&&window.location["pathname"]&&/\/[A-Z]:\//.test(window.location["pathname"])){this.isUseVersion=false}if(!this.isIOS&&window&&window.location&&window&&window.location["origin"]&&window&&(window.location["origin"]=="http://pfqa.ihaiu.com"||window.location["origin"]=="http://172.16.50.181:8900")){this.isUseVersion=false;this.enableGM=true;this.isLocal=true}this.enableGM=true;if(this.isAndroid){this.isUseVersion=false;this.enableGM=true;this.isShowState=true;this.isLocal=true;this.isDebugRecharge=true}if(this.isIOS){this.isUseVersion=false;this.enableGM=true;this.isShowState=true;this.isLocal=true;this.isDebugRecharge=false}}Object.defineProperty(BrowserDetectConfig.prototype,"versionUrl",{get:function(){return"version.json"},enumerable:true,configurable:true});Object.defineProperty(BrowserDetectConfig.prototype,"urlServerList",{get:function(){if(this.isLocal){return this.urlServerListLocal}else{return this.urlServerListRemote}},enumerable:true,configurable:true});Object.defineProperty(BrowserDetectConfig.prototype,"deviceInfo",{get:function(){if(window.conch){if(!this._deviceInfo){this._deviceInfo=JSON.parse(window.conch.config.getDeviceInfo())}}else{if(!this._deviceInfo){this._deviceInfo={os:"ios",devicename:"iPhone8,1",imei:"imeixxx",imsi:"imsixxx",phonemodel:"iPhone",localmodel:"iPhone",retinavalue:"2.000000",osversion:"10.2",resolution:"375*667",guid:"E5B525AB-6B9A-495F-BF74-82345E76D646"}}}return this._deviceInfo},enumerable:true,configurable:true});Object.defineProperty(BrowserDetectConfig.prototype,"deviceId",{get:function(){return Games.GameLocalStorage.Instance.deviceId},enumerable:true,configurable:true});Object.defineProperty(BrowserDetectConfig.prototype,"deviceName",{get:function(){return this.deviceInfo.devicename},enumerable:true,configurable:true});Object.defineProperty(BrowserDetectConfig.prototype,"isIphoneX",{get:function(){if(this.deviceName&&this.deviceName.indexOf("iPhone")!=-1){try{var v=this.deviceName.replace("iPhone","").replace(",",".");var num=parseFloat(v);if(num>=10.3){return true}}catch(error){return false}}return false},enumerable:true,configurable:true});return BrowserDetectConfig}());var ScreenSettingConfig=(function(){function ScreenSettingConfig(){this.developWidth=720;this.developHeight=1280}Object.defineProperty(ScreenSettingConfig.prototype,"developAspect",{get:function(){return this.developWidth/this.developHeight},enumerable:true,configurable:true});Object.defineProperty(ScreenSettingConfig.prototype,"screenWidth",{get:function(){return fairygui.GRoot.inst.width},enumerable:true,configurable:true});Object.defineProperty(ScreenSettingConfig.prototype,"screenHeight",{get:function(){return fairygui.GRoot.inst.height},enumerable:true,configurable:true});Object.defineProperty(ScreenSettingConfig.prototype,"screenAspect",{get:function(){return this.screenWidth/this.screenHeight},enumerable:true,configurable:true});Object.defineProperty(ScreenSettingConfig.prototype,"screenScaleExpand",{get:function(){var rate=1;if(this.screenAspect<=this.developAspect){rate=this.screenHeight/this.developHeight/(this.screenWidth/this.developWidth)}else{rate=this.screenWidth/this.developWidth/(this.screenHeight/this.developHeight)}return rate},enumerable:true,configurable:true});Object.defineProperty(ScreenSettingConfig.prototype,"screenScaleShrink",{get:function(){var rate=1;if(this.screenAspect<=this.developAspect){rate=this.screenHeight/this.developHeight}else{rate=this.screenWidth/this.developWidth}return rate},enumerable:true,configurable:true});return ScreenSettingConfig}());var GameDevicePerformanceType;(function(GameDevicePerformanceType){GameDevicePerformanceType[GameDevicePerformanceType.VeryLower=0]="VeryLower";GameDevicePerformanceType[GameDevicePerformanceType.Lower=1]="Lower";GameDevicePerformanceType[GameDevicePerformanceType.Middle=2]="Middle";GameDevicePerformanceType[GameDevicePerformanceType.Hight=3]="Hight"})(GameDevicePerformanceType||(GameDevicePerformanceType={}));var NetworkType=(function(){function NetworkType(){}NetworkType.NET_NO=0;NetworkType.NET_WIFI=1;NetworkType.NET_2G=2;NetworkType.NET_3G=3;NetworkType.NET_4G=4;NetworkType.NET_UNKNOWN=5;return NetworkType}());var GameDeviceConfig=(function(){function GameDeviceConfig(){this.skeletonCacheMaxNum=10;this.unitMaxNum=10;this.roomUnitMaxNum=2;this.menuCacheTime=10000;this.fguiLoaderCacheNum=100;this.trailNum=2;this.fguiLoaderCacheTime=100;this._performanceType=GameDevicePerformanceType.Lower;this._networkType=-1;this._networkEnable=true;this.alertVisiable=false;this.netNoTime=0;this.reconnectingNum=1;this.reconnectingCount=3}Object.defineProperty(GameDeviceConfig.prototype,"performanceType",{get:function(){return this._performanceType},set:function(val){this._performanceType=val;switch(val){case GameDevicePerformanceType.VeryLower:this.skeletonCacheMaxNum=5;this.unitMaxNum=18;this.roomUnitMaxNum=2;this.menuCacheTime=3000;this.fguiLoaderCacheNum=50;this.fguiLoaderCacheTime=3000;this.trailNum=2;break;case GameDevicePerformanceType.Lower:this.skeletonCacheMaxNum=10;this.unitMaxNum=20;this.roomUnitMaxNum=3;this.menuCacheTime=3000;this.fguiLoaderCacheNum=30;this.fguiLoaderCacheTime=3000;this.trailNum=3;break;case GameDevicePerformanceType.Middle:this.skeletonCacheMaxNum=25;this.unitMaxNum=30;this.roomUnitMaxNum=4;this.menuCacheTime=10000;this.fguiLoaderCacheNum=60;this.fguiLoaderCacheTime=10000;this.trailNum=4;break;case GameDevicePerformanceType.Hight:this.skeletonCacheMaxNum=50;this.unitMaxNum=50;this.roomUnitMaxNum=4;this.menuCacheTime=300000;this.fguiLoaderCacheNum=100;this.fguiLoaderCacheTime=100000;this.trailNum=5;break}},enumerable:true,configurable:true});GameDeviceConfig.prototype.init=function(){var totalMem=this.getTotalMem();if(totalMem<=0){this.performanceType=GameDevicePerformanceType.Hight}else{if(totalMem<=1*1024*1024){this.performanceType=GameDevicePerformanceType.VeryLower}else{if(totalMem<=2*1024*1024){this.performanceType=GameDevicePerformanceType.Middle}else{this.performanceType=GameDevicePerformanceType.Hight}}}};Object.defineProperty(GameDeviceConfig.prototype,"isApp",{get:function(){return window.conch?true:false},enumerable:true,configurable:true});GameDeviceConfig.prototype.getTotalMem=function(){if(this.isApp){return window.conch.config.getTotalMem()}return 0};GameDeviceConfig.prototype.getUsedMem=function(){if(this.isApp){return window.conch.config.getUsedMem()}return 0};GameDeviceConfig.prototype.getAvalidMem=function(){if(this.isApp){return window.conch.config.getAvalidMem()}return 0};GameDeviceConfig.prototype.getNetworkType=function(){if(this._networkType==-1){if(BrowserDetect.isConch){this._networkType=window.conch.config.getNetworkType();return this._networkType}}else{return this._networkType}return NetworkType.NET_UNKNOWN};Object.defineProperty(GameDeviceConfig.prototype,"networkType",{set:function(type){this._networkType=type},enumerable:true,configurable:true});GameDeviceConfig.prototype.getNetworkEnable=function(){if(BrowserDetect.isConch){return gameApplication.getNetworkEnable()}return this._networkEnable};GameDeviceConfig.prototype.setNetworkEnable=function(value){this._networkEnable=value};GameDeviceConfig.prototype.checkNetwork=function(){gameApplication.checkNetwork();if(!this.getNetworkEnable()){this.showCheckNetworkAlert()}else{if(this.alertVisiable){if(!User.isLogined||Game.proto.isEnableSendProto){this.closeCheckNetworkAlert()}}}};GameDeviceConfig.prototype.closeCheckNetworkAlert=function(){this.alertVisiable=false;this.reconnectingNum=1;Games.SystemMessag.Instance.closeAlert()};GameDeviceConfig.prototype.showCheckNetworkAlert=function(isForce){if(isForce===void 0){isForce=false}if(!this.alertVisiable||isForce){this.netNoTime=new Date().getTime();Games.SystemMessag.Instance.alrtTextFull(LoadingStateTxt.NetworkState_Error,LoadingStateTxt.NetworkState_Title,this,this.onClickCheckNetworkAlert,LoadingStateTxt.NetworkState_Button_Reconnecting,false,true,false)}this.alertVisiable=true};GameDeviceConfig.prototype.onClickCheckNetworkAlert=function(){if(window.User&&User.isLogined){Game.protosender.account.refreshToken()}};GameDeviceConfig.prototype.onRefreshTokenFail=function(){this.reconnectingNum++;this.showCheckNetworkAlert(true)};GameDeviceConfig.prototype.onRefreshTokenOk=function(){if(this.alertVisiable){this.closeCheckNetworkAlert()}};GameDeviceConfig.prototype.exit=function(){this.alertVisiable=false;gameApplication.exit()};GameDeviceConfig.prototype.printInfo=function(){var str=" TotalMem: "+kbToStr(this.getTotalMem())+"\n UsedMem: "+kbToStr(this.getUsedMem())+"\n AvalidMem: "+kbToStr(this.getAvalidMem())+"\n NetworkType: "+this.getNetworkType();console.log(str)};return GameDeviceConfig}());var GameApplicationConch=(function(){function GameApplicationConch(_base){this.sInfo=new Signal();this.sAppPause=new Signal();this.sDidEnterBackground=new Signal();this.sWillEnterForeground=new Signal();this.sAppResume=new Signal();this.sWillTerminate=new Signal();this.enterBackgroundTime=0;this.atBackgroundTime=0;this.isSetUserInfo=false;this._base=_base;if(_base){this.IDFA=_base.IDFA;this.IDFV=_base.IDFV;this.BundleIdentifier=_base.BundleIdentifier}}GameApplicationConch.prototype.openURL=function(url){if(this._base){this._base.openURL(url)}else{if(!window.conch){window.open(url)}}};GameApplicationConch.prototype.setUserInfo=function(username,name){if(this.isSetUserInfo){return}this.isSetUserInfo=true;if(this._base&&this._base.setUserInfo){this._base.setUserInfo(username,name)}};GameApplicationConch.prototype.reportException=function(message,filename,lineno,colno,e){if(this._base&&this._base.reportException){this._base.reportException(message,filename,lineno,colno,e)}};GameApplicationConch.prototype.applicationWillResignActive=function(){console.log("event:> gameApplication.applicationWillResignActive");this.enterBackgroundTime=new Date().getTime();this.sAppPause.dispatch()};GameApplicationConch.prototype.applicationDidEnterBackground=function(){console.log("event:> gameApplication.applicationDidEnterBackground");this.sDidEnterBackground.dispatch()};GameApplicationConch.prototype.applicationWillEnterForeground=function(){console.log("event:> gameApplication.applicationWillEnterForeground");this.sWillEnterForeground.dispatch()};GameApplicationConch.prototype.applicationDidBecomeActive=function(enterBackgroundTimeStr){console.log("event:> gameApplication.enterBackgroundTimeStr");if(enterBackgroundTimeStr){this.enterBackgroundTime=parseInt(enterBackgroundTimeStr)}if(this.enterBackgroundTime>0){this.atBackgroundTime=new Date().getTime()-this.enterBackgroundTime}this.sAppResume.dispatch()};GameApplicationConch.prototype.applicationWillTerminate=function(){console.log("event:> gameApplication.applicationWillTerminate");this.sWillTerminate.dispatch()};GameApplicationConch.prototype.exit=function(){if(BrowserDetect.isIOS){this._base.exitApp()}else{if(window.conch&&window.conch["exit"]){window.conch.exit()}}};GameApplicationConch.prototype.checkNetwork=function(){if(BrowserDetect.isIOS){this._base.checkNetwork()}};GameApplicationConch.prototype.getNetworkEnable=function(){if(BrowserDetect.isIOS){return this._base.networkEnable}else{return gameDeviceConfig.getNetworkType()!=NetworkType.NET_NO}};Object.defineProperty(GameApplicationConch.prototype,"AppVersionName",{get:function(){if(window.conch){if(BrowserDetect.isIOS){return window.conch.config.getAppVersion()}else{if(this._base&&this._base.AppVersionName){return this._base.AppVersionName}}}return"1.00.00"},enumerable:true,configurable:true});return GameApplicationConch}());if(!window.gameApplication){var gameApplication}var Games;(function(Games){var GameBridger=(function(){function GameBridger(){this.jsClassName="GameBridger"}GameBridger.prototype.handler=function(data,callbackResponse){if(typeof(data)=="string"){try{data=JSON.parse(data)}catch(error){console.error("GameBridger handler: 解析json出错 "+error)}}if(data&&data[GameBridger.HANDLER_NAME_STR]){var handlerName=data[GameBridger.HANDLER_NAME_STR];var args=data[GameBridger.DATA_NAME_STR];var fun=this[handlerName];if(fun){fun.apply(this,[args,callbackResponse])}}};GameBridger.prototype.callNative=function(handlerName,args,callback){var data={handlerName:handlerName,data:args};WebViewJavascriptBridge.callHandler(this.jsClassName,data,callback)};GameBridger.prototype.register=function(){Games.GameBridgerManager.Instance.registerHandler(this)};GameBridger.HANDLER_NAME_STR="handlerName";GameBridger.DATA_NAME_STR="data";return GameBridger}());Games.GameBridger=GameBridger})(Games||(Games={}));var Games;(function(Games){var GameApplicationBridger=(function(_super){__extends(GameApplicationBridger,_super);function GameApplicationBridger(){var _this=_super.call(this)||this;_this.jsClassName="GameApplicationBridger";_this.networkEnable=true;_this.sInfo=new Signal();_this.sAppPause=new Signal();_this.sAppResume=new Signal();_this.isSetUserInfo=false;_this.IDFA=AppSetting.IDFA;_this.IDFV=AppSetting.IDFV;_this.BundleIdentifier=AppSetting.appId;_this.AppVersionName=AppSetting.AppVersionName;return _this}GameApplicationBridger.prototype.getInfo=function(){var _this=this;this.getIDFA();this.getIDFV();this.getBundleIdentifier();this.getAppVersionName();setTimeout(function(){_this.sInfo.dispatch()},200)};GameApplicationBridger.prototype.onPause=function(enterBackgroundTime){console.log("event:> onPause 游戏暂停");this.sAppPause.dispatch()};GameApplicationBridger.prototype.onResume=function(enterBackgroundTime){console.log("event:> onResume 游戏恢复 enterBackgroundTime="+enterBackgroundTime);this.sAppResume.dispatch()};GameApplicationBridger.prototype.getIDFA=function(){var _this=this;this.callNative("getIDFA",null,function(response){_this.IDFA=response})};GameApplicationBridger.prototype.getIDFV=function(){var _this=this;this.callNative("getIDFV",null,function(response){_this.IDFV=response})};GameApplicationBridger.prototype.getBundleIdentifier=function(){var _this=this;this.callNative("getBundleIdentifier",null,function(response){_this.BundleIdentifier=response})};GameApplicationBridger.prototype.getAppVersionName=function(){var _this=this;this.callNative("getAppVersionName",null,function(response){_this.AppVersionName=response;GameVersions.Manager.Instance.refreshAppVersion()})};GameApplicationBridger.prototype.openURL=function(url){this.callNative("openURL",{url:url},null)};GameApplicationBridger.prototype.exitApp=function(){this.callNative("exitApp",null,null)};GameApplicationBridger.prototype.checkNetwork=function(){};GameApplicationBridger.prototype.getNetworkEnable=function(){return this.networkEnable};GameApplicationBridger.prototype.reportException=function(message){this.callNative("reportException",{message:message},null)};GameApplicationBridger.prototype.setUserInfo=function(username,name){if(this.isSetUserInfo){return}this.isSetUserInfo=true;this.callNative("setUserInfo",{username:username,name:name},null)};return GameApplicationBridger}(Games.GameBridger));Games.GameApplicationBridger=GameApplicationBridger})(Games||(Games={}));var Games;(function(Games){var GameDefaultBridger=(function(_super){__extends(GameDefaultBridger,_super);function GameDefaultBridger(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.jsClassName="GameDefaultBridger";return _this}GameDefaultBridger.prototype.handler=function(data,callback){try{eval(data)}catch(error){}};return GameDefaultBridger}(Games.GameBridger));Games.GameDefaultBridger=GameDefaultBridger})(Games||(Games={}));var Games;(function(Games){var GameNetworkBridger=(function(_super){__extends(GameNetworkBridger,_super);function GameNetworkBridger(){var _this=_super.call(this)||this;_this.jsClassName="GameNetworkBridger";_this.sChange=new Signal();return _this}GameNetworkBridger.prototype.requireStart=function(){this.callNative("onRequireStart")};GameNetworkBridger.prototype.requireState=function(){this.callNative("onGetState",null,function(msg){gameDeviceConfig.setNetworkEnable(msg.isAvailable);gameDeviceConfig.networkType=msg.netType})};GameNetworkBridger.prototype.setGapTime=function(gapTime){this.callNative("onSetGapTime",{gapTime:gapTime})};GameNetworkBridger.prototype.setPing=function(pingEnable,pingGapTime,pingIp){this.callNative("onSetPing",{pingEnable:pingEnable,pingGapTime:pingGapTime,pingIp:pingIp})};GameNetworkBridger.prototype.onChange=function(msg){gameDeviceConfig.setNetworkEnable(msg.isAvailable&&msg.isPingSuccess);gameDeviceConfig.networkType=msg.netType;this.sChange.dispatch()};return GameNetworkBridger}(Games.GameBridger));Games.GameNetworkBridger=GameNetworkBridger})(Games||(Games={}));var Games;(function(Games){var GameBridgerManager=(function(){function GameBridgerManager(){this.defaultBridger=new Games.GameDefaultBridger();this.applicationBridger=new Games.GameApplicationBridger();this.networkBridger=new Games.GameNetworkBridger()}Object.defineProperty(GameBridgerManager,"Instance",{get:function(){if(!GameBridgerManager._Instance){GameBridgerManager._Instance=new GameBridgerManager()}return GameBridgerManager._Instance},enumerable:true,configurable:true});GameBridgerManager.prototype.init=function(){if(!window.WebViewJavascriptBridge){return}WebViewJavascriptBridge.init(this.defaultBridger.handler,this.defaultBridger);this.registerHandler(this.applicationBridger);this.registerHandler(this.networkBridger);this.networkBridger.requireStart();this.networkBridger.requireState()};GameBridgerManager.prototype.registerHandler=function(bridgeHandler){WebViewJavascriptBridge.registerHandler(bridgeHandler.jsClassName,bridgeHandler.handler,bridgeHandler)};return GameBridgerManager}());Games.GameBridgerManager=GameBridgerManager})(Games||(Games={}));function log(msg){if(typeof(msg)=="object"){msg=JSON.stringify(msg)}console.log(msg)}function h1(msg){console.log("");console.log(msg)}function node(msg){if(typeof(msg)=="object"){msg=JSON.stringify(msg)}console.log(msg)}function pre(msg){if(typeof(msg)=="object"){msg=JSON.stringify(msg)}console.log(msg)}function error(msg){if(typeof(msg)=="object"){msg=JSON.stringify(msg)}console.error(msg)}var Dictionary=(function(){function Dictionary(){this.dict={};this._count=0}Object.defineProperty(Dictionary.prototype,"count",{get:function(){return this._count},enumerable:true,configurable:true});Dictionary.prototype.add=function(key,val){if(this.hasKey(key)===false){this._count++}this.dict[key]=val};Dictionary.prototype.set=function(key,val){if(this.hasKey(key)===false){this._count++}this.dict[key]=val};Dictionary.prototype.remove=function(key){if(this.hasKey(key)){this._count--}delete this.dict[key]};Dictionary.prototype.hasKey=function(key){return this.dict[key]!=undefined};Dictionary.prototype.getValue=function(key){return this.dict[key]};Dictionary.prototype.getValueOrDefault=function(key,_default){if(this.hasKey(key)){return this.getValue(key)}else{return _default}};Dictionary.prototype.__getDict=function(){return this.dict};Dictionary.prototype.getValues=function(){var list=[];for(var key in this.dict){list.push(this.dict[key])}return list};Dictionary.prototype.getKeys=function(){var list=[];for(var key in this.dict){list.push(key)}return list};Dictionary.prototype.clear=function(){this.dict={};this._count=0};return Dictionary}());var frame;(function(frame){var base;(function(base){var BaseSingleton=(function(){function BaseSingleton(){}BaseSingleton.getInstance=function(){var Class=this;if(Class.__instance==null){Class.__instance=new Class()}return Class.__instance};BaseSingleton.prototype.destroyInstance=function(){var Class=this;if(Class.__instance){Class.__instance=null;delete Class.__instance}};return BaseSingleton}());base.BaseSingleton=BaseSingleton})(base=frame.base||(frame.base={}))})(frame||(frame={}));var LogType;(function(LogType){LogType[LogType.Log=1]="Log";LogType[LogType.Warn=2]="Warn";LogType[LogType.Error=3]="Error"})(LogType||(LogType={}));var LogItem=(function(){function LogItem(logType,msg){this.logType=logType;this.msg=msg+""}return LogItem}());var DebugManager=(function(){function DebugManager(){this.maxcount=1000;this.dict=new Dictionary();this.list=[]}DebugManager.prototype.getList=function(type){if(this.dict.hasKey(type)){return this.dict.getValue(type)}var l=[];this.dict.add(type,l);return l};Object.defineProperty(DebugManager.prototype,"listAll",{get:function(){return this.list},enumerable:true,configurable:true});DebugManager.prototype.getListByTypes=function(types){var list=[];for(var i=0;i<this.list.length;i++){if(types.indexOf(this.list[i].logType)!=-1){list.push(this.list[i])}}return list};DebugManager.prototype.addLog=function(type,message){var optionalParams=[];for(var _i=2;_i<arguments.length;_i++){optionalParams[_i-2]=arguments[_i]}if(message){this.add(new LogItem(type,this.stringFormat.apply(this,[message].concat(optionalParams))))}else{this.add(new LogItem(type,message))}};DebugManager.prototype.add=function(item){var l=this.getList(item.logType);l.push(item);this.list.push(item);if(this.list.length>this.maxcount){this.list.shift()}if(l.length>this.maxcount){l.shift()}};DebugManager.prototype.clear=function(){__mconsole.clear();this.list=[];this.dict.clear()};Object.defineProperty(DebugManager.prototype,"enable",{get:function(){return console===this},set:function(value){if(console!==this){console=this}},enumerable:true,configurable:true});DebugManager.prototype.stringFormat=function(message){var optionalParams=[];for(var _i=1;_i<arguments.length;_i++){optionalParams[_i-1]=arguments[_i]}if(optionalParams){for(var i=0;i<optionalParams.length;i++){if(/%s|%d|%i|%o/.test(message)){message=message.replace(/%s|%d|%i|%o/,optionalParams[i])}else{break}}}return message};DebugManager.prototype.assert=function(test,message){var optionalParams=[];for(var _i=2;_i<arguments.length;_i++){optionalParams[_i-2]=arguments[_i]}__mconsole.assert.apply(__mconsole,[test,message].concat(optionalParams));if(!message){if(message){alert(this.stringFormat.apply(this,[message].concat(optionalParams)))}else{alert(test)}}};DebugManager.prototype.count=function(countTitle){__mconsole.count(countTitle)};DebugManager.prototype.debug=function(message){var optionalParams=[];for(var _i=1;_i<arguments.length;_i++){optionalParams[_i-1]=arguments[_i]}__mconsole.debug.apply(__mconsole,[message].concat(optionalParams));this.addLog.apply(this,[LogType.Log,message].concat(optionalParams))};DebugManager.prototype.dir=function(value){var optionalParams=[];for(var _i=1;_i<arguments.length;_i++){optionalParams[_i-1]=arguments[_i]}__mconsole.dir.apply(__mconsole,[value].concat(optionalParams));this.addLog.apply(this,[LogType.Log,value+""].concat(optionalParams))};DebugManager.prototype.dirxml=function(value){__mconsole.dirxml(value);this.addLog(LogType.Log,value+"")};DebugManager.prototype.error=function(message){var optionalParams=[];for(var _i=1;_i<arguments.length;_i++){optionalParams[_i-1]=arguments[_i]}__mconsole.error.apply(__mconsole,[message].concat(optionalParams));this.addLog.apply(this,[LogType.Error,message].concat(optionalParams))};DebugManager.prototype.exception=function(message){var optionalParams=[];for(var _i=1;_i<arguments.length;_i++){optionalParams[_i-1]=arguments[_i]}__mconsole.exception.apply(__mconsole,[message].concat(optionalParams));this.addLog.apply(this,[LogType.Error,message].concat(optionalParams))};DebugManager.prototype.group=function(groupTitle){__mconsole.group(groupTitle)};DebugManager.prototype.groupCollapsed=function(groupTitle){__mconsole.groupCollapsed(groupTitle)};DebugManager.prototype.groupEnd=function(){__mconsole.groupEnd()};DebugManager.prototype.info=function(message){var optionalParams=[];for(var _i=1;_i<arguments.length;_i++){optionalParams[_i-1]=arguments[_i]}__mconsole.info.apply(__mconsole,[message].concat(optionalParams));this.addLog.apply(this,[LogType.Log,message].concat(optionalParams))};DebugManager.prototype.log=function(message){var optionalParams=[];for(var _i=1;_i<arguments.length;_i++){optionalParams[_i-1]=arguments[_i]}__mconsole.log.apply(__mconsole,[message].concat(optionalParams));this.addLog.apply(this,[LogType.Log,message].concat(optionalParams))};DebugManager.prototype.msIsIndependentlyComposed=function(element){return __mconsole.msIsIndependentlyComposed(element)};DebugManager.prototype.profile=function(reportName){__mconsole.profile(reportName)};DebugManager.prototype.profileEnd=function(){__mconsole.profileEnd()};DebugManager.prototype.select=function(element){__mconsole.select(element)};DebugManager.prototype.table=function(){var data=[];for(var _i=0;_i<arguments.length;_i++){data[_i]=arguments[_i]}__mconsole.table.apply(__mconsole,data)};DebugManager.prototype.time=function(timerName){__mconsole.time(timerName)};DebugManager.prototype.timeEnd=function(timerName){__mconsole.timeEnd(timerName)};DebugManager.prototype.trace=function(message){var optionalParams=[];for(var _i=1;_i<arguments.length;_i++){optionalParams[_i-1]=arguments[_i]}__mconsole.trace.apply(__mconsole,[message].concat(optionalParams));this.addLog.apply(this,[LogType.Log,message].concat(optionalParams))};DebugManager.prototype.warn=function(message){var optionalParams=[];for(var _i=1;_i<arguments.length;_i++){optionalParams[_i-1]=arguments[_i]}__mconsole.warn.apply(__mconsole,[message].concat(optionalParams));this.addLog.apply(this,[LogType.Warn,message].concat(optionalParams))};return DebugManager}());var __mconsole=console;var GameDebug=new DebugManager();var Games;(function(Games){var FWindow=(function(_super){__extends(FWindow,_super);function FWindow(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isAddedStage=false;return _this}Object.defineProperty(FWindow.prototype,"isShowed",{get:function(){if(this.contentPane){return this.parent!=null}return false},enumerable:true,configurable:true});FWindow.prototype.onWindowWillShow=function(){if(this.contentPane){this.callChildOnWindowWillShow(this.contentPane)}this.setScreenSize();if(this.isAddedStage){return}this.isAddedStage=true;Laya.stage.on(laya.events.Event.RESIZE,this,this.setScreenSize)};FWindow.prototype.onWindowWillHide=function(){if(this.contentPane){this.callChildOnWindowWillHide(this.contentPane)}this.isAddedStage=false;Laya.stage.off(laya.events.Event.RESIZE,this,this.setScreenSize)};FWindow.prototype.setScreenSize=function(){if(this.contentPane){this.contentPane.width=ScreenSetting.screenWidth;this.contentPane.height=ScreenSetting.screenHeight;this.callChildOnWindowResize(this.contentPane)}};FWindow.prototype.callChildOnWindowWillShow=function(com){if(com){var fun=com.onWindowWillShow;if(fun){fun.apply(com)}if(com._children){for(var i=0;i<com._children.length;i++){this.callChildOnWindowWillShow(com._children[i])}}}};FWindow.prototype.callChildOnWindowWillHide=function(com){if(com){var fun=com.onWindowWillHide;if(fun){fun.apply(com)}if(com._children){for(var i=0;i<com._children.length;i++){this.callChildOnWindowWillHide(com._children[i])}}}};FWindow.prototype.callChildOnWindowResize=function(com){if(com){var fun=com.onWindowResize;if(fun){fun.apply(com)}if(com._children){for(var i=0;i<com._children.length;i++){this.callChildOnWindowResize(com._children[i])}}}};return FWindow}(fairygui.Window));Games.FWindow=FWindow})(Games||(Games={}));var fgui;(function(fgui){var System;(function(System){var SystemToastTextStruct=(function(_super){__extends(SystemToastTextStruct,_super);function SystemToastTextStruct(){return _super.call(this)||this}SystemToastTextStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","SystemToastText"))};SystemToastTextStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};SystemToastTextStruct.URL="ui://fiza9hgr5ol91a";SystemToastTextStruct.DependPackages=["System"];return SystemToastTextStruct}(fairygui.GComponent));System.SystemToastTextStruct=SystemToastTextStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var SystemToastText=(function(_super){__extends(SystemToastText,_super);function SystemToastText(){return _super!==null&&_super.apply(this,arguments)||this}return SystemToastText}(System.SystemToastTextStruct));System.SystemToastText=SystemToastText})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var ScreenBGStruct=(function(_super){__extends(ScreenBGStruct,_super);function ScreenBGStruct(){return _super.call(this)||this}ScreenBGStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","ScreenBG"))};ScreenBGStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};ScreenBGStruct.URL="ui://fiza9hgraat317";ScreenBGStruct.DependPackages=["System"];return ScreenBGStruct}(fairygui.GLabel));System.ScreenBGStruct=ScreenBGStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var ScreenBG=(function(_super){__extends(ScreenBG,_super);function ScreenBG(){return _super!==null&&_super.apply(this,arguments)||this}ScreenBG.prototype.onWindowWillShow=function(){this.setScreenSize();Laya.stage.on(laya.events.Event.RESIZE,this,this.setScreenSize)};ScreenBG.prototype.onWindowWillHide=function(){Laya.stage.off(laya.events.Event.RESIZE,this,this.setScreenSize)};ScreenBG.prototype.setScreenSize=function(){autoScreenSize(this,Laya.Stage.ALIGN_CENTER,Laya.Stage.ALIGN_MIDDLE)};return ScreenBG}(System.ScreenBGStruct));System.ScreenBG=ScreenBG})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var BarSquareStruct=(function(_super){__extends(BarSquareStruct,_super);function BarSquareStruct(){return _super.call(this)||this}BarSquareStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","BarSquare"))};BarSquareStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t1=this.getTransition("t1")};BarSquareStruct.URL="ui://fiza9hgrqmhbeh";BarSquareStruct.DependPackages=["System"];return BarSquareStruct}(fairygui.GComponent));System.BarSquareStruct=BarSquareStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var BarSquare=(function(_super){__extends(BarSquare,_super);function BarSquare(){return _super!==null&&_super.apply(this,arguments)||this}return BarSquare}(System.BarSquareStruct));System.BarSquare=BarSquare})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var BGModelStruct=(function(_super){__extends(BGModelStruct,_super);function BGModelStruct(){return _super.call(this)||this}BGModelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","BGModel"))};BGModelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"))};BGModelStruct.URL="ui://fiza9hgrg2lpz";BGModelStruct.DependPackages=["System"];return BGModelStruct}(fairygui.GComponent));System.BGModelStruct=BGModelStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var BGModel=(function(_super){__extends(BGModel,_super);function BGModel(){return _super!==null&&_super.apply(this,arguments)||this}return BGModel}(System.BGModelStruct));System.BGModel=BGModel})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var CommonDialogUIStruct=(function(_super){__extends(CommonDialogUIStruct,_super);function CommonDialogUIStruct(){return _super.call(this)||this}CommonDialogUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","CommonDialogUI"))};CommonDialogUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_closeBtn=(this.getChild("closeBtn"))};CommonDialogUIStruct.URL="ui://fiza9hgrgdopn";CommonDialogUIStruct.DependPackages=["System"];return CommonDialogUIStruct}(fairygui.GComponent));System.CommonDialogUIStruct=CommonDialogUIStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var CommonDialogUI=(function(_super){__extends(CommonDialogUI,_super);function CommonDialogUI(){return _super!==null&&_super.apply(this,arguments)||this}return CommonDialogUI}(System.CommonDialogUIStruct));System.CommonDialogUI=CommonDialogUI})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var GlobalModalWaitingStruct=(function(_super){__extends(GlobalModalWaitingStruct,_super);function GlobalModalWaitingStruct(){return _super.call(this)||this}GlobalModalWaitingStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","GlobalModalWaiting"))};GlobalModalWaitingStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_circle=(this.getChild("circle"));this.m_circleMV=this.getTransition("circleMV")};GlobalModalWaitingStruct.URL="ui://fiza9hgr5sash";GlobalModalWaitingStruct.DependPackages=["System"];return GlobalModalWaitingStruct}(fairygui.GComponent));System.GlobalModalWaitingStruct=GlobalModalWaitingStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var GlobalModalWaiting=(function(_super){__extends(GlobalModalWaiting,_super);function GlobalModalWaiting(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.hideTimeHandler=-1;_this.delayShowTimeHandler=-1;return _this}Object.defineProperty(GlobalModalWaiting,"Instance",{get:function(){if(!GlobalModalWaiting._Instance){GlobalModalWaiting._Instance=GlobalModalWaiting.createInstance()}return GlobalModalWaiting._Instance},enumerable:true,configurable:true});GlobalModalWaiting.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.setScreenSize()};GlobalModalWaiting.prototype.onLayoutModelWaitPane=function(){this.setScreenSize()};GlobalModalWaiting.prototype.setScreenSize=function(){this.width=ScreenSetting.screenWidth;this.height=ScreenSetting.screenHeight};GlobalModalWaiting.prototype.setShow=function(time,delay){var _this=this;clearTimeout(this.delayShowTimeHandler);if(delay&&delay>0){this.delayShowTimeHandler=setTimeout(function(){_this.doShow(time)},delay)}else{this.doShow(time)}};GlobalModalWaiting.prototype.doShow=function(time){var _this=this;if(time===undefined){time=5000}this.setScreenSize();Games.MenuLayer.root.addChild(this);clearTimeout(this.hideTimeHandler);if(time&&time>0){this.hideTimeHandler=setTimeout(function(){_this.setHide()},time)}};GlobalModalWaiting.prototype.setHide=function(){clearTimeout(this.delayShowTimeHandler);this.removeFromParent()};GlobalModalWaiting.show=function(time,delay){GlobalModalWaiting.Instance.setShow(time,delay)};GlobalModalWaiting.hide=function(){GlobalModalWaiting.Instance.setHide()};return GlobalModalWaiting}(System.GlobalModalWaitingStruct));System.GlobalModalWaiting=GlobalModalWaiting})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var GlobalModalWaiting=fgui.System.GlobalModalWaiting;var fgui;(function(fgui){var System;(function(System){var LoaderEnterGameStruct=(function(_super){__extends(LoaderEnterGameStruct,_super);function LoaderEnterGameStruct(){return _super.call(this)||this}LoaderEnterGameStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","LoaderEnterGame"))};LoaderEnterGameStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_help=(this.getChild("help"));this.m_txt_resVer=(this.getChild("txt_resVer"));this.m_txt_gamever=(this.getChild("txt_gamever"));this.m_screenBG=(this.getChild("screenBG"));this.m_progressBar=(this.getChild("progressBar"))};LoaderEnterGameStruct.URL="ui://fiza9hgr5sas6";LoaderEnterGameStruct.DependPackages=["System"];return LoaderEnterGameStruct}(fairygui.GComponent));System.LoaderEnterGameStruct=LoaderEnterGameStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var LoaderEnterGame=(function(_super){__extends(LoaderEnterGame,_super);function LoaderEnterGame(){return _super!==null&&_super.apply(this,arguments)||this}return LoaderEnterGame}(System.LoaderEnterGameStruct));System.LoaderEnterGame=LoaderEnterGame})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var ProgressRedBarStruct=(function(_super){__extends(ProgressRedBarStruct,_super);function ProgressRedBarStruct(){return _super.call(this)||this}ProgressRedBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","ProgressRedBar"))};ProgressRedBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_top=(this.getChild("top"));this.m_barSquare=(this.getChild("barSquare"))};ProgressRedBarStruct.URL="ui://fiza9hgr5sas9";ProgressRedBarStruct.DependPackages=["System"];return ProgressRedBarStruct}(fairygui.GProgressBar));System.ProgressRedBarStruct=ProgressRedBarStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var ProgressRedBar=(function(_super){__extends(ProgressRedBar,_super);function ProgressRedBar(){return _super!==null&&_super.apply(this,arguments)||this}return ProgressRedBar}(System.ProgressRedBarStruct));System.ProgressRedBar=ProgressRedBar})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var SystemAlertMessageStruct=(function(_super){__extends(SystemAlertMessageStruct,_super);function SystemAlertMessageStruct(){return _super.call(this)||this}SystemAlertMessageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","SystemAlertMessage"))};SystemAlertMessageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_content=(this.getChild("content"));this.m_title=(this.getChild("title"));this.m_bgCom=(this.getChild("bgCom"));this.m_okBtn=(this.getChild("okBtn"));this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1")};SystemAlertMessageStruct.URL="ui://fiza9hgrgdopy";SystemAlertMessageStruct.DependPackages=["System"];return SystemAlertMessageStruct}(fairygui.GComponent));System.SystemAlertMessageStruct=SystemAlertMessageStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var SystemAlertMessage=(function(_super){__extends(SystemAlertMessage,_super);function SystemAlertMessage(){return _super!==null&&_super.apply(this,arguments)||this}SystemAlertMessage.prototype.open=function(txt,title,yesObj,yesFun,yesTxt,closeButtonVisiable,buttonEnable,isClickButtonAutoClose){if(title===void 0){title=""}if(yesObj===void 0){yesObj=null}if(yesFun===void 0){yesFun=null}if(yesTxt===void 0){yesTxt=null}if(closeButtonVisiable===void 0){closeButtonVisiable=true}if(buttonEnable===void 0){buttonEnable=true}if(isClickButtonAutoClose===void 0){isClickButtonAutoClose=true}if(isNullOrEmpty(title)){title=""}this.yesFun=yesFun;this.yesObj=yesObj;this.isClickButtonAutoClose=isClickButtonAutoClose;this.m_content.text=txt;this.m_title.text=title;this.m_okBtn.m_title.text=yesTxt;this.m_okBtn.enabled=buttonEnable;this.m_bgCom.m_closeBtn.enabled=buttonEnable;this.m_bgCom.m_closeBtn.visible=closeButtonVisiable;this.m_okBtn.onClick(this,this.onClickYes);this.m_bgCom.m_closeBtn.onClick(this,this.onClickYes);Games.MenuLayer.showDialogModel();Games.MenuLayer.floatMsg.addChild(this);centerScreen(this);this.m_t0.play()};SystemAlertMessage.prototype.close=function(){Games.MenuLayer.hideDialogModel();this.m_t1.play(Handler.create(this,this.onHide))};SystemAlertMessage.prototype.onHide=function(){this.removeFromParent()};SystemAlertMessage.prototype.onClickYes=function(){if(this.isClickButtonAutoClose){this.close()}if(this.yesFun){if(this.yesObj){this.yesFun.apply(this.yesObj)}else{this.yesFun()}}};return SystemAlertMessage}(System.SystemAlertMessageStruct));System.SystemAlertMessage=SystemAlertMessage})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var SystemConfirmMessageStruct=(function(_super){__extends(SystemConfirmMessageStruct,_super);function SystemConfirmMessageStruct(){return _super.call(this)||this}SystemConfirmMessageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","SystemConfirmMessage"))};SystemConfirmMessageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_content=(this.getChild("content"));this.m_title=(this.getChild("title"));this.m_bgCom=(this.getChild("bgCom"));this.m_okBtn=(this.getChild("okBtn"));this.m_cancleBtn=(this.getChild("cancleBtn"));this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1")};SystemConfirmMessageStruct.URL="ui://fiza9hgrgdopm";SystemConfirmMessageStruct.DependPackages=["System"];return SystemConfirmMessageStruct}(fairygui.GComponent));System.SystemConfirmMessageStruct=SystemConfirmMessageStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var SystemConfirmMessage=(function(_super){__extends(SystemConfirmMessage,_super);function SystemConfirmMessage(){return _super!==null&&_super.apply(this,arguments)||this}SystemConfirmMessage.prototype.open=function(txt,title,caller,yesFun,noFun,yesTxt,noTxt,closeButtonVisiable,isClickButtonAutoClose){if(title===void 0){title=""}if(caller===void 0){caller=null}if(yesFun===void 0){yesFun=null}if(noFun===void 0){noFun=null}if(yesTxt===void 0){yesTxt=null}if(noTxt===void 0){noTxt=null}if(closeButtonVisiable===void 0){closeButtonVisiable=true}if(isClickButtonAutoClose===void 0){isClickButtonAutoClose=true}if(isNullOrEmpty(title)){title=""}this.caller=caller;this.yesFun=yesFun;this.noFun=noFun;this.isClickButtonAutoClose=isClickButtonAutoClose;this.m_content.text=txt;this.m_title.text=title;this.m_okBtn.m_title.text=yesTxt;this.m_cancleBtn.m_title.text=noTxt;this.m_bgCom.m_closeBtn.visible=closeButtonVisiable;this.m_okBtn.onClick(this,this.onClickYes);this.m_cancleBtn.onClick(this,this.onClickNo);this.m_bgCom.m_closeBtn.onClick(this,this.onClickClose);Games.MenuLayer.showDialogModel();Games.MenuLayer.floatMsg.addChild(this);centerScreen(this);this.m_t1.stop();this.m_t0.play()};SystemConfirmMessage.prototype.close=function(){Games.MenuLayer.hideDialogModel();this.m_t1.play(Handler.create(this,this.onHide))};SystemConfirmMessage.prototype.onHide=function(){this.removeFromParent()};SystemConfirmMessage.prototype.onClickYes=function(){if(this.isClickButtonAutoClose){this.close()}if(this.yesFun){if(this.caller){this.yesFun.apply(this.caller)}else{this.yesFun()}}};SystemConfirmMessage.prototype.onClickNo=function(){if(this.isClickButtonAutoClose){this.close()}if(this.noFun){if(this.caller){this.noFun.apply(this.caller)}else{this.noFun()}}};SystemConfirmMessage.prototype.onClickClose=function(){this.close()};return SystemConfirmMessage}(System.SystemConfirmMessageStruct));System.SystemConfirmMessage=SystemConfirmMessage})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var SystemToastMessageStruct=(function(_super){__extends(SystemToastMessageStruct,_super);function SystemToastMessageStruct(){return _super.call(this)||this}SystemToastMessageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","SystemToastMessage"))};SystemToastMessageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_t0=this.getTransition("t0")};SystemToastMessageStruct.URL="ui://fiza9hgrgdopk";SystemToastMessageStruct.DependPackages=["System"];return SystemToastMessageStruct}(fairygui.GLabel));System.SystemToastMessageStruct=SystemToastMessageStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var SystemToastMessage=(function(_super){__extends(SystemToastMessage,_super);function SystemToastMessage(){return _super!==null&&_super.apply(this,arguments)||this}SystemToastMessage.prototype.play=function(txt,onComplete){if(this._onCompleteHandler){this._onCompleteHandler.recover()}this._onCompleteHandler=onComplete;this.m_title.m_title.text=txt;Games.MenuLayer.floatMsg.addChild(this);centerScreen(this);this.m_t0.play(Handler.create(this,this.onComplete))};SystemToastMessage.prototype.onComplete=function(){this.removeFromParent();if(this._onCompleteHandler){this._onCompleteHandler.runWith(this);this._onCompleteHandler.recover();this._onCompleteHandler=null}};return SystemToastMessage}(System.SystemToastMessageStruct));System.SystemToastMessage=SystemToastMessage})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var WindowModalWaitingStruct=(function(_super){__extends(WindowModalWaitingStruct,_super);function WindowModalWaitingStruct(){return _super.call(this)||this}WindowModalWaitingStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","WindowModalWaiting"))};WindowModalWaitingStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};WindowModalWaitingStruct.URL="ui://fiza9hgr5sasc";WindowModalWaitingStruct.DependPackages=["System"];return WindowModalWaitingStruct}(fairygui.GComponent));System.WindowModalWaitingStruct=WindowModalWaitingStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var WindowModalWaiting=(function(_super){__extends(WindowModalWaiting,_super);function WindowModalWaiting(){return _super!==null&&_super.apply(this,arguments)||this}WindowModalWaiting.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.setScreenSize()};WindowModalWaiting.prototype.setScreenSize=function(){this.width=ScreenSetting.screenWidth;this.height=ScreenSetting.screenHeight};WindowModalWaiting.prototype.onLayoutModelWaitPane=function(){this.setScreenSize()};return WindowModalWaiting}(System.WindowModalWaitingStruct));System.WindowModalWaiting=WindowModalWaiting})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var CloseBtnStruct=(function(_super){__extends(CloseBtnStruct,_super);function CloseBtnStruct(){return _super.call(this)||this}CloseBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","closeBtn"))};CloseBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_closeBtn=(this.getChild("closeBtn"))};CloseBtnStruct.URL="ui://fiza9hgrupbl1g";CloseBtnStruct.DependPackages=["System"];return CloseBtnStruct}(fairygui.GButton));System.CloseBtnStruct=CloseBtnStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var CloseBtn=(function(_super){__extends(CloseBtn,_super);function CloseBtn(){return _super!==null&&_super.apply(this,arguments)||this}return CloseBtn}(System.CloseBtnStruct));System.CloseBtn=CloseBtn})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var LabItem_bigStruct=(function(_super){__extends(LabItem_bigStruct,_super);function LabItem_bigStruct(){return _super.call(this)||this}LabItem_bigStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","LabItem_big"))};LabItem_bigStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_trColor=this.getController("trColor");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};LabItem_bigStruct.URL="ui://fiza9hgrnyfh13";LabItem_bigStruct.DependPackages=["System","Common"];return LabItem_bigStruct}(fairygui.GLabel));System.LabItem_bigStruct=LabItem_bigStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var LabItem_big=(function(_super){__extends(LabItem_big,_super);function LabItem_big(){return _super!==null&&_super.apply(this,arguments)||this}return LabItem_big}(System.LabItem_bigStruct));System.LabItem_big=LabItem_big})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var SystemAddItemMessageStruct=(function(_super){__extends(SystemAddItemMessageStruct,_super);function SystemAddItemMessageStruct(){return _super.call(this)||this}SystemAddItemMessageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","SystemAddItemMessage"))};SystemAddItemMessageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_listItem=(this.getChild("listItem"));this.m_tips=(this.getChild("tips"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_bgCom=(this.getChild("bgCom"));this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1");this.m_t2=this.getTransition("t2")};SystemAddItemMessageStruct.URL="ui://fiza9hgrnyfh11";SystemAddItemMessageStruct.DependPackages=["System","Common"];return SystemAddItemMessageStruct}(fairygui.GComponent));System.SystemAddItemMessageStruct=SystemAddItemMessageStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var SystemAddItemMessage=(function(_super){__extends(SystemAddItemMessage,_super);function SystemAddItemMessage(){return _super!==null&&_super.apply(this,arguments)||this}SystemAddItemMessage.prototype.open=function(itemList,title,autoCloseTime,closeButtonVisiable,buttonEnable,isClickButtonAutoClose){var _this=this;if(title===void 0){title=""}if(autoCloseTime===void 0){autoCloseTime=3}if(closeButtonVisiable===void 0){closeButtonVisiable=true}if(buttonEnable===void 0){buttonEnable=true}if(isClickButtonAutoClose===void 0){isClickButtonAutoClose=true}this.items=itemList;if(isNullOrEmpty(title)){title=""}this.isClickButtonAutoClose=isClickButtonAutoClose;this.m_listItem.itemRenderer=new Handler(this,this.RenderItem,null,false);this.m_listItem.numItems=this.items.length;this.m_title.text=title;this.m_bgCom.m_closeBtn.enabled=buttonEnable;this.m_bgCom.m_closeBtn.visible=closeButtonVisiable;this.m_bgCom.m_closeBtn.onClick(this,this.close);this.m_closeBtn.enabled=buttonEnable;this.m_closeBtn.visible=closeButtonVisiable;this.m_closeBtn.onClick(this,this.close);this.m_tips.text=Games.TEXT.ClickAnyWhereToClose;Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);centerScreen(this);this.m_t0.play();this.timeoutHandle=null;if(autoCloseTime>0){this.timeoutHandle=setTimeout(function(){_this.close()},autoCloseTime*1000)}};SystemAddItemMessage.prototype.RenderItem=function(index,obj){var data=this.items[index];obj.title=data.itemNumTxt;obj.icon=data.itemIconUrl;obj.m_star.starNum=data.itemStar};SystemAddItemMessage.prototype.close=function(){if(this.timeoutHandle){clearTimeout(this.timeoutHandle)}this.timeoutHandle=null;Games.MenuLayer.hideDialogModel();this.m_t1.play(Handler.create(this,this.onHide))};SystemAddItemMessage.prototype.onHide=function(){this.removeFromParent()};return SystemAddItemMessage}(System.SystemAddItemMessageStruct));System.SystemAddItemMessage=SystemAddItemMessage})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var GMLanuchButtonStruct=(function(_super){__extends(GMLanuchButtonStruct,_super);function GMLanuchButtonStruct(){return _super.call(this)||this}GMLanuchButtonStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","GMLanuchButton"))};GMLanuchButtonStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};GMLanuchButtonStruct.URL="ui://fiza9hgrj5ra14";GMLanuchButtonStruct.DependPackages=["System"];return GMLanuchButtonStruct}(fairygui.GButton));System.GMLanuchButtonStruct=GMLanuchButtonStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var GMLanuchButtonClickArea;(function(GMLanuchButtonClickArea){GMLanuchButtonClickArea[GMLanuchButtonClickArea.None=0]="None";GMLanuchButtonClickArea[GMLanuchButtonClickArea.Left_Top=1]="Left_Top";GMLanuchButtonClickArea[GMLanuchButtonClickArea.Left_Bottom=2]="Left_Bottom";GMLanuchButtonClickArea[GMLanuchButtonClickArea.Right_Buttom=3]="Right_Buttom";GMLanuchButtonClickArea[GMLanuchButtonClickArea.Right_Top=4]="Right_Top"})(GMLanuchButtonClickArea=System.GMLanuchButtonClickArea||(System.GMLanuchButtonClickArea={}));var GMLanuchButton=(function(_super){__extends(GMLanuchButton,_super);function GMLanuchButton(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isDraging=false;_this.__clickStageIndex=-1;_this.__clickPreArea=GMLanuchButtonClickArea.None;return _this}GMLanuchButton.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickButton);this.on(fairygui.Events.DRAG_MOVE,this,this.onDragMove);this.on(fairygui.Events.DRAG_END,this,this.onDragEnd);if(window.Game){this.x=Game.localStorage.gmX;this.y=Game.localStorage.gmY}};GMLanuchButton.prototype.onClickStage=function(event){if(event&&event.stageX){if(this.visible){return}var x=event.stageX;var y=event.stageY;var px=Math.floor(x/Laya.stage.width*100);var py=Math.floor(y/Laya.stage.height*100);var area=GMLanuchButtonClickArea.None;if(px<10&&py<10){area=GMLanuchButtonClickArea.Left_Top;if(this.__clickPreArea==GMLanuchButtonClickArea.None){this.__clickStageIndex=1}else{if(this.__clickPreArea==GMLanuchButtonClickArea.Right_Top){this.__clickStageIndex++}else{this.__clickStageIndex=0}}}else{if(px<10&&py>90){area=GMLanuchButtonClickArea.Left_Bottom;if(this.__clickPreArea==GMLanuchButtonClickArea.Left_Top){this.__clickStageIndex++}else{this.__clickStageIndex=0}}else{if(px>90&&py>90){area=GMLanuchButtonClickArea.Right_Buttom;if(this.__clickPreArea==GMLanuchButtonClickArea.Left_Bottom){this.__clickStageIndex++}else{this.__clickStageIndex=0}}else{if(px>90&&py<10){area=GMLanuchButtonClickArea.Right_Top;if(this.__clickPreArea==GMLanuchButtonClickArea.Right_Buttom){this.__clickStageIndex++}else{this.__clickStageIndex=0}}}}}this.__clickPreArea=area;if(area==GMLanuchButtonClickArea.None){this.__clickStageIndex=0}if(this.__clickStageIndex>=20){this.visible=true}}};GMLanuchButton.prototype.onDragMove=function(){this.isDraging=true};GMLanuchButton.prototype.onDragEnd=function(){var _this=this;setTimeout(function(){_this.isDraging=false},100);Game.localStorage.gmX=this.x;Game.localStorage.gmY=this.y};GMLanuchButton.prototype.onClickButton=function(){if(!this.isDraging){Games.GM.visiable=!Games.GM.visiable}};return GMLanuchButton}(System.GMLanuchButtonStruct));System.GMLanuchButton=GMLanuchButton})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var StateItemStruct=(function(_super){__extends(StateItemStruct,_super);function StateItemStruct(){return _super.call(this)||this}StateItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","StateItem"))};StateItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_key=(this.getChild("key"));this.m_value=(this.getChild("value"))};StateItemStruct.URL="ui://fiza9hgrqr3y19";StateItemStruct.DependPackages=["System"];return StateItemStruct}(fairygui.GComponent));System.StateItemStruct=StateItemStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var StateItem=(function(_super){__extends(StateItem,_super);function StateItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.unitM=1024*1024;return _this}Object.defineProperty(StateItem.prototype,"key",{get:function(){return this._key},set:function(value){this._key=value;this.m_key.text=value},enumerable:true,configurable:true});Object.defineProperty(StateItem.prototype,"val",{set:function(value){this.m_value.text=value},enumerable:true,configurable:true});StateItem.prototype.setVal=function(val){if(isNumber(val)){if(this.key=="currentMemorySize"){if(val>this.unitM){this.val=Math.floor(val/this.unitM*100)/100+" M"}else{this.val=Math.floor(val/1024*100)/100+" K"}}else{this.val=val.toString()}}else{if(isString(val)){this.val=val}else{this.val=val.toString()}}};return StateItem}(System.StateItemStruct));System.StateItem=StateItem})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var StateViewStruct=(function(_super){__extends(StateViewStruct,_super);function StateViewStruct(){return _super.call(this)||this}StateViewStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","StateView"))};StateViewStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"))};StateViewStruct.URL="ui://fiza9hgrqr3y18";StateViewStruct.DependPackages=["System"];return StateViewStruct}(fairygui.GComponent));System.StateViewStruct=StateViewStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var StateView=(function(_super){__extends(StateView,_super);function StateView(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.list=[];_this.list2=[];return _this}StateView.show=function(){if(StateView._install==null){StateView._install=StateView.createInstance()}if(!StateView._install.parent){Games.MenuLayer.floatMsg.addChild(StateView._install);StateView._install.onShow()}};StateView.hide=function(){if(StateView._install){if(StateView._install.parent){StateView._install.removeFromParent();StateView._install.onHide()}}};StateView.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);var item=System.StateItem.createInstance();item=System.StateItem.createInstance();item.key="isWebGL";item.setVal(Laya.Render.isWebGL);this.list2.push(item);item=System.StateItem.createInstance();item.key="isConchWebGL";item.setVal(Laya.Render.isConchWebGL);this.list2.push(item);item=System.StateItem.createInstance();item.key="is3DMode";item.setVal(Laya.Render.is3DMode);this.list2.push(item);item=System.StateItem.createInstance();item.key="isConchApp";item.setVal(Laya.Render.isConchApp);this.list2.push(item);item=System.StateItem.createInstance();item.key="isConchNode";item.setVal(Laya.Render.isConchNode);this.list2.push(item);item=System.StateItem.createInstance();item.key="Render.context";item.setVal(getClassName(Laya.Render.context));this.list2.push(item);item=System.StateItem.createInstance();item.key="FPS";this.list.push(item);this.FPS=item;item=System.StateItem.createInstance();item.key="canvasNormal";this.list.push(item);this.canvasNormal=item;item=System.StateItem.createInstance();item.key="canvasBitmap";this.list.push(item);this.canvasBitmap=item;item=System.StateItem.createInstance();item.key="canvasReCache";this.list.push(item);this.canvasReCache=item;item=System.StateItem.createInstance();item.key="currentMemorySize";this.list.push(item);this.currentMemorySize=item;item=System.StateItem.createInstance();item.key="shaderCall";this.list.push(item);this.shaderCall=item;item=System.StateItem.createInstance();item.key="drawCall";this.list.push(item);this.drawCall=item;item=System.StateItem.createInstance();item.key="trianglesFaces";this.list.push(item);this.trianglesFaces=item;item=System.StateItem.createInstance();item.key="spriteCount";this.list.push(item);this.spriteCount=item;item=System.StateItem.createInstance();item.key="spriteRenderUseCacheCount";this.list.push(item);this.spriteRenderUseCacheCount=item;item=System.StateItem.createInstance();item.key="treeNodeCollision";this.list.push(item);this.treeNodeCollision=item;item=System.StateItem.createInstance();item.key="treeSpriteCollision";this.list.push(item);this.treeSpriteCollision=item;item=System.StateItem.createInstance();item.key="renderSlow";this.list.push(item);this.renderSlow=item;for(var i=0;i<this.list2.length;i++){this.list2[i].y=i*40;this.addChild(this.list2[i])}for(var i=0;i<this.list.length;i++){this.list[i].y=(i+this.list2.length)*40;this.addChild(this.list[i])}this.height=(this.list.length+this.list2.length)*40;this.draggable=true;this.dragBounds=new laya.maths.Rectangle(-50,-50,Laya.stage.width+100,Laya.stage.height+100)};StateView.prototype.onShow=function(){Laya.timer.frameLoop(60,this,this.loop)};StateView.prototype.onHide=function(){Laya.timer.clear(this,this.loop)};StateView.prototype.loop=function(){var state=laya.utils.Stat;for(var i=0;i<this.list.length;i++){var item=this.list[i];item.setVal(state[item.key])}};return StateView}(System.StateViewStruct));System.StateView=StateView})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var ButtonPurpleBigStruct=(function(_super){__extends(ButtonPurpleBigStruct,_super);function ButtonPurpleBigStruct(){return _super.call(this)||this}ButtonPurpleBigStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","ButtonPurpleBig"))};ButtonPurpleBigStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};ButtonPurpleBigStruct.URL="ui://fiza9hgrupbl1d";ButtonPurpleBigStruct.DependPackages=["System"];return ButtonPurpleBigStruct}(fairygui.GButton));System.ButtonPurpleBigStruct=ButtonPurpleBigStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var ButtonPurpleBig=(function(_super){__extends(ButtonPurpleBig,_super);function ButtonPurpleBig(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonPurpleBig}(System.ButtonPurpleBigStruct));System.ButtonPurpleBig=ButtonPurpleBig})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var ButtonYellowBigStruct=(function(_super){__extends(ButtonYellowBigStruct,_super);function ButtonYellowBigStruct(){return _super.call(this)||this}ButtonYellowBigStruct.createInstance=function(){return(fairygui.UIPackage.createObject("System","ButtonYellowBig"))};ButtonYellowBigStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};ButtonYellowBigStruct.URL="ui://fiza9hgrupbl1c";ButtonYellowBigStruct.DependPackages=["System"];return ButtonYellowBigStruct}(fairygui.GButton));System.ButtonYellowBigStruct=ButtonYellowBigStruct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var ButtonYellowBig=(function(_super){__extends(ButtonYellowBig,_super);function ButtonYellowBig(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonYellowBig}(System.ButtonYellowBigStruct));System.ButtonYellowBig=ButtonYellowBig})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var PopUp406Struct=(function(_super){__extends(PopUp406Struct,_super);function PopUp406Struct(){return _super.call(this)||this}PopUp406Struct.createInstance=function(){return(fairygui.UIPackage.createObject("System","PopUp406"))};PopUp406Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};PopUp406Struct.URL="ui://fiza9hgrupbl1k";PopUp406Struct.DependPackages=["System"];return PopUp406Struct}(fairygui.GComponent));System.PopUp406Struct=PopUp406Struct})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var PopUp406=(function(_super){__extends(PopUp406,_super);function PopUp406(){return _super!==null&&_super.apply(this,arguments)||this}return PopUp406}(System.PopUp406Struct));System.PopUp406=PopUp406})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var fgui;(function(fgui){var System;(function(System){var SystemBinder=(function(){function SystemBinder(){}SystemBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(System.LoaderEnterGame.URL,System.LoaderEnterGame);fairygui.UIObjectFactory.setPackageItemExtension(System.ProgressRedBar.URL,System.ProgressRedBar);fairygui.UIObjectFactory.setPackageItemExtension(System.WindowModalWaiting.URL,System.WindowModalWaiting);fairygui.UIObjectFactory.setPackageItemExtension(System.GlobalModalWaiting.URL,System.GlobalModalWaiting);fairygui.UIObjectFactory.setPackageItemExtension(System.SystemToastMessage.URL,System.SystemToastMessage);fairygui.UIObjectFactory.setPackageItemExtension(System.SystemConfirmMessage.URL,System.SystemConfirmMessage);fairygui.UIObjectFactory.setPackageItemExtension(System.CommonDialogUI.URL,System.CommonDialogUI);fairygui.UIObjectFactory.setPackageItemExtension(System.SystemAlertMessage.URL,System.SystemAlertMessage);fairygui.UIObjectFactory.setPackageItemExtension(System.BGModel.URL,System.BGModel);fairygui.UIObjectFactory.setPackageItemExtension(System.SystemAddItemMessage.URL,System.SystemAddItemMessage);fairygui.UIObjectFactory.setPackageItemExtension(System.LabItem_big.URL,System.LabItem_big);fairygui.UIObjectFactory.setPackageItemExtension(System.GMLanuchButton.URL,System.GMLanuchButton);fairygui.UIObjectFactory.setPackageItemExtension(System.ScreenBG.URL,System.ScreenBG);fairygui.UIObjectFactory.setPackageItemExtension(System.StateView.URL,System.StateView);fairygui.UIObjectFactory.setPackageItemExtension(System.StateItem.URL,System.StateItem);fairygui.UIObjectFactory.setPackageItemExtension(System.SystemToastText.URL,System.SystemToastText);fairygui.UIObjectFactory.setPackageItemExtension(System.ButtonYellowBig.URL,System.ButtonYellowBig);fairygui.UIObjectFactory.setPackageItemExtension(System.ButtonPurpleBig.URL,System.ButtonPurpleBig);fairygui.UIObjectFactory.setPackageItemExtension(System.CloseBtn.URL,System.CloseBtn);fairygui.UIObjectFactory.setPackageItemExtension(System.PopUp406.URL,System.PopUp406);fairygui.UIObjectFactory.setPackageItemExtension(System.BarSquare.URL,System.BarSquare)};return SystemBinder}());System.SystemBinder=SystemBinder})(System=fgui.System||(fgui.System={}))})(fgui||(fgui={}));var Games;(function(Games){var SystemToastMessag=(function(){function SystemToastMessag(){this.list=[];this.pools=[];this.timeSpacing=1}SystemToastMessag.prototype.play=function(txt){if(txt!=this.lastTxt){this.show(txt)}else{if(getTime()-this.lastTime>=this.timeSpacing){this.show(txt)}}};SystemToastMessag.prototype.show=function(txt){this.lastTxt=txt;this.lastTime=getTime();var item;if(this.pools.length>0){item=this.pools.pop()}else{item=fgui.System.SystemToastMessage.createInstance();this.list.push(item)}item.play(txt,Handler.create(this,this.onItemComplete))};SystemToastMessag.prototype.onItemComplete=function(item){this.pools.push(item)};return SystemToastMessag}());Games.SystemToastMessag=SystemToastMessag})(Games||(Games={}));var Games;(function(Games){var SystemMessag=(function(){function SystemMessag(){this.toastMessage=new Games.SystemToastMessag();this._effectMsg=new Games.SystemEffect()}Object.defineProperty(SystemMessag,"Instance",{get:function(){if(!SystemMessag._Instance){SystemMessag._Instance=new SystemMessag()}return SystemMessag._Instance},enumerable:true,configurable:true});SystemMessag.prototype.playOpenSound=function(){if(window.Game&&window.Game["_isInstall"]){Game.sound.playSound(SoundKey.MM02_Popup)}};Object.defineProperty(SystemMessag.prototype,"alertMessage",{get:function(){if(!this._alertMessage){this._alertMessage=fgui.System.SystemAlertMessage.createInstance()}return this._alertMessage},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"confirmMessage",{get:function(){if(!this._confirmMessage){this._confirmMessage=fgui.System.SystemConfirmMessage.createInstance()}return this._confirmMessage},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"renameComfirm",{get:function(){if(!this._renameComfirm){this._renameComfirm=fgui.PfSkin.RenameUI.createInstance()}return this._renameComfirm},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"setNumMessage",{get:function(){if(!this._setNumMessage){this._setNumMessage=fgui.Common.SystemSetNumMessage.createInstance()}return this._setNumMessage},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"getRewardMessage",{get:function(){if(!this._getRewardMessage){this._getRewardMessage=fgui.System.SystemAddItemMessage.createInstance()}return this._getRewardMessage},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"selectActorPanel",{get:function(){if(!this._selectActorPanel){this._selectActorPanel=fgui.Bag.SystemSelectActorPanel.createInstance()}return this._selectActorPanel},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"getItemMessage",{get:function(){if(!this._getItemMessage){this._getItemMessage=fgui.Common.SystemGetItemMessage.createInstance()}return this._getItemMessage},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"skillEffectUI",{get:function(){if(!this._actorSkillEffect){this._actorSkillEffect=fgui.Common.SkillEffectUI.createInstance()}return this._actorSkillEffect},enumerable:true,configurable:true});SystemMessag.prototype.playSkillEffect=function(acotrId,type,callback){this.skillEffectUI.playSkillEffect(acotrId,type,callback)};Object.defineProperty(SystemMessag.prototype,"addFansMessage",{get:function(){if(!this._addFansMessage){this._addFansMessage=fgui.Common.SystemAddFansMessage.createInstance()}return this._addFansMessage},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"alertAwardsDialog",{get:function(){if(!this._alertAwardsDialog){this._alertAwardsDialog=fgui.Common.SystemAlertAwards.createInstance()}return this._alertAwardsDialog},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"rankMovieInfo",{get:function(){if(!this._rankMovieInfo){this._rankMovieInfo=fgui.Common.RankMovieInfoPanel.createInstance()}return this._rankMovieInfo},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"rankPlayerInfo",{get:function(){if(!this._rankPlayerInfo){this._rankPlayerInfo=fgui.Common.RankPlayerInfoPanel.createInstance()}return this._rankPlayerInfo},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"rankRenamePanel",{get:function(){if(!this._rankRenamePanel){this._rankRenamePanel=fgui.Common.RankRenamePanel.createInstance()}return this._rankRenamePanel},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"streetLevelUpPanel",{get:function(){if(!this._streetLevelUpPanel){this._streetLevelUpPanel=fgui.Common.StreetLevelUp.createInstance()}return this._streetLevelUpPanel},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"playerLevelUpPanel",{get:function(){if(!this._playerLevelUpPanel){this._playerLevelUpPanel=fgui.PlayerInfo.PlayerLevelUp.createInstance()}return this._playerLevelUpPanel},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"alertTextIconDialog",{get:function(){if(!this._alertTextIconDialog){this._alertTextIconDialog=fgui.Common.SystemAlertTextIconMessage.createInstance()}return this._alertTextIconDialog},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"wayAlertDialog",{get:function(){if(!this._wayAlertDialog){this._wayAlertDialog=fgui.Common.GetWayAlert.createInstance()}return this._wayAlertDialog},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"itemInfoPanel",{get:function(){if(!this._itemInfoPanel){this._itemInfoPanel=fgui.Common.ItemInfo.createInstance()}return this._itemInfoPanel},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"itemLockTipPanel",{get:function(){if(!this._itemLockTipPanel){this._itemLockTipPanel=fgui.Common.ItemLockTip.createInstance()}return this._itemLockTipPanel},enumerable:true,configurable:true});Object.defineProperty(SystemMessag.prototype,"selectItemPanel",{get:function(){if(!this._selectItemPanel){this._selectItemPanel=fgui.Common.SystemSelectItemMessage.createInstance()}return this._selectItemPanel},enumerable:true,configurable:true});SystemMessag.prototype.toastText=function(txt){this.toastMessage.play(txt)};SystemMessag.prototype.toastMsg=function(msgKey){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}var txt=(_a=Game.config.msg).getTxtFormat.apply(_a,[msgKey].concat(args));this.toastMessage.play(txt);var _a};SystemMessag.prototype.toastFormatText=function(txt){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}this.toastText(format(txt,args))};SystemMessag.prototype.toastItemNotEnough=function(id){var config=Game.config.item.getConfig(id);var itemName="";if(config){itemName=config.name}else{itemName=id.toString()}this.toastText(format(Games.TEXT.ToastTextItemNotEnough,itemName))};SystemMessag.prototype.alertText=function(txt,yesObj,yesFun){this.alrtTextFull(txt,"",yesObj,yesFun)};SystemMessag.prototype.alertMsg=function(msgKey,yesObj,yesFun){var txt=Game.config.msg.getTxt(msgKey);this.alrtTextFull(txt,"",yesObj,yesFun)};SystemMessag.prototype.alertMsgFormat=function(msgKey,msgargs,yesObj,yesFun){var txt=(_a=Game.config.msg).getTxtFormat.apply(_a,[msgKey].concat(msgargs));this.alrtTextFull(txt,"",yesObj,yesFun);var _a};SystemMessag.prototype.alrtTMsgFull=function(msgkey,msgargs,title,yesObj,yesFun,yesTxt,buttonEnable,isClickButtonAutoClose){if(title===void 0){title=""}if(yesObj===void 0){yesObj=null}if(yesFun===void 0){yesFun=null}if(yesTxt===void 0){yesTxt=null}if(buttonEnable===void 0){buttonEnable=true}if(isClickButtonAutoClose===void 0){isClickButtonAutoClose=true}var txt=(_a=Game.config.msg).getTxtFormat.apply(_a,[msgkey].concat(msgargs));this.alrtTextFull(txt,"",yesObj,yesFun,yesTxt,buttonEnable,isClickButtonAutoClose);var _a};SystemMessag.prototype.alrtTextFull=function(txt,title,yesObj,yesFun,yesTxt,closeButtonVisiable,buttonEnable,isClickButtonAutoClose){if(title===void 0){title=""}if(yesObj===void 0){yesObj=null}if(yesFun===void 0){yesFun=null}if(yesTxt===void 0){yesTxt=null}if(closeButtonVisiable===void 0){closeButtonVisiable=true}if(buttonEnable===void 0){buttonEnable=true}if(isClickButtonAutoClose===void 0){isClickButtonAutoClose=true}if(isNullOrEmpty(yesTxt)){yesTxt=LoadingStateTxt.VersionAlertUpdateOKBtn}this.alertMessage.open(txt,title,yesObj,yesFun,yesTxt,closeButtonVisiable,buttonEnable,isClickButtonAutoClose);this.playOpenSound()};SystemMessag.prototype.closeAlert=function(){this.alertMessage.close()};SystemMessag.prototype.confirmMsg=function(msgkey,msgargs,title,caller,yesFun,noFun,yesTxt,noTxt,closeButtonVisiable,isClickButtonAutoClose){if(title===void 0){title=""}if(caller===void 0){caller=null}if(yesFun===void 0){yesFun=null}if(noFun===void 0){noFun=null}if(yesTxt===void 0){yesTxt=null}if(noTxt===void 0){noTxt=null}if(closeButtonVisiable===void 0){closeButtonVisiable=true}if(isClickButtonAutoClose===void 0){isClickButtonAutoClose=true}var txt=(_a=Game.config.msg).getTxtFormat.apply(_a,[msgkey].concat(msgargs));this.confirmText(txt,title,caller,yesFun,noFun,yesTxt,noTxt,closeButtonVisiable,isClickButtonAutoClose);var _a};SystemMessag.prototype.confirmText=function(txt,title,caller,yesFun,noFun,yesTxt,noTxt,closeButtonVisiable,isClickButtonAutoClose){if(title===void 0){title=""}if(caller===void 0){caller=null}if(yesFun===void 0){yesFun=null}if(noFun===void 0){noFun=null}if(yesTxt===void 0){yesTxt=null}if(noTxt===void 0){noTxt=null}if(closeButtonVisiable===void 0){closeButtonVisiable=true}if(isClickButtonAutoClose===void 0){isClickButtonAutoClose=true}if(isNullOrEmpty(yesTxt)){yesTxt=Games.TEXT.ButtonYes}if(isNullOrEmpty(noTxt)){noTxt=Games.TEXT.ButtonNo}this.confirmMessage.open(txt,title,caller,yesFun,noFun,yesTxt,noTxt,closeButtonVisiable,isClickButtonAutoClose);this.playOpenSound()};SystemMessag.prototype.confirmTextIcon=function(itemList,title,content,confirm,caller,confirmText,isShowClose,isShowCurNum){if(isShowCurNum===void 0){isShowCurNum=true}this.alertTextIconDialog.open(itemList,title,content,confirm,caller,confirmText,isShowClose,isShowCurNum);this.playOpenSound()};SystemMessag.prototype.alertTextIcon=function(itemList,title,confirm,caller){this.alertTextIconDialog.open(itemList,title,"",confirm,null,null,null,false);this.playOpenSound()};SystemMessag.prototype.alertTextIconByProtoItems=function(itemList,title,content,confirm,caller,confirmText,isShowClose){this.alertTextIconDialog.open(ItemDescList2DTItemNumList(itemList),title,content,confirm,caller,confirmText,isShowClose,false);this.playOpenSound()};SystemMessag.prototype.confirmBuyText=function(txt,cost,caller,yesFun){var costId=cost[0];var costnum=cost[1];var config=Game.config.item.getConfig(costId);var costItemName="";if(cost){costItemName=config.name}else{costItemName=costId+""}this.confirmText(format(txt,costnum,costItemName),Games.TEXT.SureBuy,null,function(){if(Game.moduleModel.item.getItemNum(costId)>=costnum){if(yesFun){if(caller){yesFun.apply(caller)}else{yesFun()}}}else{Game.system.openItemWay(costId,costnum)}})};SystemMessag.prototype.setNumText=function(limit,txt,title,caller,yesFun,noFun,yesTxt,closeButtonVisiable,isClickButtonAutoClose){if(txt===void 0){txt=""}if(title===void 0){title=""}if(caller===void 0){caller=null}if(yesFun===void 0){yesFun=null}if(noFun===void 0){noFun=null}if(yesTxt===void 0){yesTxt=null}if(closeButtonVisiable===void 0){closeButtonVisiable=true}if(isClickButtonAutoClose===void 0){isClickButtonAutoClose=true}if(isNullOrEmpty(yesTxt)){yesTxt=Games.TEXT.ButtonYes}this.setNumMessage.open(limit,txt,title,caller,yesFun,noFun,yesTxt,closeButtonVisiable,isClickButtonAutoClose);this.playOpenSound()};SystemMessag.prototype.getRewardText=function(items,title,autoCloseTime){var list=Games.ItemData.BinningItemList(items);this.getRewardMessage.open(list,title,autoCloseTime);this.playOpenSound()};SystemMessag.prototype.selectActor=function(actorList,selectFun,caller,title){if(caller===void 0){caller=null}if(title===void 0){title=""}this.selectActorPanel.open(actorList,selectFun,caller,title);this.playOpenSound()};SystemMessag.prototype.getItemText=function(items,closeFun,isAutoClose){var list=Games.ItemData.BinningItemList(items);this.getItemMessage.open(list,closeFun,isAutoClose);return this.getItemMessage};SystemMessag.prototype.addFansText=function(addFans,closeHandler,title,autoCloseTime){if(autoCloseTime===void 0){autoCloseTime=0}this.addFansMessage.open(addFans,closeHandler,title,autoCloseTime);this.playOpenSound()};SystemMessag.prototype.tryAlertLevelUp=function(closeHandler){var hasMsg=Game.moduleModel.playerInfo.hasPlayerLevelUpMsg;if(hasMsg){var msg=Game.moduleModel.playerInfo.dequeuePlayerLevelUpMsg();this.playerLevelUpPanel.show(msg.old_level,msg.now_level,msg.story,closeHandler);this.playOpenSound()}else{if(closeHandler){closeHandler.run();closeHandler=null}}};SystemMessag.prototype.playerInfo=function(playerData){this.rankPlayerInfo.open(playerData)};SystemMessag.prototype.movieInfo=function(movieData){this.rankMovieInfo.open(movieData)};SystemMessag.prototype.rename=function(title,caller,renameFun,oldName){if(oldName===void 0){oldName=""}this.rankRenamePanel.open(title,caller,renameFun,oldName)};SystemMessag.prototype.streetLevelUp=function(){this.streetLevelUpPanel.open()};SystemMessag.prototype.selectItem=function(itemList,caller,fun){var list=Games.ItemData.BinningItemList(itemList);this.selectItemPanel.open(list,caller,fun)};SystemMessag.prototype.alertMessageHide=function(){if(this._alertMessage){this._alertMessage.close()}if(this._confirmMessage){this._confirmMessage.close()}if(this._getRewardMessage){this._getRewardMessage.close()}if(this._setNumMessage){this._setNumMessage.close()}};SystemMessag.prototype.openRename=function(dialogMsg,caller,okFunc,closeFunc,okBtnTxt,defaultTxt,promptText,maxLen,url,cost,isClickButtonAutoClose,randomNames){if(isClickButtonAutoClose===void 0){isClickButtonAutoClose=true}this.renameComfirm.open(dialogMsg,caller,okFunc,closeFunc,okBtnTxt,defaultTxt,promptText,maxLen,url,cost,isClickButtonAutoClose,randomNames);this.playOpenSound()};SystemMessag.prototype.hideRename=function(){this.renameComfirm.close()};SystemMessag.prototype.openItemWay=function(itemId,costNum){this.wayAlertDialog.setInfo(itemId,costNum);this.playOpenSound()};SystemMessag.prototype.showItemInfo=function(button,itemId){this.itemInfoPanel.Show(button,itemId)};SystemMessag.prototype.showItemLockTip=function(button,tip,title){this.itemLockTipPanel.Show(button,tip,title)};SystemMessag.prototype.showAssetFx=function(items,root,startPos){if(root==null){root=Games.MenuLayer.dialogModel}if(startPos==null){startPos=new Point(root.width/2,root.height/2)}this.showAssetFxIndex=0;this.showAssetItems=items;Laya.timer.clear(this,this.loopShowAssetFx);Laya.timer.loop(100,this,this.loopShowAssetFx,[root,startPos])};SystemMessag.prototype.loopShowAssetFx=function(root,startPos){if(this.showAssetFxIndex>=this.showAssetItems.length){console.log("finish");Laya.timer.clear(this,this.loopShowAssetFx);return}var item=this.showAssetItems[this.showAssetFxIndex];this.showAssetFxIndex++;if(item.itemType==1||item.itemType==2||item.itemType==3||item.itemType==11||item.itemType==12){var endPos=new Point(0,0);FguiHelper.startTrail(item.itemId,startPos,endPos,500,root)}else{if(item.itemType==4||item.itemType==5||item.itemType==6||item.itemType==7||item.itemType==8||item.itemType==9){var endPos=new Point(root.width,root.height);FguiHelper.startTrail(item.itemId,startPos,endPos,500,root)}}};SystemMessag.prototype.openAwardsAlert=function(itemList,title,confirm,hideClose){this.alertAwardsDialog.open(itemList,title,confirm,null,hideClose);this.playOpenSound()};SystemMessag.prototype.openAwardsAlertByProtoItems=function(itemList,title,confirm,hideClose){this.openAwardsAlert(ItemDescList2DTItemNumList(itemList),title,confirm,hideClose)};SystemMessag.prototype.playEffects=function(dts){this._effectMsg.playeffects(dts)};Object.defineProperty(SystemMessag.prototype,"alertGift",{get:function(){if(!this._alertGift){this._alertGift=fgui.Common.SystemAlertGift.createInstance()}return this._alertGift},enumerable:true,configurable:true});SystemMessag.prototype.openAwardsGift=function(itemList,title,desc,btnTxt,btnEnabled,confirm){this.alertGift.open(itemList,title,desc,btnTxt,btnEnabled,confirm);this.playOpenSound()};Object.defineProperty(SystemMessag.prototype,"actorBreakEffect",{get:function(){if(!this._actorBreakEffect){this._actorBreakEffect=fgui.Common.ActorLvBreaktUI.createInstance()}return this._actorBreakEffect},enumerable:true,configurable:true});SystemMessag.prototype.playBreakEffect=function(acotrId,desc){this.actorBreakEffect.playEffect(acotrId,desc)};Object.defineProperty(SystemMessag.prototype,"goOtherFunction",{get:function(){if(!this._goOtherFunction){this._goOtherFunction=fgui.Common.SystemGoOtherFunction.createInstance()}return this._goOtherFunction},enumerable:true,configurable:true});SystemMessag.prototype.openGoOtherFunc=function(type,title,desc,confirmFunc){this.goOtherFunction.open(type,title,desc,confirmFunc)};Object.defineProperty(SystemMessag.prototype,"unlockPanel",{get:function(){if(!this._unlockPanel){this._unlockPanel=fgui.Common.UnlockPanel.createInstance()}return this._unlockPanel},enumerable:true,configurable:true});SystemMessag.prototype.openUnlock=function(unlockId){this.unlockPanel.openUnlock(unlockId)};SystemMessag.prototype.openUnlockLessonFunc=function(url,title){this.unlockPanel.openUnlockLessonFunc(url,title)};SystemMessag.prototype.closeUnlock=function(){this.unlockPanel.closeUnlock()};return SystemMessag}());Games.SystemMessag=SystemMessag})(Games||(Games={}));var Games;(function(Games){var GuiSetting=(function(){function GuiSetting(){}GuiSetting.getResPackagePath=function(packageName,dir){if(isNullOrEmpty(dir)){return""+GuiSetting.resRoot+packageName}else{return""+GuiSetting.resRoot+dir+"/"+packageName}};GuiSetting.getResPath=function(filename,dir){if(isNullOrEmpty(dir)){return""+GuiSetting.resRoot+filename}else{return""+GuiSetting.resRoot+dir+"/"+filename}};GuiSetting.addPackage=function(resKey,packageConfig){if(GuiSetting._uiPackageDict.hasKey(resKey)){return GuiSetting._uiPackageDict.getValue(resKey)}else{var pkg=fairygui.UIPackage.addPackage(resKey);GuiSetting._uiPackageDict.add(resKey,pkg);return pkg}};GuiSetting.removePackage=function(resKey,packageConfig){var pkg=GuiSetting._uiPackageDict.getValue(resKey);if(pkg){fairygui.UIPackage.removePackage(resKey);pkg.dispose();GuiSetting._uiPackageDict.remove(resKey)}GuiSetting._uiPackageDictForReferenceNum.remove(resKey)};GuiSetting.hasLoadPackage=function(resKey){return GuiSetting._uiPackageDict.hasKey(resKey)};GuiSetting.addPackageReferenceNum=function(resKey){var num=GuiSetting.getPackageReferenceNum(resKey)+1;if(num==0){num=1}console.log("~~addPackageReferenceNum:  "+num+"  "+resKey);GuiSetting._uiPackageDictForReferenceNum.add(resKey,num);return num};GuiSetting.removePackageReferenceNum=function(resKey){var num=GuiSetting.getPackageReferenceNum(resKey)-1;if(num<0){num=0}console.log("~~removePackageReferenceNum:  "+num+"  "+resKey);GuiSetting._uiPackageDictForReferenceNum.add(resKey,num);return num};GuiSetting.getPackageReferenceNum=function(resKey){return GuiSetting._uiPackageDictForReferenceNum.hasKey(resKey)?GuiSetting._uiPackageDictForReferenceNum.getValue(resKey):0};GuiSetting.resRoot="res/";GuiSetting.packageFileExtension="bin";GuiSetting._uiPackageDict=new Dictionary();GuiSetting._uiPackageDictForReferenceNum=new Dictionary();return GuiSetting}());Games.GuiSetting=GuiSetting})(Games||(Games={}));var Games;(function(Games){var MenuLayerType;(function(MenuLayerType){MenuLayerType[MenuLayerType.Home=1]="Home";MenuLayerType[MenuLayerType.HomeTop=2]="HomeTop";MenuLayerType[MenuLayerType.Module=3]="Module";MenuLayerType[MenuLayerType.ModuleTop=4]="ModuleTop";MenuLayerType[MenuLayerType.MainUI=5]="MainUI";MenuLayerType[MenuLayerType.Dialog=6]="Dialog";MenuLayerType[MenuLayerType.Guide=7]="Guide";MenuLayerType[MenuLayerType.Loader=8]="Loader";MenuLayerType[MenuLayerType.GM=9]="GM";MenuLayerType[MenuLayerType.FloatMsg=10]="FloatMsg"})(MenuLayerType=Games.MenuLayerType||(Games.MenuLayerType={}))})(Games||(Games={}));var Games;(function(Games){var MenuLayer=(function(){function MenuLayer(){}Object.defineProperty(MenuLayer,"dialogModel",{get:function(){if(!MenuLayer._dialogModel){MenuLayer._dialogModel=fgui.System.BGModel.createInstance()}return MenuLayer._dialogModel},enumerable:true,configurable:true});MenuLayer.showDialogModel=function(){MenuLayer.dialog.width=ScreenSetting.screenWidth;MenuLayer.dialog.height=ScreenSetting.screenHeight;MenuLayer.dialogModel.m_bg.alpha=0.8;MenuLayer.dialogModel.width=ScreenSetting.screenWidth;MenuLayer.dialogModel.height=ScreenSetting.screenHeight;if(MenuLayer.dialogModel){MenuLayer.dialog.addChildAt(MenuLayer.dialogModel,0)}};MenuLayer.resetDialogModelSize=function(){MenuLayer.dialog.width=ScreenSetting.screenWidth;MenuLayer.dialog.height=ScreenSetting.screenHeight;MenuLayer.dialogModel.width=ScreenSetting.screenWidth;MenuLayer.dialogModel.height=ScreenSetting.screenHeight};MenuLayer.hideDialogModel=function(){if(MenuLayer.dialogModel){MenuLayer.dialogModel.removeFromParent()}};MenuLayer.install=function(){Laya.stage.addChild(fairygui.GRoot.inst.displayObject);MenuLayer.root=fairygui.GRoot.inst;MenuLayer.home=MenuLayer.createLayer("MenuLayer-home");MenuLayer.homeTop=MenuLayer.createLayer("MenuLayer-homeTop");MenuLayer.module=MenuLayer.createLayer("MenuLayer-module");MenuLayer.moduleTop=MenuLayer.createLayer("MenuLayer-moduleTop");MenuLayer.mainUI=MenuLayer.createLayer("MenuLayer-mainUI");MenuLayer.dialog=MenuLayer.createLayer("MenuLayer-dialog");MenuLayer.guide=MenuLayer.createLayer("MenuLayer-guide");MenuLayer.loader=MenuLayer.createLayer("MenuLayer-loader");MenuLayer.gm=MenuLayer.createLayer("MenuLayer-gm");MenuLayer.floatMsg=MenuLayer.createLayer("MenuLayer-floatMsg");MenuLayer.dict.add(Games.MenuLayerType.Home,MenuLayer.home);MenuLayer.dict.add(Games.MenuLayerType.HomeTop,MenuLayer.homeTop);MenuLayer.dict.add(Games.MenuLayerType.Module,MenuLayer.module);MenuLayer.dict.add(Games.MenuLayerType.ModuleTop,MenuLayer.moduleTop);MenuLayer.dict.add(Games.MenuLayerType.MainUI,MenuLayer.mainUI);MenuLayer.dict.add(Games.MenuLayerType.Dialog,MenuLayer.dialog);MenuLayer.dict.add(Games.MenuLayerType.Guide,MenuLayer.guide);MenuLayer.dict.add(Games.MenuLayerType.Loader,MenuLayer.loader);MenuLayer.dict.add(Games.MenuLayerType.GM,MenuLayer.gm);MenuLayer.dict.add(Games.MenuLayerType.FloatMsg,MenuLayer.floatMsg)};MenuLayer.getLayer=function(layerType){return MenuLayer.dict.getValue(layerType)};MenuLayer.createLayer=function(name){var root=MenuLayer.root;var v=new fairygui.GRoot();if(name){v.name=name}v.setSize(root.width,root.height);root.addChild(v);return v};MenuLayer.dict=new Dictionary();return MenuLayer}());Games.MenuLayer=MenuLayer})(Games||(Games={}));var Games;(function(Games){var LoaderPanel=(function(_super){__extends(LoaderPanel,_super);function LoaderPanel(){var _this=_super.call(this)||this;_this.sShowComplete=new Signal();_this.sHideComplete=new Signal();return _this}LoaderPanel.prototype.onInit=function(){_super.prototype.onInit.call(this)};LoaderPanel.prototype.getContentVisiable=function(){if(this.contentPane){return this.contentPane.visible}return false};LoaderPanel.prototype.setContentVisiable=function(value){if(this.contentPane){this.contentPane.visible=value}};LoaderPanel.prototype.doShowAnimation=function(){this.onWindowWillShow();_super.prototype.doShowAnimation.call(this)};LoaderPanel.prototype.doHideAnimation=function(){this.onWindowWillHide();_super.prototype.doHideAnimation.call(this)};LoaderPanel.prototype.onShown=function(){this.sShowComplete.dispatch()};LoaderPanel.prototype.onHide=function(){this.sHideComplete.dispatch()};LoaderPanel.prototype.setMax=function(value){};LoaderPanel.prototype.setValue=function(value){};LoaderPanel.prototype.setTip=function(tip){};LoaderPanel.prototype.setTips=function(tips){};LoaderPanel.prototype.setVersion=function(){};return LoaderPanel}(Games.FWindow));Games.LoaderPanel=LoaderPanel})(Games||(Games={}));var Games;(function(Games){var LoaderCirclePanel=(function(_super){__extends(LoaderCirclePanel,_super);function LoaderCirclePanel(){return _super.call(this)||this}LoaderCirclePanel.prototype.onInit=function(){this.contentPane=fgui.System.GlobalModalWaiting.createInstance();this.center();this.setPivot(0.5,0.5)};return LoaderCirclePanel}(Games.LoaderPanel));Games.LoaderCirclePanel=LoaderCirclePanel})(Games||(Games={}));var Games;(function(Games){var LoaderEnterPanel=(function(_super){__extends(LoaderEnterPanel,_super);function LoaderEnterPanel(){var _this=_super.call(this)||this;_this.tips=[];_this.__setTipHandlerTimer=-1;return _this}LoaderEnterPanel.prototype.onInit=function(){this.loader=fgui.System.LoaderEnterGame.createInstance();this.contentPane=this.loader;_super.prototype.onInit.call(this);this.tips=LoadingStateTxt.tips;this.setVersion()};LoaderEnterPanel.prototype.onShown=function(){_super.prototype.onShown.call(this);this.beginTips();this.setVersion();gameApplication.sInfo.add(this.setVersion,this)};LoaderEnterPanel.prototype.onHide=function(){_super.prototype.onHide.call(this);this.stopTips();gameApplication.sInfo.remove(this.setVersion,this)};LoaderEnterPanel.prototype.beginTips=function(){this.stopTips();if(this.tips&&this.tips.length>0){this.__setTipHandler()}};LoaderEnterPanel.prototype.stopTips=function(){if(this.__setTipHandlerTimer>0){clearTimeout(this.__setTipHandlerTimer);this.__setTipHandlerTimer=-1}};LoaderEnterPanel.prototype.__setTipHandler=function(){var _this=this;this.loader.m_help.text=this.tips[Random.range(0,this.tips.length)];this.__setTipHandlerTimer=setTimeout(function(){_this.__setTipHandler()},Random.range(100,400))};LoaderEnterPanel.prototype.setMax=function(value){this.loader.m_progressBar.max=value};LoaderEnterPanel.prototype.setValue=function(value){this.loader.m_progressBar.value=value};LoaderEnterPanel.prototype.setTip=function(tip){this.loader.m_title.text=tip};LoaderEnterPanel.prototype.setTips=function(tips){};LoaderEnterPanel.prototype.setVersion=function(){this.loader.m_txt_gamever.text="GameVersion:"+GameVersions.Manager.Instance.localAppVersionData.toString();this.loader.m_txt_resVer.text="ResVersion:"+GameVersions.Manager.Instance.localResVersionData.toString()};return LoaderEnterPanel}(Games.LoaderPanel));Games.LoaderEnterPanel=LoaderEnterPanel})(Games||(Games={}));var Games;(function(Games){var LoaderManager=(function(_super){__extends(LoaderManager,_super);function LoaderManager(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dict=new Dictionary();_this.isInited=false;return _this}LoaderManager.prototype.install=function(){if(this.isInited){return}this.isInited=true;var ctl=new Games.LoaderCtl();ctl.loaderId=Games.LoaderId.None;this.dict.add(ctl.loaderId,ctl);ctl=new Games.LoaderCtl();ctl.loaderId=Games.LoaderId.Circle;ctl.loaderPanel=new Games.LoaderCirclePanel();this.dict.add(ctl.loaderId,ctl);var defaultPanel=new Games.LoaderEnterPanel();ctl=new Games.LoaderCtl();ctl.loaderId=Games.LoaderId.Launch;ctl.loaderPanel=defaultPanel;this.dict.add(ctl.loaderId,ctl);ctl=new Games.LoaderCtl();ctl.loaderId=Games.LoaderId.EnterGame;ctl.loaderPanel=defaultPanel;this.dict.add(ctl.loaderId,ctl);ctl=new Games.LoaderCtl();ctl.loaderId=Games.LoaderId.Module;ctl.loaderPanel=defaultPanel;this.dict.add(ctl.loaderId,ctl)};LoaderManager.prototype.getLoaderCtl=function(loaderId){return this.dict.getValue(loaderId)};LoaderManager.prototype.open=function(loaderId){var loaderCtl=this.getLoaderCtl(loaderId);loaderCtl.open();this.current=loaderCtl;return loaderCtl};LoaderManager.prototype.close=function(loaderId){var loaderCtl=this.getLoaderCtl(loaderId);if(loaderCtl){if(this.current==loaderCtl){this.current=null}loaderCtl.close()}};LoaderManager.prototype.closeAll=function(){var list=this.dict.getValues();for(var i=0;i<list.length;i++){list[i].close()}this.current=null};LoaderManager.prototype.setProgress=function(progress){if(this.current){this.current.setProgress(progress)}};LoaderManager.prototype.setMax=function(max){if(this.current){this.current.setMax(max)}};return LoaderManager}(frame.base.BaseSingleton));Games.LoaderManager=LoaderManager})(Games||(Games={}));var Games;(function(Games){var LoaderId;(function(LoaderId){LoaderId[LoaderId.None=0]="None";LoaderId[LoaderId.Circle=1]="Circle";LoaderId[LoaderId.Launch=2]="Launch";LoaderId[LoaderId.EnterGame=3]="EnterGame";LoaderId[LoaderId.Module=4]="Module"})(LoaderId=Games.LoaderId||(Games.LoaderId={}))})(Games||(Games={}));if(!window.LoaderId){window.LoaderId=Games.LoaderId}var Games;(function(Games){var LoaderCtl=(function(){function LoaderCtl(){this.isOpened=false;this.delayShowPanelHandler=-1}Object.defineProperty(LoaderCtl.prototype,"isDelayShowPanel",{get:function(){return this.loaderId==Games.LoaderId.Module},enumerable:true,configurable:true});LoaderCtl.prototype.open=function(){var _this=this;this.isOpened=true;if(this.loaderPanel){this.loaderPanel.showOn(Games.MenuLayer.loader);this.loaderPanel.setContentVisiable(true);if(this.isDelayShowPanel){this.loaderPanel.setContentVisiable(false);clearTimeout(this.delayShowPanelHandler);this.delayShowPanelHandler=setTimeout(function(){_this.loaderPanel.setContentVisiable(true)},100)}}};LoaderCtl.prototype.close=function(){if(this.delayShowPanelHandler!=-1){clearTimeout(this.delayShowPanelHandler);this.delayShowPanelHandler=-1}this.isOpened=false;if(this.loaderPanel){this.loaderPanel.hide();if(this.isDelayShowPanel){this.loaderPanel.setContentVisiable(false)}}};LoaderCtl.prototype.setProgress=function(progress){if(this.loaderPanel){this.loaderPanel.setValue(progress)}};LoaderCtl.prototype.setMax=function(max){if(this.loaderPanel){this.loaderPanel.setMax(max)}};LoaderCtl.prototype.setTip=function(txt){if(this.loaderPanel){this.loaderPanel.setTip(txt)}};LoaderCtl.prototype.setTips=function(txts){if(this.loaderPanel){this.loaderPanel.setTips(txts)}};LoaderCtl.prototype.setVersion=function(){if(this.loaderPanel){this.loaderPanel.setVersion()}};return LoaderCtl}());Games.LoaderCtl=LoaderCtl})(Games||(Games={}));var FGLoader=(function(_super){__extends(FGLoader,_super);function FGLoader(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(FGLoader,"freeList",{get:function(){if(FGLoader._freeList.length>0){FGLoader._freeList.length=0}var dict=FGLoader.freeDictForNum.__getDict();for(var url in dict){if(FGLoader.freeDictForNum.getValue(url)<=0){FGLoader._freeList.push(url)}}return FGLoader._freeList},enumerable:true,configurable:true});FGLoader.setUse=function(url){var num=FGLoader.freeDictForNum.hasKey(url)?FGLoader.freeDictForNum.getValue(url)+1:1;FGLoader.freeDictForNum.add(url,num)};FGLoader.setFree=function(url){if(url.indexOf("/MenuIcon/")!=-1){return}FGLoader.freeDictForTime.add(url,Game.time.localTime);var num=FGLoader.freeDictForNum.hasKey(url)?FGLoader.freeDictForNum.getValue(url)-1:0;if(num<0){num=0}FGLoader.freeDictForNum.add(url,num)};FGLoader.removeFree=function(url){FGLoader.freeDictForTime.remove(url);FGLoader.freeDictForNum.remove(url)};FGLoader.clearAllFree=function(list){if(!list){list=FGLoader.freeList}while(list.length>0){var url=list.pop();FGLoader.removeFree(url);Laya.loader.clearRes(url)}};FGLoader.clearFreeLong=function(){if(FGLoader.freeDictForNum.count<=gameDeviceConfig.fguiLoaderCacheNum){return}FGLoader._freeLongList.length=0;var dict=FGLoader.freeDictForNum.__getDict();for(var url in dict){if(FGLoader.freeDictForNum.getValue(url)<=0){var time=Game.time.localTime-FGLoader.freeDictForTime.getValueOrDefault(url,0);if(time>gameDeviceConfig.fguiLoaderCacheTime){FGLoader._freeLongList.push(url)}}}FGLoader.clearAllFree(FGLoader._freeLongList)};FGLoader.prototype.loadContent=function(){_super.prototype.loadContent.call(this)};FGLoader.prototype.getPackagenameByUrl=function(url){return url.replace("ui://","").split("/")[0]};FGLoader.prototype.loadFromPackage=function(itemURL){var packageItem=fairygui.UIPackage.getItemByURL(itemURL);if(packageItem){_super.prototype.loadFromPackage.call(this,itemURL)}else{var packagename=this.getPackagenameByUrl(itemURL);var config=Game.spriteRes.getconfig(packagename);if(!config){config=Game.guiRes.getconfig(packagename)}if(config){Game.asset.loadFgui(config,this,this.onLoadPackage)}}};FGLoader.prototype.onLoadPackage=function(){_super.prototype.loadFromPackage.call(this,this.url)};FGLoader.prototype.loadExternal=function(){FGLoader.setUse(this.url);_super.prototype.loadExternal.call(this)};FGLoader.prototype.freeExternal=function(texture){_super.prototype.freeExternal.call(this,texture);if(!isNullOrEmpty(texture.url)){FGLoader.setFree(texture.url);texture.url=""}};FGLoader.prototype.onExternalLoadSuccess=function(texture){_super.prototype.onExternalLoadSuccess.call(this,texture)};FGLoader.prototype.onExternalLoadFailed=function(){_super.prototype.onExternalLoadFailed.call(this)};FGLoader.freeDictForTime=new Dictionary();FGLoader.freeDictForNum=new Dictionary();FGLoader._freeList=[];FGLoader._freeLongList=[];return FGLoader}(fairygui.GLoader));var configs;(function(configs){var BaseConfig=(function(){function BaseConfig(){}return BaseConfig}());configs.BaseConfig=BaseConfig})(configs||(configs={}));var configs;(function(configs){var BaseConfigRender=(function(){function BaseConfigRender(){this.configs=new Dictionary()}BaseConfigRender.prototype.getConfigList=function(){return this.configs.getValues()};Object.defineProperty(BaseConfigRender.prototype,"configList",{get:function(){return this.configs.getValues()},enumerable:true,configurable:true});BaseConfigRender.prototype.getConfig=function(id){if(!this.configs.hasKey(id)){console.log(this.tableName+" \u6CA1\u6709 id="+id+" \u7684\u914D\u7F6E")}return this.configs.getValue(id)};BaseConfigRender.prototype.addConfig=function(config){this.configs.add(config.id,config)};BaseConfigRender.prototype.getConfigPath=function(){return"config/csv/"+this.tableName+".csv"};BaseConfigRender.prototype.load=function(configLoader,onComplete){};BaseConfigRender.prototype.reload=function(configLoader,onComplete){};BaseConfigRender.prototype.onGameLoadedAll=function(){};BaseConfigRender.prototype.clear=function(){this.configs.clear()};return BaseConfigRender}());configs.BaseConfigRender=BaseConfigRender})(configs||(configs={}));var configs;(function(configs){var CsvConfigRender=(function(_super){__extends(CsvConfigRender,_super);function CsvConfigRender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.csvDelimiter="\t";_this.csvSeparatorReplace=null;_this.csvLineSeparatorReplace="|n|";_this.headTypes=new Dictionary();_this.headKeyEns=new Dictionary();_this.headKeyFields=new Dictionary();_this.headKeyCns=new Dictionary();return _this}CsvConfigRender.prototype.ReplaceSpearator=function(txt){if(this.tableName=="TextFgui"&&txt.indexOf(this.csvLineSeparatorReplace)!=-1){var a=1}txt=txt.replace(/\|n\|/g,"\n");txt=txt.replace(/\r/g,"");return txt};CsvConfigRender.prototype.load=function(configLoader,onComplete){var _this=this;configLoader.loadConfig(this.getConfigPath(),function(txt,path){_this.parse(txt);if(onComplete){onComplete(_this)}configLoader.unloadConfig(_this.getConfigPath())})};CsvConfigRender.prototype.reload=function(configLoader,onComplete){this.clear();this.load(configLoader,onComplete)};CsvConfigRender.prototype.clear=function(){this.headTypes.clear();this.headKeyEns.clear();this.headKeyFields.clear();this.headKeyCns.clear();_super.prototype.clear.call(this)};CsvConfigRender.prototype.parse=function(txt){if(txt==null){console.error(this.tableName+": txt="+txt);return}var lines=txt.split("\n");var line;var csv;line=lines[0];csv=line.split(this.csvDelimiter);this.ParseHeadTypes(csv);line=lines[1];csv=line.split(this.csvDelimiter);this.ParseHeadKeyCN(csv);line=lines[2];csv=line.split(this.csvDelimiter);this.ParseHeadKeyEN(csv);for(var i=3;i<lines.length;i++){line=lines[i];if(isNullOrEmpty(line)){continue}csv=line.split(this.csvDelimiter);for(var j=0;j<csv.length;j++){csv[j]=this.ReplaceSpearator(csv[j])}this.ParseCsv(csv)}};CsvConfigRender.prototype.ParseHeadTypes=function(csv){var key;for(var i=0;i<csv.length;i++){key=csv[i];if(!isNullOrEmpty(key)){key=key.trim();this.headTypes.add(i,key)}}};CsvConfigRender.prototype.ParseHeadKeyCN=function(csv){var key;for(var i=0;i<csv.length;i++){key=this.ReplaceSpearator(csv[i]);if(!isNullOrEmpty(key)){key=key.trim();this.headKeyCns.add(i,key)}}};CsvConfigRender.prototype.ParseHeadKeyEN=function(csv){Laya.Dictionary;var key;for(var i=0;i<csv.length;i++){key=csv[i];if(!isNullOrEmpty(key)){key=key.trim();if(this.headKeyEns.hasKey(key)){console.error(this.tableName+": ParseHeadKeyEN \u5DF2\u7ECF\u5B58\u5728key= "+key+",  i = "+i)}this.headKeyEns.add(key,i);this.headKeyFields.add(i,key)}}};CsvConfigRender.prototype.ParseCsv=function(csv){};CsvConfigRender.prototype.GetHeadType=function(index){return this.headTypes.getValue(index)};CsvConfigRender.prototype.GetHeadField=function(index){return this.headKeyFields.getValue(index)};CsvConfigRender.prototype.GetHeadIndex=function(enName){if(this.headKeyEns.hasKey(enName)){return this.headKeyEns.getValue(enName)}console.error(this.tableName+": headKeyEns["+enName+"] = -1");return -1};CsvConfigRender.prototype.onGameLoadedAll=function(){};return CsvConfigRender}(configs.BaseConfigRender));configs.CsvConfigRender=CsvConfigRender})(configs||(configs={}));var Games;(function(Games){var MeetingResultType;(function(MeetingResultType){MeetingResultType[MeetingResultType.Win=1]="Win";MeetingResultType[MeetingResultType.Draw=2]="Draw";MeetingResultType[MeetingResultType.FailHalf=3]="FailHalf";MeetingResultType[MeetingResultType.FailAll=4]="FailAll"})(MeetingResultType=Games.MeetingResultType||(Games.MeetingResultType={}));var MeetingRewardType;(function(MeetingRewardType){MeetingRewardType[MeetingRewardType.Receive=0]="Receive";MeetingRewardType[MeetingRewardType.Refuse=1]="Refuse"})(MeetingRewardType=Games.MeetingRewardType||(Games.MeetingRewardType={}));var MeetingMarkUpType;(function(MeetingMarkUpType){MeetingMarkUpType[MeetingMarkUpType.Half=1]="Half";MeetingMarkUpType[MeetingMarkUpType.Double=2]="Double"})(MeetingMarkUpType=Games.MeetingMarkUpType||(Games.MeetingMarkUpType={}));var MeetingPanelType;(function(MeetingPanelType){MeetingPanelType[MeetingPanelType.None=0]="None";MeetingPanelType[MeetingPanelType.Start=1]="Start";MeetingPanelType[MeetingPanelType.AskPirce=2]="AskPirce";MeetingPanelType[MeetingPanelType.Game=3]="Game";MeetingPanelType[MeetingPanelType.Result=4]="Result"})(MeetingPanelType=Games.MeetingPanelType||(Games.MeetingPanelType={}))})(Games||(Games={}));var configs;(function(configs){var LangConfig=(function(_super){__extends(LangConfig,_super);function LangConfig(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dict=new Dictionary();return _this}return LangConfig}(configs.BaseConfig));configs.LangConfig=LangConfig})(configs||(configs={}));var configs;(function(configs){var LangConfigReader=(function(_super){__extends(LangConfigReader,_super);function LangConfigReader(tableName){var _this=_super.call(this)||this;_this.lang="zh_cn";_this.tableName=tableName;return _this}LangConfigReader.prototype.getConfigPath=function(){return"config/lang/"+this.lang+"/"+this.tableName+".csv"};Object.defineProperty(LangConfigReader.prototype,"headKeyFieldList",{get:function(){if(!this._headKeyFieldList){this._headKeyFieldList=this.headKeyFields.getValues()}return this._headKeyFieldList},enumerable:true,configurable:true});LangConfigReader.prototype.ParseCsv=function(csv){var config=new configs.LangConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));var fieldList=this.headKeyFieldList;for(var i=0;i<fieldList.length;i++){var txt=csvGetString(csv,this.GetHeadIndex(fieldList[i]));var headType=this.GetHeadType(i);switch(headType){case configs.ConfigFieldType.MStringArray:config.dict.add(fieldList[i],toStringArray(txt));break;default:config.dict.add(fieldList[i],txt);break}}this.addConfig(config)};return LangConfigReader}(configs.CsvConfigRender));configs.LangConfigReader=LangConfigReader})(configs||(configs={}));var configs;(function(configs){var LangConfigLoaderList=(function(){function LangConfigLoaderList(){this.lang="zh_cn";this.renders=[];this.activities=new configs.LangConfigReader("Activities");this.actor=new configs.LangConfigReader("Actor");this.actorAide=new configs.LangConfigReader("ActorAide");this.actorAssets=new configs.LangConfigReader("ActorAssets");this.actorLevel=new configs.LangConfigReader("ActorLevel");this.actorLoyalty=new configs.LangConfigReader("ActorLoyalty");this.actorTrain=new configs.LangConfigReader("ActorTrain");this.avatar=new configs.LangConfigReader("Avatar");this.blockLevel=new configs.LangConfigReader("BlockLevel");this.boxTarget=new configs.LangConfigReader("BoxTarget");this.buildingEffect=new configs.LangConfigReader("BuildingEffect");this.buildingLevel=new configs.LangConfigReader("BuildingLevel");this.business=new configs.LangConfigReader("Business");this.cinema=new configs.LangConfigReader("Cinema");this.city=new configs.LangConfigReader("City");this.cityPopularize=new configs.LangConfigReader("CityPopularize");this.country=new configs.LangConfigReader("Country");this.cupPackage=new configs.LangConfigReader("CupPackage");this.dailySignTrailer=new configs.LangConfigReader("DailySignTrailer");this.dialogue=new configs.LangConfigReader("Dialogue");this.floor=new configs.LangConfigReader("Floor");this.gameLevel=new configs.LangConfigReader("GameLevel");this.gameRandomName=new configs.LangConfigReader("GameRandomName");this.guidesystem=new configs.LangConfigReader("Guidesystem");this.headPortrait=new configs.LangConfigReader("HeadPortrait");this.item=new configs.LangConfigReader("Item");this.levelGiftPackage=new configs.LangConfigReader("LevelGiftPackage");this.mail=new configs.LangConfigReader("Mail");this.maintask=new configs.LangConfigReader("Maintask");this.meetingGame=new configs.LangConfigReader("MeetingGame");this.menu=new configs.LangConfigReader("Menu");this.monthCard=new configs.LangConfigReader("MonthCard");this.movieAdaptationMsg=new configs.LangConfigReader("MovieAdaptationMsg");this.movieAudienceEvaluation=new configs.LangConfigReader("MovieAudienceEvaluation");this.movieDrop=new configs.LangConfigReader("MovieDrop");this.movieExpect=new configs.LangConfigReader("MovieExpect");this.movieMediaVisit=new configs.LangConfigReader("MovieMediaVisit");this.movieMidiaEvaluation=new configs.LangConfigReader("MovieMidiaEvaluation");this.movieMidiaEvaluationMsg=new configs.LangConfigReader("MovieMidiaEvaluationMsg");this.movieShootType=new configs.LangConfigReader("MovieShootType");this.msg=new configs.LangConfigReader("Msg");this.msgChat=new configs.LangConfigReader("MsgChat");this.msgProtoError=new configs.LangConfigReader("MsgProtoError");this.npc=new configs.LangConfigReader("Npc");this.operationTasks=new configs.LangConfigReader("OperationTasks");this.order=new configs.LangConfigReader("Order");this.oscar=new configs.LangConfigReader("Oscar");this.produce=new configs.LangConfigReader("Produce");this.property=new configs.LangConfigReader("Property");this.recharge=new configs.LangConfigReader("Recharge");this.secretary=new configs.LangConfigReader("Secretary");this.secretaryText=new configs.LangConfigReader("SecretaryText");this.secretaryType=new configs.LangConfigReader("SecretaryType");this.settingDefault=new configs.LangConfigReader("SettingDefault");this.shop=new configs.LangConfigReader("Shop");this.skill=new configs.LangConfigReader("Skill");this.skillEffect=new configs.LangConfigReader("SkillEffect");this.skillTrigger=new configs.LangConfigReader("SkillTrigger");this.speak=new configs.LangConfigReader("Speak");this.story=new configs.LangConfigReader("Story");this.storyCharacters=new configs.LangConfigReader("StoryCharacters");this.storyline=new configs.LangConfigReader("Storyline");this.storyStackSort=new configs.LangConfigReader("StoryStackSort");this.street=new configs.LangConfigReader("Street");this.task=new configs.LangConfigReader("Task");this.textCode=new configs.LangConfigReader("TextCode");this.textFgui=new configs.LangConfigReader("TextFgui");this.unlock=new configs.LangConfigReader("Unlock");this.visit=new configs.LangConfigReader("Visit");this.weeklyQuest=new configs.LangConfigReader("WeeklyQuest");this.welfare=new configs.LangConfigReader("Welfare");this.writer=new configs.LangConfigReader("Writer");this.writerAdaptEffect=new configs.LangConfigReader("WriterAdaptEffect");this.writerLevel=new configs.LangConfigReader("WriterLevel")}LangConfigLoaderList.prototype.initList=function(){this.renders.push(this.activities);this.renders.push(this.actor);this.renders.push(this.actorAide);this.renders.push(this.actorAssets);this.renders.push(this.actorLevel);this.renders.push(this.actorLoyalty);this.renders.push(this.actorTrain);this.renders.push(this.avatar);this.renders.push(this.blockLevel);this.renders.push(this.boxTarget);this.renders.push(this.buildingEffect);this.renders.push(this.buildingLevel);this.renders.push(this.business);this.renders.push(this.cinema);this.renders.push(this.city);this.renders.push(this.cityPopularize);this.renders.push(this.country);this.renders.push(this.cupPackage);this.renders.push(this.dailySignTrailer);this.renders.push(this.dialogue);this.renders.push(this.floor);this.renders.push(this.gameLevel);this.renders.push(this.gameRandomName);this.renders.push(this.guidesystem);this.renders.push(this.headPortrait);this.renders.push(this.item);this.renders.push(this.levelGiftPackage);this.renders.push(this.mail);this.renders.push(this.maintask);this.renders.push(this.meetingGame);this.renders.push(this.menu);this.renders.push(this.monthCard);this.renders.push(this.movieAdaptationMsg);this.renders.push(this.movieAudienceEvaluation);this.renders.push(this.movieDrop);this.renders.push(this.movieExpect);this.renders.push(this.movieMediaVisit);this.renders.push(this.movieMidiaEvaluation);this.renders.push(this.movieMidiaEvaluationMsg);this.renders.push(this.movieShootType);this.renders.push(this.msg);this.renders.push(this.msgChat);this.renders.push(this.msgProtoError);this.renders.push(this.npc);this.renders.push(this.operationTasks);this.renders.push(this.order);this.renders.push(this.oscar);this.renders.push(this.produce);this.renders.push(this.property);this.renders.push(this.recharge);this.renders.push(this.secretary);this.renders.push(this.secretaryText);this.renders.push(this.secretaryType);this.renders.push(this.settingDefault);this.renders.push(this.shop);this.renders.push(this.skill);this.renders.push(this.skillEffect);this.renders.push(this.skillTrigger);this.renders.push(this.speak);this.renders.push(this.story);this.renders.push(this.storyCharacters);this.renders.push(this.storyline);this.renders.push(this.storyStackSort);this.renders.push(this.street);this.renders.push(this.task);this.renders.push(this.textCode);this.renders.push(this.textFgui);this.renders.push(this.unlock);this.renders.push(this.visit);this.renders.push(this.weeklyQuest);this.renders.push(this.welfare);this.renders.push(this.writer);this.renders.push(this.writerAdaptEffect);this.renders.push(this.writerLevel)};return LangConfigLoaderList}());configs.LangConfigLoaderList=LangConfigLoaderList})(configs||(configs={}));var configs;(function(configs){var LangConfigLoader=(function(_super){__extends(LangConfigLoader,_super);function LangConfigLoader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.sLoadProgress=new TypedSignal();_this.sLoaded=new Signal();_this.loadProgress=0;_this.isLoadCompleted=false;_this.textRenders=[];_this.sTextLoaded=new Signal();return _this}LangConfigLoader.prototype.loadAll=function(){var _this=this;this.loadProgress=0;var count=this.renders.length;var loadedNum=0;var onItemLoaded=function(){loadedNum++;_this.loadProgress=loadedNum/count;_this.sLoadProgress.dispatch(_this.loadProgress);gameLaunchLoding.onLoadedLangConfig(loadedNum,count);if(loadedNum>=count){_this.onGameLoadedAll()}};for(var i=0;i<this.renders.length;i++){this.renders[i].lang=this.lang;this.renders[i].load(this.configLoader,onItemLoaded)}};LangConfigLoader.prototype.onGameLoadedAll=function(){for(var i=0;i<this.renders.length;i++){this.renders[i].onGameLoadedAll()}this.setCodeTEXT();FguiHelper.setStringsSource(this.textFgui);this.isLoadCompleted=true;this.sLoaded.dispatch()};LangConfigLoader.prototype.loadText=function(){var _this=this;var renders=this.textRenders;if(renders.length==0){renders.push(this.textCode);renders.push(this.textFgui)}this.loadProgress=0;var count=renders.length;var loadedNum=0;var onItemLoaded=function(){loadedNum++;if(loadedNum>=count){_this.onLoadTextComplte()}};for(var i=0;i<renders.length;i++){renders[i].lang=this.lang;renders[i].load(this.configLoader,onItemLoaded)}};LangConfigLoader.prototype.onLoadTextComplte=function(){var renders=this.textRenders;for(var i=0;i<renders.length;i++){renders[i].onGameLoadedAll()}this.setCodeTEXT();FguiHelper.setStringsSource(this.textFgui);this.sTextLoaded.dispatch()};LangConfigLoader.prototype.setCodeTEXT=function(){if(!this._srcTEXT&&TEXT){this._srcTEXT=new Dictionary();for(var key in TEXT){this._srcTEXT.add(key,TEXT[key])}}var list=this.textCode.getConfigList();for(var i=0;i<list.length;i++){var item=list[i];var key=item.dict.getValue("key");var value=item.dict.getValue("value");if(!isNullOrEmpty(value)){TEXT[key]=value}}};return LangConfigLoader}(configs.LangConfigLoaderList));configs.LangConfigLoader=LangConfigLoader})(configs||(configs={}));var LangType=(function(){function LangType(){}LangType.toLang=function(httpLang){httpLang=httpLang.replace("-","_").toLowerCase();if(httpLang.indexOf("en")!=-1){httpLang=LangType.en}if(window.Game){if(!Game.config.languageType.getConfigByValue(httpLang)){httpLang=LangType.en}}else{var has=false;for(var v in LangType){if(v==httpLang){has=true;break}}if(!has){httpLang=LangType.en}}return httpLang};LangType.zh_cn="zh_cn";LangType.zh_tw="zh_tw";LangType.en="en";return LangType}());var LangConfigLoader=configs.LangConfigLoader;var LangConfigReader=configs.LangConfigReader;var LangConfig=configs.LangConfig;var LangManager=(function(){function LangManager(){this._lang=null;this.langListDict=new Dictionary()}Object.defineProperty(LangManager,"Instance",{get:function(){if(!LangManager._Instance){LangManager._Instance=new LangManager()}return LangManager._Instance},enumerable:true,configurable:true});Object.defineProperty(LangManager.prototype,"httpLang",{get:function(){if(!this._httpLang){this.httpLang=this.lang}return this._httpLang},set:function(value){value=value.replace("_","-");if(value.indexOf("-")){var arr=value.split("-");for(var i=1;i<arr.length;i++){arr[i]=arr[i].toUpperCase()}value=arr.join("-")}this._httpLang=value;if(window.frame&&window.frame["comm"]&&window.frame["comm"]["HttpComm"]){frame.comm.HttpComm.SetHeader("accept-language",value)}},enumerable:true,configurable:true});Object.defineProperty(LangManager.prototype,"lang",{get:function(){if(!this._lang){if(Games.GameLocalStorage.Instance.hasItem("_lang",true)){this._lang=Games.GameLocalStorage.Instance.getString("_lang",true)}else{this._lang=LangType.en}this.httpLang=this._lang}return this._lang},set:function(value){this._lang=value;this.httpLang=value;Games.GameLocalStorage.Instance.setString("_lang",value,true)},enumerable:true,configurable:true});Object.defineProperty(LangManager.prototype,"current",{get:function(){if(this._current){return this._current}if(!this.langListDict.hasKey(this.lang)){var langList=new configs.LangConfigLoader();langList.lang=this.lang;this.langListDict.add(langList.lang,langList);this._current=langList}return this.langListDict.getValue(this.lang)},enumerable:true,configurable:true});LangManager.prototype.getValue=function(tableName,id,fieldName){var langReader=this.current[tableName];if(langReader){var config=langReader.getConfig(id);if(config){return config.dict.getValue(fieldName)}}return null};return LangManager}());var TrailerTime=(function(){function TrailerTime(){this.count=0;this.displayIndex=-1;this.renderClasses=null;this.autoStart=true;this.maxCount=1}TrailerTime.prototype.start=function(targetOrItemId,startPos,endPos,duration,parent,displayIndex,renderClasses,autoStart,maxCount){if(displayIndex===void 0){displayIndex=-1}if(renderClasses===void 0){renderClasses=null}if(autoStart===void 0){autoStart=true}if(maxCount===void 0){maxCount=1}this.count=0;this.targetOrItemId=targetOrItemId;this.startPos=startPos;this.endPos=endPos;this.duration=duration;this.parent=parent;this.displayIndex=displayIndex;this.renderClasses=renderClasses;this.autoStart=autoStart;this.maxCount=maxCount;Laya.timer.loop(50,this,this.onTimeLoop,null,true,true)};TrailerTime.prototype.onTimeLoop=function(){this.count++;if(this.count>this.maxCount){Laya.timer.clear(this,this.onTimeLoop);return}FguiHelper.startTrailSingle(this.targetOrItemId,this.startPos,this.endPos,this.duration,this.parent,this.displayIndex,this.renderClasses,this.autoStart)};return TrailerTime}());var FguiHelper=(function(){function FguiHelper(){}FguiHelper.setStringsSource=function(lang){var txtmap=fairygui.TranslationHelper.strings={};var list=lang.getConfigList();for(var i=0;i<list.length;i++){var config=list[i];var name_1=config.dict.getValue("name");var value=config.dict.getValue("value");var index=name_1.indexOf("-");if(value===undefined||value===null){continue}if(index==-1){continue}var uiUrl=name_1.substr(0,index);var uiNodeName=name_1.substr(index+1);var col=txtmap[uiUrl];if(!col){col={};txtmap[uiUrl]=col}col[uiNodeName]=value}};FguiHelper.setGray=function(component){if(!component){return}if(!FguiHelper.grayscaleFilters){var grayscaleFilter=new Laya.ColorFilter(FguiHelper.grayscaleMat);FguiHelper.grayscaleFilters=[grayscaleFilter]}component.displayObject.filters=FguiHelper.grayscaleFilters};FguiHelper.clearFilters=function(component){if(!component){return}component.displayObject.filters=null};Object.defineProperty(FguiHelper,"saturationFilters",{get:function(){if(!FguiHelper._saturationFilters){FguiHelper._saturationFilters=[new Laya.ColorFilter(FguiHelper.saturation)]}return FguiHelper._saturationFilters},enumerable:true,configurable:true});Object.defineProperty(FguiHelper,"saturationFilters2",{get:function(){if(!FguiHelper._saturationFilters2){FguiHelper._saturationFilters2=[new Laya.ColorFilter(FguiHelper.saturation2)]}return FguiHelper._saturationFilters2},enumerable:true,configurable:true});FguiHelper.halfStaturation=function(obj){if(!obj){return}obj.displayObject.filters=FguiHelper.saturationFilters};FguiHelper.half2Staturation=function(obj){if(!obj){return}obj.displayObject.filters=FguiHelper.saturationFilters2};FguiHelper.boundEffect=function(target,duration){if(duration===void 0){duration=1000}target.setPivot(0.5,0.5);target.setScale(0.5,0.5);Laya.Tween.to(target,{scaleX:1,scaleY:1},duration,Laya.Ease.backOut,Handler.create(null,function(){}),0,true,true)};FguiHelper.startTrail=function(targetOrItemId,startPos,endPos,duration,parent,displayIndex,renderClasses,autoStart,startCount){if(displayIndex===void 0){displayIndex=-1}if(renderClasses===void 0){renderClasses=null}if(autoStart===void 0){autoStart=true}if(startCount===void 0){startCount=5}var trailerTime=new TrailerTime();startCount=gameDeviceConfig.trailNum;trailerTime.start(targetOrItemId,startPos,endPos,duration,parent,displayIndex,renderClasses,autoStart,startCount)};FguiHelper.startTrailSingle=function(targetOrItemId,startPos,endPos,duration,parent,displayIndex,renderClasses,autoStart){if(displayIndex===void 0){displayIndex=-1}if(renderClasses===void 0){renderClasses=null}if(autoStart===void 0){autoStart=true}if(!renderClasses){renderClasses=[fgui.Fx.TrailerStar1,fgui.Fx.TrailerStar3]}var emitter=Game.Fx.creatTrail(renderClasses,parent,displayIndex,startPos.x,startPos.y,autoStart);var target=null;if(isNumber(targetOrItemId)){target=fgui.Common.SplashAssetItem.createInstance();target.itemId=Number(targetOrItemId)}else{target=targetOrItemId}if(target!=null){target.setPivot(0.5,0.5);target.x=-target.width/2;target.y=-target.height/2;emitter.addChild(target.displayObject)}Laya.Tween.to(emitter,{x:endPos.x,y:endPos.y},duration,Laya.Ease.linearIn,Handler.create(null,function(emitterTarget){Game.pool.trailPool.recover(emitterTarget)},[emitter]),0,true,true)};FguiHelper.grayscaleMat=[0.3086,0.6094,0.082,0,0,0.3086,0.6094,0.082,0,0,0.3086,0.6094,0.082,0,0,0,0,0,1,0];FguiHelper.grayscaleFilters=null;FguiHelper.normalFilters=null;FguiHelper.saturation=[0.5,0,0,0,0,0,0.5,0,0,0,0,0,0.5,0,0,0,0,0,1,0];FguiHelper.saturation2=[0.25,0,0,0,0,0,0.25,0,0,0,0,0,0.25,0,0,0,0,0,1,0];return FguiHelper}());var Games;(function(Games){var LocalStorage=(function(){function LocalStorage(){}Object.defineProperty(LocalStorage.prototype,"username",{get:function(){if(!this._username){this._username=this.getString("username",true)}return this._username},set:function(value){this._username=value;this.setString("username",value,true);Game.sound.onLogin()},enumerable:true,configurable:true});LocalStorage.prototype.getKey=function(key,isGobal){if(isGobal===void 0){isGobal=false}if(isGobal){return key}else{return this.username+"_"+key}};LocalStorage.prototype.setItem=function(key,value,isGobal){if(isGobal===void 0){isGobal=false}Laya.LocalStorage.setItem(this.getKey(key,isGobal),value)};LocalStorage.prototype.getItem=function(key,isGobal){if(isGobal===void 0){isGobal=false}return Laya.LocalStorage.getItem(this.getKey(key,isGobal))};LocalStorage.prototype.setString=function(key,value,isGobal){if(isGobal===void 0){isGobal=false}Laya.LocalStorage.setItem(this.getKey(key,isGobal),value)};LocalStorage.prototype.getString=function(key,isGobal){if(isGobal===void 0){isGobal=false}var val=Laya.LocalStorage.getItem(this.getKey(key,isGobal));if(val===undefined||val===null){val=""}return val};LocalStorage.prototype.setBoolean=function(key,value,isGobal){if(isGobal===void 0){isGobal=false}Laya.LocalStorage.setItem(this.getKey(key,isGobal),value?"true":"false")};LocalStorage.prototype.getBoolean=function(key,isGobal){if(isGobal===void 0){isGobal=false}return Laya.LocalStorage.getItem(this.getKey(key,isGobal))=="true"};LocalStorage.prototype.setInt=function(key,value,isGobal){if(isGobal===void 0){isGobal=false}Laya.LocalStorage.setItem(this.getKey(key,isGobal),value.toString())};LocalStorage.prototype.getInt=function(key,isGobal){if(isGobal===void 0){isGobal=false}var val=Laya.LocalStorage.getItem(this.getKey(key,isGobal));if(val){return parseInt(val)}return 0};LocalStorage.prototype.setFloat=function(key,value,isGobal){if(isGobal===void 0){isGobal=false}Laya.LocalStorage.setItem(this.getKey(key,isGobal),value.toString())};LocalStorage.prototype.getFloat=function(key,isGobal){if(isGobal===void 0){isGobal=false}var val=Laya.LocalStorage.getItem(this.getKey(key,isGobal));if(val){return parseFloat(val)}return 0};LocalStorage.prototype.setJSON=function(key,value,isGobal){if(isGobal===void 0){isGobal=false}Laya.LocalStorage.setJSON(this.getKey(key,isGobal),value)};LocalStorage.prototype.getJSON=function(key,isGobal){if(isGobal===void 0){isGobal=false}return Laya.LocalStorage.getJSON(this.getKey(key,isGobal))};LocalStorage.prototype.removeItem=function(key,isGobal){if(isGobal===void 0){isGobal=false}return Laya.LocalStorage.removeItem(this.getKey(key,isGobal))};LocalStorage.prototype.hasItem=function(key,isGobal){if(isGobal===void 0){isGobal=false}return Laya.LocalStorage.getItem(this.getKey(key,isGobal))!==null};LocalStorage.prototype.clear=function(){return Laya.LocalStorage.clear()};return LocalStorage}());Games.LocalStorage=LocalStorage})(Games||(Games={}));var Games;(function(Games){var GameLocalStorage=(function(_super){__extends(GameLocalStorage,_super);function GameLocalStorage(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(GameLocalStorage,"Instance",{get:function(){if(!GameLocalStorage._Instance){GameLocalStorage._Instance=new GameLocalStorage()}return GameLocalStorage._Instance},enumerable:true,configurable:true});Object.defineProperty(GameLocalStorage.prototype,"gmX",{get:function(){if(this._gmX===undefined){this._gmX=this.getFloat("gmX",true)}return this._gmX},set:function(value){this._gmX=value;this.setFloat("gmX",value,true)},enumerable:true,configurable:true});Object.defineProperty(GameLocalStorage.prototype,"gmY",{get:function(){if(this._gmY===undefined){if(this.hasItem("gmY",true)){this._gmY=this.getFloat("gmY",true)}else{this._gmY=100}}return this._gmY},set:function(value){this._gmY=value;this.setFloat("gmY",value,true)},enumerable:true,configurable:true});Object.defineProperty(GameLocalStorage.prototype,"fontSetting",{get:function(){if(!this._fontSetting){this._fontSetting=this.getItem("fontSetting",true)}return this._fontSetting},set:function(value){this._fontSetting=value;this.setItem("fontSetting",value,true)},enumerable:true,configurable:true});Object.defineProperty(GameLocalStorage.prototype,"serverName",{get:function(){if(!this._serverName){this._serverName=this.getItem("serverName",true)}return this._serverName},set:function(value){this._serverName=value;this.setItem("serverName",value,true)},enumerable:true,configurable:true});Object.defineProperty(GameLocalStorage.prototype,"useraccountList",{get:function(){if(!this._useraccountList){this._useraccountList=this.getJSON("_useraccountList",true)}if(!this._useraccountList){this._useraccountList=[]}return this._useraccountList},set:function(value){this._useraccountList=value;this.setJSON("_useraccountList",value,true)},enumerable:true,configurable:true});GameLocalStorage.prototype.addUseraccount=function(username,password){var has=false;var list=this.useraccountList?this.useraccountList:[];for(var i=0;i<list.length;i++){if(list[i].username==username){list[i].password=password;list[i].lasttime=Game.time.localTime;has=true}}if(!has){list.push({username:username,password:password,lasttime:Game.time.localTime})}list.sort(function(a,b){return b.lasttime-a.lasttime});this.useraccountList=list};Object.defineProperty(GameLocalStorage.prototype,"password",{get:function(){if(!this._password){this._password=this.getItem("password");if(this._password==null){this._password=""}}return this._password},set:function(value){this._password=value;this.setItem("password",value)},enumerable:true,configurable:true});Object.defineProperty(GameLocalStorage.prototype,"deviceId",{get:function(){if(!this._deviceId){if(BrowserDetect.isApp){this._deviceId=gameApplication.IDFA}if(!this._deviceId||this._deviceId=="undefined"||this._deviceId==undefined){this._deviceId=this.getString("_deviceId",true);if(!this._deviceId){var timestamp=new Date().getTime();var random=Math.random();this._deviceId=timestamp.toString()+"."+random.toString()}}}return this._deviceId},set:function(value){this._deviceId=value;this.setString("_deviceId",value,true)},enumerable:true,configurable:true});Object.defineProperty(GameLocalStorage.prototype,"guestusername",{get:function(){if(!this._guestusername){this._guestusername=this.getString("guest",true)}return this._guestusername},set:function(value){this._guestusername=value;this.setString("guest",value,true);Game.sound.onLogin()},enumerable:true,configurable:true});Object.defineProperty(GameLocalStorage.prototype,"isGuest",{get:function(){if(this._isGuest===undefined){this._isGuest=this.getBoolean("isGuest",true)}return this._isGuest},set:function(value){this._isGuest=value;this.setBoolean("isGuest",value,true)},enumerable:true,configurable:true});Object.defineProperty(GameLocalStorage.prototype,"isGameGuest",{get:function(){if(this._isGameGuest===undefined){this._isGameGuest=this.getBoolean("isGameGuest",true)}return this._isGameGuest},set:function(value){this._isGameGuest=value;this.setBoolean("isGameGuest",value,true)},enumerable:true,configurable:true});Object.defineProperty(GameLocalStorage.prototype,"isNoticTodayNoOpen",{get:function(){if(this._isNoticTodayNoOpen===undefined){this._isNoticTodayNoOpen=this.getBoolean("isNoticTodayNoOpen",true)}return this._isNoticTodayNoOpen},set:function(value){this._isNoticTodayNoOpen=value;this.setBoolean("isNoticTodayNoOpen",value,true)},enumerable:true,configurable:true});Object.defineProperty(GameLocalStorage.prototype,"lastOpenShopSpecialTime",{get:function(){if(this._lastOpenShopSpecialTime===undefined){this._lastOpenShopSpecialTime=this.getFloat("lastOpenShopSpecialTime",true)}return this._lastOpenShopSpecialTime},set:function(value){this._lastOpenShopSpecialTime=value;this.setFloat("lastOpenShopSpecialTime",value,true)},enumerable:true,configurable:true});Object.defineProperty(GameLocalStorage.prototype,"lastOpenShopSingleTime",{get:function(){if(this._lastOpenShopSingleTime===undefined){this._lastOpenShopSingleTime=this.getFloat("lastOpenShopSingleTime",true)}return this._lastOpenShopSingleTime},set:function(value){this._lastOpenShopSingleTime=value;this.setFloat("lastOpenShopSingleTime",value,true)},enumerable:true,configurable:true});return GameLocalStorage}(Games.LocalStorage));Games.GameLocalStorage=GameLocalStorage})(Games||(Games={}));var Games;(function(Games){var Handler=laya.utils.Handler;var ServerStateType;(function(ServerStateType){ServerStateType[ServerStateType.Close=0]="Close";ServerStateType[ServerStateType.Noraml=1]="Noraml"})(ServerStateType=Games.ServerStateType||(Games.ServerStateType={}));var ServerNoticType;(function(ServerNoticType){ServerNoticType[ServerNoticType.Normal=1]="Normal";ServerNoticType[ServerNoticType.StopServer=2]="StopServer"})(ServerNoticType||(ServerNoticType={}));var ChannelManager=(function(_super){__extends(ChannelManager,_super);function ChannelManager(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.serverListUrl="http://mbqb.ihaiu.com/GamePF/ServerList.json";_this.defaultServerItem={name:"QA",ip:"172.81.240.224",port:80,state:ServerStateType.Noraml,https:false,test:true};return _this}Object.defineProperty(ChannelManager.prototype,"noticUrl",{get:function(){if(this.serverItem){if(this.serverItem.noticUrl){return this.serverItem.noticUrl}if(this.serverItem.https){return"https://"+this.serverItem.ip+"/notice.html"}else{return"http://"+this.serverItem.ip+"/notice.html"}}return"http://172.16.0.93/notice.html"},enumerable:true,configurable:true});ChannelManager.prototype.getServerItem=function(serverName){if(!serverName){return null}if(this.serverList){for(var i=0;i<this.serverList.list.length;i++){if(this.serverList.list[i].name==serverName){return this.serverList.list[i]}}}return null};Object.defineProperty(ChannelManager.prototype,"serverName",{get:function(){if(!this._serverName){if(Games.GameLocalStorage.Instance.serverName){var item=this.getServerItem(Games.GameLocalStorage.Instance.serverName);if(item){this._serverName=Games.GameLocalStorage.Instance.serverName}}if(!this._serverName&&this.serverList){var item=this.getServerItem(this.serverList.defaultServer);if(item){this._serverName=this.serverList.defaultServer}else{if(this.serverList.list.length>0){this._serverName=this.serverList.list[0].name}}}}return this._serverName},set:function(name){this._serverName=name;Games.GameLocalStorage.Instance.serverName=name},enumerable:true,configurable:true});Object.defineProperty(ChannelManager.prototype,"serverIndex",{get:function(){if(this.serverList){for(var i=0;i<this.serverList.list.length;i++){if(this.serverList.list[i].name==this.serverName){return i}}}return -1},enumerable:true,configurable:true});Object.defineProperty(ChannelManager.prototype,"serverItem",{get:function(){var item=this.getServerItem(this.serverName);if(item){return item}return this.defaultServerItem},enumerable:true,configurable:true});ChannelManager.prototype.requestServerList=function(url,caller,onSucess,onFail){function callSuccess(){if(onSucess){if(caller){onSucess.apply(caller)}else{onSucess()}}}function callFail(){if(onFail){if(caller){onFail.apply(caller)}else{onFail()}}}if(this.serverList){callSuccess();return}if(!url){url=BrowserDetect.urlServerList}console.log("serverListUrl="+url);this.serverListUrl=url;Laya.loader.load(url,Handler.create(this,function(){var resust=Laya.loader.getRes(url);if(resust){this.serverList=isString(resust)?JSON.parse(resust):resust;console.log("获取服务器列表：");console.log(resust);console.log(JSON.stringify(this.serverList));callSuccess()}else{console.log("ChannelManager LoadFail: ServerList.json ");callFail()}}))};Object.defineProperty(ChannelManager.prototype,"isTodayOpenedNotice",{get:function(){if(Games.GameLocalStorage.Instance.isNoticTodayNoOpen){if(Games.GameLocalStorage.Instance.hasItem("lastOpenNoticeTime",true)){var lastOpenTime=Games.GameLocalStorage.Instance.getInt("lastOpenNoticeTime",true);var isToday=Game.time.isLocalToday(lastOpenTime);return !isToday}}return true},enumerable:true,configurable:true});ChannelManager.prototype.requestNotice=function(){console.log(this.noticUrl);Laya.loader.load(this.noticUrl,Handler.create(this,this.onResopneNotic))};ChannelManager.prototype.onResopneNotic=function(){var resust=Laya.loader.getRes(this.noticUrl);console.log(resust);if(resust){try{this.serverNoticData=isString(resust)?JSON.parse(resust):resust;if(!this.serverNoticData||this.serverNoticData.visible==false){return}if(this.serverNoticData.type==ServerNoticType.Normal){if(this.isTodayOpenedNotice){Game.menu.open(Games.MenuId.Notice);Games.GameLocalStorage.Instance.setInt("lastOpenNoticeTime",Game.time.localTime,true)}}else{Game.system.alrtTextFull(this.serverNoticData.content,this.serverNoticData.title,null,function(){if(window.conch&&window.conch["exit"]){window.conch.exit()}})}}catch(error){console.warn("通知有问题")}}};return ChannelManager}(frame.base.BaseSingleton));Games.ChannelManager=ChannelManager})(Games||(Games={}));var SoundKey=(function(){function SoundKey(){}Object.defineProperty(SoundKey,"idDict",{get:function(){if(!SoundKey._idDict){SoundKey.init()}return SoundKey._idDict},enumerable:true,configurable:true});Object.defineProperty(SoundKey,"extDict",{get:function(){if(!SoundKey._extDict){SoundKey.init()}return SoundKey._extDict},enumerable:true,configurable:true});SoundKey.getId=function(key){if(!SoundKey.idDict.hasKey(key)){console.error("SoundKey 不存在 key="+key);return""}return SoundKey.idDict.getValue(key)};SoundKey.getUrl=function(key){return"ui://"+SoundKey.SoundPackageId+SoundKey.getId(key)};SoundKey.getPath=function(key){return Games.GuiSetting.getResPath(SoundKey.SoundPackageName+"_"+SoundKey.getId(key)+SoundKey.extDict.getValue(key),"fgui")};SoundKey.init=function(){var dict=SoundKey._idDict=new Dictionary();dict.add("MM_BGM_Cinema.mp3","s3xz1n");dict.add("MM_BGM_Propaganda.mp3","s3xz1o");dict.add("MM_BGM_RoadShow.mp3","s3xz1p");dict.add("MM_BGM_Award.mp3","i7ne2w");dict.add("MM29_TicketsGreat.ogg","806p32");dict.add("MM01_Button.ogg","r6c533");dict.add("MM02_Popup.ogg","r6c534");dict.add("MM03_ReachGoal.ogg","r6c535");dict.add("MM04_Lose.ogg","r6c536");dict.add("MM05_Upgrade.ogg","r6c537");dict.add("MM06_Building.ogg","r6c538");dict.add("MM07_GoldMuch.ogg","r6c539");dict.add("MM08_GoldLess.ogg","r6c53a");dict.add("MM09_GoldReward.ogg","r6c53b");dict.add("MM10_AwardSwitching.ogg","r6c53c");dict.add("MM11_NewsPaperTop.ogg","r6c53d");dict.add("MM12_RecruitArtist.ogg","r6c53e");dict.add("MM13_GetArtist.ogg","r6c53f");dict.add("MM14_ArtistGradeUp.ogg","r6c53g");dict.add("MM15_Propaganda.ogg","r6c53h");dict.add("MM16_ScriptRolling.ogg","r6c53i");dict.add("MM17_FoundArtist.ogg","r6c53j");dict.add("MM18_Screen.ogg","r6c53k");dict.add("MM19_ArtistShow.ogg","r6c53l");dict.add("MM20_ArtistData.ogg","r6c53m");dict.add("MM21_ArtistAccord.ogg","r6c53n");dict.add("MM22_ScreenOver.ogg","r6c53o");dict.add("MM23_Premiere.ogg","r6c53p");dict.add("MM24_NiceScore1.ogg","r6c53q");dict.add("MM25_NiceScore2.ogg","r6c53r");dict.add("MM26_NiceScore3.ogg","r6c53s");dict.add("MM27_TicketsOrdinary.ogg","r6c53t");dict.add("MM28_TicketsGood.ogg","r6c53u");dict.add("MM30_Settlements.ogg","r6c53v");dict.add("MM31_ClickScreenMenu.ogg","r6c53w");dict.add("MM32_GetScript .ogg","r6c53x");dict.add("MM33_NiceScore4.ogg","r6c53y");dict.add("MM34_CultrueArtist.ogg","r6c53z");dict.add("MM35_AwardResults.ogg","r6c540");dict.add("MM36_CarAcross.ogg","r6c541");dict.add("MM37_FilmStart.ogg","r6c542");dict.add("MM38_AudienceGetIn.ogg","r6c543");dict.add("MM39_FilmShow.ogg","r6c544");dict.add("MM40_FilmScreen.ogg","r6c545");dict.add("MM41_ExpectNotices.ogg","l1r646");dict.add("MM42_FilmFemale01.mp3","qlot4g");dict.add("MM43_FilmFemale02.mp3","qlot4h");dict.add("MM44_FilmFemale03.mp3","qlot4i");dict.add("MM45_FilmFemale04.mp3","qlot4j");dict.add("MM46_FilmMale01.mp3","qlot4k");dict.add("MM47_FilmMale02.mp3","qlot4l");dict.add("MM48_FilmMale03.mp3","qlot4m");dict.add("MM49_FilmMale04.mp3","qlot4n");dict.add("MM50_FilmChangge.mp3","qlot4o");var exts=SoundKey._extDict=new Dictionary();exts.add("MM_BGM_Cinema.mp3",".mp3");exts.add("MM_BGM_Propaganda.mp3",".mp3");exts.add("MM_BGM_RoadShow.mp3",".mp3");exts.add("MM_BGM_Award.mp3",".mp3");exts.add("MM29_TicketsGreat.ogg",".ogg");exts.add("MM01_Button.ogg",".ogg");exts.add("MM02_Popup.ogg",".ogg");exts.add("MM03_ReachGoal.ogg",".ogg");exts.add("MM04_Lose.ogg",".ogg");exts.add("MM05_Upgrade.ogg",".ogg");exts.add("MM06_Building.ogg",".ogg");exts.add("MM07_GoldMuch.ogg",".ogg");exts.add("MM08_GoldLess.ogg",".ogg");exts.add("MM09_GoldReward.ogg",".ogg");exts.add("MM10_AwardSwitching.ogg",".ogg");exts.add("MM11_NewsPaperTop.ogg",".ogg");exts.add("MM12_RecruitArtist.ogg",".ogg");exts.add("MM13_GetArtist.ogg",".ogg");exts.add("MM14_ArtistGradeUp.ogg",".ogg");exts.add("MM15_Propaganda.ogg",".ogg");exts.add("MM16_ScriptRolling.ogg",".ogg");exts.add("MM17_FoundArtist.ogg",".ogg");exts.add("MM18_Screen.ogg",".ogg");exts.add("MM19_ArtistShow.ogg",".ogg");exts.add("MM20_ArtistData.ogg",".ogg");exts.add("MM21_ArtistAccord.ogg",".ogg");exts.add("MM22_ScreenOver.ogg",".ogg");exts.add("MM23_Premiere.ogg",".ogg");exts.add("MM24_NiceScore1.ogg",".ogg");exts.add("MM25_NiceScore2.ogg",".ogg");exts.add("MM26_NiceScore3.ogg",".ogg");exts.add("MM27_TicketsOrdinary.ogg",".ogg");exts.add("MM28_TicketsGood.ogg",".ogg");exts.add("MM30_Settlements.ogg",".ogg");exts.add("MM31_ClickScreenMenu.ogg",".ogg");exts.add("MM32_GetScript .ogg",".ogg");exts.add("MM33_NiceScore4.ogg",".ogg");exts.add("MM34_CultrueArtist.ogg",".ogg");exts.add("MM35_AwardResults.ogg",".ogg");exts.add("MM36_CarAcross.ogg",".ogg");exts.add("MM37_FilmStart.ogg",".ogg");exts.add("MM38_AudienceGetIn.ogg",".ogg");exts.add("MM39_FilmShow.ogg",".ogg");exts.add("MM40_FilmScreen.ogg",".ogg");exts.add("MM41_ExpectNotices.ogg",".ogg");exts.add("MM42_FilmFemale01.mp3",".mp3");exts.add("MM43_FilmFemale02.mp3",".mp3");exts.add("MM44_FilmFemale03.mp3",".mp3");exts.add("MM45_FilmFemale04.mp3",".mp3");exts.add("MM46_FilmMale01.mp3",".mp3");exts.add("MM47_FilmMale02.mp3",".mp3");exts.add("MM48_FilmMale03.mp3",".mp3");exts.add("MM49_FilmMale04.mp3",".mp3");exts.add("MM50_FilmChangge.mp3",".mp3")};SoundKey.SoundPackageName="Sound";SoundKey.SoundPackageId="44whq70o";SoundKey.MM_BGM_Cinema="MM_BGM_Cinema.mp3";SoundKey.MM_BGM_Propaganda="MM_BGM_Propaganda.mp3";SoundKey.MM_BGM_RoadShow="MM_BGM_RoadShow.mp3";SoundKey.MM_BGM_Award="MM_BGM_Award.mp3";SoundKey.MM29_TicketsGreat="MM29_TicketsGreat.ogg";SoundKey.MM01_Button="MM01_Button.ogg";SoundKey.MM02_Popup="MM02_Popup.ogg";SoundKey.MM03_ReachGoal="MM03_ReachGoal.ogg";SoundKey.MM04_Lose="MM04_Lose.ogg";SoundKey.MM05_Upgrade="MM05_Upgrade.ogg";SoundKey.MM06_Building="MM06_Building.ogg";SoundKey.MM07_GoldMuch="MM07_GoldMuch.ogg";SoundKey.MM08_GoldLess="MM08_GoldLess.ogg";SoundKey.MM09_GoldReward="MM09_GoldReward.ogg";SoundKey.MM10_AwardSwitching="MM10_AwardSwitching.ogg";SoundKey.MM11_NewsPaperTop="MM11_NewsPaperTop.ogg";SoundKey.MM12_RecruitArtist="MM12_RecruitArtist.ogg";SoundKey.MM13_GetArtist="MM13_GetArtist.ogg";SoundKey.MM14_ArtistGradeUp="MM14_ArtistGradeUp.ogg";SoundKey.MM15_Propaganda="MM15_Propaganda.ogg";SoundKey.MM16_ScriptRolling="MM16_ScriptRolling.ogg";SoundKey.MM17_FoundArtist="MM17_FoundArtist.ogg";SoundKey.MM18_Screen="MM18_Screen.ogg";SoundKey.MM19_ArtistShow="MM19_ArtistShow.ogg";SoundKey.MM20_ArtistData="MM20_ArtistData.ogg";SoundKey.MM21_ArtistAccord="MM21_ArtistAccord.ogg";SoundKey.MM22_ScreenOver="MM22_ScreenOver.ogg";SoundKey.MM23_Premiere="MM23_Premiere.ogg";SoundKey.MM24_NiceScore1="MM24_NiceScore1.ogg";SoundKey.MM25_NiceScore2="MM25_NiceScore2.ogg";SoundKey.MM26_NiceScore3="MM26_NiceScore3.ogg";SoundKey.MM27_TicketsOrdinary="MM27_TicketsOrdinary.ogg";SoundKey.MM28_TicketsGood="MM28_TicketsGood.ogg";SoundKey.MM30_Settlements="MM30_Settlements.ogg";SoundKey.MM31_ClickScreenMenu="MM31_ClickScreenMenu.ogg";SoundKey.MM32_GetScript="MM32_GetScript .ogg";SoundKey.MM33_NiceScore4="MM33_NiceScore4.ogg";SoundKey.MM34_CultrueArtist="MM34_CultrueArtist.ogg";SoundKey.MM35_AwardResults="MM35_AwardResults.ogg";SoundKey.MM36_CarAcross="MM36_CarAcross.ogg";SoundKey.MM37_FilmStart="MM37_FilmStart.ogg";SoundKey.MM38_AudienceGetIn="MM38_AudienceGetIn.ogg";SoundKey.MM39_FilmShow="MM39_FilmShow.ogg";SoundKey.MM40_FilmScreen="MM40_FilmScreen.ogg";SoundKey.MM41_ExpectNotices="MM41_ExpectNotices.ogg";SoundKey.MM42_FilmFemale01="MM42_FilmFemale01.mp3";SoundKey.MM43_FilmFemale02="MM43_FilmFemale02.mp3";SoundKey.MM44_FilmFemale03="MM44_FilmFemale03.mp3";SoundKey.MM45_FilmFemale04="MM45_FilmFemale04.mp3";SoundKey.MM46_FilmMale01="MM46_FilmMale01.mp3";SoundKey.MM47_FilmMale02="MM47_FilmMale02.mp3";SoundKey.MM48_FilmMale03="MM48_FilmMale03.mp3";SoundKey.MM49_FilmMale04="MM49_FilmMale04.mp3";SoundKey.MM50_FilmChangge="MM50_FilmChangge.mp3";return SoundKey}());var LoadingStateTxt_EN=(function(){function LoadingStateTxt_EN(){}LoadingStateTxt_EN.Loading="Loading...";LoadingStateTxt_EN.LoadedCore="Loading Core...";LoadingStateTxt_EN.LoadedLaunchUI="Loading Launch UI...";LoadingStateTxt_EN.LoadedAllScript="Loading Code...";LoadingStateTxt_EN.LoadedConfig="Loading Config...";LoadingStateTxt_EN.LoadedLangConfig="Loading Lang Config...";LoadingStateTxt_EN.LoadedUI="Loading UI...";LoadingStateTxt_EN.LoadedEnd="Loading Complete";LoadingStateTxt_EN.VersionLoadConfig="Loading version info...";LoadingStateTxt_EN.VersionAppUpdate="Download APK";LoadingStateTxt_EN.VersionLoadZip="Downloading packets...";LoadingStateTxt_EN.VersionUnZip="Unzipping resources...";LoadingStateTxt_EN.VersionAssetsCopy="Initialize resources ";LoadingStateTxt_EN.VersionAssetsCopyError="First Launch Init resources Fail!";LoadingStateTxt_EN.VersionAlertUpdateAppTitle="New update available";LoadingStateTxt_EN.VersionAlertUpdateAppMsg="It is recommended to install with a WiFi connection<br/> &nbsp; <br/>  Current: {0} <br/> Now: {1}";LoadingStateTxt_EN.VersionAlertUpdateAppBtn="Go";LoadingStateTxt_EN.VersionAlertUpdateResTitle="New patch available";LoadingStateTxt_EN.VersionAlertUpdateResMsg="It is recommended to install with a WiFi connection<br/> &nbsp; <br/> Current: {0} <br/> Now: {1}";LoadingStateTxt_EN.VersionAlertUpdateResBtn="Continue";LoadingStateTxt_EN.VersionAlertUpdateResFailMsg="Update version fail! please retry!";LoadingStateTxt_EN.VersionAlertUpdateResGetInfoFailMsg="Load version info fail! please check your network!";LoadingStateTxt_EN.VersionAlertUpdateOKBtn="OK";LoadingStateTxt_EN.tips=["Hiring actors...","Filming movies...","Popping popcorn...","Selling tickets...","Owner of this cinema is a genius!"];LoadingStateTxt_EN.NetworkState_Title="Network Status";LoadingStateTxt_EN.NetworkState_Error="Connection seems lost, please check your network!";LoadingStateTxt_EN.NetworkState_Background="Connection failed, please exit and try logging in again!";LoadingStateTxt_EN.NetworkState_Button="EXIT";LoadingStateTxt_EN.NetworkState_Button_Reconnecting="Reconnect";return LoadingStateTxt_EN}());var LoadingStateTxt_ZH_Cn=(function(){function LoadingStateTxt_ZH_Cn(){}LoadingStateTxt_ZH_Cn.Loading="加载中...";LoadingStateTxt_ZH_Cn.LoadedCore="加载完核心";LoadingStateTxt_ZH_Cn.LoadedLaunchUI="加载完成启动界面";LoadingStateTxt_ZH_Cn.LoadedAllScript="加载完代码";LoadingStateTxt_ZH_Cn.LoadedConfig="加载配置文件";LoadingStateTxt_ZH_Cn.LoadedLangConfig="加载多语言配置";LoadingStateTxt_ZH_Cn.LoadedUI="加载UI";LoadingStateTxt_ZH_Cn.LoadedEnd="加载完成";LoadingStateTxt_ZH_Cn.VersionLoadConfig="加载版本信息";LoadingStateTxt_ZH_Cn.VersionAppUpdate="下载应用";LoadingStateTxt_ZH_Cn.VersionLoadZip="下载资源包";LoadingStateTxt_ZH_Cn.VersionUnZip="正在解压资源包";LoadingStateTxt_ZH_Cn.VersionAssetsCopy="初始化资源";LoadingStateTxt_ZH_Cn.VersionAssetsCopyError="初始化资源失败!";LoadingStateTxt_ZH_Cn.VersionAlertUpdateAppTitle="需要更新App";LoadingStateTxt_ZH_Cn.VersionAlertUpdateAppMsg="建议在wifi网络安装!!<br/>  &nbsp;  <br/> 当前版本: {0} <br/> 最新版本: {1}";LoadingStateTxt_ZH_Cn.VersionAlertUpdateAppBtn="前往安装";LoadingStateTxt_ZH_Cn.VersionAlertUpdateResFailMsg="更新版本失败！请重试！";LoadingStateTxt_ZH_Cn.VersionAlertUpdateResGetInfoFailMsg="获取版本信息失败！请检查网络重试！";LoadingStateTxt_ZH_Cn.VersionAlertUpdateResTitle="需要更新补丁资源包";LoadingStateTxt_ZH_Cn.VersionAlertUpdateResMsg="建议在wifi网络下更新!!<br/>  &nbsp;  <br/> 当前版本: {0} <br/> 最新版本: {1}";LoadingStateTxt_ZH_Cn.VersionAlertUpdateResBtn="继续";LoadingStateTxt_ZH_Cn.VersionAlertUpdateOKBtn="确定";LoadingStateTxt_ZH_Cn.tips=["正在炸爆米花...","正在驱赶放映泥棒...","正在张贴海报...","正在DIY特制3D眼镜...","影院的负责人是个天才!"];LoadingStateTxt_ZH_Cn.NetworkState_Title="网络状态";LoadingStateTxt_ZH_Cn.NetworkState_Error="网络中断，请检查网络设备！";LoadingStateTxt_ZH_Cn.NetworkState_Background="您已断开连接，请点击下方按钮退出游戏并重新登陆！";LoadingStateTxt_ZH_Cn.NetworkState_Button="退出";LoadingStateTxt_ZH_Cn.NetworkState_Button_Reconnecting="尝试重连";return LoadingStateTxt_ZH_Cn}());var LoadingStateTxt=LoadingStateTxt_EN;var GameLaunchLoding=(function(){function GameLaunchLoding(){this.percent=0;this.showPercent=0;this._repaint=0}GameLaunchLoding.prototype.loading=function(percent){this.percent=percent};GameLaunchLoding.prototype.setGameView=function(percent){if(Games&&Games.LoaderManager&&Games.LoaderManager.instance){var ctl=Games.LoaderManager.instance.getLoaderCtl(LoaderId.Launch);ctl.setMax(100);ctl.setProgress(percent)}};GameLaunchLoding.prototype.setVersion=function(){if(Games&&Games.LoaderManager&&Games.LoaderManager.instance){var ctl=Games.LoaderManager.instance.getLoaderCtl(LoaderId.Launch);ctl.setVersion()}};GameLaunchLoding.prototype.setView=function(percent,force,isRepaint){if(force===void 0){force=false}if(isRepaint===void 0){isRepaint=false}if(force){this.percent=percent}if(isRepaint){var time=new Date().getTime();if(time>this._repaint+500){Laya.stage.repaint();this._repaint=time}}this.showPercent=percent;if(window.loadingView){window.loadingView["loading"](percent)}this.setGameView(percent);if(this.showPercent==100){this.stopTweenPrecent()}};GameLaunchLoding.prototype.starTweenPrecent=function(){var _this=this;this.stopTweenPrecent();this._tweenHandler=setInterval(function(){_this.showPercent=Math.ceil(Mathf.Lerp(_this.showPercent,_this.percent,0.1));_this.setView(_this.showPercent)},100)};GameLaunchLoding.prototype.stopTweenPrecent=function(){if(this._tweenHandler){clearInterval(this._tweenHandler);this._tweenHandler=null}};GameLaunchLoding.prototype.setTip=function(txt){switch(txt){case LoadingStateTxt.LoadedCore:case LoadingStateTxt.LoadedAllScript:case LoadingStateTxt.LoadedLaunchUI:case LoadingStateTxt.LoadedConfig:case LoadingStateTxt.LoadedLangConfig:case LoadingStateTxt.LoadedUI:case LoadingStateTxt.LoadedEnd:txt=LoadingStateTxt.Loading;break}if(Games&&Games.LoaderManager&&Games.LoaderManager.instance){var ctl=Games.LoaderManager.instance.getLoaderCtl(LoaderId.Launch);ctl.setTip(txt)}};GameLaunchLoding.prototype.setTips=function(txts){if(window.loadingView){window.loadingView["setTips"](txts)}if(Games&&Games.LoaderManager&&Games.LoaderManager.instance){var ctl=Games.LoaderManager.instance.getLoaderCtl(LoaderId.Launch);ctl.setTips(txts)}};GameLaunchLoding.prototype.closeLayaLoadingView=function(){if(window.loadingView){window.loadingView["loading"](100)}};GameLaunchLoding.prototype.onBegin=function(){this.loading(0);this.starTweenPrecent();if(window.loadingView){window.loadingView["loadingAutoClose"]=false;window.loadingView["showTextInfo"]=true;window.loadingView["setTips"](["Loding..."])}};GameLaunchLoding.prototype.onLoadedCore=function(){this.setTip(LoadingStateTxt.LoadedCore);this.loading(10)};GameLaunchLoding.prototype.onLoadedLaunch=function(){var _this=this;this.setTip(LoadingStateTxt.LoadedLaunchUI);this.loading(20);setTimeout(function(){_this.closeLayaLoadingView()},2000)};GameLaunchLoding.prototype.onLoadedAllScript=function(){};GameLaunchLoding.prototype.onLoadedConfig=function(index,count){this.setTip(LoadingStateTxt.LoadedConfig);this.loading(40+Math.floor((index/count)*20))};GameLaunchLoding.prototype.onLoadedLangConfig=function(index,count){this.setTip(LoadingStateTxt.LoadedLangConfig);this.loading(60+Math.floor((index/count)*20))};GameLaunchLoding.prototype.onLoadedFgui=function(index,count){this.setTip(LoadingStateTxt.LoadedUI);this.loading(80+Math.floor((index/count)*20))};GameLaunchLoding.prototype.onVersionLoadConfig=function(){this.setTip(LoadingStateTxt.VersionLoadConfig)};GameLaunchLoding.prototype.onAssetsCopy=function(currentSize,totalSize){var rate=Math.floor((currentSize/totalSize)*100);this.setTip(LoadingStateTxt.VersionAssetsCopy+" "+bToStr(currentSize)+"/"+bToStr(totalSize));this.setView(rate,true)};GameLaunchLoding.prototype.onVersionCrosswalkLoadZip=function(percent,convertCurrentProgress,convertFileSize,convertSpeed){this.setView(percent,true);if(convertCurrentProgress){this.setTip(LoadingStateTxt.VersionLoadZip+" "+convertCurrentProgress+"/"+convertFileSize+"    "+convertSpeed)}else{this.setTip(LoadingStateTxt.VersionLoadZip)}};GameLaunchLoding.prototype.onVersionCrosswalkUnZip=function(current,total){if(total>0){this.setView(Math.floor((current/total)*100),true);this.setTip(LoadingStateTxt.VersionUnZip+" "+current+"/"+total)}else{this.setView(0,true);this.setTip(LoadingStateTxt.VersionUnZip)}};GameLaunchLoding.prototype.onVersionCrosswalkAppUpdate=function(percent,currentSize,totalSize){this.setView(percent,true);if(currentSize){this.setTip(LoadingStateTxt.VersionAppUpdate+" "+bToStr(currentSize)+"/"+bToStr(totalSize))}else{this.setTip(LoadingStateTxt.VersionAppUpdate)}};GameLaunchLoding.prototype.onVersionLoadZip=function(currentSize,totalSize,speed){var rate=Math.floor((currentSize/totalSize)*98);if(rate<95){this.setTip(LoadingStateTxt.VersionLoadZip+" "+bToStr(currentSize)+"/"+bToStr(totalSize)+"    "+kbToStr(speed)+"/s")}else{this.setTip(LoadingStateTxt.VersionUnZip)}this.setView(rate,true,true)};GameLaunchLoding.prototype.onVersionUnZip=function(index,total){this.setTip(LoadingStateTxt.VersionUnZip);this.setView(Math.floor((index/total)*98),true,true);var time=new Date().getTime();if(time>this._repaint+20||index<=1){Laya.stage.repaint();this._repaint=time}};GameLaunchLoding.prototype.onEnd=function(){this.setTip(LoadingStateTxt.LoadedEnd);this.loading(100)};return GameLaunchLoding}());var gameLaunchLoding=new GameLaunchLoding();gameLaunchLoding.onBegin();var GameVersions;(function(GameVersions){var Handler=laya.utils.Handler;var LocalStorage=Laya.LocalStorage;var Manager=(function(){function Manager(){this.platform="android";this.urlpath="http://mbqb.ihaiu.com/Gidea-PF-Res/resources/ios/web/";this.url="http://mbqb.ihaiu.com/Gidea-PF-Res/resources/ios/web/index.html";this.appId="com.shinezone.movie";this.webRoot="http://mbqb.ihaiu.com/Gidea-PF-Res/resources";this.webVersionUrl="http://mbqb.ihaiu.com/Gidea-PF-Res/resources/verinfo/DTGameVersion.json";this.assetCopytoFileVersionData=new GameVersions.VersionData();this.localAppVersionData=new GameVersions.VersionData();this.webAppVersionData=new GameVersions.VersionData();this.localResVersionData=new GameVersions.VersionData();this.webResVersionData=new GameVersions.VersionData();this.localPartialVersionData=new GameVersions.VersionData();this.webPartialVersionData=new GameVersions.VersionData()}Object.defineProperty(Manager,"Instance",{get:function(){if(!Manager._Instance){Manager._Instance=new Manager()}return Manager._Instance},enumerable:true,configurable:true});Manager.prototype.init=function(){if(BrowserDetect.isCrosswalk){this.versionHandler=new GameVersions.CrosswalkVersionHandler(this)}else{this.versionHandler=new GameVersions.ConchVersionHandler(this)}this.platform=AppSetting.platform;this.appId=AppSetting.appId;this.url=AppSetting.url;this.urlpath=this.url.replace("index.html","");var folderUrl=this.url.replace("/index.html","");folderUrl=folderUrl.substring(0,folderUrl.lastIndexOf("/"));this.webRoot=folderUrl.substring(0,folderUrl.lastIndexOf("/"));this.webVersionUrl=this.webRoot+"/verinfo/DTGameVersion.json";console.log("GameVersion platform="+this.platform);console.log("GameVersion appId="+this.appId);console.log("GameVersion url="+this.url);console.log("GameVersion urlpath="+this.urlpath);console.log("GameVersion webRoot="+this.webRoot);console.log("GameVersion webVersionUrl="+this.webVersionUrl);gameDeviceConfig.checkNetwork();this.localAppVersionData=new GameVersions.VersionData().setVersionTxt(this.localAppVersion);this.localResVersionData=new GameVersions.VersionData().setVersionTxt(this.localResVersion);this.assetCopytoFileVersionData=new GameVersions.VersionData().setVersionTxt(this.assetsCopytoFileVersion);console.log("GameVersion localAppVersionData="+this.localAppVersionData.toString());console.log("GameVersion localResVersionData="+this.localResVersionData.toString());console.log("GameVersion assetCopytoFileVersionData="+this.assetCopytoFileVersionData.toString());gameLaunchLoding.setVersion();try{if(!BrowserDetect.enableGM&&window.showAlertOnJsException){window.showAlertOnJsException(false)}}catch(error){console.warn("window.showAlertOnJsException error:"+error)}if(AppSetting.enableVersion){this.checkAssetsCopy()}else{this.end()}};Manager.prototype.refreshAppVersion=function(){this.__localResVersion=null;this.localAppVersionData=new GameVersions.VersionData().setVersionTxt(this.localAppVersion);this.localResVersionData=new GameVersions.VersionData().setVersionTxt(this.localResVersion);gameLaunchLoding.setVersion()};Object.defineProperty(Manager.prototype,"localAppVersion",{get:function(){return gameApplication.AppVersionName},enumerable:true,configurable:true});Object.defineProperty(Manager.prototype,"localResVersion",{get:function(){if(!this.__localResVersion){this.__localResVersion=LocalStorage.getItem("__localResVersion");if(!this.__localResVersion){this.__localResVersion=this.localAppVersion}}return this.__localResVersion},set:function(version){this.__localResVersion=version;LocalStorage.setItem("__localResVersion",version)},enumerable:true,configurable:true});Object.defineProperty(Manager.prototype,"assetsCopytoFileVersion",{get:function(){if(!this.__assetsCopytoFileVersion){this.__assetsCopytoFileVersion=LocalStorage.getItem("__assetsCopytoFileVersion");if(!this.__assetsCopytoFileVersion){this.__assetsCopytoFileVersion="0.0.0"}}return this.__assetsCopytoFileVersion},set:function(version){this.__assetsCopytoFileVersion=version;LocalStorage.setItem("__assetsCopytoFileVersion",version)},enumerable:true,configurable:true});Object.defineProperty(Manager.prototype,"localPartialVersion",{get:function(){if(!this.__localPartialVersion){this.__localPartialVersion=LocalStorage.getItem("__localPartialVersion");if(!this.__localPartialVersion){this.__localPartialVersion="0.0.0"}}return this.__localPartialVersion},set:function(version){this.__localPartialVersion=version;LocalStorage.setItem("__localPartialVersion",version)},enumerable:true,configurable:true});Object.defineProperty(Manager.prototype,"isNeedAssetsCopy",{get:function(){if(BrowserDetect.isCrosswalk){return !this.localAppVersionData.equal(this.assetCopytoFileVersionData)}return false},enumerable:true,configurable:true});Manager.prototype.checkAssetsCopy=function(){if(!this.isNeedAssetsCopy){this.onCheckAssetsCopyEnd();return}this.versionHandler.checkAssetsCopy()};Manager.prototype.onCheckAssetsCopyEnd=function(){if(!AppSetting.enableVersion||(!BrowserDetect.isCrosswalk&&!BrowserDetect.isConch)||location.href=="http://stand.alone.version/index.html"){this.end();return}if(!BrowserDetect.isIOS){gameLaunchLoding.onVersionLoadConfig()}this.loadWebVersion(this.webVersionUrl)};Manager.prototype.loadWebVersion=function(webVersionUrl){var _this=this;var ___this=this;Laya.loader.load(webVersionUrl,Handler.create(this,function(){var json=Laya.loader.getRes(webVersionUrl);console.log("loadWebVersion: "+JSON.stringify(json));if(json){var all;var platform;for(var k in json){var config=json[k];if((config.Platform==___this.platform)||(config.Platform=="*"||config.Platform=="")){if(config.ApplicationId==___this.appId||config.ApplicationId=="*"||config.ApplicationId==""){___this.webVersionConfig=config}}}if(___this.webVersionConfig){console.log("GameVersion webVersionConfig="+JSON.stringify(___this.webVersionConfig));___this.checkVersion()}else{console.log("GameVersion loadWebVersion no find config!!");___this.end()}}else{console.log("GameVersion loadWebVersion error!!:");Games.SystemMessag.Instance.alertText(LoadingStateTxt.VersionAlertUpdateResGetInfoFailMsg,_this,function(){location.reload();return})}}),null,Loader.JSON)};Manager.prototype.checkVersion=function(){if(window.gmButton&&this.webVersionConfig.VisiableGM!==undefined&&!BrowserDetect.enableGM){window.gmButton.visible=this.webVersionConfig.VisiableGM}var IsErrorAlert=false;if(this.webVersionConfig.IsErrorAlert!==undefined){IsErrorAlert=this.webVersionConfig.IsErrorAlert}try{if(window.showAlertOnJsException){}}catch(error){console.warn("window.showAlertOnJsException error:"+error)}console.log("GameVersion localAppVersion="+this.localAppVersion);console.log("GameVersion webAppVersion="+this.webVersionConfig.AppVersion);console.log("GameVersion localResVersion="+this.localResVersion);console.log("GameVersion webResVersion="+this.webVersionConfig.PatchVersion);this.localAppVersionData=new GameVersions.VersionData().setVersionTxt(this.localAppVersion);this.webAppVersionData=new GameVersions.VersionData().setVersionTxt(this.webVersionConfig.AppVersion);this.localResVersionData=new GameVersions.VersionData().setVersionTxt(this.localResVersion);this.webResVersionData=new GameVersions.VersionData().setVersionTxt(this.webVersionConfig.PatchVersion);this.localPartialVersionData=new GameVersions.VersionData().setVersionTxt(this.localPartialVersion);this.webPartialVersionData=new GameVersions.VersionData().setVersionTxt(this.webVersionConfig.PartialVersion);if(this.isNeedUpdateApp(this.localAppVersionData,this.webAppVersionData)){this.showNeedUpdateApp();return}if(!this.webPartialVersionData.isZero&&this.isNeedUpdateRes(this.localPartialVersionData,this.webPartialVersionData)){this.showNeedUpdatePartial();return}if(this.isNeedUpdateRes(this.localResVersionData,this.webResVersionData)){this.showNeedUpdatePatch();return}this.end()};Manager.prototype.showNeedUpdateApp=function(){console.log("GameVersion NeedUpdateApp");Games.SystemMessag.Instance.alrtTextFull(LoadingStateTxt.VersionAlertUpdateAppMsg.format(this.localAppVersionData.toString(),this.webAppVersionData.toString()),LoadingStateTxt.VersionAlertUpdateAppTitle,this,this.gotoDownloadApp,LoadingStateTxt.VersionAlertUpdateAppBtn,false,true,false)};Manager.prototype.showNeedUpdatePartial=function(){console.log("GameVersion showNeedUpdatePartial");if(this.webVersionConfig.IsPartialAlert){Games.SystemMessag.Instance.alrtTextFull(LoadingStateTxt.VersionAlertUpdateResMsg.format(this.localPartialVersionData.toString(),this.webPartialVersionData.toString()),LoadingStateTxt.VersionAlertUpdateResTitle,this,this.updatePartial,LoadingStateTxt.VersionAlertUpdateResBtn,false)}else{this.updatePartial()}};Manager.prototype.showNeedUpdatePatch=function(){console.log("GameVersion showNeedUpdatePatch");if(this.webVersionConfig.IsPatchAlert){Games.SystemMessag.Instance.alrtTextFull(LoadingStateTxt.VersionAlertUpdateResMsg.format(this.localResVersionData.toString(),this.webResVersionData.toString()),LoadingStateTxt.VersionAlertUpdateResTitle,this,this.updatePatch,LoadingStateTxt.VersionAlertUpdateResBtn,false)}else{this.updatePatch()}};Manager.prototype.isNeedUpdateApp=function(current,target){if(target.master>current.master){return true}if(target.master==current.master){if(target.minor>current.minor){return true}}return false};Manager.prototype.isNeedUpdateRes=function(current,target){if(target.master>current.master){return true}if(target.master==current.master){if(target.minor>current.minor){return true}if(target.minor==current.minor){if(target.revised>current.revised){return true}if(target.revised==current.revised){if(target.revised2>current.revised2){return true}}}}return false};Manager.prototype.gotoDownloadApp=function(){if(!this.webVersionConfig.AppDownloadType){this.webVersionConfig.AppDownloadType=1}if(this.webVersionConfig&&this.webVersionConfig.AppDownloadWeb){this.versionHandler.appupdate()}else{gameApplication.openURL(this.webRoot+"/appdown.html")}};Manager.prototype.updatePartial=function(){this.versionHandler.updatePartial()};Manager.prototype.onUpdateParitialComplete=function(){this.localPartialVersion=this.webVersionConfig.PartialVersion;if(this.isNeedUpdateRes(this.localResVersionData,this.webResVersionData)){this.updatePatch()}else{this.onComplete()}};Manager.prototype.updatePatch=function(){this.versionHandler.updatePatch()};Manager.prototype.onUpdatePatchComplete=function(){this.localResVersion=this.webVersionConfig.PatchVersion;this.onComplete()};Manager.prototype.onComplete=function(){console.log("GameVersion onComplete");location.reload()};Manager.prototype.end=function(){console.log("GameVersion end");Games.GameLaunch.isRunEnd=true;if(window.Game){Game.install()}gameLaunchLoding.setVersion();gameLaunchLoding.closeLayaLoadingView()};return Manager}());GameVersions.Manager=Manager})(GameVersions||(GameVersions={}));var GameVersions;(function(GameVersions){var VersionData=(function(){function VersionData(){this.master=0;this.minor=0;this.revised=0;this.revised2=0}Object.defineProperty(VersionData.prototype,"isZero",{get:function(){return this.master==0&&this.minor==0&&this.revised==0&&this.revised2==0},enumerable:true,configurable:true});VersionData.prototype.setVersionTxt=function(versionTxt){if(versionTxt===undefined||versionTxt===null){return this}if(isNullOrEmpty(versionTxt.trim())){return this}versionTxt=versionTxt.toLowerCase();versionTxt=versionTxt.replace("version:","").replace("version","").replace("ver","").replace("v","");var arr=versionTxt.split(".");this.master=parseInt(arr[0]);if(arr.length>1){this.minor=parseInt(arr[1])}if(arr.length>2){this.revised=parseInt(arr[2])}if(arr.length>3){this.revised2=parseInt(arr[3])}return this};VersionData.prototype.equal=function(target){return this.master==target.master&&this.minor==target.minor&&this.revised==target.revised&&this.revised2==target.revised2};VersionData.prototype.toString=function(){return"v"+this.master+"."+this.minor+"."+this.revised+"."+this.revised2};return VersionData}());GameVersions.VersionData=VersionData})(GameVersions||(GameVersions={}));var GameVersions;(function(GameVersions){var VersionHandler=(function(){function VersionHandler(manager){this.manager=manager}Object.defineProperty(VersionHandler.prototype,"urlpath",{get:function(){return this.manager.urlpath},enumerable:true,configurable:true});Object.defineProperty(VersionHandler.prototype,"webVersionConfig",{get:function(){return this.manager.webVersionConfig},enumerable:true,configurable:true});Object.defineProperty(VersionHandler.prototype,"localPartialVersion",{get:function(){return this.manager.localPartialVersion},set:function(version){this.manager.localPartialVersion=version},enumerable:true,configurable:true});Object.defineProperty(VersionHandler.prototype,"localResVersion",{get:function(){return this.manager.localResVersion},set:function(version){this.manager.localResVersion=version},enumerable:true,configurable:true});Object.defineProperty(VersionHandler.prototype,"localResVersionData",{get:function(){return this.manager.localResVersionData},enumerable:true,configurable:true});Object.defineProperty(VersionHandler.prototype,"webResVersionData",{get:function(){return this.manager.webResVersionData},enumerable:true,configurable:true});VersionHandler.prototype.isNeedUpdateRes=function(current,target){return this.manager.isNeedUpdateRes(current,target)};VersionHandler.prototype.appupdate=function(){gameApplication.openURL(this.manager.webVersionConfig.AppDownloadWeb)};VersionHandler.prototype.checkAssetsCopy=function(){this.manager.onCheckAssetsCopyEnd()};VersionHandler.prototype.updatePartial=function(){};VersionHandler.prototype.updatePatch=function(){};VersionHandler.prototype.onComplete=function(){this.manager.onComplete()};VersionHandler.prototype.end=function(){this.manager.end()};return VersionHandler}());GameVersions.VersionHandler=VersionHandler})(GameVersions||(GameVersions={}));var GameVersions;(function(GameVersions){var ConchVersionHandler=(function(_super){__extends(ConchVersionHandler,_super);function ConchVersionHandler(){return _super!==null&&_super.apply(this,arguments)||this}ConchVersionHandler.prototype.checkAssetsCopy=function(){};ConchVersionHandler.prototype.updatePartial=function(){var _this=this;var zip=new GameVersions.UpdateResZip();zip.urlpath=this.urlpath;zip.assetsidUrl=this.webVersionConfig.ResWeb+"/"+this.webVersionConfig.PartialFolder+"/update/assetsid.txt";zip.filetableUrl=this.webVersionConfig.ResWeb+"/"+this.webVersionConfig.PartialFolder+"/update/filetable.txt";zip.zipUrl=this.webVersionConfig.ResWeb+"/"+this.webVersionConfig.PartialFolder+"/res.zip";var cachePath=window.conch.getCachePath();var filename="res_partia_"+this.webVersionConfig.PatchVersion+"__"+this.webVersionConfig.PatchFolder;filename=filename.replace(/\./g,"_").replace(/\//g,"__").replace(/\\/g,"__")+new Date().getTime();zip.zipPath=cachePath+"/"+filename+".zip";zip.setCallback(this,function(){_this.manager.onUpdateParitialComplete()},function(){if(_this.isNeedUpdateRes(_this.localResVersionData,_this.webResVersionData)){_this.updatePatch()}else{_this.end()}});zip.run()};ConchVersionHandler.prototype.updatePatch=function(){var _this=this;var zip=new GameVersions.UpdateResZip();zip.urlpath=this.urlpath;zip.assetsidUrl=this.webVersionConfig.ResWeb+"/"+this.webVersionConfig.PatchFolder+"/update/assetsid.txt";zip.filetableUrl=this.webVersionConfig.ResWeb+"/"+this.webVersionConfig.PatchFolder+"/update/filetable.txt";zip.zipUrl=this.webVersionConfig.ResWeb+"/"+this.webVersionConfig.PatchFolder+"/res.zip";var cachePath=window.conch?window.conch.getCachePath():"./";var filename="res_patch_"+this.webVersionConfig.PatchVersion+"__"+this.webVersionConfig.PatchFolder;filename=filename.replace(/\./g,"_").replace(/\//g,"__").replace(/\\/g,"__")+new Date().getTime();zip.zipPath=cachePath+"/"+filename+".zip";zip.setCallback(this,function(){_this.manager.onUpdatePatchComplete()},function(){_this.end()});zip.run()};return ConchVersionHandler}(GameVersions.VersionHandler));GameVersions.ConchVersionHandler=ConchVersionHandler})(GameVersions||(GameVersions={}));var GameVersions;(function(GameVersions){var Handler=laya.utils.Handler;var UpdateResZip=(function(){function UpdateResZip(){this.assetsidUrl="http://mbqb.ihaiu.com/Gidea-PF-Res/resources/ios/version-patch/patch_v1_05_01/update/assetsid.txt";this.filetableUrl="http://mbqb.ihaiu.com/Gidea-PF-Res/resources/ios/version-patch/patch_v1_05_01/update/filetable.txt";this.urlpath="http://mbqb.ihaiu.com/Gidea-PF-Res/resources/ios/web/";this.zipUrl="http://mbqb.ihaiu.com/Gidea-PF-Res/resources/ios/version-patch/patch_v1_05_01/update/res.zip";this.zipRate=0;this.zipRateNetBreak=10;this.zipRateTimeHandler=-1}UpdateResZip.prototype.setCallback=function(callbackObj,onComplete,onError){this.callbackObj=callbackObj;this.callbacOnComplete=onComplete;this.callbacOnError=onError};UpdateResZip.prototype.run=function(){this.updateAssetsid()};UpdateResZip.prototype.updateAssetsid=function(){var _this=this;Laya.loader.load(this.assetsidUrl,Handler.create(this,function(){_this.webAssetsid=Laya.loader.getRes(_this.assetsidUrl);_this.updateFiletable()}))};UpdateResZip.prototype.updateFiletable=function(){var _this=this;Laya.loader.load(this.filetableUrl,Handler.create(this,function(){_this.txtdcc=Laya.loader.getRes(_this.filetableUrl);_this.downZip()}))};UpdateResZip.prototype.saveFiletable=function(){if(this.txtdcc&&this.txtdcc.length>0){window.appcache.saveFileTable(this.txtdcc);window.appcache=new window.AppCache(this.urlpath);if(this.webAssetsid){window.appcache.setResourceID("netassetsid",this.webAssetsid)}}};UpdateResZip.prototype.downZip=function(){this.zipRate=0;this.zipRateNetBreak=10;this.breakpointDownZip()};UpdateResZip.prototype.breakpointDownZip=function(){var _this=this;console.log("breakpointDownZip zipRate="+this.zipRate);window.downloadBigFile(this.zipUrl,this.zipPath,function(total,now,speed){var zipRate=Math.floor((now/total)*100);if(zipRate!=_this.zipRate){gameLaunchLoding.onVersionLoadZip(now,total,speed);_this.zipRate=Math.floor((now/total)*100)}return false},function(curlret,httpret){if(curlret!=0||httpret<200||httpret>=300){Games.SystemMessag.Instance.alertText(LoadingStateTxt.NetworkState_Error,_this,function(){location.reload();return})}else{_this.unZip()}},10,100000000);console.log("breakpointDownZip end zipRate="+this.zipRate)};UpdateResZip.prototype.unZip=function(){this.saveFiletable();var index=0;var total=100;gameLaunchLoding.onVersionUnZip(0,total);var zip=new window.ZipFile();if(zip.setSrc(this.zipPath)){zip.forEach(function(id,name,dir,sz){if(!dir){var buf=zip.readFile(id);var fid=window.appcache.hashstr("/"+name);if(window.appcache.updateFile(fid,0,buf,false)){console.log("GameVersion appcache updatefile:"+name)}else{console.log("GameVersion appcache updatefile error:"+name)}gameLaunchLoding.onVersionUnZip(index++,total)}});zip.close();this.complete()}else{console.log("GameVersion set zip src error!");Games.SystemMessag.Instance.alertText(LoadingStateTxt.VersionAlertUpdateResFailMsg,this,function(){location.reload();return})}};UpdateResZip.prototype.complete=function(){console.log("GameVersion onComplete "+this.zipUrl);if(this.callbacOnComplete){if(this.callbackObj){this.callbacOnComplete.apply(this.callbackObj)}else{this.callbacOnComplete()}}};UpdateResZip.prototype.error=function(){console.log("GameVersion error "+this.zipUrl);if(this.callbacOnError){if(this.callbackObj){this.callbacOnError.apply(this.callbackObj)}else{this.callbacOnError()}}};return UpdateResZip}());GameVersions.UpdateResZip=UpdateResZip})(GameVersions||(GameVersions={}));var GameVersions;(function(GameVersions){var CrosswalkVersionHandler=(function(_super){__extends(CrosswalkVersionHandler,_super);function CrosswalkVersionHandler(manager){var _this=_super.call(this,manager)||this;_this.bridger=new GameVersions.GameVersionBridger(_this);return _this}CrosswalkVersionHandler.prototype.appupdate=function(){if(BrowserDetect.isAndroid){var apkUrl=this.manager.webVersionConfig.AppDownloadWeb;var apkName=this.manager.webVersionConfig.AppDownloadName;if(isNullOrEmpty(apkName)){apkName="MovieInc.apk";try{var name_1=apkUrl.split("?")[0];name_1=name_1.substring(name_1.lastIndexOf("/")+1,name_1.length);if(!name_1.endsWith(".apk")){name_1+=".apk"}apkName=name_1}catch(error){}}var downloadType=this.manager.webVersionConfig.AppDownloadType;this.bridger.appupdate(apkUrl,apkName,downloadType)}else{_super.prototype.appupdate.call(this)}};CrosswalkVersionHandler.prototype.checkAssetsCopy=function(){this.bridger.assetsCopyTo("www",AppSetting.wwwFileDir,AppSetting.wwwSize)};CrosswalkVersionHandler.prototype.updatePartial=function(){var filename="res_patch_"+this.webVersionConfig.PartialVersion+"__"+this.webVersionConfig.PartialFolder;filename=filename.replace(/\./g,"_").replace(/\//g,"__").replace(/\\/g,"__");this.partialUrl=this.webVersionConfig.ResWeb+"/"+this.webVersionConfig.PartialFolder+"/res.zip";this.partialPath=AppSetting.FileDir+"/"+filename+".zip";this.bridger.downloadBridger.sComplete.addOnce(this.onDownloadPartialComplete,this);this.bridger.download(this.partialUrl,this.partialPath)};CrosswalkVersionHandler.prototype.onDownloadPartialComplete=function(){this.bridger.unArchiverBridger.sComplete.addOnce(this.onUnArchiverPartialComplete,this);this.bridger.unArchiver(this.partialPath,AppSetting.wwwFileDir,"")};CrosswalkVersionHandler.prototype.onUnArchiverPartialComplete=function(){this.manager.onUpdateParitialComplete()};CrosswalkVersionHandler.prototype.updatePatch=function(){var filename="res_patch_"+this.webVersionConfig.PatchVersion+"__"+this.webVersionConfig.PatchFolder;filename=filename.replace(/\./g,"_").replace(/\//g,"__").replace(/\\/g,"__");this.patchUrl=this.webVersionConfig.ResWeb+"/"+this.webVersionConfig.PatchFolder+"/res.zip";this.patchPath=AppSetting.FileDir+"/"+filename+".zip";this.bridger.downloadBridger.sComplete.addOnce(this.onDownloadPatchComplete,this);this.bridger.download(this.patchUrl,this.patchPath)};CrosswalkVersionHandler.prototype.onDownloadPatchComplete=function(){this.bridger.unArchiverBridger.sComplete.addOnce(this.onUnArchiverPatchComplete,this);this.bridger.unArchiver(this.patchPath,AppSetting.wwwFileDir,"")};CrosswalkVersionHandler.prototype.onUnArchiverPatchComplete=function(){this.manager.onUpdatePatchComplete()};return CrosswalkVersionHandler}(GameVersions.VersionHandler));GameVersions.CrosswalkVersionHandler=CrosswalkVersionHandler})(GameVersions||(GameVersions={}));var GameVersions;(function(GameVersions){var GameVersionAssetsCopyToBridger=(function(_super){__extends(GameVersionAssetsCopyToBridger,_super);function GameVersionAssetsCopyToBridger(versionHandler){var _this=_super.call(this)||this;_this.jsClassName="GameVersionAssetsCopyToBridger";_this.versionHandler=versionHandler;_this.register();return _this}GameVersionAssetsCopyToBridger.prototype.onArchiverPre=function(){gameLaunchLoding.onAssetsCopy(0,AppSetting.wwwSize)};GameVersionAssetsCopyToBridger.prototype.onArchiverStart=function(){};GameVersionAssetsCopyToBridger.prototype.onArchiverProgress=function(msg){gameLaunchLoding.onAssetsCopy(msg.current,msg.total)};GameVersionAssetsCopyToBridger.prototype.onArchiverComplete=function(){gameLaunchLoding.onAssetsCopy(AppSetting.wwwSize,AppSetting.wwwSize);this.versionHandler.manager.assetsCopytoFileVersion=this.versionHandler.manager.localAppVersion;this.versionHandler.manager.localResVersion=this.versionHandler.manager.localAppVersion;window.location.replace(AppSetting.wwwFileDir+"/index.html")};GameVersionAssetsCopyToBridger.prototype.onArchiverFail=function(error){Games.SystemMessag.Instance.alrtTextFull(error,LoadingStateTxt.VersionAssetsCopyError)};return GameVersionAssetsCopyToBridger}(Games.GameBridger));GameVersions.GameVersionAssetsCopyToBridger=GameVersionAssetsCopyToBridger})(GameVersions||(GameVersions={}));var GameVersions;(function(GameVersions){var GameVersionBridger=(function(_super){__extends(GameVersionBridger,_super);function GameVersionBridger(versionHandler){var _this=_super.call(this)||this;_this.jsClassName="GameVersionBridger";_this.versionHandler=versionHandler;_this.assetsCopyToBridger=new GameVersions.GameVersionAssetsCopyToBridger(versionHandler);_this.unArchiverBridger=new GameVersions.GameVersionUnArchiverBridger(versionHandler);_this.downloadBridger=new GameVersions.GameVersionDownloadBridger(versionHandler);_this.appupdateBridger=new GameVersions.GameVersionAppUpdateBridger(versionHandler);_this.register();_this.assetsCopyToBridger.register();_this.unArchiverBridger.register();_this.downloadBridger.register();_this.appupdateBridger.register();return _this}GameVersionBridger.prototype.assetsCopyTo=function(assetPath,destPath,estimateTotal){this.callNative("assetsCopyTo",{assetPath:assetPath,destPath:destPath,estimateTotal:estimateTotal,listenerJsClass:this.assetsCopyToBridger.jsClassName})};GameVersionBridger.prototype.unArchiver=function(srcfile,unrarPath,password){this.callNative("unArchiver",{srcfile:srcfile,unrarPath:unrarPath,password:password,listenerJsClass:this.unArchiverBridger.jsClassName})};GameVersionBridger.prototype.download=function(url,path){this.callNative("download",{url:url,path:path,listenerJsClass:this.downloadBridger.jsClassName})};GameVersionBridger.prototype.stopdownload=function(url){this.callNative("stopdownload",{url:url})};GameVersionBridger.prototype.appupdate=function(apkUrl,apkName,downloadType){Games.SystemMessag.Instance.closeAlert();this.callNative("appupdate",{apkUrl:apkUrl,apkName:apkName,downloadType:downloadType,listenerJsClass:this.appupdateBridger.jsClassName})};return GameVersionBridger}(Games.GameBridger));GameVersions.GameVersionBridger=GameVersionBridger})(GameVersions||(GameVersions={}));var GameVersions;(function(GameVersions){var GameVersionDownloadBridger=(function(_super){__extends(GameVersionDownloadBridger,_super);function GameVersionDownloadBridger(versionHandler){var _this=_super.call(this)||this;_this.jsClassName="GameVersionDownloadBridger";_this.sComplete=new Signal();_this.versionHandler=versionHandler;_this.register();return _this}GameVersionDownloadBridger.prototype.onTaskPre=function(url){gameLaunchLoding.onVersionCrosswalkLoadZip(0,null,null,null)};GameVersionDownloadBridger.prototype.onTaskResume=function(url){};GameVersionDownloadBridger.prototype.onTaskRunning=function(msg){gameLaunchLoding.onVersionCrosswalkLoadZip(msg.percent,msg.convertCurrentProgress,msg.convertFileSize,msg.convertSpeed)};GameVersionDownloadBridger.prototype.onTaskComplete=function(url){gameLaunchLoding.onVersionCrosswalkLoadZip(100,null,null,null);this.sComplete.dispatch()};GameVersionDownloadBridger.prototype.onTaskStop=function(url){};GameVersionDownloadBridger.prototype.onTaskCancel=function(url){};GameVersionDownloadBridger.prototype.onTaskFail=function(url){Games.SystemMessag.Instance.alertText(LoadingStateTxt.NetworkState_Error,this,function(){location.reload();return})};return GameVersionDownloadBridger}(Games.GameBridger));GameVersions.GameVersionDownloadBridger=GameVersionDownloadBridger})(GameVersions||(GameVersions={}));var GameVersions;(function(GameVersions){var GameVersionAppUpdateBridger=(function(_super){__extends(GameVersionAppUpdateBridger,_super);function GameVersionAppUpdateBridger(versionHandler){var _this=_super.call(this)||this;_this.jsClassName="GameVersionAppUpdateBridger";_this.versionHandler=versionHandler;_this.register();return _this}GameVersionAppUpdateBridger.prototype.onTaskPre=function(url){Games.SystemMessag.Instance.closeAlert();gameLaunchLoding.onVersionCrosswalkAppUpdate(0,null,null)};GameVersionAppUpdateBridger.prototype.onTaskResume=function(url){};GameVersionAppUpdateBridger.prototype.onTaskRunning=function(msg){gameLaunchLoding.onVersionCrosswalkAppUpdate(msg.progress,msg.current,msg.total)};GameVersionAppUpdateBridger.prototype.onTaskComplete=function(url){gameLaunchLoding.onVersionCrosswalkAppUpdate(100,null,null)};GameVersionAppUpdateBridger.prototype.onTaskStop=function(url){this.versionHandler.manager.showNeedUpdateApp()};GameVersionAppUpdateBridger.prototype.onTaskCancel=function(url){this.versionHandler.manager.showNeedUpdateApp()};GameVersionAppUpdateBridger.prototype.onTaskFail=function(url){var _this=this;Games.SystemMessag.Instance.alertText(LoadingStateTxt.NetworkState_Error,this,function(){_this.versionHandler.manager.showNeedUpdateApp();return})};return GameVersionAppUpdateBridger}(Games.GameBridger));GameVersions.GameVersionAppUpdateBridger=GameVersionAppUpdateBridger})(GameVersions||(GameVersions={}));var GameVersions;(function(GameVersions){var GameVersionUnArchiverBridger=(function(_super){__extends(GameVersionUnArchiverBridger,_super);function GameVersionUnArchiverBridger(versionHandler){var _this=_super.call(this)||this;_this.jsClassName="GameVersionUnArchiverBridger";_this.sComplete=new Signal();_this.versionHandler=versionHandler;_this.register();return _this}GameVersionUnArchiverBridger.prototype.onArchiverPre=function(){gameLaunchLoding.onVersionCrosswalkUnZip(0,AppSetting.wwwSize)};GameVersionUnArchiverBridger.prototype.onArchiverStart=function(){};GameVersionUnArchiverBridger.prototype.onArchiverProgress=function(msg){gameLaunchLoding.onVersionCrosswalkUnZip(msg.current,msg.total)};GameVersionUnArchiverBridger.prototype.onArchiverComplete=function(){gameLaunchLoding.onVersionCrosswalkUnZip(100,AppSetting.wwwSize);this.sComplete.dispatch()};GameVersionUnArchiverBridger.prototype.onArchiverFail=function(){Games.SystemMessag.Instance.alertText(LoadingStateTxt.VersionAlertUpdateResFailMsg,this,function(){location.reload();return})};return GameVersionUnArchiverBridger}(Games.GameBridger));GameVersions.GameVersionUnArchiverBridger=GameVersionUnArchiverBridger})(GameVersions||(GameVersions={}));var Games;(function(Games){var GameLaunch=(function(){function GameLaunch(){}GameLaunch.prototype.install=function(){var _this=this;Laya.init(ScreenSetting.developWidth,ScreenSetting.developHeight,Laya.WebGL);Games.GameBridgerManager.Instance.init();if(BrowserDetect.isCrosswalk){window.gameApplication=Games.GameBridgerManager.Instance.applicationBridger}else{var gameApplication=new GameApplicationConch(window.gameApplication);window.gameApplication=gameApplication}if(BrowserDetect.isApp){if(BrowserDetect.isIphoneX){Laya.stage.__offestY=90;Laya.stage.__screenHeightSub=Laya.stage.__offestY+68}}if(BrowserDetect.isShowState){laya.utils.Stat.show(0,0)}Laya.stage.scaleMode=BrowserDetect.isMobile?Laya.Stage.SCALE_FIXED_AUTO:Laya.Stage.SCALE_SHOWALL;Laya.stage.alignH="center";Laya.stage.alignV="top";if(!BrowserDetect.isAndroid){Laya.stage.frameRate=Laya.Stage.FRAME_SLOW}Laya.MouseManager.multiTouchEnabled=false;if(LangManager.Instance.lang==LangType.zh_cn){LoadingStateTxt=LoadingStateTxt_ZH_Cn}gameLaunchLoding.setTips(LoadingStateTxt.tips);Games.MenuLayer.install();Games.ChannelManager.getInstance().requestServerList(null,null,function(){_this.loadVersion()},function(){_this.loadVersion()})};GameLaunch.prototype.loadVersion=function(){if(BrowserDetect.isUseVersion){console.log("loadVersion:"+BrowserDetect.versionUrl);Laya.ResourceVersion.type=Laya.ResourceVersion.FILENAME_VERSION;Laya.ResourceVersion.enable(BrowserDetect.versionUrl+"?t="+new Date().getTime(),Laya.Handler.create(this,this.onLoadedVersion))}else{this.installSystem()}};GameLaunch.prototype.onLoadedVersion=function(){this.installSystem()};GameLaunch.prototype.installSystem=function(){fairygui.UIConfig.packageFileExtension=Games.GuiSetting.packageFileExtension;fairygui.UIConfig.buttonSound=SoundKey.getUrl(SoundKey.MM01_Button);fgui.System.SystemBinder.bindAll();fairygui.UIObjectFactory.setLoaderExtension(FGLoader);fairygui.UIConfig.defaultFont="HYZhengYuan-65W";window.__isCnLang=LangManager.Instance.lang==LangType.zh_cn;Laya.loader.load([{url:"res/fgui/System.bin",type:Laya.Loader.BUFFER},{url:"res/fgui/System_atlas0.png",type:Laya.Loader.IMAGE},{url:"res/fgui/System_atlas_5sasa.png",type:Laya.Loader.IMAGE}],Laya.Handler.create(this,this.onLoadedSystem))};GameLaunch.prototype.onLoadedSystem=function(){Games.GuiSetting.addPackage("res/fgui/System");fairygui.UIConfig.globalModalWaiting=fairygui.UIPackage.getItemURL("System","GlobalModalWaiting");fairygui.UIConfig.windowModalWaiting=fairygui.UIPackage.getItemURL("System","WindowModalWaiting");Games.LoaderManager.instance=Games.LoaderManager.getInstance();Games.LoaderManager.instance.install();Games.LoaderManager.instance.open(Games.LoaderId.Launch);gameLaunchLoding.onLoadedLaunch();var gm=fgui.System.GMLanuchButton.createInstance();gm.draggable=true;gm.dragBounds=new laya.maths.Rectangle(-50,-50,Laya.stage.width+100,Laya.stage.height+100);gm.visible=false;window.gmButton=gm;Games.MenuLayer.floatMsg.addChild(gm);if(BrowserDetect.enableGM){gm.visible=true}GameVersions.Manager.Instance.init();var launchImg=document.getElementById("launch");if(launchImg){launchImg.remove()}var fontText=document.getElementById("fontText");if(fontText){fontText.remove()}};GameLaunch.isRunEnd=false;return GameLaunch}());Games.GameLaunch=GameLaunch})(Games||(Games={}));var BrowserDetect=new BrowserDetectConfig();var gameDeviceConfig;var ScreenSetting;var isStartGamed=false;function StartGame(){if(isStartGamed){return}isStartGamed=true;gameDeviceConfig=new GameDeviceConfig();ScreenSetting=new ScreenSettingConfig();gameDeviceConfig.init();new Games.GameLaunch().install()}if(!BrowserDetect.isCrosswalk){StartGame()}window.onload=function onWindowLoad(){window.__isloaded=true;if(window.Game){Game.install()}};var Games;(function(Games){var StatisProto=(function(){function StatisProto(){this.channel="business";this.level=5;this.message=new Games.StaticMessage()}Object.defineProperty(StatisProto.prototype,"filter",{get:function(){if(gameApplication.IDFA){return gameApplication.IDFA}return BrowserDetect.deviceId},enumerable:true,configurable:true});StatisProto.prototype.toJson=function(){return JSON.stringify(this)};return StatisProto}());Games.StatisProto=StatisProto})(Games||(Games={}));var Games;(function(Games){var StaticMessage=(function(){function StaticMessage(){this.game_id=1116;this.area_id=9999;this.uid="1";this.time="";this.cash=0;this.coin=0;this.level=1;this.rtime="";this.act="";this.tid="";this.item="";this.value=2;this.value2=1;if(Games.ChannelManager.getInstance().serverItem&&Games.ChannelManager.getInstance().serverItem.staticGameId&&Games.ChannelManager.getInstance().serverItem.staticGameId>0){this.game_id=Games.ChannelManager.getInstance().serverItem.staticGameId}}return StaticMessage}());Games.StaticMessage=StaticMessage})(Games||(Games={}));var Games;(function(Games){var StaticAttributes=(function(){function StaticAttributes(){this.preTime=0;this.preTimeCount=0}Object.defineProperty(StaticAttributes,"Instance",{get:function(){if(!StaticAttributes._Instance){StaticAttributes._Instance=new StaticAttributes()}return StaticAttributes._Instance},enumerable:true,configurable:true});Object.defineProperty(StaticAttributes.prototype,"enable",{get:function(){if(this._enabled===undefined){this._enabled=BrowserDetect.isApp}return this._enabled},enumerable:true,configurable:true});Object.defineProperty(StaticAttributes.prototype,"enableShinezone",{get:function(){return this.enable},enumerable:true,configurable:true});Object.defineProperty(StaticAttributes.prototype,"enableAppflyer",{get:function(){if(!this.enable){return false}if(!BrowserDetect.isIOS){return false}return true},enumerable:true,configurable:true});Object.defineProperty(StaticAttributes.prototype,"enableAppflyerAndorid",{get:function(){if(!this.enable){return false}if(!BrowserDetect.isAndroid){return false}return true},enumerable:true,configurable:true});StaticAttributes.prototype.DateTimeFormat=function(time){if(StaticAttributes.Instance.enableShinezone){if(time==null){time=Game.time.serverSeconds;if(this.preTimeCount<58&&(time-this.preTime<600)&&!isNullOrEmpty(this.preDateTime)){return this.preDateTime+this.secondStr}this.preTime=time}var Dates=new Date(time*1000+Game.time.localSubServerTimezone);var Year=Dates.getFullYear();var Months=(Dates.getMonth()+1)<10?"0"+(Dates.getMonth()+1):(Dates.getMonth()+1);var Day=Dates.getDate()<10?"0"+Dates.getDate():Dates.getDate();var Hours=Dates.getHours()<10?"0"+Dates.getHours():Dates.getHours();var Minutes=Dates.getMinutes()<10?"0"+Dates.getMinutes():Dates.getMinutes();this.preDateTime=Year+"-"+Months+"-"+Day+" "+Hours+":"+Minutes+":";this.preTimeCount=-1;return this.preDateTime+this.secondStr}return""};StaticAttributes.prototype.newDay=function(){this.preTime=0};Object.defineProperty(StaticAttributes.prototype,"secondStr",{get:function(){this.preTimeCount++;return this.preTimeCount<10?"0"+this.preTimeCount:this.preTimeCount},enumerable:true,configurable:true});Object.defineProperty(StaticAttributes.prototype,"curToken",{get:function(){if(isNullOrEmpty(this._token)){this._token=this.DeviceId+Game.time.serverSeconds}return this._token},enumerable:true,configurable:true});Object.defineProperty(StaticAttributes.prototype,"DeviceId",{get:function(){if(gameApplication.IDFA){return gameApplication.IDFA}return BrowserDetect.deviceId},enumerable:true,configurable:true});Object.defineProperty(StaticAttributes.prototype,"rTime",{get:function(){if(isNullOrEmpty(this._rTime)){this._rTime=this.DateTimeFormat(Game.time.registerSeconds)}return this._rTime},enumerable:true,configurable:true});Object.defineProperty(StaticAttributes.prototype,"lTime",{get:function(){return this.DateTimeFormat()},enumerable:true,configurable:true});Object.defineProperty(StaticAttributes.prototype,"cashs",{get:function(){return Game.moduleModel.item.getItemNum(EItemId.dollar)},enumerable:true,configurable:true});Object.defineProperty(StaticAttributes.prototype,"coins",{get:function(){return Game.moduleModel.item.getItemNum(EItemId.gold)},enumerable:true,configurable:true});Object.defineProperty(StaticAttributes.prototype,"levels",{get:function(){return User.info.level},enumerable:true,configurable:true});Object.defineProperty(StaticAttributes.prototype,"uuid",{get:function(){return User.account.userId.toString()},enumerable:true,configurable:true});return StaticAttributes}());Games.StaticAttributes=StaticAttributes})(Games||(Games={}));var Games;(function(Games){var RechargeAttributes=(function(){function RechargeAttributes(){this.orderDic=new Dictionary()}Object.defineProperty(RechargeAttributes,"Instance",{get:function(){if(!RechargeAttributes._Instance){RechargeAttributes._Instance=new RechargeAttributes()}return RechargeAttributes._Instance},enumerable:true,configurable:true});return RechargeAttributes}());Games.RechargeAttributes=RechargeAttributes})(Games||(Games={}));var Games;(function(Games){var ConchMarketJson=(function(){function ConchMarketJson(){this.callback_uri="http://172.16.52.101:3000/pay/Apple";if(Games.ChannelManager.getInstance().serverItem&&Games.ChannelManager.getInstance().serverItem.marketVerifyUrl){this.callback_uri=Games.ChannelManager.getInstance().serverItem.marketVerifyUrl}}ConchMarketJson.prototype.toJson=function(){return JSON.stringify(this)};return ConchMarketJson}());Games.ConchMarketJson=ConchMarketJson})(Games||(Games={}));var Games;(function(Games){var ProtoTookManager=(function(){function ProtoTookManager(){this.list=[];this.count=0;this.serverMilliseconds=0}ProtoTookManager.getInstance=function(){var Class=this;if(Class.__instance==null){Class.__instance=new Class()}return Class.__instance};ProtoTookManager.prototype.addTook=function(took){this.list.push(took)};ProtoTookManager.prototype.initTookList=function(){for(var itemKey in Proto.Tooks){var cls=Proto.Tooks[itemKey];var obj=new cls();obj.init();this.addTook(obj)}};ProtoTookManager.prototype.start=function(){this.initTookList();this.count=this.list.length;Laya.timer.loop(1000,this,this.onTick)};ProtoTookManager.prototype.stop=function(){Laya.timer.clear(this,this.onTick)};ProtoTookManager.prototype.onTick=function(){this.serverMilliseconds=Game.time.serverMilliseconds;for(var i=0;i<this.count;i++){var took=this.list[i];if(this.validate(took)){took.setParameter();took.__sender()}}};ProtoTookManager.prototype.validate=function(took){if(!Game.proto.isEnableSendProto){return false}var result=true;if(took.selfHeartbeat>0&&took.menuId>0&&Game.menu.isOpened(took.menuId)){result=this.serverMilliseconds-took.lastSendServerTime>=took.selfHeartbeat}else{result=this.serverMilliseconds-took.lastSendServerTime>=took.heartbeat}if(result&&took.menuId>0){result=Games.MenuValidateOpening.getInstance().validate(took.menuId)}if(result&&took.menuId>0){result=Games.MenuValidateUnlock.getInstance().validate(took.menuId)}if(result&&took.preconditionMenuIds&&took.preconditionMenuIds.length>0){result=false;for(var _i=0,_a=took.preconditionMenuIds;_i<_a.length;_i++){var itemId=_a[_i];if(Game.menu.isOpened(itemId)){result=true;break}}}if(result){result=took.validate()}return result};return ProtoTookManager}());Games.ProtoTookManager=ProtoTookManager})(Games||(Games={}));var Games;(function(Games){var ProtoTookHandler=(function(){function ProtoTookHandler(){this.selfHeartbeat=0;this.menuId=0;this.lastSendServerTime=0}ProtoTookHandler.prototype.init=function(){};ProtoTookHandler.prototype.validate=function(){if(this.req&&this.req.__isRespond===false&&Game.time.serverMilliseconds-this.lastSendServerTime<10000){return false}return true};ProtoTookHandler.prototype.setParameter=function(){};ProtoTookHandler.prototype.__sender=function(){this.req.__isTook=true;this.req.__isRespond=false;this.lastSendServerTime=Game.time.serverMilliseconds;Game.proto.sendMsgByModulename(this.req,this.moduleName)};return ProtoTookHandler}());Games.ProtoTookHandler=ProtoTookHandler})(Games||(Games={}));var Games;(function(Games){var ProtoOobHandler=(function(){function ProtoOobHandler(){}return ProtoOobHandler}());Games.ProtoOobHandler=ProtoOobHandler})(Games||(Games={}));var Games;(function(Games){var ProtoModuleNames=(function(){function ProtoModuleNames(){}ProtoModuleNames.account="account";ProtoModuleNames.ClientGM="ClientGM";ProtoModuleNames.GameData="GameData";ProtoModuleNames.CinemaBuild="CinemaBuild";ProtoModuleNames.test="test";ProtoModuleNames.item="item";ProtoModuleNames.city="city";ProtoModuleNames.movie="movie";ProtoModuleNames.Actor="Actor";ProtoModuleNames.story="story";ProtoModuleNames.manageOrder="manageOrder";ProtoModuleNames.progressBox="progressBox";ProtoModuleNames.manageProduce="manageProduce";ProtoModuleNames.rank="rank";ProtoModuleNames.task="task";ProtoModuleNames.mall="mall";ProtoModuleNames.Mail="Mail";ProtoModuleNames.Gift="Gift";ProtoModuleNames.manageBusiness="manageBusiness";ProtoModuleNames.manageVisit="manageVisit";ProtoModuleNames.manageMeeting="manageMeeting";ProtoModuleNames.dailySign="dailySign";ProtoModuleNames.secretary="secretary";ProtoModuleNames.sevenAddUp="sevenAddUp";ProtoModuleNames.BeginnerGuide="BeginnerGuide";ProtoModuleNames.Danmu="Danmu";ProtoModuleNames.cooperate="cooperate";ProtoModuleNames.pay="pay";ProtoModuleNames.chat="chat";ProtoModuleNames.smallTarget="smallTarget";return ProtoModuleNames}());Games.ProtoModuleNames=ProtoModuleNames})(Games||(Games={}));var Games;(function(Games){var ProtoManager=(function(){function ProtoManager(){this.isInited=false;this.isEnableSendProto=false;this.isNeedReGetLoginGameData=false;this.lastCommandTime=new Dictionary();this.commandIsRespone=new Dictionary()}ProtoManager.prototype.install=function(ip,port,useHttps){if(ip===void 0){ip="172.16.0.116"}if(port===void 0){port=8360}if(useHttps===void 0){useHttps=false}this.isInited=true;this.isEnableSendProto=true;DataRespondsManager.init();OobManager.init();this.httpChannel=new frame.comm.HttpChannel(ip,port,useHttps)};ProtoManager.prototype.sendMsg=function(requestData,command){if(!this.isInited){Game.system.toastMsg(Games.TEXT.ErorNoInitProto);return}this.httpChannel.http.addReq(command,requestData)};ProtoManager.prototype.sendMsgByModulename=function(requestData,moduleName,responseRequired,limitTime){var clsname=getClassName(requestData).replace("Request","");var command=moduleName+"/"+clsname;var time=Game.time.localTime;if(requestData.__isTook&&HttpComm.SendErrorNums.hasKey(command)&&HttpComm.SendErrorNums.getValue(command)>10){return}if(limitTime){if(this.lastCommandTime.hasKey(command)){if(time-this.lastCommandTime.getValue(command)<500){return}}}if(responseRequired){if(this.commandIsRespone.hasKey(command)&&!this.commandIsRespone.getValue(command)){return}}this.commandIsRespone.add(command,false);this.lastCommandTime.add(command,time);this.sendMsg(requestData,command)};ProtoManager.prototype.__onMsgRespone=function(command){this.commandIsRespone.add(command,true)};return ProtoManager}());Games.ProtoManager=ProtoManager})(Games||(Games={}));var frame;(function(frame){var ProtoHttpTest=(function(){function ProtoHttpTest(){}ProtoHttpTest.prototype.init=function(){DataRespondsManager.init();OobManager.init();this.httpChannel=new frame.comm.HttpChannel("172.16.0.116",8360,false);this.httpChannel.on(frame.event.HttpChannelEvent.LOGIN_COMPLETE,this,this.loginHandle);this.httpChannel.login("test1")};ProtoHttpTest.prototype.loginHandle=function(rsp){this.httpChannel.off(frame.event.HttpChannelEvent.LOGIN_COMPLETE,this,this.loginHandle);if(rsp.OK){console.log("登录成功");this.doBusinessRequest()}else{console.log("登录失败");console.log(rsp.errMsg)}};ProtoHttpTest.prototype.doBusinessRequest=function(){var requestData=new Proto.API.GameData.GetLoginGameDataRequest();requestData.channel="1";this.httpChannel.http.addReq("GameData/GetLoginGameData",requestData)};return ProtoHttpTest}());frame.ProtoHttpTest=ProtoHttpTest})(frame||(frame={}));var OobManager=(function(){function OobManager(){}OobManager.init=function(){};OobManager.oobUpdateHand=function(oob,isTook){for(var i=0;i<oob.length;i++){for(var j=0;j<oob[i].length;j++){var item=oob[i][j];var ops=item.ops;var uuid=item.uuid;var type=item.type;if(type){var a=Games.ProtoOobHandler;var fun=Games.ProtoOobHandler[type+"Handler"];if(fun){if(!isTook){console.info("[HttpProto OnObb] type= "+type+"  ops="+ops+"  uuid="+uuid)}if(isString(item.data)){if(isNullOrEmpty(item.data)){item.data=null}else{item.data=JSON.parse(item.data)}}fun(item.data,ops,uuid)}else{console.warn("[HttpProto OnObb No Handler] \u6CA1\u6709\u8BBE\u7F6E type= "+type+"  ops="+ops+"  uuid="+uuid)}}else{console.error("[HttpProto OnObb OnError] \u6CA1\u6709\u8BBE\u7F6Etype, "+JSON.stringify(item)+",   type= "+type+"  ops="+ops+"  uuid="+uuid)}}}setTimeout(function(){OobManager.oobNoticMsg(oob)},10)};OobManager.oobNoticMsg=function(oob){for(var i=0;i<oob.length;i++){for(var j=0;j<oob[i].length;j++){var item=oob[i][j];var ops=item.ops;var uuid=item.uuid;var type=item.type;if(type){OobManager.oobTypeNumDict[type]=OobManager.oobTypeNumDict[type]!==undefined?OobManager.oobTypeNumDict[type]+1:1;Game.protoOkEvent.dispatch(type,item.data,ops,uuid)}}}for(var key in OobManager.oobTypeNumDict){OobManager.oobTypeKeyList.push(key);Game.protoOobListOkEvent.dispatch(key)}while(OobManager.oobTypeKeyList.length>0){delete OobManager.oobTypeNumDict[OobManager.oobTypeKeyList.pop()]}};OobManager.oobTypeNumDict={};OobManager.oobTypeKeyList=[];return OobManager}());var DataRespondsManager=(function(){function DataRespondsManager(){}DataRespondsManager.init=function(){Frame.MessageCenter.on(frame.event.HttpChannelEvent.DATA_RESPONDS,this.dataResponds,this)};DataRespondsManager.dataResponds=function(rsp){if(rsp.OK){var arr=rsp.reqData.command.split("/");var moduleName=arr[0];var funName=arr[1];var handler=Game.protohandler[moduleName];if(handler){var fun=handler[funName];if(fun){if(!rsp.reqData.data.__isTook){console.info("[HttpProto OnResponds]  command="+rsp.reqData.command+", "+getClassName(rsp.reqData.data))}fun.apply(handler,[rsp.data])}else{if(!rsp.reqData.data.__isTook){console.warn("[HttpProto OnResponds No Handler] command="+rsp.reqData.command+", "+getClassName(rsp.reqData.data))}}}else{console.warn("[HttpProto OnResponds No Handler] command="+rsp.reqData.command+", "+getClassName(rsp.reqData.data))}var eventName_1=moduleName+"_"+funName;setTimeout(function(){Game.protoOkEvent.dispatch(eventName_1,rsp.data)},10)}else{console.debug("[HttpProto OnResponds OnError] command="+rsp.reqData.command+", "+getClassName(rsp.reqData.data)+",  errNo="+rsp.errNo+", errMsg="+rsp.errMsg)}};return DataRespondsManager}());var Frame=(function(){function Frame(){}Object.defineProperty(Frame,"MessageCenter",{get:function(){return frame.system.MessageCenter.getInstance()},enumerable:true,configurable:true});Object.defineProperty(Frame,"CallbackMappingCenter",{get:function(){return frame.system.CallbackMappingCenter.getInstance()},enumerable:true,configurable:true});Object.defineProperty(Frame,"Tool",{get:function(){return frame.system.ToolMod.getInstance()},enumerable:true,configurable:true});return Frame}());var frame;(function(frame){var event;(function(event){var HttpChannelEvent=(function(){function HttpChannelEvent(){}HttpChannelEvent.LOGIN_COMPLETE="HttpChannelEvent_login_complete";HttpChannelEvent.DATA_RESPONDS="HttpChannelEvent_data_reponds";HttpChannelEvent.OOB_UPDATE="HttpChannelEvent_oob_update";return HttpChannelEvent}());event.HttpChannelEvent=HttpChannelEvent})(event=frame.event||(frame.event={}))})(frame||(frame={}));var frame;(function(frame){var comm;(function(comm){var HttpRespondsData=(function(){function HttpRespondsData(){this.data=null;this.OK=false;this.reqData=null;this.errNo=0;this.errMsg=""}HttpRespondsData.prototype.destroy=function(){this.data=null;this.reqData=null;this.errMsg=""};return HttpRespondsData}());comm.HttpRespondsData=HttpRespondsData})(comm=frame.comm||(frame.comm={}))})(frame||(frame={}));var frame;(function(frame){var comm;(function(comm){var HttpRequestData=(function(){function HttpRequestData(command,data,callback,callbackThis){this.command=command;this.data=data;this.callback=callback;this.callbackThis=callbackThis;HttpRequestData.maxReqIdx++;this.reqIdx=HttpRequestData.maxReqIdx}Object.defineProperty(HttpRequestData.prototype,"protoClassType",{get:function(){if(this.data){return this.data.constructor}return null},enumerable:true,configurable:true});HttpRequestData.prototype.destroy=function(){this.command=null;this.data=null;this.callback=null;this.callbackThis=null};HttpRequestData.maxReqIdx=0;return HttpRequestData}());comm.HttpRequestData=HttpRequestData})(comm=frame.comm||(frame.comm={}))})(frame||(frame={}));var frame;(function(frame){var comm;(function(comm){var HttpConfig=(function(){function HttpConfig(host,port,useHttps){if(useHttps===void 0){useHttps=false}this._host="";this._port=80;this._useHttps=false;this._host=host;this._port=port;this._useHttps=useHttps}HttpConfig.prototype.destroy=function(){this._host=null};Object.defineProperty(HttpConfig.prototype,"hostHead",{get:function(){var host=this._host+":"+this._port;if(this._useHttps){host="https://"+host}else{host="http://"+host}return host},enumerable:true,configurable:true});HttpConfig.prototype.getFullRequestUrl=function(command){command=command.replace("//","/");if(command.charAt(0)!="/"){command="/"+command}var url=this.hostHead+command;return url};HttpConfig.prototype.getFullRequestData=function(jwt,data){var fullData={jwt:jwt,data:data};return fullData};return HttpConfig}());comm.HttpConfig=HttpConfig})(comm=frame.comm||(frame.comm={}))})(frame||(frame={}));var frame;(function(frame){var comm;(function(comm){var Event=laya.events.Event;var HttpRequest=laya.net.HttpRequest;var ReqData=frame.comm.HttpRequestData;var HttpComm=(function(){function HttpComm(host,port,useHttps,timeout){if(timeout===void 0){timeout=10000}this._timeout=10000;this._jwt="";this.isInitGameData=false;this._timeout=timeout;this._httpConfig=new comm.HttpConfig(host,port,useHttps);this._reqDataList=[];this._httpRequest=new HttpRequest();this._httpRequest.http.timeout=timeout;this._httpRequest.reqdata=null;this._httpRequest.on(Event.COMPLETE,this,this.completeHandler);this._httpRequest.on(Event.ERROR,this,this.errorHandler);HttpComm.SetHeader("accept-language",LangManager.Instance.httpLang)}HttpComm.SetHeader=function(key,value){var index=HttpComm.HEADERS.indexOf(key);if(index!=-1){HttpComm.HEADERS[index+1]=value}else{HttpComm.HEADERS.push(key,value)}log(HttpComm.HEADERS)};HttpComm.prototype.destroy=function(){this._httpRequest.off(Event.COMPLETE,this,this.completeHandler);this._httpRequest.off(Event.ERROR,this,this.errorHandler);delete this._httpRequest.reqdata;this._httpRequest=null;this._reqDataList=null;this._httpConfig.destroy();this._httpConfig=null};HttpComm.prototype.recreateHttpRequest=function(){if(!this._httpRequest){return}var preHttpRequest=this._httpRequest;Game.proto.isNeedReGetLoginGameData=false;var reqdata=this._httpRequest.reqdata;if(reqdata&&reqdata.data&&!reqdata.data.__isTook){Game.proto.isNeedReGetLoginGameData=true}this._httpRequest=new HttpRequest();this._httpRequest.http.timeout=this._timeout;this._httpRequest.reqdata=null;this._httpRequest.on(Event.COMPLETE,this,this.completeHandler);this._httpRequest.on(Event.ERROR,this,this.errorHandler);if(BrowserDetect.isApp){if(preHttpRequest.http&&preHttpRequest.http.xhr&&preHttpRequest.http.xhr["abort"]){preHttpRequest.http.xhr.abort()}}else{if(preHttpRequest.http&&preHttpRequest.http.abort){preHttpRequest.http.abort()}}preHttpRequest.off(Event.COMPLETE,this,this.completeHandler);preHttpRequest.off(Event.ERROR,this,this.errorHandler);preHttpRequest.offAll()};HttpComm.prototype.addReq=function(command,data,callback,callbackThis,highPriority){if(data===void 0){data=null}if(callback===void 0){callback=null}if(callbackThis===void 0){callbackThis=null}if(highPriority===void 0){highPriority=false}var reqData=new ReqData(command,data,callback,callbackThis);if(highPriority){this._reqDataList.unshift(reqData)}else{this._reqDataList.push(reqData)}if(this._httpRequest.reqdata==null){this.pickAndSendReq()}return reqData.reqIdx};HttpComm.prototype.pickAndSendReq=function(){if(this._reqDataList.length>0){var reqData=this._reqDataList.shift();this._httpRequest.reqdata=reqData;var fullData=this._httpConfig.getFullRequestData(this._jwt,reqData.data);var data=JSON.stringify(fullData);var url=this._httpConfig.getFullRequestUrl(reqData.command);this._httpRequest.send(url,data,"post","json",HttpComm.HEADERS);if(HttpComm.LogRequest&&!reqData.data.__isTook){console.log("--HttpProto Send："+url)}if(!reqData.data.__isTook){var showTime=reqData.data.__showTime!==undefined&&reqData.data.__showTime!==null?reqData.data.__showTime:5000;var delayTime=reqData.data.__delayTime!==undefined&&reqData.data.__delayTime!==null?reqData.data.__delayTime:2000;GlobalModalWaiting.show(showTime,delayTime)}}};HttpComm.prototype.completeHandler=function(msg){GlobalModalWaiting.hide();var reqData=this._httpRequest.reqdata;var respondsData=new frame.comm.HttpRespondsData();if(reqData&&reqData.data){reqData.data.__isRespond=true;if(msg.errno==0&&reqData.data.__isReGetLoginGameData){Game.event.dispatch(GameEventKey.GameFrame_ReLoginData_Begin);Game.onReLoginDataBeginHandler()}}if(msg&&msg.data){if(msg.data.oob){OobManager.oobUpdateHand(msg.data.oob,reqData.data.__isTook)}if(msg.errno==0){respondsData.OK=true;respondsData.reqData=reqData;if(msg.data.data){respondsData.data=msg.data.data}else{respondsData.data=msg.data}if(reqData.callback!=null){reqData.callback.call(reqData.callbackThis,respondsData)}Frame.MessageCenter.event(frame.event.HttpChannelEvent.DATA_RESPONDS,respondsData)}}if(msg.errno!=0){var errorTxt="[HttpProtoError] errno="+msg.errno+", errmsg="+msg.errmsg+" ";var errorConfig=Game.config.msgProtoError.getConfig(msg.errno);if(errorConfig){errorTxt=errorConfig.notice;console.warn("[HttpProtoError] errno="+msg.errno+", errmsg="+msg.errmsg+"  "+JSON.stringify(msg)+" "+errorTxt)}else{console.warn("[HttpProtoError] errno="+msg.errno+", errmsg="+msg.errmsg+"  "+JSON.stringify(msg)+" ")}if(this.isInitGameData){errorTxt=Games.TEXT.ErrorNameUsed}Game.system.toastText(errorTxt);respondsData.OK=false;respondsData.errNo=msg.errno;respondsData.errMsg=msg.errmsg;if(reqData.callback){reqData.callback.call(reqData.callbackThis,respondsData)}var arr=reqData.command.split("/");var moduleName=arr[0];var funName=arr[1];var eventName_1=moduleName+"_"+funName;setTimeout(function(){Game.protoFailEvent.dispatch(eventName_1)},10)}Game.proto.__onMsgRespone(reqData.command);this.removeReqData(reqData);reqData.destroy();this._httpRequest.reqdata=null;this.pickAndSendReq();if(this.isInitGameData){this.isInitGameData=false}};HttpComm.prototype.errorHandler=function(data){GlobalModalWaiting.hide();console.warn("[HttpProtoError] errno=-100, errmsg=Http Request Fail "+data);var reqData=this._httpRequest.reqdata;var isToastText=true;if(reqData&&reqData.data){reqData.data.__isRespond=true;if(reqData.data.__isTook){isToastText=false}}if(isToastText){Game.system.toastText(Games.TEXT.ErrorHttpSendFail)}var num=HttpComm.SendErrorNums.hasKey(reqData.command)?HttpComm.SendErrorNums.getValue(reqData.command)+1:1;HttpComm.SendErrorNums.add(reqData.command,num);if(reqData.callback!=null){reqData.callback.call(reqData.callbackThis,{errno:-100,errmsg:"Http请求失败"})}Game.proto.__onMsgRespone(reqData.command);var arr=reqData.command.split("/");var moduleName=arr[0];var funName=arr[1];var eventName=moduleName+"_"+funName;setTimeout(function(){Game.protoFailEvent.dispatch(eventName)},10);this.removeReqData(reqData);reqData.destroy();this._httpRequest.reqdata=null;this.pickAndSendReq()};HttpComm.prototype.removeReqData=function(reqData){var idx=this._reqDataList.indexOf(reqData);if(idx>=0){reqData.destroy();this._reqDataList.splice(idx,1)}};HttpComm.prototype.removeReqByID=function(reqIdx){if(reqIdx===void 0){reqIdx=0}var reqData;for(var i=this._reqDataList.length-1;i>=0;i--){reqData=this._reqDataList[i];if(reqData.reqIdx==reqIdx){this._reqDataList.splice(i,1)}}};HttpComm.prototype.removeReqByCallback=function(callback){var reqData;for(var i=this._reqDataList.length-1;i>=0;i--){reqData=this._reqDataList[i];if(reqData.callback==callback){this._reqDataList.splice(i,1)}}};Object.defineProperty(HttpComm.prototype,"jwt",{get:function(){return this._jwt},enumerable:true,configurable:true});HttpComm.prototype.setJwt=function(value){this._jwt=value};HttpComm.LogRequest=true;HttpComm.LogRespond=true;HttpComm.HEADERS=["content-type","application/json","accept-language","zh-CN"];HttpComm.SendErrorNums=new Dictionary();return HttpComm}());comm.HttpComm=HttpComm})(comm=frame.comm||(frame.comm={}))})(frame||(frame={}));var ProtoEventKey=(function(){function ProtoEventKey(){}ProtoEventKey.account_auth="account_auth";ProtoEventKey.account_login="account_login";ProtoEventKey.account_refreshToken="account_refreshToken";ProtoEventKey.ClientGM_gmTest="ClientGM_gmTest";ProtoEventKey.ClientGM_gmUpdateOscar="ClientGM_gmUpdateOscar";ProtoEventKey.ClientGM_gmPrintMem="ClientGM_gmPrintMem";ProtoEventKey.ClientGM_gmTestLocalStorageSave="ClientGM_gmTestLocalStorageSave";ProtoEventKey.ClientGM_gmTestLocalStorageRead="ClientGM_gmTestLocalStorageRead";ProtoEventKey.ClientGM_gmTestTimerLoop="ClientGM_gmTestTimerLoop";ProtoEventKey.ClientGM_gmTestRelogin="ClientGM_gmTestRelogin";ProtoEventKey.ClientGM_gmTestRelogin2="ClientGM_gmTestRelogin2";ProtoEventKey.ClientGM_gmTestPrintTotalActiveTweens="ClientGM_gmTestPrintTotalActiveTweens";ProtoEventKey.ClientGM_gmTestKillAlphaTransition="ClientGM_gmTestKillAlphaTransition";ProtoEventKey.ClientGM_gmPause="ClientGM_gmPause";ProtoEventKey.ClientGM_gmPauseRebder="ClientGM_gmPauseRebder";ProtoEventKey.ClientGM_gmCacheAs="ClientGM_gmCacheAs";ProtoEventKey.ClientGM_gmStopAllTransform="ClientGM_gmStopAllTransform";ProtoEventKey.ClientGM_gmEnablePrinLoop="ClientGM_gmEnablePrinLoop";ProtoEventKey.GameData_Auth="GameData_Auth";ProtoEventKey.GameData_VisitorAuth="GameData_VisitorAuth";ProtoEventKey.GameData_InitGameData="GameData_InitGameData";ProtoEventKey.GameData_GetLoginGameData="GameData_GetLoginGameData";ProtoEventKey.GameData_GetInitGameData="GameData_GetInitGameData";ProtoEventKey.GameData_RenameGameData="GameData_RenameGameData";ProtoEventKey.GameData_RePerSignatureGameData="GameData_RePerSignatureGameData";ProtoEventKey.GameData_RePortraitGameData="GameData_RePortraitGameData";ProtoEventKey.GameData_GetGameInfoExt="GameData_GetGameInfoExt";ProtoEventKey.GameData_GetInitActor="GameData_GetInitActor";ProtoEventKey.GameData_GetNoticeList="GameData_GetNoticeList";ProtoEventKey.CinemaBuild_ExtendFloor="CinemaBuild_ExtendFloor";ProtoEventKey.CinemaBuild_BuildRoom="CinemaBuild_BuildRoom";ProtoEventKey.CinemaBuild_UpgradeRoom="CinemaBuild_UpgradeRoom";ProtoEventKey.CinemaBuild_goldExchange="CinemaBuild_goldExchange";ProtoEventKey.test_AddItem="test_AddItem";ProtoEventKey.test_AddFans="test_AddFans";ProtoEventKey.test_AddExpect="test_AddExpect";ProtoEventKey.test_DeleteMovie="test_DeleteMovie";ProtoEventKey.test_AddStarStory="test_AddStarStory";ProtoEventKey.test_AddStory="test_AddStory";ProtoEventKey.test_AddActorSkillExp="test_AddActorSkillExp";ProtoEventKey.test_AddStoryProgress="test_AddStoryProgress";ProtoEventKey.test_FinishGuide="test_FinishGuide";ProtoEventKey.test_debug="test_debug";ProtoEventKey.test_AddGift="test_AddGift";ProtoEventKey.test_SetBlockLevel="test_SetBlockLevel";ProtoEventKey.test_RefreshTime="test_RefreshTime";ProtoEventKey.test_PutOrderItems="test_PutOrderItems";ProtoEventKey.test_GetAutoCooperate="test_GetAutoCooperate";ProtoEventKey.test_UpdateOscar="test_UpdateOscar";ProtoEventKey.test_setAllStoryGold="test_setAllStoryGold";ProtoEventKey.test_LockAllProduce="test_LockAllProduce";ProtoEventKey.test_SetSecretaryStatus="test_SetSecretaryStatus";ProtoEventKey.test_CleanSecretaryTimes="test_CleanSecretaryTimes";ProtoEventKey.test_GetRechargeGift="test_GetRechargeGift";ProtoEventKey.test_GotoCity="test_GotoCity";ProtoEventKey.test_GotoCityBefore="test_GotoCityBefore";ProtoEventKey.test_AddManage="test_AddManage";ProtoEventKey.test_SetAllActorLv="test_SetAllActorLv";ProtoEventKey.item_SellOut="item_SellOut";ProtoEventKey.item_Compound="item_Compound";ProtoEventKey.item_Split="item_Split";ProtoEventKey.item_Use="item_Use";ProtoEventKey.item_UsePiecesGiftBag="item_UsePiecesGiftBag";ProtoEventKey.item_CompoundActor="item_CompoundActor";ProtoEventKey.item_UseActorSkillWater="item_UseActorSkillWater";ProtoEventKey.city_SetPropagandaActor="city_SetPropagandaActor";ProtoEventKey.city_Propaganda="city_Propaganda";ProtoEventKey.city_Roadshow="city_Roadshow";ProtoEventKey.city_SetAmbassador="city_SetAmbassador";ProtoEventKey.city_GetReward="city_GetReward";ProtoEventKey.city_HoldCity="city_HoldCity";ProtoEventKey.movie_MakeFilm="movie_MakeFilm";ProtoEventKey.movie_SetMovieName="movie_SetMovieName";ProtoEventKey.movie_SetActor="movie_SetActor";ProtoEventKey.movie_ConfirmSetActor="movie_ConfirmSetActor";ProtoEventKey.movie_ChoseType="movie_ChoseType";ProtoEventKey.movie_AcceptMediaVisit="movie_AcceptMediaVisit";ProtoEventKey.movie_PublishMovie="movie_PublishMovie";ProtoEventKey.movie_BattleOver="movie_BattleOver";ProtoEventKey.movie_SpreadMovie="movie_SpreadMovie";ProtoEventKey.movie_GetRewardMovie="movie_GetRewardMovie";ProtoEventKey.movie_SwitchCity="movie_SwitchCity";ProtoEventKey.movie_UpdateMovieState="movie_UpdateMovieState";ProtoEventKey.movie_GetStoryGoals="movie_GetStoryGoals";ProtoEventKey.movie_DeleteMovie="movie_DeleteMovie";ProtoEventKey.movie_RefreshMovieStory="movie_RefreshMovieStory";ProtoEventKey.Actor_NoseInfoActor="Actor_NoseInfoActor";ProtoEventKey.Actor_RecruitActor="Actor_RecruitActor";ProtoEventKey.Actor_HideActor="Actor_HideActor";ProtoEventKey.Actor_AddActorSlot="Actor_AddActorSlot";ProtoEventKey.Actor_UpgradeActor="Actor_UpgradeActor";ProtoEventKey.Actor_GiveActorAssets="Actor_GiveActorAssets";ProtoEventKey.Actor_UpgradeActorSkill="Actor_UpgradeActorSkill";ProtoEventKey.Actor_ActorTrain="Actor_ActorTrain";ProtoEventKey.Actor_ActorChangeName="Actor_ActorChangeName";ProtoEventKey.Actor_ActorExerciseStart="Actor_ActorExerciseStart";ProtoEventKey.Actor_ActorExerciseReward="Actor_ActorExerciseReward";ProtoEventKey.Actor_ActorExerciseAdd="Actor_ActorExerciseAdd";ProtoEventKey.Actor_GiveLoyaltyCard="Actor_GiveLoyaltyCard";ProtoEventKey.Actor_AssistantUpLv="Actor_AssistantUpLv";ProtoEventKey.story_findStory="story_findStory";ProtoEventKey.story_cleanFindStory="story_cleanFindStory";ProtoEventKey.story_getReward="story_getReward";ProtoEventKey.story_GetMessage="story_GetMessage";ProtoEventKey.story_SetMessage="story_SetMessage";ProtoEventKey.manageOrder_PutItem="manageOrder_PutItem";ProtoEventKey.manageOrder_DelOrder="manageOrder_DelOrder";ProtoEventKey.manageOrder_FinishOrder="manageOrder_FinishOrder";ProtoEventKey.manageOrder_DealOrder="manageOrder_DealOrder";ProtoEventKey.progressBox_GetReward="progressBox_GetReward";ProtoEventKey.manageProduce_Produce="manageProduce_Produce";ProtoEventKey.manageProduce_GetReward="manageProduce_GetReward";ProtoEventKey.manageProduce_Uplevel="manageProduce_Uplevel";ProtoEventKey.manageProduce_SendActor="manageProduce_SendActor";ProtoEventKey.manageProduce_Deblocking="manageProduce_Deblocking";ProtoEventKey.manageProduce_QuickGetReward="manageProduce_QuickGetReward";ProtoEventKey.manageProduce_QuickProduce="manageProduce_QuickProduce";ProtoEventKey.manageProduce_cleanTime="manageProduce_cleanTime";ProtoEventKey.rank_GetSelfList="rank_GetSelfList";ProtoEventKey.rank_GetServerRankList="rank_GetServerRankList";ProtoEventKey.rank_GetGroupRankList="rank_GetGroupRankList";ProtoEventKey.rank_GetGroupMovieRankList="rank_GetGroupMovieRankList";ProtoEventKey.rank_GetMovieShortData="rank_GetMovieShortData";ProtoEventKey.rank_GetPlayerShortData="rank_GetPlayerShortData";ProtoEventKey.rank_GetServerListReward="rank_GetServerListReward";ProtoEventKey.rank_ChangeServerName="rank_ChangeServerName";ProtoEventKey.rank_GetOscarData="rank_GetOscarData";ProtoEventKey.rank_GetOscarReward="rank_GetOscarReward";ProtoEventKey.rank_ChoseTheater="rank_ChoseTheater";ProtoEventKey.rank_GetStreetReward="rank_GetStreetReward";ProtoEventKey.task_reward="task_reward";ProtoEventKey.mall_buy="mall_buy";ProtoEventKey.Mail_MailGetReward="Mail_MailGetReward";ProtoEventKey.Mail_MailGetRewardMany="Mail_MailGetRewardMany";ProtoEventKey.Mail_MailDeleteMany="Mail_MailDeleteMany";ProtoEventKey.Mail_MailDelete="Mail_MailDelete";ProtoEventKey.Mail_MailRead="Mail_MailRead";ProtoEventKey.Gift_Exchange="Gift_Exchange";ProtoEventKey.manageBusiness_GetReward="manageBusiness_GetReward";ProtoEventKey.manageVisit_StartVisit="manageVisit_StartVisit";ProtoEventKey.manageVisit_GetReward="manageVisit_GetReward";ProtoEventKey.manageVisit_StartRece="manageVisit_StartRece";ProtoEventKey.manageMeeting_GetReward="manageMeeting_GetReward";ProtoEventKey.manageMeeting_Markup="manageMeeting_Markup";ProtoEventKey.dailySign_sign="dailySign_sign";ProtoEventKey.secretary_GetDailyReward="secretary_GetDailyReward";ProtoEventKey.secretary_OpenSecretary="secretary_OpenSecretary";ProtoEventKey.secretary_ApplyMovieLicence="secretary_ApplyMovieLicence";ProtoEventKey.secretary_RewardMovieLicence="secretary_RewardMovieLicence";ProtoEventKey.sevenAddUp_GetReward="sevenAddUp_GetReward";ProtoEventKey.sevenAddUp_Touch="sevenAddUp_Touch";ProtoEventKey.BeginnerGuide_CompleteGuide="BeginnerGuide_CompleteGuide";ProtoEventKey.BeginnerGuide_GuideEndReward="BeginnerGuide_GuideEndReward";ProtoEventKey.Danmu_set="Danmu_set";ProtoEventKey.Danmu_get="Danmu_get";ProtoEventKey.cooperate_Apply="cooperate_Apply";ProtoEventKey.cooperate_CancelCooperate="cooperate_CancelCooperate";ProtoEventKey.cooperate_Relieve="cooperate_Relieve";ProtoEventKey.cooperate_Approve="cooperate_Approve";ProtoEventKey.cooperate_GetInfo="cooperate_GetInfo";ProtoEventKey.cooperate_TaskOperate="cooperate_TaskOperate";ProtoEventKey.cooperate_GetTaskReward="cooperate_GetTaskReward";ProtoEventKey.cooperate_GiveReward="cooperate_GiveReward";ProtoEventKey.cooperate_GetProgressTask="cooperate_GetProgressTask";ProtoEventKey.cooperate_ReadCooperate="cooperate_ReadCooperate";ProtoEventKey.cooperate_GetTaskInfo="cooperate_GetTaskInfo";ProtoEventKey.cooperate_GetOrderInfo="cooperate_GetOrderInfo";ProtoEventKey.pay_StartOrder="pay_StartOrder";ProtoEventKey.pay_FinishOrder="pay_FinishOrder";ProtoEventKey.chat_MessageNotice="chat_MessageNotice";ProtoEventKey.chat_NewMessage="chat_NewMessage";ProtoEventKey.chat_AllMessage="chat_AllMessage";ProtoEventKey.chat_SendMessage="chat_SendMessage";ProtoEventKey.chat_PullMessage="chat_PullMessage";ProtoEventKey.chat_Sheielding="chat_Sheielding";ProtoEventKey.chat_ReleaseShield="chat_ReleaseShield";ProtoEventKey.chat_recruit="chat_recruit";ProtoEventKey.smallTarget_LevGift="smallTarget_LevGift";ProtoEventKey.smallTarget_CupGift="smallTarget_CupGift";ProtoEventKey.smallTarget_GetCupMail="smallTarget_GetCupMail";ProtoEventKey.DBBase="DBBase";ProtoEventKey.DBObject="DBObject";ProtoEventKey.ShardDBObject="ShardDBObject";ProtoEventKey.UsrData="UsrData";ProtoEventKey.RoomInfo="RoomInfo";ProtoEventKey.GameInfo="GameInfo";ProtoEventKey.GameInfoExt="GameInfoExt";ProtoEventKey.ItemDesc="ItemDesc";ProtoEventKey.GMMsgLog="GMMsgLog";ProtoEventKey.OrderData="OrderData";ProtoEventKey.Notice="Notice";ProtoEventKey.MailDesc="MailDesc";ProtoEventKey.ItemData="ItemData";ProtoEventKey.StorySuitData="StorySuitData";ProtoEventKey.StoryData="StoryData";ProtoEventKey.StoryProgress="StoryProgress";ProtoEventKey.Assets="Assets";ProtoEventKey.shootInfo="shootInfo";ProtoEventKey.skillTriggerCondition="skillTriggerCondition";ProtoEventKey.skillInfo="skillInfo";ProtoEventKey.ActorData="ActorData";ProtoEventKey.AssistantInfo="AssistantInfo";ProtoEventKey.CityData="CityData";ProtoEventKey.skillEffectInfo="skillEffectInfo";ProtoEventKey.ActorSkillEffect="ActorSkillEffect";ProtoEventKey.TempData="TempData";ProtoEventKey.MovieData="MovieData";ProtoEventKey.BattleData="BattleData";ProtoEventKey.CityGainsInfo="CityGainsInfo";ProtoEventKey.MediaVisitDesc="MediaVisitDesc";ProtoEventKey.ManageOrderData="ManageOrderData";ProtoEventKey.OrderItems="OrderItems";ProtoEventKey.ProgressBoxData="ProgressBoxData";ProtoEventKey.ManageProduceData="ManageProduceData";ProtoEventKey.SkillLevel="SkillLevel";ProtoEventKey.AttrChangeInfo="AttrChangeInfo";ProtoEventKey.MovieLicenceResetTimeData="MovieLicenceResetTimeData";ProtoEventKey.ManageBusinessData="ManageBusinessData";ProtoEventKey.ManageVisitData="ManageVisitData";ProtoEventKey.StoryMessageDesc="StoryMessageDesc";ProtoEventKey.StoryMessage="StoryMessage";ProtoEventKey.ActorShortDesc="ActorShortDesc";ProtoEventKey.MovieShortData="MovieShortData";ProtoEventKey.BestMovieDesc="BestMovieDesc";ProtoEventKey.PlayerShortData="PlayerShortData";ProtoEventKey.ServerListDesc="ServerListDesc";ProtoEventKey.GroupListDesc="GroupListDesc";ProtoEventKey.GroupMovieListDesc="GroupMovieListDesc";ProtoEventKey.SelfRankListDesc="SelfRankListDesc";ProtoEventKey.RankListData="RankListData";ProtoEventKey.TaskData="TaskData";ProtoEventKey.MallItemLimitData="MallItemLimitData";ProtoEventKey.MailData="MailData";ProtoEventKey.ManageMeetingData="ManageMeetingData";ProtoEventKey.DanmuItem="DanmuItem";ProtoEventKey.DanmuData="DanmuData";ProtoEventKey.DailySign="DailySign";ProtoEventKey.SecretaryData="SecretaryData";ProtoEventKey.SecretaryKeyValue="SecretaryKeyValue";ProtoEventKey.SevenAddUpData="SevenAddUpData";ProtoEventKey.ActortExerciseData="ActortExerciseData";ProtoEventKey.OscarDesc="OscarDesc";ProtoEventKey.OscarData="OscarData";ProtoEventKey.PlayerOscarData="PlayerOscarData";ProtoEventKey.DailyEventItem="DailyEventItem";ProtoEventKey.DailyEvent="DailyEvent";ProtoEventKey.GuideData="GuideData";ProtoEventKey.PlayerCooperateData="PlayerCooperateData";ProtoEventKey.AccountCooperateData="AccountCooperateData";ProtoEventKey.ApplyInfo="ApplyInfo";ProtoEventKey.AutoCooperateData="AutoCooperateData";ProtoEventKey.CooperateTaskData="CooperateTaskData";ProtoEventKey.Ctask="Ctask";ProtoEventKey.StarTask="StarTask";ProtoEventKey.CooperateOrderData="CooperateOrderData";ProtoEventKey.PlayerLevelUp="PlayerLevelUp";ProtoEventKey.GoldExchange="GoldExchange";ProtoEventKey.NewMessageInfo="NewMessageInfo";ProtoEventKey.MessageInfo="MessageInfo";ProtoEventKey.SystemMessage="SystemMessage";ProtoEventKey.FieldInfo="FieldInfo";ProtoEventKey.PrivateListInfo="PrivateListInfo";ProtoEventKey.PushMessageInfo="PushMessageInfo";ProtoEventKey.RoomMember="RoomMember";ProtoEventKey.LevelGiftData="LevelGiftData";ProtoEventKey.GetGuideReward="GetGuideReward";ProtoEventKey.CupPackage="CupPackage";ProtoEventKey.StoryRefreshData="StoryRefreshData";return ProtoEventKey}());var Proto;(function(Proto){var SE;(function(SE){var EError;(function(EError){EError[EError.NoError=0]="NoError";EError[EError.ServerError=1]="ServerError";EError[EError.DataError=2]="DataError";EError[EError.UnknownError=3]="UnknownError";EError[EError.DataBusy=4]="DataBusy";EError[EError.NoUsrId=5]="NoUsrId";EError[EError.Frozen=6]="Frozen";EError[EError.Dropped=7]="Dropped"})(EError=SE.EError||(SE.EError={}));var EMoneyType;(function(EMoneyType){EMoneyType[EMoneyType.Money=1]="Money";EMoneyType[EMoneyType.Diamond=2]="Diamond";EMoneyType[EMoneyType.Gold=3]="Gold";EMoneyType[EMoneyType.Coin=4]="Coin"})(EMoneyType=SE.EMoneyType||(SE.EMoneyType={}));var EGoodsFlag;(function(EGoodsFlag){EGoodsFlag[EGoodsFlag.None=0]="None";EGoodsFlag[EGoodsFlag.New=1]="New";EGoodsFlag[EGoodsFlag.Hot=2]="Hot";EGoodsFlag[EGoodsFlag.Discount=3]="Discount";EGoodsFlag[EGoodsFlag.SoldOut=4]="SoldOut"})(EGoodsFlag=SE.EGoodsFlag||(SE.EGoodsFlag={}));var EAcceptCondition;(function(EAcceptCondition){EAcceptCondition[EAcceptCondition.acceptcondition_front_id=1]="acceptcondition_front_id";EAcceptCondition[EAcceptCondition.acceptcondition_level=2]="acceptcondition_level"})(EAcceptCondition=SE.EAcceptCondition||(SE.EAcceptCondition={}));var ECompleteCondition;(function(ECompleteCondition){ECompleteCondition[ECompleteCondition.completecondition_score=1]="completecondition_score";ECompleteCondition[ECompleteCondition.completecondition_kill=2]="completecondition_kill"})(ECompleteCondition=SE.ECompleteCondition||(SE.ECompleteCondition={}));var ECompleteReward;(function(ECompleteReward){ECompleteReward[ECompleteReward.completereward_exp=1]="completereward_exp";ECompleteReward[ECompleteReward.completereward_item=2]="completereward_item";ECompleteReward[ECompleteReward.completereward_gold=3]="completereward_gold"})(ECompleteReward=SE.ECompleteReward||(SE.ECompleteReward={}));var EUsrState;(function(EUsrState){EUsrState[EUsrState.uninit=1]="uninit";EUsrState[EUsrState.init_actor=2]="init_actor";EUsrState[EUsrState.usual=3]="usual";EUsrState[EUsrState.frozen=4]="frozen";EUsrState[EUsrState.dropped=5]="dropped"})(EUsrState=SE.EUsrState||(SE.EUsrState={}));var EItemNumber;(function(EItemNumber){EItemNumber[EItemNumber.diamond=1]="diamond";EItemNumber[EItemNumber.gold=2]="gold"})(EItemNumber=SE.EItemNumber||(SE.EItemNumber={}));var EPublishTypeCode;(function(EPublishTypeCode){EPublishTypeCode[EPublishTypeCode.sdknotice=1]="sdknotice";EPublishTypeCode[EPublishTypeCode.usrmail=2]="usrmail";EPublishTypeCode[EPublishTypeCode.gamemail=9]="gamemail";EPublishTypeCode[EPublishTypeCode.gamenotice=10]="gamenotice"})(EPublishTypeCode=SE.EPublishTypeCode||(SE.EPublishTypeCode={}));var EUserSex;(function(EUserSex){EUserSex[EUserSex.boy=2001]="boy";EUserSex[EUserSex.girl=2002]="girl"})(EUserSex=SE.EUserSex||(SE.EUserSex={}));var EItemCategory;(function(EItemCategory){EItemCategory[EItemCategory.diamond=1]="diamond";EItemCategory[EItemCategory.gold=2]="gold";EItemCategory[EItemCategory.dollar=3]="dollar";EItemCategory[EItemCategory.other=4]="other";EItemCategory[EItemCategory.normal=5]="normal";EItemCategory[EItemCategory.assets=6]="assets";EItemCategory[EItemCategory.contract=7]="contract";EItemCategory[EItemCategory.giftbag=8]="giftbag";EItemCategory[EItemCategory.licence=10]="licence";EItemCategory[EItemCategory.cup=14]="cup";EItemCategory[EItemCategory.piecesgiftbag=17]="piecesgiftbag";EItemCategory[EItemCategory.story=18]="story"})(EItemCategory=SE.EItemCategory||(SE.EItemCategory={}));var EItemId;(function(EItemId){EItemId[EItemId.diamond=1]="diamond";EItemId[EItemId.gold=2]="gold";EItemId[EItemId.dollar=3]="dollar";EItemId[EItemId.licence=4]="licence";EItemId[EItemId.fans=5]="fans";EItemId[EItemId.praise=6]="praise";EItemId[EItemId.drawing=7]="drawing";EItemId[EItemId.expect=8]="expect";EItemId[EItemId.study_card=5004]="study_card";EItemId[EItemId.talent=5007]="talent";EItemId[EItemId.player_rename_card=5008]="player_rename_card";EItemId[EItemId.actor_stamina_water=5010]="actor_stamina_water";EItemId[EItemId.actor_loyalty_card=5003]="actor_loyalty_card";EItemId[EItemId.brochure=5005]="brochure";EItemId[EItemId.horn=5006]="horn"})(EItemId=SE.EItemId||(SE.EItemId={}));var EGameDataRename;(function(EGameDataRename){EGameDataRename[EGameDataRename.renameLengthMin=4]="renameLengthMin";EGameDataRename[EGameDataRename.renameLengthMax=18]="renameLengthMax";EGameDataRename[EGameDataRename.rePerSignatureLengthMax=100]="rePerSignatureLengthMax"})(EGameDataRename=SE.EGameDataRename||(SE.EGameDataRename={}));var EStoryStack;(function(EStoryStack){EStoryStack[EStoryStack.story_stack_daily_times=2045]="story_stack_daily_times";EStoryStack[EStoryStack.story_stack_search_cost=2046]="story_stack_search_cost";EStoryStack[EStoryStack.story_stack_cd_stage_cost=2047]="story_stack_cd_stage_cost";EStoryStack[EStoryStack.story_stack_cd_stage_length=2048]="story_stack_cd_stage_length";EStoryStack[EStoryStack.story_stack_cd=2050]="story_stack_cd";EStoryStack[EStoryStack.story_stack_daily_update=2051]="story_stack_daily_update";EStoryStack[EStoryStack.story_stack_cd_block_level=2052]="story_stack_cd_block_level"})(EStoryStack=SE.EStoryStack||(SE.EStoryStack={}));var EStoryModule;(function(EStoryModule){EStoryModule[EStoryModule.noFinish=0]="noFinish";EStoryModule[EStoryModule.finish=1]="finish";EStoryModule[EStoryModule.hadGet=2]="hadGet";EStoryModule[EStoryModule.randomLength=3]="randomLength";EStoryModule[EStoryModule.shootTime=5]="shootTime";EStoryModule[EStoryModule.score=8]="score"})(EStoryModule=SE.EStoryModule||(SE.EStoryModule={}));var EMovieState;(function(EMovieState){EMovieState[EMovieState.chooseScript=2]="chooseScript";EMovieState[EMovieState.renameFilm=3]="renameFilm";EMovieState[EMovieState.currentMarketInf=4]="currentMarketInf";EMovieState[EMovieState.chooseActor=5]="chooseActor";EMovieState[EMovieState.costView=6]="costView";EMovieState[EMovieState.yRShowView=7]="yRShowView";EMovieState[EMovieState.compatibility=8]="compatibility";EMovieState[EMovieState.filming=9]="filming";EMovieState[EMovieState.chooseType=10]="chooseType";EMovieState[EMovieState.chooseTip=11]="chooseTip";EMovieState[EMovieState.propaganda=12]="propaganda";EMovieState[EMovieState.complete=13]="complete";EMovieState[EMovieState.actorUpdate=14]="actorUpdate";EMovieState[EMovieState.proficiency=15]="proficiency";EMovieState[EMovieState.chooseTheater=16]="chooseTheater";EMovieState[EMovieState.noticeFeedBack=17]="noticeFeedBack";EMovieState[EMovieState.SYPF=18]="SYPF";EMovieState[EMovieState.audienceReputation=19]="audienceReputation";EMovieState[EMovieState.result=20]="result";EMovieState[EMovieState.overMarket=21]="overMarket";EMovieState[EMovieState.Jiesuan=22]="Jiesuan";EMovieState[EMovieState.rewardTip=23]="rewardTip";EMovieState[EMovieState.contineTransceiver=24]="contineTransceiver"})(EMovieState=SE.EMovieState||(SE.EMovieState={}));var EGlobalId;(function(EGlobalId){EGlobalId[EGlobalId.maxMovieNum=9]="maxMovieNum";EGlobalId[EGlobalId.tempActor=9999]="tempActor";EGlobalId[EGlobalId.firstActor=9997]="firstActor";EGlobalId[EGlobalId.loyaltyCardLimit=1035]="loyaltyCardLimit"})(EGlobalId=SE.EGlobalId||(SE.EGlobalId={}));var EMovieType;(function(EMovieType){})(EMovieType=SE.EMovieType||(SE.EMovieType={}));var EBoxOfficeEvaluation;(function(EBoxOfficeEvaluation){EBoxOfficeEvaluation[EBoxOfficeEvaluation.normal=1]="normal";EBoxOfficeEvaluation[EBoxOfficeEvaluation.good=2]="good";EBoxOfficeEvaluation[EBoxOfficeEvaluation.big_sell=3]="big_sell";EBoxOfficeEvaluation[EBoxOfficeEvaluation.great_sell=4]="great_sell";EBoxOfficeEvaluation[EBoxOfficeEvaluation.myth_sell=5]="myth_sell";EBoxOfficeEvaluation[EBoxOfficeEvaluation.marvel_sell=6]="marvel_sell"})(EBoxOfficeEvaluation=SE.EBoxOfficeEvaluation||(SE.EBoxOfficeEvaluation={}));var EProgressBoxId;(function(EProgressBoxId){EProgressBoxId[EProgressBoxId.manageOrder=1]="manageOrder";EProgressBoxId[EProgressBoxId.dailyTask=2]="dailyTask";EProgressBoxId[EProgressBoxId.cooperateTask=3]="cooperateTask"})(EProgressBoxId=SE.EProgressBoxId||(SE.EProgressBoxId={}));var EManageProduce;(function(EManageProduce){EManageProduce[EManageProduce.line=1]="line";EManageProduce[EManageProduce.save=2]="save";EManageProduce[EManageProduce.time=3]="time";EManageProduce[EManageProduce.output_initial=4]="output_initial";EManageProduce[EManageProduce.dollarIntervalTime=11]="dollarIntervalTime";EManageProduce[EManageProduce.baseProduceId=100]="baseProduceId";EManageProduce[EManageProduce.intervalTime=300]="intervalTime"})(EManageProduce=SE.EManageProduce||(SE.EManageProduce={}));var ERankListType;(function(ERankListType){ERankListType[ERankListType.SelfList=1]="SelfList";ERankListType[ERankListType.ServerList=2]="ServerList";ERankListType[ERankListType.GroupList=3]="GroupList";ERankListType[ERankListType.GroupMovieList=4]="GroupMovieList"})(ERankListType=SE.ERankListType||(SE.ERankListType={}));var EAchievementState;(function(EAchievementState){EAchievementState[EAchievementState.none=0]="none";EAchievementState[EAchievementState.receivable=1]="receivable";EAchievementState[EAchievementState.received=2]="received";EAchievementState[EAchievementState.finished=3]="finished";EAchievementState[EAchievementState.rewarded=4]="rewarded"})(EAchievementState=SE.EAchievementState||(SE.EAchievementState={}));var EAchievementType;(function(EAchievementType){EAchievementType[EAchievementType.daily=1]="daily";EAchievementType[EAchievementType.achievement=2]="achievement";EAchievementType[EAchievementType.story=3]="story";EAchievementType[EAchievementType.mainTask=4]="mainTask"})(EAchievementType=SE.EAchievementType||(SE.EAchievementType={}));var EMallItemLimitType;(function(EMallItemLimitType){EMallItemLimitType[EMallItemLimitType.daily=1]="daily";EMallItemLimitType[EMallItemLimitType.weekly=2]="weekly"})(EMallItemLimitType=SE.EMallItemLimitType||(SE.EMallItemLimitType={}));var EManageBusiness;(function(EManageBusiness){EManageBusiness[EManageBusiness.baseLine=10]="baseLine";EManageBusiness[EManageBusiness.interval=180]="interval"})(EManageBusiness=SE.EManageBusiness||(SE.EManageBusiness={}));var EManageVisit;(function(EManageVisit){EManageVisit[EManageVisit.baseLine=3]="baseLine";EManageVisit[EManageVisit.overdueTime=180]="overdueTime";EManageVisit[EManageVisit.baseIntervalTime=300]="baseIntervalTime"})(EManageVisit=SE.EManageVisit||(SE.EManageVisit={}));var EManageOrder;(function(EManageOrder){EManageOrder[EManageOrder.baseLength=9]="baseLength";EManageOrder[EManageOrder.baseTime=1200]="baseTime";EManageOrder[EManageOrder.delTime=20]="delTime"})(EManageOrder=SE.EManageOrder||(SE.EManageOrder={}));var EMailId;(function(EMailId){EMailId[EMailId.cooperateApplyFail=3]="cooperateApplyFail";EMailId[EMailId.orderId=4]="orderId";EMailId[EMailId.partnerGive=7]="partnerGive";EMailId[EMailId.firstCooperate=8]="firstCooperate";EMailId[EMailId.firstAccountCooperate=9]="firstAccountCooperate";EMailId[EMailId.delOrderId=10]="delOrderId";EMailId[EMailId.rewardOrder=11]="rewardOrder";EMailId[EMailId.dailyTask=12]="dailyTask";EMailId[EMailId.cupPackage=13]="cupPackage"})(EMailId=SE.EMailId||(SE.EMailId={}));var ESecretaryType;(function(ESecretaryType){ESecretaryType[ESecretaryType.noHave=0]="noHave";ESecretaryType[ESecretaryType.had=1]="had";ESecretaryType[ESecretaryType.temporaryHad=2]="temporaryHad"})(ESecretaryType=SE.ESecretaryType||(SE.ESecretaryType={}));var ESecretary;(function(ESecretary){ESecretary[ESecretary.skillExp=2]="skillExp";ESecretary[ESecretary.trainTime=3]="trainTime";ESecretary[ESecretary.searchTime=4]="searchTime";ESecretary[ESecretary.starSearch=5]="starSearch";ESecretary[ESecretary.cityTimes=6]="cityTimes";ESecretary[ESecretary.workTimes=7]="workTimes";ESecretary[ESecretary.visitTimes=8]="visitTimes";ESecretary[ESecretary.secretaryExpStart=9]="secretaryExpStart";ESecretary[ESecretary.secretaryExpEnd=10]="secretaryExpEnd";ESecretary[ESecretary.applicationDuration=11]="applicationDuration";ESecretary[ESecretary.applicationLicense=12]="applicationLicense";ESecretary[ESecretary.applicationLicenseNum=13]="applicationLicenseNum";ESecretary[ESecretary.freeGiftId=1001]="freeGiftId";ESecretary[ESecretary.moneyGiftId=2001]="moneyGiftId"})(ESecretary=SE.ESecretary||(SE.ESecretary={}));var EManageMeet;(function(EManageMeet){EManageMeet[EManageMeet.baseLine=3]="baseLine";EManageMeet[EManageMeet.baseIntervalTime=1200]="baseIntervalTime"})(EManageMeet=SE.EManageMeet||(SE.EManageMeet={}));var EOscarType;(function(EOscarType){EOscarType[EOscarType.man=1]="man";EOscarType[EOscarType.woman=2]="woman";EOscarType[EOscarType.perform=3]="perform";EOscarType[EOscarType.art=4]="art";EOscarType[EOscarType.publicPraise=5]="publicPraise";EOscarType[EOscarType.bestBoxOffice=6]="bestBoxOffice";EOscarType[EOscarType.totalBoxOffice=7]="totalBoxOffice";EOscarType[EOscarType.movies=8]="movies";EOscarType[EOscarType.bigSell=9]="bigSell"})(EOscarType=SE.EOscarType||(SE.EOscarType={}));var EGMRefreshType;(function(EGMRefreshType){EGMRefreshType[EGMRefreshType.dailySign=0]="dailySign";EGMRefreshType[EGMRefreshType.dailyTask=1]="dailyTask";EGMRefreshType[EGMRefreshType.dailyMall=2]="dailyMall";EGMRefreshType[EGMRefreshType.weeklyMall=3]="weeklyMall";EGMRefreshType[EGMRefreshType.manageProduce=4]="manageProduce";EGMRefreshType[EGMRefreshType.sevenAddup=5]="sevenAddup";EGMRefreshType[EGMRefreshType.findStory=6]="findStory"})(EGMRefreshType=SE.EGMRefreshType||(SE.EGMRefreshType={}));var EItemUseType;(function(EItemUseType){EItemUseType[EItemUseType.noReward=0]="noReward";EItemUseType[EItemUseType.allReward=1]="allReward";EItemUseType[EItemUseType.randomReward=2]="randomReward"})(EItemUseType=SE.EItemUseType||(SE.EItemUseType={}));var EItemType;(function(EItemType){EItemType[EItemType.randomActor=16]="randomActor"})(EItemType=SE.EItemType||(SE.EItemType={}));var EGuideType;(function(EGuideType){EGuideType[EGuideType.guide=1]="guide";EGuideType[EGuideType.story=2]="story"})(EGuideType=SE.EGuideType||(SE.EGuideType={}));var ENoticeType;(function(ENoticeType){ENoticeType[ENoticeType.init=1]="init";ENoticeType[ENoticeType.add=2]="add";ENoticeType[ENoticeType.update=4]="update";ENoticeType[ENoticeType.remove=8]="remove"})(ENoticeType=SE.ENoticeType||(SE.ENoticeType={}));var ECooperate;(function(ECooperate){ECooperate[ECooperate.taskLength=6]="taskLength"})(ECooperate=SE.ECooperate||(SE.ECooperate={}));var EChatChannel;(function(EChatChannel){EChatChannel[EChatChannel["private"]=1]="private";EChatChannel[EChatChannel.world=2]="world";EChatChannel[EChatChannel.company=3]="company"})(EChatChannel=SE.EChatChannel||(SE.EChatChannel={}));var ESystemMessageId;(function(ESystemMessageId){ESystemMessageId[ESystemMessageId.getActor1=1001]="getActor1";ESystemMessageId[ESystemMessageId.getActor2=1002]="getActor2";ESystemMessageId[ESystemMessageId.movie=1003]="movie";ESystemMessageId[ESystemMessageId.updateName=1004]="updateName";ESystemMessageId[ESystemMessageId.createCompany=1005]="createCompany";ESystemMessageId[ESystemMessageId.joinCompany=1006]="joinCompany"})(ESystemMessageId=SE.ESystemMessageId||(SE.ESystemMessageId={}));var ESystemType;(function(ESystemType){ESystemType[ESystemType.userName=1]="userName";ESystemType[ESystemType.oldName=2]="oldName";ESystemType[ESystemType.actorStar=3]="actorStar";ESystemType[ESystemType.actorName=4]="actorName";ESystemType[ESystemType.moiveName=5]="moiveName";ESystemType[ESystemType.blockLevel=6]="blockLevel";ESystemType[ESystemType.boxOfficeEvaluation=7]="boxOfficeEvaluation";ESystemType[ESystemType.groupName=8]="groupName"})(ESystemType=SE.ESystemType||(SE.ESystemType={}));var EGameDataOps;(function(EGameDataOps){EGameDataOps[EGameDataOps.init=1]="init";EGameDataOps[EGameDataOps.add=2]="add";EGameDataOps[EGameDataOps.update=4]="update";EGameDataOps[EGameDataOps.remove=8]="remove"})(EGameDataOps=SE.EGameDataOps||(SE.EGameDataOps={}));var ECommon=(function(){function ECommon(){}ECommon.MaxNameLenth=20;ECommon.DefaultName="Brad Pitt";ECommon.MoveSpeed=1.3;ECommon.CanJump=false;return ECommon}());SE.ECommon=ECommon;var EChannel=(function(){function EChannel(){}EChannel.facebook="1";EChannel.google="2";return EChannel}());SE.EChannel=EChannel;var ProtoVersion=(function(){function ProtoVersion(){}ProtoVersion.versionCode=10;ProtoVersion.versionName="0.1.0";return ProtoVersion}());SE.ProtoVersion=ProtoVersion;var DBOType=(function(){function DBOType(){}DBOType.UsrData="UsrData";DBOType.GameInfo="GameInfo";DBOType.GameInfoExt="GameInfoExt";DBOType.GMMsgLog="GMMsgLog";DBOType.OrderData="OrderData";DBOType.ItemData="ItemData";DBOType.StorySuitData="StorySuitData";DBOType.StoryData="StoryData";DBOType.ActorData="ActorData";DBOType.CityData="CityData";DBOType.ActorSkillEffect="ActorSkillEffect";DBOType.TempData="TempData";DBOType.MovieData="MovieData";DBOType.ManageOrderData="ManageOrderData";DBOType.ProgressBoxData="ProgressBoxData";DBOType.ManageProduceData="ManageProduceData";DBOType.MovieLicenceResetTimeData="MovieLicenceResetTimeData";DBOType.ManageBusinessData="ManageBusinessData";DBOType.ManageVisitData="ManageVisitData";DBOType.StoryMessage="StoryMessage";DBOType.RankListData="RankListData";DBOType.TaskData="TaskData";DBOType.MallItemLimitData="MallItemLimitData";DBOType.MailData="MailData";DBOType.ManageMeetingData="ManageMeetingData";DBOType.DanmuData="DanmuData";DBOType.DailySign="DailySign";DBOType.SecretaryData="SecretaryData";DBOType.SevenAddUpData="SevenAddUpData";DBOType.ActortExerciseData="ActortExerciseData";DBOType.DailyEvent="DailyEvent";DBOType.GuideData="GuideData";DBOType.PlayerCooperateData="PlayerCooperateData";DBOType.AccountCooperateData="AccountCooperateData";DBOType.AutoCooperateData="AutoCooperateData";DBOType.CooperateTaskData="CooperateTaskData";DBOType.CooperateOrderData="CooperateOrderData";DBOType.LevelGiftData="LevelGiftData";DBOType.GetGuideReward="GetGuideReward";DBOType.CupPackage="CupPackage";DBOType.StoryRefreshData="StoryRefreshData";return DBOType}());SE.DBOType=DBOType})(SE=Proto.SE||(Proto.SE={}))})(Proto||(Proto={}));var Proto;(function(Proto){var API;(function(API){var GameData;(function(GameData){var AuthRequest=(function(){function AuthRequest(){this.pass=""}return AuthRequest}());GameData.AuthRequest=AuthRequest;var AuthResponse=(function(){function AuthResponse(){this.result=0}return AuthResponse}());GameData.AuthResponse=AuthResponse;var VisitorAuthRequest=(function(){function VisitorAuthRequest(){this.name="";this.pass=""}return VisitorAuthRequest}());GameData.VisitorAuthRequest=VisitorAuthRequest;var VisitorAuthResponse=(function(){function VisitorAuthResponse(){this.result=0}return VisitorAuthResponse}());GameData.VisitorAuthResponse=VisitorAuthResponse;var InitGameDataRequest=(function(){function InitGameDataRequest(){this.name="";this.sex=0}return InitGameDataRequest}());GameData.InitGameDataRequest=InitGameDataRequest;var InitGameDataResponse=(function(){function InitGameDataResponse(){this.result=0}return InitGameDataResponse}());GameData.InitGameDataResponse=InitGameDataResponse;var GetLoginGameDataRequest=(function(){function GetLoginGameDataRequest(){this.pass="";this.channel=""}return GetLoginGameDataRequest}());GameData.GetLoginGameDataRequest=GetLoginGameDataRequest;var GetLoginGameDataResponse=(function(){function GetLoginGameDataResponse(){this.serverCode="";this.serverName="";this.noticeList=null;this.timeZone=""}return GetLoginGameDataResponse}());GameData.GetLoginGameDataResponse=GetLoginGameDataResponse;var GetInitGameDataRequest=(function(){function GetInitGameDataRequest(){this.nameList=null}return GetInitGameDataRequest}());GameData.GetInitGameDataRequest=GetInitGameDataRequest;var GetInitGameDataResponse=(function(){function GetInitGameDataResponse(){}return GetInitGameDataResponse}());GameData.GetInitGameDataResponse=GetInitGameDataResponse;var RenameGameDataRequest=(function(){function RenameGameDataRequest(){this.playerName=""}return RenameGameDataRequest}());GameData.RenameGameDataRequest=RenameGameDataRequest;var RenameGameDataResponse=(function(){function RenameGameDataResponse(){this.result=0}return RenameGameDataResponse}());GameData.RenameGameDataResponse=RenameGameDataResponse;var RePerSignatureGameDataRequest=(function(){function RePerSignatureGameDataRequest(){this.perSignature=""}return RePerSignatureGameDataRequest}());GameData.RePerSignatureGameDataRequest=RePerSignatureGameDataRequest;var RePerSignatureGameDataResponse=(function(){function RePerSignatureGameDataResponse(){this.result=0}return RePerSignatureGameDataResponse}());GameData.RePerSignatureGameDataResponse=RePerSignatureGameDataResponse;var RePortraitGameDataRequest=(function(){function RePortraitGameDataRequest(){this.type=0;this.portraitId=0}return RePortraitGameDataRequest}());GameData.RePortraitGameDataRequest=RePortraitGameDataRequest;var RePortraitGameDataResponse=(function(){function RePortraitGameDataResponse(){this.result=0}return RePortraitGameDataResponse}());GameData.RePortraitGameDataResponse=RePortraitGameDataResponse;var GetGameInfoExtRequest=(function(){function GetGameInfoExtRequest(){}return GetGameInfoExtRequest}());GameData.GetGameInfoExtRequest=GetGameInfoExtRequest;var GetGameInfoExtResponse=(function(){function GetGameInfoExtResponse(){}return GetGameInfoExtResponse}());GameData.GetGameInfoExtResponse=GetGameInfoExtResponse;var GetInitActorRequest=(function(){function GetInitActorRequest(){this.index=0}return GetInitActorRequest}());GameData.GetInitActorRequest=GetInitActorRequest;var GetInitActorResponse=(function(){function GetInitActorResponse(){}return GetInitActorResponse}());GameData.GetInitActorResponse=GetInitActorResponse;var GetNoticeListRequest=(function(){function GetNoticeListRequest(){}return GetNoticeListRequest}());GameData.GetNoticeListRequest=GetNoticeListRequest;var GetNoticeListResponse=(function(){function GetNoticeListResponse(){this.noticeList=null}return GetNoticeListResponse}());GameData.GetNoticeListResponse=GetNoticeListResponse})(GameData=API.GameData||(API.GameData={}));var CinemaBuild;(function(CinemaBuild){var ExtendFloorRequest=(function(){function ExtendFloorRequest(){this.floor=0}return ExtendFloorRequest}());CinemaBuild.ExtendFloorRequest=ExtendFloorRequest;var ExtendFloorResponse=(function(){function ExtendFloorResponse(){this.result=0;this.floor=0}return ExtendFloorResponse}());CinemaBuild.ExtendFloorResponse=ExtendFloorResponse;var BuildRoomRequest=(function(){function BuildRoomRequest(){this.floor=0;this.roomType=0}return BuildRoomRequest}());CinemaBuild.BuildRoomRequest=BuildRoomRequest;var BuildRoomResponse=(function(){function BuildRoomResponse(){this.result=0;this.floor=0;this.roomId=0}return BuildRoomResponse}());CinemaBuild.BuildRoomResponse=BuildRoomResponse;var UpgradeRoomRequest=(function(){function UpgradeRoomRequest(){this.roomId=0}return UpgradeRoomRequest}());CinemaBuild.UpgradeRoomRequest=UpgradeRoomRequest;var UpgradeRoomResponse=(function(){function UpgradeRoomResponse(){this.result=0;this.preRoomId=0;this.roomId=0}return UpgradeRoomResponse}());CinemaBuild.UpgradeRoomResponse=UpgradeRoomResponse;var goldExchangeRequest=(function(){function goldExchangeRequest(){this.count=0}return goldExchangeRequest}());CinemaBuild.goldExchangeRequest=goldExchangeRequest;var goldExchangeResponse=(function(){function goldExchangeResponse(){this.result=0;this.count=0;this.totalCount=0}return goldExchangeResponse}());CinemaBuild.goldExchangeResponse=goldExchangeResponse})(CinemaBuild=API.CinemaBuild||(API.CinemaBuild={}));var test;(function(test){var AddItemRequest=(function(){function AddItemRequest(){this.itemId=0;this.amount=0}return AddItemRequest}());test.AddItemRequest=AddItemRequest;var AddItemResponse=(function(){function AddItemResponse(){}return AddItemResponse}());test.AddItemResponse=AddItemResponse;var AddFansRequest=(function(){function AddFansRequest(){this.amount=0}return AddFansRequest}());test.AddFansRequest=AddFansRequest;var AddFansResponse=(function(){function AddFansResponse(){}return AddFansResponse}());test.AddFansResponse=AddFansResponse;var AddExpectRequest=(function(){function AddExpectRequest(){this.amount=0}return AddExpectRequest}());test.AddExpectRequest=AddExpectRequest;var AddExpectResponse=(function(){function AddExpectResponse(){}return AddExpectResponse}());test.AddExpectResponse=AddExpectResponse;var DeleteMovieRequest=(function(){function DeleteMovieRequest(){this.uuid=""}return DeleteMovieRequest}());test.DeleteMovieRequest=DeleteMovieRequest;var DeleteMovieResponse=(function(){function DeleteMovieResponse(){}return DeleteMovieResponse}());test.DeleteMovieResponse=DeleteMovieResponse;var AddStarStoryRequest=(function(){function AddStarStoryRequest(){this.starId=0;this.amount=0}return AddStarStoryRequest}());test.AddStarStoryRequest=AddStarStoryRequest;var AddStarStoryResponse=(function(){function AddStarStoryResponse(){}return AddStarStoryResponse}());test.AddStarStoryResponse=AddStarStoryResponse;var AddStoryRequest=(function(){function AddStoryRequest(){this.storyId=0}return AddStoryRequest}());test.AddStoryRequest=AddStoryRequest;var AddStoryResponse=(function(){function AddStoryResponse(){}return AddStoryResponse}());test.AddStoryResponse=AddStoryResponse;var AddActorSkillExpRequest=(function(){function AddActorSkillExpRequest(){this.actorId=0;this.amount=0}return AddActorSkillExpRequest}());test.AddActorSkillExpRequest=AddActorSkillExpRequest;var AddActorSkillExpResponse=(function(){function AddActorSkillExpResponse(){}return AddActorSkillExpResponse}());test.AddActorSkillExpResponse=AddActorSkillExpResponse;var AddStoryProgressRequest=(function(){function AddStoryProgressRequest(){this.storyId=0;this.index=0}return AddStoryProgressRequest}());test.AddStoryProgressRequest=AddStoryProgressRequest;var AddStoryProgressResponse=(function(){function AddStoryProgressResponse(){}return AddStoryProgressResponse}());test.AddStoryProgressResponse=AddStoryProgressResponse;var FinishGuideRequest=(function(){function FinishGuideRequest(){}return FinishGuideRequest}());test.FinishGuideRequest=FinishGuideRequest;var FinishGuideResponse=(function(){function FinishGuideResponse(){}return FinishGuideResponse}());test.FinishGuideResponse=FinishGuideResponse;var debugRequest=(function(){function debugRequest(){this.num=0}return debugRequest}());test.debugRequest=debugRequest;var debugResponse=(function(){function debugResponse(){}return debugResponse}());test.debugResponse=debugResponse;var AddGiftRequest=(function(){function AddGiftRequest(){this.giftUuid="";this.giftId=0;this.targetId=0;this.startTime=0;this.endTime=0;this.total=0}return AddGiftRequest}());test.AddGiftRequest=AddGiftRequest;var AddGiftResponse=(function(){function AddGiftResponse(){}return AddGiftResponse}());test.AddGiftResponse=AddGiftResponse;var SetBlockLevelRequest=(function(){function SetBlockLevelRequest(){this.level=0}return SetBlockLevelRequest}());test.SetBlockLevelRequest=SetBlockLevelRequest;var SetBlockLevelResponse=(function(){function SetBlockLevelResponse(){}return SetBlockLevelResponse}());test.SetBlockLevelResponse=SetBlockLevelResponse;var RefreshTimeRequest=(function(){function RefreshTimeRequest(){this.type=0}return RefreshTimeRequest}());test.RefreshTimeRequest=RefreshTimeRequest;var RefreshTimeResponse=(function(){function RefreshTimeResponse(){}return RefreshTimeResponse}());test.RefreshTimeResponse=RefreshTimeResponse;var PutOrderItemsRequest=(function(){function PutOrderItemsRequest(){this.uuid=""}return PutOrderItemsRequest}());test.PutOrderItemsRequest=PutOrderItemsRequest;var PutOrderItemsResponse=(function(){function PutOrderItemsResponse(){this.uuid=""}return PutOrderItemsResponse}());test.PutOrderItemsResponse=PutOrderItemsResponse;var GetAutoCooperateRequest=(function(){function GetAutoCooperateRequest(){}return GetAutoCooperateRequest}());test.GetAutoCooperateRequest=GetAutoCooperateRequest;var GetAutoCooperateResponse=(function(){function GetAutoCooperateResponse(){this.loseNum=0;this.successNum=0}return GetAutoCooperateResponse}());test.GetAutoCooperateResponse=GetAutoCooperateResponse;var UpdateOscarRequest=(function(){function UpdateOscarRequest(){}return UpdateOscarRequest}());test.UpdateOscarRequest=UpdateOscarRequest;var UpdateOscarResponse=(function(){function UpdateOscarResponse(){}return UpdateOscarResponse}());test.UpdateOscarResponse=UpdateOscarResponse;var setAllStoryGoldRequest=(function(){function setAllStoryGoldRequest(){}return setAllStoryGoldRequest}());test.setAllStoryGoldRequest=setAllStoryGoldRequest;var setAllStoryGoldResponse=(function(){function setAllStoryGoldResponse(){}return setAllStoryGoldResponse}());test.setAllStoryGoldResponse=setAllStoryGoldResponse;var LockAllProduceRequest=(function(){function LockAllProduceRequest(){}return LockAllProduceRequest}());test.LockAllProduceRequest=LockAllProduceRequest;var LockAllProduceResponse=(function(){function LockAllProduceResponse(){}return LockAllProduceResponse}());test.LockAllProduceResponse=LockAllProduceResponse;var SetSecretaryStatusRequest=(function(){function SetSecretaryStatusRequest(){this.status=0}return SetSecretaryStatusRequest}());test.SetSecretaryStatusRequest=SetSecretaryStatusRequest;var SetSecretaryStatusResponse=(function(){function SetSecretaryStatusResponse(){}return SetSecretaryStatusResponse}());test.SetSecretaryStatusResponse=SetSecretaryStatusResponse;var CleanSecretaryTimesRequest=(function(){function CleanSecretaryTimesRequest(){}return CleanSecretaryTimesRequest}());test.CleanSecretaryTimesRequest=CleanSecretaryTimesRequest;var CleanSecretaryTimesResponse=(function(){function CleanSecretaryTimesResponse(){}return CleanSecretaryTimesResponse}());test.CleanSecretaryTimesResponse=CleanSecretaryTimesResponse;var GetRechargeGiftRequest=(function(){function GetRechargeGiftRequest(){}return GetRechargeGiftRequest}());test.GetRechargeGiftRequest=GetRechargeGiftRequest;var GetRechargeGiftResponse=(function(){function GetRechargeGiftResponse(){}return GetRechargeGiftResponse}());test.GetRechargeGiftResponse=GetRechargeGiftResponse;var GotoCityRequest=(function(){function GotoCityRequest(){this.id=0}return GotoCityRequest}());test.GotoCityRequest=GotoCityRequest;var GotoCityResponse=(function(){function GotoCityResponse(){}return GotoCityResponse}());test.GotoCityResponse=GotoCityResponse;var GotoCityBeforeRequest=(function(){function GotoCityBeforeRequest(){this.id=0}return GotoCityBeforeRequest}());test.GotoCityBeforeRequest=GotoCityBeforeRequest;var GotoCityBeforeResponse=(function(){function GotoCityBeforeResponse(){}return GotoCityBeforeResponse}());test.GotoCityBeforeResponse=GotoCityBeforeResponse;var AddManageRequest=(function(){function AddManageRequest(){}return AddManageRequest}());test.AddManageRequest=AddManageRequest;var AddManageResponse=(function(){function AddManageResponse(){}return AddManageResponse}());test.AddManageResponse=AddManageResponse;var SetAllActorLvRequest=(function(){function SetAllActorLvRequest(){}return SetAllActorLvRequest}());test.SetAllActorLvRequest=SetAllActorLvRequest;var SetAllActorLvResponse=(function(){function SetAllActorLvResponse(){}return SetAllActorLvResponse}());test.SetAllActorLvResponse=SetAllActorLvResponse})(test=API.test||(API.test={}));var item;(function(item){var SellOutRequest=(function(){function SellOutRequest(){this.uuid="";this.itemId=0;this.amount=0}return SellOutRequest}());item.SellOutRequest=SellOutRequest;var SellOutResponse=(function(){function SellOutResponse(){this.uuid=""}return SellOutResponse}());item.SellOutResponse=SellOutResponse;var CompoundRequest=(function(){function CompoundRequest(){this.uuid="";this.itemId=0;this.amount=0}return CompoundRequest}());item.CompoundRequest=CompoundRequest;var CompoundResponse=(function(){function CompoundResponse(){this.uuid=""}return CompoundResponse}());item.CompoundResponse=CompoundResponse;var SplitRequest=(function(){function SplitRequest(){this.uuid="";this.itemId=0;this.amount=0}return SplitRequest}());item.SplitRequest=SplitRequest;var SplitResponse=(function(){function SplitResponse(){this.uuid=""}return SplitResponse}());item.SplitResponse=SplitResponse;var UseRequest=(function(){function UseRequest(){this.uuid="";this.itemId=0;this.amount=0}return UseRequest}());item.UseRequest=UseRequest;var UseResponse=(function(){function UseResponse(){this.uuid="";this.dropout=null}return UseResponse}());item.UseResponse=UseResponse;var UsePiecesGiftBagRequest=(function(){function UsePiecesGiftBagRequest(){this.uuid="";this.itemId=0;this.amount=0;this.selItemId=0}return UsePiecesGiftBagRequest}());item.UsePiecesGiftBagRequest=UsePiecesGiftBagRequest;var UsePiecesGiftBagResponse=(function(){function UsePiecesGiftBagResponse(){this.uuid="";this.dropout=null}return UsePiecesGiftBagResponse}());item.UsePiecesGiftBagResponse=UsePiecesGiftBagResponse;var CompoundActorRequest=(function(){function CompoundActorRequest(){this.uuid="";this.itemId=0}return CompoundActorRequest}());item.CompoundActorRequest=CompoundActorRequest;var CompoundActorResponse=(function(){function CompoundActorResponse(){this.uuid="";this.actorId=0;this.items=null}return CompoundActorResponse}());item.CompoundActorResponse=CompoundActorResponse;var UseActorSkillWaterRequest=(function(){function UseActorSkillWaterRequest(){this.uuid="";this.itemId=0;this.actorId=0;this.amount=0}return UseActorSkillWaterRequest}());item.UseActorSkillWaterRequest=UseActorSkillWaterRequest;var UseActorSkillWaterResponse=(function(){function UseActorSkillWaterResponse(){this.uuid=""}return UseActorSkillWaterResponse}());item.UseActorSkillWaterResponse=UseActorSkillWaterResponse})(item=API.item||(API.item={}));var city;(function(city){var SetPropagandaActorRequest=(function(){function SetPropagandaActorRequest(){this.uuid="";this.cityId=0;this.areaId=0;this.actorId=0}return SetPropagandaActorRequest}());city.SetPropagandaActorRequest=SetPropagandaActorRequest;var SetPropagandaActorResponse=(function(){function SetPropagandaActorResponse(){this.uuid=""}return SetPropagandaActorResponse}());city.SetPropagandaActorResponse=SetPropagandaActorResponse;var PropagandaRequest=(function(){function PropagandaRequest(){this.uuid="";this.cityId=0;this.areaId=0}return PropagandaRequest}());city.PropagandaRequest=PropagandaRequest;var PropagandaResponse=(function(){function PropagandaResponse(){this.uuid=""}return PropagandaResponse}());city.PropagandaResponse=PropagandaResponse;var RoadshowRequest=(function(){function RoadshowRequest(){this.uuid="";this.cityId=0;this.areaId=0}return RoadshowRequest}());city.RoadshowRequest=RoadshowRequest;var RoadshowResponse=(function(){function RoadshowResponse(){this.uuid="";this.result=0}return RoadshowResponse}());city.RoadshowResponse=RoadshowResponse;var SetAmbassadorRequest=(function(){function SetAmbassadorRequest(){this.uuid="";this.cityId=0;this.psition=0;this.actuuid=""}return SetAmbassadorRequest}());city.SetAmbassadorRequest=SetAmbassadorRequest;var SetAmbassadorResponse=(function(){function SetAmbassadorResponse(){this.uuid="";this.dropout=null}return SetAmbassadorResponse}());city.SetAmbassadorResponse=SetAmbassadorResponse;var GetRewardRequest=(function(){function GetRewardRequest(){this.uuid="";this.cityId=0}return GetRewardRequest}());city.GetRewardRequest=GetRewardRequest;var GetRewardResponse=(function(){function GetRewardResponse(){this.uuid="";this.dropout=null}return GetRewardResponse}());city.GetRewardResponse=GetRewardResponse;var HoldCityRequest=(function(){function HoldCityRequest(){this.uuid=""}return HoldCityRequest}());city.HoldCityRequest=HoldCityRequest;var HoldCityResponse=(function(){function HoldCityResponse(){this.uuid=""}return HoldCityResponse}());city.HoldCityResponse=HoldCityResponse})(city=API.city||(API.city={}));var movie;(function(movie){var MakeFilmRequest=(function(){function MakeFilmRequest(){this.uuid=""}return MakeFilmRequest}());movie.MakeFilmRequest=MakeFilmRequest;var MakeFilmResponse=(function(){function MakeFilmResponse(){this.uuid=""}return MakeFilmResponse}());movie.MakeFilmResponse=MakeFilmResponse;var SetMovieNameRequest=(function(){function SetMovieNameRequest(){this.uuid="";this.index=0;this.name=""}return SetMovieNameRequest}());movie.SetMovieNameRequest=SetMovieNameRequest;var SetMovieNameResponse=(function(){function SetMovieNameResponse(){this.uuid=""}return SetMovieNameResponse}());movie.SetMovieNameResponse=SetMovieNameResponse;var SetActorRequest=(function(){function SetActorRequest(){this.uuid="";this.index=0;this.actorId=0}return SetActorRequest}());movie.SetActorRequest=SetActorRequest;var SetActorResponse=(function(){function SetActorResponse(){this.uuid=""}return SetActorResponse}());movie.SetActorResponse=SetActorResponse;var ConfirmSetActorRequest=(function(){function ConfirmSetActorRequest(){this.uuid=""}return ConfirmSetActorRequest}());movie.ConfirmSetActorRequest=ConfirmSetActorRequest;var ConfirmSetActorResponse=(function(){function ConfirmSetActorResponse(){this.uuid=""}return ConfirmSetActorResponse}());movie.ConfirmSetActorResponse=ConfirmSetActorResponse;var ChoseTypeRequest=(function(){function ChoseTypeRequest(){this.uuid="";this.type=0}return ChoseTypeRequest}());movie.ChoseTypeRequest=ChoseTypeRequest;var ChoseTypeResponse=(function(){function ChoseTypeResponse(){this.uuid="";this.storyShootType=0}return ChoseTypeResponse}());movie.ChoseTypeResponse=ChoseTypeResponse;var AcceptMediaVisitRequest=(function(){function AcceptMediaVisitRequest(){this.uuid="";this.mediaId=0}return AcceptMediaVisitRequest}());movie.AcceptMediaVisitRequest=AcceptMediaVisitRequest;var AcceptMediaVisitResponse=(function(){function AcceptMediaVisitResponse(){this.uuid="";this.addExpection=0}return AcceptMediaVisitResponse}());movie.AcceptMediaVisitResponse=AcceptMediaVisitResponse;var PublishMovieRequest=(function(){function PublishMovieRequest(){this.uuid="";this.theaterId=0}return PublishMovieRequest}());movie.PublishMovieRequest=PublishMovieRequest;var PublishMovieResponse=(function(){function PublishMovieResponse(){this.uuid=""}return PublishMovieResponse}());movie.PublishMovieResponse=PublishMovieResponse;var BattleOverRequest=(function(){function BattleOverRequest(){this.uuid=""}return BattleOverRequest}());movie.BattleOverRequest=BattleOverRequest;var BattleOverResponse=(function(){function BattleOverResponse(){this.uuid="";this.dropout=null}return BattleOverResponse}());movie.BattleOverResponse=BattleOverResponse;var SpreadMovieRequest=(function(){function SpreadMovieRequest(){this.uuid=""}return SpreadMovieRequest}());movie.SpreadMovieRequest=SpreadMovieRequest;var SpreadMovieResponse=(function(){function SpreadMovieResponse(){this.uuid=""}return SpreadMovieResponse}());movie.SpreadMovieResponse=SpreadMovieResponse;var GetRewardMovieRequest=(function(){function GetRewardMovieRequest(){this.uuid=""}return GetRewardMovieRequest}());movie.GetRewardMovieRequest=GetRewardMovieRequest;var GetRewardMovieResponse=(function(){function GetRewardMovieResponse(){this.uuid="";this.dropout=null}return GetRewardMovieResponse}());movie.GetRewardMovieResponse=GetRewardMovieResponse;var SwitchCityRequest=(function(){function SwitchCityRequest(){this.uuid="";this.cityId=0}return SwitchCityRequest}());movie.SwitchCityRequest=SwitchCityRequest;var SwitchCityResponse=(function(){function SwitchCityResponse(){this.uuid=""}return SwitchCityResponse}());movie.SwitchCityResponse=SwitchCityResponse;var UpdateMovieStateRequest=(function(){function UpdateMovieStateRequest(){this.uuid="";this.state=0}return UpdateMovieStateRequest}());movie.UpdateMovieStateRequest=UpdateMovieStateRequest;var UpdateMovieStateResponse=(function(){function UpdateMovieStateResponse(){this.uuid=""}return UpdateMovieStateResponse}());movie.UpdateMovieStateResponse=UpdateMovieStateResponse;var GetStoryGoalsRequest=(function(){function GetStoryGoalsRequest(){this.uuid=""}return GetStoryGoalsRequest}());movie.GetStoryGoalsRequest=GetStoryGoalsRequest;var GetStoryGoalsResponse=(function(){function GetStoryGoalsResponse(){this.uuid=""}return GetStoryGoalsResponse}());movie.GetStoryGoalsResponse=GetStoryGoalsResponse;var DeleteMovieRequest=(function(){function DeleteMovieRequest(){this.uuid=""}return DeleteMovieRequest}());movie.DeleteMovieRequest=DeleteMovieRequest;var DeleteMovieResponse=(function(){function DeleteMovieResponse(){this.uuid="";this.dropout=null}return DeleteMovieResponse}());movie.DeleteMovieResponse=DeleteMovieResponse;var RefreshMovieStoryRequest=(function(){function RefreshMovieStoryRequest(){this.uuid=""}return RefreshMovieStoryRequest}());movie.RefreshMovieStoryRequest=RefreshMovieStoryRequest;var RefreshMovieStoryResponse=(function(){function RefreshMovieStoryResponse(){this.uuid=""}return RefreshMovieStoryResponse}());movie.RefreshMovieStoryResponse=RefreshMovieStoryResponse})(movie=API.movie||(API.movie={}));var Actor;(function(Actor){var NoseInfoActorRequest=(function(){function NoseInfoActorRequest(){this.isUseCard=false}return NoseInfoActorRequest}());Actor.NoseInfoActorRequest=NoseInfoActorRequest;var NoseInfoActorResponse=(function(){function NoseInfoActorResponse(){this.result=0}return NoseInfoActorResponse}());Actor.NoseInfoActorResponse=NoseInfoActorResponse;var RecruitActorRequest=(function(){function RecruitActorRequest(){this.actorId=0}return RecruitActorRequest}());Actor.RecruitActorRequest=RecruitActorRequest;var RecruitActorResponse=(function(){function RecruitActorResponse(){this.result=0;this.actorId=0;this.isNewActor=false}return RecruitActorResponse}());Actor.RecruitActorResponse=RecruitActorResponse;var HideActorRequest=(function(){function HideActorRequest(){this.uuid="";this.isHide=false}return HideActorRequest}());Actor.HideActorRequest=HideActorRequest;var HideActorResponse=(function(){function HideActorResponse(){this.result=0}return HideActorResponse}());Actor.HideActorResponse=HideActorResponse;var AddActorSlotRequest=(function(){function AddActorSlotRequest(){}return AddActorSlotRequest}());Actor.AddActorSlotRequest=AddActorSlotRequest;var AddActorSlotResponse=(function(){function AddActorSlotResponse(){this.result=0}return AddActorSlotResponse}());Actor.AddActorSlotResponse=AddActorSlotResponse;var UpgradeActorRequest=(function(){function UpgradeActorRequest(){this.uuid=""}return UpgradeActorRequest}());Actor.UpgradeActorRequest=UpgradeActorRequest;var UpgradeActorResponse=(function(){function UpgradeActorResponse(){this.result=0}return UpgradeActorResponse}());Actor.UpgradeActorResponse=UpgradeActorResponse;var GiveActorAssetsRequest=(function(){function GiveActorAssetsRequest(){this.uuid="";this.giveType=0;this.giveLevel=0;this.giveNum=0}return GiveActorAssetsRequest}());Actor.GiveActorAssetsRequest=GiveActorAssetsRequest;var GiveActorAssetsResponse=(function(){function GiveActorAssetsResponse(){this.result=0}return GiveActorAssetsResponse}());Actor.GiveActorAssetsResponse=GiveActorAssetsResponse;var UpgradeActorSkillRequest=(function(){function UpgradeActorSkillRequest(){this.uuid="";this.skillId=0}return UpgradeActorSkillRequest}());Actor.UpgradeActorSkillRequest=UpgradeActorSkillRequest;var UpgradeActorSkillResponse=(function(){function UpgradeActorSkillResponse(){this.result=0}return UpgradeActorSkillResponse}());Actor.UpgradeActorSkillResponse=UpgradeActorSkillResponse;var ActorTrainRequest=(function(){function ActorTrainRequest(){this.uuid="";this.trainType=0;this.useDiamond=false}return ActorTrainRequest}());Actor.ActorTrainRequest=ActorTrainRequest;var ActorTrainResponse=(function(){function ActorTrainResponse(){this.result=0;this.uuid="";this.trainType=0;this.attrChangeList=null}return ActorTrainResponse}());Actor.ActorTrainResponse=ActorTrainResponse;var ActorChangeNameRequest=(function(){function ActorChangeNameRequest(){this.uuid="";this.name=""}return ActorChangeNameRequest}());Actor.ActorChangeNameRequest=ActorChangeNameRequest;var ActorChangeNameResponse=(function(){function ActorChangeNameResponse(){this.result=0}return ActorChangeNameResponse}());Actor.ActorChangeNameResponse=ActorChangeNameResponse;var ActorExerciseStartRequest=(function(){function ActorExerciseStartRequest(){this.aId="";this.eId=""}return ActorExerciseStartRequest}());Actor.ActorExerciseStartRequest=ActorExerciseStartRequest;var ActorExerciseStartResponse=(function(){function ActorExerciseStartResponse(){this.aId=""}return ActorExerciseStartResponse}());Actor.ActorExerciseStartResponse=ActorExerciseStartResponse;var ActorExerciseRewardRequest=(function(){function ActorExerciseRewardRequest(){this.eId="";this.useMoney=false}return ActorExerciseRewardRequest}());Actor.ActorExerciseRewardRequest=ActorExerciseRewardRequest;var ActorExerciseRewardResponse=(function(){function ActorExerciseRewardResponse(){this.aId="";this.eId=""}return ActorExerciseRewardResponse}());Actor.ActorExerciseRewardResponse=ActorExerciseRewardResponse;var ActorExerciseAddRequest=(function(){function ActorExerciseAddRequest(){}return ActorExerciseAddRequest}());Actor.ActorExerciseAddRequest=ActorExerciseAddRequest;var ActorExerciseAddResponse=(function(){function ActorExerciseAddResponse(){this.eId=""}return ActorExerciseAddResponse}());Actor.ActorExerciseAddResponse=ActorExerciseAddResponse;var GiveLoyaltyCardRequest=(function(){function GiveLoyaltyCardRequest(){this.uuid="";this.giveType=0;this.num=0}return GiveLoyaltyCardRequest}());Actor.GiveLoyaltyCardRequest=GiveLoyaltyCardRequest;var GiveLoyaltyCardResponse=(function(){function GiveLoyaltyCardResponse(){this.uuid="";this.giveType=0}return GiveLoyaltyCardResponse}());Actor.GiveLoyaltyCardResponse=GiveLoyaltyCardResponse;var AssistantUpLvRequest=(function(){function AssistantUpLvRequest(){this.uuid="";this.id=0}return AssistantUpLvRequest}());Actor.AssistantUpLvRequest=AssistantUpLvRequest;var AssistantUpLvResponse=(function(){function AssistantUpLvResponse(){this.uuid="";this.id=0}return AssistantUpLvResponse}());Actor.AssistantUpLvResponse=AssistantUpLvResponse})(Actor=API.Actor||(API.Actor={}));var story;(function(story){var findStoryRequest=(function(){function findStoryRequest(){}return findStoryRequest}());story.findStoryRequest=findStoryRequest;var findStoryResponse=(function(){function findStoryResponse(){this.type=0;this.id=0;this.num=0;this.time=0;this.refreshTime=0}return findStoryResponse}());story.findStoryResponse=findStoryResponse;var cleanFindStoryRequest=(function(){function cleanFindStoryRequest(){}return cleanFindStoryRequest}());story.cleanFindStoryRequest=cleanFindStoryRequest;var cleanFindStoryResponse=(function(){function cleanFindStoryResponse(){this.result=0;this.refreshTime=0}return cleanFindStoryResponse}());story.cleanFindStoryResponse=cleanFindStoryResponse;var getRewardRequest=(function(){function getRewardRequest(){this.storySuitId=0}return getRewardRequest}());story.getRewardRequest=getRewardRequest;var getRewardResponse=(function(){function getRewardResponse(){this.storySuitId=0;this.result=0}return getRewardResponse}());story.getRewardResponse=getRewardResponse;var GetMessageRequest=(function(){function GetMessageRequest(){this.stroyId=0}return GetMessageRequest}());story.GetMessageRequest=GetMessageRequest;var GetMessageResponse=(function(){function GetMessageResponse(){this.stroyId=0;this.message=null}return GetMessageResponse}());story.GetMessageResponse=GetMessageResponse;var SetMessageRequest=(function(){function SetMessageRequest(){this.stroyId=0;this.content=""}return SetMessageRequest}());story.SetMessageRequest=SetMessageRequest;var SetMessageResponse=(function(){function SetMessageResponse(){this.stroyId=0}return SetMessageResponse}());story.SetMessageResponse=SetMessageResponse})(story=API.story||(API.story={}));var manageOrder;(function(manageOrder){var PutItemRequest=(function(){function PutItemRequest(){this.uuid="";this.entityId=0;this.itemId=0;this.type=0}return PutItemRequest}());manageOrder.PutItemRequest=PutItemRequest;var PutItemResponse=(function(){function PutItemResponse(){this.uuid="";this.itemInfo=null;this.type=0}return PutItemResponse}());manageOrder.PutItemResponse=PutItemResponse;var DelOrderRequest=(function(){function DelOrderRequest(){this.uuid=""}return DelOrderRequest}());manageOrder.DelOrderRequest=DelOrderRequest;var DelOrderResponse=(function(){function DelOrderResponse(){this.uuid=""}return DelOrderResponse}());manageOrder.DelOrderResponse=DelOrderResponse;var FinishOrderRequest=(function(){function FinishOrderRequest(){this.uuid=""}return FinishOrderRequest}());manageOrder.FinishOrderRequest=FinishOrderRequest;var FinishOrderResponse=(function(){function FinishOrderResponse(){this.uuid=""}return FinishOrderResponse}());manageOrder.FinishOrderResponse=FinishOrderResponse;var DealOrderRequest=(function(){function DealOrderRequest(){}return DealOrderRequest}());manageOrder.DealOrderRequest=DealOrderRequest;var DealOrderResponse=(function(){function DealOrderResponse(){}return DealOrderResponse}());manageOrder.DealOrderResponse=DealOrderResponse})(manageOrder=API.manageOrder||(API.manageOrder={}));var progressBox;(function(progressBox){var GetRewardRequest=(function(){function GetRewardRequest(){this.uuid="";this.gear=0}return GetRewardRequest}());progressBox.GetRewardRequest=GetRewardRequest;var GetRewardResponse=(function(){function GetRewardResponse(){this.uuid="";this.gear=0}return GetRewardResponse}());progressBox.GetRewardResponse=GetRewardResponse})(progressBox=API.progressBox||(API.progressBox={}));var manageProduce;(function(manageProduce){var ProduceRequest=(function(){function ProduceRequest(){this.uuid=""}return ProduceRequest}());manageProduce.ProduceRequest=ProduceRequest;var ProduceResponse=(function(){function ProduceResponse(){this.uuid=""}return ProduceResponse}());manageProduce.ProduceResponse=ProduceResponse;var GetRewardRequest=(function(){function GetRewardRequest(){this.uuid=""}return GetRewardRequest}());manageProduce.GetRewardRequest=GetRewardRequest;var GetRewardResponse=(function(){function GetRewardResponse(){this.uuid=""}return GetRewardResponse}());manageProduce.GetRewardResponse=GetRewardResponse;var UplevelRequest=(function(){function UplevelRequest(){this.uuid="";this.skillId=0}return UplevelRequest}());manageProduce.UplevelRequest=UplevelRequest;var UplevelResponse=(function(){function UplevelResponse(){this.uuid="";this.skillId=0}return UplevelResponse}());manageProduce.UplevelResponse=UplevelResponse;var SendActorRequest=(function(){function SendActorRequest(){this.uuid="";this.actBaseId=0}return SendActorRequest}());manageProduce.SendActorRequest=SendActorRequest;var SendActorResponse=(function(){function SendActorResponse(){this.uuid="";this.actBaseId=0}return SendActorResponse}());manageProduce.SendActorResponse=SendActorResponse;var DeblockingRequest=(function(){function DeblockingRequest(){this.produceId=0}return DeblockingRequest}());manageProduce.DeblockingRequest=DeblockingRequest;var DeblockingResponse=(function(){function DeblockingResponse(){this.produceId=0}return DeblockingResponse}());manageProduce.DeblockingResponse=DeblockingResponse;var QuickGetRewardRequest=(function(){function QuickGetRewardRequest(){this.stall=0}return QuickGetRewardRequest}());manageProduce.QuickGetRewardRequest=QuickGetRewardRequest;var QuickGetRewardResponse=(function(){function QuickGetRewardResponse(){this.stall=0}return QuickGetRewardResponse}());manageProduce.QuickGetRewardResponse=QuickGetRewardResponse;var QuickProduceRequest=(function(){function QuickProduceRequest(){this.stall=0}return QuickProduceRequest}());manageProduce.QuickProduceRequest=QuickProduceRequest;var QuickProduceResponse=(function(){function QuickProduceResponse(){this.stall=0;this.num=0}return QuickProduceResponse}());manageProduce.QuickProduceResponse=QuickProduceResponse;var cleanTimeRequest=(function(){function cleanTimeRequest(){this.uuid=""}return cleanTimeRequest}());manageProduce.cleanTimeRequest=cleanTimeRequest;var cleanTimeResponse=(function(){function cleanTimeResponse(){this.uuid=""}return cleanTimeResponse}());manageProduce.cleanTimeResponse=cleanTimeResponse})(manageProduce=API.manageProduce||(API.manageProduce={}));var rank;(function(rank){var GetSelfListRequest=(function(){function GetSelfListRequest(){}return GetSelfListRequest}());rank.GetSelfListRequest=GetSelfListRequest;var GetSelfListResponse=(function(){function GetSelfListResponse(){this.data=null}return GetSelfListResponse}());rank.GetSelfListResponse=GetSelfListResponse;var GetServerRankListRequest=(function(){function GetServerRankListRequest(){}return GetServerRankListRequest}());rank.GetServerRankListRequest=GetServerRankListRequest;var GetServerRankListResponse=(function(){function GetServerRankListResponse(){this.selfRank=0;this.selfData=null;this.data=null}return GetServerRankListResponse}());rank.GetServerRankListResponse=GetServerRankListResponse;var GetGroupRankListRequest=(function(){function GetGroupRankListRequest(){}return GetGroupRankListRequest}());rank.GetGroupRankListRequest=GetGroupRankListRequest;var GetGroupRankListResponse=(function(){function GetGroupRankListResponse(){this.selfRank=0;this.selfData=null;this.data=null}return GetGroupRankListResponse}());rank.GetGroupRankListResponse=GetGroupRankListResponse;var GetGroupMovieRankListRequest=(function(){function GetGroupMovieRankListRequest(){}return GetGroupMovieRankListRequest}());rank.GetGroupMovieRankListRequest=GetGroupMovieRankListRequest;var GetGroupMovieRankListResponse=(function(){function GetGroupMovieRankListResponse(){this.selfRank=0;this.selfData=null;this.data=null}return GetGroupMovieRankListResponse}());rank.GetGroupMovieRankListResponse=GetGroupMovieRankListResponse;var GetMovieShortDataRequest=(function(){function GetMovieShortDataRequest(){this.uuid=""}return GetMovieShortDataRequest}());rank.GetMovieShortDataRequest=GetMovieShortDataRequest;var GetMovieShortDataResponse=(function(){function GetMovieShortDataResponse(){this.data=null}return GetMovieShortDataResponse}());rank.GetMovieShortDataResponse=GetMovieShortDataResponse;var GetPlayerShortDataRequest=(function(){function GetPlayerShortDataRequest(){this.userId=0}return GetPlayerShortDataRequest}());rank.GetPlayerShortDataRequest=GetPlayerShortDataRequest;var GetPlayerShortDataResponse=(function(){function GetPlayerShortDataResponse(){this.data=null}return GetPlayerShortDataResponse}());rank.GetPlayerShortDataResponse=GetPlayerShortDataResponse;var GetServerListRewardRequest=(function(){function GetServerListRewardRequest(){this.uuid=""}return GetServerListRewardRequest}());rank.GetServerListRewardRequest=GetServerListRewardRequest;var GetServerListRewardResponse=(function(){function GetServerListRewardResponse(){this.dropout=null}return GetServerListRewardResponse}());rank.GetServerListRewardResponse=GetServerListRewardResponse;var ChangeServerNameRequest=(function(){function ChangeServerNameRequest(){this.uuid="";this.name=""}return ChangeServerNameRequest}());rank.ChangeServerNameRequest=ChangeServerNameRequest;var ChangeServerNameResponse=(function(){function ChangeServerNameResponse(){}return ChangeServerNameResponse}());rank.ChangeServerNameResponse=ChangeServerNameResponse;var GetOscarDataRequest=(function(){function GetOscarDataRequest(){}return GetOscarDataRequest}());rank.GetOscarDataRequest=GetOscarDataRequest;var GetOscarDataResponse=(function(){function GetOscarDataResponse(){}return GetOscarDataResponse}());rank.GetOscarDataResponse=GetOscarDataResponse;var GetOscarRewardRequest=(function(){function GetOscarRewardRequest(){this.type=0}return GetOscarRewardRequest}());rank.GetOscarRewardRequest=GetOscarRewardRequest;var GetOscarRewardResponse=(function(){function GetOscarRewardResponse(){this.dropout=null}return GetOscarRewardResponse}());rank.GetOscarRewardResponse=GetOscarRewardResponse;var ChoseTheaterRequest=(function(){function ChoseTheaterRequest(){this.theaterId=0}return ChoseTheaterRequest}());rank.ChoseTheaterRequest=ChoseTheaterRequest;var ChoseTheaterResponse=(function(){function ChoseTheaterResponse(){}return ChoseTheaterResponse}());rank.ChoseTheaterResponse=ChoseTheaterResponse;var GetStreetRewardRequest=(function(){function GetStreetRewardRequest(){this.type=0}return GetStreetRewardRequest}());rank.GetStreetRewardRequest=GetStreetRewardRequest;var GetStreetRewardResponse=(function(){function GetStreetRewardResponse(){this.type=0;this.dropout=null}return GetStreetRewardResponse}());rank.GetStreetRewardResponse=GetStreetRewardResponse})(rank=API.rank||(API.rank={}));var task;(function(task){var rewardRequest=(function(){function rewardRequest(){this.tId=""}return rewardRequest}());task.rewardRequest=rewardRequest;var rewardResponse=(function(){function rewardResponse(){this.tId="";this.dropout=null}return rewardResponse}());task.rewardResponse=rewardResponse})(task=API.task||(API.task={}));var mall;(function(mall){var buyRequest=(function(){function buyRequest(){this.goodsId=0;this.amount=0}return buyRequest}());mall.buyRequest=buyRequest;var buyResponse=(function(){function buyResponse(){this.result=0}return buyResponse}());mall.buyResponse=buyResponse})(mall=API.mall||(API.mall={}));var Mail;(function(Mail){var MailGetRewardRequest=(function(){function MailGetRewardRequest(){this.uuid=""}return MailGetRewardRequest}());Mail.MailGetRewardRequest=MailGetRewardRequest;var MailGetRewardResponse=(function(){function MailGetRewardResponse(){this.uuid="";this.dropout=null}return MailGetRewardResponse}());Mail.MailGetRewardResponse=MailGetRewardResponse;var MailGetRewardManyRequest=(function(){function MailGetRewardManyRequest(){this.uuid=null}return MailGetRewardManyRequest}());Mail.MailGetRewardManyRequest=MailGetRewardManyRequest;var MailGetRewardManyResponse=(function(){function MailGetRewardManyResponse(){this.uuid=null;this.dropout=null}return MailGetRewardManyResponse}());Mail.MailGetRewardManyResponse=MailGetRewardManyResponse;var MailDeleteManyRequest=(function(){function MailDeleteManyRequest(){this.uuid=null}return MailDeleteManyRequest}());Mail.MailDeleteManyRequest=MailDeleteManyRequest;var MailDeleteManyResponse=(function(){function MailDeleteManyResponse(){this.uuid=null}return MailDeleteManyResponse}());Mail.MailDeleteManyResponse=MailDeleteManyResponse;var MailDeleteRequest=(function(){function MailDeleteRequest(){this.uuid=""}return MailDeleteRequest}());Mail.MailDeleteRequest=MailDeleteRequest;var MailDeleteResponse=(function(){function MailDeleteResponse(){this.uuid=""}return MailDeleteResponse}());Mail.MailDeleteResponse=MailDeleteResponse;var MailReadRequest=(function(){function MailReadRequest(){this.uuid=""}return MailReadRequest}());Mail.MailReadRequest=MailReadRequest;var MailReadResponse=(function(){function MailReadResponse(){this.uuid=""}return MailReadResponse}());Mail.MailReadResponse=MailReadResponse})(Mail=API.Mail||(API.Mail={}));var Gift;(function(Gift){var ExchangeRequest=(function(){function ExchangeRequest(){this.id=""}return ExchangeRequest}());Gift.ExchangeRequest=ExchangeRequest;var ExchangeResponse=(function(){function ExchangeResponse(){this.result=0;this.dropout=null}return ExchangeResponse}());Gift.ExchangeResponse=ExchangeResponse})(Gift=API.Gift||(API.Gift={}));var manageBusiness;(function(manageBusiness){var GetRewardRequest=(function(){function GetRewardRequest(){}return GetRewardRequest}());manageBusiness.GetRewardRequest=GetRewardRequest;var GetRewardResponse=(function(){function GetRewardResponse(){}return GetRewardResponse}());manageBusiness.GetRewardResponse=GetRewardResponse})(manageBusiness=API.manageBusiness||(API.manageBusiness={}));var manageVisit;(function(manageVisit){var StartVisitRequest=(function(){function StartVisitRequest(){}return StartVisitRequest}());manageVisit.StartVisitRequest=StartVisitRequest;var StartVisitResponse=(function(){function StartVisitResponse(){}return StartVisitResponse}());manageVisit.StartVisitResponse=StartVisitResponse;var GetRewardRequest=(function(){function GetRewardRequest(){}return GetRewardRequest}());manageVisit.GetRewardRequest=GetRewardRequest;var GetRewardResponse=(function(){function GetRewardResponse(){}return GetRewardResponse}());manageVisit.GetRewardResponse=GetRewardResponse;var StartReceRequest=(function(){function StartReceRequest(){}return StartReceRequest}());manageVisit.StartReceRequest=StartReceRequest;var StartReceResponse=(function(){function StartReceResponse(){}return StartReceResponse}());manageVisit.StartReceResponse=StartReceResponse})(manageVisit=API.manageVisit||(API.manageVisit={}));var manageMeeting;(function(manageMeeting){var GetRewardRequest=(function(){function GetRewardRequest(){this.type=0}return GetRewardRequest}());manageMeeting.GetRewardRequest=GetRewardRequest;var GetRewardResponse=(function(){function GetRewardResponse(){this.type=0}return GetRewardResponse}());manageMeeting.GetRewardResponse=GetRewardResponse;var MarkupRequest=(function(){function MarkupRequest(){this.type=0}return MarkupRequest}());manageMeeting.MarkupRequest=MarkupRequest;var MarkupResponse=(function(){function MarkupResponse(){this.type=0}return MarkupResponse}());manageMeeting.MarkupResponse=MarkupResponse})(manageMeeting=API.manageMeeting||(API.manageMeeting={}));var dailySign;(function(dailySign){var signRequest=(function(){function signRequest(){}return signRequest}());dailySign.signRequest=signRequest;var signResponse=(function(){function signResponse(){this.dropout=null}return signResponse}());dailySign.signResponse=signResponse})(dailySign=API.dailySign||(API.dailySign={}));var secretary;(function(secretary){var GetDailyRewardRequest=(function(){function GetDailyRewardRequest(){}return GetDailyRewardRequest}());secretary.GetDailyRewardRequest=GetDailyRewardRequest;var GetDailyRewardResponse=(function(){function GetDailyRewardResponse(){}return GetDailyRewardResponse}());secretary.GetDailyRewardResponse=GetDailyRewardResponse;var OpenSecretaryRequest=(function(){function OpenSecretaryRequest(){this.key=0;this.type=0}return OpenSecretaryRequest}());secretary.OpenSecretaryRequest=OpenSecretaryRequest;var OpenSecretaryResponse=(function(){function OpenSecretaryResponse(){this.key=0;this.type=0}return OpenSecretaryResponse}());secretary.OpenSecretaryResponse=OpenSecretaryResponse;var ApplyMovieLicenceRequest=(function(){function ApplyMovieLicenceRequest(){}return ApplyMovieLicenceRequest}());secretary.ApplyMovieLicenceRequest=ApplyMovieLicenceRequest;var ApplyMovieLicenceResponse=(function(){function ApplyMovieLicenceResponse(){}return ApplyMovieLicenceResponse}());secretary.ApplyMovieLicenceResponse=ApplyMovieLicenceResponse;var RewardMovieLicenceRequest=(function(){function RewardMovieLicenceRequest(){}return RewardMovieLicenceRequest}());secretary.RewardMovieLicenceRequest=RewardMovieLicenceRequest;var RewardMovieLicenceResponse=(function(){function RewardMovieLicenceResponse(){}return RewardMovieLicenceResponse}());secretary.RewardMovieLicenceResponse=RewardMovieLicenceResponse})(secretary=API.secretary||(API.secretary={}));var sevenAddUp;(function(sevenAddUp){var GetRewardRequest=(function(){function GetRewardRequest(){this.uuid="";this.gear=0}return GetRewardRequest}());sevenAddUp.GetRewardRequest=GetRewardRequest;var GetRewardResponse=(function(){function GetRewardResponse(){this.uuid="";this.gear=0}return GetRewardResponse}());sevenAddUp.GetRewardResponse=GetRewardResponse;var TouchRequest=(function(){function TouchRequest(){}return TouchRequest}());sevenAddUp.TouchRequest=TouchRequest;var TouchResponse=(function(){function TouchResponse(){}return TouchResponse}());sevenAddUp.TouchResponse=TouchResponse})(sevenAddUp=API.sevenAddUp||(API.sevenAddUp={}));var BeginnerGuide;(function(BeginnerGuide){var CompleteGuideRequest=(function(){function CompleteGuideRequest(){this.gId=0;this.type=0}return CompleteGuideRequest}());BeginnerGuide.CompleteGuideRequest=CompleteGuideRequest;var CompleteGuideResponse=(function(){function CompleteGuideResponse(){this.gId=0;this.type=0}return CompleteGuideResponse}());BeginnerGuide.CompleteGuideResponse=CompleteGuideResponse;var GuideEndRewardRequest=(function(){function GuideEndRewardRequest(){}return GuideEndRewardRequest}());BeginnerGuide.GuideEndRewardRequest=GuideEndRewardRequest;var GuideEndRewardResponse=(function(){function GuideEndRewardResponse(){this.isNewActor=false}return GuideEndRewardResponse}());BeginnerGuide.GuideEndRewardResponse=GuideEndRewardResponse})(BeginnerGuide=API.BeginnerGuide||(API.BeginnerGuide={}));var Danmu;(function(Danmu){var setRequest=(function(){function setRequest(){this.id=0;this.msg=""}return setRequest}());Danmu.setRequest=setRequest;var setResponse=(function(){function setResponse(){}return setResponse}());Danmu.setResponse=setResponse;var getRequest=(function(){function getRequest(){this.id=0;this.time=0}return getRequest}());Danmu.getRequest=getRequest;var getResponse=(function(){function getResponse(){this.data=null;this.time=0}return getResponse}());Danmu.getResponse=getResponse})(Danmu=API.Danmu||(API.Danmu={}));var cooperate;(function(cooperate){var ApplyRequest=(function(){function ApplyRequest(){this.entityId=0}return ApplyRequest}());cooperate.ApplyRequest=ApplyRequest;var ApplyResponse=(function(){function ApplyResponse(){}return ApplyResponse}());cooperate.ApplyResponse=ApplyResponse;var CancelCooperateRequest=(function(){function CancelCooperateRequest(){}return CancelCooperateRequest}());cooperate.CancelCooperateRequest=CancelCooperateRequest;var CancelCooperateResponse=(function(){function CancelCooperateResponse(){}return CancelCooperateResponse}());cooperate.CancelCooperateResponse=CancelCooperateResponse;var RelieveRequest=(function(){function RelieveRequest(){}return RelieveRequest}());cooperate.RelieveRequest=RelieveRequest;var RelieveResponse=(function(){function RelieveResponse(){}return RelieveResponse}());cooperate.RelieveResponse=RelieveResponse;var ApproveRequest=(function(){function ApproveRequest(){this.type=0;this.entityId=""}return ApproveRequest}());cooperate.ApproveRequest=ApproveRequest;var ApproveResponse=(function(){function ApproveResponse(){this.type=0;this.entityId=""}return ApproveResponse}());cooperate.ApproveResponse=ApproveResponse;var GetInfoRequest=(function(){function GetInfoRequest(){this.oldOrderUuids=null}return GetInfoRequest}());cooperate.GetInfoRequest=GetInfoRequest;var GetInfoResponse=(function(){function GetInfoResponse(){}return GetInfoResponse}());cooperate.GetInfoResponse=GetInfoResponse;var TaskOperateRequest=(function(){function TaskOperateRequest(){this.type=0;this.taskId=0;this.star=0}return TaskOperateRequest}());cooperate.TaskOperateRequest=TaskOperateRequest;var TaskOperateResponse=(function(){function TaskOperateResponse(){this.type=0;this.taskId=0;this.star=0}return TaskOperateResponse}());cooperate.TaskOperateResponse=TaskOperateResponse;var GetTaskRewardRequest=(function(){function GetTaskRewardRequest(){this.taskId=0;this.star=0}return GetTaskRewardRequest}());cooperate.GetTaskRewardRequest=GetTaskRewardRequest;var GetTaskRewardResponse=(function(){function GetTaskRewardResponse(){this.taskId=0;this.star=0}return GetTaskRewardResponse}());cooperate.GetTaskRewardResponse=GetTaskRewardResponse;var GiveRewardRequest=(function(){function GiveRewardRequest(){this.itemId=0}return GiveRewardRequest}());cooperate.GiveRewardRequest=GiveRewardRequest;var GiveRewardResponse=(function(){function GiveRewardResponse(){this.itemId=0}return GiveRewardResponse}());cooperate.GiveRewardResponse=GiveRewardResponse;var GetProgressTaskRequest=(function(){function GetProgressTaskRequest(){this.index=0}return GetProgressTaskRequest}());cooperate.GetProgressTaskRequest=GetProgressTaskRequest;var GetProgressTaskResponse=(function(){function GetProgressTaskResponse(){this.index=0}return GetProgressTaskResponse}());cooperate.GetProgressTaskResponse=GetProgressTaskResponse;var ReadCooperateRequest=(function(){function ReadCooperateRequest(){}return ReadCooperateRequest}());cooperate.ReadCooperateRequest=ReadCooperateRequest;var ReadCooperateResponse=(function(){function ReadCooperateResponse(){}return ReadCooperateResponse}());cooperate.ReadCooperateResponse=ReadCooperateResponse;var GetTaskInfoRequest=(function(){function GetTaskInfoRequest(){}return GetTaskInfoRequest}());cooperate.GetTaskInfoRequest=GetTaskInfoRequest;var GetTaskInfoResponse=(function(){function GetTaskInfoResponse(){}return GetTaskInfoResponse}());cooperate.GetTaskInfoResponse=GetTaskInfoResponse;var GetOrderInfoRequest=(function(){function GetOrderInfoRequest(){this.oldOrderUuids=null}return GetOrderInfoRequest}());cooperate.GetOrderInfoRequest=GetOrderInfoRequest;var GetOrderInfoResponse=(function(){function GetOrderInfoResponse(){}return GetOrderInfoResponse}());cooperate.GetOrderInfoResponse=GetOrderInfoResponse})(cooperate=API.cooperate||(API.cooperate={}));var pay;(function(pay){var StartOrderRequest=(function(){function StartOrderRequest(){this.id=0;this.amount=0}return StartOrderRequest}());pay.StartOrderRequest=StartOrderRequest;var StartOrderResponse=(function(){function StartOrderResponse(){this.id=0;this.amount=0;this.orderId=""}return StartOrderResponse}());pay.StartOrderResponse=StartOrderResponse;var FinishOrderRequest=(function(){function FinishOrderRequest(){this.orderId="";this.result=0}return FinishOrderRequest}());pay.FinishOrderRequest=FinishOrderRequest;var FinishOrderResponse=(function(){function FinishOrderResponse(){this.orderId="";this.result=0;this.dropout=null}return FinishOrderResponse}());pay.FinishOrderResponse=FinishOrderResponse})(pay=API.pay||(API.pay={}));var chat;(function(chat){var MessageNoticeRequest=(function(){function MessageNoticeRequest(){this.channel=0}return MessageNoticeRequest}());chat.MessageNoticeRequest=MessageNoticeRequest;var MessageNoticeResponse=(function(){function MessageNoticeResponse(){this.roomId=0;this.newMessage=null}return MessageNoticeResponse}());chat.MessageNoticeResponse=MessageNoticeResponse;var NewMessageRequest=(function(){function NewMessageRequest(){}return NewMessageRequest}());chat.NewMessageRequest=NewMessageRequest;var NewMessageResponse=(function(){function NewMessageResponse(){this.worldInfo=null;this.privateInfo=null;this.companyInfo=null}return NewMessageResponse}());chat.NewMessageResponse=NewMessageResponse;var AllMessageRequest=(function(){function AllMessageRequest(){}return AllMessageRequest}());chat.AllMessageRequest=AllMessageRequest;var AllMessageResponse=(function(){function AllMessageResponse(){this.worldUserInfo=null;this.worldSystemInfo=null;this.privateInfo=null;this.companyInfo=null}return AllMessageResponse}());chat.AllMessageResponse=AllMessageResponse;var SendMessageRequest=(function(){function SendMessageRequest(){this.message="";this.recipient=0;this.roomId=0;this.channel=0}return SendMessageRequest}());chat.SendMessageRequest=SendMessageRequest;var SendMessageResponse=(function(){function SendMessageResponse(){this.roomId=0;this.message=null}return SendMessageResponse}());chat.SendMessageResponse=SendMessageResponse;var PullMessageRequest=(function(){function PullMessageRequest(){this.channel=0;this.roomId=0;this.messageId=0}return PullMessageRequest}());chat.PullMessageRequest=PullMessageRequest;var PullMessageResponse=(function(){function PullMessageResponse(){this.messageInfo=null;this.systemMessageInfo=null;this.channel=0;this.roomId=0}return PullMessageResponse}());chat.PullMessageResponse=PullMessageResponse;var SheieldingRequest=(function(){function SheieldingRequest(){this.userId=0}return SheieldingRequest}());chat.SheieldingRequest=SheieldingRequest;var SheieldingResponse=(function(){function SheieldingResponse(){}return SheieldingResponse}());chat.SheieldingResponse=SheieldingResponse;var ReleaseShieldRequest=(function(){function ReleaseShieldRequest(){this.userId=0}return ReleaseShieldRequest}());chat.ReleaseShieldRequest=ReleaseShieldRequest;var ReleaseShieldResponse=(function(){function ReleaseShieldResponse(){}return ReleaseShieldResponse}());chat.ReleaseShieldResponse=ReleaseShieldResponse;var recruitRequest=(function(){function recruitRequest(){}return recruitRequest}());chat.recruitRequest=recruitRequest;var recruitResponse=(function(){function recruitResponse(){}return recruitResponse}());chat.recruitResponse=recruitResponse})(chat=API.chat||(API.chat={}));var smallTarget;(function(smallTarget){var LevGiftRequest=(function(){function LevGiftRequest(){}return LevGiftRequest}());smallTarget.LevGiftRequest=LevGiftRequest;var LevGiftResponse=(function(){function LevGiftResponse(){this.giftId=0}return LevGiftResponse}());smallTarget.LevGiftResponse=LevGiftResponse;var CupGiftRequest=(function(){function CupGiftRequest(){}return CupGiftRequest}());smallTarget.CupGiftRequest=CupGiftRequest;var CupGiftResponse=(function(){function CupGiftResponse(){this.giftId=0}return CupGiftResponse}());smallTarget.CupGiftResponse=CupGiftResponse;var GetCupMailRequest=(function(){function GetCupMailRequest(){}return GetCupMailRequest}());smallTarget.GetCupMailRequest=GetCupMailRequest;var GetCupMailResponse=(function(){function GetCupMailResponse(){this.giftId=0}return GetCupMailResponse}());smallTarget.GetCupMailResponse=GetCupMailResponse})(smallTarget=API.smallTarget||(API.smallTarget={}));var account;(function(account){var authRequest=(function(){function authRequest(){this.account=""}return authRequest}());account.authRequest=authRequest;var authResponse=(function(){function authResponse(){this.account="";this.token=""}return authResponse}());account.authResponse=authResponse;var loginRequest=(function(){function loginRequest(){this.account="";this.token=""}return loginRequest}());account.loginRequest=loginRequest;var loginResponse=(function(){function loginResponse(){this.jwt="";this.userId=0;this.timestamp=0}return loginResponse}());account.loginResponse=loginResponse;var refreshTokenRequest=(function(){function refreshTokenRequest(){}return refreshTokenRequest}());account.refreshTokenRequest=refreshTokenRequest;var refreshTokenResponse=(function(){function refreshTokenResponse(){this.jwt=""}return refreshTokenResponse}());account.refreshTokenResponse=refreshTokenResponse})(account=API.account||(API.account={}));var ClientGM;(function(ClientGM){var gmTestRequest=(function(){function gmTestRequest(){}return gmTestRequest}());ClientGM.gmTestRequest=gmTestRequest;var gmTestResponse=(function(){function gmTestResponse(){this.num=0}return gmTestResponse}());ClientGM.gmTestResponse=gmTestResponse;var gmUpdateOscarRequest=(function(){function gmUpdateOscarRequest(){}return gmUpdateOscarRequest}());ClientGM.gmUpdateOscarRequest=gmUpdateOscarRequest;var gmUpdateOscarResponse=(function(){function gmUpdateOscarResponse(){}return gmUpdateOscarResponse}());ClientGM.gmUpdateOscarResponse=gmUpdateOscarResponse;var gmPrintMemRequest=(function(){function gmPrintMemRequest(){}return gmPrintMemRequest}());ClientGM.gmPrintMemRequest=gmPrintMemRequest;var gmPrintMemResponse=(function(){function gmPrintMemResponse(){}return gmPrintMemResponse}());ClientGM.gmPrintMemResponse=gmPrintMemResponse;var gmTestLocalStorageSaveRequest=(function(){function gmTestLocalStorageSaveRequest(){}return gmTestLocalStorageSaveRequest}());ClientGM.gmTestLocalStorageSaveRequest=gmTestLocalStorageSaveRequest;var gmTestLocalStorageSaveResponse=(function(){function gmTestLocalStorageSaveResponse(){}return gmTestLocalStorageSaveResponse}());ClientGM.gmTestLocalStorageSaveResponse=gmTestLocalStorageSaveResponse;var gmTestLocalStorageReadRequest=(function(){function gmTestLocalStorageReadRequest(){}return gmTestLocalStorageReadRequest}());ClientGM.gmTestLocalStorageReadRequest=gmTestLocalStorageReadRequest;var gmTestLocalStorageReadResponse=(function(){function gmTestLocalStorageReadResponse(){}return gmTestLocalStorageReadResponse}());ClientGM.gmTestLocalStorageReadResponse=gmTestLocalStorageReadResponse;var gmTestTimerLoopRequest=(function(){function gmTestTimerLoopRequest(){}return gmTestTimerLoopRequest}());ClientGM.gmTestTimerLoopRequest=gmTestTimerLoopRequest;var gmTestTimerLoopResponse=(function(){function gmTestTimerLoopResponse(){}return gmTestTimerLoopResponse}());ClientGM.gmTestTimerLoopResponse=gmTestTimerLoopResponse;var gmTestReloginRequest=(function(){function gmTestReloginRequest(){}return gmTestReloginRequest}());ClientGM.gmTestReloginRequest=gmTestReloginRequest;var gmTestReloginResponse=(function(){function gmTestReloginResponse(){}return gmTestReloginResponse}());ClientGM.gmTestReloginResponse=gmTestReloginResponse;var gmTestRelogin2Request=(function(){function gmTestRelogin2Request(){}return gmTestRelogin2Request}());ClientGM.gmTestRelogin2Request=gmTestRelogin2Request;var gmTestRelogin2Response=(function(){function gmTestRelogin2Response(){}return gmTestRelogin2Response}());ClientGM.gmTestRelogin2Response=gmTestRelogin2Response;var gmTestPrintTotalActiveTweensRequest=(function(){function gmTestPrintTotalActiveTweensRequest(){}return gmTestPrintTotalActiveTweensRequest}());ClientGM.gmTestPrintTotalActiveTweensRequest=gmTestPrintTotalActiveTweensRequest;var gmTestPrintTotalActiveTweensResponse=(function(){function gmTestPrintTotalActiveTweensResponse(){}return gmTestPrintTotalActiveTweensResponse}());ClientGM.gmTestPrintTotalActiveTweensResponse=gmTestPrintTotalActiveTweensResponse;var gmTestKillAlphaTransitionRequest=(function(){function gmTestKillAlphaTransitionRequest(){}return gmTestKillAlphaTransitionRequest}());ClientGM.gmTestKillAlphaTransitionRequest=gmTestKillAlphaTransitionRequest;var gmTestKillAlphaTransitionResponse=(function(){function gmTestKillAlphaTransitionResponse(){}return gmTestKillAlphaTransitionResponse}());ClientGM.gmTestKillAlphaTransitionResponse=gmTestKillAlphaTransitionResponse;var gmPauseRequest=(function(){function gmPauseRequest(){}return gmPauseRequest}());ClientGM.gmPauseRequest=gmPauseRequest;var gmPauseResponse=(function(){function gmPauseResponse(){}return gmPauseResponse}());ClientGM.gmPauseResponse=gmPauseResponse;var gmPauseRebderRequest=(function(){function gmPauseRebderRequest(){}return gmPauseRebderRequest}());ClientGM.gmPauseRebderRequest=gmPauseRebderRequest;var gmPauseRebderResponse=(function(){function gmPauseRebderResponse(){}return gmPauseRebderResponse}());ClientGM.gmPauseRebderResponse=gmPauseRebderResponse;var gmCacheAsRequest=(function(){function gmCacheAsRequest(){}return gmCacheAsRequest}());ClientGM.gmCacheAsRequest=gmCacheAsRequest;var gmCacheAsResponse=(function(){function gmCacheAsResponse(){}return gmCacheAsResponse}());ClientGM.gmCacheAsResponse=gmCacheAsResponse;var gmStopAllTransformRequest=(function(){function gmStopAllTransformRequest(){}return gmStopAllTransformRequest}());ClientGM.gmStopAllTransformRequest=gmStopAllTransformRequest;var gmStopAllTransformResponse=(function(){function gmStopAllTransformResponse(){}return gmStopAllTransformResponse}());ClientGM.gmStopAllTransformResponse=gmStopAllTransformResponse;var gmEnablePrinLoopRequest=(function(){function gmEnablePrinLoopRequest(){}return gmEnablePrinLoopRequest}());ClientGM.gmEnablePrinLoopRequest=gmEnablePrinLoopRequest;var gmEnablePrinLoopResponse=(function(){function gmEnablePrinLoopResponse(){}return gmEnablePrinLoopResponse}());ClientGM.gmEnablePrinLoopResponse=gmEnablePrinLoopResponse})(ClientGM=API.ClientGM||(API.ClientGM={}))})(API=Proto.API||(Proto.API={}))})(Proto||(Proto={}));var Games;(function(Games){var ProtoBaseController=(function(){function ProtoBaseController(){}ProtoBaseController.prototype.send=function(msg,responseRequired,limitTime,moduleName){if(limitTime===void 0){limitTime=true}moduleName=moduleName?moduleName:this.moduleName;Game.proto.sendMsgByModulename(msg,moduleName,responseRequired,limitTime)};ProtoBaseController.prototype.sendByCommand=function(msg,command){Game.proto.sendMsg(msg,command)};return ProtoBaseController}());Games.ProtoBaseController=ProtoBaseController})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.UsrDataHandler=function(msg,ops,uuid){if(!msg){return}console.log("msg.usrState = "+msg.usrState);User.protoUserData=msg;switch(msg.usrState){case Proto.SE.EUsrState.uninit:Game.menu.openTab(Games.MenuId.CreateRole,Games.CreateRoleTabType.Default);break;case Proto.SE.EUsrState.init_actor:case Proto.SE.EUsrState.usual:break;case Proto.SE.EUsrState.frozen:Game.system.alertText(Games.TEXT.ErorAccountFrozen);break;case Proto.SE.EUsrState.dropped:Game.system.alertText(Games.TEXT.ErorAccountDropped);break}Game.time.serverLoginTime=msg.lastLoginTime*1000;Game.time.registerTime=msg.registerTime*1000;Games.ProtoTookManager.getInstance().start()}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.TempDataHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.TaskDataHandler=function(msg,ops,uuid){console.log("任务数据:"+JSON.stringify(msg));if(msg){switch(msg.type){case EAchievementType.daily:Game.moduleModel.mission.setData(msg);break}}switch(ops){case EGameDataOps.remove:Game.moduleModel.task.removeTaskDataByUUid(uuid);break;default:Game.moduleModel.task.addTaskDataByProto(msg);break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.SystemMessageHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.StorySuitDataHandler=function(msg,ops,uuid){switch(ops){case EGameDataOps.remove:Game.moduleModel.story.removeStorySuitData(uuid);break;default:Game.moduleModel.story.addStorySuitByProto(msg);break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.StoryRefreshDataHandler=function(msg,ops,uuid){Game.moduleModel.warData.setRefrushData(msg,false)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.StoryProgressHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.StoryMessageHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.StoryMessageDescHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.StoryDataHandler=function(msg,ops,uuid){switch(ops){case EGameDataOps.remove:Game.moduleModel.story.removeStoryByUUid(uuid);break;default:Game.moduleModel.story.addStoryByProto(msg);break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.StarTaskHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.skillTriggerConditionHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.SkillLevelHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.skillInfoHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.skillEffectInfoHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.shootInfoHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ShardDBObjectHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.SevenAddUpDataHandler=function(msg,ops,uuid){Game.moduleModel.activity.sevenInit(msg,uuid)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ServerListDescHandler=function(msg,ops,uuid){var data=msg.userId}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.SelfRankListDescHandler=function(msg,ops,uuid){Game.moduleModel.rank.UpdateSelfList(msg)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.SecretaryKeyValueHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.SecretaryDataHandler=function(msg,ops,uuid){switch(ops){case EGameDataOps.remove:break;default:Game.moduleModel.secretary.addSecretaryByProto(msg);break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.RoomMemberHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.RoomInfoHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.RankListDataHandler=function(msg,ops,uuid){Game.moduleModel.rank.UpdateRankListData(msg);Game.moduleModel.oscar.UpdateRewardData(msg)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.PushMessageInfoHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ProgressBoxDataHandler=function(msg,ops,uuid){switch(ops){case EGameDataOps.remove:break;default:var data=Game.moduleModel.progressBox.addProgressBoxData(msg);break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.PrivateListInfoHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.PlayerShortDataHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.PlayerOscarDataHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){var playerLevel;Games.ProtoOobHandler.PlayerLevelUpHandler=function(msg,ops,uuid){console.log("PlayerLevelUpHandler = "+msg.old_level+" upgrade "+msg.now_level);Game.moduleModel.playerInfo.enqueuePlayerLevelUpMsg(msg);Game.event.dispatch(GameEventKey.GameEventKey_PlayerLevelUp,msg.old_level,msg.now_level);Games.Static.Instance.onLevelAchieved(msg.now_level)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.PlayerCooperateDataHandler=function(msg,ops,uuid){Game.moduleModel.cooperation.updatePlayerCooperateData(msg,ops,uuid)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.OscarDescHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.OscarDataHandler=function(msg,ops,uuid){Game.moduleModel.oscar.UpdateOscarData(msg)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.OrderItemsHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.OrderDataHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.NoticeHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.NewMessageInfoHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.MovieShortDataHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.MovieLicenceResetTimeDataHandler=function(msg,ops,uuid){Game.moduleModel.warData.licenceData=msg;Game.moduleModel.warData.licenceTimeLeft()}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.MovieDataHandler=function(msg,ops,uuid){if(ops===EGameDataOps.remove){if(Game.moduleModel.warData.moveData&&Game.moduleModel.warData.moveData!==null&&Game.moduleModel.warData.moveData.uuid===msg.uuid){Game.moduleModel.warData.delFimingMove()}for(var i=0;i<Game.moduleModel.warData.movieDataList.length;i++){if(Game.moduleModel.warData.movieDataList[i].uuid===uuid){Game.moduleModel.warData.movieDataList.splice(i,1);break}}Game.moduleModel.warData.endingIncome(uuid)}else{if(msg&&msg!==null){if(Game.moduleModel.warData.moveData&&Game.moduleModel.warData.moveData!==null&&msg.state===EMovieState.contineTransceiver){if(Game.moduleModel.warData.moveData.uuid===msg.uuid){Game.moduleModel.warData.moveJieSuanData=msg}}if(msg.state===EMovieState.contineTransceiver){var have=false;for(var i=0;i<Game.moduleModel.warData.movieDataList.length;i++){if(Game.moduleModel.warData.movieDataList[i].uuid===msg.uuid){Game.moduleModel.warData.movieDataList[i]=msg;have=true;break}}if(!have){Game.moduleModel.warData.movieDataList.push(msg)}Game.moduleModel.warData.movieDataList=Game.moduleModel.warData.movieDataList.sort(function(a,b){return a.startTime-b.startTime});Game.moduleModel.warData.endingIncome();Game.moduleModel.task.clientUpdateMainTaskProgress(Games.MainTaskRequireType.RequireType_13_ChooseFocusPointCity)}else{Game.moduleModel.warData.moveData=msg;if(Game.proto.isNeedReGetLoginGameData){Game.moduleModel.warData.sReGetLoginGameData.dispatch()}Game.event.dispatch(GameEventKey.GameEventKey_FilmStoryStateChange,msg.state)}}}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.MessageInfoHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.MediaVisitDescHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ManageVisitDataHandler=function(msg,ops,uuid){switch(ops){case EGameDataOps.remove:break;default:var data=Game.moduleModel.visit.addVisitData(msg);break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ManageProduceDataHandler=function(msg,ops,uuid){var data=Game.moduleModel.produce.addProduceData(msg,uuid);switch(ops){case EGameDataOps.init:break;case EGameDataOps.add:break;case EGameDataOps.update:break;case EGameDataOps.remove:break;default:break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ManageOrderDataHandler=function(msg,ops,uuid){switch(ops){case EGameDataOps.remove:var data=Game.moduleModel.order.removeOrderData(uuid);if(data){data.dispatch()}break;default:Game.moduleModel.order.addOrderData(msg);break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ManageMeetingDataHandler=function(msg,ops,uuid){switch(ops){case EGameDataOps.remove:break;default:var data=Game.moduleModel.meeting.addMeetingData(msg);break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ManageBusinessDataHandler=function(msg,ops,uuid){switch(ops){case EGameDataOps.remove:break;default:var data=Game.moduleModel.business.addBusinessData(msg);break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.MallItemLimitDataHandler=function(msg,ops,uuid){Game.moduleModel.shop.UpdateGoodsLimit(msg,uuid)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.MailDescHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.MailDataHandler=function(msg,ops,uuid){switch(ops){case EGameDataOps.remove:Game.moduleModel.mail.RemoveMailData(uuid);break;default:Game.moduleModel.mail.UpdateServeMailData(msg);break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.LevelGiftDataHandler=function(msg,ops,uuid){Game.moduleModel.targetPackage.levelGiftData=msg}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ItemDescHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ItemDataHandler=function(msg,ops,uuid){switch(ops){case EGameDataOps.remove:var itemData=Game.moduleModel.item.getItemByUuid(uuid);if(itemData){Game.moduleModel.item.setItemNum(itemData.itemId,0,uuid)}break;default:Game.moduleModel.item.setItemNum(msg.itemId,msg.amount,uuid,msg.createTime);if(Game.config.item.getType(msg.itemId)==14){Game.moduleModel.street.UpdateStreetCup(msg.amount)}break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.GuideDataHandler=function(msg,ops,uuid){switch(ops){case EGameDataOps.remove:break;default:Game.moduleModel.guide.initFinishId(msg.guide,msg.story);break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.GroupMovieListDescHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.GroupListDescHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.GoldExchangeHandler=function(msg,ops,uuid){console.log("兑换次数更新",msg.count);User.goldExchangeCount=msg.count}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.GMMsgLogHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.GetGuideRewardHandler=function(msg,ops,uuid){Game.moduleModel.guide.guideCompleteStatus=msg.staus}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.GameInfoHandler=function(msg,ops,uuid){if(!msg){return}User.info=msg;switch(ops){case EGameDataOps.init:Game.moduleModel.building.initRoomInfo(msg);break;case EGameDataOps.update:break;default:break}if(User.info){gameApplication.setUserInfo(User.account.account,User.info.name)}Game.moduleModel.actor.setup();Game.moduleModel.story.setup();User.sGameInfoUpdate.dispatch();Games.Static.Instance.onRegistation(false);Games.Static.Instance.onloadstart(false);Games.Static.Instance.onUserItemInfo();Games.Static.Instance.onUserStatus()}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.GameInfoExtHandler=function(msg){if(!msg){return}User.infoExt=msg}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.FieldInfoHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.DBObjectHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.DBBaseHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.DanmuItemHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.DanmuDataHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.DailySignHandler=function(msg,ops,uuid){Game.moduleModel.activity.signInit(msg)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.DailyEventItemHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.DailyEventHandler=function(msg,ops,uuid){Game.moduleModel.oscar.UpdateDailyEventData(msg)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.CupPackageHandler=function(msg,ops,uuid){Game.moduleModel.targetPackage.oobCupData(msg)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.CtaskHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.CooperateTaskDataHandler=function(msg,ops,uuid){Game.moduleModel.cooperation.updateCooperateTaskData(msg,ops,uuid)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.CooperateOrderDataHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.CityGainsInfoHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.CityDataHandler=function(msg){Game.moduleModel.market.UpdateCityData(msg)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.BestMovieDescHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.BattleDataHandler=function(msg){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.AutoCooperateDataHandler=function(msg,ops,uuid){Game.moduleModel.cooperation.updateAutoCooperateData(msg,ops,uuid)}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.AttrChangeInfoHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.AssistantInfoHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.AssetsHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ApplyInfoHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ActortExerciseDataHandler=function(msg,ops,uuid){var data=Game.moduleModel.actor.addActorExerciseData(msg,uuid);switch(ops){case EGameDataOps.init:break;case EGameDataOps.add:break;case EGameDataOps.update:break;case EGameDataOps.remove:break;default:break}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ActorSkillEffectHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ActorShortDescHandler=function(msg,ops,uuid){}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.ActorDataHandler=function(msg,ops,uuid){var isAdd=false;var preHide=false;if(Game.moduleModel.actor.hasActor(msg.actorId)==false){isAdd=true}else{var preData=Game.moduleModel.actor.getActor(msg.actorId);if(preData){preHide=preData.hide}}var data=Game.moduleModel.actor.addActorData(msg);switch(ops){case EGameDataOps.init:break;case EGameDataOps.add:break;case EGameDataOps.update:break;case EGameDataOps.remove:break;default:break}console.log("艺人更新：",ops,msg.actorId);if(isAdd){Game.moduleModel.actor.sAddActorList.dispatch(data);Game.moduleModel.task.clientUpdateMainTaskProgress(Games.MainTaskRequireType.RequireType_4_NoseActor)}else{if(preHide!=data.hide){Game.event.dispatch(GameEventKey.GameEventKey_UpdateActorHideInfo,data)}Game.moduleModel.actor.sUpdateActorInfo.dispatch(data);Game.moduleModel.task.clientUpdateMainTaskProgress(Games.MainTaskRequireType.RequireType_3_UpgradeActor)}}})(Games||(Games={}));var Games;(function(Games){Games.ProtoOobHandler.AccountCooperateDataHandler=function(msg,ops,uuid){Game.moduleModel.cooperation.updateAccountCooperateData(msg,ops,uuid)}})(Games||(Games={}));var Games;(function(Games){var TimeHelper=(function(){function TimeHelper(){}TimeHelper.GetServerDateTime=function(time){if(time==null){time=Game.time.serverSeconds}return new Date(time*1000+Game.time.localSubServerTimezone)};TimeHelper.IsWeek=function(time,week){var date=this.GetServerDateTime(time);return date.getDay()==week};TimeHelper.IsSameDay=function(time1,time2){var d1=this.GetServerDateTime(time1);var d2=this.GetServerDateTime(time2);return d1.getFullYear()==d2.getFullYear()&&d1.getMonth()==d2.getMonth()&&d1.getDate()==d2.getDate()};TimeHelper.IsBeyondTimeInSameDay=function(time,h,m,s){if(h===void 0){h=0}if(m===void 0){m=0}if(s===void 0){s=0}return this.BeyondTimeInSameDay(time,h,m,s)<0};TimeHelper.BeyondTimeInSameDay=function(time,h,m,s){if(h===void 0){h=0}if(m===void 0){m=0}if(s===void 0){s=0}if(h==24){h=0;var date_1=this.TimeReformat(h,m,s);return(date_1.getTime()/1000+this.OneDaySeconds)-time}var date=this.TimeReformat(h,m,s);return date.getTime()/1000-time};TimeHelper.SubSecondTimeInDay=function(time,h,m,s){if(h===void 0){h=0}if(m===void 0){m=0}if(s===void 0){s=0}var seconds=this.BeyondTimeInSameDay(time,h,m,s);if(seconds<=0){seconds=seconds+this.OneDaySeconds}return seconds};TimeHelper.NextDayZeroPointSecound=function(){return this.TimeReformat().getTime()/1000+this.OneDaySeconds};TimeHelper.lastHourToReset=function(lastTime,hour,callback){var currSecond=Game.time.serverSeconds;var resetHour=hour;var lastHour=TimeHelper.GetServerDateTime(lastTime).getHours();var nowHour=TimeHelper.GetServerDateTime().getHours();if(currSecond-lastTime>TimeHelper.OneDaySeconds){callback()}else{var isSameDay=TimeHelper.IsSameDay(lastTime,currSecond);if(isSameDay){if(nowHour>=resetHour&&lastHour<resetHour){callback()}}else{if(lastHour<resetHour){callback()}}}};TimeHelper.Log=function(time,name){if(time==null){time=Game.time.serverMilliseconds}if(name==null){name=""}if(Game.time.serverTimezone==""){console.log(">>>>>>>TIME>>>>>>>",time,new Date(time).toLocaleString(),name)}console.log(">>>>>>>TIME>>>>>>>",time,new Date(time).toLocaleString("en-US",{timeZone:Game.time.serverTimezone}),new Date(time).toLocaleString(),name)};TimeHelper.TimeFormat=function(time){var str="";var hours=Math.floor(time/3600);var minutes=Math.floor((time%3600)/60);var seconds=Math.floor(time%60);str+=hours<10?"0"+hours:hours;str+=":"+(minutes<10?"0"+minutes:minutes);str+=":"+(seconds<10?"0"+seconds:seconds);return str};TimeHelper.TimeFormat2=function(time){var str="";var hours=Math.floor(time/3600);var minutes=Math.floor((time%3600)/60);var seconds=Math.floor(time%60);if(hours>0){str+=hours+Games.TEXT.Hour}str+=minutes+Games.TEXT.Minute;str+=seconds+Games.TEXT.Second;return str};TimeHelper.DateTimeFormat=function(time,isHaveYear){if(isHaveYear===void 0){isHaveYear=true}var Dates=this.GetServerDateTime(time);var Year=Dates.getFullYear();var Months=(Dates.getMonth()+1)<10?"0"+(Dates.getMonth()+1):(Dates.getMonth()+1);var Day=Dates.getDate()<10?"0"+Dates.getDate():Dates.getDate();var Hours=Dates.getHours()<10?"0"+Dates.getHours():Dates.getHours();var Minutes=Dates.getMinutes()<10?"0"+Dates.getMinutes():Dates.getMinutes();if(LangManager.Instance.lang==LangType.zh_cn){if(isHaveYear){return Year+"-"+Months+"-"+Day+" "+Hours+":"+Minutes}else{return Months+"-"+Day+" "+Hours+":"+Minutes}}else{if(isHaveYear){return Year+" "+TimeHelper.MonthText[Dates.getMonth()]+" "+Day+", "+Hours+":"+Minutes}else{return TimeHelper.MonthText[Dates.getMonth()]+" "+Day+", "+Hours+":"+Minutes}}};TimeHelper.DateTimeFormat2=function(time){var Dates=this.GetServerDateTime(time);var Year=Dates.getFullYear();var Months=(Dates.getMonth()+1)<10?"0"+(Dates.getMonth()+1):(Dates.getMonth()+1);var Day=Dates.getDate()<10?"0"+Dates.getDate():Dates.getDate();if(LangManager.Instance.lang==LangType.zh_cn){return Year+"-"+Months+"-"+Day}else{return Year+" "+TimeHelper.MonthText[Dates.getMonth()]+" "+Day}};TimeHelper.DateTimeFormat3=function(time){var Dates=this.GetServerDateTime(time);var Months=(Dates.getMonth()+1)<10?"0"+(Dates.getMonth()+1):(Dates.getMonth()+1);var Day=Dates.getDate()<10?"0"+Dates.getDate():Dates.getDate();if(LangManager.Instance.lang==LangType.zh_cn){return Months+"-"+Day}else{return TimeHelper.MonthText[Dates.getMonth()]+" "+Day}};TimeHelper.DateTimeFormat4=function(time){var Dates=this.GetServerDateTime(time);var Hours=Dates.getHours()<10?"0"+Dates.getHours():Dates.getHours();var Minutes=Dates.getMinutes()<10?"0"+Dates.getMinutes():Dates.getMinutes();return Hours+":"+Minutes};TimeHelper.TimeReformat=function(h,m,s){if(h===void 0){h=0}if(m===void 0){m=0}if(s===void 0){s=0}var date=this.GetServerDateTime();date.setHours(h);date.setMinutes(m);date.setSeconds(s);return new Date(date.getTime()-Game.time.localSubServerTimezone)};TimeHelper.TimeReformat1=function(h,m,s){if(h===void 0){h=0}if(m===void 0){m=0}if(s===void 0){s=0}var date=this.TimeReformat(h,m,s);return date.getTime()};TimeHelper.TimeReformat2=function(time){var strTimes=time.split(":");var h,m,s;if(strTimes[0]){h=Number(strTimes[0])||0}if(strTimes[1]){m=Number(strTimes[1])||0}if(strTimes[2]){s=Number(strTimes[2])||0}return this.TimeReformat1(h,m,s)};TimeHelper.TimeFormat3=function(time){var str="";var hours=Math.floor(time/3600);var minutes=Math.floor((time%3600)/60);var seconds=Math.floor(time%60);str+=hours==0?"":"0"+hours;str+=(hours>0?":":"")+(minutes<10?"0"+minutes:minutes);str+=":"+(seconds<10?"0"+seconds:seconds);return str};TimeHelper.TimeFormat4=function(time){var str="";var hours=Math.floor(time/3600);var minutes=Math.floor((time%3600)/60);var seconds=Math.floor(time%60);if(hours>0){str+=hours+Games.TEXT.Hour}if(minutes>0){str+=minutes+Games.TEXT.Minute}str+=seconds+Games.TEXT.Second;return str};TimeHelper.OneDaySeconds=86400;TimeHelper.MonthText=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return TimeHelper}());Games.TimeHelper=TimeHelper})(Games||(Games={}));function toStringArray(txt,separator){if(separator===void 0){separator=/[:,;]/}return txt.split(separator)}function toIntArray(txt,separator){if(separator===void 0){separator=/[:,;]/}var list=[];var arr=toStringArray(txt,separator);for(var i=0;i<arr.length;i++){list.push(parseInt(arr[i]))}return list}function toFloatArray(txt,separator){if(separator===void 0){separator=/[:,;]/}var list=[];var arr=toStringArray(txt,separator);for(var i=0;i<arr.length;i++){list.push(parseFloat(arr[i]))}return list}function toInt(val){return parseInt(val)}function toFloat(val){return parseFloat(val)}function toBoolean(val){if(val){if(isNumber(val)){return val!=0}else{if(isString(val)){return val=="true"||parseInt(val)!=0}}return true}else{return false}}function toBooleanArray(txt,separator){if(separator===void 0){separator=/[:,;]/}var list=[];var arr=toStringArray(txt,separator);for(var i=0;i<arr.length;i++){list.push(toBoolean(arr[i]))}return list}function configCellToArray(txt,separator){if(separator===void 0){separator=/[;]/}return toStringArray(txt,separator)}function csvGetInt(csv,i){return parseInt(csv[i])}function csvGetFloat(csv,i){return parseFloat(csv[i])}function csvGetBoolean(csv,i){return toBoolean(csv[i])}function csvGetString(csv,i){return csv[i]}function firstUpperCase(str){return str.replace(/\b(\w)(\w*)/g,function($0,$1,$2){return $1.toUpperCase()+$2.toLowerCase()})}function format(value){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}try{return value.replace(/{(\d+(:.*)?)}/g,function(match,i){var s=match.split(":");if(s.length>1){i=i[0];match=s[1].replace("}","")}var arg=formatPattern(match,args[i]);return typeof arg!="undefined"&&arg!=null?arg:""})}catch(e){return""}}function formatPattern(match,arg){switch(match){case"L":arg=arg.toLowerCase();break;case"U":arg=arg.toUpperCase();break;default:break}return arg}function isNullOrWhiteSpace(value){try{if(value==null||value=="undefined"){return false}return value.replace(/\s/g,"").length<1}catch(e){return false}}function isStartOrEndWithSpace(s){var index=s.indexOf(" ");var lastIndex=s.lastIndexOf(" ");if(index==0||lastIndex==s.length-1){return true}return false}function isStartOrEndWithNumber(s){var fristChar=s.charAt(0);var lastChar=s.charAt(s.length-1);if(isInt(fristChar)||isInt(lastChar)){return true}return false}function trim(s){return s.replace(/[\r\n]/g,"")}var __NumberUnitText=(function(){function __NumberUnitText(){}__NumberUnitText.B="B";__NumberUnitText.M="M";__NumberUnitText.K="K";return __NumberUnitText}());var __NumberUnitValue=(function(){function __NumberUnitValue(){}__NumberUnitValue.K=1000;__NumberUnitValue.M=1000*1000;__NumberUnitValue.B=1000*1000*1000;return __NumberUnitValue}());function formatNumberUnit(value,fixed){if(fixed===void 0){fixed=1}var str="";if(value>=__NumberUnitValue.B*10){value=value/__NumberUnitValue.B;str=value.toFixed(fixed+1).slice(0,-1)+__NumberUnitText.B}else{if(value>=__NumberUnitValue.M*10){value=value/__NumberUnitValue.M;str=value.toFixed(fixed+1).slice(0,-1)+__NumberUnitText.M}else{if(value>=__NumberUnitValue.K*10){value=value/__NumberUnitValue.K;str=value.toFixed(fixed+1).slice(0,-1)+__NumberUnitText.K}else{str=Math.floor(value)+""}}}var a=str.split(".");var num=parseInt(a[0]);var result=num.toLocaleString("en-US");if(a.length>=2){if(fixed>0){result=result+"."+a[1]}else{result=result+a[1]}}return result}function formatArrayNumberUnit(fmat){var numbs=[];for(var _i=1;_i<arguments.length;_i++){numbs[_i-1]=arguments[_i]}var args=[];for(var index=0;index<numbs.length;index++){var num=numbs[index];args.push(formatNumberUnit(num,num>1000?1:0))}return fmat.format.apply(fmat,args)}function numberToLetter(value,isCapital){if(isCapital===void 0){isCapital=true}if(value<=0){return null}var letter="";value--;if(value>26){return""}if(value<0){return""}var AString=isCapital?"A":"a";letter=String.fromCharCode(value+AString.charCodeAt(0));return letter}function getStringLength(str){var realLength=0,len=str.length,charCode=-1;for(var i=0;i<len;i++){charCode=str.charCodeAt(i);if(charCode>=0&&charCode<=128){realLength+=1}else{realLength+=2}}return realLength}var Queue=(function(){function Queue(){this.items=[]}Queue.prototype.enqueue=function(element){this.items.push(element)};Queue.prototype.dequeue=function(){return this.items.shift()};Queue.prototype.remove=function(){this.items=[]};Queue.prototype.front=function(){return this.items[0]};Queue.prototype.isEmpty=function(){return this.items.length===0};Queue.prototype.length=function(){return this.items.length};Queue.prototype.toString=function(){this.items.forEach(function(item,index){console.log(index+1+":"+item)})};return Queue}());var Pool=(function(){function Pool(){}Pool.getItem=function(cls){var name=cls.name;return laya.utils.Pool.getItemByClass(name,cls)};Pool.recover=function(item){if(!item){return}var name=getClassName(item);laya.utils.Pool.recover(name,item)};return Pool}());var MathDesign=(function(){function MathDesign(){}MathDesign.calcActorExperciseDerateTime=function(){var roomInfo=Game.moduleModel.building.getRoomByType(Games.RoomType.Training);var roomCfg=Game.config.buildingLevel.getConfig(roomInfo.id);var roomEffects=roomCfg.effect_id;for(var _i=0,roomEffects_1=roomEffects;_i<roomEffects_1.length;_i++){var effectId=roomEffects_1[_i];var roomEffectCfg=Game.config.buildingEffect.getConfig(effectId);if(roomEffectCfg.effect==25){return roomEffectCfg.par1}}return 0};MathDesign.calcActorExperciseExp=function(){var baseExperciseExpVal=Game.config.global.getConfig(GlobalKey.Actor_Train_Exp).value;var secretaryAddExpPer=Game.moduleModel.secretary.skillExpRate/100;var roomLevelAddExpPer=this.getRoomLevelAddExp()/100;return Math.floor((baseExperciseExpVal*(1+secretaryAddExpPer))*(1+roomLevelAddExpPer))};MathDesign.getRoomLevelAddExp=function(){var roomInfo=Game.moduleModel.building.getRoomByType(Games.RoomType.Training);var roomCfg=Game.config.buildingLevel.getConfig(roomInfo.id);var roomEffects=roomCfg.effect_id;for(var _i=0,roomEffects_2=roomEffects;_i<roomEffects_2.length;_i++){var effectId=roomEffects_2[_i];var roomEffectCfg=Game.config.buildingEffect.getConfig(effectId);if(roomEffectCfg.effect==24){return roomEffectCfg.par1}}return 0};return MathDesign}());var Games;(function(Games){var ItemHelper=(function(){function ItemHelper(){}ItemHelper.getItemNum=function(itemId){return Game.moduleModel.item.getItemNum(itemId)};ItemHelper.getItemName=function(itemId){var cfg=Game.config.item.getConfig(itemId);if(cfg){return cfg.name}return""};ItemHelper.getItemNumFormat=function(itemId){return formatNumberUnit(Game.moduleModel.item.getItemNum(itemId))};ItemHelper.getItemIcon=function(itemId){var cfg=Game.config.item.getConfig(itemId);if(cfg){return cfg.iconUrl}return""};ItemHelper.checkItemEnough=function(item){var id=item.itemId;var needNum=item.itemNum;var enough=ItemHelper.checkItemEnough2(id,needNum);return enough};ItemHelper.checkItemEnough2=function(id,needNum){var curNum=Game.moduleModel.item.getItemNum(id);var enough=true;if(curNum<needNum){enough=false}return enough};ItemHelper.checkItemEnough3=function(items){var enough=true;if(items.length==2){var id=items[0];var num=items[1];enough=ItemHelper.checkItemEnough2(id,num)}return enough};ItemHelper.checkItemsEnough=function(items){var enough=true;for(var index=0;index<items.length;index++){var element=items[index];enough=ItemHelper.checkItemEnough(element);if(enough==false){break}}return enough};ItemHelper.getItemNotEnough=function(items){var noEnoughId=0;var enough=true;for(var index=0;index<items.length;index++){var element=items[index];enough=ItemHelper.checkItemEnough(element);if(enough==false){return element}}return null};ItemHelper.getItemNotEnoughId=function(items){var noEnoughId=0;var enough=true;for(var index=0;index<items.length;index++){var element=items[index];enough=ItemHelper.checkItemEnough(element);if(enough==false){noEnoughId=element.itemId}}return noEnoughId};ItemHelper.getItemNotEnoughNum=function(items){var noEnoughNum=0;var enough=true;for(var index=0;index<items.length;index++){var element=items[index];enough=ItemHelper.checkItemEnough(element);if(enough==false){noEnoughNum=element.itemNum}}return noEnoughNum};ItemHelper.createDtItem=function(cost){var dtCost=new DTItemNum();if(cost.length===2){dtCost.itemId=cost[0];dtCost.itemNum=cost[1]}return dtCost};return ItemHelper}());Games.ItemHelper=ItemHelper})(Games||(Games={}));var Games;(function(Games){var GamePools=(function(){function GamePools(){this.trailPool=new Games.TrailEmitterPool();this.talkBoxPool=new Games.TalkBoxPool();this.componentPool=new Games.ComponentPool()}return GamePools}());Games.GamePools=GamePools})(Games||(Games={}));function getRandomRoleName(){var surnames=Game.config.randomSurname.getConfigList();var names=Game.config.randomName.getConfigList();return names[Random.range(0,names.length)].text+" "+surnames[Random.range(0,surnames.length)].text}function validateRoleName(name,minLength,maxLenght){if(minLength===void 0){minLength=4}if(maxLenght===void 0){maxLenght=18}if(isNullOrEmpty(name)){Game.system.toastText(Games.TEXT.ErrorNameEmpty);return}var length=getStringLength(name);if(length<minLength||length>maxLenght){Game.system.toastMsg(MsgKey.account_name_long,minLength,maxLenght);return false}if(/^[0-9.]*$/.test(name)){Game.system.toastText(Game.config.msg.getTxt(MsgKey.account_name_num));return false}if(isStartOrEndWithNumber(name)){Game.system.toastText(TEXT.SystemDisAllowHaveStartLastNumber);return false}if(isNumber(name)){Game.system.toastText(Game.config.msg.getTxt(MsgKey.account_name_num));return false}if(isStartOrEndWithSpace(name)){Game.system.toastText(Game.config.msg.getTxt(MsgKey.account_name_space));return false}if(!validateBlockWords(name,true)){return false}return true}function validateOtherName(name,maxLength){if(maxLength===void 0){maxLength=18}var minLength=4;if(isNullOrEmpty(name)){Game.system.toastText(Games.TEXT.ErrorNameEmpty);return}var length=getStringLength(name);if(length<minLength||length>maxLength){Game.system.toastMsg(MsgKey.account_name_long,minLength,maxLength);return false}if(isStartOrEndWithNumber(name)){Game.system.toastText(TEXT.SystemDisAllowHaveStartLastNumber);return false}if(isNumber(name)){Game.system.toastText(Game.config.msg.getTxt(MsgKey.account_name_num));return false}if(isStartOrEndWithSpace(name)){Game.system.toastText(Game.config.msg.getTxt(MsgKey.account_name_space));return false}if(!validateBlockWords(name,true)){return false}return true}function validateServerName(name,minLength,maxLenght){if(minLength===void 0){minLength=4}if(maxLenght===void 0){maxLenght=18}if(isNullOrEmpty(name)){Game.system.toastText(Games.TEXT.ErrorNameEmpty);return}var length=getStringLength(name);if(length<minLength||length>maxLenght){Game.system.toastText(Games.TEXT.OscarDanmuLong);return false}if(isStartOrEndWithSpace(name)){Game.system.toastText(Games.TEXT.OscarDanmuSpace);return false}if(!validateBlockWords(name)){Game.system.toastText(Games.TEXT.OscarDanmuBlockword);return false}return true}function validateDanmu(name,minLength,maxLenght){if(minLength===void 0){minLength=4}if(maxLenght===void 0){maxLenght=100}if(isNullOrEmpty(name)){Game.system.toastText(Games.TEXT.ErrorContentEmpty);return}var length=getStringLength(name);if(length<minLength||length>maxLenght){Game.system.toastText(Games.TEXT.OscarDanmuLong);return false}if(isStartOrEndWithSpace(name)){Game.system.toastText(Games.TEXT.OscarDanmuSpace);return false}if(!validateBlockWords(name)){Game.system.toastText(Games.TEXT.OscarDanmuBlockword);return false}return true}function validateBlockWords(name,alert){var blockWords1=Game.config.blockWords.wordList;var validate=__validateBlockWords(name,blockWords1);if(!validate){if(alert){Game.system.toastText(Game.config.msg.getTxt(MsgKey.account_name_blockword))}return false}var blockWords2=Game.config.blockWordsII.wordList;validate=__validateBlockWords(name,blockWords2,true);if(!validate){if(alert){Game.system.toastText(Game.config.msg.getTxt(MsgKey.account_name_blockword))}return false}return true}function __validateBlockWords(sources,blockWordList,wholeWords){var n=blockWordList.length;for(var i=0;i<n;i++){if(wholeWords){if(sources.toLowerCase()==blockWordList[i].toLowerCase()){return false}}else{if(sources.toLowerCase().indexOf(blockWordList[i].toLowerCase())!=-1){return false}}}return true}function validateSendMsgBoard(content,maxLenght){if(maxLenght===void 0){maxLenght=50}if(isNullOrEmpty(content)){Game.system.toastText(Games.TEXT.StoryContentEmpty);return}var length=getStringLength(content);if(length<1||length>maxLenght){Game.system.toastText(Games.TEXT.StoryContentToMax);return false}if(isStartOrEndWithSpace(content)){Game.system.toastText(Games.TEXT.StoryContentSpace);return false}if(!validateBlockWords(content)){Game.system.toastText(Games.TEXT.StoryContentBlockWord);return false}return true}function addSkillExp(actorId,amount){Game.protosender.test.AddSkillExp(actorId,amount)}function AddStoryProgress(id,index){var uuid=Game.moduleModel.story.getStoryData(id).uuid}var dark=[new Laya.ColorFilter([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0])];var gold=[new Laya.ColorFilter([0.3,0.3,0.3,0.3,0.3,0.3,0.1,0.1,0.3,0.3,0,0,0,0,0,0,0,0,1,0])];function setDark(target){target.displayObject.filters=dark}function setGold(target){target.displayObject.filters=gold}function clearFilter(target){target.displayObject.filters=[]}function ItemDesc2DTItemNum(protoItem){var item=new DTItemNum();item.id=protoItem.itemId;item.itemId=protoItem.itemId;item.itemNum=protoItem.amount;return item}function ItemDescList2DTItemNumList(protoItems){var list=[];for(var _i=0,protoItems_1=protoItems;_i<protoItems_1.length;_i++){var item=protoItems_1[_i];list.push(ItemDesc2DTItemNum(item))}return list}function getAssetItemKey(item){return item.type+" "+item.url}function addItem(itemId,itemNum){Game.protosender.test.AddItem(itemId,itemNum)}function addActor(actorId,name){}function addFans(amount){Game.protosender.test.AddFans(amount)}function setBlockLevel(level){Game.protosender.test.SetBlockLevel(level)}function getHeadPortrait(sex,headPortrait){if(headPortrait==0){if(sex==1101||sex==2002){headPortrait=1001}else{headPortrait=1101}}return headPortrait}var customStrList=["{fans}","{level}","{name}","{city}","{actor}"];function contentFormatCustom(value){var t;for(var index=0;index<customStrList.length;index++){var element=customStrList[index];var ind=value.indexOf(element);if(ind>=0){switch(element){case"{fans}":t=Game.moduleModel.item.getItemNum(EItemId.fans);break;case"{level}":t=User.info.level;break;case"{name}":t=User.info.name;break;case"{city}":t=User.info.level;break;case"{actor}":if(User.info.initActorId&&User.info.initActorId>0){t=Game.moduleModel.actor.getActor(User.info.initActorId).name}break;default:break}value=value.replace(element,t)}}return value}function contentFormatCustomId(value){var t;if(isNumber(value)){return value}for(var index=0;index<customStrList.length;index++){var element=customStrList[index];var ind=value.indexOf(element);if(ind>=0){switch(element){case"{name}":t=User.info.sex==Proto.SE.EUserSex.boy?9996:9997;break;case"{actor}":if(User.info.initActorId&&User.info.initActorId>0){t=Game.moduleModel.actor.getActor(User.info.initActorId).config.avatarConfig.id}break;default:break}value=value.replace(element,t)}}return toInt(value)}var DictionaryList=(function(){function DictionaryList(){this.list=[];this.dict={};this._count=0}Object.defineProperty(DictionaryList.prototype,"count",{get:function(){return this._count},enumerable:true,configurable:true});DictionaryList.prototype.add=function(key,val){if(this.hasKey(key)===false){this._count++;this.list.push(val)}this.dict[key]=val};DictionaryList.prototype.set=function(key,val){if(this.hasKey(key)===false){this._count++;this.list.push(val)}this.dict[key]=val};DictionaryList.prototype.remove=function(key){if(this.hasKey(key)){this._count--;var value=this.getValue(key);var index=this.list.indexOf(value);if(index!=-1){this.list.splice(index,1)}}delete this.dict[key]};DictionaryList.prototype.hasKey=function(key){return this.dict[key]!=undefined};DictionaryList.prototype.getValue=function(key){return this.dict[key]};DictionaryList.prototype.getValueOrDefault=function(key,_default){if(this.hasKey(key)){return this.getValue(key)}else{return _default}};DictionaryList.prototype.__getDict=function(){return this.dict};DictionaryList.prototype.getValues=function(){return this.list};DictionaryList.prototype.getKeys=function(){var list=[];for(var key in this.dict){list.push(key)}return list};DictionaryList.prototype.clear=function(){this.list.length=0;this.dict={};this._count=0};return DictionaryList}());var CallbackHandler=(function(){function CallbackHandler(){}CallbackHandler.prototype.apply=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}this.handler.apply(this.self,args)};CallbackHandler.prototype.equals=function(handler,self){return this.handler==handler&&this.self==self};return CallbackHandler}());Array.prototype.findOne=function(fun,thisArg){var len=this.length;if(typeof fun!="function"){throw new TypeError()}for(var i=0;i<len;i++){if(fun.call(thisArg,this[i])){return this[i]}}return null};Array.prototype.find=function(fun,thisArg){var len=this.length;if(typeof fun!="function"){throw new TypeError()}for(var i=0;i<len;i++){if(fun.call(thisArg,this[i],i,this)){return this[i]}}return null};Array.prototype.findIndex=function(fun,thisArg){var len=this.length;if(typeof fun!="function"){throw new TypeError()}for(var i=0;i<len;i++){if(fun.call(thisArg,this[i])){return i}}return -1};var Emitter=(function(){function Emitter(isDispatchName){if(isDispatchName===void 0){isDispatchName=false}this.listeners={};this.isDispatchName=false;this.isDispatchName=isDispatchName}Emitter.prototype.add=function(name,callback,context){var hasRegistered=false;var observers=this.listeners[name];if(!observers){this.listeners[name]=[]}else{var length_1=observers.length;for(var i=0;i<length_1;i++){var observer=observers[i];if(observer.comparAll(callback,context)){hasRegistered=true}}}if(!hasRegistered){this.listeners[name].push(new Observer(callback,context))}};Emitter.prototype.remove=function(name,callback,context){var observers=this.listeners[name];if(!observers){return}var length=observers.length;for(var i=0;i<length;i++){var observer=observers[i];if(observer.compar(context)){observers.splice(i,1);break}}if(observers.length==0){delete this.listeners[name]}};Emitter.prototype.dispatch=function(name){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}var observers=this.listeners[name];if(!observers){return}var length=observers.length;for(var i=length-1;i>=0;i--){var observer=observers[i];if(this.isDispatchName){observer.notify.apply(observer,[name].concat(args))}else{observer.notify.apply(observer,args)}}};return Emitter}());var Observer=(function(){function Observer(callback,context){this.callback=null;this.context=null;var self=this;self.callback=callback;self.context=context}Observer.prototype.notify=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var self=this;(_a=self.callback).call.apply(_a,[self.context].concat(args));var _a};Observer.prototype.compar=function(context){return context==this.context};Observer.prototype.comparAll=function(callback,context){return callback==this.callback&&context==this.context};return Observer}());var Games;(function(Games){var DebugTimerLoop=(function(){function DebugTimerLoop(){this.enable=true;this.callNum=0;this.costTime=0;this.costTimeToal=0}Object.defineProperty(DebugTimerLoop.prototype,"evaluateCost",{get:function(){if(this.callNum>0){return Math.round(this.costTimeToal/this.callNum)}return this.costTime},enumerable:true,configurable:true});DebugTimerLoop.prototype.toString=function(){return this.key+"  callTime:"+this.callTime+" callNum:"+this.callNum+"  costTime:"+this.costTime+"  costTimeToal:"+this.costTimeToal+"  evaluateCost:"+this.evaluateCost};return DebugTimerLoop}());Games.DebugTimerLoop=DebugTimerLoop;var DebugTimerLoopManager=(function(){function DebugTimerLoopManager(){this.dict=new Dictionary()}Object.defineProperty(DebugTimerLoopManager,"Instance",{get:function(){if(!DebugTimerLoopManager._Instance){DebugTimerLoopManager._Instance=new DebugTimerLoopManager()}return DebugTimerLoopManager._Instance},enumerable:true,configurable:true});DebugTimerLoopManager.onCallerRun=function(caller,method){return DebugTimerLoopManager.Instance.addCaller(caller,method)};DebugTimerLoopManager.setCallerCost=function(caller,method,cost){return DebugTimerLoopManager.Instance.addCost(caller,method,cost)};DebugTimerLoopManager.onCall=function(key){return DebugTimerLoopManager.Instance.add(key)};DebugTimerLoopManager.clear=function(){DebugTimerLoopManager.Instance.dict.clear()};DebugTimerLoopManager.prototype.add=function(key){var item=this.dict.getValue(key);if(!item){item=new DebugTimerLoop();item.key=key;item.beginTime=Game.time.localTime;this.dict.add(item.key,item)}item.callTime=Game.time.localTime;return item.enable};DebugTimerLoopManager.prototype.addCaller=function(caller,method){var key=caller?getClassName(caller)+"."+getFunctionName(method):getFunctionName(method);var item=this.dict.getValue(key);if(!item){item=new DebugTimerLoop();item.caller=caller;item.method=method;item.key=key;item.beginTime=new Date().getTime();this.dict.add(item.key,item)}item.callTime=new Date().getTime();return item.enable};DebugTimerLoopManager.prototype.addCost=function(caller,method,cost){var key=caller?getClassName(caller)+"."+getFunctionName(method):getFunctionName(method);var item=this.dict.getValue(key);if(item){item.costTime=cost;item.costTimeToal+=cost;item.callNum++}};DebugTimerLoopManager.enable=false;return DebugTimerLoopManager}());Games.DebugTimerLoopManager=DebugTimerLoopManager;var GMMenuType=(function(){function GMMenuType(){}GMMenuType.ADD="添加";GMMenuType.CMD="命令";GMMenuType.SELECTSERVER="选择服务器";GMMenuType.LOG="日志";GMMenuType.MODULE="模块";GMMenuType.DisplayTree="显示树";GMMenuType.TimeLoop="TimeLoop";GMMenuType.Tick="Tick";GMMenuType.list=[GMMenuType.ADD,GMMenuType.CMD,GMMenuType.SELECTSERVER,GMMenuType.MODULE,GMMenuType.LOG,GMMenuType.DisplayTree,GMMenuType.TimeLoop,GMMenuType.Tick];return GMMenuType}());Games.GMMenuType=GMMenuType;var GMDeubgMenuType=(function(){function GMDeubgMenuType(){}GMDeubgMenuType.getLogType=function(menu){switch(menu){case GMDeubgMenuType.Log:return LogType.Log;case GMDeubgMenuType.Warn:return LogType.Warn;case GMDeubgMenuType.Error:return LogType.Error}};GMDeubgMenuType.getLogTypes=function(menus){var types=[];for(var i=0;i<menus.length;i++){types.push(GMDeubgMenuType.getLogType(menus[i]))}return types};GMDeubgMenuType.Log="Log";GMDeubgMenuType.Warn="Warn";GMDeubgMenuType.Error="Error";GMDeubgMenuType.list=[GMDeubgMenuType.Log,GMDeubgMenuType.Warn,GMDeubgMenuType.Error];return GMDeubgMenuType}());Games.GMDeubgMenuType=GMDeubgMenuType;var GMAddType=(function(){function GMAddType(){}GMAddType.getItemTypes=function(itemAddType){var types=[];switch(itemAddType){case GMAddType.Item_Money:types.push(Proto.SE.EItemCategory.diamond);types.push(Proto.SE.EItemCategory.gold);types.push(Proto.SE.EItemCategory.dollar);types.push(10);types.push(11);types.push(12);types.push(13);break;case GMAddType.Item_Other:types.push(Proto.SE.EItemCategory.other);break;case GMAddType.Item_Normal:types.push(Proto.SE.EItemCategory.normal);break;case GMAddType.Item_Asset:types.push(Proto.SE.EItemCategory.assets);break;case GMAddType.Item_Contract:types.push(Proto.SE.EItemCategory.contract);break;case GMAddType.Item_Giftbag:types.push(Proto.SE.EItemCategory.giftbag);break;case GMAddType.Item_Build:types.push(9);break}return types};GMAddType.Actor="艺人";GMAddType.Story="剧本";GMAddType.Item="物品--所有";GMAddType.Item_Money="物品--货币";GMAddType.Item_Other="物品--周边产品";GMAddType.Item_Normal="物品--普通道具";GMAddType.Item_Asset="物品--资产";GMAddType.Item_Contract="物品--合同";GMAddType.Item_Giftbag="物品--礼包";GMAddType.Item_Build="物品--建筑材料";GMAddType.list=[GMAddType.Actor,GMAddType.Story,GMAddType.Item,GMAddType.Item_Money,GMAddType.Item_Other,GMAddType.Item_Normal,GMAddType.Item_Asset,GMAddType.Item_Contract,GMAddType.Item_Giftbag,GMAddType.Item_Build];return GMAddType}());Games.GMAddType=GMAddType;var GMCmdSubMenuType=(function(){function GMCmdSubMenuType(){}GMCmdSubMenuType.Server="服务器";GMCmdSubMenuType.Client="客户端";GMCmdSubMenuType.HISTORY="最近";GMCmdSubMenuType.list=[GMCmdSubMenuType.Server,GMCmdSubMenuType.Client,GMCmdSubMenuType.HISTORY];return GMCmdSubMenuType}());Games.GMCmdSubMenuType=GMCmdSubMenuType;var GMCmdList=(function(){function GMCmdList(name){this.list=[];this.dict=new Dictionary();this.name=name}GMCmdList.prototype.setList=function(arr,isClient){if(isClient===void 0){isClient=false}this.list=arr;for(var i=0;i<arr.length;i++){var item=arr[i];item.title=item.name+" ("+item.cnname+")";item.datatxt=JSON.stringify(item.data);item.isClient=isClient;this.dict.add(item.name,item)}this.read()};GMCmdList.prototype.add=function(item){this.list.push(item)};GMCmdList.prototype.clear=function(){this.list=[];this.dict.clear();this.save()};GMCmdList.prototype.clearCache=function(){Game.localStorage.removeItem(this.lsKey,true)};Object.defineProperty(GMCmdList.prototype,"lsKey",{get:function(){return this.name},enumerable:true,configurable:true});GMCmdList.prototype.save=function(){Game.localStorage.setJSON(this.lsKey,this.list,true)};GMCmdList.prototype.read=function(){var list=Game.localStorage.getJSON(this.lsKey,true);if(!list){return}for(var i=0;i<list.length;i++){var item=list[i];var pre_1=this.dict.getValue(item.name);if(pre_1){pre_1.datatxt=item.datatxt}else{this.add(item)}}};return GMCmdList}());Games.GMCmdList=GMCmdList;var GM=(function(){function GM(){}Object.defineProperty(GM,"serverCmdUrl",{get:function(){if(BrowserDetect.isLocal){return"ServerGM.json"}else{return GM._serverCmdUrl}},enumerable:true,configurable:true});Object.defineProperty(GM,"clientCmdUrl",{get:function(){if(BrowserDetect.isLocal){return"ClientGM.json"}else{return GM._clientCmdUrl}},enumerable:true,configurable:true});GM.sendCmd=function(cmdName,cmdData,isAddHostor){if(isAddHostor===void 0){isAddHostor=false}var cmdItem;if(isString(cmdData)){cmdItem={cnname:"",name:cmdName,data:JSON.parse(cmdData),datatxt:cmdData,isClient:false};cmdItem.isClient=cmdItem.data.isClient==true;cmdItem.cnname=cmdItem.data.cnname?cmdItem.data.cnname:"";var cmdList=cmdItem.isClient?GM.clientCmd:GM.serverCmd;var cmdSetting=cmdList.dict.getValue(cmdName);if(cmdSetting){cmdItem.cnname=cmdSetting.cnname;cmdItem.title=cmdSetting.title}else{cmdItem.title=cmdItem.cnname?cmdItem.name+" ("+cmdItem.cnname+")":cmdItem.name}}else{cmdItem=cmdData;if(cmdItem.isClient){GM.clientCmd.save()}else{GM.serverCmd.save()}}if(isAddHostor){GM.historCmd.add(cmdItem);GM.historCmd.save()}if(cmdItem.isClient){var fun=Game.protohandler.ClientGM[cmdName];fun.apply(cmdItem.data,Game.protohandler.ClientGM)}else{Game.proto.sendMsg(cmdItem.data,"test/"+cmdName)}};Object.defineProperty(GM,"window",{get:function(){if(!GM._window){GM._window=new Games.GMWindow()}return GM._window},enumerable:true,configurable:true});Object.defineProperty(GM,"visiable",{get:function(){if(GM._window){if(GM._window.parent){return true}else{return false}}return GM._visiable},set:function(value){if(value){GM.window.show()}else{if(GM._window){GM.window.hide()}}GM._visiable=value},enumerable:true,configurable:true});GM._serverCmdUrl="http://mbqb.ihaiu.com/GamePF/ServerGM.json";GM._clientCmdUrl="http://mbqb.ihaiu.com/GamePF/ClientGM.json";GM.serverCmd=new GMCmdList("ServerCmd");GM.clientCmd=new GMCmdList("ClientCmd");GM.historCmd=new GMCmdList("HistorCmd");return GM}());Games.GM=GM})(Games||(Games={}));var RoomInfo=Games.RoomInfo;var RoomType=Games.RoomType;var FloorInfo=Games.FloorInfo;var AvatarManager=Games.AvatarManager;var AvatarInfo=Games.AvatarInfo;var CUnit=Games.UnitAgent;var UnitModel=Games.UnitModel;var ItemHelper=Games.ItemHelper;var TimeHelper=Games.TimeHelper;var MeetingPanelType=Games.MeetingPanelType;var MeetingRewardType=Games.MeetingRewardType;var MeetingMarkUpType=Games.MeetingMarkUpType;var MeetingResultType=Games.MeetingResultType;var Signal=signals.Signal;var TypedSignal=signals.TypedSignal;var Bindable=signals.Bindable;var GuideDialogType=Games.GuideDialogType;var Games;(function(Games){var GamePreload=(function(){function GamePreload(){this.packageConfigs=[];this.assets=[]}GamePreload.prototype.addAssetForFguiPackagename=function(packagename){this.assets.push({url:packagename,type:Games.AssetItemType.FguiPackage})};GamePreload.prototype.addAssetForFguiComponent=function(fguiCom){var names=fguiCom.DependPackages;for(var i=0;i<names.length;i++){this.addAssetForFguiPackagename(names[i])}};GamePreload.prototype.addDynmicAssetForAvatarAll=function(avatarConfig){avatarConfig.getAllAssset(this.assets)};GamePreload.prototype.generate=function(){this.addAssetForFguiPackagename(Games.GuiPackageNames.Login);this.addAssetForFguiPackagename(Games.GuiPackageNames.Common);this.addAssetForFguiPackagename(Games.GuiPackageNames.Sound);this.addAssetForFguiPackagename(Games.GuiPackageNames.Cooperation);this.addAssetForFguiPackagename(Games.GuiPackageNames.Fx);this.addAssetForFguiComponent(fgui.MainUI.MainUI);this.addAssetForFguiComponent(fgui.Building.Main);this.addAssetForFguiComponent(fgui.MainUI.VisitMainTopUI);this.addAssetForFguiComponent(fgui.PfSkin.ArtistUI);var dict=new Dictionary();var packageDict=new Dictionary();for(var i=0;i<this.assets.length;i++){var item=this.assets[i];var packageConfig=null;switch(item.type){case Games.AssetItemType.FguiPackage:packageConfig=Game.guiRes.getconfig(item.url);break;case Games.AssetItemType.FspritePackage:packageConfig=Game.spriteRes.getconfig(item.url);break}if(packageConfig){if(!packageDict.hasKey(packageConfig.packagePath)){packageDict.add(packageConfig.packagePath,packageConfig)}var packageRes=packageConfig.loadList;for(var _i=0,packageRes_1=packageRes;_i<packageRes_1.length;_i++){var packageItem=packageRes_1[_i];if(!dict.hasKey(packageItem.url)){var mitem={url:packageItem.url,type:Games.AssetHelper.layaLoaderType2AssetItemType(packageItem.type)};dict.add(mitem.url,mitem)}}}else{if(!dict.hasKey(item.url)){dict.add(item.url,item)}}}this.list=dict.getValues();this.packageConfigs=packageDict.getValues()};GamePreload.prototype.begin=function(onObj,onCompleteFun){this.onObj=onObj;this.onCompleteFun=onCompleteFun;this.generate();console.log("预加载资源数量："+this.list.length);Game.asset.loadList(this.list,this,this.onEnd,this.onProgress)};GamePreload.prototype.onProgress=function(rate,index,count,item){gameLaunchLoding.onLoadedFgui(index,count)};GamePreload.prototype.onEnd=function(){for(var _i=0,_a=this.packageConfigs;_i<_a.length;_i++){var packageConfig=_a[_i];Games.GuiSetting.addPackage(packageConfig.packagePath)}if(this.onCompleteFun){if(this.onObj){this.onCompleteFun.apply(this.onObj)}else{this.onCompleteFun()}}};return GamePreload}());Games.GamePreload=GamePreload})(Games||(Games={}));var Games;(function(Games){var WarLoadPic=(function(){function WarLoadPic(){}WarLoadPic.setIcon=function(loader,val){if(val===0){loader.visible=false}else{var propertyConfig=Game.config.property.getConfig(val);if(propertyConfig&&propertyConfig.icon&&propertyConfig.icon>0){loader.icon=Game.config.avatar.getConfig(propertyConfig.icon).iconUrl}else{loader.visible=false}}};WarLoadPic.getActorIcon=function(avatar){return Game.config.avatar.getConfig(avatar).bodyIconUrl};WarLoadPic.getItemIcon=function(itemId){var conf=Game.config.item.getConfig(itemId).icon;return Game.config.avatar.getConfig(conf).iconUrl};WarLoadPic.getAvatarIcon=function(avatarId){return Game.config.avatar.getConfig(avatarId).iconUrl};WarLoadPic.getActorTypeIcon=function(type){var property=Game.config.property.getConfig(type);return Game.config.avatar.getConfig(property.icon).iconUrl};return WarLoadPic}());Games.WarLoadPic=WarLoadPic})(Games||(Games={}));var Games;(function(Games){var RoomTypeClass=(function(){function RoomTypeClass(type,newClass){this.type=type;this.newClass=newClass}return RoomTypeClass}());Games.RoomTypeClass=RoomTypeClass;var BuildingProcessMgr=(function(){function BuildingProcessMgr(){}BuildingProcessMgr.get=function(roomType){return this.dict.getValue(roomType)};BuildingProcessMgr.add=function(roomType,newClass){this.dict.add(roomType,new RoomTypeClass(roomType,newClass))};BuildingProcessMgr.install=function(){this.add(Games.RoomType.Cinema,Games.BuildingProcess1);this.add(Games.RoomType.Shoot,Games.BuildingProcess2);this.add(Games.RoomType.Actor,Games.BuildingProcess3);this.add(Games.RoomType.Reception,Games.BuildingProcess10);this.add(Games.RoomType.Meeting,Games.BuildingProcess11);this.add(Games.RoomType.Finance,Games.BuildingProcess12);this.add(Games.RoomType.Training,Games.BuildingProcess13)};BuildingProcessMgr.dict=new Dictionary();return BuildingProcessMgr}());Games.BuildingProcessMgr=BuildingProcessMgr})(Games||(Games={}));var Games;(function(Games){var BaseBuildingProcess=(function(){function BaseBuildingProcess(){}BaseBuildingProcess.prototype.init=function(refRoom){this.refRoom=refRoom;this.roomInfo=refRoom.roomInfo;this.onInit();this.onProcess()};BaseBuildingProcess.prototype.onInit=function(){};BaseBuildingProcess.prototype.onProcess=function(){};BaseBuildingProcess.prototype.dispose=function(){};BaseBuildingProcess.prototype.isSelfRoom=function(roomType){return this.roomInfo.type==roomType};return BaseBuildingProcess}());Games.BaseBuildingProcess=BaseBuildingProcess})(Games||(Games={}));var Games;(function(Games){var UserData=(function(){function UserData(){this.sGameInfoUpdate=new Signal();this.isLogined=false;this.account=new Games.UserAccountData();this.protoUserData=new Proto.SS.UsrData();this.info=new Proto.SS.GameInfo();this.infoExt=new Proto.SS.GameInfoExt();this._goldExchangeCount=0;this.isNineToFiftyTimeOuntNum=0;this.isNineToFiftyFiveTimeOuntNum=0;this.isNineToTenTimeOuntNum=0;this.isNineToZeroTimeOuntNum=0;this.isSetIntervalStart=false;this.isZeroTime=false;this.isNineToFifty=false;this.isNineToFiftyFive=false;this.isTenTime=false;this.exchangeTimeOutId=0}Object.defineProperty(UserData.prototype,"goldExchangeCount",{get:function(){return this._goldExchangeCount},set:function(value){this._goldExchangeCount=value;this.startResetGoldExchangeTime()},enumerable:true,configurable:true});UserData.prototype.getDefaultPortrait=function(){var _this=this;var portraitCfgList=Game.config.headPortrait.getConfigList();var portraitSexList=portraitCfgList.filter(function(value,index,array){return value.sex==_this.info.sex});for(var _i=0,portraitSexList_1=portraitSexList;_i<portraitSexList_1.length;_i++){var portrait=portraitSexList_1[_i];if(portrait.unlock.itemId==0&&portrait.unlock.itemNum==0){return portrait.id}}return 0};Object.defineProperty(UserData.prototype,"headIconId",{get:function(){var portraitId=this.info.portrait;if(portraitId==0){portraitId=this.getDefaultPortrait()}return portraitId},enumerable:true,configurable:true});Object.defineProperty(UserData.prototype,"headIconUrl",{get:function(){var portraitCfg=Game.config.headPortrait.getConfig(this.headIconId);if(portraitCfg){return portraitCfg.iconUrl}return""},enumerable:true,configurable:true});Object.defineProperty(UserData.prototype,"upgradeFans",{get:function(){var config=Game.config.playerLevel.getConfig(User.info.level);if(config){return config.fans}return 0},enumerable:true,configurable:true});Object.defineProperty(UserData.prototype,"streatRank",{get:function(){return 0},enumerable:true,configurable:true});Object.defineProperty(UserData.prototype,"trainNumCount",{get:function(){var num=0;num+=Game.config.playerLevel.getConfig(User.info.level).train_count;num+=Game.moduleModel.building.getBuildEffectPar(Games.RoomType.Actor,Games.BuildingEffectType.effect_add_train_actor);var actors=Game.moduleModel.actor.getActors();for(var index=0;index<actors.length;index++){var element=actors[index];num+=element.addTrainNum}return num},enumerable:true,configurable:true});UserData.prototype.createDayNumber=function(){var regTime=Game.time.timestampToTime(Game.time.registerSeconds);var sevTime=Game.time.timestampToTime(Game.time.serverSeconds);if(regTime[0]===sevTime[0]){if(regTime[1]===sevTime[1]){return sevTime[2]-regTime[2]}else{if(sevTime[1]-regTime[1]>1){return 30}else{return this.cuyMonuthDay(regTime[0],regTime[1])-regTime[2]+sevTime[2]}}}else{if(sevTime[0]-regTime[0]>1){return 30}else{if(regTime[1]===12&&sevTime[1]===1){return 31-regTime[2]+sevTime[2]}else{return 30}}}};UserData.prototype.cuyMonuthDay=function(year,mouth){var days=30;if(mouth==2){days=year%4==0?29:28}else{if(mouth==1||mouth==3||mouth==5||mouth==7||mouth==8||mouth==10||mouth==12){days=31}else{days=30}}return days};UserData.prototype.newDay=function(){var isNewDay=false;if(Games.GameLocalStorage.Instance.hasItem("__PopUpMain_HidePopTodayServerTime",false)){var nextTime=Games.GameLocalStorage.Instance.getInt("__PopUpMain_HidePopTodayServerTime",false);isNewDay=Game.time.checkNewDayToRefrush(nextTime/1000,24)}if(isNewDay){Games.GameLocalStorage.Instance.setBoolean("__PopUpMain_HavePopToday",false,false)}return isNewDay};UserData.prototype.isHavePopUp=function(){var result=this.popUpInf().length>0;if(result&&!this.newDay()){if(Games.GameLocalStorage.Instance.hasItem("__PopUpMain_HavePopToday",false)){result=!Games.GameLocalStorage.Instance.getBoolean("__PopUpMain_HavePopToday",false)}}return result};UserData.prototype.popUpInf=function(){var curPopUpconfigList=[];var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask===null){var isNewDay=false;if(Games.GameLocalStorage.Instance.hasItem("__PopUpMain_HidePopTodayServerTime",false)){var nextTime=Games.GameLocalStorage.Instance.getInt("__PopUpMain_HidePopTodayServerTime",false);isNewDay=Game.time.checkNewDayToRefrush(nextTime/1000,24)}var popUpConfigList=Game.config.popUp.getConfigList();var length_1=popUpConfigList.length;var curSerTime=Game.time.timestampToTime(Game.time.serverSeconds);if(length_1>0){var curDayNum=this.createDayNumber()+1;for(var i=0;i<length_1;i++){var popupItem=popUpConfigList[i];if(popupItem.start_type===1){if(popupItem.start_par1===curDayNum){var isPush=true;if(!isNewDay&&Games.GameLocalStorage.Instance.hasItem("__PopUpMain_HidePopToday"+popupItem.id,false)){isPush=!Games.GameLocalStorage.Instance.getBoolean("__PopUpMain_HidePopToday"+popupItem.id,false)}if(isPush){curPopUpconfigList.push(popupItem)}}}else{if(popupItem.start_type===2){if(curSerTime[0]===popupItem.start_par2.y&&curSerTime[1]===popupItem.start_par2.m&&curSerTime[2]===popupItem.start_par2.d){var isPush=true;if(!isNewDay&&Games.GameLocalStorage.Instance.hasItem("__PopUpMain_HidePopToday"+popupItem.id,false)){isPush=!Games.GameLocalStorage.Instance.getBoolean("__PopUpMain_HidePopToday"+popupItem.id,false)}if(isPush){curPopUpconfigList.push(popupItem)}}}}}}}return curPopUpconfigList};UserData.prototype.startTimeTick=function(){var _this=this;if(!this.isSetIntervalStart){this.isNineToFifty=false;this.isNineToFiftyFive=false;this.isTenTime=false;this.isSetIntervalStart=true;if(Game.time.checkTime(Game.time.serverMilliseconds,21,50)){this.isNineToFifty=true}else{var server=Game.time.timeLeft(Game.time.serverMilliseconds,21,50);this.isNineToFiftyTimeOuntNum=setTimeout(function(){_this.timeoutToNineToFifty()},server)}if(Game.time.checkTime(Game.time.serverMilliseconds,21,55)){this.isNineToFiftyFive=true}else{var server=Game.time.timeLeft(Game.time.serverMilliseconds,21,55);this.isNineToFiftyFiveTimeOuntNum=setTimeout(function(){_this.timeoutToNineToFiftyFive()},server)}if(Game.time.checkTime(Game.time.serverMilliseconds,22,0)){this.isTenTime=true}else{var server=Game.time.timeLeft(Game.time.serverMilliseconds,22,0);this.isNineToTenTimeOuntNum=setTimeout(function(){_this.timeoutToTen()},server)}var client=Game.time.timeLeft(Game.time.serverMilliseconds,24,0);this.isNineToZeroTimeOuntNum=setTimeout(function(){_this.timeoutToZero()},client)}};UserData.prototype.timeoutToNineToFifty=function(){this.isNineToFifty=true;Game.event.dispatch(GameEventKey.GameEventKey_TimeLimitRemind,Games.TimeLimitType.NineToFifty)};UserData.prototype.timeoutToNineToFiftyFive=function(){this.isNineToFiftyFive=true;Game.event.dispatch(GameEventKey.GameEventKey_TimeLimitRemind,Games.TimeLimitType.NineToFiftyFive)};UserData.prototype.timeoutToTen=function(){this.isTenTime=true;Game.moduleModel.warData.delFimingMove();Game.moduleModel.warData.newlicenceDataRefrush();if(Game.config.global.getConfig(GlobalKey.Shoot_Story_Refresh_ResetTime).value===22){Game.moduleModel.warData.setRefrushData(null,true)}Game.event.dispatch(GameEventKey.GameEventKey_TimeLimitRemind,Games.TimeLimitType.NineToFiftyFive)};UserData.prototype.timeoutToZero=function(){var _this=this;clearTimeout(this.isNineToFiftyTimeOuntNum);clearTimeout(this.isNineToFiftyFiveTimeOuntNum);clearTimeout(this.isNineToTenTimeOuntNum);clearTimeout(this.isNineToZeroTimeOuntNum);this.isSetIntervalStart=false;this.isZeroTime=true;Games.Static.Instance.initNewDay();Game.protosender.sevenAddUp.Touch();if(Game.config.global.getConfig(GlobalKey.Shoot_Story_Refresh_ResetTime).value===0){Game.moduleModel.warData.setRefrushData(null,true)}Game.event.dispatch(GameEventKey.GameEventKey_TimeLimitRemind,Games.TimeLimitType.Zero);setTimeout(function(){_this.startTimeTick()},1000)};Object.defineProperty(UserData.prototype,"goldExchangeCost",{get:function(){if(this._goldExchangeCost==null){this._goldExchangeCost=new DTItemNum()}this._goldExchangeCost.itemId=EItemId.gold;var level=User.info.level;this._goldExchangeCost.itemNum=Math.floor((level/10+1)*5*level+level*20);return this._goldExchangeCost},enumerable:true,configurable:true});Object.defineProperty(UserData.prototype,"goldExchangeReward",{get:function(){if(this._goldExchangeReward==null){this._goldExchangeReward=new DTItemNum()}this._goldExchangeReward.itemId=EItemId.dollar;var level=User.info.level;this._goldExchangeReward.itemNum=Math.floor((level/4+1)*level*100+400);return this._goldExchangeReward},enumerable:true,configurable:true});Object.defineProperty(UserData.prototype,"goldExchangeTotal",{get:function(){var num=GlobalConfig.getValue(GlobalKey.Conversion_Initial_Times);num+=Game.moduleModel.building.getBuildEffectPar(Games.RoomType.Finance,Games.BuildingEffectType.effect_add_goldexchange_num);return num},enumerable:true,configurable:true});Object.defineProperty(UserData.prototype,"goldExchangeRemain",{get:function(){var total=this.goldExchangeTotal;var cost=this.goldExchangeCount;return Math.max(0,total-cost)},enumerable:true,configurable:true});UserData.prototype.startResetGoldExchangeTime=function(){var _this=this;clearTimeout(this.exchangeTimeOutId);var resetHour=GlobalConfig.getValue(GlobalKey.Conversion_Refresh_Time);if(resetHour==0){resetHour=24}var lastTime=0;var nextSecond=Games.TimeHelper.TimeReformat(resetHour).getTime()/1000;var currSecond=Game.time.serverSeconds;if(currSecond<nextSecond){var time=nextSecond-currSecond;this.exchangeTimeOutId=setTimeout(function(){_this.goldExchangeCount=0},time*1000)}};return UserData}());Games.UserData=UserData})(Games||(Games={}));var Games;(function(Games){var UserAccountData=(function(){function UserAccountData(){}return UserAccountData}());Games.UserAccountData=UserAccountData})(Games||(Games={}));var Games;(function(Games){var TickHandlerManager=(function(){function TickHandlerManager(){this.list=[];this.count=0;this.serverMilliseconds=0}Object.defineProperty(TickHandlerManager,"Instance",{get:function(){var Class=this;if(Class.__instance==null){Class.__instance=new Class()}return Class.__instance},enumerable:true,configurable:true});TickHandlerManager.prototype.addTick=function(took){this.list.push(took)};TickHandlerManager.prototype.initTookList=function(){for(var itemKey in Games.Ticks){var cls=Games.Ticks[itemKey];var obj=new cls();this.addTick(obj)}};TickHandlerManager.prototype.start=function(){this.initTookList();this.count=this.list.length;Laya.timer.loop(1000,this,this.onTick)};TickHandlerManager.prototype.stop=function(){Laya.timer.clear(this,this.onTick)};TickHandlerManager.prototype.onTick=function(){this.serverMilliseconds=Game.time.localTime;for(var i=0;i<this.count;i++){var took=this.list[i];if(this.validate(took)){took.lastUpdateTime=this.serverMilliseconds;took.update()}}};TickHandlerManager.prototype.validate=function(took){var result=this.serverMilliseconds-took.lastUpdateTime>=took.heartbeat;if(result){if(!took.isInited){took.beginInit();result=took.isInited}if(result){result=took.precondition()}}return result};return TickHandlerManager}());Games.TickHandlerManager=TickHandlerManager})(Games||(Games={}));var Games;(function(Games){var TickHandler=(function(){function TickHandler(){this.heartbeat=1000;this.isInited=false;this.lastUpdateTime=0}TickHandler.prototype.beginInit=function(){};TickHandler.prototype.endInit=function(){this.isInited=true};TickHandler.prototype.precondition=function(){return true};TickHandler.prototype.update=function(){};return TickHandler}());Games.TickHandler=TickHandler})(Games||(Games={}));var Games;(function(Games){var Tick=(function(){function Tick(){this.debugEnable=true;this.debugName="";this.debugCallNum=0;this.debugCostTime=0;this.debugCostTimeToal=0;this.isStart=false;this.curentTimes=0;this.currentClock=0}Object.defineProperty(Tick.prototype,"debugEvaluateCost",{get:function(){if(this.debugCallNum>0){return Math.round(this.debugCostTimeToal/this.debugCallNum)}return this.debugCostTime},enumerable:true,configurable:true});Tick.prototype.toString=function(){return this.debugName+"  callNum:"+this.debugCallNum+"  costTime:"+this.debugCostTime+"  costTimeToal:"+this.debugCostTimeToal+"  evaluateCost:"+this.debugCostTimeToal};Tick.CreateTick=function(distance,targetTimes,clockHandler,finishHandler){var tick=new Tick();tick.isStart=false;tick.distance=distance;tick.targetTimes=targetTimes;tick.clockHandler=clockHandler;tick.finishHandler=finishHandler;if(clockHandler){tick.debugName=clockHandler.caller?getClassName(clockHandler.caller)+"."+getFunctionName(clockHandler.method):getFunctionName(clockHandler.method)}else{if(finishHandler){tick.debugName=finishHandler.caller?getClassName(finishHandler.caller)+"."+getFunctionName(finishHandler.method):getFunctionName(finishHandler.method)}}return tick};Tick.prototype.UpdateTime=function(){if(!this.isStart){return}this.currentClock++;if(this.currentClock>=this.distance){this.currentClock=0;this.curentTimes++;if(this.targetTimes>0&&this.curentTimes>this.targetTimes){if(this.isStart){this.isStart=false;if(this.finishHandler){this.finishHandler.run()}}return}if(this.clockHandler){this.debugCallNum++;this.debugCostTime=new Date().getTime();this.clockHandler.runWith(this.targetTimes-this.curentTimes);this.debugCostTime=new Date().getTime()-this.debugCostTime;this.debugCostTimeToal+=this.debugCostTime}}};Object.defineProperty(Tick.prototype,"Times",{get:function(){return this.curentTimes},enumerable:true,configurable:true});Tick.prototype.SetDistance=function(distance){this.distance=distance;return this};Tick.prototype.SetTargetTimes=function(target){this.targetTimes=target;return this};Tick.prototype.Start=function(){this.isStart=true;if(this.clockHandler){this.clockHandler.runWith(this.targetTimes-this.curentTimes)}};Tick.prototype.Restart=function(){this.curentTimes=0;this.currentClock=0;this.isStart=true;if(this.clockHandler){this.clockHandler.runWith(this.targetTimes-this.curentTimes)}};Tick.prototype.Continue=function(){this.isStart=true};Tick.prototype.Stop=function(){this.isStart=false};return Tick}());Games.Tick=Tick;var TickManager=(function(){function TickManager(){this.list=new Array()}TickManager.prototype.install=function(){var tick=this.AddTick(1,0,null,null);tick.Start();Laya.timer.loop(1000,this,this.LoopUpdateTime)};TickManager.prototype.AddTick=function(distance,targetTimes,clockHandler,finishHandler){var tick=Tick.CreateTick(distance,targetTimes,clockHandler,finishHandler);this.list.push(tick);return tick};TickManager.prototype.ClearTick=function(tick){var index=this.list.indexOf(tick);if(index>=0){this.list.splice(index,1)}};TickManager.prototype.LoopUpdateTime=function(){for(var _i=0,_a=this.list;_i<_a.length;_i++){var tick=_a[_i];this.UpdateTime(tick)}};TickManager.prototype.UpdateTime=function(tick){if(tick.debugEnable){tick.UpdateTime()}};return TickManager}());Games.TickManager=TickManager})(Games||(Games={}));var Games;(function(Games){var TickMenuManager=(function(){function TickMenuManager(){this._tickDict=new Dictionary();this._timeButtonDict=new Dictionary();this._updateFuncDict=new Dictionary();this._getStrFuncDict=new Dictionary()}Object.defineProperty(TickMenuManager,"getInstance",{get:function(){if(this._instance==null){this._instance=new TickMenuManager();this._instance.initsall()}return this._instance},enumerable:true,configurable:true});TickMenuManager.prototype.initsall=function(){this._updateFuncDict.add(Games.MenuId.Awards,Handler.create(Game.moduleModel.oscar,Game.moduleModel.oscar.UpdateOscarTick,null,false));this._getStrFuncDict.add(Games.MenuId.Awards,Handler.create(Game.moduleModel.oscar,Game.moduleModel.oscar.GetOscarCDTxt,null,false));this._getStrFuncDict.add(Games.MenuId.CupGift,Handler.create(Game.moduleModel.targetPackage,Game.moduleModel.targetPackage.curTimeStr,null,false))};TickMenuManager.prototype.addTick=function(menuId){if(this._tickDict.hasKey(menuId)==false){var tick=Game.tick.AddTick(1,0,Handler.create(this,this.onTickUpdate,[menuId],false),null);tick.Restart();this._tickDict.add(menuId,tick)}};TickMenuManager.prototype.stopTick=function(menuId){var tick=this._tickDict.getValue(menuId);if(tick){tick.Stop()}};TickMenuManager.prototype.addButton=function(menuId,button){var list=this.getButtons(menuId);var but=list.findOne(function(element){return element==button});if(but==null){list.push(button)}this.onTickUpdate(menuId)};TickMenuManager.prototype.getButtons=function(menuId){var list;if(this._timeButtonDict.hasKey(menuId)){list=this._timeButtonDict.getValue(menuId)}else{list=[];this._timeButtonDict.add(menuId,list)}return list};TickMenuManager.prototype.removeButton=function(menuId,button){var list=this.getButtons(menuId);for(var index=0;index<list.length;index++){var element=list[index];if(element==button){list.splice(index,1);return true}}return false};TickMenuManager.prototype.onTickUpdate=function(menuId){var list=this._timeButtonDict.getValue(menuId);if(list){var str="";if(this._getStrFuncDict.hasKey(menuId)){str=this._getStrFuncDict.getValue(menuId).run()}for(var index=0;index<list.length;index++){var button=list[index];button.m_buttonTime.m_time.text=str}}if(this._updateFuncDict.hasKey(menuId)){var stop_1=this._updateFuncDict.getValue(menuId).run();if(stop_1){this.stopTick(menuId)}}};return TickMenuManager}());Games.TickMenuManager=TickMenuManager})(Games||(Games={}));var Games;(function(Games){var TypeWriteManager=(function(){function TypeWriteManager(){this.typewriteDict=new Dictionary();this.pools=new Array();this.id=0}TypeWriteManager.prototype.getTypeByPool=function(){var data;if(this.pools.length>0){data=this.pools[0];this.pools.splice(0,1)}return data};TypeWriteManager.prototype.createTypeWrite=function(){var data=this.getTypeByPool();if(data==null){data=new Games.TypeWriteData();this.id++;data.id=this.id;this.typewriteDict.add(this.id,data)}return data};TypeWriteManager.prototype.getTypeWriteDataById=function(id){return this.typewriteDict.getValue(id)};TypeWriteManager.prototype.stopById=function(id){var data=this.getTypeWriteDataById(id);if(data){data.stopTypeWrite()}};TypeWriteManager.prototype.removeToPool=function(id){var data=this.getTypeWriteDataById(id);if(data){data.stopTypeWrite();this.pools.push(data)}};return TypeWriteManager}());Games.TypeWriteManager=TypeWriteManager})(Games||(Games={}));var Games;(function(Games){var NoticeModel=(function(){function NoticeModel(){this.listNotice=[];this.dicNotice=new Dictionary()}NoticeModel.prototype.install=function(){};NoticeModel.prototype.UpdateNoticeMsg=function(msg){for(var index=0;index<msg.length;index++){var data=msg[index];if(this.dicNotice.getValue(data.messageDetailUrl)==null){var notice=Games.NoticeData.CreateByProto(data);this.dicNotice.add(data.messageDetailUrl,notice)}}};NoticeModel.prototype.LocalData=function(){var _this=this;var data=new Proto.SS.Notice();data.content="test--------test";data.title="test";data.itemList=[];data.messageDetailUrl=(Game.time.serverSeconds+60).toString();this.UpdateNoticeMsg([data]);setTimeout(function(){_this.UpdateNoticeMsg([data])},5000)};return NoticeModel}());Games.NoticeModel=NoticeModel})(Games||(Games={}));var Games;(function(Games){var LangModel=(function(){function LangModel(){}LangModel.level="{0}级";return LangModel}());Games.LangModel=LangModel})(Games||(Games={}));var Games;(function(Games){var MenuWindows=(function(){function MenuWindows(){}MenuWindows.get=function(menuId){return MenuWindows.dict.getValue(menuId)};MenuWindows.add=function(menuId,windowClass){MenuWindows.dict.add(menuId,new Games.ModuleConfig(menuId,windowClass))};MenuWindows.install=function(){MenuWindows.add(Games.MenuId.Login,Games.LoginWindow);MenuWindows.add(Games.MenuId.CreateRole,Games.CreateRoleWindow);MenuWindows.add(Games.MenuId.Home,Games.HomeWindow);MenuWindows.add(Games.MenuId.Produce,Games.ProduceWindow);MenuWindows.add(Games.MenuId.Market,Games.MarketWindow);MenuWindows.add(Games.MenuId.Bag,Games.BagWindow);MenuWindows.add(Games.MenuId.Order,Games.OrderWindow);MenuWindows.add(Games.MenuId.ArtistList,Games.ArtistListWindow);MenuWindows.add(Games.MenuId.ArtistDetail,Games.ArtistDetailWindow);MenuWindows.add(Games.MenuId.ActorDetail,Games.ActorDetailWindow);MenuWindows.add(Games.MenuId.ArtistFrozen,Games.ArtistFrozenWindow);MenuWindows.add(Games.MenuId.ArtistScoutResult,Games.ArtistScoutResultWindow);MenuWindows.add(Games.MenuId.ArtistScoutSuccess,Games.ArtistScoutSuccessWindow);MenuWindows.add(Games.MenuId.ArtistTrain,Games.ArtistTrainWindow);MenuWindows.add(Games.MenuId.ArtistTrainResult,Games.ArtistTrainResultWindow);MenuWindows.add(Games.MenuId.ArtistGet,Games.ArtistGetWindow);MenuWindows.add(Games.MenuId.ArtistShare,Games.ArtistShareWindow);MenuWindows.add(Games.MenuId.ArtListExercise,Games.ArtListExerciseWindow);MenuWindows.add(Games.MenuId.Artist,Games.ArtistDirectoryWindow);MenuWindows.add(Games.MenuId.ArtistAssistant,Games.ArtistAssistantWindow);MenuWindows.add(Games.MenuId.PlayerInfo,Games.PlayerInfoWindow);MenuWindows.add(Games.MenuId.War,Games.WarWindow);MenuWindows.add(Games.MenuId.StoryLibrary,Games.StoryLibraryWindow);MenuWindows.add(Games.MenuId.StoryInfo,Games.StoryInfoWindow);MenuWindows.add(Games.MenuId.Mail,Games.MailWindow);MenuWindows.add(Games.MenuId.Rank,Games.RankWindow);MenuWindows.add(Games.MenuId.Mission,Games.MissionWindow);MenuWindows.add(Games.MenuId.MissionReward,Games.MissionWindow);MenuWindows.add(Games.MenuId.SystemSetting,Games.SysSettingWindow);MenuWindows.add(Games.MenuId.Event,Games.ActivityWindow);MenuWindows.add(Games.MenuId.Weal,Games.ActivityWindow);MenuWindows.add(Games.MenuId.Shop,Games.ShopWindow);MenuWindows.add(Games.MenuId.Recharge,Games.RechargeWindow);MenuWindows.add(Games.MenuId.Fans,Games.VisitWindow);MenuWindows.add(Games.MenuId.Official,Games.BusinessWindow);MenuWindows.add(Games.MenuId.Meeting,Games.MeetingWindow);MenuWindows.add(Games.MenuId.Street,Games.StreetWindow);MenuWindows.add(Games.MenuId.Awards,Games.OscarWindow);MenuWindows.add(Games.MenuId.Goal,Games.LevelGiftWindow);MenuWindows.add(Games.MenuId.CupGift,Games.CupGiftWindow);MenuWindows.add(Games.MenuId.Notice,Games.PublicNoticeWindow);MenuWindows.add(Games.MenuId.MainTask,Games.MainTaskWindow);MenuWindows.add(Games.MenuId.Cooperation,Games.CooperationWindow);MenuWindows.add(Games.MenuId.BuildRoomUpgrade,Games.BuildRoomUpgradeWindow);MenuWindows.add(Games.MenuId.BuildRoomList,Games.BuildRoomListWindow);MenuWindows.add(Games.MenuId.GoldExchange,Games.GoldExchangeWindow);MenuWindows.add(Games.MenuId.WarContinue,Games.WarContinueWindow);MenuWindows.add(Games.MenuId.PopUp,Games.PopUpWindow);MenuWindows.add(Games.MenuId.GuideComplete,Games.GuideCompleteWindow)};MenuWindows.dict=new Dictionary();return MenuWindows}());Games.MenuWindows=MenuWindows})(Games||(Games={}));var Games;(function(Games){var MenuId;(function(MenuId){MenuId[MenuId.Home=1]="Home";MenuId[MenuId.Login=101]="Login";MenuId[MenuId.CreateRole=102]="CreateRole";MenuId[MenuId.PlayerInfo=103]="PlayerInfo";MenuId[MenuId.Rank=104]="Rank";MenuId[MenuId.MainTask=105]="MainTask";MenuId[MenuId.Street=106]="Street";MenuId[MenuId.Notice=107]="Notice";MenuId[MenuId.GuideComplete=108]="GuideComplete";MenuId[MenuId.War=3]="War";MenuId[MenuId.Market=5]="Market";MenuId[MenuId.Bag=6]="Bag";MenuId[MenuId.ArtistList=4]="ArtistList";MenuId[MenuId.ArtistDetail=401]="ArtistDetail";MenuId[MenuId.ActorDetail=402]="ActorDetail";MenuId[MenuId.ArtistFrozen=403]="ArtistFrozen";MenuId[MenuId.ArtistScoutResult=404]="ArtistScoutResult";MenuId[MenuId.ArtistScoutSuccess=405]="ArtistScoutSuccess";MenuId[MenuId.ArtistTrain=406]="ArtistTrain";MenuId[MenuId.ArtistTrainResult=407]="ArtistTrainResult";MenuId[MenuId.ArtistGet=408]="ArtistGet";MenuId[MenuId.ArtistShare=409]="ArtistShare";MenuId[MenuId.ArtListExercise=410]="ArtListExercise";MenuId[MenuId.ArtistAssistant=411]="ArtistAssistant";MenuId[MenuId.Shop=21]="Shop";MenuId[MenuId.Recharge=22]="Recharge";MenuId[MenuId.Mission=23]="Mission";MenuId[MenuId.MissionReward=231]="MissionReward";MenuId[MenuId.Weal=24]="Weal";MenuId[MenuId.Event=25]="Event";MenuId[MenuId.SuperIdol=26]="SuperIdol";MenuId[MenuId.SystemSetting=31]="SystemSetting";MenuId[MenuId.Mail=32]="Mail";MenuId[MenuId.Chat=33]="Chat";MenuId[MenuId.Awards=41]="Awards";MenuId[MenuId.Goal=42]="Goal";MenuId[MenuId.CupGift=43]="CupGift";MenuId[MenuId.WarContinue=301]="WarContinue";MenuId[MenuId.Produce=51]="Produce";MenuId[MenuId.Order=52]="Order";MenuId[MenuId.Official=53]="Official";MenuId[MenuId.Fans=54]="Fans";MenuId[MenuId.Meeting=55]="Meeting";MenuId[MenuId.StoryLibrary=61]="StoryLibrary";MenuId[MenuId.Cinemas=62]="Cinemas";MenuId[MenuId.Screenwriter=63]="Screenwriter";MenuId[MenuId.Artist=64]="Artist";MenuId[MenuId.Treasure=65]="Treasure";MenuId[MenuId.StoryInfo=6101]="StoryInfo";MenuId[MenuId.Group=71]="Group";MenuId[MenuId.Leader=72]="Leader";MenuId[MenuId.Cooperation=73]="Cooperation";MenuId[MenuId.CooperationTask=81]="CooperationTask";MenuId[MenuId.CooperatOrder=82]="CooperatOrder";MenuId[MenuId.CooperatSentDollar=83]="CooperatSentDollar";MenuId[MenuId.CooperatSentGold=84]="CooperatSentGold";MenuId[MenuId.SubMenuButtonBegin=10000]="SubMenuButtonBegin";MenuId[MenuId.Run=10001]="Run";MenuId[MenuId.Manage=10002]="Manage";MenuId[MenuId.Social=10003]="Social";MenuId[MenuId.BuildRoomUpgrade=201]="BuildRoomUpgrade";MenuId[MenuId.BuildRoomList=202]="BuildRoomList";MenuId[MenuId.GoldExchange=203]="GoldExchange";MenuId[MenuId.PopUp=20001]="PopUp"})(MenuId=Games.MenuId||(Games.MenuId={}))})(Games||(Games={}));var Games;(function(Games){var PopupType;(function(PopupType){PopupType[PopupType.Menu=0]="Menu";PopupType[PopupType.MenuParam=1]="MenuParam"})(PopupType=Games.PopupType||(Games.PopupType={}));var PopupData=(function(){function PopupData(){}return PopupData}());Games.PopupData=PopupData;var PopupHandler=(function(){function PopupHandler(){}return PopupHandler}());Games.PopupHandler=PopupHandler;var PopupManage=(function(){function PopupManage(){this.isPlayed=false}PopupManage.getInstance=function(){var Class=this;if(Class.__instance==null){Class.__instance=new Class();Class.__instance.install()}return Class.__instance};PopupManage.prototype.install=function(){this.popList=[];this.recoverList=[];this.checkListHandlers=[];this.addHandler(Games.MenuId.PopUp,Handler.create(this,this.popUp,null,false),Handler.create(this,this.paramHandler,null,false));Game.event.add(GameEventKey.GameEventKey_StorylineComplete,this.checkPopupMenuByStoryline,this);Game.event.add(GameEventKey.GameEventKey_TimeLimitRemind,this.checkPopupMenu,this)};PopupManage.prototype.checkPopupMenuByStoryline=function(){this.checkPopupMenu()};PopupManage.prototype.popUp=function(){return User.popUpInf().length>0};PopupManage.prototype.guideComplete=function(){return Game.moduleModel.guide.isPopupGuideComplete};PopupManage.prototype.paramHandler=function(){return User.popUpInf()};PopupManage.prototype.addHandler=function(menuId,handler,paramHandler){var data=new PopupHandler();data.handler=handler;data.menuId=menuId;data.paramer=paramHandler;this.checkListHandlers.push(data)};PopupManage.prototype.checkPopupMenu=function(){var played=false;if(Game.menu.getLastOpenMenuId()==Games.MenuId.Home){for(var index=0;index<this.checkListHandlers.length;index++){var element=this.checkListHandlers[index];if(element.handler.run()){played=true;this.pushMenu(element.menuId,element.paramer?element.paramer.run():null)}}}return played};PopupManage.prototype.popupMenu=function(){if(this.isPlayed==false){if(this.popList.length>0){this.curPopup=this.popList.shift();this.addMenuEvent();Game.menu.open(this.curPopup.menuId,this.curPopup.menuParamer);this.isPlayed=true}}return false};PopupManage.prototype.addMenuEvent=function(){Game.event.add(GameEventKey.GameFrame_CloseMenu,this.closeMenuHandler,this)};PopupManage.prototype.removeMenuEvent=function(){Game.event.remove(GameEventKey.GameFrame_CloseMenu,this.closeMenuHandler,this)};PopupManage.prototype.closeMenuHandler=function(menuId){if(this.curPopup==null){this.isPlayed=false;return}if(menuId==this.curPopup.menuId){this.recoverList.push(this.curPopup);this.isPlayed=false;this.removeMenuEvent();this.popupMenu()}};PopupManage.prototype.pushMenu=function(menuId,param){if(param===void 0){param=null}var data;if(this.recoverList.length>0){data=this.recoverList.shift()}else{data=new PopupData()}data.menuId=menuId;data.menuParamer=param;this.popList.push(data);this.popupMenu()};return PopupManage}());Games.PopupManage=PopupManage})(Games||(Games={}));var Games;(function(Games){var StoryManager=(function(){function StoryManager(){this.isPlayed=false;this.isTriggerAll=false}Object.defineProperty(StoryManager,"Instance",{get:function(){if(!StoryManager._Instance){StoryManager._Instance=new StoryManager();StoryManager._Instance.install()}return StoryManager._Instance},enumerable:true,configurable:true});StoryManager.prototype.install=function(){Game.event.add(GameEventKey.GameEventKey_FilmStoryAnimationComplete,this.storyAnimationComplete,this);Game.event.add(GameEventKey.GameEventKey_FilmStoryStateChange,this.storyStateChange,this)};StoryManager.prototype.storyStateChange=function(state){this.triggerPlayStoryByType(Games.StoryTriggerType.FilmState,state)};StoryManager.prototype.storyAnimationComplete=function(storyList){var isPlay=false;for(var index=0;index<storyList.length;index++){var element=storyList[index];isPlay=this.triggerPlayStoryByType(Games.StoryTriggerType.FiveStarStory,element.starNumber);if(isPlay){return}}};StoryManager.prototype.callTriggerEndStory=function(){if(this.triggerEndStoryHandler){this.triggerEndStoryHandler.run();this.triggerEndStoryHandler=null}};StoryManager.prototype.triggerPlayAll=function(){var played=false;if(this.isTriggerAll==false){for(var index=Games.StoryTriggerType.Start+1;index<Games.StoryTriggerType.End;index++){played=this.triggerPlayStoryByType(index);if(played){this.isTriggerAll=true;break}}}return played};StoryManager.prototype.triggerPlayStoryByType=function(type,value,triggerStoryHandler,noPlayTriggerCallback,forcePlay,parame){if(value===void 0){value=0}if(triggerStoryHandler===void 0){triggerStoryHandler=null}if(noPlayTriggerCallback===void 0){noPlayTriggerCallback=true}if(forcePlay===void 0){forcePlay=false}if(parame===void 0){parame=null}this.triggerEndStoryHandler=triggerStoryHandler;var list=Game.config.storyline.getConfigByTrigger(type);var isPlay=false;if(list){for(var index=0;index<list.length;index++){var element=list[index];if(Game.moduleModel.guide.isStoryFinished(element.id)==false||forcePlay){switch(element.trigger){case Games.StoryTriggerType.Create:isPlay=true;break;case Games.StoryTriggerType.SelectActor:if(Game.moduleModel.actor.getAllActorLen()==1){isPlay=true}break;case Games.StoryTriggerType.FinishStreet:if(Game.moduleModel.market.IsTaskCityPointFinish(element.value)){isPlay=true}break;case Games.StoryTriggerType.FinishRoadShow:if(Game.moduleModel.market.IsTaskRoadShowFinish(element.value)){isPlay=true}break;case Games.StoryTriggerType.FinishBuild:if(Game.moduleModel.building.getRoomByType(element.value)){isPlay=true}break;case Games.StoryTriggerType.FinishPreGuide:if(Game.moduleModel.guide.isGuideFinished(element.value)){isPlay=true}break;case Games.StoryTriggerType.OpenMenu:if(value==element.value){isPlay=true}break;case Games.StoryTriggerType.FristSumitTakeMovie:break;case Games.StoryTriggerType.FristMovieUp:if(Game.moduleModel.guide.isFinishMovieUp(element.value)){isPlay=true}break;case Games.StoryTriggerType.FinishPreStory:if(Game.moduleModel.guide.isFinishStoryGroup(element.value)){isPlay=true}break;case Games.StoryTriggerType.SelectStoryMoneyNotEnough:if(value==1){isPlay=true}break;case Games.StoryTriggerType.OpenOscar:if(value==element.value){isPlay=true}break;case Games.StoryTriggerType.FinishMainTask:if(value==element.value){isPlay=true}break;case Games.StoryTriggerType.FourStarActor:if(value==element.value){element.type_id=parame;isPlay=true}case Games.StoryTriggerType.FiveStarStory:if(value==element.value){isPlay=true}break;case Games.StoryTriggerType.FilmState:if(value==element.value){isPlay=true}break;default:break}}if(isPlay){this.playStory(element.id);break}}}if(isPlay==false&&noPlayTriggerCallback){this.callTriggerEndStory()}return isPlay};StoryManager.prototype.playStory=function(id){Game.guide.clearDealyCheckGuide();this.guideUI.show();var played=false;var config=Game.config.storyline.getConfig(id);if(config){this.isPlayed=true;switch(config.ui_type){case Games.GuideUIType.InitAcotr:if(Game.moduleModel.actor.getAllActorLen()<1){console.log("播放初始艺人选择");this.endStory();Game.menu.openTab(Games.MenuId.CreateRole,Games.CreateRoleTabType.InitialActor)}else{Game.moduleModel.guide.addFinishStoryId(id)}break;case Games.GuideUIType.Menu:this.endStory();Game.menu.open(toInt(config.type_id));Game.moduleModel.guide.addFinishStoryId(id);break;default:Game.moduleModel.guide.addFinishStoryId(id);Game.guideUI.play(id,Games.GuideType.Story);break}}this.storyId=id;return played};StoryManager.prototype.playNextStory=function(){var _this=this;var storyConfig=Game.config.storyline.getConfig(this.storyId);if(storyConfig&&storyConfig.reward&&storyConfig.reward.length>0){this.hideUI();Game.system.openAwardsAlert(storyConfig.reward,Games.TEXT.RewardTitle,function(){_this.checkNextStory(storyConfig)},true)}else{this.checkNextStory(storyConfig)}};StoryManager.prototype.checkNextStory=function(storyConfig){if(storyConfig){var guideId=storyConfig.guide_id;if(guideId>0){var guideType=storyConfig.guide_type;switch(guideType){case Proto.SE.EGuideType.story:this.playStory(guideId);break;case Proto.SE.EGuideType.guide:this.endStory();Game.guide.readyPlayGuide(guideId);break;default:break}}else{var storyId=storyConfig.id;var nextConfig=Game.config.storyline.getNextStoryline(storyId);if(nextConfig){this.playStory(nextConfig.id)}else{this.endStory()}}}};StoryManager.prototype.endStory=function(){this.hideUI();this.callTriggerEndStory();this.isPlayed=false;Game.event.dispatch(GameEventKey.GameEventKey_StorylineComplete);Game.guide.dealyCheckGuide()};Object.defineProperty(StoryManager.prototype,"guideUI",{get:function(){return Game.guideUI},enumerable:true,configurable:true});StoryManager.prototype.hideUI=function(){this.guideUI.hideAll()};return StoryManager}());Games.StoryManager=StoryManager})(Games||(Games={}));var Games;(function(Games){var GuideStoryData=(function(){function GuideStoryData(){}return GuideStoryData}());Games.GuideStoryData=GuideStoryData;var GuideManager=(function(){function GuideManager(){this.currentId=0;this.isPlayCar=false;this.guideGroupDict=new Dictionary();this.guideGroupList=[];this.initGuideEvent()}GuideManager.prototype.initGuideEvent=function(){this.guideProtoOkEvents=new Dictionary();this.guideProtoOkEvents.add(Games.GuideFinishType.GuideFinishType_3_UpgradeActor,[ProtoEventKey.ActorData]);this.guideProtoOkEvents.add(Games.GuideFinishType.GuideFinishType_5_StreetPublicize,[ProtoEventKey.city_Propaganda]);this.guideProtoOkEvents.add(Games.GuideFinishType.GuideFinishType_11_UpgradeAttention,[ProtoEventKey.movie_SpreadMovie]);this.guideProtoOkEvents.add(Games.GuideFinishType.GuideFinishType_12_AppointActor,[ProtoEventKey.city_SetPropagandaActor]);this.guideProtoOkEvents.add(Games.GuideFinishType.GuideFinishType_17_DoBusiness,[ProtoEventKey.manageBusiness_GetReward]);this.guideProtoOkEvents.add(Games.GuideFinishType.GuideFinishType_25_OrderIntoBox,[ProtoEventKey.manageOrder_PutItem]);this.guideProtoOkEvents.add(Games.GuideFinishType.GuideFinishType_28_TakeMoiveType,[ProtoEventKey.MovieData]);this.guideEvents=new Dictionary();this.guideEvents.add(Games.GuideFinishType.GuideFinishType_18_FansVisit,[GameEventKey.GameEventKey_UpdateVisitActor])};GuideManager.prototype.addGuideEventListener=function(id){this.removeGuideEventListener(id);var guideSystemConfig=Game.config.guidesystem.getConfig(id);if(this.guideProtoOkEvents.hasKey(guideSystemConfig.finish_type)){var keys=this.guideProtoOkEvents.getValue(guideSystemConfig.finish_type);for(var index=0;index<keys.length;index++){var element=keys[index];Game.protoOkEvent.add(element,this.onServerHandler,this)}}if(this.guideEvents.hasKey(guideSystemConfig.finish_type)){var keys=this.guideEvents.getValue(guideSystemConfig.finish_type);for(var index=0;index<keys.length;index++){var element=keys[index];Game.event.add(element,this.onClientHandler,this)}}};GuideManager.prototype.onServerHandler=function(){this.dealyCheckGuide()};GuideManager.prototype.onClientHandler=function(){this.endGuide()};GuideManager.prototype.removeGuideEventListener=function(id){var guideSystemConfig=Game.config.guidesystem.getConfig(id);if(this.guideProtoOkEvents.hasKey(guideSystemConfig.finish_type)){var keys=this.guideProtoOkEvents.getValue(guideSystemConfig.finish_type);for(var index=0;index<keys.length;index++){var element=keys[index];Game.protoOkEvent.remove(element,this.onServerHandler,this)}}if(this.guideEvents.hasKey(guideSystemConfig.finish_type)){var keys=this.guideEvents.getValue(guideSystemConfig.finish_type);for(var index=0;index<keys.length;index++){var element=keys[index];Game.event.remove(element,this.onClientHandler,this)}}};GuideManager.prototype.endGuide=function(isApplyCallback){if(isApplyCallback===void 0){isApplyCallback=true}if(this.isHaveGuide){this.guideUI.recyclingHand();this.guideUI.closeDialog();this.clearGuides();if(isApplyCallback){this.callTriggerEndGuide()}}};GuideManager.prototype.finishId=function(id){this.guideGroupDict.add(id,true);Game.moduleModel.guide.addFinishGuideId(id);var isPlay=Game.story.triggerPlayStoryByType(Games.StoryTriggerType.FinishPreGuide,id);if(isPlay==false){this.dealyCheckGuide()}};GuideManager.prototype.callTriggerEndGuide=function(){if(this.triggerEndGuideCallBack){this.triggerEndGuideCallBack();this.triggerEndGuideCallBack=null}};Object.defineProperty(GuideManager,"Instance",{get:function(){if(!GuideManager._Instance){GuideManager._Instance=new GuideManager()}return GuideManager._Instance},enumerable:true,configurable:true});Object.defineProperty(GuideManager.prototype,"guideUI",{get:function(){return Game.guideUI},enumerable:true,configurable:true});GuideManager.prototype.openHome=function(){this.addMenuEventListener();Game.menu.open(Games.MenuId.Home)};GuideManager.prototype.checkPlayOpenAnima=function(){var _this=this;var isFinished=Game.moduleModel.guide.isFinishFirst;if(isFinished){this.openHome()}else{if(Game.moduleModel.building.hasBuildFloorWithoutRoom(1)){setTimeout(function(){_this.openHome()},500)}else{this.playOpenAnima()}}};GuideManager.prototype.playStartCar=function(){this.guideUI.play(0,Games.GuideType.Car)};GuideManager.prototype.playOpenAnima=function(){this.guideUI.play(0,Games.GuideType.Anima)};GuideManager.prototype.dealyCheckGuide=function(timeout){var _this=this;if(timeout===void 0){timeout=200}this.clearDealyCheckGuide();if(Game.story.isPlayed==false){this.dealyPlayGuideHandler=setTimeout(function(){_this.dealyPlayGuideHandler=0;_this.checkPlayGuide()},timeout)}};GuideManager.prototype.clearDealyCheckGuide=function(){if(this.dealyPlayGuideHandler>0){clearTimeout(this.dealyPlayGuideHandler);this.dealyPlayGuideHandler=0}};GuideManager.prototype.clearGuides=function(){this.guideGroupDict.clear();for(var index=0;index<this.guideGroupList.length;index++){var element=this.guideGroupList[index];this.removeGuideEventListener(element)}this.guideGroupList.splice(0,this.guideGroupList.length)};GuideManager.prototype.readyPlayGuide=function(id,isForce,callback){if(isForce===void 0){isForce=true}if(callback===void 0){callback=null}if(isForce){this.guidePlayType=Games.GuidePlayType.DailyTask}else{this.guidePlayType=Games.GuidePlayType.MainTask}this.clearGuides();var fConfig=Game.config.guidesystem.getConfig(id);if(fConfig){this.triggerEndGuideCallBack=callback;var list=Game.config.guidesystem.getConfigsByGroup(fConfig.group);if(list){for(var index=0;index<list.length;index++){var element=list[index];this.addGuideEventListener(element.id);this.guideGroupList.push(element.id);this.guideGroupDict.add(element.id,false)}}this.dealyCheckGuide(200)}};GuideManager.prototype.addMenuEventListener=function(){Game.event.add(GameEventKey.GameFrame_OpenMenu,this.openMenuHandler,this);Game.event.add(GameEventKey.GameFrame_CloseMenu,this.closeMenuHandler,this)};GuideManager.prototype.removeMenuEventListener=function(){Game.event.remove(GameEventKey.GameFrame_OpenMenu,this.openMenuHandler,this);Game.event.remove(GameEventKey.GameFrame_CloseMenu,this.closeMenuHandler,this)};GuideManager.prototype.openMenuHandler=function(menuId){var isPlay=false;switch(menuId){case Games.MenuId.Market:isPlay=Game.story.triggerPlayStoryByType(Games.StoryTriggerType.FinishRoadShow);break;case Games.MenuId.ArtistScoutResult:for(var index=0;index<User.info.noseIntoActorList.length;index++){var element=User.info.noseIntoActorList[index];var actorConfig=Game.config.actor.getConfig(element);if(actorConfig&&Game.moduleModel.actor.hasActor(actorConfig.id)){isPlay=Game.story.triggerPlayStoryByType(Games.StoryTriggerType.FourStarActor,actorConfig.starNum,null,false,false,element)}if(isPlay){break}}break;case Games.MenuId.Home:if(Game.moduleModel.guide.isFinishFirst==false){if(Game.moduleModel.building.hasBuildFloorWithoutRoom(1)){this.finishFristStep(1)}else{isPlay=true;this.playStartCar()}}else{isPlay=Game.story.triggerPlayAll()}break;default:isPlay=Game.story.triggerPlayStoryByType(Games.StoryTriggerType.OpenMenu,menuId);break}if(isPlay==false){this.dealyCheckGuide()}};GuideManager.prototype.closeMenuHandler=function(menuId){if(this.isHaveGuide){this.guideUI.recyclingHand();this.guideUI.closeDialog();this.dealyCheckGuide()}};Object.defineProperty(GuideManager.prototype,"isHaveGuide",{get:function(){return this.guideGroupList.length>0},enumerable:true,configurable:true});Object.defineProperty(GuideManager.prototype,"isFinishedGroup",{get:function(){var isFinished=true;for(var index=0;index<this.guideGroupList.length;index++){var id=this.guideGroupList[index];isFinished=this.guideGroupDict.getValue(id);if(isFinished==false){break}}return isFinished},enumerable:true,configurable:true});GuideManager.prototype.isCanTrigger=function(id){var isPlay=true;var config=Game.config.guidesystem.getConfig(id);if(config){switch(config.trigger_type){case Games.GuideCanPlayType.FinishPreGuide:isPlay=this.guideGroupDict.getValue(config.trigger_value);break;case Games.GuideCanPlayType.HasContinueMovie:isPlay=Game.moduleModel.warData.isHasContinueMovie();break;case Games.GuideCanPlayType.HasOrderList:isPlay=Game.moduleModel.order.getCurrrentOrderList().length>0;break;case Games.GuideCanPlayType.SelectRoomType:isPlay=Game.moduleModel.building.selectRoomType==config.trigger_value;break;case Games.GuideCanPlayType.HasContinueMovie2:isPlay=false;var curContinuData=Game.moduleModel.warData.curContinuData;if(curContinuData&&curContinuData.remainingTime>0){isPlay=true}break;case Games.GuideCanPlayType.SelectActor:isPlay=false;var selectActor=Game.moduleModel.actor.selectActor;if(selectActor){isPlay=selectActor.level<config.trigger_value}break;case Games.GuideCanPlayType.VisitActor:isPlay=true;var visit=Game.moduleModel.visit.getVisitData();if(visit){if(visit.isWaiting){isPlay=false}}break;default:break}}return isPlay};GuideManager.prototype.checkPlayGuide=function(){if(this.guideGroupList.length>0){this.checkFinishGuide();var isPlay=false;for(var index=0;index<this.guideGroupList.length;index++){var id=this.guideGroupList[index];var config=Game.config.guidesystem.getConfig(id);if(config){var isFinished=this.guideGroupDict.getValue(config.id);var menuId=GuideHelp.getGuideMenuIdByConfig(config.path_id);var menuIsOpen=GuideHelp.getIsOpenSubIdByConfig(config.path_id);var isCanPlay=this.isCanTrigger(id);var isLast=Game.menu.getLastOpenMenuId()==menuId;if(menuIsOpen&&isLast&&isFinished==false&&isCanPlay){isPlay=true;this.playGuide(id);break}else{if(isFinished){var storyId=config.storyline_id;if(storyId>0&&Game.moduleModel.guide.isStoryFinished(storyId)==false){Game.story.playStory(storyId);return}}if(isCanPlay==false&&this.isTriggerOtherGuide(config)){if(menuIsOpen&&isLast&&config.trigger_type==Games.GuideCanPlayType.VisitActor){this.playGuide(config.break_guide)}else{this.readyPlayGuide(config.break_guide)}return}}}}if(isPlay==false){this.guideUI.recyclingHand()}}};GuideManager.prototype.playGuide=function(id){var config=Game.config.guidesystem.getConfig(id);if(config){this.currentId=id;this.guideUI.play(id,Games.GuideType.Guide)}};GuideManager.prototype.finishVisitGuide=function(){};GuideManager.prototype.isTriggerOtherGuide=function(config){return config.break_guide>0};GuideManager.prototype.finishInitActor=function(){Game.moduleModel.guide.addFinishStoryId(Games.GuideModel.initActorId)};GuideManager.prototype.playNextGuide=function(){var guideSystemConfig=Game.config.guidesystem.getConfig(this.currentId);if(guideSystemConfig){var storyId=guideSystemConfig.storyline_id;var guideId=guideSystemConfig.id;if(storyId>0){Game.story.playStory(storyId)}else{var nextConfig=Game.config.guidesystem.getNextGuide(guideId);if(nextConfig){this.playGuide(nextConfig.id)}else{this.endGuide()}}}};GuideManager.prototype.finishFristStep=function(floorIndex){if(Game.moduleModel.guide.isFinishFirst==false){this.currentId=Games.GuideModel.firstStepId;Game.moduleModel.guide.addFinishGuideId(this.currentId);Game.event.dispatch(GameEventKey.GameEventKey_ClientUpdateMainTask)}this.checkNext()};GuideManager.prototype.checkNext=function(){if(this.currentId>0){var guideSystemConfig=Game.config.guidesystem.getConfig(this.currentId);if(guideSystemConfig){var storyId=guideSystemConfig.storyline_id;if(storyId>0){Game.story.playStory(storyId)}else{var guideId=guideSystemConfig.id;var nextConfig=Game.config.guidesystem.getNextGuide(guideId);if(nextConfig){this.playGuide(nextConfig.id)}else{this.endGuide(true)}}}}};GuideManager.prototype.checkFinishGuide=function(){for(var index=0;index<this.guideGroupList.length;index++){var id=this.guideGroupList[index];var config=Game.config.guidesystem.getConfig(id);var isFinished=this.isFinished;if(config){if(isFinished==false){if(config.finish_type==Games.GuideFinishType.GuideFinishType_24_ClickAnyWhere){var nextConfig=Game.config.guidesystem.getNextGuide(id);if(nextConfig&&this.getIsFinished(nextConfig.id)){isFinished=true}else{isFinished=this.guideGroupDict.getValue(config.id)}}else{isFinished=this.getIsFinished(id)}}}this.guideGroupDict.add(id,isFinished)}var isFinishedAll=this.isFinishedGroup;if(isFinishedAll){this.endGuide()}};Object.defineProperty(GuideManager.prototype,"isFinished",{get:function(){var isFinished=false;switch(this.guidePlayType){case Games.GuidePlayType.MainTask:var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){isFinished=mainTask.isFinished}break;case Games.GuidePlayType.DailyTask:isFinished=false;break;default:break}return isFinished},enumerable:true,configurable:true});GuideManager.prototype.isGuideUI=function(ui){if(this.guideUI){return this.guideUI.guideBtn==ui}return false};GuideManager.prototype.getIsFinished=function(id){var config=Game.config.guidesystem.getConfig(id);var isFinished=false;if(config){switch(config.finish_type){case Games.GuideFinishType.GuideFinishType_1_MakeBuild:isFinished=Game.moduleModel.guide.getGuideIsMakeBuild(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_2_UpgradeBuild:isFinished=Game.moduleModel.guide.getGuideIsUpgradeBuild(config.finish_value_1,config.finish_value_2);break;case Games.GuideFinishType.GuideFinishType_3_UpgradeActor:isFinished=Game.moduleModel.guide.getGuideIsUpgradeActor(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_4_NoseActor:isFinished=Game.moduleModel.guide.getGuideIsNoseActor(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_5_StreetPublicize:isFinished=Game.moduleModel.guide.getGuideIsStreetPublicize(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_6_RoadShow:isFinished=Game.moduleModel.guide.getGuideIsRoadShow(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_7_CityFinish:isFinished=Game.moduleModel.guide.getGuideIsCityFinish(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_8_TakeMovie:isFinished=Game.moduleModel.guide.getGuideIsTakeMovie(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_9_SeeMovieReward:isFinished=Game.moduleModel.guide.getGuideIsSeeMovieReward(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_10_GetMovieReward:isFinished=Game.moduleModel.guide.getGuideIsGetMovieReward(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_11_UpgradeAttention:isFinished=Game.moduleModel.guide.getGuideIsUpgradeAttention(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_12_AppointActor:isFinished=Game.moduleModel.guide.getGuideIsAppointActor(config.finish_value_1,config.finish_value_2);break;case Games.GuideFinishType.GuideFinishType_13_ChooseFocusPointCity:isFinished=this.guideGroupDict.getValue(config.id);break;case Games.GuideFinishType.GuideFinishType_14_GetCityReward:isFinished=this.guideGroupDict.getValue(config.id);break;case Games.GuideFinishType.GuideFinishType_15_DoPuduct:isFinished=Game.moduleModel.guide.getGuideIsDoPuduct(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_16_CompleteOrder:isFinished=Game.moduleModel.guide.getGuideIsCompleteOrder(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_17_DoBusiness:isFinished=Game.moduleModel.guide.getGuideIsDoBusiness(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_18_FansVisit:isFinished=Game.moduleModel.guide.getGuideIsFansVisit(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_19_GetTotalRewardMovie:isFinished=Game.moduleModel.guide.getGuideIsGetTotalRewardMovie(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_20_ClickTarget:isFinished=this.guideGroupDict.getValue(config.id);break;case Games.GuideFinishType.GuideFinishType_21_ExpendFloor:isFinished=Game.moduleModel.guide.getGuideIsExpendFloor(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_22_SelectContory:isFinished=Game.moduleModel.guide.getGuideIsSelectContory(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_23_SelectCity:isFinished=Game.moduleModel.guide.getGuideIsSelectCity(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_24_ClickAnyWhere:isFinished=this.guideGroupDict.getValue(config.id);break;case Games.GuideFinishType.GuideFinishType_25_OrderIntoBox:isFinished=Game.moduleModel.guide.getGuideIsOrderIntoBox(config.finish_value_1);break;case Games.GuideFinishType.GuideFinishType_26_SelectStory:case Games.GuideFinishType.GuideFinishType_27_CostlicenceNum:if(Game.moduleModel.warData.moveData){isFinished=Game.moduleModel.warData.moveData.state>Proto.SE.EMovieState.chooseScript}else{isFinished=false}break;case Games.GuideFinishType.GuideFinishType_28_TakeMoiveType:if(Game.moduleModel.warData.moveData){isFinished=Game.moduleModel.warData.moveData.state>=config.finish_value_1}else{isFinished=false}break;case Games.GuideFinishType.GuideFinishType_29_Secretary:isFinished=this.guideGroupDict.getValue(config.id);if(isFinished==false){isFinished=Game.moduleModel.guide.getGuideIsSecretary(config.finish_value_1)}break;case Games.GuideFinishType.GuideFinishType_30_MarketSelectActor:isFinished=Game.moduleModel.guide.getGuideIsSetPublicizeActor(config.finish_value_1);break;default:break}}return isFinished};return GuideManager}());Games.GuideManager=GuideManager})(Games||(Games={}));var GuideFindUIType;(function(GuideFindUIType){GuideFindUIType[GuideFindUIType.MenuId=1]="MenuId";GuideFindUIType[GuideFindUIType.UIPath=2]="UIPath";GuideFindUIType[GuideFindUIType.ListIndex=3]="ListIndex";GuideFindUIType[GuideFindUIType.ListFind=4]="ListFind";GuideFindUIType[GuideFindUIType.UICustomize=5]="UICustomize";GuideFindUIType[GuideFindUIType.UICustomizeParam=6]="UICustomizeParam";GuideFindUIType[GuideFindUIType.HomeMenuId=7]="HomeMenuId"})(GuideFindUIType||(GuideFindUIType={}));var GuideFindUIMenuIdParameter=(function(){function GuideFindUIMenuIdParameter(){}return GuideFindUIMenuIdParameter}());var GuideFindUIPathParameter=(function(){function GuideFindUIPathParameter(){}return GuideFindUIPathParameter}());var GuideFindUIListIndexParameter=(function(){function GuideFindUIListIndexParameter(){}return GuideFindUIListIndexParameter}());var GuideFindUIListFindParameter=(function(){function GuideFindUIListFindParameter(){}return GuideFindUIListFindParameter}());var GuideHelp=(function(){function GuideHelp(){}GuideHelp.getGuideMenuIdByConfig=function(id){var config=Game.config.guidePath.getConfig(id);if(config){return config.menuid}return 0};GuideHelp.getGuideMenuWindow=function(config,systemCfg){switch(config.find_ui_type){case GuideFindUIType.MenuId:GuideHelp.findMenuIdParameter.menuId=config.sub_id;return GuideHelp.getUIForMenuId(GuideHelp.findMenuIdParameter);case GuideFindUIType.HomeMenuId:var menuCtl1=Game.menu.getMenuCtl(config.menuid);if(menuCtl1&&menuCtl1.moduleWindow){var content=menuCtl1.moduleWindow;return content}default:var menuCtl=Game.menu.getMenuCtl(config.menuid);if(menuCtl&&menuCtl.moduleWindow){var content=menuCtl.moduleWindow;if(config.sub_id>0){return content.getSubwindow(config.sub_id)}return content}}return null};GuideHelp.getIsOpenSubIdByConfig=function(id){var config=Game.config.guidePath.getConfig(id);var isOpen=true;if(config){isOpen=Game.menu.getLastOpenMenuId()==config.menuid;if(isOpen){var subId=config.sub_id;if(isNaN(subId)==false&&subId>=0){switch(config.find_ui_type){case GuideFindUIType.MenuId:var menuCtl=Game.menu.getMenuCtl(MenuId.Home);if(menuCtl&&menuCtl.moduleWindow&&menuCtl.moduleWindow.contentPane){var mainUI=menuCtl.moduleWindow.contentPane;isOpen=mainUI.getSubmenuIsOpened(Game.config.menu.getConfig(subId).barType)}break;case GuideFindUIType.HomeMenuId:isOpen=true;break;default:isOpen=Game.menu.isOpenedSubOrTab(config.menuid,subId);break}}}}return isOpen};GuideHelp.getGuideUIByConfig=function(systemCfg){var config=Game.config.guidePath.getConfig(systemCfg.path_id);if(config){switch(config.find_ui_type){case GuideFindUIType.MenuId:GuideHelp.findMenuIdParameter.menuId=config.sub_id;return GuideHelp.getUIForMenuId(GuideHelp.findMenuIdParameter);case GuideFindUIType.UIPath:GuideHelp.findUIPathParameter.menuId=config.menuid;GuideHelp.findUIPathParameter.uiPath=config.path;return GuideHelp.getUIForMenuUIPath(GuideHelp.findUIPathParameter);case GuideFindUIType.ListIndex:GuideHelp.findUIListIndexParameter.index=config.list_index;GuideHelp.findUIListIndexParameter.itemUIPath=config.path;GuideHelp.findUIPathParameter.menuId=config.menuid;GuideHelp.findUIPathParameter.uiPath=config.list_path;GuideHelp.findUIListIndexParameter.listUIPath=GuideHelp.findUIPathParameter;return GuideHelp.getUIForListIndex(GuideHelp.findUIListIndexParameter);case GuideFindUIType.ListFind:break;case GuideFindUIType.UICustomize:return GuideHelp.getUIForCustomize(config);case GuideFindUIType.UICustomizeParam:return GuideHelp.getUIForCustomizeParam(config,systemCfg);case GuideFindUIType.HomeMenuId:return GuideHelp.getUIForHomeMenuId(config,systemCfg)}}return null};GuideHelp.getFristChildIndex=function(systemCfg){var config=Game.config.guidePath.getConfig(systemCfg.path_id);var index=0;if(config){GuideHelp.findUIPathParameter.menuId=config.menuid;GuideHelp.findUIPathParameter.uiPath=config.list_path;var listUI=GuideHelp.getUIForMenuUIPath(GuideHelp.findUIPathParameter);if(listUI){index=listUI.getFirstChildInView()}}return index};GuideHelp.getUIForCustomize=function(config){var menuCtl=Game.menu.getMenuCtl(config.menuid);if(menuCtl&&menuCtl.moduleWindow&&menuCtl.moduleWindow){var content=menuCtl.moduleWindow;return GuideHelp.getUIForFuncPath(content,config.path)}return null};GuideHelp.getUIForCustomizeParam=function(config,systemCfg){var menuCtl=Game.menu.getMenuCtl(config.menuid);if(menuCtl&&menuCtl.moduleWindow&&menuCtl.moduleWindow){var content=menuCtl.moduleWindow;var args=[];if(systemCfg.path_par1!=null){args.push(systemCfg.path_par1)}return GuideHelp.getUIForFuncPathParam(content,config.path,args)}return null};GuideHelp.getUIForHomeMenuId=function(config,systemCfg){var menuCtl=Game.moduleModel.func.getMenuCtrlByMenuId(config.sub_id);if(menuCtl){return menuCtl.button}return null};GuideHelp.getIsOpenMenuByMenuId=function(menuId){var menuCtl=Game.menu.getMenuCtl(menuId);if(menuCtl&&menuCtl.state==Games.MenuCtlStateType.Opened){return true}return false};GuideHelp.getUIForMenuId=function(parameter){var menuCtl=Game.menu.getMenuCtl(MenuId.Home);if(menuCtl&&menuCtl.moduleWindow&&menuCtl.moduleWindow.contentPane){var mainUI=menuCtl.moduleWindow.contentPane;var menuButtonCtl=Game.moduleModel.func.getMenuCtrlByMenuId(parameter.menuId);if(menuButtonCtl){return menuButtonCtl.button}}return null};GuideHelp.getUIForMenuUIPath=function(parameter){if(parameter.menuId){var menuCtl=Game.menu.getMenuCtl(parameter.menuId);if(menuCtl&&menuCtl.moduleWindow&&menuCtl.moduleWindow){var content=menuCtl.moduleWindow;return GuideHelp.getUIForPath(content,parameter.uiPath)}}else{return getFieldValueForPath(parameter.uiPath)}return null};GuideHelp.getUIForPath=function(content,uiPath){return getFieldValueForPath(uiPath,content)};GuideHelp.getUIForFuncPath=function(content,funcPath){return getFunResultForPath(funcPath,content)};GuideHelp.getUIForFuncPathParam=function(content,funcPath){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}return getFunResultForPath(funcPath,content,args)};GuideHelp.getUIForListIndex=function(parameter){var listUI=GuideHelp.getUIForMenuUIPath(parameter.listUIPath);if(listUI&&listUI.numItems>parameter.index){listUI.scrollToView(parameter.index);var itemUI=listUI.getChildAt(listUI.itemIndexToChildIndex(parameter.index));if(itemUI){if(isNullOrEmpty(parameter.itemUIPath)){return itemUI}else{return GuideHelp.getUIForPath(itemUI,parameter.itemUIPath)}}}return null};GuideHelp.getUIListIndex=function(listUI,index){if(listUI&&listUI.numItems>index){listUI.scrollToView(index);var itemUI=listUI.getChildAt(listUI.itemIndexToChildIndex(index));if(itemUI){return itemUI}}return null};GuideHelp.getUIForListFind=function(parameter){var listUI=GuideHelp.getUIForMenuUIPath(parameter.listUIPath);if(listUI){var dataList=getValueForPath(parameter.dataListPath);if(dataList!=null){var selectIndex=-1;for(var i=0;i<dataList.length;i++){var itemData=dataList[i];if(itemData){var itemValue=getFieldValueForPath(parameter.itemDataFieldName,itemData);if(itemValue==parameter.itemDataValue){selectIndex=i;break}}}if(selectIndex!=-1){listUI.scrollToView(selectIndex);var itemUI=listUI.getChildAt(listUI.itemIndexToChildIndex(selectIndex));if(itemUI){return GuideHelp.getUIForPath(itemUI,parameter.itemUIPath)}}}}return null};GuideHelp.findMenuIdParameter=new GuideFindUIMenuIdParameter;GuideHelp.findUIListParameter=new GuideFindUIListFindParameter;GuideHelp.findUIListIndexParameter=new GuideFindUIListIndexParameter;GuideHelp.findUIPathParameter=new GuideFindUIPathParameter;return GuideHelp}());var Games;(function(Games){var UnitModel=(function(){function UnitModel(){this.STAGE_OFFSET_ENTER=180;this.STAGE_OFFSET_LEAVE=50;this.DEFAULT_SCALE=0.26;this.info=new AvatarInfo();this.x=0;this.y=0;this.width=0;this.height=0;this.scaleFactor=0.26;this.bounds=new Rectangle(0,0,0,0);this.currentAnimId=1002;this.isOpenShadow=false;this.visible=true;this.eventList=[];this.performType=Games.PerformType.FreeWalk;this.currEventId=0;this.info.recover();this.roomInfo=null}UnitModel.prototype.dispose=function(){this.info.recover();this.roomInfo=null;this.bounds=null};UnitModel.prototype.setInfo=function(info){this.info=info;this.currentAnimId=Game.config.action.getActionId(this.info.idleName)};Object.defineProperty(UnitModel.prototype,"roomInfo",{get:function(){return this._roomInfo},set:function(val){this._roomInfo=val},enumerable:true,configurable:true});Object.defineProperty(UnitModel.prototype,"currentAnimName",{get:function(){var cfg=Game.config.action.getConfig(this.currentAnimId);if(cfg){return cfg.action}return this.info.idleName},set:function(val){this.currentAnimId=Game.config.action.getActionId(this.info.idleName)},enumerable:true,configurable:true});Object.defineProperty(UnitModel.prototype,"boundWidth",{get:function(){return this.scaleFactor*this.width},enumerable:true,configurable:true});Object.defineProperty(UnitModel.prototype,"boundHeight",{get:function(){return this.scaleFactor*this.height},enumerable:true,configurable:true});Object.defineProperty(UnitModel.prototype,"shrinkScaleRate",{get:function(){return this.scaleFactor/this.DEFAULT_SCALE},enumerable:true,configurable:true});return UnitModel}());Games.UnitModel=UnitModel;var AvatarType;(function(AvatarType){AvatarType[AvatarType.None=0]="None";AvatarType[AvatarType.Npc=1]="Npc";AvatarType[AvatarType.Actor=2]="Actor";AvatarType[AvatarType.Assistant=3]="Assistant";AvatarType[AvatarType.Performer=4]="Performer"})(AvatarType=Games.AvatarType||(Games.AvatarType={}));var AvatarInfo=(function(){function AvatarInfo(){this.uid=0;this.id=0;this.name="";this.idleName="zhanli1";this.direction=Games.DirtionType.Right;this.boundWidth=190;this.boundHeight=620;this.scaleFactor=0.26}AvatarInfo.prototype.recover=function(){this.uid=0;this.id=0;this.type=AvatarType.None;this.idleName="zhanli1";this.direction=Games.DirtionType.Right;this.texturePath=undefined;this.skeletonPath=undefined};Object.defineProperty(AvatarInfo.prototype,"config",{get:function(){if(this._config==null){this._config=Game.config.actor.getConfig(this.id)}return this._config},enumerable:true,configurable:true});Object.defineProperty(AvatarInfo.prototype,"npcConfig",{get:function(){if(this._npcConfig==null){this._npcConfig=Game.config.npc.getConfig(this.id)}return this._npcConfig},enumerable:true,configurable:true});AvatarInfo.creatByActor=function(actor){var aInfo=new AvatarInfo();aInfo.id=actor.id;aInfo.name=actor.name;aInfo.type=AvatarType.Actor;var avatarCfg=Game.config.avatar.getConfig(actor.config.avatar);aInfo.texturePath=avatarCfg.modelSkinUrl;aInfo.skeletonPath=avatarCfg.modelBoneUrl;return aInfo};AvatarInfo.creatByAvatarId=function(actorId){var aInfo=new Games.AvatarInfo();aInfo.id=actorId;if(aInfo.config==null){return null}aInfo.name=aInfo.config.name;aInfo.type=AvatarType.Actor;var avatarCfg=Game.config.avatar.getConfig(aInfo.config.avatar);aInfo.texturePath=avatarCfg.modelSkinUrl;aInfo.skeletonPath=avatarCfg.modelBoneUrl;return aInfo};AvatarInfo.creatAssistantById=function(actorId){if(actorId===void 0){actorId=9998}var aInfo=new Games.AvatarInfo();aInfo.id=actorId;if(aInfo.config==null){return null}aInfo.name=aInfo.config.name;aInfo.type=AvatarType.Assistant;var avatarCfg=Game.config.avatar.getConfig(aInfo.config.avatar);aInfo.texturePath=avatarCfg.modelSkinUrl;aInfo.skeletonPath=avatarCfg.modelBoneUrl;return aInfo};AvatarInfo.creatByNpcId=function(npcId){var aInfo=new AvatarInfo();aInfo.id=npcId;aInfo.name=aInfo.npcConfig.name;aInfo.type=AvatarType.Npc;var avatarCfg=Game.config.avatar.getConfig(aInfo.npcConfig.avatar);aInfo.texturePath=avatarCfg.modelSkinUrl;aInfo.skeletonPath=avatarCfg.modelBoneUrl;return aInfo};return AvatarInfo}());Games.AvatarInfo=AvatarInfo;var MoveInfo=(function(){function MoveInfo(){this.pointX=0;this.animId=1004;this.endAnimName="zhanli1";this.endAnimLoop=true;this.active=false;this.isMoveEnd=false}Object.defineProperty(MoveInfo.prototype,"run",{set:function(val){this.animId=val?1005:1004},enumerable:true,configurable:true});Object.defineProperty(MoveInfo.prototype,"moveAnimId",{set:function(animId){this.animId=animId},enumerable:true,configurable:true});Object.defineProperty(MoveInfo.prototype,"complete",{set:function(val){this.isMoveEnd=val},enumerable:true,configurable:true});MoveInfo.prototype.recover=function(){this.pointX=0;this.animId=1004;this.endAnimName="zhanli1";this.endAnimLoop=true;this.completeHandler=null;this.active=false;this.isMoveEnd=false};return MoveInfo}());Games.MoveInfo=MoveInfo})(Games||(Games={}));var Games;(function(Games){var UnitCreator=(function(){function UnitCreator(){}UnitCreator.prototype.creatEUnit=function(info,boundWidth,boundHeight,scaleFactor){if(boundWidth===void 0){boundWidth=190}if(boundHeight===void 0){boundHeight=620}if(scaleFactor===void 0){scaleFactor=0.26}var unit=new Games.UnitAgent();unit.init(info,boundWidth,boundHeight,scaleFactor);return unit};UnitCreator.prototype.requestUnit=function(info,boundWidth,boundHeight,scaleFactor){if(boundWidth===void 0){boundWidth=190}if(boundHeight===void 0){boundHeight=620}if(scaleFactor===void 0){scaleFactor=0.26}var unit=Games.AvatarManager.getRoomCUnit(info.uid);if(unit){unit.visible=true;return unit}else{unit=new Games.UnitAgent();unit.init(info,boundWidth,boundHeight,scaleFactor);Games.AvatarManager.addRoomCUnit(unit)}return unit};UnitCreator.incrementId=10000;return UnitCreator}());Games.UnitCreator=UnitCreator})(Games||(Games={}));var Games;(function(Games){var UnitAgent=(function(){function UnitAgent(){this.isInScreen=true;this._isPause=false;this.UNIT_DEFAULT_SCALE=0.26;this.STAGE_OFFSET_ENTER=180;this.STAGE_OFFSET_LEAVE=50;this.DELTA_TIME=0.02;this.speed=100;this.speedRun=150;this.elapseTime=0;this.elapseTalkTime=0;this.isExecuteMoveToPoint=false;this.isOnPointEvent=false;this._eventFinish=true;this.unit=new Games.EUnit();this.unitModel=new Games.UnitModel();this.unit.unitData=this.unitModel}UnitAgent.prototype.dispose=function(){if(this.isDisposed){return}if(this.unit){this.unit.dispose();this.unit=null;this.unitModel=null}};Object.defineProperty(UnitAgent.prototype,"isDisposed",{get:function(){if(this.unit){return this.unit.isDisposed}return true},enumerable:true,configurable:true});UnitAgent.prototype.init=function(info,boundWidth,boundHeight,scaleFactor){if(boundWidth===void 0){boundWidth=190}if(boundHeight===void 0){boundHeight=620}if(scaleFactor===void 0){scaleFactor=0.26}this.unitModel=new Games.UnitModel();this.unitModel.setInfo(info);this.unit.unitData=this.unitModel;var moveComponent=Games.ComponentHelper.requestItem(Games.UnitMoveComponent);moveComponent.unit=this.unit;var viewComponent=Games.ComponentHelper.requestItem(Games.UnitSkeletonViewCompoent);viewComponent.unit=this.unit;var animatorComponent=Games.ComponentHelper.requestItem(Games.UnitAnimatorComponent);animatorComponent.unit=this.unit;var talkComponent=Games.ComponentHelper.requestItem(Games.UnitTalkComponent);talkComponent.unit=this.unit;this.unit.addComponent(moveComponent);this.unit.addComponent(viewComponent);this.unit.addComponent(animatorComponent);this.unit.addComponent(talkComponent);this.setScale(scaleFactor,true);this.size(boundWidth,boundHeight);this.unit.creat(info,this,this.onCreatComplete)};UnitAgent.prototype.onCreatComplete=function(skeleton){this.playAction(this.unitModel.currentAnimId)};UnitAgent.prototype.showOn=function(parent,displayIndex){if(displayIndex===void 0){displayIndex=-1}this.unit.showOn(parent,displayIndex)};UnitAgent.prototype.inScreen=function(){if(!this.isInScreen){this.isInScreen=true;this.onInScreen()}};UnitAgent.prototype.outScreen=function(){if(this.isInScreen){this.isInScreen=false;this.onOutScreen()}};UnitAgent.prototype.onInScreen=function(){this.unit&&this.unit.startAnimator()};UnitAgent.prototype.onOutScreen=function(){this.unit&&this.unit.pauseAnimator()};Object.defineProperty(UnitAgent.prototype,"isPause",{get:function(){return this._isPause},set:function(val){if(val){if(!this._isPause){}}else{if(this._isPause){}}this._isPause=val},enumerable:true,configurable:true});Object.defineProperty(UnitAgent.prototype,"visible",{set:function(val){this.unitModel.visible=val;if(val){this.unit&&this.unit.unitView.Show()}else{this.unit&&this.unit.unitView.Hide()}},enumerable:true,configurable:true});UnitAgent.prototype.openShadow=function(){this.unitModel.isOpenShadow=true;this.unit&&this.unit.unitView.openShadow()};UnitAgent.prototype.closeShadow=function(){this.unitModel.isOpenShadow=false;this.unit&&this.unit.unitView.openShadow(false)};UnitAgent.prototype.setRoomInfo=function(roomInfo){this.unitModel.roomInfo=roomInfo};UnitAgent.prototype.setScale=function(scaleFactor,speedMode){this.unitModel.scaleFactor=scaleFactor};UnitAgent.prototype.resetScale=function(scaleFactor){if(scaleFactor===void 0){scaleFactor=0.26}this.setScale(scaleFactor)};Object.defineProperty(UnitAgent.prototype,"x",{get:function(){return this.unitModel.x},set:function(val){this.unitModel.x=val;this.unit.unitView.x=val},enumerable:true,configurable:true});Object.defineProperty(UnitAgent.prototype,"y",{get:function(){return this.unitModel.y},set:function(val){this.unitModel.y=val;this.unit.unitView.y=val},enumerable:true,configurable:true});UnitAgent.prototype.pos=function(x,y){this.x=x;this.y=y};UnitAgent.prototype.size=function(width,height){this.unitModel.width=width;this.unitModel.height=height};Object.defineProperty(UnitAgent.prototype,"direction",{get:function(){return this.unitModel.info.direction},set:function(val){this.unitModel.info.direction=val;this.unit.unitView.direction=val},enumerable:true,configurable:true});UnitAgent.prototype.reverseDirection=function(){if(this.unitModel.info.direction==Games.DirtionType.Right){this.direction=Games.DirtionType.Left}else{if(this.unitModel.info.direction==Games.DirtionType.Left){this.direction=Games.DirtionType.Right}}};UnitAgent.prototype.getBounds=function(){var rect=new Rectangle(0,0,0,0);if(this.unitModel.bounds){rect.x=0;rect.y=0;rect.width=this.unitModel.boundWidth;rect.height=this.unitModel.boundHeight}return rect};UnitAgent.prototype.setHitArea=function(width,height,offsetX,offsetY){if(offsetX===void 0){offsetX=0}if(offsetY===void 0){offsetY=0}var _x=-width/2;var _y=-height;var dir=(this.direction==Games.DirtionType.Left)?-1:1;if(this.unit){this.unit.unitView.hitArea=new Rectangle(_x+offsetX*dir,_y+offsetY,width,height)}};UnitAgent.prototype.setChildIndex=function(index){if(this.unit.unitView.displayObject){this.unit.unitView.displayObject.parent.setChildIndex(this.unit.unitView.displayObject,index)}if(this.unit.talk.hasTalk){this.unit.unitView.talkBox.parent.setChildIndex(this.unit.unitView.talkBox,index)}};UnitAgent.prototype.stand=function(name,x,y){if(x){this.x=x}if(y){this.y=y}if(name){if(isNumber(name)){this.playAction(name)}else{this.play(name)}return}this.play(this.unitModel.info.idleName)};UnitAgent.prototype.sitDown=function(x,y,anim){this.x=x;this.y=y;if(anim){this.play(anim)}else{this.play("zuoxia1")}};UnitAgent.prototype.playeMoveAnim=function(){if(this.unitModel&&this.unitModel.currAction){this.playAction(this.unitModel.currAction.actionId)}};UnitAgent.prototype.playAction=function(animId){if(this.unitModel.currentAnimId==animId){return}this.unitModel.currentAnimId=animId;this.unit.animator.playAction(animId)};UnitAgent.prototype.play=function(name){var actionId=Game.config.action.getActionId(name);this.playAction(actionId)};UnitAgent.prototype.enterTo=function(x,y,direction,handler){this.x=x;if(y){this.y=y}if(direction){this.direction=direction}if(handler){handler.run()}};UnitAgent.prototype.enter=function(onEvent){var _this=this;var sceneWidth=this.unitModel.roomInfo?this.unitModel.roomInfo.sceneWidth:Laya.stage.width;var dx=0;dx=this.STAGE_OFFSET_ENTER;if(this.x>0){dx=sceneWidth-this.STAGE_OFFSET_ENTER}this.moveTo(dx,false,Handler.create(this,function(){var dispathData=_this.unit.getEventData();dispathData.onEvent=onEvent;dispathData.isEnterRoom=true;Games.AvatarManager.sAvatarMoveEnd.dispatch(dispathData)},null,true))};UnitAgent.prototype.leave=function(onEvent,isRun,moveActionId){var _this=this;var sceneWidth=this.unitModel.roomInfo?this.unitModel.roomInfo.sceneWidth:Laya.stage.width;var dx=sceneWidth+this.STAGE_OFFSET_LEAVE;if(this.x<sceneWidth/2){dx=-this.STAGE_OFFSET_LEAVE}this.moveTo(dx,isRun,Handler.create(this,function(){var dispathData=_this.unit.getEventData();dispathData.onEvent=onEvent;Games.AvatarManager.sAvatarLeave.dispatch(dispathData)},null,true),null,true,moveActionId)};UnitAgent.prototype.moveTo=function(xValue,isRun,complete,endAnim,loop,moveActionId){var animId=1004;isRun&&(animId=1005);moveActionId&&(animId=moveActionId);var sequenceMove=Pool.getItem(Games.SequenceMove);sequenceMove.initAgent(this);var moveAction=Pool.getItem(Games.MoveAction);moveAction.pointX=xValue;moveAction.animId=animId;if(complete){moveAction.completeHandler=complete}if(endAnim){moveAction.endAnimName=this.unitModel.info.idleName}if(loop){moveAction.endAnimLoop=loop}sequenceMove.addNode(moveAction);this.unit.move.setSequenceMove(sequenceMove)};UnitAgent.prototype.setTopHeadIcon=function(headIcon,sourceScale){if(sourceScale===void 0){sourceScale=0.26}this.unit.unitView.setTopHeadIcon(headIcon,sourceScale)};UnitAgent.prototype.setTalk=function(text,allwaysShow){if(!this.isInScreen){return}this.elapseTalkTime=0;this.unit.talk.setTalk(text,allwaysShow)};UnitAgent.prototype.hideTalk=function(){this.unit.talk&&this.unit.talk.hideTalk()};UnitAgent.prototype.scaleTalkBox=function(scale,talkBoxOffsetX,talkBoxOffsetY){if(talkBoxOffsetX===void 0){talkBoxOffsetX=0}if(talkBoxOffsetY===void 0){talkBoxOffsetY=0}this.unit.talk.scaleTalkBox(scale,talkBoxOffsetX,talkBoxOffsetY)};Object.defineProperty(UnitAgent.prototype,"eventFinish",{get:function(){return this._eventFinish},set:function(value){this._eventFinish=value},enumerable:true,configurable:true});UnitAgent.prototype.executeActionEvents=function(events,performType){this.unit.unitData.eventList=events;if(performType){this.unit.unitData.performType=performType}this.eventFinish=false};UnitAgent.prototype.nextEvent=function(){if(this.eventFinish){return}if(this.unit.unitData.eventList.length==0){this.endEvent(true);return}if(this.unit.unitData.currAction!=null){Games.AvatarManager.sEventFinish.dispatch(this.unit.getEventData())}this.hideTalk();this.elapseTime=0;this.elapseTalkTime=0;this.isOnPointEvent=false;this.isExecuteMoveToPoint=false;var event=this.unit.unitData.eventList.splice(0,1)[0];this.unit.unitData.currEventId=event.evtId;this.unit.unitData.currAction=event.actionInfo;if(this.unit.unitData.currAction.actionId>0){var actionCfg=Game.config.action.getConfig(this.unit.unitData.currAction.actionId);var actionName=actionCfg.action;this.unit.animator.playAction(this.unit.unitData.currAction.actionId)}if(this.unit.unitData.currAction.talkActionId!=0){var speakCfg=Game.config.speak.getConfig(this.unit.unitData.currAction.talkActionId);if(speakCfg){this.unit.talk.setTalk(format(speakCfg.speak,this.unit.unitData.currAction.talkParams))}}};UnitAgent.prototype.endEvent=function(onEvent){this.stand();this.hideTalk();if(this.unitModel.currEventId!=0){Games.AvatarManager.sEventFinish.dispatch(this.unit.getEventData())}this.unitModel.eventList.length=0;this.unitModel.currEventId=0;this.unitModel.currAction=null;this.eventFinish=true;this.isOnPointEvent=false;this.isExecuteMoveToPoint=false;if(onEvent){var eventData=this.unit.getEventData();this.unitModel.performType=Games.PerformType.FreeWalk;Games.AvatarManager.sBehaviorFinish.dispatch(eventData)}else{this.unitModel.performType=Games.PerformType.FreeWalk}};UnitAgent.prototype.onUpdate=function(){var _this=this;if(this.isPause){return}if(this.isDisposed){return}this.unit.onUpdate();if(!this.eventFinish){if(this.unitModel.currAction!=null){if(this.elapseTalkTime>=this.unitModel.currAction.talkActionTime){console.log("时间到隐藏对话 -- "+this.unitModel.info.id);this.hideTalk();this.elapseTalkTime=0}if(this.unitModel.currAction.actionType==Games.ActionType.Time){this.elapseTime+=Games.GameDriver.time.updateTime.deltaTime*1000;if(this.unitModel.currAction.actionId==1004||this.unitModel.currAction.actionId==1005){if(!this.isExecuteMoveToPoint){this.isExecuteMoveToPoint=true;var sceneWidth=this.unitModel.roomInfo?this.unitModel.roomInfo.sceneWidth:Laya.stage.width;var rdPointX=Random.rangeBetween(this.STAGE_OFFSET_ENTER,sceneWidth-this.STAGE_OFFSET_ENTER);this.moveTo(rdPointX,false,Handler.create(this,function(){if(_this.unitModel.performType==Games.PerformType.FreeWalk){Games.AvatarManager.sAvatarMoveEnd.dispatch(_this.unit.getEventData())}else{_this.nextEvent()}},null,true))}}else{if(this.elapseTime>=this.unitModel.currAction.actionTime){this.nextEvent()}}}else{if(this.unitModel.currAction.actionType==Games.ActionType.Point){if(!this.isOnPointEvent){this.isOnPointEvent=true;this.moveTo(this.unitModel.currAction.actionPointX,false,Handler.create(this,function(){if(_this.unitModel.performType==Games.PerformType.FreeWalk){Games.AvatarManager.sAvatarMoveEnd.dispatch(_this.unit.getEventData())}else{_this.nextEvent()}},null,true))}}}}else{this.nextEvent()}}};UnitAgent.prototype.on=function(type,caller,listener,args){this.unit.unitView.on(type,caller,listener,args)};UnitAgent.prototype.off=function(type,caller,listener){this.unit.unitView.off(type,caller,listener)};UnitAgent.prototype.hasListener=function(type){return this.unit.unitView.hasListener(type)};UnitAgent.prototype.onRender=function(){this.unit&&this.unit.onRender()};UnitAgent.prototype.onSeconds=function(){};return UnitAgent}());Games.UnitAgent=UnitAgent})(Games||(Games={}));var Games;(function(Games){var TalkBoxPool=(function(){function TalkBoxPool(){this.poolSign="TalkBoxPool";this.maxPoolNum=50;this.allList=[];this.list=[]}Object.defineProperty(TalkBoxPool.prototype,"totalNum",{get:function(){return this.allList.length},enumerable:true,configurable:true});Object.defineProperty(TalkBoxPool.prototype,"poolNum",{get:function(){return this.list.length},enumerable:true,configurable:true});Object.defineProperty(TalkBoxPool.prototype,"usedNum",{get:function(){return this.totalNum-this.poolNum},enumerable:true,configurable:true});TalkBoxPool.prototype.requestItem=function(){return this.list.length?this.list.pop():this.creatItem()};TalkBoxPool.prototype.recoverItem=function(item){item.setText("");if(this.list.indexOf(item)==-1){this.list.push(item)}};TalkBoxPool.prototype.creatItem=function(){var newItem=fgui.Common.TalkBox.createInstance();this.allList.push(newItem);return newItem};return TalkBoxPool}());Games.TalkBoxPool=TalkBoxPool})(Games||(Games={}));var Games;(function(Games){var DialogManager=(function(){function DialogManager(){}DialogManager.install=function(){};DialogManager.startDialog=function(avatarA,avatarB,dialogs,performType){var dialog=new Games.Dialog();dialog.dialogId=++this.dialogId;dialog.start(avatarA,avatarB,dialogs,performType);return dialog};DialogManager.dialogId=0;DialogManager.sDialogFinish=new TypedSignal();DialogManager.sDialogEvent=new TypedSignal();DialogManager.dialogDict=new Dictionary();return DialogManager}());Games.DialogManager=DialogManager})(Games||(Games={}));var Games;(function(Games){var DialogEvent=(function(){function DialogEvent(){this.dialogId=0;this.eventId=0}return DialogEvent}());Games.DialogEvent=DialogEvent;var Dialog=(function(){function Dialog(){this.dialogId=0;this.DELTA_TIME=0.02;this.elapseTime=0;this.elapseTalkTime=0;this.eventList=[];this.currEventId=0;this.avatarList=[];this.currentIndex=-1;this.isDestroy=false}Dialog.prototype.start=function(avatarA,avatarB,dialogs,performType){this.performType=performType;this.eventList=dialogs;this.avatarList.length=0;this.avatarList.push(avatarA);this.avatarList.push(avatarB);Laya.timer.clear(this,this.onTimeLoop);Laya.timer.loop(this.DELTA_TIME*1000,this,this.onTimeLoop,null,true,true)};Dialog.prototype.onTimeLoop=function(){this.elapseTime+=this.DELTA_TIME*1000;if(this.currAction!=null){if(this.elapseTalkTime>=this.currAction.talkActionTime){this.curAvatar.hideTalk();this.elapseTalkTime=0}if(this.elapseTime>=this.currAction.actionTime){this.nextEvent()}}else{this.nextEvent()}};Dialog.prototype.nextEvent=function(){if(this.eventList.length==0){this.endEvent(true);return}if(this.currAction!=null){Games.DialogManager.sDialogEvent.dispatch(this.getDialogEvent())}this.currentIndex++;this.curAvatar=this.avatarList[this.currentIndex%2];var target=this.avatarList[(this.currentIndex+1)%2];target.hideTalk();target.stand();this.elapseTime=0;var event=this.eventList.splice(0,1)[0];this.currEventId=event.evtId;this.currAction=event.actionInfo;this.curAvatar.playAction(this.currAction.actionId);if(this.currAction.talkActionId!=0){var speakCfg=Game.config.speak.getConfig(this.currAction.talkActionId);if(speakCfg){this.curAvatar.setTalk(format(speakCfg.speak,this.currAction.talkParams))}}};Dialog.prototype.endEvent=function(emitEvent){if(emitEvent===void 0){emitEvent=true}if(emitEvent){Games.DialogManager.sDialogFinish.dispatch(this.performType);Games.DialogManager.sDialogEvent.dispatch(this.getDialogEvent())}this.dispose()};Dialog.prototype.dispose=function(){var _this=this;if(this.isDestroy){return}this.isDestroy=true;Laya.timer.clear(this,this.onTimeLoop);setTimeout(function(){_this.__dispose()},this.DELTA_TIME*1000)};Dialog.prototype.__dispose=function(){this.currAction=null;if(this.curAvatar){this.curAvatar.stand();this.curAvatar=null}this.avatarList.forEach(function(value,index,array){value.hideTalk()});this.avatarList.length=0};Dialog.prototype.getDialogEvent=function(){var data=new DialogEvent();data.dialogId=this.dialogId;data.eventId=this.currEventId;data.performType=this.performType;return data};return Dialog}());Games.Dialog=Dialog})(Games||(Games={}));var Games;(function(Games){var AvatarManager=(function(){function AvatarManager(){}AvatarManager.init=function(context){this.context=Game.stageManager.homeSceneSet;this.MAX_EVENT_TIME=GlobalConfig.getValue(GlobalKey.KEY_1016_MoXingZaiLou__JianDeShuLiang);this.sBehaviorFinish.add(this.onAvatarBehaviorFinish,this);this.sAvatarEnter.add(this.onAvatarEnterRoom,this);this.sAvatarLeave.add(this.onAvatarLeaveRoom,this);this.sAvatarClick.add(this.onAvatarClick,this);Game.moduleModel.actor.sAddActorList.add(this.onGetActor,this);Game.event.add(GameEventKey.GameEventKey_UpdateActorHideInfo,this.onActorHideInfoUpdate,this);this.initSceneActorList()};AvatarManager.destroy=function(){this.sBehaviorFinish.remove(this.onAvatarBehaviorFinish,this);this.sAvatarEnter.remove(this.onAvatarEnterRoom,this);this.sAvatarLeave.remove(this.onAvatarLeaveRoom,this);this.sAvatarClick.remove(this.onAvatarClick,this);Game.moduleModel.actor.sAddActorList.remove(this.onGetActor,this);Game.event.remove(GameEventKey.GameEventKey_UpdateActorHideInfo,this.onActorHideInfoUpdate,this);var avatars=this.unitCtrlMap.getValues();for(var _i=0,avatars_1=avatars;_i<avatars_1.length;_i++){var avatar=avatars_1[_i];avatar.endEvent(false);avatar.dispose()}this.unitCtrlMap.clear()};AvatarManager.addRoomCUnit=function(unitCtrl){if(this.unitCtrlMap.count<=this.MAX_AVATAR_NUM){this.unitCtrlMap.add(unitCtrl.unitModel.info.uid,unitCtrl)}};AvatarManager.getRoomCUnit=function(avatarUid){if(this.hasRoomCUnit(avatarUid)){var uCtrl=this.unitCtrlMap.getValue(avatarUid);return uCtrl}return null};AvatarManager.hasRoomCUnit=function(avatarUid){return this.unitCtrlMap.hasKey(avatarUid)};AvatarManager.onAvatarBehaviorFinish=function(data){if(data.performType==Games.PerformType.FreeWalk){var time=this.avatarEventTimeList.getValue(data.avatarId);if(time<=this.MAX_EVENT_TIME){this.executeActionEvent(data.roomType,data.avatarUid);this.avatarEventTimeList.add(data.avatarId,time+1)}else{this.context.startLeaveRoom(data.roomType,data.avatarUid,true)}}};AvatarManager.onAvatarEnterRoom=function(data){this.context.onEnterRoom(data.roomType,data.avatarUid);if(data.onEvent){this.executeActionEvent(data.roomType,data.avatarUid)}};AvatarManager.onAvatarLeaveRoom=function(data){this.avatarEventTimeList[data.avatarId]=0;this.context.onLeaveRoom(data.roomType,data.avatarUid);if(data.onEvent){var actor=Game.moduleModel.actor.getActor(data.avatarId);if(actor){this.allocActorToRoom(actor,data.avatarUid)}}};AvatarManager.onAvatarClick=function(data){if(data.roomId==0){return}console.log("[AvatarManager avatarClick]  avatarId= "+data.avatarId+" roomName= "+Game.config.buildingLevel.getConfig(data.roomId).name+" ");if(this.hasActorVisit){var cUnit=this.context.getAvatar(data.roomType,data.avatarUid);if(!cUnit){return}if(this.isActorOnVisit(data.avatarId)){if(this.isActorReceptionOnLimit(data.avatarId)){Game.system.toastText(Game.config.msg.getTxt(MsgKey.visit_stop));return}if(!this.isInRoomReception(data.roomType)){cUnit.endEvent(false);cUnit.executeActionEvents(Game.moduleModel.visit.getActorStartTalk(),Games.PerformType.ReceptionActorTalk);this.context.startLeaveRoom(data.roomType,data.avatarUid,false,true)}else{var receptionRoomProcesser=this.context.getRoomByType(Games.RoomType.Reception).processer;receptionRoomProcesser.actorMoveRoute()}Game.moduleModel.visit.waitVisitActorId=data.avatarId;this.startReceptior()}else{if(cUnit.unitModel.info.type==Games.AvatarType.Actor){var visitActorName=Game.moduleModel.visit.getVisitName();cUnit.setTalk(format(Game.moduleModel.visit.getWrongActorClickDialog(),visitActorName))}}}};AvatarManager.initSceneActorList=function(){this.waitAllocActorList=this.getWaitAllocActors()};AvatarManager.allocAvatarListToRoom=function(){this.startTimeAlloc()};AvatarManager.startTimeAlloc=function(){this.waitAllocActorList=this.getWaitAllocActors();Laya.timer.clear(this,this.onTimeAlloc);Laya.timer.loop(1500,this,this.onTimeAlloc,null,true,true)};AvatarManager.stopTimeAlloc=function(){Laya.timer.clear(this,this.onTimeAlloc)};AvatarManager.getWaitAllocActors=function(){var _this=this;var actorList=Game.moduleModel.actor.getActors();var experciseActors=Game.moduleModel.actor.getExperciseDataList();var experciseActorDataList=[];for(var _i=0,experciseActors_1=experciseActors;_i<experciseActors_1.length;_i++){var experciseActor=experciseActors_1[_i];var actorData=Game.moduleModel.actor.getActorByUUid(experciseActor.uuid);if(actorData){experciseActorDataList.push(actorData)}}return actorList.filter(function(value,index,array){var hasAlloced=_this.hasAllocedActorList.findOne(function(allocedValue){return value.id==allocedValue.id});var hasExpercised=experciseActorDataList.findOne(function(expericesValue){return value.id==expericesValue.id});return hasAlloced==null&&hasExpercised==null})};AvatarManager.onTimeAlloc=function(){var isRoomScrolling=Game.moduleModel.building.isBuildListScrolling;if(!isRoomScrolling){if(this.waitAllocActorList.length>0){var waitAllocActor=this.waitAllocActorList.splice(0,1)[0];this.allocActorToRoom(waitAllocActor)}}};AvatarManager.allocActorToRoom=function(actor,avatarUid){if(avatarUid===void 0){avatarUid=0}this.avatarEventTimeList.add(actor.id,0);if(Game.moduleModel.actor.isActorOnExercise(actor.id)){var room=this.context.getRoomByType(Games.RoomType.Training);var avatar=room.getAvatarById(actor.id);if(!avatar){Game.event.dispatch(GameEventKey.GameEventKey_ActorBackToExperciseRoom,actor.id)}return}var enterRoomType=Game.moduleModel.building.getAvatarEnterRoomType();if(Game.moduleModel.visit.isActorOnAutoVisitStuts(actor.id)){enterRoomType=Games.RoomType.Reception;this.startReceptior()}if(enterRoomType!=-1&&!this.isOnUnitMaxCount){this.addToAllocList(actor);var avatarInfo=Games.AvatarInfo.creatByActor(actor);avatarInfo.uid=avatarUid;var direction=Math.random()>0.5?Games.DirtionType.Left:Games.DirtionType.Right;if(enterRoomType==Games.RoomType.Reception){direction=Games.DirtionType.Right}this.context.startEnterRoom(enterRoomType,avatarInfo,direction,true)}else{this.recoverToWaitAllocList(actor);if(this.isActorOnVisit(actor.id)){this.allocTargetActorToRoom(actor.id)}if(this.isOnUnitMaxCount){console.log("分配艺人达到上限值 "+this.unitMaxNum)}}};AvatarManager.allocTargetActorToRoom=function(actorId){var targetActor;for(var i=this.waitAllocActorList.length-1;i>=0;i--){if(this.waitAllocActorList[i].id==actorId){targetActor=this.waitAllocActorList.splice(i,1)[0];break}}if(targetActor){var enterRoomType=Game.moduleModel.building.getAvatarEnterRoomType(false);if(Game.moduleModel.visit.isActorOnAutoVisitStuts(targetActor.id)){enterRoomType=Games.RoomType.Reception;this.startReceptior()}if(enterRoomType!=-1){this.addToAllocList(targetActor);var avatarInfo=Games.AvatarInfo.creatByActor(targetActor);var direction=Math.random()>0.5?Games.DirtionType.Left:Games.DirtionType.Right;if(enterRoomType==Games.RoomType.Reception){direction=Games.DirtionType.Right}this.context.startEnterRoom(enterRoomType,avatarInfo,direction,true)}else{this.recoverToWaitAllocList(targetActor)}}};AvatarManager.addToAllocList=function(actor){var findIndex=this.hasAllocedActorList.findIndex(function(value){return value.id==actor.id});if(findIndex==-1){this.hasAllocedActorList.push(actor)}};AvatarManager.recoverToWaitAllocList=function(actor){var findIndex=this.waitAllocActorList.findIndex(function(value){return value.id==actor.id});if(findIndex==-1){this.waitAllocActorList.push(actor)}};Object.defineProperty(AvatarManager,"isOnUnitMaxCount",{get:function(){return Game.moduleModel.building.allRoomAvatarNum>=this.unitMaxNum},enumerable:true,configurable:true});AvatarManager.removeRoomActorList=function(actorIds){var removeActorInfoList=[];for(var _i=0,actorIds_1=actorIds;_i<actorIds_1.length;_i++){var actorId=actorIds_1[_i];var removeId=this.removeRoomActor(actorId);if(removeId!=0){removeActorInfoList.push(actorId)}}return removeActorInfoList};AvatarManager.removeRoomActor=function(actorId){var roomAvatar=Game.moduleModel.building.findActorById(actorId);if(roomAvatar!=null){var room=this.context.getRoomByType(roomAvatar.roomType);var cUnit=this.context.getAvatar(roomAvatar.roomType,roomAvatar.avatarUid);if(cUnit){cUnit.endEvent(false);room.onAvatarLeave(cUnit.unitModel.info.uid);return actorId}}else{for(var i=this.waitAllocActorList.length-1;i>=0;i--){if(this.waitAllocActorList[i].id==actorId){var unAllocActor=this.waitAllocActorList.splice(i,1)[0];this.addToAllocList(unAllocActor);return unAllocActor.id}}}return 0};AvatarManager.onActorHideInfoUpdate=function(actor){if(actor.hide){if(!this.isActorOnVisit(actor.id)){this.removeRoomActor(actor.id)}}else{this.allocActorToRoom(actor)}};AvatarManager.onGetActor=function(actor){this.waitAllocActorList=this.getWaitAllocActors()};AvatarManager.executeActionEvent=function(roomType,avatarId){var performId=this.getRDPerformId(roomType);if(performId!=-1){this.executeActionByPerformId(roomType,avatarId,performId)}};AvatarManager.executeActionByPerformId=function(roomType,avatarId,performId){var performCfg=Game.config.perform.getConfig(performId);this.context.executeActionEvents(roomType,avatarId,performCfg.eventList)};AvatarManager.getRDPerformId=function(roomType){var performList=Game.config.perform.getConfigList();performList=performList.filter(function(value,index,array){return value.building==roomType});if(performList.length>0){var totalWeight_1=0;performList.forEach(function(value,index,array){totalWeight_1+=value.weight});var randVal=Random.rangeBoth(0,totalWeight_1);var dr=0;for(var i=0;i<performList.length;i++){dr+=performList[i].weight;if(dr>=randVal){return performList[i].id}}}return -1};AvatarManager.autoActorToReception=function(actorId){console.log("autoActorToReception()");AvatarManager.allocTargetActorToRoom(actorId);var roomAvatar=Game.moduleModel.building.findActorById(actorId);if(roomAvatar!=null){if(this.isActorOnVisit(actorId)){if(this.isActorReceptionOnLimit(actorId)){console.log("不能探状态中");return}var receptionRoomProcesser=this.context.getRoomByType(Games.RoomType.Reception).processer;if(!this.isInRoomReception(roomAvatar.roomType)){var avatar=this.context.getAvatar(roomAvatar.roomType,roomAvatar.avatarUid);if(avatar){avatar.endEvent(false);this.context.startLeaveRoom(roomAvatar.roomType,roomAvatar.avatarUid,false,true)}}else{receptionRoomProcesser.actorMoveRoute()}Game.moduleModel.visit.waitVisitActorId=actorId;receptionRoomProcesser.startReception();this.startReceptior()}}};Object.defineProperty(AvatarManager,"hasActorVisit",{get:function(){var visitData=Game.moduleModel.visit.getVisitData();return visitData&&visitData.isWaiting},enumerable:true,configurable:true});AvatarManager.isActorOnVisit=function(avatarId){var data=Game.moduleModel.visit.getVisitData();if(data){return data.isWaiting&&data.actorId==avatarId}return false};AvatarManager.startReceptior=function(){var visitData=Game.moduleModel.visit.getVisitData();if(visitData&&visitData.isReceptior==false){Game.protosender.manageVisit.StartRece()}};AvatarManager.isInRoomReception=function(roomType){return roomType==Games.RoomType.Reception};AvatarManager.isActorReceptionOnLimit=function(actorId){if(this.isActorOnExercise(actorId)){return true}if(this.isActorOnFilming(actorId)){return true}if(this.isActorOnHide(actorId)){return true}return false};AvatarManager.isActorExerciseOnLimit=function(actorId){if(this.isActorOnFilming(actorId)){Game.system.toastText(Game.config.msg.getTxt(MsgKey.training_tips));return true}if(this.isActorOnVisit(actorId)){Game.system.toastText(Game.config.msg.getTxt(MsgKey.training_tips2));return true}return false};AvatarManager.isActorOnExercise=function(actorId){return Game.moduleModel.actor.isActorOnExercise(actorId)};AvatarManager.isActorOnFilming=function(actorId){if(Game.moduleModel.warData.moveData){var shootActorList=Game.moduleModel.warData.filmingYRList.getValues();var finder=shootActorList.findOne(function(value){return value.id==actorId});if(finder){return true}}return false};Object.defineProperty(AvatarManager,"isOnShoot",{get:function(){var moveData=Game.moduleModel.warData.moveData;if(moveData){if(moveData.state>=Proto.SE.EMovieState.filming&&moveData.state<Proto.SE.EMovieState.complete){return true}}return false},enumerable:true,configurable:true});AvatarManager.isActorAllocToRoom=function(actorId){return(Game.moduleModel.building.findActorById(actorId)!=null)};AvatarManager.isActorOnHide=function(actorId){return Game.moduleModel.actor.isHide(actorId)};Object.defineProperty(AvatarManager,"unitMaxNum",{get:function(){return gameDeviceConfig.unitMaxNum},enumerable:true,configurable:true});Object.defineProperty(AvatarManager,"maxRoomActorCount",{get:function(){return gameDeviceConfig.roomUnitMaxNum},enumerable:true,configurable:true});AvatarManager.sAvatarClick=new TypedSignal();AvatarManager.sEventFinish=new TypedSignal();AvatarManager.sBehaviorFinish=new TypedSignal();AvatarManager.sAvatarEnter=new TypedSignal();AvatarManager.sAvatarLeave=new TypedSignal();AvatarManager.sAvatarMoveEnd=new TypedSignal();AvatarManager.avatarEventTimeList=new Dictionary();AvatarManager.hasAllocedActorList=new Array();AvatarManager.MAX_EVENT_TIME=1;AvatarManager.MIN_AVATAR_GAP=70;AvatarManager.unitCtrlMap=new Dictionary();AvatarManager.MAX_AVATAR_NUM=100;AvatarManager.waitAllocActorList=[];return AvatarManager}());Games.AvatarManager=AvatarManager})(Games||(Games={}));var Games;(function(Games){var StageManager=(function(){function StageManager(){}StageManager.prototype.init=function(){this.homeSceneSet=new Games.HomeStage();this.homeSceneSet.start();this.oscar=new Games.OscarStage();this.oscar.start();this.roadshow=new Games.RoadShowStage();this.roadshow.start()};return StageManager}());Games.StageManager=StageManager})(Games||(Games={}));var Games;(function(Games){var Browser=laya.utils.Browser;var GameDriver=(function(){function GameDriver(){}GameDriver.init=function(){this.time=new Games.DriverTime();this.time.init();this.updateTimeSpan=Browser.now();this.renderTimeSpan=Browser.now();Laya.timer.loop(this.deltaTimeUpdateInMs,this,this.onUpdate);Laya.timer.loop(this.deltaTimeRenderInMs,this,this.onRender);Laya.timer.loop(this.deltaTimeSecondInMs,this,this.onSeconds)};GameDriver.registerDriver=function(driver){if(driver.isUpdateTick){this.updateDrivers.push(driver)}if(driver.isRenderTick){this.renderDrivers.push(driver)}if(driver.isSecondsTick){this.secondDrivers.push(driver)}};GameDriver.unregisterDriver=function(driver){if(driver.isUpdateTick){this.removeUpdateDrivers.push(driver)}if(driver.isRenderTick){this.removeRenderDrivers.push(driver)}if(driver.isSecondsTick){this.removeSecondDrivers.push(driver)}};GameDriver.onUpdate=function(){this.time.updateTime.deltaTime=(Browser.now()-this.updateTimeSpan)/1000;this.updateTimeSpan=Browser.now();var driverCount=this.updateDrivers.length;for(var i=0;i<driverCount;i++){this.updateDrivers[i].onUpdate()}var removeCount=this.removeUpdateDrivers.length;for(var i=removeCount-1;i>=0;i--){var index=this.updateDrivers.indexOf(this.removeUpdateDrivers[i]);if(index!=-1){this.updateDrivers.splice(index,1)}this.removeUpdateDrivers.splice(i,1)}};GameDriver.onRender=function(){this.time.renderTime.deltaTime=(Browser.now()-this.renderTimeSpan)/1000;this.renderTimeSpan=Browser.now();var driverCount=this.renderDrivers.length;for(var i=0;i<driverCount;i++){this.renderDrivers[i].onRender()}var removeCount=this.removeRenderDrivers.length;for(var i=removeCount-1;i>=0;i--){var index=this.renderDrivers.indexOf(this.removeRenderDrivers[i]);if(index!=-1){this.renderDrivers.splice(index,1)}this.removeRenderDrivers.splice(i,1)}};GameDriver.onSeconds=function(){var driverCount=this.secondDrivers.length;for(var i=0;i<driverCount;i++){this.secondDrivers[i].onSeconds()}var removeCount=this.removeSecondDrivers.length;for(var i=removeCount-1;i>=0;i--){var index=this.secondDrivers.indexOf(this.removeSecondDrivers[i]);if(index!=-1){this.secondDrivers.splice(index,1)}this.removeSecondDrivers.splice(i,1)}};GameDriver.updateDrivers=[];GameDriver.removeUpdateDrivers=[];GameDriver.renderDrivers=[];GameDriver.removeRenderDrivers=[];GameDriver.secondDrivers=[];GameDriver.removeSecondDrivers=[];GameDriver.deltaTimeUpdateInMs=50;GameDriver.deltaTimeRenderInMs=20;GameDriver.deltaTimeSecondInMs=1000;GameDriver.updateTimeSpan=0;GameDriver.renderTimeSpan=0;return GameDriver}());Games.GameDriver=GameDriver})(Games||(Games={}));var Games;(function(Games){var DriverTimeData=(function(){function DriverTimeData(){this.deltaTime=0.0333}return DriverTimeData}());Games.DriverTimeData=DriverTimeData;var DriverTime=(function(){function DriverTime(){this.fixedDeltaTime=0.02}DriverTime.prototype.init=function(){this.updateTime=new DriverTimeData();this.renderTime=new DriverTimeData()};return DriverTime}());Games.DriverTime=DriverTime})(Games||(Games={}));var Games;(function(Games){var ComponentHelper=(function(){function ComponentHelper(){}ComponentHelper.requestItem=function(newCls){return Game.pool.componentPool.fetch(newCls)};return ComponentHelper}());Games.ComponentHelper=ComponentHelper})(Games||(Games={}));var Games;(function(Games){var BTree;(function(BTree){var TaskState;(function(TaskState){TaskState[TaskState.Inactive=0]="Inactive";TaskState[TaskState.Running=1]="Running";TaskState[TaskState.Success=2]="Success";TaskState[TaskState.Failure=3]="Failure"})(TaskState=BTree.TaskState||(BTree.TaskState={}))})(BTree=Games.BTree||(Games.BTree={}))})(Games||(Games={}));var Games;(function(Games){var IdGenerater=(function(){function IdGenerater(){}IdGenerater.GenerateId=function(){var time=laya.utils.Browser.now()/1000;return(this.AppId<<48)+(time>>16)+ ++this.value};IdGenerater.getAppId=function(id){return Number(id>>48)};IdGenerater.AppId=1000;IdGenerater.value=1;return IdGenerater}());Games.IdGenerater=IdGenerater})(Games||(Games={}));var Games;(function(Games){var ComponentPool=(function(){function ComponentPool(){this.dictionary=new Dictionary()}ComponentPool.prototype.fetch=function(newCls){var type=newCls.name;if(this.dictionary.hasKey(type)){var list=this.dictionary.getValue(type);if(list.length>0){return list.pop()}}return new newCls()};ComponentPool.prototype.recycle=function(componet){if(!this.dictionary.hasKey(componet.Type)){var list=[];this.dictionary.add(componet.Type,list)}var poolList=this.dictionary.getValue(componet.Type);poolList.push(componet)};return ComponentPool}());Games.ComponentPool=ComponentPool})(Games||(Games={}));var Games;(function(Games){var VisitData=(function(){function VisitData(){this.tomaxTimeOut=0;this.isReceptior=false}Object.defineProperty(VisitData.prototype,"actorId",{get:function(){return this._actorId},set:function(value){this._actorId=value;if(value>0){this.actorConfig=Game.config.actor.getConfig(value)}},enumerable:true,configurable:true});Object.defineProperty(VisitData.prototype,"leaveTime",{get:function(){return this.startTime+EManageVisit.overdueTime},enumerable:true,configurable:true});Object.defineProperty(VisitData.prototype,"id",{get:function(){return this._id},set:function(value){this._id=value;if(this._id>0){this.config=Game.config.visit.getConfig(value)}},enumerable:true,configurable:true});Object.defineProperty(VisitData.prototype,"nextFansNum",{get:function(){var nowTime=Game.time.serverSeconds;var lastTime=this.lastTime;var duration=Math.max(0,nowTime-lastTime);var num=Math.floor(duration/this.intervalTime);if(this.isWaiting){num=num+1}num=Math.min(this.lineLimit,num);return num},enumerable:true,configurable:true});Object.defineProperty(VisitData.prototype,"isLeave",{get:function(){var nowTime=Game.time.serverSeconds;var nextTime=this.leaveTime;var duration=Math.max(0,nextTime-nowTime);var b=false;if(duration<=0){b=true}return b},enumerable:true,configurable:true});Object.defineProperty(VisitData.prototype,"isWaiting",{get:function(){var b=false;if(this.id>0&&this._actorId>0&&this.isLeave==false){b=true}return b},enumerable:true,configurable:true});VisitData.prototype.clearVisitTimeOut=function(){clearTimeout(this.visitTimeOut)};VisitData.prototype.starTimeToVisit=function(){var _this=this;this.clearVisitTimeOut();var nowTime=Game.time.serverSeconds;var nextTime=this.leaveTime;var duration=Math.max(0,nextTime-nowTime);if(this.id>0&&duration>0){this.visitTimeOut=setTimeout(function(){var preId=_this._id;Game.event.dispatch(GameEventKey.GameEventKey_UpdateVisitActor,preId)},duration*1000)}};VisitData.prototype.startToMaxTime=function(){if(this.tomaxTimeOut>0){clearTimeout(this.tomaxTimeOut);this.tomaxTimeOut=0}var nowTime=Game.time.serverSeconds;var nextNum=this.nextFansNum;if(nextNum<this.lineLimit){var duration=(this.lineLimit-nextNum)*this.intervalTime;this.tomaxTimeOut=setTimeout(function(){Game.event.dispatch(GameEventKey.GameEventKey_UpdateMainUIRed)},duration*1000)}Game.event.dispatch(GameEventKey.GameEventKey_UpdateMainUIRed)};Object.defineProperty(VisitData.prototype,"nextFansComeTime",{get:function(){var nowTime=Game.time.serverSeconds;var lastTime=this.lastTime+this.intervalTime;return Math.max(0,lastTime-nowTime)},enumerable:true,configurable:true});Object.defineProperty(VisitData.prototype,"actorData",{get:function(){return Game.moduleModel.actor.getActor(this._actorId)},enumerable:true,configurable:true});Object.defineProperty(VisitData.prototype,"isActorHidden",{get:function(){var actorData=Game.moduleModel.actor.getActor(this._actorId);if(actorData){return actorData.hide}return false},enumerable:true,configurable:true});Object.defineProperty(VisitData.prototype,"isMax",{get:function(){return this.nextFansNum>=this.lineLimit},enumerable:true,configurable:true});return VisitData}());Games.VisitData=VisitData})(Games||(Games={}));var Games;(function(Games){var TypeWriteData=(function(){function TypeWriteData(){}TypeWriteData.prototype.startTypeWrite=function(delay,src,textField,complete,update){if(update===void 0){update=null}this.stopTypeWrite();this.src=src;this.completeFunc=complete;this.updateFunc=update;this.textField=textField;this.charIndex=0;this.curString="";Laya.timer.loop(delay,this,this.updateTime);this.updateTime()};TypeWriteData.prototype.stopTypeWrite=function(){Laya.timer.clear(this,this.updateTime)};TypeWriteData.prototype.setDelay=function(delay){Laya.timer.loop(delay,this,this.updateTime)};TypeWriteData.prototype.completeTypeWrite=function(){this.charByTimeComplete()};TypeWriteData.prototype.updateTime=function(){if(this.charIndex>=this.src.length){this.charByTimeComplete()}else{this.charByTimeUpdate();this.charIndex++}};TypeWriteData.prototype.charByTimeComplete=function(){this.textField.text=this.src;if(this.completeFunc){this.completeFunc()}this.stopTypeWrite()};TypeWriteData.prototype.charByTimeUpdate=function(){this.curString+=this.src.charAt(this.charIndex);if(this.textField){this.textField.text=this.curString}if(this.updateFunc){this.updateFunc(this.curString)}};return TypeWriteData}());Games.TypeWriteData=TypeWriteData})(Games||(Games={}));var Games;(function(Games){var TaskData=(function(){function TaskData(){}Object.defineProperty(TaskData.prototype,"progress",{get:function(){if(this.isMainTask){this.calClientProgress()}return this._progress},set:function(value){this._progress=value},enumerable:true,configurable:true});Object.defineProperty(TaskData.prototype,"id",{get:function(){return this._id},set:function(value){this._id=value;this.config=Game.config.task.getConfig(value);if(this.config&&this.config.type==EAchievementType.mainTask){this.mainConfig=Game.config.maintask.getConfig(value)}},enumerable:true,configurable:true});Object.defineProperty(TaskData.prototype,"isFinished",{get:function(){var finish=false;if(this.isMainTask){finish=this.progress>=this.mainConfig.goal}else{if(this.config){finish=this.progress>=this.config.goal}}return finish},enumerable:true,configurable:true});Object.defineProperty(TaskData.prototype,"isMainTask",{get:function(){if(this.config==null){return false}return this.config.type==EAchievementType.mainTask},enumerable:true,configurable:true});TaskData.prototype.calClientProgress=function(){if(this.mainConfig){switch(this.mainConfig.require){case Games.MainTaskRequireType.RequireType_1_MakeBuild:this.progress=Game.moduleModel.task.clientGetBuildRoomProgress(this.mainConfig.r_value);break;case Games.MainTaskRequireType.RequireType_2_UpgradeBuild:this.progress=Game.moduleModel.task.clientGetBuildUpgradeProgress(this.mainConfig.r_value);break;case Games.MainTaskRequireType.RequireType_3_UpgradeActor:this.progress=Game.moduleModel.task.clientGetUpgradeActorTimesProgress(this.mainConfig.r_value);break;case Games.MainTaskRequireType.RequireType_4_NoseActor:this.progress=Game.moduleModel.task.clientGetNoseActorProgress();break;case Games.MainTaskRequireType.RequireType_5_StreetPublicize:this.progress=Game.moduleModel.task.clientGetStreetPublicizeProgress(this.mainConfig.r_value);break;case Games.MainTaskRequireType.RequireType_6_RoadShow:this.progress=Game.moduleModel.task.clientGetRoadShowProgress();break;case Games.MainTaskRequireType.RequireType_7_CityFinish:this.progress=Game.moduleModel.task.clientGetCityFinishProgress(this.mainConfig.r_value);break;case Games.MainTaskRequireType.RequireType_8_TaskMovie:break;case Games.MainTaskRequireType.RequireType_9_SeeMovieReward:this.progress=Game.moduleModel.task.clientGetSeeMovieReward();break;case Games.MainTaskRequireType.RequireType_10_GetMovieReward:break;case Games.MainTaskRequireType.RequireType_11_UpgradeAttention:break;case Games.MainTaskRequireType.RequireType_12_AppointActor:this.progress=Game.moduleModel.task.clientGetAmbassadorNumProgress(this.mainConfig.r_value);break;case Games.MainTaskRequireType.RequireType_13_ChooseFocusPointCity:this.progress=Game.moduleModel.task.clientChooseFoucePointCityProgress();break;case Games.MainTaskRequireType.RequireType_14_GetCityReward:break;case Games.MainTaskRequireType.RequireType_20_OpenRank:this.progress=Game.moduleModel.task.clientGetOpenRankWindow();break;default:break}}};Object.defineProperty(TaskData.prototype,"mainTaskDesc",{get:function(){var desc=this.config.name+format(" ({0}/{1})",this.progress,this.mainConfig.goal);return desc},enumerable:true,configurable:true});return TaskData}());Games.TaskData=TaskData})(Games||(Games={}));var Games;(function(Games){var StreetData=(function(){function StreetData(){}StreetData.CreateStreet=function(id){var street=new StreetData();street.id=id;return street};Object.defineProperty(StreetData.prototype,"Name",{get:function(){return this.Cfg.name},enumerable:true,configurable:true});Object.defineProperty(StreetData.prototype,"Reward",{get:function(){return this.Cfg.upgrade_reward},enumerable:true,configurable:true});Object.defineProperty(StreetData.prototype,"Cfg",{get:function(){return Game.config.blockLevel.getConfig(this.id)},enumerable:true,configurable:true});Object.defineProperty(StreetData.prototype,"isCurrent",{get:function(){return this.id==Game.moduleModel.street.streetCurrentId},enumerable:true,configurable:true});Object.defineProperty(StreetData.prototype,"isLock",{get:function(){return this.id>Game.moduleModel.street.streetCurrentId},enumerable:true,configurable:true});Object.defineProperty(StreetData.prototype,"iconUrl",{get:function(){var cfg=Game.config.avatar.getConfig(this.Cfg.pic);if(cfg){return cfg.iconUrl}return""},enumerable:true,configurable:true});Object.defineProperty(StreetData.prototype,"cinemaStaticNum",{get:function(){if(this.Cfg.cinema&&this.Cfg.cinema.length>0){var cfg=Game.config.cinema.getConfig(this.Cfg.cinema[0]);if(cfg){return cfg.num}}return 0},enumerable:true,configurable:true});Object.defineProperty(StreetData.prototype,"cinemaNum",{get:function(){var treaterIds=User.info.theaterIds;for(var index=0;index<treaterIds.length;index++){var treater=treaterIds[index];var cfg=Game.config.cinema.getConfig(treater);if(cfg.unlock==this.id){return cfg.num}}return 0},enumerable:true,configurable:true});Object.defineProperty(StreetData.prototype,"cinemaName",{get:function(){var treaterIds=User.info.theaterIds;for(var index=0;index<treaterIds.length;index++){var treater=treaterIds[index];var cfg=Game.config.cinema.getConfig(treater);if(cfg.unlock==this.id){return cfg.name}}return""},enumerable:true,configurable:true});Object.defineProperty(StreetData.prototype,"canSign",{get:function(){return !this.isLock&&this.cinemaNum==0},enumerable:true,configurable:true});Object.defineProperty(StreetData.prototype,"hasCinema",{get:function(){return this.cinemaNum>0},enumerable:true,configurable:true});Object.defineProperty(StreetData.prototype,"LastStreet",{get:function(){var lastCfg=Game.config.blockLevel.GetLastStreetCfg(this.id);if(lastCfg){return StreetData.CreateStreet(lastCfg.id)}return null},enumerable:true,configurable:true});return StreetData}());Games.StreetData=StreetData})(Games||(Games={}));var Games;(function(Games){var StorySuitData=(function(){function StorySuitData(){}Object.defineProperty(StorySuitData.prototype,"id",{get:function(){return this._id},set:function(value){this._id=value;this.config=Game.config.storyStackSort.getConfig(value)},enumerable:true,configurable:true});Object.defineProperty(StorySuitData.prototype,"isCollect",{get:function(){var scripts=this.config.scripts;var b=true;for(var index=0;index<scripts.length;index++){var element=scripts[index];if(Game.moduleModel.story.hasStoryData(element)==false){b=false;break}}return b},enumerable:true,configurable:true});Object.defineProperty(StorySuitData.prototype,"isGotReward",{get:function(){return this.status==EStoryModule.hadGet},enumerable:true,configurable:true});Object.defineProperty(StorySuitData.prototype,"isHasRewardCanGet",{get:function(){return(this.isCollect)&&(this.isGotReward==false)},enumerable:true,configurable:true});return StorySuitData}());Games.StorySuitData=StorySuitData})(Games||(Games={}));var Games;(function(Games){var StoryData=(function(){function StoryData(){this.isGold=false}Object.defineProperty(StoryData.prototype,"storyProgressInfo",{get:function(){return this._storyProgressInfo},set:function(value){this._storyProgressInfo=value;var isGold=true;for(var index=0;index<this.storyProgressInfo.length;index++){var element=this.storyProgressInfo[index];if(element.status!=EStoryModule.finish){isGold=false}}this.isGold=isGold},enumerable:true,configurable:true});Object.defineProperty(StoryData.prototype,"id",{get:function(){return this._id},set:function(value){this._id=value;this.config=Game.config.story.getConfig(value)},enumerable:true,configurable:true});Object.defineProperty(StoryData.prototype,"isFinish",{get:function(){return this.status==EStoryModule.finish},enumerable:true,configurable:true});return StoryData}());Games.StoryData=StoryData})(Games||(Games={}));var Games;(function(Games){var SkillData=(function(){function SkillData(){}SkillData.prototype.setDTActor=function(dtActor){this.dtActor=dtActor;this.config=Game.config.skill.getConfigByGroupIdAndLv(dtActor.group_id,1)};SkillData.prototype.update=function(data){this.data=data;this.isEffect=false;if(this.data){this.isEffect=this.data.isEffect;this.config=Game.config.skill.getConfig(this.data.skillId)}};Object.defineProperty(SkillData.prototype,"iconUrl",{get:function(){return Game.config.avatar.getConfig(this.config.icon).iconUrl},enumerable:true,configurable:true});Object.defineProperty(SkillData.prototype,"desc",{get:function(){return format(this.config.tips,this.config.value)},enumerable:true,configurable:true});Object.defineProperty(SkillData.prototype,"effectDesc",{get:function(){return format(this.config.effecttext,this.config.value)},enumerable:true,configurable:true});Object.defineProperty(SkillData.prototype,"isUnlock",{get:function(){var acotrlv=1;var data=Game.moduleModel.actor.getActor(this.actorId);if(data){acotrlv=data.level}return this.dtActor.lv<=acotrlv},enumerable:true,configurable:true});Object.defineProperty(SkillData.prototype,"isEnable",{get:function(){var enable=this.isUnlock;var data=Game.moduleModel.actor.getActor(this.actorId);if(data&&enable){if(data.stamina>=this.config.stamina){enable=true}else{enable=false}}return enable},enumerable:true,configurable:true});return SkillData}());Games.SkillData=SkillData})(Games||(Games={}));var Games;(function(Games){var ServerRewardItemData=(function(){function ServerRewardItemData(rank,rewardList){this.rank=rank;this.rewardList=[];for(var index=0;index<rewardList.length;index++){var reward=rewardList[index];var item=Games.ItemData.Create(reward.itemId,reward.itemNum);this.rewardList.push(item)}}Object.defineProperty(ServerRewardItemData.prototype,"stringRank",{get:function(){if(this.rank.length>=2&&this.rank[0]==this.rank[1]){return this.rank[0].toString()}return this.rank.join("~")},enumerable:true,configurable:true});return ServerRewardItemData}());Games.ServerRewardItemData=ServerRewardItemData})(Games||(Games={}));var Games;(function(Games){var RoleData=(function(){function RoleData(){}return RoleData}());Games.RoleData=RoleData})(Games||(Games={}));var Games;(function(Games){var RankServerData=(function(){function RankServerData(rank,desc){this.rank=rank;this.desc=desc;if(desc.totalBoxOffice!=null){var total=desc.totalBoxOffice.toString();this.desc.totalBoxOffice=parseInt(total);if(this.desc.totalBoxOffice<0){this.desc.totalBoxOffice=0}}else{this.desc.totalBoxOffice=-1;console.warn("[error]服务器数据 RankServerData.totalBoxOffice为空值")}}Object.defineProperty(RankServerData.prototype,"playerIconUrl",{get:function(){return Game.config.headPortrait.GetPlayerIconUrl(this.desc.portrait,this.desc.sex)},enumerable:true,configurable:true});return RankServerData}());Games.RankServerData=RankServerData;var RankGroupData=(function(){function RankGroupData(rank,desc){this.rank=rank;this.desc=desc;if(desc.totalBoxOffice!=null){var total=desc.totalBoxOffice.toString();this.desc.totalBoxOffice=parseInt(total);if(this.desc.totalBoxOffice<0){this.desc.totalBoxOffice=0}}else{this.desc.totalBoxOffice=-1;console.warn("[error]服务器数据 RankGroupData.totalBoxOffice为空值")}}Object.defineProperty(RankGroupData.prototype,"canCongratulate",{get:function(){var cfgList=Game.config.blockRankingList.getConfigList();for(var index=0;index<cfgList.length;index++){var cfg=cfgList[index];if(cfg.type==Games.RankListType.GroupMovieList&&cfg.rank==this.rank&&cfg.congratulate_switch==true){return Game.moduleModel.street.hasCongratulateNums}}return false},enumerable:true,configurable:true});Object.defineProperty(RankGroupData.prototype,"hasReward",{get:function(){var cfgList=Game.config.blockRankingList.getConfigList();for(var index=0;index<cfgList.length;index++){var cfg=cfgList[index];if(cfg.type==Games.RankListType.GroupList&&cfg.rank==this.rank&&cfg.extra_reward&&cfg.extra_reward.length>0){return true}}return false},enumerable:true,configurable:true});Object.defineProperty(RankGroupData.prototype,"extraReward",{get:function(){return Game.config.blockRankingList.GetExtraReward(Games.BlockRankRewardType.TOTEL,this.rank)},enumerable:true,configurable:true});Object.defineProperty(RankGroupData.prototype,"playerIconUrl",{get:function(){return Game.config.headPortrait.GetPlayerIconUrl(this.desc.portrait,this.desc.sex)},enumerable:true,configurable:true});return RankGroupData}());Games.RankGroupData=RankGroupData;var RankGroupMovieData=(function(){function RankGroupMovieData(rank,desc){this.rank=rank;this.desc=desc;if(desc.totalBoxOffice!=null){var total=desc.totalBoxOffice.toString();this.desc.totalBoxOffice=parseInt(total);if(this.desc.totalBoxOffice<0){this.desc.totalBoxOffice=0}}else{this.desc.totalBoxOffice=-1;console.warn("[error]服务器数据 RankGroupMovieData.totalBoxOffice为空值")}}Object.defineProperty(RankGroupMovieData.prototype,"canCongratulate",{get:function(){var cfgList=Game.config.blockRankingList.getConfigList();for(var index=0;index<cfgList.length;index++){var cfg=cfgList[index];if(cfg.type==Games.RankListType.GroupList&&cfg.rank==this.rank&&cfg.congratulate_switch==true){return Game.moduleModel.street.hasCongratulateNums}}return false},enumerable:true,configurable:true});return RankGroupMovieData}());Games.RankGroupMovieData=RankGroupMovieData})(Games||(Games={}));var Games;(function(Games){var PropField=(function(){function PropField(){this.spectacle=0;this.perform=0;this.plot=0;this.art=0;this.entertainment=0}return PropField}());Games.PropField=PropField})(Games||(Games={}));var Games;(function(Games){var ProgressBoxData=(function(){function ProgressBoxData(){this.uuid="";this._id=0;this.progress=0;this.staus=0;this.lastTime=0;this.timeOutHandler=0}Object.defineProperty(ProgressBoxData.prototype,"id",{get:function(){return this._id},set:function(value){this._id=value},enumerable:true,configurable:true});ProgressBoxData.prototype.isEnableGet=function(index){var config=this.configs[index];return this.progress>=config.completion};ProgressBoxData.prototype.isGet=function(index){return((this.staus>>index)&1)!=0};ProgressBoxData.prototype.getResetHour=function(){switch(this.id){case EProgressBoxId.manageOrder:return 22;default:return 24}};ProgressBoxData.prototype.startResetTime=function(){var _this=this;clearTimeout(this.timeOutHandler);var resetHour=this.getResetHour();var currSecond=Game.time.serverSeconds;var lastHour=Games.TimeHelper.GetServerDateTime(this.lastTime).getHours();var nowHour=Games.TimeHelper.GetServerDateTime().getHours();if(currSecond-this.lastTime>Games.TimeHelper.OneDaySeconds){this.resetStatus()}else{var isSameDay=Games.TimeHelper.IsSameDay(this.lastTime,currSecond);if(isSameDay){if(nowHour>=resetHour&&lastHour<resetHour){this.resetStatus()}}else{if(lastHour<resetHour){this.resetStatus()}}}var nextSecond=Games.TimeHelper.TimeReformat(resetHour).getTime()/1000;if(nowHour>=resetHour){nextSecond+=Games.TimeHelper.OneDaySeconds}if(currSecond<nextSecond){var time=nextSecond-currSecond;this.timeOutHandler=setTimeout(function(){_this.resetStatus()},time*1000)}};ProgressBoxData.prototype.resetStatus=function(){this.progress=0;this.staus=0;Game.event.dispatch(GameEventKey.GameEventKey_UpdateProgressBoxStatus,this.id)};Object.defineProperty(ProgressBoxData.prototype,"configs",{get:function(){if(!this._configs){if(this._id>0){this._configs=Game.config.complete.getCompleteList(this._id)}}return this._configs},enumerable:true,configurable:true});Object.defineProperty(ProgressBoxData.prototype,"count",{get:function(){return this.configs.length},enumerable:true,configurable:true});Object.defineProperty(ProgressBoxData.prototype,"maxProgress",{get:function(){return this.configs[this.configs.length-1].completion},enumerable:true,configurable:true});ProgressBoxData.prototype.getReadNum=function(){var num=0;for(var i=0;i<this.count;i++){if(this.isEnableGet(i)){if(!this.isGet(i)){num++}}}return num};return ProgressBoxData}());Games.ProgressBoxData=ProgressBoxData})(Games||(Games={}));var Games;(function(Games){var ProduceSkillType;(function(ProduceSkillType){ProduceSkillType[ProduceSkillType.Process=1]="Process";ProduceSkillType[ProduceSkillType.Storage=2]="Storage";ProduceSkillType[ProduceSkillType.Time=3]="Time";ProduceSkillType[ProduceSkillType.Output=4]="Output"})(ProduceSkillType=Games.ProduceSkillType||(Games.ProduceSkillType={}));var ProduceSkill=(function(){function ProduceSkill(){}return ProduceSkill}());Games.ProduceSkill=ProduceSkill;var ProduceData=(function(){function ProduceData(){this.produceSkillList=[];this.outFactorList=[]}return ProduceData}());Games.ProduceData=ProduceData})(Games||(Games={}));var Games;(function(Games){var OscarRewardData=(function(){function OscarRewardData(){}OscarRewardData.Create=function(type,value1,value2,value3,value4,value5){var data=new OscarRewardData();data.type=type;data.value1=value1;data.value2=value2;data.value3=value3;data.value4=value4;data.value5=value5;return data};Object.defineProperty(OscarRewardData.prototype,"name",{get:function(){switch(this.type){case Proto.SE.EOscarType.bestBoxOffice:return Games.TEXT.OscarRewardNameDesc_6;case Proto.SE.EOscarType.bigSell:return Games.TEXT.OscarRewardNameDesc_9;case Proto.SE.EOscarType.totalBoxOffice:case Proto.SE.EOscarType.movies:return"";default:break}return""},enumerable:true,configurable:true});Object.defineProperty(OscarRewardData.prototype,"title",{get:function(){switch(this.type){case Proto.SE.EOscarType.bestBoxOffice:var str=this.value2;str=str.replace("&","&amp;");return str==""?Games.TEXT.OscarRewardNoMovie:str;case Proto.SE.EOscarType.totalBoxOffice:return Games.TEXT.OscarRewardValueDesc_7.format(this.value2,formatNumberUnit(this.value1,this.value1>1000?1:0));case Proto.SE.EOscarType.movies:return Games.TEXT.OscarRewardValueDesc_8.format(this.value1);case Proto.SE.EOscarType.bigSell:return Games.TEXT.OscarRewardValueDesc_9.format(this.value1);default:break}return""},enumerable:true,configurable:true});Object.defineProperty(OscarRewardData.prototype,"info",{get:function(){switch(this.type){case Proto.SE.EOscarType.bestBoxOffice:return Games.TEXT.OscarRewardInfoDesc_6.format(this.value3,formatNumberUnit(this.value1,this.value1>1000?1:0));case Proto.SE.EOscarType.totalBoxOffice:if(this.value4==0||this.value3==0){return""}return Games.TEXT.OscarRewardInfoDesc_7.format((this.value4/this.value3*100).toFixed(1),Game.moduleModel.street.GetStreetName(Game.moduleModel.oscar.OscarStreetId),this.value3);case Proto.SE.EOscarType.movies:case Proto.SE.EOscarType.bigSell:return"";default:break}return""},enumerable:true,configurable:true});Object.defineProperty(OscarRewardData.prototype,"tip",{get:function(){return Game.config.msg.getConfig(OscarRewardData.listTipDesc[this.type]).notice},enumerable:true,configurable:true});Object.defineProperty(OscarRewardData.prototype,"RewardList",{get:function(){if(this.rewards){return this.rewards}var items=[];switch(this.type){case Proto.SE.EOscarType.bestBoxOffice:items=Game.config.blockRankingList.GetReward(2,this.value3);break;case Proto.SE.EOscarType.totalBoxOffice:items=Game.config.blockRankingList.GetReward(1,this.value2);break;case Proto.SE.EOscarType.movies:if(this.value1==0){break}var movieReward=Game.moduleModel.oscar.lastMovieReward;for(var index=0;index<movieReward.length;index++){var reward=new DTItemNum();reward.itemId=movieReward[index].itemId;reward.itemNum=movieReward[index].itemNum*this.value1;items.push(reward)}break;case Proto.SE.EOscarType.bigSell:if(this.value1==0){break}var globalMaxLimit=Game.config.global.getConfig(GlobalKey.KEY_24_AoSiKaBi__JiangLiShangXian).value;var maxValue=this.value1>globalMaxLimit?globalMaxLimit:this.value1;var cfg=Game.config.global.getConfig(GlobalKey.KEY_23_AoSiKaBi__JiangLiDaoJu);if(cfg){var values=cfg.value2;for(var index=0;index<values.length;index++){var value=values[index];var item_1=new DTItemNum;item_1.itemId=value.v1;item_1.itemNum=value.v2*maxValue;items.push(item_1)}}break;default:break}this.rewards=[];for(var index=0;index<items.length;index++){var item=items[index];this.rewards.push(Games.ItemData.Create(item.itemId,item.itemNum))}return this.rewards},enumerable:true,configurable:true});Object.defineProperty(OscarRewardData.prototype,"IsHistoryBest",{get:function(){switch(this.type){case Proto.SE.EOscarType.totalBoxOffice:return this.value5;default:break}return false},enumerable:true,configurable:true});Object.defineProperty(OscarRewardData.prototype,"canReward",{get:function(){return this.RewardList.length>0},enumerable:true,configurable:true});Object.defineProperty(OscarRewardData.prototype,"hasGetReward",{get:function(){return Game.moduleModel.oscar.HasGetReward(this.type)},enumerable:true,configurable:true});OscarRewardData.listTipDesc=[0,0,0,0,0,0,1063,1064,1065,1066];return OscarRewardData}());Games.OscarRewardData=OscarRewardData})(Games||(Games={}));var Games;(function(Games){var OrderData=(function(){function OrderData(){this.isCooperation=false}Object.defineProperty(OrderData.prototype,"id",{get:function(){return this._id},set:function(value){this._id=value;this.config=Game.config.order.getConfig(this._id)},enumerable:true,configurable:true});OrderData.prototype.isPut=function(id){var b=false;for(var index=0;index<this.items.length;index++){var element=this.items[index];if(element.itemId==id){b=true;break}}return b};OrderData.prototype.getOrderItem=function(id){for(var index=0;index<this.items.length;index++){var element=this.items[index];if(element.itemId==id){return element}}return null};Object.defineProperty(OrderData.prototype,"isCooperationOrder",{get:function(){var b=false;for(var index=0;index<this.items.length;index++){var element=this.items[index];if(element.portrait>=0){b=true;break}}return b},enumerable:true,configurable:true});Object.defineProperty(OrderData.prototype,"cooperationOrderItem",{get:function(){for(var index=0;index<this.items.length;index++){var element=this.items[index];if(element.portrait>=0){return element}}return null},enumerable:true,configurable:true});Object.defineProperty(OrderData.prototype,"isAllComplete",{get:function(){var b=true;for(var index=0;index<this.config.need.length;index++){var element=this.config.need[index];if(this.isPut(element.itemId)==false){b=false}}return b},enumerable:true,configurable:true});Object.defineProperty(OrderData.prototype,"isCanPut",{get:function(){var b=true;for(var index=0;index<this.config.need.length;index++){var element=this.config.need[index];if(this.isPut(element.itemId)==false){if(Game.moduleModel.item.getItemNum(element.itemId)<element.itemNum){b=false;break}}}return b},enumerable:true,configurable:true});Object.defineProperty(OrderData.prototype,"delTime",{get:function(){return this.lastTime+EManageOrder.baseTime},enumerable:true,configurable:true});Object.defineProperty(OrderData.prototype,"expiredTime",{get:function(){return this.lastTime+EManageOrder.baseTime},enumerable:true,configurable:true});OrderData.prototype.startDelTime=function(callBack){var _this=this;var nowTime=Game.time.serverSeconds;var endTime=this.delTime;var duration=endTime-nowTime;this.deleteCallBack=callBack;if(duration>0){this.timeOut=setTimeout(function(){_this.deleteComplete()},duration*1000)}else{this.deleteComplete()}};OrderData.prototype.startExpiredTime=function(callBack){var _this=this;var nowTime=Game.time.serverSeconds;var endTime=this.expiredTime;var duration=endTime-nowTime;this.expiredCallBack=callBack;if(duration>0){this.timeOut=setTimeout(function(){_this.expiredComplete()},duration*1000)}else{this.expiredComplete()}};OrderData.prototype.expiredComplete=function(){this.expiredCallBack(this.uuid);this.dispatch()};OrderData.prototype.dispatch=function(){if(this.isCooperation){Game.event.dispatch(GameEventKey.GameEventKey_UpdateCoopreationOrderView)}else{Game.event.dispatch(GameEventKey.GameEventKey_UpdateOrderView)}};OrderData.prototype.deleteComplete=function(){this.deleteCallBack(this.uuid)};OrderData.prototype.clearTime=function(){clearTimeout(this.timeOut)};OrderData.prototype.isRemoved=function(){var b=false;var duration=0;if(this.deleteFlag){duration=Game.time.getSubSecondsAfter(this.delTime);if(duration<=0){b=true}}else{duration=Game.time.getSubSecondsAfter(this.expiredTime)}return b};Object.defineProperty(OrderData.prototype,"rewardItems",{get:function(){this._rewardItems=[];var item=new DTItemNum();item.itemId=this.config.reward.itemId;item.itemNum=Game.moduleModel.building.getBuildEffectNum(Games.RoomType.Sale,item.itemId,this.config.reward.itemNum);this._rewardItems.push(item);item=new DTItemNum();item.itemId=8;item.itemNum=Game.moduleModel.building.getBuildEffectNum(Games.RoomType.Sale,item.itemId,this.config.expect);this._rewardItems.push(item);return this._rewardItems},enumerable:true,configurable:true});return OrderData}());Games.OrderData=OrderData})(Games||(Games={}));var Games;(function(Games){var NoticeData=(function(){function NoticeData(){this.itemList=[]}NoticeData.CreateByProto=function(msg){var notice=new NoticeData();notice.title=msg.title;notice.content=msg.content;notice.itemList=Games.ItemData.BinningItemList(msg.itemList);notice.time=this.TimeAnalysis(msg.messageDetailUrl);notice.AddTick();return notice};NoticeData.TimeAnalysis=function(str){var time=parseInt(str);return time};NoticeData.prototype.AddTick=function(){var time=this.time-Game.time.serverSeconds;if(time>NoticeData.PreNoticeTime){this.tick=Game.tick.AddTick(1,time-NoticeData.PreNoticeTime,Handler.create(this,this.OnTickClock,null,false),Handler.create(this,this.OnTickFinish1,null,false));this.tick.Restart()}else{if(time>0){this.OnTickFinish1()}else{return}}};NoticeData.prototype.AddTick2=function(){var time=this.time-Game.time.serverSeconds;this.tick=Game.tick.AddTick(1,time,Handler.create(this,this.OnTickClock,null,false),Handler.create(this,this.OnTickFinish2,null,false));this.tick.Restart()};NoticeData.prototype.ClearTick=function(){if(this.tick){this.tick.Stop();Game.tick.ClearTick(this.tick);this.tick=null}};NoticeData.prototype.OnTickClock=function(times){};NoticeData.prototype.OnTickFinish1=function(){Game.system.alrtTextFull(this.content,this.title);this.AddTick2()};NoticeData.prototype.OnTickFinish2=function(){Game.system.alrtTextFull(Games.TEXT.NoticeServerClose,Games.TEXT.NoticeTitle,null,function(){if(window.conch&&window.conch["exit"]){window.conch.exit()}})};NoticeData.PreNoticeTime=30*60;return NoticeData}());Games.NoticeData=NoticeData})(Games||(Games={}));var Games;(function(Games){var MissionData=(function(){function MissionData(){this.id=0;this.unlock=true;this.protoData=new Proto.SS.TaskData()}return MissionData}());Games.MissionData=MissionData})(Games||(Games={}));var Games;(function(Games){var MeetingData=(function(){function MeetingData(){this.tomaxTimeOut=0}Object.defineProperty(MeetingData.prototype,"id",{get:function(){return this._id},set:function(value){this._id=value;if(value>0){this.config=Game.config.meetingRewards.getConfig(value)}},enumerable:true,configurable:true});Object.defineProperty(MeetingData.prototype,"nextMeetingNum",{get:function(){var nowTime=Game.time.serverSeconds;var lastTime=this.lastTime;var duration=0;if(nowTime>lastTime){duration=nowTime-lastTime}var num=Math.floor(duration/this.intervalTime);num=Math.min(this.lineLimit,num);return num},enumerable:true,configurable:true});Object.defineProperty(MeetingData.prototype,"nextMeetingComeTime",{get:function(){var nowTime=Game.time.serverSeconds;var lastTime=this.lastTime+this.intervalTime;return Math.max(0,lastTime-nowTime)},enumerable:true,configurable:true});Object.defineProperty(MeetingData.prototype,"rewards",{get:function(){var item=new DTItemNum();item.itemId=this.config.rewards.itemId;var num=Game.moduleModel.building.getBuildEffectNum(Games.RoomType.Meeting,item.itemId,this.config.rewards.itemNum);item.itemNum=num;var expect=new DTItemNum();expect.itemId=EItemId.expect;num=Game.moduleModel.building.getBuildEffectNum(Games.RoomType.Meeting,expect.itemId,this.config.expect);expect.itemNum=num;var items=[item,expect];return items},enumerable:true,configurable:true});Object.defineProperty(MeetingData.prototype,"meetingMultipleRate",{get:function(){var rate=1;if(this.randResult>0){rate=Game.config.meetingGame.getConfig(this.randResult).times.v1/100}return rate},enumerable:true,configurable:true});MeetingData.prototype.pireceIntoDaDianForMaidian=function(result){var rat=1;switch(this.randResult){case 1001:case 1002:case 1003:case 1004:rat=3;break;case 2001:case 2002:case 2003:rat=2;break}if(rat===1){return format("{0}&{1}&{2}",rat,"N",result)}else{return format("{0}&{1}&{2}",rat,this.resultIntoDaDian,result)}};Object.defineProperty(MeetingData.prototype,"resultIntoDaDian",{get:function(){var rate=0;if(this.randResult>0){rate=Game.config.meetingGame.getConfig(this.randResult).result;switch(rate){case 1:rate=1;break;case 2:rate=0;break;case 3:rate=-1;break;case 4:rate=-2;break;default:break}}return rate},enumerable:true,configurable:true});Object.defineProperty(MeetingData.prototype,"resultRewards",{get:function(){var item=new DTItemNum();item.itemId=this.config.rewards.itemId;var num=Game.moduleModel.building.getBuildEffectNum(Games.RoomType.Meeting,item.itemId,this.config.rewards.itemNum);item.itemNum=Math.floor(num*this.meetingMultipleRate);var expect=new DTItemNum();expect.itemId=EItemId.expect;num=Game.moduleModel.building.getBuildEffectNum(Games.RoomType.Meeting,expect.itemId,this.config.expect);expect.itemNum=Math.floor(num*this.meetingMultipleRate);this.rewardData=[item,expect];return this.rewardData},enumerable:true,configurable:true});Object.defineProperty(MeetingData.prototype,"costMoney",{get:function(){return Game.config.playerLevel.getConfig(User.info.level).cost},enumerable:true,configurable:true});MeetingData.prototype.startToMaxTime=function(){if(this.tomaxTimeOut>0){clearTimeout(this.tomaxTimeOut);this.tomaxTimeOut=0}var nowTime=Game.time.serverSeconds;var nextNum=this.nextMeetingNum;if(nextNum<this.lineLimit){var totalDuration=this.lineLimit*this.intervalTime;var nextTime=totalDuration+this.lastTime;if(nextTime>nowTime){var diffTime=nextTime-nowTime;if(diffTime>0){this.tomaxTimeOut=setTimeout(function(){Game.event.dispatch(GameEventKey.GameEventKey_UpdateMainUIRed)},diffTime*1000)}}}Game.event.dispatch(GameEventKey.GameEventKey_UpdateMainUIRed)};Object.defineProperty(MeetingData.prototype,"isMax",{get:function(){return this.nextMeetingNum>=this.lineLimit},enumerable:true,configurable:true});return MeetingData}());Games.MeetingData=MeetingData})(Games||(Games={}));var Games;(function(Games){var MailData=(function(){function MailData(){this.uuid="";this.title="";this.content="";this.itemList=null;this.createTime=0;this.IsRewardGot=false;this.isNew=false}MailData.Create=function(data){var item=new MailData();item.content=data.content;item.itemList=data.itemList;item.createTime=data.createTime;item.IsRewardGot=data.IsRewardGot;item.isNew=data.isNew;item.title=data.title;item.uuid=data.uuid;return item};Object.defineProperty(MailData.prototype,"IsNew",{get:function(){if(this.itemList.length>0){return this.isNew&&!this.IsRewardGot}return this.isNew},enumerable:true,configurable:true});Object.defineProperty(MailData.prototype,"HasReward",{get:function(){return this.itemList.length>0&&!this.IsRewardGot},enumerable:true,configurable:true});Object.defineProperty(MailData.prototype,"HasGetReward",{get:function(){return this.itemList.length>0&&this.IsRewardGot},enumerable:true,configurable:true});return MailData}());Games.MailData=MailData})(Games||(Games={}));var Games;(function(Games){var ItemData=(function(){function ItemData(){this.itemId=0;this.itemNum=0;this.createTime=0}Object.defineProperty(ItemData.prototype,"itemNumTxt",{get:function(){var fix=this.itemNum>1000?1:0;return formatNumberUnit(this.itemNum,fix)},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"itemConfig",{get:function(){return Game.config.item.getConfig(this.itemId)},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"itemType",{get:function(){if(this.itemConfig){return this.itemConfig.type}return 0},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"itemName",{get:function(){if(this.itemConfig){return this.itemConfig.name}return this.itemId+"\u6CA1\u914D\u7F6E\u8BE5\u7269\u54C1"},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"itemDes",{get:function(){if(this.itemConfig){return this.itemConfig.item_des}return this.itemId+"\u6CA1\u914D\u7F6E\u8BE5\u7269\u54C1"},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"itemStar",{get:function(){if(this.itemConfig){var propertyCfg=Game.config.property.getConfig(this.itemConfig.star);if(propertyCfg){var star=Number(propertyCfg.zh_cn_name);if(star==null){console.log("Error Item Star");return 0}star=star<0?0:star;star=star>6?6:star;return star}}return 0},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"itemIconUrl",{get:function(){if(this.itemConfig){var avatarConfig=Game.config.avatar.getConfig(this.itemConfig.icon);if(avatarConfig){return avatarConfig.iconUrl}}return null},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"itemBodyIconUrl",{get:function(){if(this.itemConfig){var avatarConfig=Game.config.avatar.getConfig(this.itemConfig.icon);if(avatarConfig){return avatarConfig.bodyIconUrl}}return null},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"compoundItem",{get:function(){if(this.itemConfig){var compoundConfig=Game.config.compound.getConfig(this.itemConfig.syn_id);if(compoundConfig&&compoundConfig.syn_item!=0){var item=new DTItemNum();item.itemId=compoundConfig.syn_item;item.itemNum=compoundConfig.num_req;return item}return null}return null},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"compoundNum",{get:function(){if(this.compoundItem){var num=this.compoundItem.itemNum;return Math.floor(this.itemNum/num)}return 0},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"splitItem",{get:function(){if(this.itemConfig){var compoundConfig=Game.config.compound.getConfig(this.itemConfig.syn_id);if(compoundConfig){var splitList=compoundConfig.split_list;if(splitList.length==1&&splitList[0].itemId==0){return[]}return splitList}return null}return null},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"compoundActor",{get:function(){if(this.itemConfig){var item=new DTItemNum();item.itemId=this.itemConfig.actor_id;item.itemNum=this.itemConfig.actor_num;return item}return null},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"compoundActorNum",{get:function(){if(this.compoundActor){var num=this.compoundActor.itemNum;return Math.floor(this.itemNum/num)}return 0},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"canUse",{get:function(){if(this.itemConfig){return this.itemConfig.can_use}return false},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"canSell",{get:function(){if(this.itemConfig){return this.itemConfig.can_sell}return false},enumerable:true,configurable:true});Object.defineProperty(ItemData.prototype,"red",{get:function(){return this.itemType==8||this.itemType==17},enumerable:true,configurable:true});ItemData.Create=function(itemId,itemNum){var item=new ItemData();item.itemId=itemId;item.itemNum=itemNum;return item};ItemData.GetIconUrl=function(id){var itemConfig=Game.config.item.getConfig(id);if(itemConfig){var avatarConfig=Game.config.avatar.getConfig(itemConfig.icon);if(avatarConfig){return avatarConfig.iconUrl}}return""};ItemData.GetName=function(id){var itemConfig=Game.config.item.getConfig(id);if(itemConfig){return itemConfig.name}return""};ItemData.Binning=function(data){if(data instanceof ItemData){return data}else{var item=new ItemData();if(data instanceof DTItemNum){item.itemId=data.itemId;item.itemNum=data.itemNum}else{item.itemId=data.itemId;item.itemNum=data.amount}return item}};ItemData.BinningItemList=function(_list){if(_list==null){return[]}var list=[];for(var index=0;index<_list.length;index++){var data=_list[index];if(!data){console.warn("ItemData.BinningItemList data=null , index="+index);continue}var item=ItemData.Binning(data);if(!item||item.itemNum===undefined||item.itemNum===null){console.warn("ItemData.BinningItemList index="+index+" item.itemNum="+item.itemNum);continue}list.push(item)}return list};return ItemData}());Games.ItemData=ItemData})(Games||(Games={}));var Games;(function(Games){var GoodsData=(function(){function GoodsData(){this.saleNums=0}Object.defineProperty(GoodsData.prototype,"Config",{get:function(){if(this.id==null){return null}return Game.config.shop.getConfig(this.id)},enumerable:true,configurable:true});Object.defineProperty(GoodsData.prototype,"hasBuy",{get:function(){return this._hasBuy},set:function(num){this._hasBuy=num;if(this.Config&&this.Config.limit&&this.Config.limit){this.saleNums=this.Config.limit.itemNum-num;if(this.saleNums<0){this.saleNums=0}}},enumerable:true,configurable:true});Object.defineProperty(GoodsData.prototype,"LimitType",{get:function(){if(this.Config&&this.Config.limit&&this.Config.limit){return this.Config.limit.itemId}return 0},enumerable:true,configurable:true});Object.defineProperty(GoodsData.prototype,"LimitString",{get:function(){var str="";switch(this.LimitType){case 1:str+=Games.TEXT.ShopDayLimit;break;case 2:str+=Games.TEXT.ShopWeekLimit;break;case 3:str+=Games.TEXT.ShopRegistLimit;default:return""}return str},enumerable:true,configurable:true});Object.defineProperty(GoodsData.prototype,"Limit",{get:function(){if(this.Config&&this.Config.limit&&this.Config.limit){return this.Config.limit.itemNum}return 0},enumerable:true,configurable:true});Object.defineProperty(GoodsData.prototype,"ShopType",{get:function(){if(this.Config&&this.Config.type){return this.Config.type}return 0},enumerable:true,configurable:true});Object.defineProperty(GoodsData.prototype,"isPeriodTime",{get:function(){if(this.Config.hasPeriodTime){return this.Config.isPeriodTime}return true},enumerable:true,configurable:true});Object.defineProperty(GoodsData.prototype,"isAfterTime",{get:function(){if(this.Config.hasAfterTime){return this.afterTime<=0}return true},enumerable:true,configurable:true});Object.defineProperty(GoodsData.prototype,"afterTime",{get:function(){return this.Config.delay-(Game.time.serverSeconds-Game.time.registerSeconds)},enumerable:true,configurable:true});Object.defineProperty(GoodsData.prototype,"afterTimeTxt",{get:function(){if(this.afterTime>0){return Games.TimeHelper.TimeFormat(this.afterTime)}return""},enumerable:true,configurable:true});Object.defineProperty(GoodsData.prototype,"Items",{get:function(){if(this.Config){if(this.Config.special==1){return this.Config.item}var item=this.Config.item[0];if(this.Config.special==2){item.itemNum=Game.config.playerLevel.GetShopGold(User.info.level);return[item]}if(this.Config.special==3){item.itemNum=Game.config.playerLevel.GetShopMoney(User.info.level);return[item]}}return[]},enumerable:true,configurable:true});GoodsData.Create=function(id,num){if(num===void 0){num=0}var goods=new GoodsData();goods.id=id;goods.hasBuy=num;return goods};return GoodsData}());Games.GoodsData=GoodsData})(Games||(Games={}));var Games;(function(Games){var GameTimeData=(function(){function GameTimeData(){this._serverSubtime=0;this._localSubServerTimezone=null;this._serverTimezone="";this._preFrame=0;this._localTime=0;this._localLoginTime=new Date().getTime();this._registerTime=new Date().getTime();this._serverLoginTime=new Date().getTime();this._localTestAddTIme=0}GameTimeData.prototype.isLocalToday=function(localTime){var d=new Date(localTime);var c=new Date();return d.getFullYear()==c.getFullYear()&&d.getMonth()==c.getMonth()&&d.getDate()==c.getDate()};GameTimeData.prototype.isLocalTodayTimezone=function(localTime){return Games.TimeHelper.IsSameDay(localTime,this.serverSeconds)};Object.defineProperty(GameTimeData.prototype,"serverSubtime",{get:function(){return this._serverSubtime},enumerable:true,configurable:true});Object.defineProperty(GameTimeData.prototype,"localSubServerTimezone",{get:function(){if(this._localSubServerTimezone==null){this.serverTimezone="America/Regina"}return this._localSubServerTimezone+this._localTestAddTIme},set:function(time){this._localSubServerTimezone=time},enumerable:true,configurable:true});Object.defineProperty(GameTimeData.prototype,"serverTimezone",{get:function(){if(this._serverTimezone==""){this._serverTimezone="America/Regina"}return this._serverTimezone},set:function(timeZone){this._serverTimezone=timeZone;this.localSubServerTimezone=new Date().getTimezoneOffset()*60*1000-6*60*60*1000},enumerable:true,configurable:true});Object.defineProperty(GameTimeData.prototype,"localTime",{get:function(){if(Laya.timer.currFrame!=this._preFrame){this._localTime=new Date().getTime();this._preFrame=Laya.timer.currFrame}return this._localTime},enumerable:true,configurable:true});Object.defineProperty(GameTimeData.prototype,"localLoginTime",{get:function(){return this._localLoginTime},set:function(value){this._localLoginTime=value},enumerable:true,configurable:true});Object.defineProperty(GameTimeData.prototype,"localGameTime",{get:function(){return this.localTime-this.localLoginTime},enumerable:true,configurable:true});Object.defineProperty(GameTimeData.prototype,"registerTime",{get:function(){return this._registerTime},set:function(value){this._registerTime=value},enumerable:true,configurable:true});Object.defineProperty(GameTimeData.prototype,"registerSeconds",{get:function(){return Math.floor(this.registerTime/1000)},enumerable:true,configurable:true});Object.defineProperty(GameTimeData.prototype,"serverLoginTime",{get:function(){return this._serverLoginTime},set:function(value){this._serverLoginTime=value;this.localLoginTime=this.localTime;this._serverSubtime=this.localLoginTime-this._serverLoginTime},enumerable:true,configurable:true});Object.defineProperty(GameTimeData.prototype,"serverSeconds",{get:function(){return Math.floor(this.serverMilliseconds/1000)},enumerable:true,configurable:true});Object.defineProperty(GameTimeData.prototype,"serverMilliseconds",{get:function(){return this.serverLoginTime+this.localGameTime},enumerable:true,configurable:true});GameTimeData.prototype.timestampToTime=function(timestamp){var date=Games.TimeHelper.GetServerDateTime(timestamp);var Y=date.getFullYear();var M=date.getMonth()+1;var D=date.getDate();var h=date.getHours();var m=date.getMinutes();var s=date.getSeconds();return[Y,M,D,h,m,s]};GameTimeData.prototype.localTimestamToTime=function(){var date=Games.TimeHelper.GetServerDateTime();var Y=date.getFullYear();var M=date.getMonth()+1;var D=date.getDate();var h=date.getHours();var m=date.getMinutes();var s=date.getSeconds();return[Y,M,D,h,m,s]};GameTimeData.prototype.getSubSecondsPre=function(preunixSeconds){var dTime=this.serverSeconds-preunixSeconds;if(dTime<0){dTime=0}return dTime};GameTimeData.prototype.getSubSecondsAfter=function(afterunixSeconds){return afterunixSeconds-this.serverSeconds};GameTimeData.prototype.getSubMillisecondsPre=function(preunixMilliseconds){return this.serverMilliseconds-preunixMilliseconds};GameTimeData.prototype.getSubMillisecondsAfter=function(afterunixMilliseconds){return afterunixMilliseconds-this.serverMilliseconds};GameTimeData.prototype.checkNewDayToRefrush=function(serverLastRefrushTime,timePoint){var newDay=false;var sevTime=this.timestampToTime(serverLastRefrushTime);var locTime=this.localTimestamToTime();for(var i=0;i<3;i++){if(sevTime[i]<locTime[i]){newDay=true;break}}if(!newDay&&timePoint>0){if(locTime[3]>=timePoint&&sevTime[3]<timePoint){newDay=true}}return newDay};GameTimeData.prototype.checkTime=function(localTime,h,m){if(m===void 0){m=0}return Games.TimeHelper.IsBeyondTimeInSameDay(localTime/1000,h,m)};GameTimeData.prototype.timeLeft=function(time,hour,minutes,seconds){if(seconds===void 0){seconds=0}if(this.isLocalTodayTimezone(time/1000)){var time1=Games.TimeHelper.TimeReformat(hour,minutes,seconds).getTime();return time1-time}else{return 0}};GameTimeData.prototype.checkTime22222=function(localTime,h,m){if(m===void 0){m=0}var d=new Date(localTime);if(d.getHours()<h){return false}else{if(d.getHours()===h){if(d.getMinutes()<m){return false}}}return true};GameTimeData.prototype.timeLeft22222=function(time,hour,minutes,seconds){if(seconds===void 0){seconds=0}if(this.isLocalToday(time)){var dates=new Date(time);var h=dates.getHours();var m=dates.getMinutes();var s=dates.getSeconds();var cur=h*3600+m*60+s;var req=hour*3600+minutes*60+seconds;var res=(req-cur)*1000;if(res<0){res=0}return res}else{return 0}};GameTimeData.prototype.AddLocalTestSubServerTimezone=function(h,m,s){this._localTestAddTIme=this._localTestAddTIme+((h*60+m)*60+s)*1000};return GameTimeData}());Games.GameTimeData=GameTimeData})(Games||(Games={}));var Games;(function(Games){var FunctionData=(function(){function FunctionData(){this.id=0}return FunctionData}());Games.FunctionData=FunctionData})(Games||(Games={}));var Games;(function(Games){var DanmuData=(function(){function DanmuData(){}DanmuData.CreateByProto=function(msg){var danmu=new DanmuData();danmu.id=msg.id;danmu.name=msg.name;danmu.time=msg.time;danmu.MsgAnalysis(msg.msg);return danmu};DanmuData.Create=function(msg,flag){var danmu=new DanmuData();danmu.msg=msg;danmu.flag=flag;return danmu};DanmuData.prototype.MsgAnalysis=function(msg){this.msg=msg.substr(0,msg.length-1);this.flag=parseInt(msg.substr(msg.length-1,1));if(this.flag==null){this.flag=0}};return DanmuData}());Games.DanmuData=DanmuData})(Games||(Games={}));var Games;(function(Games){var DailyEventType;(function(DailyEventType){DailyEventType[DailyEventType.Movie=1]="Movie";DailyEventType[DailyEventType.Awards=2]="Awards"})(DailyEventType=Games.DailyEventType||(Games.DailyEventType={}));var DailyEventData=(function(){function DailyEventData(){}DailyEventData.CreateByProto=function(msg){var data=new DailyEventData();data.time=msg.time;data.uuid=msg.uuid;data.name=msg.name;data.type=DailyEventType.Movie;return data};DailyEventData.Create=function(type,time,name){var data=new DailyEventData();data.time=time;data.name=name;data.type=type;return data};DailyEventData.sort=function(a,b){return a.time-b.time};Object.defineProperty(DailyEventData.prototype,"Name",{get:function(){if(this.type==DailyEventType.Movie){return Games.TEXT.OscarMovie.format(this.name)}return this.name},enumerable:true,configurable:true});Object.defineProperty(DailyEventData.prototype,"TimeNum",{get:function(){return this.time},enumerable:true,configurable:true});Object.defineProperty(DailyEventData.prototype,"Time",{get:function(){return Games.TimeHelper.DateTimeFormat4(this.time)},enumerable:true,configurable:true});Object.defineProperty(DailyEventData.prototype,"isToday",{get:function(){return Games.TimeHelper.IsSameDay(this.time,Game.time.serverSeconds)},enumerable:true,configurable:true});Object.defineProperty(DailyEventData.prototype,"isYestody",{get:function(){return Games.TimeHelper.IsSameDay(this.time,Game.time.serverSeconds-24*60*60)},enumerable:true,configurable:true});Object.defineProperty(DailyEventData.prototype,"hasData",{get:function(){if(!Game.moduleModel.oscar.isUnLockOscar){return false}if(this.isToday){if(this.time<Game.time.serverSeconds){return true}else{return false}}else{if(!Games.TimeHelper.IsBeyondTimeInSameDay(Game.time.serverSeconds,Game.config.global.OscarHour)){return true}else{return false}}},enumerable:true,configurable:true});return DailyEventData}());Games.DailyEventData=DailyEventData})(Games||(Games={}));var Games;(function(Games){var CountryData=(function(){function CountryData(id){this.id=id;var cfg=this.cfg;this.icon=cfg.icon;this.preCountry=cfg.pre_id;this.nextCountry=cfg.next_country}Object.defineProperty(CountryData.prototype,"name",{get:function(){return this.cfg.name},enumerable:true,configurable:true});Object.defineProperty(CountryData.prototype,"cfg",{get:function(){return Game.config.country.getConfig(this.id)},enumerable:true,configurable:true});Object.defineProperty(CountryData.prototype,"iconUrl",{get:function(){return Game.config.avatar.getConfig(this.cfg.icon).iconUrl},enumerable:true,configurable:true});Object.defineProperty(CountryData.prototype,"flagUrl",{get:function(){return Game.config.avatar.getConfig(this.cfg.flag).iconUrl},enumerable:true,configurable:true});return CountryData}());Games.CountryData=CountryData})(Games||(Games={}));var Games;(function(Games){var CityStreetData=(function(){function CityStreetData(id,state,progress){if(state===void 0){state=Games.StreetStateEnum.NotOccupy}if(progress===void 0){progress=0}this.id=id;var cfg=Game.config.street.getConfig(id);this.state=state;this.progress=progress}Object.defineProperty(CityStreetData.prototype,"name",{get:function(){return this.cfg.name},enumerable:true,configurable:true});Object.defineProperty(CityStreetData.prototype,"city",{get:function(){if(this.cfg){return this.cfg.city}console.log("城市街区："+this.id+" 缺少配置");return 0},enumerable:true,configurable:true});Object.defineProperty(CityStreetData.prototype,"pos",{get:function(){return this.cfg.position},enumerable:true,configurable:true});Object.defineProperty(CityStreetData.prototype,"pre",{get:function(){return this.cfg.pre_id},enumerable:true,configurable:true});Object.defineProperty(CityStreetData.prototype,"next",{get:function(){return this.cfg.next_stage},enumerable:true,configurable:true});Object.defineProperty(CityStreetData.prototype,"num",{get:function(){if(this._num!=null){return this._num}var cityCfg=Game.config.city.getConfig(this.city);if(cityCfg==null){console.log(this.id+"街区的城市："+this.city+" 缺少配置");return 0}var streetList=cityCfg.street_id;for(var index=0;index<streetList.length;index++){var id=streetList[index];if(id==this.id){this._num=index+1;return this._num}}},enumerable:true,configurable:true});Object.defineProperty(CityStreetData.prototype,"cityNum",{get:function(){var cityCfg=Game.config.city.getConfig(this.city);if(cityCfg){return cityCfg.city_num}console.log("城市："+this.id+" 缺少配置");return 0},enumerable:true,configurable:true});Object.defineProperty(CityStreetData.prototype,"numName",{get:function(){return this.cityNum+"-"+this.num+" "+this.name},enumerable:true,configurable:true});Object.defineProperty(CityStreetData.prototype,"reward",{get:function(){var list=[];var expect=new DTItemNum();expect.itemId=8;expect.itemNum=this.cfg.expect;return list.concat(this.cfg.finale_reward,expect)},enumerable:true,configurable:true});Object.defineProperty(CityStreetData.prototype,"cfg",{get:function(){return Game.config.street.getConfig(this.id)},enumerable:true,configurable:true});return CityStreetData}());Games.CityStreetData=CityStreetData})(Games||(Games={}));var Games;(function(Games){var CityData=(function(){function CityData(id,state,isHome){this.id=id;this.state=state;this.isHome=isHome}Object.defineProperty(CityData.prototype,"name",{get:function(){return this.cfg.name},enumerable:true,configurable:true});Object.defineProperty(CityData.prototype,"num",{get:function(){return this.cfg.city_num},enumerable:true,configurable:true});Object.defineProperty(CityData.prototype,"index",{get:function(){return Game.config.city.GetCityIndexInCountry(this.id)},enumerable:true,configurable:true});Object.defineProperty(CityData.prototype,"country",{get:function(){return this.cfg.country},enumerable:true,configurable:true});Object.defineProperty(CityData.prototype,"numName",{get:function(){return this.num+"."+this.name},enumerable:true,configurable:true});Object.defineProperty(CityData.prototype,"cfg",{get:function(){return Game.config.city.getConfig(this.id)},enumerable:true,configurable:true});Object.defineProperty(CityData.prototype,"holdReward",{get:function(){var cfg=this.cfg;if(cfg){return cfg.hold_reward}return[]},enumerable:true,configurable:true});return CityData}());Games.CityData=CityData})(Games||(Games={}));var Games;(function(Games){var BusinessData=(function(){function BusinessData(){this.tomaxTimeOut=0;this.resetTimeHandler=0}Object.defineProperty(BusinessData.prototype,"id",{get:function(){return this._id},set:function(value){this._id=value;if(value>0){this.config=Game.config.business.getConfig(value)}},enumerable:true,configurable:true});Object.defineProperty(BusinessData.prototype,"interval",{get:function(){return Game.config.global.getConfig(GlobalKey.bussiness_cd).value},enumerable:true,configurable:true});Object.defineProperty(BusinessData.prototype,"nextBusinessNum",{get:function(){var nowTime=Game.time.serverSeconds;var lastTime=this.lastResetTime;var duration=0;if(nowTime>lastTime){duration=nowTime-lastTime}var num=Math.floor(duration/this.interval);num=Math.min(this.lineLimit,num);return num},enumerable:true,configurable:true});Object.defineProperty(BusinessData.prototype,"resultRewards",{get:function(){var items=[];for(var index=0;index<this.config.reward.length;index++){var element=this.config.reward[index];var item=new DTItemNum();item.itemId=element.itemId;var num=Game.moduleModel.building.getBuildEffectNum(Games.RoomType.Office,item.itemId,element.itemNum);item.itemNum=num;items.push(item)}var expect=new DTItemNum();expect.itemId=EItemId.expect;expect.itemNum=Game.moduleModel.building.getBuildEffectNum(Games.RoomType.Office,expect.itemId,this.config.expect);items.push(expect);return items},enumerable:true,configurable:true});Object.defineProperty(BusinessData.prototype,"nextBusinessComeTime",{get:function(){var nowTime=Game.time.serverSeconds;var lastTime=this.lastResetTime+this.interval;return Math.max(0,lastTime-nowTime)},enumerable:true,configurable:true});Object.defineProperty(BusinessData.prototype,"isMaxDaily",{get:function(){return this.dailyCount>=Game.config.global.getConfig(GlobalKey.bussiness_number).value},enumerable:true,configurable:true});BusinessData.prototype.startToMaxTime=function(){if(this.tomaxTimeOut>0){clearTimeout(this.tomaxTimeOut);this.tomaxTimeOut=0}var nowTime=Game.time.serverSeconds;var nextNum=this.nextBusinessNum;if(nextNum<this.lineLimit){var duration=(this.lineLimit-nextNum)*this.interval;this.tomaxTimeOut=setTimeout(function(){Game.event.dispatch(GameEventKey.GameEventKey_UpdateMainUIRed)},duration*1000)}Game.event.dispatch(GameEventKey.GameEventKey_UpdateMainUIRed)};BusinessData.prototype.startResetDailyCountTime=function(){var _this=this;clearTimeout(this.resetTimeHandler);var resetHour=22;var currSecond=Game.time.serverSeconds;var lastHour=Games.TimeHelper.GetServerDateTime(this.lastUpdateTime).getHours();var nowHour=Games.TimeHelper.GetServerDateTime().getHours();if(currSecond-this.lastUpdateTime>Games.TimeHelper.OneDaySeconds){this.resetStatus()}else{var isSameDay=Games.TimeHelper.IsSameDay(this.lastUpdateTime,currSecond);if(isSameDay){if(nowHour>=resetHour&&lastHour<resetHour){this.resetStatus()}}else{if(lastHour<resetHour){this.resetStatus()}}}var nextSecond=Games.TimeHelper.TimeReformat(resetHour).getTime()/1000;if(nowHour>=resetHour){nextSecond+=Games.TimeHelper.OneDaySeconds}if(currSecond<nextSecond){var time=nextSecond-currSecond;this.resetTimeHandler=setTimeout(function(){_this.resetStatus()},time*1000)}};BusinessData.prototype.resetStatus=function(){this.dailyCount=0};Object.defineProperty(BusinessData.prototype,"isMax",{get:function(){return this.nextBusinessNum>=this.lineLimit&&this.isMaxDaily==false},enumerable:true,configurable:true});return BusinessData}());Games.BusinessData=BusinessData})(Games||(Games={}));var Games;(function(Games){var AwardsData=(function(){function AwardsData(){}Object.defineProperty(AwardsData.prototype,"name",{get:function(){return Game.config.msg.getConfig(AwardsData.namelist[this.type]).notice},enumerable:true,configurable:true});Object.defineProperty(AwardsData.prototype,"winner",{get:function(){if(this.listCandidate==null||this.winnerIndex==null||this.winnerIndex<0||this.winnerIndex>=this.listCandidate.length){return null}var winner=this.listCandidate[this.winnerIndex];return winner},enumerable:true,configurable:true});AwardsData.Create=function(type,listCandidate,winnerIndex){var awards=new AwardsData();awards.type=type;awards.listCandidate=listCandidate||[];awards.winnerIndex=winnerIndex||0;return awards};AwardsData.namelist=[0,1085,1086,1087,1088,1089];return AwardsData}());Games.AwardsData=AwardsData})(Games||(Games={}));var Games;(function(Games){var ActionType;(function(ActionType){ActionType[ActionType.Time=1]="Time";ActionType[ActionType.Point=2]="Point"})(ActionType=Games.ActionType||(Games.ActionType={}));var ATEvent=(function(){function ATEvent(){}ATEvent.parse=function(eventId){var self=new ATEvent();var eventCfg=Game.config.event.getConfig(eventId);self.evtId=eventCfg.id;self.actionInfo=new ATActionInfo();self.actionInfo.parse(eventCfg);return self};ATEvent.prototype.setTalkParams=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}this.actionInfo.setTalkParams(args)};return ATEvent}());Games.ATEvent=ATEvent;var ATActionInfo=(function(){function ATActionInfo(){this.actionType=ActionType.Time;this.talkParams=[]}ATActionInfo.prototype.parse=function(config){this.config=config;this.actionType=config.type;this.actions=new Array();var act=this.getAct();this.actionId=act.v1;if(this.actionType==ActionType.Time){this.actionTime=act.v2}else{if(this.actionType==ActionType.Point){this.actionPointX=act.v2}}var talk=this.getTalk();this.talkActionId=talk.v1;this.talkActionTime=talk.v2};ATActionInfo.prototype.getAct=function(){var maxRandom=0;this.config.action.forEach(function(value,index,array){maxRandom+=value.v3});var randVal=Random.rangeBoth(0,maxRandom);var dr=0;for(var i=0;i<this.config.action.length;i++){dr+=this.config.action[i].v3;if(dr>=randVal){var act=this.config.action[i];this.actionId=act.v1;this.actionTime=act.v2;return act}}return null};ATActionInfo.prototype.getTalk=function(){var maxRandom=0;this.config.speak.forEach(function(value,index,array){maxRandom+=value.v3});var randVal=Random.rangeBoth(0,maxRandom);var dr=0;for(var i=0;i<this.config.speak.length;i++){dr+=this.config.speak[i].v3;if(dr>=randVal){var talk=this.config.speak[i];this.talkActionId=talk.v1;this.talkActionTime=talk.v2;return talk}}return null};ATActionInfo.prototype.setTalkParams=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}this.talkParams=args};return ATActionInfo}());Games.ATActionInfo=ATActionInfo})(Games||(Games={}));var Games;(function(Games){var AssetData=(function(){function AssetData(){this.lv=1;this.actorExtraLimit=0;this.extraGiveACLimit=0;this.giveItemDic=new Dictionary();this.giveItems=[]}AssetData.prototype.update=function(data){this.data=data;this.giveItemDic.clear();this.giveItems.splice(0,this.giveItems.length);if(data){if(this.lv&&this.lv<data.giveLevel){Games.Static.Instance.onUpgrdae("starAsset",this.actorId.toString(),this.lv.toString(),(data.giveLevel-this.lv).toString(),data.giveLevel.toString())}this.lv=data.giveLevel;if(data.giveItemList){for(var index=0;index<data.giveItemList.length;index++){var element=data.giveItemList[index];this.giveItems.push(element.amount);this.giveItemDic.add(element.itemId,element)}}this.extraGiveACLimit=data.extraGiveACLimit}var actorConfig=Game.config.actor.getConfig(this.actorId);var assetId=this.actorId*100+this.type;this.isMax=false;if(actorConfig){var actorAssetConfig=Game.config.actorAssets.getConfig(assetId);if(actorAssetConfig){this.actor_property=actorAssetConfig.actor_property}var assetNexLvConfig=Game.config.actorAssetsLv.getConfig(this.lv+1);if(assetNexLvConfig){this.isMax=false}else{this.isMax=true}var assetLvConfig=Game.config.actorAssetsLv.getConfig(this.lv);if(assetLvConfig){var star=actorConfig.starNum;this.num=assetLvConfig["star"+star+"_num"];this.value=assetLvConfig["star"+star+"_value"];this.max=assetLvConfig["star"+star+"_max"];switch(this.type){case 1:this.item=assetLvConfig["sex_"+actorConfig.sex];break;case 2:this.item=assetLvConfig["c_"+actorConfig.country];break;case 3:this.item=assetLvConfig["p_"+actorConfig.show_type];break;case 4:this.item=assetLvConfig["y_"+actorConfig.age_type];break;default:break}}}};AssetData.prototype.getItemNum=function(id){var num=0;var d=this.giveItemDic.getValue(id);if(d){num=d.amount}return num};AssetData.prototype.getCurLvItemNum=function(id){var lv=this.lv;var count=this.getItemNum(id);while(lv>1){lv=lv-1;var actorConfig=Game.config.actor.getConfig(this.actorId);if(actorConfig){var star=actorConfig.starNum;var item=0;var num=0;var assetLvConfig=Game.config.actorAssetsLv.getConfig(lv);if(assetLvConfig){num=assetLvConfig["star"+star+"_num"];switch(this.type){case 1:item=assetLvConfig["sex_"+actorConfig.sex];break;case 2:item=assetLvConfig["c_"+actorConfig.country];break;case 3:item=assetLvConfig["p_"+actorConfig.show_type];break;case 4:item=assetLvConfig["y_"+actorConfig.age_type];break;default:break}if(item==id){count=count-num}}}}return count};Object.defineProperty(AssetData.prototype,"maxSendNum",{get:function(){var num=0;var items=this.giveItemDic.getValues();var preCount=0;for(var index=0;index<items.length;index++){var item=items[index];if(item.itemId!=this.item){preCount+=item.amount}}num=this.actorExtraLimit-preCount;return num+this.extraGiveACLimit},enumerable:true,configurable:true});Object.defineProperty(AssetData.prototype,"useCardMax",{get:function(){var max=this.num;return max},enumerable:true,configurable:true});return AssetData}());Games.AssetData=AssetData})(Games||(Games={}));var Games;(function(Games){var ActorTrainData=(function(){function ActorTrainData(){this.property=[];this.property_interval=[]}ActorTrainData.prototype.update=function(id,type,count){this.property_interval.splice(0,this.property_interval.length);this.id=id;this.type=type;this.count=count;var tId=id*100+this.type;var actorConfig=Game.config.actor.getConfig(id);if(actorConfig){this.actorTrainConfig=Game.config.actorTrain.getConfig(tId);if(this.actorTrainConfig){this.name=this.actorTrainConfig.name;this.action=this.actorTrainConfig.action;this.scene_name=this.actorTrainConfig.scene_name;this.property=this.actorTrainConfig.property;var star=actorConfig.starNum;var actorTrainLvConfig=Game.config.actorTrainLv.getConfig(count);if(actorTrainLvConfig){this.cost=actorTrainLvConfig.cost;this.diamondsCost=actorTrainLvConfig.diamonds_cost;for(var index=0;index<this.property.length;index++){var element=this.property[index];if(element==actorConfig.main_id){this.property_interval.push(actorTrainLvConfig["star"+star+"_main"])}else{this.property_interval.push(actorTrainLvConfig["star"+star+"_vice"])}}}}}};return ActorTrainData}());Games.ActorTrainData=ActorTrainData})(Games||(Games={}));var Games;(function(Games){var ActorLevelData=(function(){function ActorLevelData(){}ActorLevelData.prototype.update=function(id,lv){this.id=id;this.lv=lv;var actorConfig=Game.config.actorLevel.getConfig(lv);if(actorConfig){this.cost=actorConfig.cost}};return ActorLevelData}());Games.ActorLevelData=ActorLevelData})(Games||(Games={}));var Games;(function(Games){var ActorExerciseData=(function(){function ActorExerciseData(msg){this.seatUuid="";this.uuid="";this.id=0;this.seatIndex=0;this.startTime=0;this.isComplete=false;if(msg){this.uuid=msg.actorUuid;this.seatIndex=msg.index;this.startTime=msg.startTime}}return ActorExerciseData}());Games.ActorExerciseData=ActorExerciseData;var ActorData=(function(){function ActorData(){this.spectacle=0;this.perform=0;this.plot=0;this.art=0;this.entertainment=0;this.boxOfficeCount=0;this.cupCount=0;this.movieCount=0;this.popularValue=0}ActorData.prototype.PayForFilming=function(positionId){var story=Game.moduleModel.warData.moveStory;var posCost=Game.config.position.getConfig(positionId).position_cost_con*0.01;var starCost=Game.config.starCon.getConfig(story.stars).story_star_con*0.01;var actorLevel=Game.config.actorLevel.getConfig(this.level)["star"+this.star+"_paycheck_max"];return actorLevel*posCost*starCost};ActorData.prototype.getShootType=function(type){for(var i=0;i<this.shootTypeList.length;i++){if(this.shootTypeList[i].type===type){return this.shootTypeList[i]}}return null};ActorData.prototype.getShootListLvGreater0=function(){var list=[];for(var i=0;i<this.shootTypeList.length;i++){if(this.shootTypeList[i].proficiencyLevel>0){list.push(this.shootTypeList[i])}}return list};ActorData.prototype.setId=function(value){this.id=value;this.config=Game.config.actor.getConfig(value);this.props=[];if(this.config.spectacle>0){this.props.push(1601)}if(this.config.perform>0){this.props.push(1602)}if(this.config.plot>0){this.props.push(1603)}if(this.config.art>0){this.props.push(1604)}if(this.config.entertainment>0){this.props.push(1605)}};ActorData.prototype.setLevel=function(value){this.level=value;if(this.levelData==null){this.levelData=new Games.ActorLevelData()}this.levelData.update(this.id,value)};ActorData.prototype.setTrainCount=function(value){this.cultivateCount=value;if(this.trainData==null){this.trainData=[new Games.ActorTrainData(),new Games.ActorTrainData(),new Games.ActorTrainData(),new Games.ActorTrainData()]}if(this.nextTrainData==null){this.nextTrainData=[new Games.ActorTrainData(),new Games.ActorTrainData(),new Games.ActorTrainData(),new Games.ActorTrainData()]}for(var index=0;index<this.trainData.length;index++){var element=this.trainData[index];element.update(this.id,index+1,this.cultivateCount)}for(var index=0;index<this.nextTrainData.length;index++){var element=this.nextTrainData[index];element.update(this.id,index+1,this.cultivateCount+1)}};ActorData.prototype.getTrainDataByType=function(type){return this.trainData[type-1]};ActorData.prototype.getNextTrainDataByType=function(type){return this.nextTrainData[type]};Object.defineProperty(ActorData.prototype,"star",{get:function(){return this.config.starNum},enumerable:true,configurable:true});ActorData.prototype.getProps=function(){return this.props};ActorData.prototype.setSkills=function(){if(this.skills==null){this.skills=new Array()}if(this.skillDict==null){this.skillDict=new Dictionary()}var skills=this.config.skill;for(var index=0;index<skills.length;index++){var data;if(index<this.skills.length){data=this.skills[index]}else{data=new Games.SkillData()}data.setDTActor(skills[index]);var config=data.config;var groupId=config.group_id;data.actorId=this.id;data.update(this.getSkillByGroupId(groupId));this.skillDict.add(groupId,data);this.skills.push(data)}};ActorData.prototype.setAssets=function(){if(this.assets==null){this.assets=new Array()}for(var index=0;index<Games.ActorModel.assetLenth;index++){var data;if(index<this.assets.length){data=this.assets[index]}else{data=new Games.AssetData();data.actorId=this.id;data.type=index+1}data.actorExtraLimit=this.giveAssetsCountLimit;data.update(this.getAssetByType(index+1));this.assets.push(data)}};ActorData.prototype.setAssistants=function(){if(this.assitantList==null){this.assitantList=new Array()}if(this.assitantDict==null){this.assitantDict=new Dictionary()}this.assistantLv=0;for(var id=1;id<5;id++){var info=this.getAssistantInfo(id);var data=void 0;if(this.assitantList.length<=id-1){data=new Games.AssistantData();this.assitantList.push(data);this.assitantDict.add(id,data)}else{data=this.assitantList[id-1]}if(data){data.formatByProto(info,this,id)}this.assistantLv=this.assistantLv+data.level}var list=Game.config.actorAideLv.getConfigList();for(var index=0;index<list.length;index++){var element=list[index];if(element.lv.length==1&&this.assistantLv==element.lv[0]){this.aideLvConfig=list[1];break}else{if(element.lv[0]<=this.assistantLv&&element.lv[1]>=this.assistantLv){this.aideLvConfig=element;break}}}if(this.aideLvConfig==null){this.aideLvConfig=list[list.length-1]}};ActorData.prototype.setTagData=function(){if(this.actorStoryTags==null){this.actorStoryTags=[];this.actorCharactersTags=[];this.actorFeaturesTags=[];this.actorTagDict=new Dictionary();var tag=void 0;var story=this.config.story_type;for(var index=0;index<story.length;index++){var storyele=story[index];tag=new Games.ActorTagData();tag.id=storyele.story;tag.lv=tag.srcLv=storyele.lv;tag.property=storyele.property;this.actorStoryTags.push(tag);this.actorTagDict.add(tag.id,tag)}var feature=this.config.story_feature;for(var index=0;index<feature.length;index++){var featureEle=feature[index];tag=new Games.ActorTagData();tag.id=featureEle.feature;tag.lv=tag.srcLv=featureEle.lv;tag.property=featureEle.property;this.actorFeaturesTags.push(tag);this.actorTagDict.add(tag.id,tag)}var characters=this.config.character;for(var index=0;index<characters.length;index++){var charEle=characters[index];tag=new Games.ActorTagData();tag.id=charEle.character;tag.lv=tag.srcLv=charEle.lv;tag.property=charEle.property;this.actorCharactersTags.push(tag);this.actorTagDict.add(tag.id,tag)}}this.addTrainNum=0;var element;for(var index=0;index<this.assitantList.length;index++){element=this.assitantList[index];if(element.isUnlockTag){var tag=this.getTagById(element.actorSign);if(tag){tag.lv=tag.srcLv+element.tagAddValue}}if(element.isUnlockTrain){var tag=this.getTagById(element.actorSign);if(tag){this.addTrainNum+=element.trainAddValue}}}};ActorData.prototype.getTagById=function(id){return this.actorTagDict.getValue(id)};ActorData.prototype.getAssistantInfo=function(id){var info=null;if(this.assistantInfos){for(var index=0;index<this.assistantInfos.length;index++){var element=this.assistantInfos[index];if(element.id==id){info=element;break}}}return info};Object.defineProperty(ActorData.prototype,"isOpenAssistant",{get:function(){var lv=GlobalConfig.getValue(GlobalKey.KEY_1036);return this.level>=lv},enumerable:true,configurable:true});ActorData.prototype.getAssetByType=function(type){for(var index=0;index<this.giveAssetsList.length;index++){var element=this.giveAssetsList[index];if(element.giveType==type){return element}}return null};ActorData.prototype.getSkillByGroupId=function(id){for(var index=0;index<this.skillList.length;index++){var element=this.skillList[index];var config=Game.config.skill.getConfig(element.skillId);if(config.group_id==id){return element}}return null};ActorData.prototype.getEffectSkills=function(){return this.skills.filter(function(value,index,array){return value.isEffect==true})};ActorData.prototype.getUnlockSkillByType=function(type){var skill;for(var index=0;index<this.skills.length;index++){var element=this.skills[index];if(element.config){var effect=Game.config.skillEffect.getConfig(element.config.effect).effect;if(effect==type){skill=element;break}}}return skill};ActorData.prototype.getMaxLv=function(){return Game.config.actorLoyalty.getConfigByIdLv(this.id,this.loyaltyLevel).max_lv};ActorData.prototype.isMaxLv=function(){var lv=this.loyaltyLevel+1;var loyConfig=Game.config.actorLoyalty.getConfigByIdLv(this.id,lv);var isMax=true;if(loyConfig){isMax=false}return isMax};ActorData.prototype.getNextLvUpLoyaltyLv=function(){var lv=this.loyaltyLevel;var curMaxLv=this.getMaxLv();while(true){lv=lv+1;var loyConfig=Game.config.actorLoyalty.getConfigByIdLv(this.id,lv);if(loyConfig){if(loyConfig.max_lv>curMaxLv){break}}else{break}}return lv};ActorData.prototype.getNextLvUpLv=function(){var lv=this.loyaltyLevel;var curMaxLv=this.getMaxLv();var nextMaxLv;while(true){lv=lv+1;var loyConfig=Game.config.actorLoyalty.getConfigByIdLv(this.id,lv);if(loyConfig){if(loyConfig.max_lv>curMaxLv){nextMaxLv=loyConfig.max_lv;break}}else{break}}return nextMaxLv};Object.defineProperty(ActorData.prototype,"isLoyaltyMaxLv",{get:function(){var loyConfig=Game.config.actorLoyalty.getConfigByIdLv(this.id,this.loyaltyLevel);var nextConfig=Game.config.actorLoyalty.getConfigByIdLv(this.id,this.loyaltyLevel+1);if(!nextConfig&&this.loyaltyExp>=loyConfig.exp-1){return true}return false},enumerable:true,configurable:true});Object.defineProperty(ActorData.prototype,"bodyIconUrl",{get:function(){return this.config.avatarConfig.bodyIconUrl},enumerable:true,configurable:true});Object.defineProperty(ActorData.prototype,"upgradeCostNum",{get:function(){var srcCostNum=this.upgradeTotalCostNum;srcCostNum=Math.max(0,srcCostNum-this.levelExp);return srcCostNum},enumerable:true,configurable:true});Object.defineProperty(ActorData.prototype,"upgradeTotalCostNum",{get:function(){var srcCostNum=this.levelData.cost.itemNum;var rate=1;var skill=this.getUnlockSkillByType(Games.SkillTriggerType.upgrade_gold_cost);if(skill&&skill.isEnable){rate=rate+skill.config.value/100}srcCostNum=Math.max(0,Math.ceil(srcCostNum*rate));return srcCostNum},enumerable:true,configurable:true});ActorData.prototype.upgradeTrainCostGoldNum=function(type){var trianConfig=this.getNextTrainDataByType(type-1);var srcCostNum=trianConfig.cost[0].itemNum;var rate=1;var skill=this.getUnlockSkillByType(Games.SkillTriggerType.upgrade_gold_cost);if(skill&&skill.isEnable){rate=rate+skill.config.value/100}srcCostNum=Math.max(0,Math.ceil(srcCostNum*rate));return srcCostNum};ActorData.prototype.getAssetDataByType=function(type){return this.assets[type]};Object.defineProperty(ActorData.prototype,"preMaxLv",{get:function(){var lv=this.level-1;var maxLv=0;if(lv>0){maxLv=Game.config.actorLoyalty.getMaxLv(this.id,lv)}return maxLv},enumerable:true,configurable:true});Object.defineProperty(ActorData.prototype,"curMaxLv",{get:function(){var lv=this.level;var maxLv=0;if(lv>0){maxLv=Game.config.actorLoyalty.getMaxLv(this.id,lv)}return maxLv},enumerable:true,configurable:true});return ActorData}());Games.ActorData=ActorData})(Games||(Games={}));var Games;(function(Games){var WarSubwindowType;(function(WarSubwindowType){WarSubwindowType[WarSubwindowType.ShootingConfirmation=0]="ShootingConfirmation";WarSubwindowType[WarSubwindowType.FilmSelect=1]="FilmSelect";WarSubwindowType[WarSubwindowType.FilmInfo=2]="FilmInfo";WarSubwindowType[WarSubwindowType.CurrentMarketInf=3]="CurrentMarketInf";WarSubwindowType[WarSubwindowType.SelectYiren=4]="SelectYiren";WarSubwindowType[WarSubwindowType.CostView=5]="CostView";WarSubwindowType[WarSubwindowType.YRShowView=6]="YRShowView";WarSubwindowType[WarSubwindowType.Compatibility=7]="Compatibility";WarSubwindowType[WarSubwindowType.SelectFilmType=8]="SelectFilmType";WarSubwindowType[WarSubwindowType.Filming=9]="Filming";WarSubwindowType[WarSubwindowType.FilmSQView=10]="FilmSQView";WarSubwindowType[WarSubwindowType.NoticeFeedBack=11]="NoticeFeedBack";WarSubwindowType[WarSubwindowType.SelectNotice=12]="SelectNotice";WarSubwindowType[WarSubwindowType.FilmSQ=13]="FilmSQ";WarSubwindowType[WarSubwindowType.proficiency=14]="proficiency";WarSubwindowType[WarSubwindowType.CinemaSelection=15]="CinemaSelection";WarSubwindowType[WarSubwindowType.SYPF=16]="SYPF";WarSubwindowType[WarSubwindowType.AudienceReputation=17]="AudienceReputation";WarSubwindowType[WarSubwindowType.Shangying=18]="Shangying";WarSubwindowType[WarSubwindowType.overMarket=19]="overMarket";WarSubwindowType[WarSubwindowType.Jiesuan=20]="Jiesuan";WarSubwindowType[WarSubwindowType.Share=21]="Share";WarSubwindowType[WarSubwindowType.Baozi=22]="Baozi";WarSubwindowType[WarSubwindowType.OverTip=23]="OverTip";WarSubwindowType[WarSubwindowType.ReName=24]="ReName";WarSubwindowType[WarSubwindowType.EndIncome=25]="EndIncome";WarSubwindowType[WarSubwindowType.XukeOver=26]="XukeOver";WarSubwindowType[WarSubwindowType.XukeHuifu=27]="XukeHuifu"})(WarSubwindowType=Games.WarSubwindowType||(Games.WarSubwindowType={}))})(Games||(Games={}));var Games;(function(Games){var UnlockType;(function(UnlockType){UnlockType[UnlockType.None=0]="None";UnlockType[UnlockType.Level=1]="Level";UnlockType[UnlockType.BuildingLevel=2]="BuildingLevel";UnlockType[UnlockType.BlockLevel=3]="BlockLevel";UnlockType[UnlockType.Other=4]="Other";UnlockType[UnlockType.HoldCity=5]="HoldCity";UnlockType[UnlockType.MainTask=6]="MainTask"})(UnlockType=Games.UnlockType||(Games.UnlockType={}));var CloseType;(function(CloseType){CloseType[CloseType.None=0]="None";CloseType[CloseType.Recharge=1]="Recharge";CloseType[CloseType.MainTask=2]="MainTask";CloseType[CloseType.Level=3]="Level";CloseType[CloseType.Reward=4]="Reward"})(CloseType=Games.CloseType||(Games.CloseType={}))})(Games||(Games={}));var Games;(function(Games){var UnlockID;(function(UnlockID){UnlockID[UnlockID.ActorTrain=2016]="ActorTrain";UnlockID[UnlockID.GuideComplete=2018]="GuideComplete";UnlockID[UnlockID.LevelGift=2019]="LevelGift";UnlockID[UnlockID.CupGift=2020]="CupGift"})(UnlockID=Games.UnlockID||(Games.UnlockID={}))})(Games||(Games={}));var Games;(function(Games){var TimeLimitType;(function(TimeLimitType){TimeLimitType[TimeLimitType.Zero=0]="Zero";TimeLimitType[TimeLimitType.Ten=1]="Ten";TimeLimitType[TimeLimitType.NineToFifty=2]="NineToFifty";TimeLimitType[TimeLimitType.NineToFiftyFive=3]="NineToFiftyFive"})(TimeLimitType=Games.TimeLimitType||(Games.TimeLimitType={}))})(Games||(Games={}));var Games;(function(Games){var StreetStateEnum;(function(StreetStateEnum){StreetStateEnum[StreetStateEnum.NotOccupy=0]="NotOccupy";StreetStateEnum[StreetStateEnum.InOccupy=1]="InOccupy";StreetStateEnum[StreetStateEnum.HasOccupy=2]="HasOccupy"})(StreetStateEnum=Games.StreetStateEnum||(Games.StreetStateEnum={}))})(Games||(Games={}));var Games;(function(Games){var SkillTriggerType;(function(SkillTriggerType){SkillTriggerType[SkillTriggerType.get_gold_speed=1]="get_gold_speed";SkillTriggerType[SkillTriggerType.production_earnings=2]="production_earnings";SkillTriggerType[SkillTriggerType.actor_paycheck=3]="actor_paycheck";SkillTriggerType[SkillTriggerType.box_office_earnings=4]="box_office_earnings";SkillTriggerType[SkillTriggerType.city_get_gold_time=5]="city_get_gold_time";SkillTriggerType[SkillTriggerType.upgrade_gold_cost=6]="upgrade_gold_cost";SkillTriggerType[SkillTriggerType.shoot_Total_attribute_increase=7]="shoot_Total_attribute_increase"})(SkillTriggerType=Games.SkillTriggerType||(Games.SkillTriggerType={}))})(Games||(Games={}));var Games;(function(Games){var RoomType;(function(RoomType){RoomType[RoomType.Cinema=1]="Cinema";RoomType[RoomType.Shoot=2]="Shoot";RoomType[RoomType.Actor=3]="Actor";RoomType[RoomType.Market=4]="Market";RoomType[RoomType.Spread=5]="Spread";RoomType[RoomType.Depot=6]="Depot";RoomType[RoomType.Sale=7]="Sale";RoomType[RoomType.Business=8]="Business";RoomType[RoomType.Office=9]="Office";RoomType[RoomType.Reception=10]="Reception";RoomType[RoomType.Meeting=11]="Meeting";RoomType[RoomType.Finance=12]="Finance";RoomType[RoomType.Training=13]="Training";RoomType[RoomType.GlobalBusiness=14]="GlobalBusiness";RoomType[RoomType.UniversalBusiness=15]="UniversalBusiness";RoomType[RoomType.Collection=16]="Collection"})(RoomType=Games.RoomType||(Games.RoomType={}))})(Games||(Games={}));var Games;(function(Games){var RankListType;(function(RankListType){RankListType[RankListType.GroupList=1]="GroupList";RankListType[RankListType.GroupMovieList=2]="GroupMovieList";RankListType[RankListType.ServerList=3]="ServerList"})(RankListType=Games.RankListType||(Games.RankListType={}))})(Games||(Games={}));var Games;(function(Games){var PerformType;(function(PerformType){PerformType[PerformType.FreeWalk=0]="FreeWalk";PerformType[PerformType.Cinema=1]="Cinema";PerformType[PerformType.Shoot=2]="Shoot";PerformType[PerformType.Reception=3]="Reception";PerformType[PerformType.Training=4]="Training";PerformType[PerformType.Meeting=5]="Meeting";PerformType[PerformType.Oscar=6]="Oscar";PerformType[PerformType.RoadShow=7]="RoadShow";PerformType[PerformType.ReceptionFansTalk=8]="ReceptionFansTalk";PerformType[PerformType.ReceptionActorTalk=9]="ReceptionActorTalk"})(PerformType=Games.PerformType||(Games.PerformType={}))})(Games||(Games={}));var Games;(function(Games){var OtherFunctionType;(function(OtherFunctionType){OtherFunctionType[OtherFunctionType.ActorSkillExp=0]="ActorSkillExp";OtherFunctionType[OtherFunctionType.ActorStarCard=1]="ActorStarCard"})(OtherFunctionType=Games.OtherFunctionType||(Games.OtherFunctionType={}))})(Games||(Games={}));var Games;(function(Games){var OscarAwardsType;(function(OscarAwardsType){OscarAwardsType[OscarAwardsType.Man=1]="Man";OscarAwardsType[OscarAwardsType.Woman=2]="Woman";OscarAwardsType[OscarAwardsType.Perform=3]="Perform";OscarAwardsType[OscarAwardsType.Art=4]="Art";OscarAwardsType[OscarAwardsType.PublicPraise=5]="PublicPraise"})(OscarAwardsType=Games.OscarAwardsType||(Games.OscarAwardsType={}))})(Games||(Games={}));var Games;(function(Games){var MainTaskRequireType;(function(MainTaskRequireType){MainTaskRequireType[MainTaskRequireType.RequireType_1_MakeBuild=1]="RequireType_1_MakeBuild";MainTaskRequireType[MainTaskRequireType.RequireType_2_UpgradeBuild=2]="RequireType_2_UpgradeBuild";MainTaskRequireType[MainTaskRequireType.RequireType_3_UpgradeActor=3]="RequireType_3_UpgradeActor";MainTaskRequireType[MainTaskRequireType.RequireType_4_NoseActor=4]="RequireType_4_NoseActor";MainTaskRequireType[MainTaskRequireType.RequireType_5_StreetPublicize=5]="RequireType_5_StreetPublicize";MainTaskRequireType[MainTaskRequireType.RequireType_6_RoadShow=6]="RequireType_6_RoadShow";MainTaskRequireType[MainTaskRequireType.RequireType_7_CityFinish=7]="RequireType_7_CityFinish";MainTaskRequireType[MainTaskRequireType.RequireType_8_TaskMovie=8]="RequireType_8_TaskMovie";MainTaskRequireType[MainTaskRequireType.RequireType_9_SeeMovieReward=9]="RequireType_9_SeeMovieReward";MainTaskRequireType[MainTaskRequireType.RequireType_10_GetMovieReward=10]="RequireType_10_GetMovieReward";MainTaskRequireType[MainTaskRequireType.RequireType_11_UpgradeAttention=11]="RequireType_11_UpgradeAttention";MainTaskRequireType[MainTaskRequireType.RequireType_12_AppointActor=12]="RequireType_12_AppointActor";MainTaskRequireType[MainTaskRequireType.RequireType_13_ChooseFocusPointCity=13]="RequireType_13_ChooseFocusPointCity";MainTaskRequireType[MainTaskRequireType.RequireType_14_GetCityReward=14]="RequireType_14_GetCityReward";MainTaskRequireType[MainTaskRequireType.RequireType_15_DoPuduct=15]="RequireType_15_DoPuduct";MainTaskRequireType[MainTaskRequireType.RequireType_16_CompleteOrder=16]="RequireType_16_CompleteOrder";MainTaskRequireType[MainTaskRequireType.RequireType_17_DoBusiness=17]="RequireType_17_DoBusiness";MainTaskRequireType[MainTaskRequireType.RequireType_18_FansVisit=18]="RequireType_18_FansVisit";MainTaskRequireType[MainTaskRequireType.RequireType_19_GetMovieReward=19]="RequireType_19_GetMovieReward";MainTaskRequireType[MainTaskRequireType.RequireType_20_OpenRank=20]="RequireType_20_OpenRank"})(MainTaskRequireType=Games.MainTaskRequireType||(Games.MainTaskRequireType={}))})(Games||(Games={}));var Games;(function(Games){var ItemUseType;(function(ItemUseType){ItemUseType[ItemUseType.None=0]="None";ItemUseType[ItemUseType.AllReward=1]="AllReward";ItemUseType[ItemUseType.RandomReward=2]="RandomReward";ItemUseType[ItemUseType.ActorUse=3]="ActorUse";ItemUseType[ItemUseType.SelectReward=4]="SelectReward"})(ItemUseType=Games.ItemUseType||(Games.ItemUseType={}))})(Games||(Games={}));var Games;(function(Games){var GuideType;(function(GuideType){GuideType[GuideType.None=0]="None";GuideType[GuideType.Story=1]="Story";GuideType[GuideType.Guide=2]="Guide";GuideType[GuideType.Anima=3]="Anima";GuideType[GuideType.Car=4]="Car"})(GuideType=Games.GuideType||(Games.GuideType={}));var GuideId;(function(GuideId){GuideId[GuideId.Guide_FristId=100101]="Guide_FristId";GuideId[GuideId.Guide_GoldExchangeId=105501]="Guide_GoldExchangeId";GuideId[GuideId.Guide_StreetId=105101]="Guide_StreetId"})(GuideId=Games.GuideId||(Games.GuideId={}));var GuidePlayType;(function(GuidePlayType){GuidePlayType[GuidePlayType.MainTask=0]="MainTask";GuidePlayType[GuidePlayType.DailyTask=1]="DailyTask"})(GuidePlayType=Games.GuidePlayType||(Games.GuidePlayType={}));var GuideCanPlayType;(function(GuideCanPlayType){GuideCanPlayType[GuideCanPlayType.FinishPreGuide=1]="FinishPreGuide";GuideCanPlayType[GuideCanPlayType.HasContinueMovie=2]="HasContinueMovie";GuideCanPlayType[GuideCanPlayType.HasOrderList=3]="HasOrderList";GuideCanPlayType[GuideCanPlayType.SelectRoomType=4]="SelectRoomType";GuideCanPlayType[GuideCanPlayType.HasContinueMovie2=5]="HasContinueMovie2";GuideCanPlayType[GuideCanPlayType.SelectActor=6]="SelectActor";GuideCanPlayType[GuideCanPlayType.VisitActor=7]="VisitActor"})(GuideCanPlayType=Games.GuideCanPlayType||(Games.GuideCanPlayType={}));var GuideAnchor;(function(GuideAnchor){GuideAnchor[GuideAnchor.Left=1]="Left";GuideAnchor[GuideAnchor.Right=2]="Right"})(GuideAnchor=Games.GuideAnchor||(Games.GuideAnchor={}));var GuideDialogType;(function(GuideDialogType){GuideDialogType[GuideDialogType.Dialog=0]="Dialog";GuideDialogType[GuideDialogType.Left=1]="Left";GuideDialogType[GuideDialogType.Right=2]="Right";GuideDialogType[GuideDialogType.Npc=3]="Npc";GuideDialogType[GuideDialogType.HaiBao=4]="HaiBao";GuideDialogType[GuideDialogType.Hide=5]="Hide"})(GuideDialogType=Games.GuideDialogType||(Games.GuideDialogType={}));var GuideUIType;(function(GuideUIType){GuideUIType[GuideUIType.None=0]="None";GuideUIType[GuideUIType.NpcIntro=1]="NpcIntro";GuideUIType[GuideUIType.InitAcotr=2]="InitAcotr";GuideUIType[GuideUIType.HaiBao=3]="HaiBao";GuideUIType[GuideUIType.Menu=4]="Menu"})(GuideUIType=Games.GuideUIType||(Games.GuideUIType={}));var GuideFullClickType;(function(GuideFullClickType){GuideFullClickType[GuideFullClickType.None=0]="None";GuideFullClickType[GuideFullClickType.CompleteWrite=1]="CompleteWrite";GuideFullClickType[GuideFullClickType.NextGuide=2]="NextGuide";GuideFullClickType[GuideFullClickType.CompleteNotForceGuide=3]="CompleteNotForceGuide";GuideFullClickType[GuideFullClickType.NextStory=4]="NextStory"})(GuideFullClickType=Games.GuideFullClickType||(Games.GuideFullClickType={}));var StoryTriggerType;(function(StoryTriggerType){StoryTriggerType[StoryTriggerType.Start=0]="Start";StoryTriggerType[StoryTriggerType.Create=1]="Create";StoryTriggerType[StoryTriggerType.ClickBtn=2]="ClickBtn";StoryTriggerType[StoryTriggerType.ClickIcon=3]="ClickIcon";StoryTriggerType[StoryTriggerType.SelectActor=4]="SelectActor";StoryTriggerType[StoryTriggerType.FinishStreet=5]="FinishStreet";StoryTriggerType[StoryTriggerType.FinishRoadShow=6]="FinishRoadShow";StoryTriggerType[StoryTriggerType.FinishBuild=7]="FinishBuild";StoryTriggerType[StoryTriggerType.FinishPreGuide=8]="FinishPreGuide";StoryTriggerType[StoryTriggerType.OpenMenu=9]="OpenMenu";StoryTriggerType[StoryTriggerType.FristSumitTakeMovie=10]="FristSumitTakeMovie";StoryTriggerType[StoryTriggerType.FristMovieUp=11]="FristMovieUp";StoryTriggerType[StoryTriggerType.FinishPreStory=12]="FinishPreStory";StoryTriggerType[StoryTriggerType.OpenOscar=13]="OpenOscar";StoryTriggerType[StoryTriggerType.SelectStoryMoneyNotEnough=14]="SelectStoryMoneyNotEnough";StoryTriggerType[StoryTriggerType.FinishMainTask=15]="FinishMainTask";StoryTriggerType[StoryTriggerType.FiveStarStory=16]="FiveStarStory";StoryTriggerType[StoryTriggerType.FourStarActor=17]="FourStarActor";StoryTriggerType[StoryTriggerType.FilmState=18]="FilmState";StoryTriggerType[StoryTriggerType.End=19]="End"})(StoryTriggerType=Games.StoryTriggerType||(Games.StoryTriggerType={}));var GuideFinishType;(function(GuideFinishType){GuideFinishType[GuideFinishType.GuideFinishType_1_MakeBuild=1]="GuideFinishType_1_MakeBuild";GuideFinishType[GuideFinishType.GuideFinishType_2_UpgradeBuild=2]="GuideFinishType_2_UpgradeBuild";GuideFinishType[GuideFinishType.GuideFinishType_3_UpgradeActor=3]="GuideFinishType_3_UpgradeActor";GuideFinishType[GuideFinishType.GuideFinishType_4_NoseActor=4]="GuideFinishType_4_NoseActor";GuideFinishType[GuideFinishType.GuideFinishType_5_StreetPublicize=5]="GuideFinishType_5_StreetPublicize";GuideFinishType[GuideFinishType.GuideFinishType_6_RoadShow=6]="GuideFinishType_6_RoadShow";GuideFinishType[GuideFinishType.GuideFinishType_7_CityFinish=7]="GuideFinishType_7_CityFinish";GuideFinishType[GuideFinishType.GuideFinishType_8_TakeMovie=8]="GuideFinishType_8_TakeMovie";GuideFinishType[GuideFinishType.GuideFinishType_9_SeeMovieReward=9]="GuideFinishType_9_SeeMovieReward";GuideFinishType[GuideFinishType.GuideFinishType_10_GetMovieReward=10]="GuideFinishType_10_GetMovieReward";GuideFinishType[GuideFinishType.GuideFinishType_11_UpgradeAttention=11]="GuideFinishType_11_UpgradeAttention";GuideFinishType[GuideFinishType.GuideFinishType_12_AppointActor=12]="GuideFinishType_12_AppointActor";GuideFinishType[GuideFinishType.GuideFinishType_13_ChooseFocusPointCity=13]="GuideFinishType_13_ChooseFocusPointCity";GuideFinishType[GuideFinishType.GuideFinishType_14_GetCityReward=14]="GuideFinishType_14_GetCityReward";GuideFinishType[GuideFinishType.GuideFinishType_15_DoPuduct=15]="GuideFinishType_15_DoPuduct";GuideFinishType[GuideFinishType.GuideFinishType_16_CompleteOrder=16]="GuideFinishType_16_CompleteOrder";GuideFinishType[GuideFinishType.GuideFinishType_17_DoBusiness=17]="GuideFinishType_17_DoBusiness";GuideFinishType[GuideFinishType.GuideFinishType_18_FansVisit=18]="GuideFinishType_18_FansVisit";GuideFinishType[GuideFinishType.GuideFinishType_19_GetTotalRewardMovie=19]="GuideFinishType_19_GetTotalRewardMovie";GuideFinishType[GuideFinishType.GuideFinishType_20_ClickTarget=20]="GuideFinishType_20_ClickTarget";GuideFinishType[GuideFinishType.GuideFinishType_21_ExpendFloor=21]="GuideFinishType_21_ExpendFloor";GuideFinishType[GuideFinishType.GuideFinishType_22_SelectContory=22]="GuideFinishType_22_SelectContory";GuideFinishType[GuideFinishType.GuideFinishType_23_SelectCity=23]="GuideFinishType_23_SelectCity";GuideFinishType[GuideFinishType.GuideFinishType_24_ClickAnyWhere=24]="GuideFinishType_24_ClickAnyWhere";GuideFinishType[GuideFinishType.GuideFinishType_25_OrderIntoBox=25]="GuideFinishType_25_OrderIntoBox";GuideFinishType[GuideFinishType.GuideFinishType_26_SelectStory=26]="GuideFinishType_26_SelectStory";GuideFinishType[GuideFinishType.GuideFinishType_27_CostlicenceNum=27]="GuideFinishType_27_CostlicenceNum";GuideFinishType[GuideFinishType.GuideFinishType_28_TakeMoiveType=28]="GuideFinishType_28_TakeMoiveType";GuideFinishType[GuideFinishType.GuideFinishType_29_Secretary=29]="GuideFinishType_29_Secretary";GuideFinishType[GuideFinishType.GuideFinishType_30_MarketSelectActor=30]="GuideFinishType_30_MarketSelectActor"})(GuideFinishType=Games.GuideFinishType||(Games.GuideFinishType={}))})(Games||(Games={}));var Games;(function(Games){var GoalData=(function(){function GoalData(){}GoalData.prototype.initData=function(curProgress,maxProgress){this.curProgress=curProgress;this.maxProgress=maxProgress;this.status=curProgress>=maxProgress?1:0;this.progressString=format("{0}/{1}",curProgress,maxProgress)};return GoalData}());Games.GoalData=GoalData})(Games||(Games={}));var Games;(function(Games){var DirtionType;(function(DirtionType){DirtionType[DirtionType.None=0]="None";DirtionType[DirtionType.Left=1]="Left";DirtionType[DirtionType.Right=2]="Right";DirtionType[DirtionType.Up=3]="Up";DirtionType[DirtionType.Down=4]="Down"})(DirtionType=Games.DirtionType||(Games.DirtionType={}))})(Games||(Games={}));var Games;(function(Games){var Dirtion;(function(Dirtion){Dirtion[Dirtion.None=0]="None";Dirtion[Dirtion.Left=1]="Left";Dirtion[Dirtion.Right=2]="Right";Dirtion[Dirtion.Up=3]="Up";Dirtion[Dirtion.Down=4]="Down"})(Dirtion=Games.Dirtion||(Games.Dirtion={}))})(Games||(Games={}));var Games;(function(Games){var CountryStateEnum;(function(CountryStateEnum){CountryStateEnum[CountryStateEnum.NotOccupy=0]="NotOccupy";CountryStateEnum[CountryStateEnum.InOccupy=1]="InOccupy";CountryStateEnum[CountryStateEnum.HasOccupy=2]="HasOccupy"})(CountryStateEnum=Games.CountryStateEnum||(Games.CountryStateEnum={}))})(Games||(Games={}));var Games;(function(Games){var CooperationSubwindowType;(function(CooperationSubwindowType){CooperationSubwindowType[CooperationSubwindowType.serachOther=0]="serachOther";CooperationSubwindowType[CooperationSubwindowType.cooperationApply=1]="cooperationApply";CooperationSubwindowType[CooperationSubwindowType.cooperationRealtionship=2]="cooperationRealtionship";CooperationSubwindowType[CooperationSubwindowType.CooperationEnd=3]="CooperationEnd";CooperationSubwindowType[CooperationSubwindowType.CooperationAchieved=4]="CooperationAchieved"})(CooperationSubwindowType=Games.CooperationSubwindowType||(Games.CooperationSubwindowType={}))})(Games||(Games={}));var Games;(function(Games){var CityStateEnum;(function(CityStateEnum){CityStateEnum[CityStateEnum.Lock=0]="Lock";CityStateEnum[CityStateEnum.InOccupy=1]="InOccupy";CityStateEnum[CityStateEnum.FinishPublicity=2]="FinishPublicity";CityStateEnum[CityStateEnum.FinishRoadShow=3]="FinishRoadShow";CityStateEnum[CityStateEnum.hasOccupy=4]="hasOccupy"})(CityStateEnum=Games.CityStateEnum||(Games.CityStateEnum={}))})(Games||(Games={}));var Games;(function(Games){var ButtonType;(function(ButtonType){ButtonType[ButtonType.Button_Normal=1]="Button_Normal";ButtonType[ButtonType.Button_Main=2]="Button_Main";ButtonType[ButtonType.Button_Time=3]="Button_Time";ButtonType[ButtonType.Button_Goal=4]="Button_Goal";ButtonType[ButtonType.Button_GoalTime=5]="Button_GoalTime"})(ButtonType=Games.ButtonType||(Games.ButtonType={}))})(Games||(Games={}));var Games;(function(Games){var BuildingEffectType;(function(BuildingEffectType){BuildingEffectType[BuildingEffectType.effect_add_movie_day=1]="effect_add_movie_day";BuildingEffectType[BuildingEffectType.effect_add_movie_reward=2]="effect_add_movie_reward";BuildingEffectType[BuildingEffectType.effect_add_movie_attr=3]="effect_add_movie_attr";BuildingEffectType[BuildingEffectType.effect_add_train_actor=4]="effect_add_train_actor";BuildingEffectType[BuildingEffectType.effect_add_actor_pool=5]="effect_add_actor_pool";BuildingEffectType[BuildingEffectType.effect_add_city_gold_fans=6]="effect_add_city_gold_fans";BuildingEffectType[BuildingEffectType.effect_add_movie_fans=7]="effect_add_movie_fans";BuildingEffectType[BuildingEffectType.effect_add_movie_expert=8]="effect_add_movie_expert";BuildingEffectType[BuildingEffectType.effect_add_bag_limit=9]="effect_add_bag_limit";BuildingEffectType[BuildingEffectType.effect_add_order_zan=10]="effect_add_order_zan";BuildingEffectType[BuildingEffectType.effect_add_order_xuanchuan=11]="effect_add_order_xuanchuan";BuildingEffectType[BuildingEffectType.effect_add_business_reward=13]="effect_add_business_reward";BuildingEffectType[BuildingEffectType.effect_add_business_limit=15]="effect_add_business_limit";BuildingEffectType[BuildingEffectType.effect_add_fans_limit=16]="effect_add_fans_limit";BuildingEffectType[BuildingEffectType.effect_add_fans_visit_time=17]="effect_add_fans_visit_time";BuildingEffectType[BuildingEffectType.effect_add_fans_visit_reward=18]="effect_add_fans_visit_reward";BuildingEffectType[BuildingEffectType.effect_add_meeting_limit=19]="effect_add_meeting_limit";BuildingEffectType[BuildingEffectType.effect_add_meeting_reward=20]="effect_add_meeting_reward";BuildingEffectType[BuildingEffectType.effect_add_goldexchange_num=22]="effect_add_goldexchange_num"})(BuildingEffectType=Games.BuildingEffectType||(Games.BuildingEffectType={}))})(Games||(Games={}));var Games;(function(Games){var BlockRankRewardType;(function(BlockRankRewardType){BlockRankRewardType[BlockRankRewardType.TOTEL=1]="TOTEL";BlockRankRewardType[BlockRankRewardType.ONCE=2]="ONCE"})(BlockRankRewardType=Games.BlockRankRewardType||(Games.BlockRankRewardType={}))})(Games||(Games={}));var Games;(function(Games){var AssistantData=(function(){function AssistantData(){this.spectacle=0;this.perform=0;this.plot=0;this.art=0;this.entertainment=0}Object.defineProperty(AssistantData.prototype,"config",{get:function(){var actorData=this.actorData;if(actorData){var id=actorData.config.star*10000+this.id*1000+this.level;return Game.config.actorAide.getConfig(id)}return null},enumerable:true,configurable:true});AssistantData.prototype.getOtherConfig=function(lv){var actorData=this.actorData;if(actorData){var id=actorData.config.star*10000+this.id*1000+lv;return Game.config.actorAide.getConfig(id)}return null};Object.defineProperty(AssistantData.prototype,"uuid",{get:function(){var actorData=this.actorData;if(actorData){return actorData.uuid}return""},enumerable:true,configurable:true});Object.defineProperty(AssistantData.prototype,"nextValue",{get:function(){var cfg=this.getOtherConfig(this.level);var value=0;if(cfg){value=this.isMainId?cfg.main_property:cfg.secondary_property}return value},enumerable:true,configurable:true});Object.defineProperty(AssistantData.prototype,"preValue",{get:function(){var cfg=this.getOtherConfig(this.level-1);var value=0;if(cfg){value=this.isMainId?cfg.main_property:cfg.secondary_property}return value},enumerable:true,configurable:true});Object.defineProperty(AssistantData.prototype,"iconUrl",{get:function(){var cfg=this.config;if(cfg){if(this.level>0){return cfg.iconUrl}else{return cfg.iconUrl2}}return""},enumerable:true,configurable:true});Object.defineProperty(AssistantData.prototype,"propUrl",{get:function(){var propConfig=Game.config.property.getConfig(this.propId);return propConfig.iconUrl},enumerable:true,configurable:true});Object.defineProperty(AssistantData.prototype,"levelTxt",{get:function(){if(this.level>0){return format(Games.TEXT.LVDot,this.level)}return""},enumerable:true,configurable:true});Object.defineProperty(AssistantData.prototype,"cost",{get:function(){return this.costDtItems},enumerable:true,configurable:true});Object.defineProperty(AssistantData.prototype,"canUp",{get:function(){var cost=this.cost;if(this.level>0&&Games.ItemHelper.checkItemsEnough(cost)&&this.isMax==false){return true}return false},enumerable:true,configurable:true});Object.defineProperty(AssistantData.prototype,"isMax",{get:function(){var cfg=this.getOtherConfig(this.level+1);return cfg==null},enumerable:true,configurable:true});AssistantData.prototype.formatByProto=function(msg,actorData,id){this.actorData=actorData;if(msg){this.level=msg.level;this.id=msg.id;this.actorSign=msg.actorSign}else{this.level=0;this.id=id;this.actorSign=0}this.costDtItems=[];var cfg=this.config;if(cfg){if(cfg.cost>0){var item=new DTItemNum();item.itemId=Game.config.item.getItemByActorId(this.actorData.id).id;item.itemNum=cfg.cost;this.costDtItems=this.costDtItems.concat(item)}if(cfg.introduction){this.costDtItems=this.costDtItems.concat(cfg.introduction)}}this.caculateProp()};AssistantData.prototype.caculateProp=function(){var data=this.actorData;var props=data.getProps();var propId=props[this.config.number-1];var config=Game.config.property.getConfig(propId);var filed=config.field;var isMainId=data.config.isMainID(propId);var totalValue=0;if(this.level>0){var lv=this.level-1;while(lv>=0){var preConfig=this.getOtherConfig(lv);var addValue=isMainId?preConfig.main_property:preConfig.secondary_property;totalValue=totalValue+addValue;lv--}}this.propId=propId;this.isMainId=isMainId;this.propValue=totalValue;this[filed]=totalValue;var tagId=this.actorData.id*100+this.id*10+1;var tagCfg=Game.config.actorAideattach.getConfig(tagId);if(tagCfg){this.isUnlockTag=this.level>=tagCfg.lv;this.unlockTagTip=format(Games.TEXT.AssistantUnlockTag,tagCfg.lv);this.tagAddValue=tagCfg.value}var trainId=this.actorData.id*100+this.id*10+2;var trainCfg=Game.config.actorAideattach.getConfig(trainId);if(trainCfg){this.isUnlockTrain=this.level>=trainCfg.lv;this.unlockTrainTip=format(Games.TEXT.AssistantUnlockTrain,trainCfg.lv);this.trainAddValue=trainCfg.value}};return AssistantData}());Games.AssistantData=AssistantData})(Games||(Games={}));var Games;(function(Games){var AssetType;(function(AssetType){AssetType[AssetType.Diamond=1]="Diamond";AssetType[AssetType.Gold=2]="Gold";AssetType[AssetType.Dollar=3]="Dollar";AssetType[AssetType.FilmLicence=4]="FilmLicence";AssetType[AssetType.Fans=5]="Fans";AssetType[AssetType.Thumb=6]="Thumb";AssetType[AssetType.Tile=9001]="Tile";AssetType[AssetType.Glass=9002]="Glass";AssetType[AssetType.Cement=9003]="Cement";AssetType[AssetType.Wood=9004]="Wood"})(AssetType=Games.AssetType||(Games.AssetType={}))})(Games||(Games={}));var Games;(function(Games){var ActorTagData=(function(){function ActorTagData(){}return ActorTagData}());Games.ActorTagData=ActorTagData})(Games||(Games={}));var Games;(function(Games){var ActorRequireEnum;(function(ActorRequireEnum){ActorRequireEnum[ActorRequireEnum.sex=1]="sex";ActorRequireEnum[ActorRequireEnum.Continents=2]="Continents";ActorRequireEnum[ActorRequireEnum.type=3]="type";ActorRequireEnum[ActorRequireEnum.age=4]="age";ActorRequireEnum[ActorRequireEnum.scene=5]="scene";ActorRequireEnum[ActorRequireEnum.performance=6]="performance";ActorRequireEnum[ActorRequireEnum.plot=7]="plot";ActorRequireEnum[ActorRequireEnum.art=8]="art";ActorRequireEnum[ActorRequireEnum.entertainment=9]="entertainment"})(ActorRequireEnum=Games.ActorRequireEnum||(Games.ActorRequireEnum={}))})(Games||(Games={}));var Games;(function(Games){var GameInstaller=(function(){function GameInstaller(){this._fontNum=0;this._fontTotal=1}GameInstaller.prototype.install=function(){Games.MenuWindows.install();Game.guiRes.install();Game.spriteRes.install();this.installSystem()};GameInstaller.prototype.installSystem=function(){fairygui.UIConfig.packageFileExtension=Games.GuiSetting.packageFileExtension;fairygui.UIConfig.buttonSound=SoundKey.getUrl(SoundKey.MM01_Button);fguiBinderAll();if(BrowserDetect.isConch){this.loadFonts()}else{this.loadConfig()}};GameInstaller.prototype.loadFonts=function(){Laya.loader.load("font/ArialInput.ttf",Laya.Handler.create(this,this.onLoadFont,["font/ArialInput.ttf","ArialInput"]),null,Loader.BUFFER);Laya.loader.load("font/Content.ttf",Laya.Handler.create(this,this.onLoadFont,["font/Content.ttf","HYZhengYuan-65W"]),null,Loader.BUFFER);if(LangManager.Instance.lang==LangType.zh_cn){Laya.loader.load("font/TitleEn.ttf",Laya.Handler.create(this,this.onLoadFont,["font/TitleEn.ttf","HYZhengYuan-95W"]),null,Loader.BUFFER)}else{Laya.loader.load("font/TitleCn.ttf",Laya.Handler.create(this,this.onLoadFont,["font/TitleCn.ttf","HYZhengYuan-95W"]),null,Loader.BUFFER)}};GameInstaller.prototype.onLoadFont=function(path,name){var buff=Laya.loader.getRes(path);console.log("onLoadFont path="+path+",  name="+name+",  buff="+buff);if(buff){window.conch.setFontFaceFromBuffer(name,buff)}this._fontNum++;if(this._fontNum>=this._fontTotal){this.loadConfig()}};GameInstaller.prototype.loadConfig=function(){Game.config.configLoader=Game.asset;Game.config.sLoaded.add(this.onLoadedConfig,this);Game.config.initList();Game.config.loadAll()};GameInstaller.prototype.onLoadedConfig=function(){console.log("\u914D\u7F6E \u52A0\u8F7D\u5B8C\u6210\u6240\u6709");this.loadLangConfig()};GameInstaller.prototype.loadLangConfig=function(){Game.lang.current.configLoader=Game.asset;Game.lang.current.sLoaded.add(this.onLoadedLangConfig,this);Game.lang.current.initList();Game.lang.current.loadAll()};GameInstaller.prototype.onLoadedLangConfig=function(){console.log("\u591A\u8BED\u8A00\u914D\u7F6E \u52A0\u8F7D\u5B8C\u6210\u6240\u6709");Game.moduleModel.install();this.loadRes()};GameInstaller.prototype.loadRes=function(){var preload=new Games.GamePreload();preload.begin(this,this.onLoadRes)};GameInstaller.prototype.onLoadRes=function(){fairygui.UIConfig.globalModalWaiting=fairygui.UIPackage.getItemURL("System","GlobalModalWaiting");fairygui.UIConfig.windowModalWaiting=fairygui.UIPackage.getItemURL("System","WindowModalWaiting");Game.circle=new Games.Circle();this.requestServerList()};GameInstaller.prototype.requestServerList=function(){Game.channel=Games.ChannelManager.getInstance();Game.channel.requestServerList(null,null,function(){Game.channel.requestNotice();Game.loader.close(Games.LoaderId.Launch);Game.onInstallComplete()},function(){Game.system.alertText(Games.TEXT.ErorRequestServerList);Game.loader.close(Games.LoaderId.Launch);Game.onInstallComplete()})};return GameInstaller}());Games.GameInstaller=GameInstaller})(Games||(Games={}));var Games;(function(Games){var SystemEffect=(function(){function SystemEffect(){this.list=[];this.pools=[]}SystemEffect.prototype.playeffect=function(dtItem,delay){if(delay===void 0){delay=0}this.show(dtItem,delay)};SystemEffect.prototype.playeffects=function(dts){for(var index=0;index<dts.length;index++){var element=dts[index];this.show(element,index*200)}};SystemEffect.prototype.show=function(dtItem,delay){var item;if(this.pools.length>0){item=this.pools.pop()}else{item=fgui.Common.ItemCellView.createInstance();this.list.push(item);Games.MenuLayer.floatMsg.addChild(item)}item.visible=true;item.setXY(fairygui.GRoot.inst.width>>1,fairygui.GRoot.inst.height>>1);item.updateViewByDTNum(dtItem);var endPos=new Point();if(dtItem.isBagType){endPos.x=fairygui.GRoot.inst.width;endPos.y=fairygui.GRoot.inst.height}Laya.Tween.to(item,{x:endPos.x,y:endPos.y},500,Laya.Ease.quadOut,Handler.create(this,this.onComplete,[item]),delay)};SystemEffect.prototype.onComplete=function(item){item.visible=false;this.pools.push(item)};return SystemEffect}());Games.SystemEffect=SystemEffect})(Games||(Games={}));var DoTween;(function(DoTween){function TweenMove(target,fromtPoint,toPoint,duration,ease,complete,delay,coverBefore,autoRecover){target.x=fromtPoint.x;target.y=fromtPoint.y;laya.utils.Tween.to(target,{x:toPoint.x,y:toPoint.y},duration,ease,complete,delay,coverBefore,autoRecover)}DoTween.TweenMove=TweenMove;function TweenRect(target,fromRect,toRect,duration,ease,complete,delay,coverBefore,autoRecover){target.x=fromRect.x;target.y=fromRect.y;target.width=fromRect.width;target.height=fromRect.height;laya.utils.Tween.to(target,{x:toRect.x,y:toRect.y,width:toRect.width,height:toRect.height},duration,ease,complete,delay,coverBefore,autoRecover)}DoTween.TweenRect=TweenRect})(DoTween||(DoTween={}));var Games;(function(Games){var SoundManager=Laya.SoundManager;var AudioManager=(function(){function AudioManager(){this.soundPlayingDic=new Dictionary();this.localUseGlobal=true}AudioManager.prototype.install=function(){this.onLogin();gameApplication.sAppResume.add(this.onAppResume,this)};AudioManager.prototype.onAppResume=function(){this.replayMusic()};AudioManager.prototype.onLogin=function(){this.muted=this.muted;this.soundMuted=this.soundMuted;this.musicMuted=this.musicMuted;this.musicVolume=this.musicVolume;this.soundVolume=this.soundVolume};AudioManager.prototype.playMusic=function(soundKey,loops,complete,startTime){this.lastMusic=soundKey;if(this.musicMuted){return}var path=SoundKey.getPath(soundKey);SoundManager.stopMusic();return SoundManager.playMusic(path,loops,complete,startTime)};AudioManager.prototype.replayMusic=function(){if(this.lastMusic){this.playMusic(this.lastMusic)}else{this.playMusic(SoundKey.MM_BGM_Cinema)}};AudioManager.prototype.playSound=function(soundKey,isStopPreSound,loops,complete,startTime){if(!this.soundPlayingDic||this.soundPlayingDic===null){this.soundPlayingDic=new Dictionary()}if(isStopPreSound){this.stopAllSound();this.soundPlayingDic.clear()}var path=SoundKey.getPath(soundKey);var isPlay=true;if(!complete||complete===null){complete=Handler.create(this,this.playSoundComplete,[path]);if(this.soundPlayingDic.hasKey(path)){isPlay=false}}if(isPlay){var soundChannel=SoundManager.playSound(path,loops,complete,startTime);this.soundPlayingDic.add(path,soundChannel)}return this.soundPlayingDic.getValue(path)};AudioManager.prototype.playSoundComplete=function(path){if(this.soundPlayingDic.hasKey(path)){this.soundPlayingDic.remove(path)}};AudioManager.prototype.stopSound=function(soundKey){var path=SoundKey.getPath(soundKey);if(this.soundPlayingDic.hasKey(path)){this.soundPlayingDic.remove(path)}SoundManager.stopSound(path)};AudioManager.prototype.stopAll=function(){if(this.soundPlayingDic){this.soundPlayingDic.clear()}SoundManager.stopAll()};AudioManager.prototype.stopAllSound=function(){if(this.soundPlayingDic){this.soundPlayingDic.clear()}SoundManager.stopAllSound()};AudioManager.prototype.stopMusic=function(){SoundManager.stopMusic()};Object.defineProperty(AudioManager.prototype,"muted",{get:function(){if(this._muted===undefined){this._muted=Game.localStorage.hasItem("sound_muted",this.localUseGlobal)?Game.localStorage.getBoolean("sound_muted",this.localUseGlobal):false}return this._muted},set:function(value){this._muted=value;Game.localStorage.setBoolean("sound_muted",value,this.localUseGlobal);SoundManager.muted=value},enumerable:true,configurable:true});Object.defineProperty(AudioManager.prototype,"soundMuted",{get:function(){if(this._soundMuted===undefined){this._soundMuted=Game.localStorage.hasItem("sound_soundMuted",this.localUseGlobal)?Game.localStorage.getBoolean("sound_soundMuted",this.localUseGlobal):false}return this._soundMuted},set:function(value){this._soundMuted=value;Game.localStorage.setBoolean("sound_soundMuted",value,this.localUseGlobal);SoundManager.soundMuted=value},enumerable:true,configurable:true});Object.defineProperty(AudioManager.prototype,"musicMuted",{get:function(){if(this._musicMuted===undefined){this._musicMuted=Game.localStorage.hasItem("sound_musicMuted",this.localUseGlobal)?Game.localStorage.getBoolean("sound_musicMuted",this.localUseGlobal):false}return this._musicMuted},set:function(value){this._musicMuted=value;Game.localStorage.setBoolean("sound_musicMuted",value,this.localUseGlobal);SoundManager.musicMuted=value;if(value){SoundManager.stopMusic()}else{this.replayMusic()}},enumerable:true,configurable:true});Object.defineProperty(AudioManager.prototype,"musicVolume",{get:function(){if(this._musicVolume===undefined){this._musicVolume=Game.localStorage.hasItem("sound_musicVolume",this.localUseGlobal)?Game.localStorage.getFloat("sound_musicVolume",this.localUseGlobal):1}return this._musicVolume},set:function(value){this._musicVolume=value;Game.localStorage.setFloat("sound_musicVolume",value,this.localUseGlobal);SoundManager.musicVolume=value},enumerable:true,configurable:true});Object.defineProperty(AudioManager.prototype,"soundVolume",{get:function(){if(this._soundVolume===undefined){this._soundVolume=Game.localStorage.hasItem("sound_soundVolume",this.localUseGlobal)?Game.localStorage.getFloat("sound_soundVolume",this.localUseGlobal):1}return this._soundVolume},set:function(value){this._soundVolume=value;Game.localStorage.setFloat("sound_soundVolume",value,this.localUseGlobal);SoundManager.soundVolume=value},enumerable:true,configurable:true});Object.defineProperty(AudioManager.prototype,"autoStopMusic",{get:function(){return this._autoStopMusic},set:function(value){SoundManager.autoStopMusic=value;this._autoStopMusic=value},enumerable:true,configurable:true});return AudioManager}());Games.AudioManager=AudioManager})(Games||(Games={}));var Games;(function(Games){var TrailEmitterPool=(function(){function TrailEmitterPool(){this.allList=[];this.list=[]}Object.defineProperty(TrailEmitterPool.prototype,"totalNum",{get:function(){return this.allList.length},enumerable:true,configurable:true});Object.defineProperty(TrailEmitterPool.prototype,"poolNum",{get:function(){return this.list.length},enumerable:true,configurable:true});Object.defineProperty(TrailEmitterPool.prototype,"useNum",{get:function(){return this.totalNum-this.poolNum},enumerable:true,configurable:true});TrailEmitterPool.prototype.recover=function(emitter){if(this.list.length>=TrailEmitterPool.MAX_POOL_CAPACITY){emitter.stop();var index=this.allList.indexOf(emitter);if(index!=-1){this.allList.splice(index,1)}}else{emitter.recover();this.list.push(emitter)}};TrailEmitterPool.prototype.requrestItem=function(){var emitter;if(this.list.length>0){emitter=this.list.pop()}else{emitter=new Games.TrailEmitter();this.allList.push(emitter)}return emitter};TrailEmitterPool.MAX_POOL_CAPACITY=50;return TrailEmitterPool}());Games.TrailEmitterPool=TrailEmitterPool})(Games||(Games={}));var Games;(function(Games){var Actioner=(function(){function Actioner(){}Actioner.prototype.addedToEmitter=function(emitter){};Actioner.prototype.removedFromEmitter=function(emitter){};Actioner.prototype.update=function(emitter,particle,time){};return Actioner}());Games.Actioner=Actioner})(Games||(Games={}));var Games;(function(Games){var ModuleConfig=(function(){function ModuleConfig(menuId,windowClass){this.menuId=menuId;this.windowClass=windowClass}return ModuleConfig}());Games.ModuleConfig=ModuleConfig})(Games||(Games={}));var Games;(function(Games){var MModel=(function(){function MModel(){}MModel.prototype.install=function(){};return MModel}());Games.MModel=MModel})(Games||(Games={}));var Games;(function(Games){var MenuPositionType;(function(MenuPositionType){MenuPositionType[MenuPositionType.Bottom_Left=1]="Bottom_Left";MenuPositionType[MenuPositionType.Bottom_Middle=2]="Bottom_Middle";MenuPositionType[MenuPositionType.Bottom_Right=3]="Bottom_Right";MenuPositionType[MenuPositionType.Sub_Right=4]="Sub_Right";MenuPositionType[MenuPositionType.Right_Top_Group=22]="Right_Top_Group"})(MenuPositionType=Games.MenuPositionType||(Games.MenuPositionType={}))})(Games||(Games={}));var Games;(function(Games){var MenuOpenType;(function(MenuOpenType){MenuOpenType[MenuOpenType.None=0]="None";MenuOpenType[MenuOpenType.Tab=2]="Tab";MenuOpenType[MenuOpenType.Subwindow=3]="Subwindow"})(MenuOpenType=Games.MenuOpenType||(Games.MenuOpenType={}))})(Games||(Games={}));var Games;(function(Games){var MenuManager=(function(){function MenuManager(){this.dict=new Dictionary();this.list=[];this.stack=[]}MenuManager.prototype.install=function(){};MenuManager.prototype.getMenuCtl=function(menuId){return this.dict.getValue(menuId)};MenuManager.prototype.destory=function(menuId){var ctl=this.getMenuCtl(menuId);if(ctl){if(ctl.state==Games.MenuCtlStateType.Opened){ctl.close();setTimeout(function(){ctl.destory()},100)}else{ctl.destory()}}};MenuManager.prototype.openTab=function(menuId,tabIndex){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}return this._open(menuId,{openType:Games.MenuOpenType.Tab,openIndex:tabIndex,args:args})};MenuManager.prototype.openSubWindow=function(menuId,subwindowIndex){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}return this._open(menuId,{openType:Games.MenuOpenType.Subwindow,openIndex:subwindowIndex,args:args})};MenuManager.prototype.open=function(menuId){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}return this._open(menuId,{openType:Games.MenuOpenType.None,openIndex:0,args:args})};MenuManager.prototype.openByMenuIndexId=function(menuIndexId){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}var indexConfig=Game.config.menuIndex.getConfig(menuIndexId);if(indexConfig){switch(indexConfig.openType){case Games.MenuOpenType.Subwindow:this.openSubWindow.apply(this,[indexConfig.menuId,indexConfig.menuIndex].concat(args));break;case Games.MenuOpenType.Tab:this.openTab.apply(this,[indexConfig.menuId,indexConfig.menuIndex].concat(args));break;default:this.open.apply(this,[indexConfig.menuId].concat(args));break}}else{var menuConfig=Game.config.menu.getConfig(menuIndexId);if(menuConfig){this.open.apply(this,[menuIndexId].concat(args))}}};MenuManager.prototype.openHome=function(){var home=this.getMenuCtl(Games.MenuId.Home);if(!home||home.state!=Games.MenuCtlStateType.Opened){home=this.open(Games.MenuId.Home)}if(home.moduleWindow.contentPane&&!home.moduleWindow.contentPane.visible){home.moduleWindow.contentPane.visible=true}};MenuManager.prototype.closeHome=function(){var home=this.getMenuCtl(Games.MenuId.Home);if(home&&home.moduleWindow&&home.moduleWindow.contentPane){home.moduleWindow.contentPane.visible=false}};MenuManager.prototype._open=function(menuId,parametar){var ctl=this.getMenuCtl(menuId);if(!ctl){var menuConfig=Game.config.menu.getConfig(menuId);if(!menuConfig){error("MenuManager.open \u6CA1\u6709\u627E\u5230menuConfig, menuId="+menuId);return null}var menuWindowConfig=Games.MenuWindows.get(menuId);if(!menuWindowConfig){error("MenuManager.open \u6CA1\u6709\u627E\u5230menuWindowConfig, menuId="+menuId);return null}if(!menuWindowConfig.windowClass){error("MenuManager.open menuWindowConfig.windowClass="+menuWindowConfig.windowClass+", menuId="+menuId);return null}ctl=new Games.MenuCtl();ctl.__menuManager=this;ctl.menuId=menuId;ctl.menuConfig=menuConfig;ctl.menuWindowConfig=menuWindowConfig;this.dict.add(menuId,ctl);if(ctl.menuId!=Games.MenuId.Home){this.list.push(ctl)}}ctl.open(parametar);var index=this.stack.indexOf(ctl);if(index!=-1){this.stack.splice(index,1)}this.stack.push(ctl);return ctl};MenuManager.prototype.back=function(menuId){var _this=this;var ctl=this.getMenuCtl(menuId);if(ctl){var backMenuId=ctl.backMenuId;if(backMenuId>0){var backMenuCtl=this.getMenuCtl(backMenuId);if(backMenuCtl){backMenuCtl.backExcludeMenuIdMenuId=menuId;var openParametar=backMenuCtl.moduleWindow?backMenuCtl.moduleWindow.getLastMenuParameter():null;if(!openParametar){openParametar=backMenuCtl.openParametar}this._open(backMenuId,openParametar)}}setTimeout(function(){_this.close(menuId)},100)}};MenuManager.prototype.close=function(menuId){var ctl=this.getMenuCtl(menuId);if(ctl){ctl.closeIsDestory=true;ctl.close()}};MenuManager.prototype.__onMenuClose=function(ctl){for(var i=this.stack.length-1;i>=0;i--){if(this.stack[i]==ctl){this.stack.splice(i,1)}}var openedNum=0;var sameLayoutOpenedNum=0;var moduleOpenedNum=0;for(var _i=0,_a=this.list;_i<_a.length;_i++){var item=_a[_i];if(item.menuId==ctl.menuId){continue}switch(item.state){case Games.MenuCtlStateType.Opened:openedNum++;if(item.menuConfig.menuLayer==ctl.menuConfig.menuLayer){sameLayoutOpenedNum++}if(item.menuConfig.menuLayer==Games.MenuLayerType.Module||item.menuConfig.menuLayer==Games.MenuLayerType.ModuleTop){moduleOpenedNum++}break}}console.log("\u5173\u95ED\u9762\u677F "+ctl.menuConfig.zh_cn_name+" ( "+ctl.menuConfig.moduleName+')  :" + openedNum='+openedNum+", sameLayoutOpenedNum="+sameLayoutOpenedNum+", moduleOpenedNum="+moduleOpenedNum);if(moduleOpenedNum==0&&ctl.menuConfig.isAutoOpenHomeWindow){var home=this.getMenuCtl(Games.MenuId.Home);if(!home||home.state!=Games.MenuCtlStateType.Opened){home=this.open(Games.MenuId.Home)}var homeWindow=home.moduleWindow;if(homeWindow){homeWindow.setHomeShow()}}ctl.__delayClose();this.onTick();FGLoader.clearFreeLong()};MenuManager.prototype.getLastOpenMenuId=function(){if(this.stack.length>0){return this.stack[this.stack.length-1].menuId}return -1};MenuManager.prototype.getLastModuleOpenMenuId=function(excludeMenuId){for(var i=this.stack.length-1;i>=0;i--){var ctl=this.stack[i];if(ctl.menuConfig.menuLayer==Games.MenuLayerType.Module||ctl.menuConfig.menuLayer==Games.MenuLayerType.ModuleTop){if(excludeMenuId&&excludeMenuId.indexOf(ctl.menuId)!=-1){continue}return ctl.menuId}}return -1};MenuManager.prototype.isOpened=function(menuId){var result=false;var ctl=this.getMenuCtl(menuId);if(ctl&&ctl.state==Games.MenuCtlStateType.Opened){if(ctl.menuId==Games.MenuId.Home){if(ctl.moduleWindow&&ctl.moduleWindow.contentPane){result=ctl.moduleWindow.contentPane.visible}}else{result=true}}return result};MenuManager.prototype.isOpenedSubOrTab=function(menuId,index){if(!this.isOpened(menuId)){return false}var ctl=this.getMenuCtl(menuId);if(ctl){return ctl.moduleWindow.isOpenSubOrTab(index)}return false};MenuManager.prototype.getSubWindow=function(menuId,index){if(!this.isOpened(menuId)){return null}var ctl=this.getMenuCtl(menuId);if(ctl){return ctl.moduleWindow.getSubwindow(index)}return null};MenuManager.prototype.onTick=function(){for(var i=0;i<this.list.length;i++){var ctl=this.list[i];if(ctl.state==Games.MenuCtlStateType.Closed){if(ctl.menuConfig.cacheTime!=-1){var cacheTime=Math.max(ctl.menuConfig.cacheTime,gameDeviceConfig.menuCacheTime);var subtime=Game.time.localTime-ctl.closeTime;if(subtime>=cacheTime&&ctl.closeIsDestory){ctl.destory()}}}}};return MenuManager}());Games.MenuManager=MenuManager})(Games||(Games={}));var Games;(function(Games){var MenuCtlStateType;(function(MenuCtlStateType){MenuCtlStateType[MenuCtlStateType.Closed=1]="Closed";MenuCtlStateType[MenuCtlStateType.Loading=2]="Loading";MenuCtlStateType[MenuCtlStateType.Opened=3]="Opened";MenuCtlStateType[MenuCtlStateType.Destoryed=4]="Destoryed"})(MenuCtlStateType=Games.MenuCtlStateType||(Games.MenuCtlStateType={}))})(Games||(Games={}));var Games;(function(Games){var MenuCtl=(function(){function MenuCtl(){this.backMenuId=-1;this.backExcludeMenuIdMenuId=-1;this.closeTime=0;this.closeIsDestory=true}MenuCtl.prototype.open=function(parametar){this.openParametar=parametar;if(!this.moduleWindow){this.moduleWindow=new this.menuWindowConfig.windowClass();this.moduleWindow.menuId=this.menuId;this.moduleWindow.name=this.menuConfig.name;this.moduleWindow.windowContainer=Games.MenuLayer.getLayer(this.menuConfig.menuLayer)}this.load()};MenuCtl.prototype.close=function(){if(this.state==Games.MenuCtlStateType.Closed||this.state==Games.MenuCtlStateType.Destoryed){return}this.__menuManager.__onMenuClose(this)};MenuCtl.prototype.__delayClose=function(){this.backMenuId=-1;if(this.moduleWindow&&this.moduleWindow.menuIsCreated){Game.event.dispatch(GameEventKey.GameFrame_CloseMenu,this.moduleWindow.menuId);this.moduleWindow.onMenuClose();this.closeTime=Game.time.localTime}this.state=Games.MenuCtlStateType.Closed};MenuCtl.prototype.destory=function(){if(this.moduleWindow){this.moduleWindow.sShowComplete.remove(this.closeOther,this);this.moduleWindow.destory();this.moduleWindow=null}this.state=Games.MenuCtlStateType.Destoryed};MenuCtl.prototype.load=function(){this.state=Games.MenuCtlStateType.Loading;var list=this.getLoadAssets();if(!list||list.length==0){this.loadBeginTime=0;this.onLoadComplete()}else{this.loadBeginTime=Game.time.localTime;var loaderCtl_1=Game.loader.open(this.menuConfig.menuLoaderId);loaderCtl_1.setMax(list.length);loaderCtl_1.setProgress(0);var onProgress=function(rate,current,max,assetItemInfo){loaderCtl_1.setProgress(current)};Game.asset.loadList(list,this,this.onLoadComplete,onProgress)}};MenuCtl.prototype.onLoadComplete=function(){this.setShow();Game.loader.close(this.menuConfig.menuLoaderId);if(this.loadBeginTime>0){console.log("加载界面花费时间 ("+this.menuConfig.moduleName+") :"+(Game.time.localTime-this.loadBeginTime)+" 毫秒")}};MenuCtl.prototype.getLoadAssets=function(){var list=[];var dict=new Dictionary();if(!this.moduleWindow.menuIsCreated){this.moduleWindow.getLoadAssets(list,dict)}this.moduleWindow.generateAssetsForDynmic();this.moduleWindow.getLoadAssetsForDynamic(list,dict);return list};MenuCtl.prototype.setShow=function(){if(!this.moduleWindow){console.warn("\u8BBE\u7F6E\u663E\u793A \u4F46\u662F\u6A21\u5757\u5DF2\u9500\u6BC1 "+this.menuConfig.name+"("+this.menuConfig.moduleName+"): "+this.menuId);return}console.log("\u8BBE\u7F6E\u663E\u793A\u9762\u677F "+this.menuConfig.name+"("+this.menuConfig.moduleName+"): "+this.menuId);this.moduleWindow.sShowComplete.addOnce(this.closeOther,this);this.moduleWindow.sShowSubwindowComplete.addOnce(this.closeOther,this);this.state=Games.MenuCtlStateType.Opened;if(this.moduleWindow.menuIsCreated){this.moduleWindow.onMenuOpen(this.openParametar)}else{this.moduleWindow.menuParameter=this.openParametar}this.moduleWindow.menuShow(this.moduleWindow.windowContainer);switch(this.menuId){case Games.MenuId.Login:Game.sound.playMusic(SoundKey.MM_BGM_Cinema);break;case Games.MenuId.Home:Game.sound.playMusic(SoundKey.MM_BGM_Cinema);break}};MenuCtl.prototype.setCloseDontDestory=function(){};MenuCtl.prototype.closeOther=function(){var homeIsOpen=this.__menuManager.isOpened(Games.MenuId.Home);var backMenuId=this.__menuManager.getLastModuleOpenMenuId([this.backExcludeMenuIdMenuId,this.menuId]);var hasCloseOtherMenu=false;var list=Game.menu.dict.getValues();switch(this.menuConfig.menuCloseOtherType){case Games.MenuCloseOtherType.None:break;case Games.MenuCloseOtherType.ExceptSelf_All:for(var i=0;i<list.length;i++){var ctl=list[i];if(ctl.menuId==Games.MenuId.Home){continue}if(ctl!=this){ctl.closeIsDestory=homeIsOpen;ctl.close();hasCloseOtherMenu=true}}break;case Games.MenuCloseOtherType.ExceptSelf_Module:for(var i=0;i<list.length;i++){var ctl=list[i];if(ctl!=this&&ctl.menuConfig.menuLayer==Games.MenuLayerType.Module){ctl.closeIsDestory=homeIsOpen;ctl.close();hasCloseOtherMenu=true}}break;case Games.MenuCloseOtherType.ExceptSelf_SameLayer:for(var i=0;i<list.length;i++){var ctl=list[i];if(ctl.menuId==Games.MenuId.Home){continue}if(ctl!=this&&ctl.menuConfig.menuLayer==this.menuConfig.menuLayer){ctl.closeIsDestory=homeIsOpen;ctl.close();hasCloseOtherMenu=true}}break}if(this.menuConfig.closeHomeWindow){var home=this.__menuManager.getMenuCtl(Games.MenuId.Home);if(home&&home.moduleWindow){var homeWindow=home.moduleWindow;if(homeWindow){homeWindow.setHomeHide()}}}this.backMenuId=hasCloseOtherMenu?backMenuId:-1};return MenuCtl}());Games.MenuCtl=MenuCtl})(Games||(Games={}));var Games;(function(Games){var MenuCloseOtherType;(function(MenuCloseOtherType){MenuCloseOtherType[MenuCloseOtherType.None=0]="None";MenuCloseOtherType[MenuCloseOtherType.ExceptSelf_All=1]="ExceptSelf_All";MenuCloseOtherType[MenuCloseOtherType.ExceptSelf_Module=2]="ExceptSelf_Module";MenuCloseOtherType[MenuCloseOtherType.ExceptSelf_SameLayer=3]="ExceptSelf_SameLayer"})(MenuCloseOtherType=Games.MenuCloseOtherType||(Games.MenuCloseOtherType={}))})(Games||(Games={}));var Games;(function(Games){var MenuBarType;(function(MenuBarType){MenuBarType[MenuBarType.None=0]="None";MenuBarType[MenuBarType.Bottom=1]="Bottom";MenuBarType[MenuBarType.Right_Bottom=2]="Right_Bottom";MenuBarType[MenuBarType.Right_Top=3]="Right_Top";MenuBarType[MenuBarType.SumBar_Run=10001]="SumBar_Run";MenuBarType[MenuBarType.SumBar_Manage=10002]="SumBar_Manage";MenuBarType[MenuBarType.SumBar_Social=10003]="SumBar_Social";MenuBarType[MenuBarType.SumBar_Cooperation=10004]="SumBar_Cooperation"})(MenuBarType=Games.MenuBarType||(Games.MenuBarType={}))})(Games||(Games={}));var Games;(function(Games){var AssetItemType;(function(AssetItemType){AssetItemType[AssetItemType.FguiPackage=0]="FguiPackage";AssetItemType[AssetItemType.FspritePackage=1]="FspritePackage";AssetItemType[AssetItemType.Image=2]="Image";AssetItemType[AssetItemType.Buffer=3]="Buffer";AssetItemType[AssetItemType.Sound=4]="Sound";AssetItemType[AssetItemType.Text=5]="Text";AssetItemType[AssetItemType.Json=6]="Json";AssetItemType[AssetItemType.Xml=7]="Xml";AssetItemType[AssetItemType.Font=8]="Font";AssetItemType[AssetItemType.TTF=9]="TTF";AssetItemType[AssetItemType.PKM=10]="PKM"})(AssetItemType=Games.AssetItemType||(Games.AssetItemType={}));var AssetHelper=(function(){function AssetHelper(){}Object.defineProperty(AssetHelper,"layaLoaderType2AssetItemTypeDict",{get:function(){if(!AssetHelper._layaLoaderType2AssetItemTypeDict){var dict=new Dictionary();dict.add(Loader.IMAGE,AssetItemType.Image);dict.add(Loader.BUFFER,AssetItemType.Buffer);dict.add(Loader.SOUND,AssetItemType.Sound);dict.add(Loader.TEXT,AssetItemType.Text);dict.add(Loader.JSON,AssetItemType.Json);dict.add(Loader.XML,AssetItemType.Xml);dict.add(Loader.FONT,AssetItemType.Font);dict.add(Loader.TTF,AssetItemType.TTF);dict.add(Loader.PKM,AssetItemType.PKM);AssetHelper._layaLoaderType2AssetItemTypeDict=dict}return AssetHelper._layaLoaderType2AssetItemTypeDict},enumerable:true,configurable:true});AssetHelper.layaLoaderType2AssetItemType=function(loader){return AssetHelper.layaLoaderType2AssetItemTypeDict.getValue(loader)};return AssetHelper}());Games.AssetHelper=AssetHelper})(Games||(Games={}));var Games;(function(Games){var Event=laya.events.Event;var TempletPool=(function(){function TempletPool(){this.callbackHandlerPool=[];this.callbackDict=new Dictionary();this.parseingDict=new Dictionary();this.dict=new Dictionary();this.referenceCountDict=new Dictionary();this.lastTimeDict=new Dictionary()}TempletPool.prototype.getCallbackHandler=function(caller,onComplete,onError){var item;if(this.callbackHandlerPool.length>0){item=this.callbackHandlerPool.pop();item.caller=caller;item.onComplete=onComplete;item.onError=onError}else{item={caller:caller,onComplete:onComplete,onError:onError}}return item};TempletPool.prototype.recoverCallbackHandler=function(item){item.caller=undefined;item.onComplete=undefined;item.onError=undefined;this.callbackHandlerPool.push(item)};TempletPool.prototype.addCallbackHandler=function(texturePath,caller,onComplete,onError){var list=this.callbackDict.getValue(texturePath);if(!list){list=[];this.callbackDict.add(texturePath,list)}var item=this.getCallbackHandler(caller,onComplete,onError);list.push(item)};TempletPool.prototype.getCallbackHandlerList=function(texturePath){return this.callbackDict.getValue(texturePath)};TempletPool.prototype.destoryItem=function(texturePath,skPath){var tpl=this.getCacheItem(texturePath);if(tpl){tpl.destroy();tpl.dispose();this.dict.remove(texturePath)}Laya.loader.clearRes(texturePath,true);Laya.loader.clearRes(skPath,true)};TempletPool.prototype.recoverItem=function(texturePath,skPath){var num=this.referenceCountDict.getValueOrDefault(texturePath,0);if(num>0){num=num-1;this.referenceCountDict.set(texturePath,num)}this.lastTimeDict.add(texturePath,Game.time.localTime);if(num<=0){this.destoryItem(texturePath,skPath)}};TempletPool.prototype.getCacheItem=function(texturePath){return this.dict.getValue(texturePath)};TempletPool.prototype.requrestItem=function(texturePath,skPath,caller,onComplete,onError){if(onComplete){var num=this.referenceCountDict.getValueOrDefault(texturePath,0);this.referenceCountDict.add(texturePath,num+1)}var tpl=this.getCacheItem(texturePath);if(tpl){if(onComplete){setTimeout(function(){if(caller){onComplete.apply(caller,[tpl])}else{onComplete(tpl)}},100)}}else{if(onComplete||onError){this.addCallbackHandler(texturePath,caller,onComplete,onError)}tpl=this.parseingDict.getValue(texturePath);if(!tpl){var args=[texturePath,skPath];tpl=new Templet();tpl.on(Event.COMPLETE,this,this.onTempletComplete,args);tpl.on(Event.ERROR,this,this.onTempletError,args);this.parseingDict.add(texturePath,tpl);var assets=[{url:texturePath,type:Loader.IMAGE}];Laya.loader.load(assets,Handler.create(this,this.onLoader,args))}}};TempletPool.prototype.onLoader=function(texturePath,skPath,isSuccess){var _this=this;if(isSuccess){GameBoone.shareSkeleton.getSkeletonData(skPath,texturePath,this,function(skData,skPath,texturePath){var tpl=_this.parseingDict.getValue(texturePath);tpl.parseData(Laya.loader.getRes(texturePath),skData)})}else{console.error("TempletPool 加载资源失败 texturePath="+texturePath);this.onTempletError(texturePath,skPath,"加载资源失败")}};TempletPool.prototype.onTempletComplete=function(texturePath,skPath){var tpl=this.parseingDict.getValue(texturePath);this.dict.add(texturePath,tpl);var callers=this.getCallbackHandlerList(texturePath);if(callers){for(var _i=0,callers_1=callers;_i<callers_1.length;_i++){var caller=callers_1[_i];if(caller.onComplete){if(caller.caller){caller.onComplete.apply(caller.caller,[tpl])}else{caller.onComplete(tpl)}this.recoverCallbackHandler(caller)}}this.callbackDict.remove(texturePath)}this.onTempleteEnd(texturePath)};TempletPool.prototype.onTempletError=function(texturePath,skPath,error){console.error("TempletPool 解析失败 texturePath="+texturePath);var tpl=this.parseingDict.getValue(texturePath);var callers=this.getCallbackHandlerList(texturePath);if(callers){for(var _i=0,callers_2=callers;_i<callers_2.length;_i++){var caller=callers_2[_i];if(caller.onError){if(caller.caller){caller.onError.apply(caller.caller,[error])}else{caller.onError(error)}}this.recoverCallbackHandler(caller)}this.callbackDict.remove(texturePath)}this.onTempleteEnd(texturePath);tpl.destroy()};TempletPool.prototype.onTempleteEnd=function(texturePath){var tpl=this.parseingDict.getValue(texturePath);tpl.off(Event.COMPLETE,this,this.onTempletComplete);tpl.off(Event.ERROR,this,this.onTempletError);this.parseingDict.remove(texturePath)};return TempletPool}());Games.TempletPool=TempletPool})(Games||(Games={}));var Games;(function(Games){var SkeletonPool=(function(){function SkeletonPool(){this.animHelper=new Games.AnimationHelper();this.isLoadFail=false;this.allList=[];this.list=[];this.callbackList=[];this.clearNum=0}Object.defineProperty(SkeletonPool.prototype,"totalNum",{get:function(){return this.allList.length},enumerable:true,configurable:true});Object.defineProperty(SkeletonPool.prototype,"poolNum",{get:function(){return this.list.length},enumerable:true,configurable:true});Object.defineProperty(SkeletonPool.prototype,"useNum",{get:function(){return this.totalNum-this.poolNum},enumerable:true,configurable:true});SkeletonPool.prototype.addCallbackHandler=function(caller,onComplete,onError){for(var i=0;i<this.callbackList.length;i++){if(this.callbackList[i].caller==caller&&this.callbackList[i].onComplete==onComplete){return}}var item=laya.utils.Pool.getItem(SkeletonPool.CallbackPoolKey);if(!item){item={caller:caller,onComplete:onComplete,onError:onError}}this.callbackList.push(item)};SkeletonPool.prototype.createItem=function(){var item;if(this.templet){item=this.templet.buildArmature(0);this.allList.push(item)}return item};SkeletonPool.prototype.getItem=function(){var item;if(this.list.length>0){item=this.list.pop()}return item};SkeletonPool.prototype.getItemOrCreate=function(){var item=this.getItem();if(!item){if(this.templet){item=this.createItem()}}return item};SkeletonPool.prototype.recover=function(skeleton){if(this.list.indexOf(skeleton)==-1){this.list.push(skeleton)}else{console.error("该对象已经返还对象池了:"+this.texturePath)}};SkeletonPool.prototype.requestShareItem=function(caller,onComplete,onError){var item=this.getItem();if(item){onComplete&&onComplete.apply(caller,[item])}else{this.animHelper.buildArmature(this.texturePath,this.skPath,caller,onComplete,onError)}};SkeletonPool.prototype.requrestItem=function(caller,onComplete,onError){var item=this.getItemOrCreate();if(item){if(onComplete){setTimeout(function(){if(caller){onComplete.apply(caller,[item])}else{onComplete(item)}},100)}}else{if(this.isLoadFail){if(onError){if(caller){onError.apply(caller,["加载失败"])}else{onError("加载失败")}}}else{if(onComplete||onError){this.addCallbackHandler(caller,onComplete,onError)}GameBoone.templetPool.requrestItem(this.texturePath,this.skPath,this,this.onLoadTempleteComplete,this.onLoadTempleteError)}}};SkeletonPool.prototype.onLoadTempleteComplete=function(templet){if(this.templet){return}this.templet=templet;while(this.callbackList.length>0){var caller=this.callbackList.pop();if(caller.onComplete){var item=this.getItemOrCreate();if(caller.caller){caller.onComplete.apply(caller.caller,[item])}else{caller.onComplete(item)}}}};SkeletonPool.prototype.onLoadTempleteError=function(error){if(this.isLoadFail){return}this.isLoadFail=true;while(this.callbackList.length>0){var caller=this.callbackList.pop();if(caller.onError){if(caller.caller){caller.onError.apply(caller.caller,["加载失败"])}else{caller.onError("加载失败")}}}};SkeletonPool.prototype.toString=function(){return"totalNum:"+this.totalNum+", poolNum:"+this.poolNum+", useNum:"+this.useNum+": "+this.texturePath};SkeletonPool.prototype.removeFromAll=function(self){for(var i=0;i<this.allList.length;i++){if(this.allList[i]==self){this.allList.splice(i,1);break}}};SkeletonPool.prototype.clearNoUse=function(){var clearNum=0;if(this.callbackList.length>0){return 0}while(this.list.length>0){var skeleton=this.list.pop();this.removeFromAll(skeleton);skeleton.destroy();this.clearNum++;clearNum++}if(this.totalNum<=0){GameBoone.templetPool.recoverItem(this.texturePath,this.skPath);this.templet=undefined}return clearNum};SkeletonPool.CallbackPoolKey="TempletCallbackHandler";return SkeletonPool}());Games.SkeletonPool=SkeletonPool})(Games||(Games={}));var Games;(function(Games){var SkeletonCache=(function(){function SkeletonCache(){this.isAddListenced=false;this.poolDict=new Dictionary()}SkeletonCache.prototype.addListance=function(){if(this.isAddListenced){return}this.isAddListenced=true;Game.moduleModel.building.sScrollEnd.add(this.tickClear,this)};Object.defineProperty(SkeletonCache.prototype,"maxNum",{get:function(){return gameDeviceConfig.skeletonCacheMaxNum},enumerable:true,configurable:true});SkeletonCache.prototype.getPool=function(texturePath){return this.poolDict.getValue(texturePath)};SkeletonCache.prototype.requrestItem=function(texturePath,skPath,caller,onComplete,onError){var pool=this.getPool(texturePath);if(!pool){pool=new Games.SkeletonPool();pool.texturePath=texturePath;pool.skPath=skPath;this.poolDict.add(texturePath,pool)}pool.requrestItem(caller,onComplete,onError);this.tickClear()};SkeletonCache.prototype.recoverItem=function(texturePath,skeleton){skeleton.stop();skeleton.removeSelf();var pool=this.getPool(texturePath);if(pool){pool.recover(skeleton);this.tickClear()}else{skeleton.destroy()}};SkeletonCache.prototype.tickClear=function(isPringLog){if(isPringLog===void 0){isPringLog=true}return;if(Game.moduleModel.building.isBuildListScrolling){return}var poolCount=0;var skeletonTotal=0;var skeletonNoUse=0;var skeletonUse=0;var dict=this.poolDict.__getDict();for(var key in dict){var pool=dict[key];skeletonTotal+=pool.totalNum;skeletonNoUse+=pool.poolNum;skeletonUse+=pool.useNum;poolCount++}var clearNum=0;if(skeletonTotal>this.maxNum){for(var key in dict){var pool=dict[key];pool.clearNoUse();clearNum+=1}}isPringLog=false;if(isPringLog){poolCount=0;skeletonTotal=0;skeletonNoUse=0;skeletonUse=0;for(var key in dict){var pool=dict[key];skeletonTotal+=pool.totalNum;skeletonNoUse+=pool.poolNum;skeletonUse+=pool.useNum;poolCount++}console.log("===============");console.log("poolCount:"+poolCount+", skeletonTotal:"+skeletonTotal+", skeletonNoUse:"+skeletonNoUse+", skeletonUse:"+skeletonUse);for(var key in dict){var pool=dict[key];console.log(pool.toString())}}};return SkeletonCache}());Games.SkeletonCache=SkeletonCache})(Games||(Games={}));var Games;(function(Games){var ShareSkeleton=(function(){function ShareSkeleton(){this.skDataDict=new Dictionary()}ShareSkeleton.prototype.dispose=function(){this.skDataDict.clear();this.caller=undefined;this.onComplete=undefined;this.onError=undefined};ShareSkeleton.prototype.getSkeletonData=function(skPath,texturePath,caller,onComplete,onError){this.caller=caller;this.onComplete=onComplete;this.onError=onError;var skData=this.skDataDict.getValue(skPath);if(skData){this.__onComplete(skData,skPath,texturePath)}else{Laya.loader.load([{url:skPath,type:Loader.BUFFER}],Handler.create(this,this.onSkeletonLoaded,[skPath,texturePath]))}};ShareSkeleton.prototype.onSkeletonLoaded=function(skPath,texturePath,isSuccess){if(isSuccess){var skData=Loader.getRes(skPath);this.skDataDict.add(skPath,skData);this.__onComplete(skData,skPath,texturePath)}else{this.__onError(skPath)}};ShareSkeleton.prototype.__onComplete=function(skData,skPath,texturePath){if(this.onComplete){if(this.caller){this.onComplete.apply(this.caller,[skData,skPath,texturePath])}else{this.onComplete([skData,skPath,texturePath])}}};ShareSkeleton.prototype.__onError=function(skPath){if(this.onError){if(this.caller){this.onError.apply(this.caller,[skPath])}else{this.onError([skPath])}}console.error("Skeleton 资源加载失败: "+skPath)};return ShareSkeleton}());Games.ShareSkeleton=ShareSkeleton})(Games||(Games={}));var Games;(function(Games){var TextureData=(function(){function TextureData(){(this.url===void 0)&&(this.url="")}return TextureData}());Games.TextureData=TextureData})(Games||(Games={}));var Games;(function(Games){var SKData=(function(){function SKData(){(this.url===void 0)&&(this.url="")}return SKData}());Games.SKData=SKData})(Games||(Games={}));var Games;(function(Games){var SKCache=(function(){function SKCache(){this.skData=new Games.SKData();this.textureDataDict=new Dictionary()}SKCache.prototype.getTexture=function(texturePath,caller,onComplete){if(this.textureDataDict.hasKey(texturePath)){var textureData=this.textureDataDict.getValue(texturePath);onComplete.apply(caller,[textureData])}else{Laya.loader.load([{url:texturePath,type:Loader.IMAGE}],Handler.create(this,this.onAssetsLoaded,[texturePath,caller,onComplete]))}};SKCache.prototype.onAssetsLoaded=function(texturePath,caller,onComplete,isSuccess){if(isSuccess){var textureData=new Games.TextureData();textureData.url=texturePath;textureData.texture=Loader.getRes(texturePath);this.textureDataDict.add(texturePath,textureData);onComplete.apply(caller,[textureData])}else{this.__onError(texturePath)}};SKCache.prototype.__onError=function(texturePath){console.error("SKCache 纹理资源加载失败: Texture="+texturePath)};return SKCache}());Games.SKCache=SKCache})(Games||(Games={}));var Games;(function(Games){var Templet=laya.ani.bone.Templet;var ArmatureInfo=(function(){function ArmatureInfo(){}return ArmatureInfo}());Games.ArmatureInfo=ArmatureInfo;var AnimationHelper=(function(){function AnimationHelper(){this.animTemletDict=new Dictionary();this.parsingDict=new Dictionary();this.callbackHandlerPool=[];this.buildQueue=[];this.isParsing=false}AnimationHelper.prototype.requestTemplet=function(texturePath){var tpl;if(!this.animTemletDict.hasKey(texturePath)){tpl=new Templet();tpl.on(laya.events.Event.COMPLETE,this,this.parseAnimComplete);tpl.on(laya.events.Event.ERROR,this,this.parseAnimError);this.animTemletDict.add(texturePath,tpl)}else{tpl=this.animTemletDict.getValue(texturePath)}return tpl};AnimationHelper.prototype.dispose=function(){throw"NotImplementedException!"};AnimationHelper.prototype.buildArmature=function(texturePath,skPath,caller,onComplete,onError){this.requestTemplet(texturePath);var handler=this.getCallbackHandler(caller,onComplete,onError);var buildItem=laya.utils.Pool.getItemByClass(AnimationHelper.SignArmatureInfo,ArmatureInfo);buildItem.texturePath=texturePath;buildItem.skPath=skPath;this.buildQueue.push(buildItem);this.parsingDict.add(texturePath,handler);this.parseArmatureQueue()};AnimationHelper.prototype.parseArmatureQueue=function(){if(!this.isParsing){if(this.buildQueue.length>0){this.isParsing=true;var item=this.buildQueue.pop();GameBoone.animationCache.getSKCache(item.texturePath,item.skPath,this,this.getCacheResComplete,this.getCacheResError);laya.utils.Pool.recover(AnimationHelper.SignArmatureInfo,item)}}};AnimationHelper.prototype.getCacheResComplete=function(textureData,skData){var tpl=this.requestTemplet(textureData.url);tpl.skeletonUrl=skData.url;tpl.clearGraphicCache();delete tpl.skinDic["default"];tpl.parseData(textureData.texture,skData.buffer)};AnimationHelper.prototype.getCacheResError=function(texturePath,skPath){console.error("[getCacheResError] texture="+texturePath+" skeleton="+skPath)};AnimationHelper.prototype.parseAnimComplete=function(tpl){var textureUrl=tpl._mainTexture["url"];(textureUrl===void 0)&&(textureUrl="");var callBackHandler=this.parsingDict.getValue(textureUrl);if(callBackHandler){var animator=tpl.buildArmature(1);callBackHandler.onComplete.apply(callBackHandler.caller,[animator]);this.recoverCallbackHandler(callBackHandler);this.parsingDict.remove(textureUrl)}this.isParsing=false;this.parseArmatureQueue()};AnimationHelper.prototype.parseAnimError=function(){console.error("[parseAnimError]");this.isParsing=false;this.parseArmatureQueue()};AnimationHelper.prototype.getCallbackHandler=function(caller,onComplete,onError){var item;if(this.callbackHandlerPool.length>0){item=this.callbackHandlerPool.pop();item.caller=caller;item.onComplete=onComplete;item.onError=onError}else{item={caller:caller,onComplete:onComplete,onError:onError}}return item};AnimationHelper.prototype.recoverCallbackHandler=function(item){item.caller=undefined;item.onComplete=undefined;item.onError=undefined;this.callbackHandlerPool.push(item)};AnimationHelper.SignArmatureInfo="ArmatureInfo";return AnimationHelper}());Games.AnimationHelper=AnimationHelper})(Games||(Games={}));var Games;(function(Games){var AnimationCache=(function(){function AnimationCache(){this.dict=new Dictionary()}AnimationCache.prototype.getSKCache=function(texturePath,skPath,caller,onComplete,onError){if(!this.dict.hasKey(skPath)){var assets=[];assets.push({url:texturePath,type:Loader.IMAGE});assets.push({url:skPath,type:Loader.BUFFER});Laya.loader.load(assets,Handler.create(this,this.onAssetsLoaded,[texturePath,skPath,caller,onComplete,onError]))}else{var skCache_1=this.dict.getValue(skPath);var thisCaller_1=caller;skCache_1.getTexture(texturePath,this,function(textureData){onComplete.apply(thisCaller_1,[textureData,skCache_1.skData])})}};AnimationCache.prototype.onAssetsLoaded=function(texturePath,skPath,caller,onComplete,onError,isSuccess){if(isSuccess){var skCache=new Games.SKCache();skCache.skData.url=skPath;skCache.skData.buffer=Loader.getRes(skPath);var textureData=new Games.TextureData();textureData.url=texturePath;textureData.texture=Loader.getRes(texturePath);skCache.textureDataDict.add(texturePath,textureData);this.dict.add(skPath,skCache);onComplete.apply(caller,[textureData,skCache.skData])}else{caller=null;onComplete=null;onError(texturePath,skPath)}};return AnimationCache}());Games.AnimationCache=AnimationCache})(Games||(Games={}));var Games;(function(Games){var Bone=(function(){function Bone(){this.templetPool=new Games.TempletPool();this.skeletonCache=new Games.SkeletonCache();this.shareSkeleton=new Games.ShareSkeleton();this.animationCache=new Games.AnimationCache();this.animHelper=new Games.AnimationHelper();this.lastTime=0}return Bone}());Games.Bone=Bone})(Games||(Games={}));var GameBoone=new Games.Bone();var Games;(function(Games){var Event=laya.events.Event;var CAnimation=(function(){function CAnimation(){this.sPlayEnd=new Signal();this.curSkinIndex=0;this.enableHasSkeleton=true;this._nameOrIndex="zhanli1";this._loop=true;this.init()}CAnimation.prototype.init=function(){};CAnimation.prototype.dispose=function(){this.recoverSkeleton();this.caller=null;this.animLoadCompleteCallBack=null;this.animLoadErrorCallBack=null};Object.defineProperty(CAnimation.prototype,"Skeleton",{get:function(){return this.animator},enumerable:true,configurable:true});CAnimation.prototype.getSkeleton=function(){this.enableHasSkeleton=true;GameBoone.skeletonCache.requrestItem(this.texturePath,this.skeletonPath,this,this.onSkeletonComplete,this.onSkeletonError)};CAnimation.prototype.recoverSkeleton=function(skeleton){this.enableHasSkeleton=false;if(!skeleton){skeleton=this.animator;this.animator=null}if(skeleton){skeleton.off(Event.STOPPED,this,this.onSkeletonPlayEnd);if(!skeleton.destroyed){GameBoone.skeletonCache.recoverItem(this.texturePath,skeleton)}else{skeleton.destroy();console.log("骨骼动画已经销毁----"+this.texturePath)}}};CAnimation.prototype.loadAnim=function(texturePath,skeletonPath,parent,caller,complete,error){this.texturePath=texturePath;this.skeletonPath=skeletonPath;this.parent=parent;this.caller=caller;this.animLoadCompleteCallBack=complete;this.animLoadErrorCallBack=error};CAnimation.prototype.onSkeletonComplete=function(skeleton){if(!this.enableHasSkeleton){this.recoverSkeleton(skeleton);this.animator=null;return}if(this.animator){this.recoverSkeleton()}this.animator=skeleton;if(!this.animator.destroyed){this.animator.on(Event.STOPPED,this,this.onSkeletonPlayEnd);this.playLast();var displayIndex=this.parent.numChildren>0?1:0;this.parent.addChildAt(this.animator,displayIndex);if(this.animLoadCompleteCallBack!=null){this.animLoadCompleteCallBack.apply(this.caller,[skeleton])}}};CAnimation.prototype.onSkeletonError=function(){if(this.animLoadErrorCallBack!=null){this.animLoadErrorCallBack.apply(null);this.animLoadErrorCallBack=null}};CAnimation.prototype.onSkeletonPlayEnd=function(){this.sPlayEnd.dispatch()};CAnimation.prototype.setSlotSkinPath=function(slotName,slotTexturePath,useScale){var _this=this;if(useScale===void 0){useScale=true}var slotTexture;var onAssetsLoaded=function(result){slotTexture=Loader.getRes(slotTexturePath);_this.setSlotSkin(slotName,slotTexture,useScale)};Laya.loader.load([{url:slotTexturePath,type:Loader.IMAGE}],Handler.create(this,onAssetsLoaded));var slotBone=this.animator.getSlotByName(slotName)};CAnimation.prototype.setSlotSkin=function(slotName,texture,useScale){if(useScale===void 0){useScale=true}var slotBone=this.animator.getSlotByName(slotName);texture.active();this.animator.setSlotSkin(slotName,texture);var scX=texture.width;var scY=texture.height;var scaleFactor=1;if(useScale){scaleFactor=1/CAnimation.SCALE_DEFAULT}slotBone.currDisplayData.transform.scX=scX*scaleFactor;slotBone.currDisplayData.transform.scY=scY*scaleFactor};CAnimation.prototype.resetSlotSkin=function(slotName){var slotBone=this.animator.getSlotByName(slotName);slotBone.currDisplayData.transform.scX=1;slotBone.currDisplayData.transform.scY=1;slotBone.currDisplayData.destory();this.animator.setSlotSkin(slotName,null)};CAnimation.prototype.playLast=function(){if(this.animator){this.animator.play(this._nameOrIndex,this._loop,this._force,this._start,this._end,this._freshSkin)}};CAnimation.prototype.play=function(nameOrIndex,loop,force,start,end,freshSkin){this._nameOrIndex=nameOrIndex;this._loop=loop;this._force=force;this._start=start;this._end=end;this._freshSkin=freshSkin;if(this.animator){this.animator.play(nameOrIndex,loop,force,start,end,freshSkin)}};CAnimation.prototype.crossFade=function(nameOrIndex,loop){if(loop===void 0){loop=true}this.play(nameOrIndex,loop)};CAnimation.prototype.setBounds=function(rect){this.animator.setBounds(rect)};CAnimation.prototype.getBounds=function(){return this.animator.getBounds()};CAnimation.prototype.scale=function(scaleX,scaleY,speedMode){this.animator.scale(scaleX,scaleY,speedMode)};CAnimation.prototype.pos=function(x,y){if(this.animator!=null){this.animator.pos(x,y)}};CAnimation.prototype.changeSkin=function(nameOrIndex){if(typeof(nameOrIndex)=="string"){this.animator.showSkinByName(nameOrIndex)}if(typeof(nameOrIndex)=="number"){this.animator.showSkinByIndex(nameOrIndex)}};CAnimation.SCALE_DEFAULT=0.26;return CAnimation}());Games.CAnimation=CAnimation})(Games||(Games={}));var GameEventKey=(function(){function GameEventKey(){}GameEventKey.Test="Test";GameEventKey.GameFrame_OpenMenu="GameFrame_OpenMenu";GameEventKey.GameFrame_CloseMenu="GameFrame_CloseMenu";GameEventKey.GameFrame_ReLoginData_Begin="GameFrame_ReLoginData_Begin";GameEventKey.GameFrame_ReLoginData_End="GameFrame_ReLoginData_End";GameEventKey.PopupPanel="PopupPanel";GameEventKey.updateOrderView="GameEventKeyUpdateOrderView";GameEventKey.GameEventKey_UpdateOrderView="GameEventKey_UpdateOrderView";GameEventKey.GameEventKey_UpdateCoopreationOrderView="GameEventKey_UpdateCoopreationOrderView";GameEventKey.GameEventKey_ResetFindStoryTime="GameEventKey_ResetFindStoryTime";GameEventKey.GameEventKey_UpdateVisitActor="GameEventKey_UpdateVisitActor";GameEventKey.GameEventKey_MeetingShowPanel="GameEventKey_MeetingShowPanel";GameEventKey.GameEventKey_ScrollMainRoom="GameEventKey_ScrollMainRoom";GameEventKey.GameEventKey_StartReception="GameEventKey_StartReception";GameEventKey.GameEventKey_FindActorToReception="GameEventKey_FindActorToReception";GameEventKey.GameEventKey_EnabledScrollMain="GameEventKey_EnabledScrollMain";GameEventKey.GameEventKey_MeetingStep="GameEventKey_MeetingStep";GameEventKey.GameEventKey_ShootStart="GameEventKey_ShootStart";GameEventKey.GameEventKey_ShootEnd="GameEventKey_ShootEnd";GameEventKey.GameEventKey_ShootStartAddActor="GameEventKey_ShootStartAddActor";GameEventKey.GameEventKey_FilmStart="GameEventKey_FilmStart";GameEventKey.GameEventKey_FilmOn="GameEventKey_FilmOn";GameEventKey.GameEventKey_FilmEnd="GameEventKey_FilmEnd";GameEventKey.GameEventKey_ActorExperciseStart="GameEventKey_ActorExperciseStart";GameEventKey.GameEventKey_ActorExperciseEnd="GameEventKey_ActorExperciseEnd";GameEventKey.GameEventKey_ActorBackToExperciseRoom="GameEventKey_ActorBackToExperciseRoom";GameEventKey.GameEventKey_UpdateActorHideInfo="GameEventKey_UpdateActorHideInfo";GameEventKey.GameEventKey_UpdateProgressBoxStatus="GameEventKey_UpdateProgressBoxStatus";GameEventKey.GameEventKey_UpdateMainUIRed="GameEventKey_UpdateStoryRed";GameEventKey.GameEventKey_UpdateFilmingStatus="GameEventKey_UpdateFilmingStatus";GameEventKey.GameEventKey_MakeFilm="GameEventKey_MakeFilm";GameEventKey.GameEventKey_MakeFilmRename="GameEventKey_MakeFilmRename";GameEventKey.GameEventKey_MakeFilmSelectActor="GameEventKey_MakeFilmSelectActor";GameEventKey.GameEventKey_MakeFilmConfirmSetActor="GameEventKey_MakeFilmConfirmSetActor";GameEventKey.GameEventKey_MakeFilmsetSelectType="GameEventKey_MakeFilmsetSelectType";GameEventKey.GameEventKey_MakeFilmsetPublishMovie="GameEventKey_MakeFilmsetPublishMovie";GameEventKey.GameEventKey_MakeFilmUpdateMovieState="GameEventKey_MakeFilmUpdateMovieState";GameEventKey.GameEventKey_MakeFilmGetStoryGoals="GameEventKey_MakeFilmGetStoryGoals";GameEventKey.GameEventKey_MakeFilmSwitchCity="GameEventKey_MakeFilmSwitchCity";GameEventKey.GameEventKey_MakeFilmSpreadMovie="GameEventKey_MakeFilmSpreadMovie";GameEventKey.GameEventKey_MakeFilmGetRewardMovie="GameEventKey_MakeFilmGetRewardMovie";GameEventKey.GameEventKey_MakeFilmWarEndingIncome="GameEventKey_MakeFilmWarEndingIncome";GameEventKey.GameEventKey_PlayerLevelUp="GameEventKey_PlayerLevelUp";GameEventKey.GameEventKey_PlayerLevelUpOnClose="GameEventKey_PlayerLevelUpOnClose";GameEventKey.GameEventKey_ClientUpdateMainTask="GameEventKey_ClientUpdateMainTask";GameEventKey.GameEventKey_StoryUnLock="GameEventKey_StoryUnLock";GameEventKey.GameEventKey_TimeLimitRemind="GameEventKey_TimeLimitRemind";GameEventKey.GameEventKey_VisibleMainUI="GameEventKey_VisibleMainUI";GameEventKey.GameEventKey_VisibleTaskArrowUI="GameEventKey_VisibleTaskArrowUI";GameEventKey.GameEventKey_SwitchUIRoom="GameEventKey_SwitchUIRoom";GameEventKey.GameEventKey_SyncRoomInfo="GameEventKey_SyncRoomInfo";GameEventKey.GameEventKey_UnlockInit="GameEventKey_UnlockInit";GameEventKey.GameEventKey_UnlockChange="GameEventKey_UnlockChange";GameEventKey.GameEventKey_OscarDataChange="GameEventKey_OscarDataChange";GameEventKey.GameEventKey_UpdateTimeMenuTick="GameEventKey_UpdateTimeMenuTick";GameEventKey.GameEventKey_StorylineComplete="GameEventKey_StoryComplete";GameEventKey.GameEventKey_FilmStoryAnimationComplete="GameEventKey_FilmStoryAnimationComplete";GameEventKey.GameEventKey_FilmStoryStateChange="GameEventKey_FilmStoryStateChange";return GameEventKey}());var Games;(function(Games){var SpriteResPackageConfigReader=(function(){function SpriteResPackageConfigReader(){this.dict=new Dictionary()}SpriteResPackageConfigReader.prototype.addconfig=function(config){this.dict.add(config.packageName,config)};SpriteResPackageConfigReader.prototype.getconfig=function(packageName){return this.dict.getValue(packageName)};SpriteResPackageConfigReader.prototype.install=function(){var config;config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="ActivityIcon";config.resBin="ActivityIcon.bin";config.resAtlas.push("ActivityIcon@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="ActorBodyIcon";config.resBin="ActorBodyIcon.bin";config.resAtlas.push("ActorBodyIcon@atlas0.png");config.resAtlas.push("ActorBodyIcon@atlas0_1.png");config.resAtlas.push("ActorBodyIcon@atlas0_2.png");config.resAtlas.push("ActorBodyIcon@atlas0_3.png");config.resAtlas.push("ActorBodyIcon@atlas0_4.png");config.resAtlas.push("ActorBodyIcon@atlas0_5.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="BlockIcon";config.resBin="BlockIcon.bin";config.resAtlas.push("BlockIcon@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="Building";config.resBin="Building.bin";config.resAtlas.push("Building@atlas0.png");config.resAtlas.push("Building@atlas0_1.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="CinemaIcon";config.resBin="CinemaIcon.bin";config.resAtlas.push("CinemaIcon@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="Icon_En";config.resBin="Icon_En.bin";config.resAtlas.push("Icon_En@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="Icon_ZH_CN";config.resBin="Icon_ZH_CN.bin";config.resAtlas.push("Icon_ZH_CN@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="ItemIcon";config.resBin="ItemIcon.bin";config.resAtlas.push("ItemIcon@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="MeetingIcon";config.resBin="MeetingIcon.bin";config.resAtlas.push("MeetingIcon@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="MenuIcon";config.resBin="MenuIcon.bin";config.resAtlas.push("MenuIcon@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="NPCHeadIcon";config.resBin="NPCHeadIcon.bin";config.resAtlas.push("NPCHeadIcon@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="PlayerBodyIcon";config.resBin="PlayerBodyIcon.bin";config.resAtlas.push("PlayerBodyIcon@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="PlayerHeadIcon";config.resBin="PlayerHeadIcon.bin";config.resAtlas.push("PlayerHeadIcon@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="SettingIcon";config.resBin="SettingIcon.bin";config.resAtlas.push("SettingIcon@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="ShootIcon";config.resBin="ShootIcon.bin";config.resAtlas.push("ShootIcon@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="SkillIcon";config.resBin="SkillIcon.bin";config.resAtlas.push("SkillIcon@atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="StoryIcon";config.resBin="StoryIcon.bin";config.resAtlas.push("StoryIcon@atlas0.png");config.resAtlas.push("StoryIcon@atlas0_1.png");config.resAtlas.push("StoryIcon@atlas0_2.png");config.resAtlas.push("StoryIcon@atlas0_3.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fsprite";config.packageName="StoryStackIcon";config.resBin="StoryStackIcon.bin";config.resAtlas.push("StoryStackIcon@atlas0.png");this.addconfig(config)};return SpriteResPackageConfigReader}());Games.SpriteResPackageConfigReader=SpriteResPackageConfigReader})(Games||(Games={}));var Games;(function(Games){var GuiResPackageConfigReader=(function(){function GuiResPackageConfigReader(){this.dict=new Dictionary()}GuiResPackageConfigReader.prototype.addconfig=function(config){this.dict.add(config.packageName,config)};GuiResPackageConfigReader.prototype.getconfig=function(packageName){return this.dict.getValue(packageName)};GuiResPackageConfigReader.prototype.install=function(){var config;config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Activity";config.resBin="Activity.bin";config.resAtlas.push("Activity_atlas0.png");config.resAtlas.push("Activity_atlas_ac07l.png");config.resAtlas.push("Activity_atlas_ac07m.png");config.resAtlas.push("Activity_atlas_f9f11d.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="ArtistDetail";config.resBin="ArtistDetail.bin";config.resAtlas.push("ArtistDetail_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="ArtistDic";config.resBin="ArtistDic.bin";config.resAtlas.push("ArtistDic_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Bag";config.resBin="Bag.bin";config.resAtlas.push("Bag_atlas0.png");config.resAtlas.push("Bag_atlas_ha6g19.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Building";config.resBin="Building.bin";config.resAtlas.push("Building_atlas0.png");config.resAtlas.push("Building_atlas_cpc911l.png");config.resAtlas.push("Building_atlas_dyfe120.png");config.resAtlas.push("Building_atlas_g9i613x.png");config.resAtlas.push("Building_atlas_g9i613y.png");config.resAtlas.push("Building_atlas_iacm12l.png");config.resAtlas.push("Building_atlas_iacm12m.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Common";config.resBin="Common.bin";config.resAtlas.push("Common_atlas0.png");config.resAtlas.push("Common_atlas0_1.png");config.resAtlas.push("Common_atlas0_2.png");config.resAtlas.push("Common_atlas2.png");config.resAtlas.push("Common_atlas_dlxft23v.png");config.resAtlas.push("Common_atlas_dm31t22d.png");config.resAtlas.push("Common_atlas_g8fc2b.png");config.resAtlas.push("Common_atlas_gpiht25w.png");config.resAtlas.push("Common_atlas_h8rtt216.png");config.resAtlas.push("Common_atlas_ha6g19.png");config.resAtlas.push("Common_atlas_hh765m.png");config.resAtlas.push("Common_atlas_hh765n.png");config.resAtlas.push("Common_atlas_hh7681.png");config.resAtlas.push("Common_atlas_hh7688.png");config.resAtlas.push("Common_atlas_hz3ma.png");config.resAtlas.push("Common_atlas_jeka4a.png");config.resAtlas.push("Common_atlas_jeka4b.png");config.resAtlas.push("Common_atlas_l40ut23d.png");config.resAtlas.push("Common_atlas_m9lgt221.png");config.resAtlas.push("Common_atlas_tpm8cx.png");config.resAtlas.push("Common_atlas_tpm8cy.png");config.resAtlas.push("Common_atlas_v1nit24l.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Cooperation";config.resBin="Cooperation.bin";config.resAtlas.push("Cooperation_atlas0.png");config.resAtlas.push("Cooperation_atlas_g8fc1h.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="FilmScreenAnim1";config.resBin="FilmScreenAnim1.bin";config.resAtlas.push("FilmScreenAnim1_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="FilmScreenAnim10";config.resBin="FilmScreenAnim10.bin";config.resAtlas.push("FilmScreenAnim10_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="FilmScreenAnim2";config.resBin="FilmScreenAnim2.bin";config.resAtlas.push("FilmScreenAnim2_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="FilmScreenAnim3";config.resBin="FilmScreenAnim3.bin";config.resAtlas.push("FilmScreenAnim3_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="FilmScreenAnim4";config.resBin="FilmScreenAnim4.bin";config.resAtlas.push("FilmScreenAnim4_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="FilmScreenAnim5";config.resBin="FilmScreenAnim5.bin";config.resAtlas.push("FilmScreenAnim5_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="FilmScreenAnim6";config.resBin="FilmScreenAnim6.bin";config.resAtlas.push("FilmScreenAnim6_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="FilmScreenAnim7";config.resBin="FilmScreenAnim7.bin";config.resAtlas.push("FilmScreenAnim7_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="FilmScreenAnim8";config.resBin="FilmScreenAnim8.bin";config.resAtlas.push("FilmScreenAnim8_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="FilmScreenAnim9";config.resBin="FilmScreenAnim9.bin";config.resAtlas.push("FilmScreenAnim9_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="FilmScreenCommon";config.resBin="FilmScreenCommon.bin";this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Fx";config.resBin="Fx.bin";config.resAtlas.push("Fx_atlas0.png");config.resAtlas.push("Fx_atlas_8ukwoo.png");config.resAtlas.push("Fx_atlas_b2tpp9.png");config.resAtlas.push("Fx_atlas_b2tppb.png");config.resAtlas.push("Fx_atlas_b2tppc.png");config.resAtlas.push("Fx_atlas_i9qvfb.png");config.resAtlas.push("Fx_atlas_ihjedv.png");config.resAtlas.push("Fx_atlas_kowfil.png");config.resAtlas.push("Fx_atlas_kowfim.png");config.resAtlas.push("Fx_atlas_kowfin.png");config.resAtlas.push("Fx_atlas_o7trnh.png");config.resAtlas.push("Fx_atlas_o7trni.png");config.resAtlas.push("Fx_atlas_oecql4.png");config.resAtlas.push("Fx_atlas_qmotc5.png");config.resAtlas.push("Fx_atlas_rlky5w.png");config.resAtlas.push("Fx_atlas_rlky5x.png");config.resAtlas.push("Fx_atlas_ru9k90.png");config.resAtlas.push("Fx_atlas_s60hf7.png");config.resAtlas.push("Fx_atlas_s60hf8.png");config.resAtlas.push("Fx_atlas_sv5mem.png");config.resAtlas.push("Fx_atlas_sv5men.png");config.resAtlas.push("Fx_atlas_sv5meo.png");config.resAtlas.push("Fx_atlas_sv5mep.png");config.resAtlas.push("Fx_atlas_sv5meq.png");config.resAtlas.push("Fx_atlas_sv5mer.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="GM";config.resBin="GM.bin";this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="GoldExchange";config.resBin="GoldExchange.bin";this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Guide";config.resBin="Guide.bin";config.resAtlas.push("Guide_atlas0.png");config.resAtlas.push("Guide_atlas1.png");config.resAtlas.push("Guide_atlas_vysd1z.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="GuideComplete";config.resBin="GuideComplete.bin";config.resAtlas.push("GuideComplete_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="LangEn";config.resBin="LangEn.bin";config.resAtlas.push("LangEn_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="LangZhCn";config.resBin="LangZhCn.bin";config.resAtlas.push("LangZhCn_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="LevelPackage";config.resBin="LevelPackage.bin";config.resAtlas.push("LevelPackage_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Login";config.resBin="Login.bin";config.resAtlas.push("Login_atlas0.png");config.resAtlas.push("Login_atlas_8zgr15.png");config.resAtlas.push("Login_atlas_dk944g.png");config.resAtlas.push("Login_atlas_dk944n.png");config.resAtlas.push("Login_atlas_dk944t.png");config.resAtlas.push("Login_atlas_h48r4u.png");config.resAtlas.push("Login_atlas_h48r4v.png");config.resAtlas.push("Login_atlas_l1hm4w.png");config.resAtlas.push("Login_atlas_opi656.png");config.resAtlas.push("Login_atlas_opi657.png");config.resAtlas.push("Login_atlas_opi659.png");config.resAtlas.push("Login_atlas_opi65a.png");config.resAtlas.push("Login_atlas_wrr65g.png");config.resAtlas.push("Login_atlas_wrr65p.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="MainUI";config.resBin="MainUI.bin";config.resAtlas.push("MainUI_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Manage";config.resBin="Manage.bin";config.resAtlas.push("Manage_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Market";config.resBin="Market.bin";config.resAtlas.push("Market_atlas0.png");config.resAtlas.push("Market_atlas_ha6gfy.png");config.resAtlas.push("Market_atlas_ha6gg4.png");config.resAtlas.push("Market_atlas_ha6gg6.png");config.resAtlas.push("Market_atlas_ha6gg7.png");config.resAtlas.push("Market_atlas_ha6gg8.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Mission";config.resBin="Mission.bin";config.resAtlas.push("Mission_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Notice";config.resBin="Notice.bin";this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="OpenAnima";config.resBin="OpenAnima.bin";config.resAtlas.push("OpenAnima_atlas0.png");config.resAtlas.push("OpenAnima_atlas0_1.png");config.resAtlas.push("OpenAnima_atlas0_2.png");config.resAtlas.push("OpenAnima_atlas0_3.png");config.resAtlas.push("OpenAnima_atlas_boch17.png");config.resAtlas.push("OpenAnima_atlas_boch2e.png");config.resAtlas.push("OpenAnima_atlas_boch2f.png");config.resAtlas.push("OpenAnima_atlas_bochg.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Oscar";config.resBin="Oscar.bin";config.resAtlas.push("Oscar_atlas0.png");config.resAtlas.push("Oscar_atlas_rh6r1c.png");config.resAtlas.push("Oscar_atlas_rh6r1t.png");config.resAtlas.push("Oscar_atlas_rh6r1u.png");config.resAtlas.push("Oscar_atlas_rh6r1v.png");config.resAtlas.push("Oscar_atlas_rh6r1w.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="PfSkin";config.resBin="PfSkin.bin";config.resAtlas.push("PfSkin_atlas0.png");config.resAtlas.push("PfSkin_atlas_dk94t21h.png");config.resAtlas.push("PfSkin_atlas_gjpxt24h.png");config.resAtlas.push("PfSkin_atlas_gjpxt24i.png");config.resAtlas.push("PfSkin_atlas_iacmt1w7.png");config.resAtlas.push("PfSkin_atlas_l7rut1xa.png");config.resAtlas.push("PfSkin_atlas_l7rut1xe.png");config.resAtlas.push("PfSkin_atlas_l7rut1z7.png");config.resAtlas.push("PfSkin_atlas_l7rut1z9.png");config.resAtlas.push("PfSkin_atlas_sm6tt1ve.png");config.resAtlas.push("PfSkin_atlas_xqnft24q.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="PlayerInfo";config.resBin="PlayerInfo.bin";config.resAtlas.push("PlayerInfo_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="PopUp";config.resBin="PopUp.bin";this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Produce";config.resBin="Produce.bin";config.resAtlas.push("Produce_atlas0.png");config.resAtlas.push("Produce_atlas_9mu01t.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Rank";config.resBin="Rank.bin";this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Sound";config.resBin="Sound.bin";config.sounds.push("Sound_806p32.ogg");config.sounds.push("Sound_i7ne2w.mp3");config.sounds.push("Sound_l1r646.ogg");config.sounds.push("Sound_qlot4g.mp3");config.sounds.push("Sound_qlot4h.mp3");config.sounds.push("Sound_qlot4i.mp3");config.sounds.push("Sound_qlot4j.mp3");config.sounds.push("Sound_qlot4k.mp3");config.sounds.push("Sound_qlot4l.mp3");config.sounds.push("Sound_qlot4m.mp3");config.sounds.push("Sound_qlot4n.mp3");config.sounds.push("Sound_qlot4o.mp3");config.sounds.push("Sound_r6c533.ogg");config.sounds.push("Sound_r6c534.ogg");config.sounds.push("Sound_r6c535.ogg");config.sounds.push("Sound_r6c536.ogg");config.sounds.push("Sound_r6c537.ogg");config.sounds.push("Sound_r6c538.ogg");config.sounds.push("Sound_r6c539.ogg");config.sounds.push("Sound_r6c53a.ogg");config.sounds.push("Sound_r6c53b.ogg");config.sounds.push("Sound_r6c53c.ogg");config.sounds.push("Sound_r6c53d.ogg");config.sounds.push("Sound_r6c53e.ogg");config.sounds.push("Sound_r6c53f.ogg");config.sounds.push("Sound_r6c53g.ogg");config.sounds.push("Sound_r6c53h.ogg");config.sounds.push("Sound_r6c53i.ogg");config.sounds.push("Sound_r6c53j.ogg");config.sounds.push("Sound_r6c53k.ogg");config.sounds.push("Sound_r6c53l.ogg");config.sounds.push("Sound_r6c53m.ogg");config.sounds.push("Sound_r6c53n.ogg");config.sounds.push("Sound_r6c53o.ogg");config.sounds.push("Sound_r6c53p.ogg");config.sounds.push("Sound_r6c53q.ogg");config.sounds.push("Sound_r6c53r.ogg");config.sounds.push("Sound_r6c53s.ogg");config.sounds.push("Sound_r6c53t.ogg");config.sounds.push("Sound_r6c53u.ogg");config.sounds.push("Sound_r6c53v.ogg");config.sounds.push("Sound_r6c53w.ogg");config.sounds.push("Sound_r6c53x.ogg");config.sounds.push("Sound_r6c53y.ogg");config.sounds.push("Sound_r6c53z.ogg");config.sounds.push("Sound_r6c540.ogg");config.sounds.push("Sound_r6c541.ogg");config.sounds.push("Sound_r6c542.ogg");config.sounds.push("Sound_r6c543.ogg");config.sounds.push("Sound_r6c544.ogg");config.sounds.push("Sound_r6c545.ogg");config.sounds.push("Sound_s3xz1n.mp3");config.sounds.push("Sound_s3xz1o.mp3");config.sounds.push("Sound_s3xz1p.mp3");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Street";config.resBin="Street.bin";config.resAtlas.push("Street_atlas0.png");config.resAtlas.push("Street_atlas_724u2u.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="System";config.resBin="System.bin";config.resAtlas.push("System_atlas0.png");config.resAtlas.push("System_atlas_5sasa.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="SystemSettings";config.resBin="SystemSettings.bin";config.resAtlas.push("SystemSettings_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="Talk";config.resBin="Talk.bin";config.resAtlas.push("Talk_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="WarContinue";config.resBin="WarContinue.bin";config.resAtlas.push("WarContinue_atlas0.png");this.addconfig(config);config=new Games.GuiResPackageConfig();config.resDir="fgui";config.packageName="WarMovie";config.resBin="WarMovie.bin";config.resAtlas.push("WarMovie_atlas0.png");config.resAtlas.push("WarMovie_atlas_lsbtdw.png");config.resAtlas.push("WarMovie_atlas_r0zd1e.png");config.resAtlas.push("WarMovie_atlas_r0zd1f.png");config.resAtlas.push("WarMovie_atlas_r0zd1g.png");config.resAtlas.push("WarMovie_atlas_r0zd1x.png");config.resAtlas.push("WarMovie_atlas_r0zd3p.png");this.addconfig(config)};return GuiResPackageConfigReader}());Games.GuiResPackageConfigReader=GuiResPackageConfigReader})(Games||(Games={}));var Games;(function(Games){var GuiResPackageConfig=(function(){function GuiResPackageConfig(){this.resAtlas=[];this.sounds=[]}Object.defineProperty(GuiResPackageConfig.prototype,"loadList",{get:function(){if(!this._loadList){var list=[];list.push({url:Games.GuiSetting.getResPath(this.resBin,this.resDir),type:Loader.BUFFER});if(this.resAtlas){for(var i=0;i<this.resAtlas.length;i++){list.push({url:Games.GuiSetting.getResPath(this.resAtlas[i],this.resDir),type:Loader.IMAGE})}}if(this.sounds){for(var i=0;i<this.sounds.length;i++){list.push({url:Games.GuiSetting.getResPath(this.sounds[i],this.resDir),type:Loader.SOUND})}}this._loadList=list}return this._loadList},enumerable:true,configurable:true});Object.defineProperty(GuiResPackageConfig.prototype,"packagePath",{get:function(){return Games.GuiSetting.getResPackagePath(this.packageName,this.resDir)},enumerable:true,configurable:true});return GuiResPackageConfig}());Games.GuiResPackageConfig=GuiResPackageConfig})(Games||(Games={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarMovieBinder=(function(){function WarMovieBinder(){}WarMovieBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarPaishequeren.URL,WarMovie.WarPaishequeren);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarCostView.URL,WarMovie.WarCostView);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.CloseBtn.URL,WarMovie.CloseBtn);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmStar.URL,WarMovie.WarFilmStar);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.Star.URL,WarMovie.Star);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarYRCostItem.URL,WarMovie.WarYRCostItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.ConfirmBtn.URL,WarMovie.ConfirmBtn);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarYRForFilm.URL,WarMovie.WarYRForFilm);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.Warbubble.URL,WarMovie.Warbubble);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarYRFilmItem.URL,WarMovie.WarYRFilmItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilming.URL,WarMovie.WarFilming);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.FilmProgress.URL,WarMovie.FilmProgress);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.FilmingTip.URL,WarMovie.FilmingTip);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarMoveTextUD.URL,WarMovie.WarMoveTextUD);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmTypeItem.URL,WarMovie.WarFilmTypeItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmSelecting.URL,WarMovie.WarFilmSelecting);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarPeople.URL,WarMovie.WarPeople);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.FilmIcon.URL,WarMovie.FilmIcon);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarPeopleSmall.URL,WarMovie.WarPeopleSmall);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.FilmSelectItem.URL,WarMovie.FilmSelectItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmingYRItem.URL,WarMovie.WarFilmingYRItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmingSelectTipItem.URL,WarMovie.WarFilmingSelectTipItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmInfo.URL,WarMovie.WarFilmInfo);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.CompletedConditions.URL,WarMovie.CompletedConditions);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmYirenReq.URL,WarMovie.WarFilmYirenReq);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmYirenItem.URL,WarMovie.WarFilmYirenItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarSelectActor.URL,WarMovie.WarSelectActor);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.FilmInfBtn.URL,WarMovie.FilmInfBtn);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarSelectActorItem.URL,WarMovie.WarSelectActorItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarActorProperty.URL,WarMovie.WarActorProperty);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarActorSelectTip.URL,WarMovie.WarActorSelectTip);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarActorItem.URL,WarMovie.WarActorItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarSelectFilmType.URL,WarMovie.WarSelectFilmType);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmTypeSelectItem.URL,WarMovie.WarFilmTypeSelectItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarNotice.URL,WarMovie.WarNotice);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarYRProficiency.URL,WarMovie.WarYRProficiency);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.FilmProgressBlue.URL,WarMovie.FilmProgressBlue);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarActorProficiencyItem.URL,WarMovie.WarActorProficiencyItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmSQView.URL,WarMovie.WarFilmSQView);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarActor160.URL,WarMovie.WarActor160);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.FilmProgressBlue2.URL,WarMovie.FilmProgressBlue2);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.AveragePress.URL,WarMovie.AveragePress);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarSQViewItem.URL,WarMovie.WarSQViewItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarCinemaSelection.URL,WarMovie.WarCinemaSelection);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarCinemaItem.URL,WarMovie.WarCinemaItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFeedBack.URL,WarMovie.WarFeedBack);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.StarProgress.URL,WarMovie.StarProgress);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.StarProgressSmall.URL,WarMovie.StarProgressSmall);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFrreBackItem.URL,WarMovie.WarFrreBackItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarAudienceReputation.URL,WarMovie.WarAudienceReputation);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarAudienceItem.URL,WarMovie.WarAudienceItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmShangYing.URL,WarMovie.WarFilmShangYing);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarTape.URL,WarMovie.WarTape);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarShangYingProgress.URL,WarMovie.WarShangYingProgress);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmOverMarketInfo.URL,WarMovie.WarFilmOverMarketInfo);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmJiesuan.URL,WarMovie.WarFilmJiesuan);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.ProgressYellow.URL,WarMovie.ProgressYellow);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.ProgressBlue.URL,WarMovie.ProgressBlue);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarGoodsItem.URL,WarMovie.WarGoodsItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.ShareBtn.URL,WarMovie.ShareBtn);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarPeopleFaceItem.URL,WarMovie.WarPeopleFaceItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.GoodsItem.URL,WarMovie.GoodsItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarContinueRewardItem.URL,WarMovie.WarContinueRewardItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarCityItem.URL,WarMovie.WarCityItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarEndingIncome.URL,WarMovie.WarEndingIncome);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.ConfirmBtn2.URL,WarMovie.ConfirmBtn2);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarEndIncomeItem.URL,WarMovie.WarEndIncomeItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmYRShow.URL,WarMovie.WarFilmYRShow);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarCurrentMarketInfo.URL,WarMovie.WarCurrentMarketInfo);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarMarketPeople.URL,WarMovie.WarMarketPeople);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarXKHuifu.URL,WarMovie.WarXKHuifu);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarBtn.URL,WarMovie.WarBtn);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarXukezhengOver.URL,WarMovie.WarXukezhengOver);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarMain.URL,WarMovie.WarMain);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmMoveShow.URL,WarMovie.WarFilmMoveShow);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarActorItemShow.URL,WarMovie.WarActorItemShow);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.Warjiaojuan.URL,WarMovie.Warjiaojuan);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarTip.URL,WarMovie.WarTip);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarTipKuang.URL,WarMovie.WarTipKuang);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmSQ.URL,WarMovie.WarFilmSQ);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarTargetSucces.URL,WarMovie.WarTargetSucces);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarTargetFailed.URL,WarMovie.WarTargetFailed);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarTargetFailItem.URL,WarMovie.WarTargetFailItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmLiuxing.URL,WarMovie.WarFilmLiuxing);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmSYPF.URL,WarMovie.WarFilmSYPF);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarBgCloseBtn.URL,WarMovie.WarBgCloseBtn);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.ConfirmCostBtn.URL,WarMovie.ConfirmCostBtn);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarInfBtn.URL,WarMovie.WarInfBtn);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarActorShowItem.URL,WarMovie.WarActorShowItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarJiesuanNum.URL,WarMovie.WarJiesuanNum);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.BG.URL,WarMovie.BG);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.BG2.URL,WarMovie.BG2);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.Touxiang44.URL,WarMovie.Touxiang44);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.Touxiang80.URL,WarMovie.Touxiang80);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.Touxiang160.URL,WarMovie.Touxiang160);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarActor80.URL,WarMovie.WarActor80);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarActor44.URL,WarMovie.WarActor44);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.Touxiang80noMask.URL,WarMovie.Touxiang80noMask);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarActor80noMask.URL,WarMovie.WarActor80noMask);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarActor120.URL,WarMovie.WarActor120);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.Touxiang120.URL,WarMovie.Touxiang120);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarjiaojuanPinPu.URL,WarMovie.WarjiaojuanPinPu);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.NoticeIcon.URL,WarMovie.NoticeIcon);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarAttributeUpTip.URL,WarMovie.WarAttributeUpTip);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarYRNoticeItem.URL,WarMovie.WarYRNoticeItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.MinDialog.URL,WarMovie.MinDialog);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.ShwoMinDialog.URL,WarMovie.ShwoMinDialog);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarGoldProgressBar.URL,WarMovie.WarGoldProgressBar);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.ZhuIcon.URL,WarMovie.ZhuIcon);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.TargetSiccesItem.URL,WarMovie.TargetSiccesItem);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarMoveTextHide.URL,WarMovie.WarMoveTextHide);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.SQFlash.URL,WarMovie.SQFlash);fairygui.UIObjectFactory.setPackageItemExtension(WarMovie.WarFilmingGoldEffect.URL,WarMovie.WarFilmingGoldEffect)};return WarMovieBinder}());WarMovie.WarMovieBinder=WarMovieBinder})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarContinue;(function(WarContinue){var WarContinueBinder=(function(){function WarContinueBinder(){}WarContinueBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(WarContinue.WarContinuousIncome.URL,WarContinue.WarContinuousIncome)};return WarContinueBinder}());WarContinue.WarContinueBinder=WarContinueBinder})(WarContinue=fgui.WarContinue||(fgui.WarContinue={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var SystemSettingsBinder=(function(){function SystemSettingsBinder(){}SystemSettingsBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(SystemSettings.SettingsPanel.URL,SystemSettings.SettingsPanel);fairygui.UIObjectFactory.setPackageItemExtension(SystemSettings.SettingsItem.URL,SystemSettings.SettingsItem);fairygui.UIObjectFactory.setPackageItemExtension(SystemSettings.GiftPackageExchange.URL,SystemSettings.GiftPackageExchange);fairygui.UIObjectFactory.setPackageItemExtension(SystemSettings.SelectLanguage.URL,SystemSettings.SelectLanguage);fairygui.UIObjectFactory.setPackageItemExtension(SystemSettings.LanguageItem.URL,SystemSettings.LanguageItem);fairygui.UIObjectFactory.setPackageItemExtension(SystemSettings.OnC.URL,SystemSettings.OnC);fairygui.UIObjectFactory.setPackageItemExtension(SystemSettings.OffC.URL,SystemSettings.OffC);fairygui.UIObjectFactory.setPackageItemExtension(SystemSettings.NoneC.URL,SystemSettings.NoneC);fairygui.UIObjectFactory.setPackageItemExtension(SystemSettings.ButtonItem.URL,SystemSettings.ButtonItem)};return SystemSettingsBinder}());SystemSettings.SystemSettingsBinder=SystemSettingsBinder})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetBinder=(function(){function StreetBinder(){}StreetBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Street.CinemaSelectItem.URL,Street.CinemaSelectItem);fairygui.UIObjectFactory.setPackageItemExtension(Street.StreetCinemaSelectedPanel.URL,Street.StreetCinemaSelectedPanel);fairygui.UIObjectFactory.setPackageItemExtension(Street.StreetInfoPanel.URL,Street.StreetInfoPanel);fairygui.UIObjectFactory.setPackageItemExtension(Street.StreetItem.URL,Street.StreetItem);fairygui.UIObjectFactory.setPackageItemExtension(Street.StreetIcon.URL,Street.StreetIcon);fairygui.UIObjectFactory.setPackageItemExtension(Street.StreetListPanel.URL,Street.StreetListPanel);fairygui.UIObjectFactory.setPackageItemExtension(Street.StreetLvUpInfoPanel.URL,Street.StreetLvUpInfoPanel);fairygui.UIObjectFactory.setPackageItemExtension(Street.StreetMainPanel.URL,Street.StreetMainPanel);fairygui.UIObjectFactory.setPackageItemExtension(Street.StreetRankPanel.URL,Street.StreetRankPanel);fairygui.UIObjectFactory.setPackageItemExtension(Street.StreetSelectCinemaPanel.URL,Street.StreetSelectCinemaPanel);fairygui.UIObjectFactory.setPackageItemExtension(Street.StreetRewardView.URL,Street.StreetRewardView);fairygui.UIObjectFactory.setPackageItemExtension(Street.StreetCinemaView.URL,Street.StreetCinemaView);fairygui.UIObjectFactory.setPackageItemExtension(Street.CinemaIcon.URL,Street.CinemaIcon);fairygui.UIObjectFactory.setPackageItemExtension(Street.CinemaItem.URL,Street.CinemaItem);fairygui.UIObjectFactory.setPackageItemExtension(Street.CinemaItem_llittle.URL,Street.CinemaItem_llittle);fairygui.UIObjectFactory.setPackageItemExtension(Street.MenuIcon.URL,Street.MenuIcon);fairygui.UIObjectFactory.setPackageItemExtension(Street.ActorCircleItem.URL,Street.ActorCircleItem);fairygui.UIObjectFactory.setPackageItemExtension(Street.RankGroupItem.URL,Street.RankGroupItem);fairygui.UIObjectFactory.setPackageItemExtension(Street.RankGroupMovieItem.URL,Street.RankGroupMovieItem);fairygui.UIObjectFactory.setPackageItemExtension(Street.TabStreet.URL,Street.TabStreet);fairygui.UIObjectFactory.setPackageItemExtension(Street.BtnBack.URL,Street.BtnBack);fairygui.UIObjectFactory.setPackageItemExtension(Street.CircleIcon.URL,Street.CircleIcon)};return StreetBinder}());Street.StreetBinder=StreetBinder})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Sound;(function(Sound){var SoundBinder=(function(){function SoundBinder(){}SoundBinder.bindAll=function(){};return SoundBinder}());Sound.SoundBinder=SoundBinder})(Sound=fgui.Sound||(fgui.Sound={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Rank;(function(Rank){var RankBinder=(function(){function RankBinder(){}RankBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Rank.RankMainPanel.URL,Rank.RankMainPanel);fairygui.UIObjectFactory.setPackageItemExtension(Rank.RankRewardPanel.URL,Rank.RankRewardPanel);fairygui.UIObjectFactory.setPackageItemExtension(Rank.RankItem.URL,Rank.RankItem);fairygui.UIObjectFactory.setPackageItemExtension(Rank.RankRewardItem.URL,Rank.RankRewardItem);fairygui.UIObjectFactory.setPackageItemExtension(Rank.UserRank.URL,Rank.UserRank)};return RankBinder}());Rank.RankBinder=RankBinder})(Rank=fgui.Rank||(fgui.Rank={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceBinder=(function(){function ProduceBinder(){}ProduceBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Produce.Main.URL,Produce.Main);fairygui.UIObjectFactory.setPackageItemExtension(Produce.TabGrade.URL,Produce.TabGrade);fairygui.UIObjectFactory.setPackageItemExtension(Produce.BtnUpgrade.URL,Produce.BtnUpgrade);fairygui.UIObjectFactory.setPackageItemExtension(Produce.BtnAdd.URL,Produce.BtnAdd);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ItemProduceLine.URL,Produce.ItemProduceLine);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ProduceItem.URL,Produce.ProduceItem);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ProduceLimitItem.URL,Produce.ProduceLimitItem);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ProduceUpgrade.URL,Produce.ProduceUpgrade);fairygui.UIObjectFactory.setPackageItemExtension(Produce.BtnUpgradeLock.URL,Produce.BtnUpgradeLock);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ProduceUpgradeItem.URL,Produce.ProduceUpgradeItem);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ProduceSelectActorPanel.URL,Produce.ProduceSelectActorPanel);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ActorFilterItem.URL,Produce.ActorFilterItem);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ProduceRenderItem.URL,Produce.ProduceRenderItem);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ItemProduceMaxLine.URL,Produce.ItemProduceMaxLine);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ProduceTip.URL,Produce.ProduceTip);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ProduceOffActor.URL,Produce.ProduceOffActor);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ActorAttrItem.URL,Produce.ActorAttrItem);fairygui.UIObjectFactory.setPackageItemExtension(Produce.TabCircleList.URL,Produce.TabCircleList);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ButtonEndTime.URL,Produce.ButtonEndTime);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ItemIconEffectLoader.URL,Produce.ItemIconEffectLoader);fairygui.UIObjectFactory.setPackageItemExtension(Produce.ProduceDesc.URL,Produce.ProduceDesc)};return ProduceBinder}());Produce.ProduceBinder=ProduceBinder})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PopUp;(function(PopUp){var PopUpBinder=(function(){function PopUpBinder(){}PopUpBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(PopUp.PopUpMain.URL,PopUp.PopUpMain)};return PopUpBinder}());PopUp.PopUpBinder=PopUpBinder})(PopUp=fgui.PopUp||(fgui.PopUp={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var PlayerInfoBinder=(function(){function PlayerInfoBinder(){}PlayerInfoBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.ProgressRedBar.URL,PlayerInfo.ProgressRedBar);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.BarSquare.URL,PlayerInfo.BarSquare);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.Main.URL,PlayerInfo.Main);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.Btn_editor_desc.URL,PlayerInfo.Btn_editor_desc);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.Btn_editor_name.URL,PlayerInfo.Btn_editor_name);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.PersonInfo.URL,PlayerInfo.PersonInfo);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.AssetItem.URL,PlayerInfo.AssetItem);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.Btn_topClose.URL,PlayerInfo.Btn_topClose);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.PlayerTopAsset.URL,PlayerInfo.PlayerTopAsset);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.TabPanel.URL,PlayerInfo.TabPanel);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.HomeRankTop.URL,PlayerInfo.HomeRankTop);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.HomeRankItem.URL,PlayerInfo.HomeRankItem);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.RenameCompany.URL,PlayerInfo.RenameCompany);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.ItemBuy.URL,PlayerInfo.ItemBuy);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.Btn_buy.URL,PlayerInfo.Btn_buy);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.ChooseAvatar.URL,PlayerInfo.ChooseAvatar);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.Btn_choose.URL,PlayerInfo.Btn_choose);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.AvatarIconItem.URL,PlayerInfo.AvatarIconItem);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.PlayerLevelUp.URL,PlayerInfo.PlayerLevelUp);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.PlayerLevelNumber.URL,PlayerInfo.PlayerLevelNumber);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.PlayerInfoAwardItem.URL,PlayerInfo.PlayerInfoAwardItem);fairygui.UIObjectFactory.setPackageItemExtension(PlayerInfo.HeadCircleIcon.URL,PlayerInfo.HeadCircleIcon)};return PlayerInfoBinder}());PlayerInfo.PlayerInfoBinder=PlayerInfoBinder})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var PfSkinBinder=(function(){function PfSkinBinder(){}PfSkinBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ActorDetailUI.URL,PfSkin.ActorDetailUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistForzenUI.URL,PfSkin.ArtistForzenUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistScoutResultUI.URL,PfSkin.ArtistScoutResultUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistScoutSuccessUI.URL,PfSkin.ArtistScoutSuccessUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistTrainResultUI.URL,PfSkin.ArtistTrainResultUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistTrainUI.URL,PfSkin.ArtistTrainUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistUI.URL,PfSkin.ArtistUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ModalUI.URL,PfSkin.ModalUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistForzenItem.URL,PfSkin.ArtistForzenItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistItemView.URL,PfSkin.ArtistItemView);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistScoutResultItem.URL,PfSkin.ArtistScoutResultItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistTabBtn.URL,PfSkin.ArtistTabBtn);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistTrainAttrUpItem.URL,PfSkin.ArtistTrainAttrUpItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistTrainItem1.URL,PfSkin.ArtistTrainItem1);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistTrainItem2.URL,PfSkin.ArtistTrainItem2);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.CommonBtn.URL,PfSkin.CommonBtn);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.CommonDialogUI.URL,PfSkin.CommonDialogUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.RewardCellView.URL,PfSkin.RewardCellView);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.LineText.URL,PfSkin.LineText);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ProgressBarYellow.URL,PfSkin.ProgressBarYellow);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.Red.URL,PfSkin.Red);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.SpeedBtn.URL,PfSkin.SpeedBtn);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.Text.URL,PfSkin.Text);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.TrainResultItem.URL,PfSkin.TrainResultItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.YellowBtn2.URL,PfSkin.YellowBtn2);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.YellowBtn5.URL,PfSkin.YellowBtn5);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.WarFilmLabel.URL,PfSkin.WarFilmLabel);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.WarBtn.URL,PfSkin.WarBtn);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.CheckBox.URL,PfSkin.CheckBox);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ResultItemBtn.URL,PfSkin.ResultItemBtn);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryLibraryUI.URL,PfSkin.StoryLibraryUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryGroupRewardItem.URL,PfSkin.StoryGroupRewardItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryGroupItem.URL,PfSkin.StoryGroupItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.CheckMark.URL,PfSkin.CheckMark);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryItem.URL,PfSkin.StoryItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.GroupItemRewardDialog.URL,PfSkin.GroupItemRewardDialog);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryAchevementUI.URL,PfSkin.StoryAchevementUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryAchevementItem.URL,PfSkin.StoryAchevementItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryAchevementTargetItem.URL,PfSkin.StoryAchevementTargetItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryAchevementTargetUI.URL,PfSkin.StoryAchevementTargetUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryInfoUI.URL,PfSkin.StoryInfoUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryInfoItem.URL,PfSkin.StoryInfoItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistShareUI.URL,PfSkin.ArtistShareUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistGetUI.URL,PfSkin.ArtistGetUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.MailMainPanel.URL,PfSkin.MailMainPanel);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.MailItem.URL,PfSkin.MailItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.MailContentPanel.URL,PfSkin.MailContentPanel);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.TextScroll.URL,PfSkin.TextScroll);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.EmptyBtn.URL,PfSkin.EmptyBtn);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryItemMask.URL,PfSkin.StoryItemMask);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ShopMainPanel.URL,PfSkin.ShopMainPanel);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ShopItem.URL,PfSkin.ShopItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ShopSpecialItem.URL,PfSkin.ShopSpecialItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.BtnShopTab.URL,PfSkin.BtnShopTab);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.RechargeMainPanel.URL,PfSkin.RechargeMainPanel);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ShopRechargeItem.URL,PfSkin.ShopRechargeItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.LabItem_big.URL,PfSkin.LabItem_big);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ShopGoodsItem.URL,PfSkin.ShopGoodsItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.RoomDisplayContainer.URL,PfSkin.RoomDisplayContainer);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.LyShow.URL,PfSkin.LyShow);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.LyChair1.URL,PfSkin.LyChair1);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.LyChair2.URL,PfSkin.LyChair2);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.LyChair3.URL,PfSkin.LyChair3);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.LyChair4.URL,PfSkin.LyChair4);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.LyContainer.URL,PfSkin.LyContainer);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtListExerciseItem.URL,PfSkin.ArtListExerciseItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtListExerciseUI.URL,PfSkin.ArtListExerciseUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistExperciseRoom.URL,PfSkin.ArtistExperciseRoom);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ActorExperciseSelectPanel.URL,PfSkin.ActorExperciseSelectPanel);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ActorExperciseItem.URL,PfSkin.ActorExperciseItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.RoadShowContainer.URL,PfSkin.RoadShowContainer);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.OscarAnim.URL,PfSkin.OscarAnim);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.OscarChair1.URL,PfSkin.OscarChair1);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.OscarChair2.URL,PfSkin.OscarChair2);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.OscarChair3.URL,PfSkin.OscarChair3);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.OscarChair4.URL,PfSkin.OscarChair4);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.OscarContainer.URL,PfSkin.OscarContainer);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.AnimContainer.URL,PfSkin.AnimContainer);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.LeftTimeBtn.URL,PfSkin.LeftTimeBtn);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryAchieveItemView.URL,PfSkin.StoryAchieveItemView);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.BtnBigAdd.URL,PfSkin.BtnBigAdd);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistBtn.URL,PfSkin.ArtistBtn);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.NewArtistItem.URL,PfSkin.NewArtistItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.NewArtistBg.URL,PfSkin.NewArtistBg);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryTypeItem.URL,PfSkin.StoryTypeItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ShareBtn.URL,PfSkin.ShareBtn);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.LabCost.URL,PfSkin.LabCost);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryFindUI.URL,PfSkin.StoryFindUI);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.LabCost2.URL,PfSkin.LabCost2);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.GoodsLine.URL,PfSkin.GoodsLine);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ActionContainer.URL,PfSkin.ActionContainer);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.MailViewPanel.URL,PfSkin.MailViewPanel);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.MailRewardItem.URL,PfSkin.MailRewardItem);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.OscarPanel.URL,PfSkin.OscarPanel);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistIcon.URL,PfSkin.ArtistIcon);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistIcon150.URL,PfSkin.ArtistIcon150);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.StoryItemStar.URL,PfSkin.StoryItemStar);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistFindPanel.URL,PfSkin.ArtistFindPanel);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ArtistListPanel.URL,PfSkin.ArtistListPanel);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.RandomBtn.URL,PfSkin.RandomBtn);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.GoodsIcon.URL,PfSkin.GoodsIcon);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.RenameInput.URL,PfSkin.RenameInput);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.ScoutInput.URL,PfSkin.ScoutInput);fairygui.UIObjectFactory.setPackageItemExtension(PfSkin.RenameUI.URL,PfSkin.RenameUI)};return PfSkinBinder}());PfSkin.PfSkinBinder=PfSkinBinder})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarBinder=(function(){function OscarBinder(){}OscarBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Oscar.OscarAwardsListPanel.URL,Oscar.OscarAwardsListPanel);fairygui.UIObjectFactory.setPackageItemExtension(Oscar.OscarRewardPanel.URL,Oscar.OscarRewardPanel);fairygui.UIObjectFactory.setPackageItemExtension(Oscar.OscarShowPanel.URL,Oscar.OscarShowPanel);fairygui.UIObjectFactory.setPackageItemExtension(Oscar.OscarDailyCheckbox.URL,Oscar.OscarDailyCheckbox);fairygui.UIObjectFactory.setPackageItemExtension(Oscar.OscarRewardItem.URL,Oscar.OscarRewardItem);fairygui.UIObjectFactory.setPackageItemExtension(Oscar.AwardsInfoItemts.URL,Oscar.AwardsInfoItemts);fairygui.UIObjectFactory.setPackageItemExtension(Oscar.OscarShowWinner.URL,Oscar.OscarShowWinner);fairygui.UIObjectFactory.setPackageItemExtension(Oscar.OscarCandidateItem.URL,Oscar.OscarCandidateItem);fairygui.UIObjectFactory.setPackageItemExtension(Oscar.OscarShowFrontView.URL,Oscar.OscarShowFrontView);fairygui.UIObjectFactory.setPackageItemExtension(Oscar.OscarCupItem.URL,Oscar.OscarCupItem);fairygui.UIObjectFactory.setPackageItemExtension(Oscar.AwardsTitle.URL,Oscar.AwardsTitle);fairygui.UIObjectFactory.setPackageItemExtension(Oscar.BtnLeft.URL,Oscar.BtnLeft);fairygui.UIObjectFactory.setPackageItemExtension(Oscar.BtnRight.URL,Oscar.BtnRight)};return OscarBinder}());Oscar.OscarBinder=OscarBinder})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var OpenAnimaBinder=(function(){function OpenAnimaBinder(){}OpenAnimaBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.OpenAnima.URL,OpenAnima.OpenAnima);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Anima1_1.URL,OpenAnima.Anima1_1);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Jingtou1.URL,OpenAnima.Jingtou1);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.TalkBox.URL,OpenAnima.TalkBox);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Anima1_2.URL,OpenAnima.Anima1_2);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Jingtou2.URL,OpenAnima.Jingtou2);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Player.URL,OpenAnima.Player);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Player_Man.URL,OpenAnima.Player_Man);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Player_man_hand.URL,OpenAnima.Player_man_hand);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Player_Women.URL,OpenAnima.Player_Women);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Player_women_hand.URL,OpenAnima.Player_women_hand);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Anima2_1.URL,OpenAnima.Anima2_1);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Jingtou3.URL,OpenAnima.Jingtou3);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Player2.URL,OpenAnima.Player2);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.CrossAnima1.URL,OpenAnima.CrossAnima1);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Anima2_2.URL,OpenAnima.Anima2_2);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Xunhuan_light.URL,OpenAnima.Xunhuan_light);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Hand_kaixiang.URL,OpenAnima.Hand_kaixiang);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Men.URL,OpenAnima.Men);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Hand_kaimen.URL,OpenAnima.Hand_kaimen);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Xunhuan_light002.URL,OpenAnima.Xunhuan_light002);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Anima2_3.URL,OpenAnima.Anima2_3);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Jingtou5.URL,OpenAnima.Jingtou5);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Hand_kanxin.URL,OpenAnima.Hand_kanxin);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Jingtou7.URL,OpenAnima.Jingtou7);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.CrossAnima2.URL,OpenAnima.CrossAnima2);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Anima4_1.URL,OpenAnima.Anima4_1);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Player3.URL,OpenAnima.Player3);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Effect_xuanzhuanlight01.URL,OpenAnima.Effect_xuanzhuanlight01);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.CrossAnima3.URL,OpenAnima.CrossAnima3);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.CarAnima.URL,OpenAnima.CarAnima);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.TalkBox2.URL,OpenAnima.TalkBox2);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Anima3_1.URL,OpenAnima.Anima3_1);fairygui.UIObjectFactory.setPackageItemExtension(OpenAnima.Anima3_2.URL,OpenAnima.Anima3_2)};return OpenAnimaBinder}());OpenAnima.OpenAnimaBinder=OpenAnimaBinder})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Notice;(function(Notice){var NoticeBinder=(function(){function NoticeBinder(){}NoticeBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Notice.PublicNoticePanel.URL,Notice.PublicNoticePanel)};return NoticeBinder}());Notice.NoticeBinder=NoticeBinder})(Notice=fgui.Notice||(fgui.Notice={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Mission;(function(Mission){var MissionBinder=(function(){function MissionBinder(){}MissionBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Mission.MissionMainPanel.URL,Mission.MissionMainPanel);fairygui.UIObjectFactory.setPackageItemExtension(Mission.MissionItem.URL,Mission.MissionItem);fairygui.UIObjectFactory.setPackageItemExtension(Mission.CommonProgressBar.URL,Mission.CommonProgressBar);fairygui.UIObjectFactory.setPackageItemExtension(Mission.ProgressMission.URL,Mission.ProgressMission);fairygui.UIObjectFactory.setPackageItemExtension(Mission.MissionReward.URL,Mission.MissionReward)};return MissionBinder}());Mission.MissionBinder=MissionBinder})(Mission=fgui.Mission||(fgui.Mission={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketBinder=(function(){function MarketBinder(){}MarketBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Market.MarketCityInfoPanel.URL,Market.MarketCityInfoPanel);fairygui.UIObjectFactory.setPackageItemExtension(Market.MarketCountryListPanel.URL,Market.MarketCountryListPanel);fairygui.UIObjectFactory.setPackageItemExtension(Market.MarketMainPanel.URL,Market.MarketMainPanel);fairygui.UIObjectFactory.setPackageItemExtension(Market.MarketOccupyPanel.URL,Market.MarketOccupyPanel);fairygui.UIObjectFactory.setPackageItemExtension(Market.BtnRoadShow.URL,Market.BtnRoadShow);fairygui.UIObjectFactory.setPackageItemExtension(Market.MarketPublicityPanel.URL,Market.MarketPublicityPanel);fairygui.UIObjectFactory.setPackageItemExtension(Market.MarketRoadShowPanel.URL,Market.MarketRoadShowPanel);fairygui.UIObjectFactory.setPackageItemExtension(Market.MarketSelectActorPanel.URL,Market.MarketSelectActorPanel);fairygui.UIObjectFactory.setPackageItemExtension(Market.BtnAddActer_Blue.URL,Market.BtnAddActer_Blue);fairygui.UIObjectFactory.setPackageItemExtension(Market.BtnCityPoint.URL,Market.BtnCityPoint);fairygui.UIObjectFactory.setPackageItemExtension(Market.BtnAddActer.URL,Market.BtnAddActer);fairygui.UIObjectFactory.setPackageItemExtension(Market.ActorPropert.URL,Market.ActorPropert);fairygui.UIObjectFactory.setPackageItemExtension(Market.MarketSelectActorItem.URL,Market.MarketSelectActorItem);fairygui.UIObjectFactory.setPackageItemExtension(Market.BtnCity.URL,Market.BtnCity);fairygui.UIObjectFactory.setPackageItemExtension(Market.CountryItem.URL,Market.CountryItem);fairygui.UIObjectFactory.setPackageItemExtension(Market.MarketRoadShowSuccess.URL,Market.MarketRoadShowSuccess);fairygui.UIObjectFactory.setPackageItemExtension(Market.BtnRight.URL,Market.BtnRight);fairygui.UIObjectFactory.setPackageItemExtension(Market.BtnLeft.URL,Market.BtnLeft);fairygui.UIObjectFactory.setPackageItemExtension(Market.ButtonPublicityCost.URL,Market.ButtonPublicityCost);fairygui.UIObjectFactory.setPackageItemExtension(Market.MarketPublicityAnim.URL,Market.MarketPublicityAnim);fairygui.UIObjectFactory.setPackageItemExtension(Market.MarketComplete.URL,Market.MarketComplete)};return MarketBinder}());Market.MarketBinder=MarketBinder})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var ManageBinder=(function(){function ManageBinder(){}ManageBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Manage.BusinessLoadingPanel.URL,Manage.BusinessLoadingPanel);fairygui.UIObjectFactory.setPackageItemExtension(Manage.BusinessMsgPanel.URL,Manage.BusinessMsgPanel);fairygui.UIObjectFactory.setPackageItemExtension(Manage.BusinessUI.URL,Manage.BusinessUI);fairygui.UIObjectFactory.setPackageItemExtension(Manage.VisitUI.URL,Manage.VisitUI);fairygui.UIObjectFactory.setPackageItemExtension(Manage.DeleteBtn.URL,Manage.DeleteBtn);fairygui.UIObjectFactory.setPackageItemExtension(Manage.VisitDialogPanel.URL,Manage.VisitDialogPanel);fairygui.UIObjectFactory.setPackageItemExtension(Manage.ManagerOrderNeedPanel.URL,Manage.ManagerOrderNeedPanel);fairygui.UIObjectFactory.setPackageItemExtension(Manage.ManagerOrderUI.URL,Manage.ManagerOrderUI);fairygui.UIObjectFactory.setPackageItemExtension(Manage.OrderTargetItem.URL,Manage.OrderTargetItem);fairygui.UIObjectFactory.setPackageItemExtension(Manage.OrderBox.URL,Manage.OrderBox);fairygui.UIObjectFactory.setPackageItemExtension(Manage.OrderHeadItem.URL,Manage.OrderHeadItem);fairygui.UIObjectFactory.setPackageItemExtension(Manage.MeetingAskPricePanel.URL,Manage.MeetingAskPricePanel);fairygui.UIObjectFactory.setPackageItemExtension(Manage.MeetingGameItem.URL,Manage.MeetingGameItem);fairygui.UIObjectFactory.setPackageItemExtension(Manage.MeetingGamePanel.URL,Manage.MeetingGamePanel);fairygui.UIObjectFactory.setPackageItemExtension(Manage.MeetingResultPanel.URL,Manage.MeetingResultPanel);fairygui.UIObjectFactory.setPackageItemExtension(Manage.MeetingUI.URL,Manage.MeetingUI);fairygui.UIObjectFactory.setPackageItemExtension(Manage.MettingStartPanel.URL,Manage.MettingStartPanel);fairygui.UIObjectFactory.setPackageItemExtension(Manage.MeetingDialogRewardPanel.URL,Manage.MeetingDialogRewardPanel);fairygui.UIObjectFactory.setPackageItemExtension(Manage.MeetingResultDialogPanel.URL,Manage.MeetingResultDialogPanel);fairygui.UIObjectFactory.setPackageItemExtension(Manage.MeetingResultEffect.URL,Manage.MeetingResultEffect);fairygui.UIObjectFactory.setPackageItemExtension(Manage.ManagerOrderNeedItem.URL,Manage.ManagerOrderNeedItem)};return ManageBinder}());Manage.ManageBinder=ManageBinder})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var MainUIBinder=(function(){function MainUIBinder(){}MainUIBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(MainUI.MenuBMainButton.URL,MainUI.MenuBMainButton);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.MenuRButton.URL,MainUI.MenuRButton);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.TopHeadIcon.URL,MainUI.TopHeadIcon);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.Red.URL,MainUI.Red);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.MainMenuBar.URL,MainUI.MainMenuBar);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.RightBottomMenuBar.URL,MainUI.RightBottomMenuBar);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.TopHeadInfo.URL,MainUI.TopHeadInfo);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.TopMoneyMainBar.URL,MainUI.TopMoneyMainBar);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.WarFilmSmalls.URL,MainUI.WarFilmSmalls);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.WarShangyingProgressBar2.URL,MainUI.WarShangyingProgressBar2);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.WarFilmContinue.URL,MainUI.WarFilmContinue);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.MainUI.URL,MainUI.MainUI);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.TopMainBar.URL,MainUI.TopMainBar);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.TopStreet.URL,MainUI.TopStreet);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.TopServer.URL,MainUI.TopServer);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.TopMoneyItem.URL,MainUI.TopMoneyItem);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.TopHeadIconMask.URL,MainUI.TopHeadIconMask);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.MenuBButton.URL,MainUI.MenuBButton);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.RightTopMenuBar.URL,MainUI.RightTopMenuBar);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.Submenu.URL,MainUI.Submenu);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.SubMenuBgArrow.URL,MainUI.SubMenuBgArrow);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.MenuSubButton.URL,MainUI.MenuSubButton);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.TimeMenuButton.URL,MainUI.TimeMenuButton);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.ButtonTime.URL,MainUI.ButtonTime);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.RightMiddleMenuBar.URL,MainUI.RightMiddleMenuBar);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.ExpectProgress1.URL,MainUI.ExpectProgress1);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.WarExpect.URL,MainUI.WarExpect);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.GuideTaskDialog.URL,MainUI.GuideTaskDialog);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.GuideTaskRole.URL,MainUI.GuideTaskRole);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.GuideFinishItem.URL,MainUI.GuideFinishItem);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.FxArrow.URL,MainUI.FxArrow);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.VisitMainTopUI.URL,MainUI.VisitMainTopUI);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.TaskDialogMsgPanel.URL,MainUI.TaskDialogMsgPanel);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.WarTipTopUI.URL,MainUI.WarTipTopUI);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.ZhuIcon.URL,MainUI.ZhuIcon);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.RightTopMenuPanel.URL,MainUI.RightTopMenuPanel);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.BottomMenuPanel.URL,MainUI.BottomMenuPanel);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.LeftBottomMenuBar.URL,MainUI.LeftBottomMenuBar);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.TimeMenuGoalButton.URL,MainUI.TimeMenuGoalButton);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.TopHeadIconMask.URL,MainUI.TopHeadIconMask);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.IconBtn.URL,MainUI.IconBtn);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.CooperationAdd.URL,MainUI.CooperationAdd);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.CooperationForMainUI.URL,MainUI.CooperationForMainUI);fairygui.UIObjectFactory.setPackageItemExtension(MainUI.ButtonTime2.URL,MainUI.ButtonTime2)};return MainUIBinder}());MainUI.MainUIBinder=MainUIBinder})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var LoginBinder=(function(){function LoginBinder(){}LoginBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Login.Main.URL,Login.Main);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_login.URL,Login.Btn_login);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_register.URL,Login.Btn_register);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_guest.URL,Login.Btn_guest);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_accountlist.URL,Login.Btn_accountlist);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_pwdeye.URL,Login.Btn_pwdeye);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_forgot.URL,Login.Btn_forgot);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_accoutsec.URL,Login.Btn_accoutsec);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_onRegister.URL,Login.Btn_onRegister);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_userAgreement.URL,Login.Btn_userAgreement);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_back.URL,Login.Btn_back);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_closeAgreement.URL,Login.Btn_closeAgreement);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_guestlogin.URL,Login.Btn_guestlogin);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_linkaccount.URL,Login.Btn_linkaccount);fairygui.UIObjectFactory.setPackageItemExtension(Login.AccountInput.URL,Login.AccountInput);fairygui.UIObjectFactory.setPackageItemExtension(Login.PasswordInput.URL,Login.PasswordInput);fairygui.UIObjectFactory.setPackageItemExtension(Login.Login.URL,Login.Login);fairygui.UIObjectFactory.setPackageItemExtension(Login.Register.URL,Login.Register);fairygui.UIObjectFactory.setPackageItemExtension(Login.Agreement.URL,Login.Agreement);fairygui.UIObjectFactory.setPackageItemExtension(Login.Version.URL,Login.Version);fairygui.UIObjectFactory.setPackageItemExtension(Login.CreatRole.URL,Login.CreatRole);fairygui.UIObjectFactory.setPackageItemExtension(Login.Btn_next.URL,Login.Btn_next);fairygui.UIObjectFactory.setPackageItemExtension(Login.NameInput.URL,Login.NameInput);fairygui.UIObjectFactory.setPackageItemExtension(Login.LoginGuest.URL,Login.LoginGuest);fairygui.UIObjectFactory.setPackageItemExtension(Login.AccountComboBox.URL,Login.AccountComboBox);fairygui.UIObjectFactory.setPackageItemExtension(Login.SexItemMale.URL,Login.SexItemMale);fairygui.UIObjectFactory.setPackageItemExtension(Login.SexItemFemale.URL,Login.SexItemFemale);fairygui.UIObjectFactory.setPackageItemExtension(Login.RandomButton.URL,Login.RandomButton);fairygui.UIObjectFactory.setPackageItemExtension(Login.InitialActor.URL,Login.InitialActor);fairygui.UIObjectFactory.setPackageItemExtension(Login.InitialActorItem.URL,Login.InitialActorItem);fairygui.UIObjectFactory.setPackageItemExtension(Login.InitialActorGroup.URL,Login.InitialActorGroup);fairygui.UIObjectFactory.setPackageItemExtension(Login.LoginWindowUI.URL,Login.LoginWindowUI);fairygui.UIObjectFactory.setPackageItemExtension(Login.PopupMenu.URL,Login.PopupMenu);fairygui.UIObjectFactory.setPackageItemExtension(Login.PopupMenu_item.URL,Login.PopupMenu_item);fairygui.UIObjectFactory.setPackageItemExtension(Login.CommonTape.URL,Login.CommonTape);fairygui.UIObjectFactory.setPackageItemExtension(Login.NewArtistItem.URL,Login.NewArtistItem);fairygui.UIObjectFactory.setPackageItemExtension(Login.NewArtistBg.URL,Login.NewArtistBg);fairygui.UIObjectFactory.setPackageItemExtension(Login.TestStatics.URL,Login.TestStatics)};return LoginBinder}());Login.LoginBinder=LoginBinder})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LevelPackage;(function(LevelPackage){var LevelPackageBinder=(function(){function LevelPackageBinder(){}LevelPackageBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(LevelPackage.CupGiftMain.URL,LevelPackage.CupGiftMain);fairygui.UIObjectFactory.setPackageItemExtension(LevelPackage.LevelPackageMain.URL,LevelPackage.LevelPackageMain);fairygui.UIObjectFactory.setPackageItemExtension(LevelPackage.Component1.URL,LevelPackage.Component1);fairygui.UIObjectFactory.setPackageItemExtension(LevelPackage.Tip.URL,LevelPackage.Tip)};return LevelPackageBinder}());LevelPackage.LevelPackageBinder=LevelPackageBinder})(LevelPackage=fgui.LevelPackage||(fgui.LevelPackage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LangZhCn;(function(LangZhCn){var LangZhCnBinder=(function(){function LangZhCnBinder(){}LangZhCnBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(LangZhCn.SkipBtn.URL,LangZhCn.SkipBtn)};return LangZhCnBinder}());LangZhCn.LangZhCnBinder=LangZhCnBinder})(LangZhCn=fgui.LangZhCn||(fgui.LangZhCn={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LangEn;(function(LangEn){var LangEnBinder=(function(){function LangEnBinder(){}LangEnBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(LangEn.SkipBtn.URL,LangEn.SkipBtn)};return LangEnBinder}());LangEn.LangEnBinder=LangEnBinder})(LangEn=fgui.LangEn||(fgui.LangEn={}))})(fgui||(fgui={}));var Games;(function(Games){var GuiPackageNames=(function(){function GuiPackageNames(){}GuiPackageNames.Activity="Activity";GuiPackageNames.ArtistDetail="ArtistDetail";GuiPackageNames.ArtistDic="ArtistDic";GuiPackageNames.Bag="Bag";GuiPackageNames.Building="Building";GuiPackageNames.Common="Common";GuiPackageNames.Cooperation="Cooperation";GuiPackageNames.FilmScreenAnim1="FilmScreenAnim1";GuiPackageNames.FilmScreenAnim10="FilmScreenAnim10";GuiPackageNames.FilmScreenAnim2="FilmScreenAnim2";GuiPackageNames.FilmScreenAnim3="FilmScreenAnim3";GuiPackageNames.FilmScreenAnim4="FilmScreenAnim4";GuiPackageNames.FilmScreenAnim5="FilmScreenAnim5";GuiPackageNames.FilmScreenAnim6="FilmScreenAnim6";GuiPackageNames.FilmScreenAnim7="FilmScreenAnim7";GuiPackageNames.FilmScreenAnim8="FilmScreenAnim8";GuiPackageNames.FilmScreenAnim9="FilmScreenAnim9";GuiPackageNames.FilmScreenCommon="FilmScreenCommon";GuiPackageNames.Fx="Fx";GuiPackageNames.GM="GM";GuiPackageNames.GoldExchange="GoldExchange";GuiPackageNames.Guide="Guide";GuiPackageNames.GuideComplete="GuideComplete";GuiPackageNames.LangEn="LangEn";GuiPackageNames.LangZhCn="LangZhCn";GuiPackageNames.LevelPackage="LevelPackage";GuiPackageNames.Login="Login";GuiPackageNames.MainUI="MainUI";GuiPackageNames.Manage="Manage";GuiPackageNames.Market="Market";GuiPackageNames.Mission="Mission";GuiPackageNames.Notice="Notice";GuiPackageNames.OpenAnima="OpenAnima";GuiPackageNames.Oscar="Oscar";GuiPackageNames.PfSkin="PfSkin";GuiPackageNames.PlayerInfo="PlayerInfo";GuiPackageNames.PopUp="PopUp";GuiPackageNames.Produce="Produce";GuiPackageNames.Rank="Rank";GuiPackageNames.Sound="Sound";GuiPackageNames.Street="Street";GuiPackageNames.System="System";GuiPackageNames.SystemSettings="SystemSettings";GuiPackageNames.WarContinue="WarContinue";GuiPackageNames.WarMovie="WarMovie";return GuiPackageNames}());Games.GuiPackageNames=GuiPackageNames})(Games||(Games={}));var fgui;(function(fgui){var GuideComplete;(function(GuideComplete){var GuideCompleteBinder=(function(){function GuideCompleteBinder(){}GuideCompleteBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(GuideComplete.GuideCompleteUI.URL,GuideComplete.GuideCompleteUI);fairygui.UIObjectFactory.setPackageItemExtension(GuideComplete.CompletePanel.URL,GuideComplete.CompletePanel)};return GuideCompleteBinder}());GuideComplete.GuideCompleteBinder=GuideCompleteBinder})(GuideComplete=fgui.GuideComplete||(fgui.GuideComplete={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideBinder=(function(){function GuideBinder(){}GuideBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Guide.GuideClickHand.URL,Guide.GuideClickHand);fairygui.UIObjectFactory.setPackageItemExtension(Guide.GuideMinDialog.URL,Guide.GuideMinDialog);fairygui.UIObjectFactory.setPackageItemExtension(Guide.GuideDialog.URL,Guide.GuideDialog);fairygui.UIObjectFactory.setPackageItemExtension(Guide.GuideTaskUI.URL,Guide.GuideTaskUI);fairygui.UIObjectFactory.setPackageItemExtension(Guide.GuideTaskRecordUI.URL,Guide.GuideTaskRecordUI);fairygui.UIObjectFactory.setPackageItemExtension(Guide.GuideTaskItem.URL,Guide.GuideTaskItem);fairygui.UIObjectFactory.setPackageItemExtension(Guide.GuideUI.URL,Guide.GuideUI);fairygui.UIObjectFactory.setPackageItemExtension(Guide.GuideLeftDialog.URL,Guide.GuideLeftDialog);fairygui.UIObjectFactory.setPackageItemExtension(Guide.GuideRightDialog.URL,Guide.GuideRightDialog);fairygui.UIObjectFactory.setPackageItemExtension(Guide.Hand.URL,Guide.Hand);fairygui.UIObjectFactory.setPackageItemExtension(Guide.GuideNpcIntroductionUI.URL,Guide.GuideNpcIntroductionUI);fairygui.UIObjectFactory.setPackageItemExtension(Guide.GuideTalkItem.URL,Guide.GuideTalkItem);fairygui.UIObjectFactory.setPackageItemExtension(Guide.RecordBtn.URL,Guide.RecordBtn);fairygui.UIObjectFactory.setPackageItemExtension(Guide.WarNewspaperHeadlines.URL,Guide.WarNewspaperHeadlines);fairygui.UIObjectFactory.setPackageItemExtension(Guide.GuideDialogMsgPanel.URL,Guide.GuideDialogMsgPanel);fairygui.UIObjectFactory.setPackageItemExtension(Guide.GuideDialogMinPanel.URL,Guide.GuideDialogMinPanel);fairygui.UIObjectFactory.setPackageItemExtension(Guide.ZhuIcon.URL,Guide.ZhuIcon);fairygui.UIObjectFactory.setPackageItemExtension(Guide.Text.URL,Guide.Text);fairygui.UIObjectFactory.setPackageItemExtension(Guide.Car.URL,Guide.Car);fairygui.UIObjectFactory.setPackageItemExtension(Guide.AnimaContainer.URL,Guide.AnimaContainer);fairygui.UIObjectFactory.setPackageItemExtension(Guide.SkipBtn.URL,Guide.SkipBtn)};return GuideBinder}());Guide.GuideBinder=GuideBinder})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));function fguiBinderAll(){fgui.Activity.ActivityBinder.bindAll();fgui.ArtistDetail.ArtistDetailBinder.bindAll();fgui.ArtistDic.ArtistDicBinder.bindAll();fgui.Bag.BagBinder.bindAll();fgui.Building.BuildingBinder.bindAll();fgui.Common.CommonBinder.bindAll();fgui.Cooperation.CooperationBinder.bindAll();fgui.FilmScreenAnim1.FilmScreenAnim1Binder.bindAll();fgui.FilmScreenAnim10.FilmScreenAnim10Binder.bindAll();fgui.FilmScreenAnim2.FilmScreenAnim2Binder.bindAll();fgui.FilmScreenAnim3.FilmScreenAnim3Binder.bindAll();fgui.FilmScreenAnim4.FilmScreenAnim4Binder.bindAll();fgui.FilmScreenAnim5.FilmScreenAnim5Binder.bindAll();fgui.FilmScreenAnim6.FilmScreenAnim6Binder.bindAll();fgui.FilmScreenAnim7.FilmScreenAnim7Binder.bindAll();fgui.FilmScreenAnim8.FilmScreenAnim8Binder.bindAll();fgui.FilmScreenAnim9.FilmScreenAnim9Binder.bindAll();fgui.Fx.FxBinder.bindAll();fgui.GM.GMBinder.bindAll();fgui.GoldExchange.GoldExchangeBinder.bindAll();fgui.Guide.GuideBinder.bindAll();fgui.GuideComplete.GuideCompleteBinder.bindAll();fgui.LangEn.LangEnBinder.bindAll();fgui.LangZhCn.LangZhCnBinder.bindAll();fgui.LevelPackage.LevelPackageBinder.bindAll();fgui.Login.LoginBinder.bindAll();fgui.MainUI.MainUIBinder.bindAll();fgui.Manage.ManageBinder.bindAll();fgui.Market.MarketBinder.bindAll();fgui.Mission.MissionBinder.bindAll();fgui.Notice.NoticeBinder.bindAll();fgui.OpenAnima.OpenAnimaBinder.bindAll();fgui.Oscar.OscarBinder.bindAll();fgui.PfSkin.PfSkinBinder.bindAll();fgui.PlayerInfo.PlayerInfoBinder.bindAll();fgui.PopUp.PopUpBinder.bindAll();fgui.Produce.ProduceBinder.bindAll();fgui.Rank.RankBinder.bindAll();fgui.Sound.SoundBinder.bindAll();fgui.Street.StreetBinder.bindAll();fgui.System.SystemBinder.bindAll();fgui.SystemSettings.SystemSettingsBinder.bindAll();fgui.WarContinue.WarContinueBinder.bindAll();fgui.WarMovie.WarMovieBinder.bindAll()}var fgui;(function(fgui){var GoldExchange;(function(GoldExchange){var GoldExchangeBinder=(function(){function GoldExchangeBinder(){}GoldExchangeBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(GoldExchange.GoldExchangeView.URL,GoldExchange.GoldExchangeView);fairygui.UIObjectFactory.setPackageItemExtension(GoldExchange.GoldExchangePanel.URL,GoldExchange.GoldExchangePanel)};return GoldExchangeBinder}());GoldExchange.GoldExchangeBinder=GoldExchangeBinder})(GoldExchange=fgui.GoldExchange||(fgui.GoldExchange={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMBinder=(function(){function GMBinder(){}GMBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(GM.GMMain.URL,GM.GMMain);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMMenuBar.URL,GM.GMMenuBar);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMPopupMenu_item.URL,GM.GMPopupMenu_item);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMPopupMenu.URL,GM.GMPopupMenu);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMPopupButton.URL,GM.GMPopupButton);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMSubMenuBar.URL,GM.GMSubMenuBar);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMDebugPage.URL,GM.GMDebugPage);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMAddPage.URL,GM.GMAddPage);fairygui.UIObjectFactory.setPackageItemExtension(GM.Checkbox.URL,GM.Checkbox);fairygui.UIObjectFactory.setPackageItemExtension(GM.TextInput.URL,GM.TextInput);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMAddItem.URL,GM.GMAddItem);fairygui.UIObjectFactory.setPackageItemExtension(GM.ButtonCorner.URL,GM.ButtonCorner);fairygui.UIObjectFactory.setPackageItemExtension(GM.NumberInput.URL,GM.NumberInput);fairygui.UIObjectFactory.setPackageItemExtension(GM.ButtonRect.URL,GM.ButtonRect);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMSelectServerPage.URL,GM.GMSelectServerPage);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMCmdPage.URL,GM.GMCmdPage);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMSubMenuRadioBar.URL,GM.GMSubMenuRadioBar);fairygui.UIObjectFactory.setPackageItemExtension(GM.TextArea.URL,GM.TextArea);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMCmdItem.URL,GM.GMCmdItem);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMLogItem.URL,GM.GMLogItem);fairygui.UIObjectFactory.setPackageItemExtension(GM.Tree.URL,GM.Tree);fairygui.UIObjectFactory.setPackageItemExtension(GM.TreeItem.URL,GM.TreeItem);fairygui.UIObjectFactory.setPackageItemExtension(GM.TreeItemCheckbox.URL,GM.TreeItemCheckbox);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMDisplayTreePage.URL,GM.GMDisplayTreePage);fairygui.UIObjectFactory.setPackageItemExtension(GM.TreeItemOpenCheckbox.URL,GM.TreeItemOpenCheckbox);fairygui.UIObjectFactory.setPackageItemExtension(GM.TreeList.URL,GM.TreeList);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMTimeLoopPage.URL,GM.GMTimeLoopPage);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMTimeLoopItem.URL,GM.GMTimeLoopItem);fairygui.UIObjectFactory.setPackageItemExtension(GM.GMTickPage.URL,GM.GMTickPage)};return GMBinder}());GM.GMBinder=GMBinder})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var FxBinder=(function(){function FxBinder(){}FxBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Fx.Starfly.URL,Fx.Starfly);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_fireworks_light01.URL,Fx.Effect_fireworks_light01);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Starshanshan.URL,Fx.Starshanshan);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Fireworks_spotlights0001.URL,Fx.Fireworks_spotlights0001);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Fireworks_spotlights0002.URL,Fx.Fireworks_spotlights0002);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Fireworks_spotlights0003.URL,Fx.Fireworks_spotlights0003);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Fireworks_spotlights0004.URL,Fx.Fireworks_spotlights0004);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_fireworks002.URL,Fx.Effect_fireworks002);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Fireworks_level_up.URL,Fx.Fireworks_level_up);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Fireworks_level_up_002.URL,Fx.Fireworks_level_up_002);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Particle.URL,Fx.Particle);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Particle_01.URL,Fx.Particle_01);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Particle_02.URL,Fx.Particle_02);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Particle_03.URL,Fx.Particle_03);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Particle_04.URL,Fx.Particle_04);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Smoke003.URL,Fx.Smoke003);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Beat01.URL,Fx.Beat01);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_Oscar_Choose02.URL,Fx.Effect_Oscar_Choose02);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_Oscar_particle.URL,Fx.Effect_Oscar_particle);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_Oscar_light02.URL,Fx.Effect_Oscar_light02);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_MovieTarget_Failed.URL,Fx.Effect_MovieTarget_Failed);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_Movie_Earnings.URL,Fx.Effect_Movie_Earnings);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_Oscar_particle2323.URL,Fx.Effect_Oscar_particle2323);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Particle_02333.URL,Fx.Particle_02333);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_Oscar_Choose01.URL,Fx.Effect_Oscar_Choose01);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_fireworks_golden.URL,Fx.Effect_fireworks_golden);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_fireworks_light03.URL,Fx.Effect_fireworks_light03);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_filming02.URL,Fx.Effect_filming02);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_upgrade_01.URL,Fx.Effect_upgrade_01);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_propagate_01.URL,Fx.Effect_propagate_01);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_pro002.URL,Fx.Effect_pro002);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_actor_skill_top_red.URL,Fx.Effect_actor_skill_top_red);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_actor_skill_top_blue.URL,Fx.Effect_actor_skill_top_blue);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_actor_skill_top_yellow.URL,Fx.Effect_actor_skill_top_yellow);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_actor_skill_top_gray.URL,Fx.Effect_actor_skill_top_gray);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Pro_drop.URL,Fx.Pro_drop);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_build02.URL,Fx.Effect_build02);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Halo.URL,Fx.Halo);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_actor_skill_top_win.URL,Fx.Effect_actor_skill_top_win);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_actor_skill_top_deuce.URL,Fx.Effect_actor_skill_top_deuce);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_actor_skill_top_lose.URL,Fx.Effect_actor_skill_top_lose);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_chapter.URL,Fx.Effect_chapter);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_story_unlock.URL,Fx.Effect_story_unlock);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Button_yellow_001.URL,Fx.Button_yellow_001);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_rotate_light.URL,Fx.Effect_rotate_light);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_num1.URL,Fx.Effect_num1);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_firework_blue55.URL,Fx.Effect_firework_blue55);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_actor01.URL,Fx.Effect_actor01);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_starfly0222.URL,Fx.Effect_starfly0222);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_starfly0333.URL,Fx.Effect_starfly0333);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_starfly0223.URL,Fx.Effect_starfly0223);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_starfly0224.URL,Fx.Effect_starfly0224);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_goldappear_01.URL,Fx.Effect_goldappear_01);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Starboom_blue.URL,Fx.Starboom_blue);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_fireworks_blue.URL,Fx.Effect_fireworks_blue);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_bulbs_001.URL,Fx.Effect_bulbs_001);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_FxPicRollLogin.URL,Fx.Effect_FxPicRollLogin);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Car_smoke.URL,Fx.Car_smoke);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Car_smoke02.URL,Fx.Car_smoke02);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_flower02.URL,Fx.Effect_flower02);fairygui.UIObjectFactory.setPackageItemExtension(Fx.ManagerOrderNeedItem.URL,Fx.ManagerOrderNeedItem);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_propagate_02.URL,Fx.Effect_propagate_02);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_propagate_03.URL,Fx.Effect_propagate_03);fairygui.UIObjectFactory.setPackageItemExtension(Fx.OscarAnim_022.URL,Fx.OscarAnim_022);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_show_stagelight.URL,Fx.Effect_show_stagelight);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_countdown.URL,Fx.Effect_countdown);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_countdown_light.URL,Fx.Effect_countdown_light);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Find_artist.URL,Fx.Find_artist);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Level_allneed_cameralight.URL,Fx.Level_allneed_cameralight);fairygui.UIObjectFactory.setPackageItemExtension(Fx.TrailerStar1.URL,Fx.TrailerStar1);fairygui.UIObjectFactory.setPackageItemExtension(Fx.TrailerStar2.URL,Fx.TrailerStar2);fairygui.UIObjectFactory.setPackageItemExtension(Fx.TrailerStar3.URL,Fx.TrailerStar3);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_bluelight_01.URL,Fx.Effect_bluelight_01);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Starboom_allneed_revise.URL,Fx.Starboom_allneed_revise);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Fireworks_spotlights0005.URL,Fx.Fireworks_spotlights0005);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_boom_stars.URL,Fx.Effect_boom_stars);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_2333.URL,Fx.Effect_2333);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_simple_firework02.URL,Fx.Effect_simple_firework02);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_taillight.URL,Fx.Effect_taillight);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Pro_drop33.URL,Fx.Pro_drop33);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_propagate_02_text.URL,Fx.Effect_propagate_02_text);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_light_300.URL,Fx.Effect_light_300);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_fireworks_showcase.URL,Fx.Effect_fireworks_showcase);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_show_0077.URL,Fx.Effect_show_0077);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_lights_ascar.URL,Fx.Effect_lights_ascar);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Icon_allneed.URL,Fx.Icon_allneed);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_light_ticket.URL,Fx.Effect_light_ticket);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_cart.URL,Fx.Effect_cart);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_boxgolden_01.URL,Fx.Effect_boxgolden_01);fairygui.UIObjectFactory.setPackageItemExtension(Fx.Effect_fireworks_showcase002.URL,Fx.Effect_fireworks_showcase002)};return FxBinder}());Fx.FxBinder=FxBinder})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim9;(function(FilmScreenAnim9){var FilmScreenAnim9Binder=(function(){function FilmScreenAnim9Binder(){}FilmScreenAnim9Binder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(FilmScreenAnim9.FilmScreenAnim9.URL,FilmScreenAnim9.FilmScreenAnim9)};return FilmScreenAnim9Binder}());FilmScreenAnim9.FilmScreenAnim9Binder=FilmScreenAnim9Binder})(FilmScreenAnim9=fgui.FilmScreenAnim9||(fgui.FilmScreenAnim9={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim8;(function(FilmScreenAnim8){var FilmScreenAnim8Binder=(function(){function FilmScreenAnim8Binder(){}FilmScreenAnim8Binder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(FilmScreenAnim8.FilmScreenAnim8.URL,FilmScreenAnim8.FilmScreenAnim8)};return FilmScreenAnim8Binder}());FilmScreenAnim8.FilmScreenAnim8Binder=FilmScreenAnim8Binder})(FilmScreenAnim8=fgui.FilmScreenAnim8||(fgui.FilmScreenAnim8={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim7;(function(FilmScreenAnim7){var FilmScreenAnim7Binder=(function(){function FilmScreenAnim7Binder(){}FilmScreenAnim7Binder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(FilmScreenAnim7.FilmScreenAnim7.URL,FilmScreenAnim7.FilmScreenAnim7)};return FilmScreenAnim7Binder}());FilmScreenAnim7.FilmScreenAnim7Binder=FilmScreenAnim7Binder})(FilmScreenAnim7=fgui.FilmScreenAnim7||(fgui.FilmScreenAnim7={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim6;(function(FilmScreenAnim6){var FilmScreenAnim6Binder=(function(){function FilmScreenAnim6Binder(){}FilmScreenAnim6Binder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(FilmScreenAnim6.FilmScreenAnim6.URL,FilmScreenAnim6.FilmScreenAnim6)};return FilmScreenAnim6Binder}());FilmScreenAnim6.FilmScreenAnim6Binder=FilmScreenAnim6Binder})(FilmScreenAnim6=fgui.FilmScreenAnim6||(fgui.FilmScreenAnim6={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim5;(function(FilmScreenAnim5){var FilmScreenAnim5Binder=(function(){function FilmScreenAnim5Binder(){}FilmScreenAnim5Binder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(FilmScreenAnim5.FilmScreenAnim5.URL,FilmScreenAnim5.FilmScreenAnim5)};return FilmScreenAnim5Binder}());FilmScreenAnim5.FilmScreenAnim5Binder=FilmScreenAnim5Binder})(FilmScreenAnim5=fgui.FilmScreenAnim5||(fgui.FilmScreenAnim5={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim4;(function(FilmScreenAnim4){var FilmScreenAnim4Binder=(function(){function FilmScreenAnim4Binder(){}FilmScreenAnim4Binder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(FilmScreenAnim4.FilmScreenAnim4.URL,FilmScreenAnim4.FilmScreenAnim4)};return FilmScreenAnim4Binder}());FilmScreenAnim4.FilmScreenAnim4Binder=FilmScreenAnim4Binder})(FilmScreenAnim4=fgui.FilmScreenAnim4||(fgui.FilmScreenAnim4={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim3;(function(FilmScreenAnim3){var FilmScreenAnim3Binder=(function(){function FilmScreenAnim3Binder(){}FilmScreenAnim3Binder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(FilmScreenAnim3.FilmScreenAnim3.URL,FilmScreenAnim3.FilmScreenAnim3)};return FilmScreenAnim3Binder}());FilmScreenAnim3.FilmScreenAnim3Binder=FilmScreenAnim3Binder})(FilmScreenAnim3=fgui.FilmScreenAnim3||(fgui.FilmScreenAnim3={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim2;(function(FilmScreenAnim2){var FilmScreenAnim2Binder=(function(){function FilmScreenAnim2Binder(){}FilmScreenAnim2Binder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(FilmScreenAnim2.FilmScreenAnim2.URL,FilmScreenAnim2.FilmScreenAnim2)};return FilmScreenAnim2Binder}());FilmScreenAnim2.FilmScreenAnim2Binder=FilmScreenAnim2Binder})(FilmScreenAnim2=fgui.FilmScreenAnim2||(fgui.FilmScreenAnim2={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim10;(function(FilmScreenAnim10){var FilmScreenAnim10Binder=(function(){function FilmScreenAnim10Binder(){}FilmScreenAnim10Binder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(FilmScreenAnim10.FilmScreenAnim10.URL,FilmScreenAnim10.FilmScreenAnim10)};return FilmScreenAnim10Binder}());FilmScreenAnim10.FilmScreenAnim10Binder=FilmScreenAnim10Binder})(FilmScreenAnim10=fgui.FilmScreenAnim10||(fgui.FilmScreenAnim10={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim1;(function(FilmScreenAnim1){var FilmScreenAnim1Binder=(function(){function FilmScreenAnim1Binder(){}FilmScreenAnim1Binder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(FilmScreenAnim1.FilmScreenAnim1.URL,FilmScreenAnim1.FilmScreenAnim1)};return FilmScreenAnim1Binder}());FilmScreenAnim1.FilmScreenAnim1Binder=FilmScreenAnim1Binder})(FilmScreenAnim1=fgui.FilmScreenAnim1||(fgui.FilmScreenAnim1={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationBinder=(function(){function CooperationBinder(){}CooperationBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationMainPanel.URL,Cooperation.CooperationMainPanel);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationAchieved.URL,Cooperation.CooperationAchieved);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationEnd.URL,Cooperation.CooperationEnd);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationApply.URL,Cooperation.CooperationApply);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationRealtionship.URL,Cooperation.CooperationRealtionship);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationRewardItem.URL,Cooperation.CooperationRewardItem);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationReward.URL,Cooperation.CooperationReward);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationTotalBar.URL,Cooperation.CooperationTotalBar);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationRewardBox.URL,Cooperation.CooperationRewardBox);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationItemBtn.URL,Cooperation.CooperationItemBtn);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationItemBtn2.URL,Cooperation.CooperationItemBtn2);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationItemBtn3.URL,Cooperation.CooperationItemBtn3);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationMain.URL,Cooperation.CooperationMain);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.CooperationReward2.URL,Cooperation.CooperationReward2);fairygui.UIObjectFactory.setPackageItemExtension(Cooperation.TopHeadIconMaskApply.URL,Cooperation.TopHeadIconMaskApply)};return CooperationBinder}());Cooperation.CooperationBinder=CooperationBinder})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonBinder=(function(){function CommonBinder(){}CommonBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Common.ItemCellView.URL,Common.ItemCellView);fairygui.UIObjectFactory.setPackageItemExtension(Common.CloseBtn.URL,Common.CloseBtn);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonDialogUI.URL,Common.CommonDialogUI);fairygui.UIObjectFactory.setPackageItemExtension(Common.SystemSetNumMessage.URL,Common.SystemSetNumMessage);fairygui.UIObjectFactory.setPackageItemExtension(Common.Slider.URL,Common.Slider);fairygui.UIObjectFactory.setPackageItemExtension(Common.SystemGetItemMessage.URL,Common.SystemGetItemMessage);fairygui.UIObjectFactory.setPackageItemExtension(Common.GetWayAlert.URL,Common.GetWayAlert);fairygui.UIObjectFactory.setPackageItemExtension(Common.GetWayItem.URL,Common.GetWayItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.SystemAddFansMessage.URL,Common.SystemAddFansMessage);fairygui.UIObjectFactory.setPackageItemExtension(Common.SystemLevelUpMessage.URL,Common.SystemLevelUpMessage);fairygui.UIObjectFactory.setPackageItemExtension(Common.AssetItem.URL,Common.AssetItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.BtnBlueClose.URL,Common.BtnBlueClose);fairygui.UIObjectFactory.setPackageItemExtension(Common.BtnItemBuy.URL,Common.BtnItemBuy);fairygui.UIObjectFactory.setPackageItemExtension(Common.SystemAlertAwards.URL,Common.SystemAlertAwards);fairygui.UIObjectFactory.setPackageItemExtension(Common.AssetItemVertical.URL,Common.AssetItemVertical);fairygui.UIObjectFactory.setPackageItemExtension(Common.AssetItemList.URL,Common.AssetItemList);fairygui.UIObjectFactory.setPackageItemExtension(Common.HeadIconItem.URL,Common.HeadIconItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.TalkBox.URL,Common.TalkBox);fairygui.UIObjectFactory.setPackageItemExtension(Common.ProgressBar.URL,Common.ProgressBar);fairygui.UIObjectFactory.setPackageItemExtension(Common.ItemIcon50x50.URL,Common.ItemIcon50x50);fairygui.UIObjectFactory.setPackageItemExtension(Common.ProgressTotalBar.URL,Common.ProgressTotalBar);fairygui.UIObjectFactory.setPackageItemExtension(Common.ProgressReward.URL,Common.ProgressReward);fairygui.UIObjectFactory.setPackageItemExtension(Common.ProgressYellowBar.URL,Common.ProgressYellowBar);fairygui.UIObjectFactory.setPackageItemExtension(Common.TipReward.URL,Common.TipReward);fairygui.UIObjectFactory.setPackageItemExtension(Common.PopUpSmall.URL,Common.PopUpSmall);fairygui.UIObjectFactory.setPackageItemExtension(Common.PopUpBig.URL,Common.PopUpBig);fairygui.UIObjectFactory.setPackageItemExtension(Common.CloseBtn.URL,Common.CloseBtn);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonYellowSmall.URL,Common.ButtonYellowSmall);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonBlueSmall.URL,Common.ButtonBlueSmall);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonPurpleSmall.URL,Common.ButtonPurpleSmall);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonPurpleBig.URL,Common.ButtonPurpleBig);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonBlueBig.URL,Common.ButtonBlueBig);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonYellowBig.URL,Common.ButtonYellowBig);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonTipBlue.URL,Common.ButtonTipBlue);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonTipYellow.URL,Common.ButtonTipYellow);fairygui.UIObjectFactory.setPackageItemExtension(Common.ProgressBarRed.URL,Common.ProgressBarRed);fairygui.UIObjectFactory.setPackageItemExtension(Common.ProgressBarBlue.URL,Common.ProgressBarBlue);fairygui.UIObjectFactory.setPackageItemExtension(Common.SliderRed_grip.URL,Common.SliderRed_grip);fairygui.UIObjectFactory.setPackageItemExtension(Common.PopUp1056.URL,Common.PopUp1056);fairygui.UIObjectFactory.setPackageItemExtension(Common.PopUp406.URL,Common.PopUp406);fairygui.UIObjectFactory.setPackageItemExtension(Common.PopUp446.URL,Common.PopUp446);fairygui.UIObjectFactory.setPackageItemExtension(Common.PopUp916.URL,Common.PopUp916);fairygui.UIObjectFactory.setPackageItemExtension(Common.PopUpMsg.URL,Common.PopUpMsg);fairygui.UIObjectFactory.setPackageItemExtension(Common.AddBtn.URL,Common.AddBtn);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonButton.URL,Common.CommonButton);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonBlue.URL,Common.ButtonBlue);fairygui.UIObjectFactory.setPackageItemExtension(Common.UpgradeBtn.URL,Common.UpgradeBtn);fairygui.UIObjectFactory.setPackageItemExtension(Common.AvatarShadow.URL,Common.AvatarShadow);fairygui.UIObjectFactory.setPackageItemExtension(Common.EmptyBtn.URL,Common.EmptyBtn);fairygui.UIObjectFactory.setPackageItemExtension(Common.AddBtn2.URL,Common.AddBtn2);fairygui.UIObjectFactory.setPackageItemExtension(Common.AddBtn3.URL,Common.AddBtn3);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonYellowIconBig.URL,Common.ButtonYellowIconBig);fairygui.UIObjectFactory.setPackageItemExtension(Common.TopAsset.URL,Common.TopAsset);fairygui.UIObjectFactory.setPackageItemExtension(Common.TopAssetItem.URL,Common.TopAssetItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.SkillEffectUI.URL,Common.SkillEffectUI);fairygui.UIObjectFactory.setPackageItemExtension(Common.SystemAlertGift.URL,Common.SystemAlertGift);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonItem.URL,Common.CommonItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.SystemGoOtherFunction.URL,Common.SystemGoOtherFunction);fairygui.UIObjectFactory.setPackageItemExtension(Common.FunctionItem.URL,Common.FunctionItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.StoryItem.URL,Common.StoryItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.ItemView.URL,Common.ItemView);fairygui.UIObjectFactory.setPackageItemExtension(Common.AssetItemBig.URL,Common.AssetItemBig);fairygui.UIObjectFactory.setPackageItemExtension(Common.ProgressBlue.URL,Common.ProgressBlue);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonProgressBlue.URL,Common.CommonProgressBlue);fairygui.UIObjectFactory.setPackageItemExtension(Common.RoomContainer.URL,Common.RoomContainer);fairygui.UIObjectFactory.setPackageItemExtension(Common.SystemAlertTextIconMessage.URL,Common.SystemAlertTextIconMessage);fairygui.UIObjectFactory.setPackageItemExtension(Common.CheckBox2.URL,Common.CheckBox2);fairygui.UIObjectFactory.setPackageItemExtension(Common.DialogMsgPanel.URL,Common.DialogMsgPanel);fairygui.UIObjectFactory.setPackageItemExtension(Common.HeadItem100.URL,Common.HeadItem100);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonSmallItem.URL,Common.CommonSmallItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonCost.URL,Common.ButtonCost);fairygui.UIObjectFactory.setPackageItemExtension(Common.Red.URL,Common.Red);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonDoubleLabel.URL,Common.ButtonDoubleLabel);fairygui.UIObjectFactory.setPackageItemExtension(Common.HeadItemIcon.URL,Common.HeadItemIcon);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonAssetItem_little.URL,Common.CommonAssetItem_little);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonViewUI.URL,Common.CommonViewUI);fairygui.UIObjectFactory.setPackageItemExtension(Common.MovieIcon_little.URL,Common.MovieIcon_little);fairygui.UIObjectFactory.setPackageItemExtension(Common.BtnHelp.URL,Common.BtnHelp);fairygui.UIObjectFactory.setPackageItemExtension(Common.RankPlayerInfoPanel.URL,Common.RankPlayerInfoPanel);fairygui.UIObjectFactory.setPackageItemExtension(Common.RankPlayerInfo.URL,Common.RankPlayerInfo);fairygui.UIObjectFactory.setPackageItemExtension(Common.RankRenamePanel.URL,Common.RankRenamePanel);fairygui.UIObjectFactory.setPackageItemExtension(Common.PlayerMovieInfo.URL,Common.PlayerMovieInfo);fairygui.UIObjectFactory.setPackageItemExtension(Common.RankMovieInfoPanel.URL,Common.RankMovieInfoPanel);fairygui.UIObjectFactory.setPackageItemExtension(Common.MovieInfoItem.URL,Common.MovieInfoItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.MovieEvaluationIcon.URL,Common.MovieEvaluationIcon);fairygui.UIObjectFactory.setPackageItemExtension(Common.ProperText.URL,Common.ProperText);fairygui.UIObjectFactory.setPackageItemExtension(Common.MovieIcon.URL,Common.MovieIcon);fairygui.UIObjectFactory.setPackageItemExtension(Common.ActorIcon.URL,Common.ActorIcon);fairygui.UIObjectFactory.setPackageItemExtension(Common.Star.URL,Common.Star);fairygui.UIObjectFactory.setPackageItemExtension(Common.TextScroll.URL,Common.TextScroll);fairygui.UIObjectFactory.setPackageItemExtension(Common.Btn_editor_name.URL,Common.Btn_editor_name);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonYellowAdd.URL,Common.ButtonYellowAdd);fairygui.UIObjectFactory.setPackageItemExtension(Common.BtnNext.URL,Common.BtnNext);fairygui.UIObjectFactory.setPackageItemExtension(Common.BtnLeft.URL,Common.BtnLeft);fairygui.UIObjectFactory.setPackageItemExtension(Common.BtnRight.URL,Common.BtnRight);fairygui.UIObjectFactory.setPackageItemExtension(Common.TextInput.URL,Common.TextInput);fairygui.UIObjectFactory.setPackageItemExtension(Common.OscarDanmu.URL,Common.OscarDanmu);fairygui.UIObjectFactory.setPackageItemExtension(Common.OscarDanmuWay.URL,Common.OscarDanmuWay);fairygui.UIObjectFactory.setPackageItemExtension(Common.OscarDanmuContent.URL,Common.OscarDanmuContent);fairygui.UIObjectFactory.setPackageItemExtension(Common.Marquee.URL,Common.Marquee);fairygui.UIObjectFactory.setPackageItemExtension(Common.ActorLvBreaktUI.URL,Common.ActorLvBreaktUI);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonAssetItem.URL,Common.CommonAssetItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonTitleAssetCloseUI.URL,Common.CommonTitleAssetCloseUI);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonTitleAssetUI.URL,Common.CommonTitleAssetUI);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonTitlePanelUI.URL,Common.CommonTitlePanelUI);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonCostPurple.URL,Common.ButtonCostPurple);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonCostYellow.URL,Common.ButtonCostYellow);fairygui.UIObjectFactory.setPackageItemExtension(Common.ButtonTips.URL,Common.ButtonTips);fairygui.UIObjectFactory.setPackageItemExtension(Common.ActorSelectItem.URL,Common.ActorSelectItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.StreetLevelUp.URL,Common.StreetLevelUp);fairygui.UIObjectFactory.setPackageItemExtension(Common.ProgressBarYellow2.URL,Common.ProgressBarYellow2);fairygui.UIObjectFactory.setPackageItemExtension(Common.BtnCongra.URL,Common.BtnCongra);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonTape.URL,Common.CommonTape);fairygui.UIObjectFactory.setPackageItemExtension(Common.ProgressBarYellow.URL,Common.ProgressBarYellow);fairygui.UIObjectFactory.setPackageItemExtension(Common.AssetItem_little.URL,Common.AssetItem_little);fairygui.UIObjectFactory.setPackageItemExtension(Common.ProgressBarYellow_small.URL,Common.ProgressBarYellow_small);fairygui.UIObjectFactory.setPackageItemExtension(Common.ItemInfo.URL,Common.ItemInfo);fairygui.UIObjectFactory.setPackageItemExtension(Common.PactIcon_44.URL,Common.PactIcon_44);fairygui.UIObjectFactory.setPackageItemExtension(Common.StreetLevelUpItem.URL,Common.StreetLevelUpItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.TalkBox1.URL,Common.TalkBox1);fairygui.UIObjectFactory.setPackageItemExtension(Common.PactIcon_80.URL,Common.PactIcon_80);fairygui.UIObjectFactory.setPackageItemExtension(Common.RawAssetItem.URL,Common.RawAssetItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonItem_70.URL,Common.CommonItem_70);fairygui.UIObjectFactory.setPackageItemExtension(Common.SplashAssetItem.URL,Common.SplashAssetItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.Touxiang.URL,Common.Touxiang);fairygui.UIObjectFactory.setPackageItemExtension(Common.ItemLockTip.URL,Common.ItemLockTip);fairygui.UIObjectFactory.setPackageItemExtension(Common.ActorBody.URL,Common.ActorBody);fairygui.UIObjectFactory.setPackageItemExtension(Common.SystemItemGroup.URL,Common.SystemItemGroup);fairygui.UIObjectFactory.setPackageItemExtension(Common.GetAssetFxPanel.URL,Common.GetAssetFxPanel);fairygui.UIObjectFactory.setPackageItemExtension(Common.SkillEffectCompent.URL,Common.SkillEffectCompent);fairygui.UIObjectFactory.setPackageItemExtension(Common.ActorLvBreakCompent.URL,Common.ActorLvBreakCompent);fairygui.UIObjectFactory.setPackageItemExtension(Common.ItemIcon.URL,Common.ItemIcon);fairygui.UIObjectFactory.setPackageItemExtension(Common.CommonBlackTitleCloseUI.URL,Common.CommonBlackTitleCloseUI);fairygui.UIObjectFactory.setPackageItemExtension(Common.Touxiang120.URL,Common.Touxiang120);fairygui.UIObjectFactory.setPackageItemExtension(Common.Touxiang160.URL,Common.Touxiang160);fairygui.UIObjectFactory.setPackageItemExtension(Common.Touxiang44.URL,Common.Touxiang44);fairygui.UIObjectFactory.setPackageItemExtension(Common.Touxiang80.URL,Common.Touxiang80);fairygui.UIObjectFactory.setPackageItemExtension(Common.WarActor120.URL,Common.WarActor120);fairygui.UIObjectFactory.setPackageItemExtension(Common.WarActor160.URL,Common.WarActor160);fairygui.UIObjectFactory.setPackageItemExtension(Common.WarActor44.URL,Common.WarActor44);fairygui.UIObjectFactory.setPackageItemExtension(Common.WarActor80.URL,Common.WarActor80);fairygui.UIObjectFactory.setPackageItemExtension(Common.UnlockPanel.URL,Common.UnlockPanel);fairygui.UIObjectFactory.setPackageItemExtension(Common.AttrUpView.URL,Common.AttrUpView);fairygui.UIObjectFactory.setPackageItemExtension(Common.LevelUpLimitUI.URL,Common.LevelUpLimitUI);fairygui.UIObjectFactory.setPackageItemExtension(Common.IconLabelItem.URL,Common.IconLabelItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.ModalBG2.URL,Common.ModalBG2);fairygui.UIObjectFactory.setPackageItemExtension(Common.ArtistLessonItem.URL,Common.ArtistLessonItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.PropInfoItem.URL,Common.PropInfoItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.Dialog.URL,Common.Dialog);fairygui.UIObjectFactory.setPackageItemExtension(Common.CheckBoxWithTitle.URL,Common.CheckBoxWithTitle);fairygui.UIObjectFactory.setPackageItemExtension(Common.StarItem.URL,Common.StarItem);fairygui.UIObjectFactory.setPackageItemExtension(Common.SkillCell.URL,Common.SkillCell);fairygui.UIObjectFactory.setPackageItemExtension(Common.SystemSelectItemMessage.URL,Common.SystemSelectItemMessage);fairygui.UIObjectFactory.setPackageItemExtension(Common.SelectItem.URL,Common.SelectItem)};return CommonBinder}());Common.CommonBinder=CommonBinder})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildingBinder=(function(){function BuildingBinder(){}BuildingBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Building.Main.URL,Building.Main);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildRoom.URL,Building.BuildRoom);fairygui.UIObjectFactory.setPackageItemExtension(Building.Btn_buildRoom.URL,Building.Btn_buildRoom);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildRoomUpgrade.URL,Building.BuildRoomUpgrade);fairygui.UIObjectFactory.setPackageItemExtension(Building.LevelupProp.URL,Building.LevelupProp);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildRoomList.URL,Building.BuildRoomList);fairygui.UIObjectFactory.setPackageItemExtension(Building.Btn_roomTip.URL,Building.Btn_roomTip);fairygui.UIObjectFactory.setPackageItemExtension(Building.RoomInfoItem.URL,Building.RoomInfoItem);fairygui.UIObjectFactory.setPackageItemExtension(Building.RoomInfoLockItem.URL,Building.RoomInfoLockItem);fairygui.UIObjectFactory.setPackageItemExtension(Building.Btn_buildFloor.URL,Building.Btn_buildFloor);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildRoomUpgradeSuccess.URL,Building.BuildRoomUpgradeSuccess);fairygui.UIObjectFactory.setPackageItemExtension(Building.AssetItem.URL,Building.AssetItem);fairygui.UIObjectFactory.setPackageItemExtension(Building.AvatarDisplayObject.URL,Building.AvatarDisplayObject);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildRoomTips.URL,Building.BuildRoomTips);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildScene.URL,Building.BuildScene);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildScene1.URL,Building.BuildScene1);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildScene13.URL,Building.BuildScene13);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildScenePart.URL,Building.BuildScenePart);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildListItemIcon.URL,Building.BuildListItemIcon);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildUpgradePropitem.URL,Building.BuildUpgradePropitem);fairygui.UIObjectFactory.setPackageItemExtension(Building.LevelupNextProp.URL,Building.LevelupNextProp);fairygui.UIObjectFactory.setPackageItemExtension(Building.Btn_add.URL,Building.Btn_add);fairygui.UIObjectFactory.setPackageItemExtension(Building.BtnNpcTips.URL,Building.BtnNpcTips);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildScene3.URL,Building.BuildScene3);fairygui.UIObjectFactory.setPackageItemExtension(Building.TouchComponent.URL,Building.TouchComponent);fairygui.UIObjectFactory.setPackageItemExtension(Building.UpgradeSuccessGroup.URL,Building.UpgradeSuccessGroup);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildSceneFilmEnter.URL,Building.BuildSceneFilmEnter);fairygui.UIObjectFactory.setPackageItemExtension(Building.FilmDoorPoint.URL,Building.FilmDoorPoint);fairygui.UIObjectFactory.setPackageItemExtension(Building.CinemaScreen.URL,Building.CinemaScreen);fairygui.UIObjectFactory.setPackageItemExtension(Building.CinemaChair.URL,Building.CinemaChair);fairygui.UIObjectFactory.setPackageItemExtension(Building.ExperciseSeat.URL,Building.ExperciseSeat);fairygui.UIObjectFactory.setPackageItemExtension(Building.ActorNpcSeat.URL,Building.ActorNpcSeat);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildCinemaScreen.URL,Building.BuildCinemaScreen);fairygui.UIObjectFactory.setPackageItemExtension(Building.FinanceNpcSeat.URL,Building.FinanceNpcSeat);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildScene12.URL,Building.BuildScene12);fairygui.UIObjectFactory.setPackageItemExtension(Building.BuildSceneUI.URL,Building.BuildSceneUI)};return BuildingBinder}());Building.BuildingBinder=BuildingBinder})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var BagBinder=(function(){function BagBinder(){}BagBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Bag.BagItemInfo.URL,Bag.BagItemInfo);fairygui.UIObjectFactory.setPackageItemExtension(Bag.BagMainPanel.URL,Bag.BagMainPanel);fairygui.UIObjectFactory.setPackageItemExtension(Bag.SystemSelectActorPanel.URL,Bag.SystemSelectActorPanel);fairygui.UIObjectFactory.setPackageItemExtension(Bag.ActorItem.URL,Bag.ActorItem);fairygui.UIObjectFactory.setPackageItemExtension(Bag.PactItem.URL,Bag.PactItem);fairygui.UIObjectFactory.setPackageItemExtension(Bag.PropItem.URL,Bag.PropItem);fairygui.UIObjectFactory.setPackageItemExtension(Bag.BtnTab.URL,Bag.BtnTab);fairygui.UIObjectFactory.setPackageItemExtension(Bag.ActorBg.URL,Bag.ActorBg);fairygui.UIObjectFactory.setPackageItemExtension(Bag.MarketLabAsset.URL,Bag.MarketLabAsset)};return BagBinder}());Bag.BagBinder=BagBinder})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var ArtistDicBinder=(function(){function ArtistDicBinder(){}ArtistDicBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(ArtistDic.ArtistDicUI.URL,ArtistDic.ArtistDicUI);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDic.ArtistShow.URL,ArtistDic.ArtistShow);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDic.ActorBg.URL,ArtistDic.ActorBg);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDic.ActorIcon.URL,ArtistDic.ActorIcon);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDic.StarTitle.URL,ArtistDic.StarTitle);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDic.ArtistList.URL,ArtistDic.ArtistList);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDic.SelectItem.URL,ArtistDic.SelectItem);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDic.SelectItem2.URL,ArtistDic.SelectItem2);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDic.SelectItem3.URL,ArtistDic.SelectItem3);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDic.Star.URL,ArtistDic.Star)};return ArtistDicBinder}());ArtistDic.ArtistDicBinder=ArtistDicBinder})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistDetailBinder=(function(){function ArtistDetailBinder(){}ArtistDetailBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ArtistDetailUI.URL,ArtistDetail.ArtistDetailUI);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ArtistBasePanel.URL,ArtistDetail.ArtistBasePanel);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ArtistExpertPanel.URL,ArtistDetail.ArtistExpertPanel);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ArtistAssetPanel.URL,ArtistDetail.ArtistAssetPanel);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ArtistDetailContent.URL,ArtistDetail.ArtistDetailContent);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ArtistSkillPanel.URL,ArtistDetail.ArtistSkillPanel);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.RenameBtn.URL,ArtistDetail.RenameBtn);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.CollectBtn.URL,ArtistDetail.CollectBtn);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ActorAttrItem.URL,ArtistDetail.ActorAttrItem);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ArtistSkillItem.URL,ArtistDetail.ArtistSkillItem);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.AssetLoyaltyBar.URL,ArtistDetail.AssetLoyaltyBar);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ArtistAssetItem.URL,ArtistDetail.ArtistAssetItem);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ArtistAssistantPanel.URL,ArtistDetail.ArtistAssistantPanel);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ArtistTag.URL,ArtistDetail.ArtistTag);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ArtistTagTip.URL,ArtistDetail.ArtistTagTip);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ActionItem.URL,ArtistDetail.ActionItem);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ArtistExpertItem1.URL,ArtistDetail.ArtistExpertItem1);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.ArtistExpertItem2.URL,ArtistDetail.ArtistExpertItem2);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.AttrLabelTitle.URL,ArtistDetail.AttrLabelTitle);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.AssistantUI.URL,ArtistDetail.AssistantUI);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.AttrLabelLongTitle.URL,ArtistDetail.AttrLabelLongTitle);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.AssistantTopPanel.URL,ArtistDetail.AssistantTopPanel);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.AssistantBottomPanel.URL,ArtistDetail.AssistantBottomPanel);fairygui.UIObjectFactory.setPackageItemExtension(ArtistDetail.AssistantCenterPanel.URL,ArtistDetail.AssistantCenterPanel)};return ArtistDetailBinder}());ArtistDetail.ArtistDetailBinder=ArtistDetailBinder})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var ActivityBinder=(function(){function ActivityBinder(){}ActivityBinder.bindAll=function(){fairygui.UIObjectFactory.setPackageItemExtension(Activity.ActivityMain.URL,Activity.ActivityMain);fairygui.UIObjectFactory.setPackageItemExtension(Activity.ActivityTopItemBtn.URL,Activity.ActivityTopItemBtn);fairygui.UIObjectFactory.setPackageItemExtension(Activity.ActivitySeven.URL,Activity.ActivitySeven);fairygui.UIObjectFactory.setPackageItemExtension(Activity.SevenItem.URL,Activity.SevenItem);fairygui.UIObjectFactory.setPackageItemExtension(Activity.SignPanel.URL,Activity.SignPanel);fairygui.UIObjectFactory.setPackageItemExtension(Activity.SignItem.URL,Activity.SignItem);fairygui.UIObjectFactory.setPackageItemExtension(Activity.SecretaryButton.URL,Activity.SecretaryButton);fairygui.UIObjectFactory.setPackageItemExtension(Activity.SecretaryCommon.URL,Activity.SecretaryCommon);fairygui.UIObjectFactory.setPackageItemExtension(Activity.SecretaryGiftButton.URL,Activity.SecretaryGiftButton);fairygui.UIObjectFactory.setPackageItemExtension(Activity.SecretaryGiftPanel.URL,Activity.SecretaryGiftPanel);fairygui.UIObjectFactory.setPackageItemExtension(Activity.SecretaryPanel.URL,Activity.SecretaryPanel);fairygui.UIObjectFactory.setPackageItemExtension(Activity.SecretaryWelfareMsgItem.URL,Activity.SecretaryWelfareMsgItem);fairygui.UIObjectFactory.setPackageItemExtension(Activity.WelfareMain.URL,Activity.WelfareMain);fairygui.UIObjectFactory.setPackageItemExtension(Activity.LicenseReq.URL,Activity.LicenseReq);fairygui.UIObjectFactory.setPackageItemExtension(Activity.LoadPanel.URL,Activity.LoadPanel);fairygui.UIObjectFactory.setPackageItemExtension(Activity.SignItem2.URL,Activity.SignItem2);fairygui.UIObjectFactory.setPackageItemExtension(Activity.Dialog.URL,Activity.Dialog);fairygui.UIObjectFactory.setPackageItemExtension(Activity.EmptyPanel.URL,Activity.EmptyPanel)};return ActivityBinder}());Activity.ActivityBinder=ActivityBinder})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var Games;(function(Games){var TEXT=(function(){function TEXT(){}TEXT.cannotRecharge="游客不能充值";TEXT.cannotRechargeNoIos="只支持ios内购";TEXT.rechargeError="充值失败，请稍候重试";TEXT.systemTip="系统提示";TEXT.LangSelectMsg="语言需要重启游戏才有效!";TEXT.FunNoOpen="此功能暂未开放，敬请期待！";TEXT.ButtonSelect="选择";TEXT.ButtonOk="确定";TEXT.ButtonCannel="取消";TEXT.ButtonYes="是";TEXT.ButtonNo="否";TEXT.Complete="完成";TEXT.Disable="没有开放";TEXT.Lock="没解锁";TEXT.TitleTip="提示";TEXT.ErorNoInitProto="没有初始化网络";TEXT.ErorRequestServerList="请求服务器列表失败";TEXT.ErorAccountFrozen="账号被冻结";TEXT.ErorAccountDropped="账号被停用";TEXT.TipEnterRoleName="输入你的名称";TEXT.ErrorNameEmpty="名字不能是空的";TEXT.ErrorContentEmpty="内容不能是空的";TEXT.ErrorNameUsed="名称已经被使用";TEXT.ErrorHttpSendFail="[Error] 发送请求失败";TEXT.HttpTimeOut="网络超时! 当前设置的超时时间是{0}";TEXT.AlertTextBuyActor="是否花费{0}{1}增加艺人数量";TEXT.AlertTextScountActor="是否花费{0}{1} 探查艺人？";TEXT.ToastTextItemNotEnough="{0}数量不足";TEXT.ToastTextItemNotEnough2="数量不足，需要{0} {1}";TEXT.AfterToScountActor="{0}后探查次数加1";TEXT.AfterToClearNoseTimes="星探今天已下班，{0}后即可在派他出去。\n也可消耗星探卡即刻派出";TEXT.ScountActor="探查";TEXT.ActorMax="艺人招募数量最大";TEXT.HideActorMax="雪藏艺人数量达到最大,请升级公司等级或艺人教室等级";TEXT.DisHideAllActor="无法雪藏全部艺人";TEXT.DisHideActorInUse="无法雪藏正在使用的艺人";TEXT.SureHideActor="是否确认雪藏{0}";TEXT.ActorWillLeave="这些艺人将于{0}后离开";TEXT.ActorWillLeave1="艺人剩余离开时间：";TEXT.SureResetActors="是否重新探查艺人？";TEXT.CostToResetActors="探查次数已用完是否花费星探卡";TEXT.ResetNose="重新探查";TEXT.TalentText="星探";TEXT.HiddenText="雪藏";TEXT.TalentTimes="探查次数";TEXT.UnlockSkill="艺人等级达到{0}级";TEXT.AlertNoseActor="是否花费{0}{1}招募";TEXT.SrcActorName="原艺名：{0}";TEXT.Lv="{0}级";TEXT.LVDot="LV.{0}";TEXT.CurNextLv="等级：{0}/[color=#488fc1]{1}[/color]";TEXT.UpgradeNeedGold="升级所需金币：{0}";TEXT.Upgrade="升级";TEXT.RemainTimes="剩余次数";TEXT.CanScountActor="可招募：";TEXT.CanHideActorNums="可雪藏{0}/{1}";TEXT.ActorTrain="培养";TEXT.ActorTabBase="基础";TEXT.ActorTabSkill="技能";TEXT.ActorTabAsset="资产";TEXT.ActorTabExport="擅长";TEXT.ActorTabAgent="助理";TEXT.PopularValue="人气值";TEXT.RewardTitle="奖励";TEXT.HideActor="雪藏艺人";TEXT.HideActorDesc="被雪藏的艺人无法工作，您可以在这里重新启用艺人";TEXT.RenameForActor="给{0}起一个艺名吧？";TEXT.Rename="改名";TEXT.Sure="确定";TEXT.Num="{0}个";TEXT.RenameDefault="改名";TEXT.He="他";TEXT.She="她";TEXT.NewActorJoin="新的艺人加入公司";TEXT.NoseSuccess="招募成功";TEXT.SameActorJoin="已有同名艺人";TEXT.SureUseDefaultName="确认使用默认名字？";TEXT.RenameAnGoodName="给{0}取个好名字吧";TEXT.NameDisNull="名字不能为空";TEXT.Input4toNumChar="输入4到{0}个字符";TEXT.NoseActor="招募";TEXT.AliveAcotr="是否确认花费{0}{1}复活该艺人";TEXT.Hour="小时";TEXT.Minute="分";TEXT.Second="秒";TEXT.ActorRecoverToDealAsset="已转化为艺人合同和艺人资产";TEXT.NoForzen="[没有雪藏的艺人]";TEXT.ChooseSendAssetNum="选择要赠送的资产数量";TEXT.GetAssetToGetProp="每得到{0}个即可";TEXT.LoyaltyText="忠诚度";TEXT.NeedLoyalty="需要忠诚度{0}级";TEXT.LvUpMax="等级达到最大";TEXT.UpLvLimit="提高等级上限";TEXT.LvUpTo="{0} 等级上限 {1} → {2}";TEXT.Send="赠送";TEXT.ExpertStory="擅长的剧本";TEXT.ExpertCharacter="擅长的角色";TEXT.ExpertType="擅长的类型";TEXT.SendAssetMax="赠送数量达到上限";TEXT.LvMax="等级已满";TEXT.SkillLvMaxTip="技能等级已满，无法继续升级";TEXT.ExpCosts="经验消耗";TEXT.SkillExpNotEnough="技能经验不足";TEXT.GetRandomTrainAttr="随机获取两种属性提升";TEXT.CompanyTodayTrain="公司今日培养次数：";TEXT.ActorCanUseTrain="艺人可用培训次数:";TEXT.ActorAutoVisit="自动接待";TEXT.ActorBreakToLv="该艺人等级限制突破到{0}";TEXT.CompanyTodayTrainMax="公司今日培养次数达到上限";TEXT.ActorTrainMax="艺人培养次数达到上限";TEXT.TrainCompleteRightNow="立即完成培养";TEXT.HaveAgentCanComplete="拥有终身秘书可立即完成";TEXT.HaveAgentCanAutoRead="拥有终身秘书可自动批阅";TEXT.AutoRead="自动批阅";TEXT.HaveAgentCanAutoPublicize="拥有终身秘书可自动宣传";TEXT.TrainOpen="艺人培养需先占领{0}";TEXT.SkillOpen="艺人技能需要公司等级{0}";TEXT.AssetOpen="艺人资产需要公司等级{0}";TEXT.AssistantOpen="助理需要艺人等级{0}";TEXT.CompanySignAcotr="{0}签约了新艺人";TEXT.ActorUpgradeAssetCount="艺人资产上限增加{0}";TEXT.Use="使用";TEXT.AssetSendMax="赠送数量已达上限";TEXT.AssetSendMaxToExpend="该艺人无法收下更多礼物了，可以通过提升艺人等级或使用忠诚卡增加上限?";TEXT.AssetExpend="增加赠送上限";TEXT.AssetChooseCardNum="选择需要使用忠诚卡的数量";TEXT.AssetArtistUpgrade="艺人升级";TEXT.AssetUseCard="使用忠诚卡";TEXT.ActorSkillExp="技能经验:{0}";TEXT.age="年龄";TEXT.sex="性别";TEXT.country="国籍";TEXT.type="类型";TEXT.OldName="原艺名：";TEXT.Level="等级:";TEXT.RenameTip="老板，要给我重新起个艺名吗?";TEXT.DiamondTrain="钻石培养";TEXT.DiamondMustBeMax="(钻石培养必然获得最大值)";TEXT.PropertyTipMsg="在仓库可分解高星资产，或者用低星资产合成。";TEXT.ClickAnyWhereToClose="点击任意位置关闭界面";TEXT.Year="年";TEXT.Month="月";TEXT.Day="日";TEXT.MaxLevel="满级";TEXT.SecondBuyArtistMsg="您已经拥有此艺人了，是花费{0}{1}再次招募？(会转换得到该艺人的合同和资产)";TEXT.RelieveArtist="启用";TEXT.FilmProficiencyTitle="艺人熟练度展示";TEXT.FilmSelectActorTitle="艺人选择";TEXT.FilmCostViewTitle="薪酬统计";TEXT.PleaseSelectActor="Click assign artist.";TEXT.ActorForFilmTitle="艺人对剧本和角色的发挥";TEXT.FilmTypeSelectTitle="请选择本次拍摄的类型";TEXT.CurMarketTip="当前市场情况";TEXT.FilmNoticeTitle="通告选择";TEXT.FilmSQViewTitle="杀青属性对比";TEXT.CinemaSelectionTitle="院线选择";TEXT.FeedBackTitle="媒体评分";TEXT.AudienceReputationTitle="观众口碑";TEXT.SysTipTitle="系统提示";TEXT.AllTempTip="不能全部使用临时演员";TEXT.RefrushStory="刷新剧本";TEXT.RefrushStoryTip="是否花费{0}{1}刷新剧本？<br>今日还可刷新{2}次";TEXT.RefrushStoryTipOver="刷新次数已用完";TEXT.NoStoryList="未发现任何剧本，请稍候再试";TEXT.ChangeStoryName="修改剧本名称";TEXT.StoryNameLimit="剧本名称{0}个字符";TEXT.SelectTypeNone="请选择类型";TEXT.NoticeScore="{0}分";TEXT.CostFree="free";TEXT.SYNTH="SYNTH";TEXT.Play="Play:";TEXT.NoAttAdd="不加属性";TEXT.NameLV="{0}\nLV.{1}";TEXT.FilmActor="饰：{0}";TEXT.FilmProficiency="熟练度{0}级： + {1}";TEXT.FilmAverage="同档电影平均 {0}";TEXT.sexMan="男";TEXT.sexWomen="女";TEXT.sexChild="儿童";TEXT.TotalFilm="总票房：{0}";TEXT.filmOverMarketTip1="当前市场喜好导致 {0}% 票房提升，有超过 {1}% 的观众非常喜欢这个故事！";TEXT.filmOverMarketTip2="有 {0}% 还认为 {1} 电影非常适合此故事！";TEXT.filmOverMarketTip3="There're more";TEXT.filmOverMarketTip4="Now.";TEXT.filmJiesuanWin="盈利：\n+ {0}%";TEXT.filmJiesuanFail="亏损：\n- {0}%";TEXT.filmJiesuanRewardTip="通过拍摄这部电影，我们获得以下奖励：";TEXT.filmOverTip="收益已结束";TEXT.guanzhuduValue="关注度：{0}";TEXT.guanzhuduOpenTip="关注度{0}级解锁";TEXT.continueTip="可能获得以下物品：";TEXT.TimeLeftTip="剩余时间：";TEXT.EndingTitle="正在运营的电影已满";TEXT.EndingTip="最多只能有5部持续收益的电影";TEXT.promotionBtn="提升";TEXT.gainEvaluationOver="最终收益：{0}";TEXT.gainEvaluation="收益评价：{0}/分钟";TEXT.GZMax="已经提升到最大等级";TEXT.CinemaSignTip="请先签约院线！";TEXT.NineToFiftyTip="为保证比赛公平，21点55分开始将无法拍摄电影！请各位导演周知，以免造成不必要的损失！";TEXT.NineToFiftyFiveTip="很抱歉，为保证比赛公平，21点55分后将无法进行电影拍摄";TEXT.GoldFilmActorTalk=["金本爆发时的人物喊话1金本爆发时的人物喊话1金本爆发时的人物喊话1","金本爆发时的人物喊话2金本爆发时的人物喊话2金本爆发时的人物喊话2","金本爆发时的人物喊话3金本爆发时的人物喊话3金本爆发时的人物喊话3"];TEXT.FilmLongTime="{0}分钟";TEXT.FilmKouBei="观众口碑：{0}";TEXT.ActivityTitle="活动大厅";TEXT.WelfTitle="福利大厅";TEXT.NoGetReward="未登录";TEXT.GetReward="领取";TEXT.Secretary_GetWelfare="领取福利";TEXT.Secretary_DailyGiftTitle="每日礼包";TEXT.Secretary_NeedBuySecretary="你需要购买小秘书";TEXT.Secretary_GetRewardDailySecretary="礼包每日购买一次";TEXT.Secretary_AlreadyPurchased="已购买";TEXT.Buy="购买";TEXT.SureBuy="确认购买";TEXT.Buyed="已购买";TEXT.CooperateTaskType10="拍摄一部电影";TEXT.CooperateTaskType11="\n类型：{0}";TEXT.CooperateTaskType12="\n媒体评分：{0}分";TEXT.CooperateTaskType13="\n口碑：{0}分";TEXT.CooperateTaskType14="\n剧本：{0}星";TEXT.CooperateTaskType15="\n收益：{0}";TEXT.CooperateTaskType20="完成{0}次会议、公务或粉丝探班";TEXT.CooperateTaskType30="完成{0}次订单";TEXT.CooperateTaskType40="领取{0}个{1}";TEXT.CooperateTaskType50="领取{0}个任意周边产品";TEXT.CooperateTaskType60="领取{0}次城市收益";TEXT.CooperateTaskType70="完成{0}次艺人培养";TEXT.CooperateTaskType80="消费{0}钻石";TEXT.CooperateTaskType90="完成{0}次星探搜索";TEXT.CooperateTaskType100="完成{0}次剧本搜罗";TEXT.CooperateTaskProgress="\n（{0}/{1}）";TEXT.CooperateReceiveBtn="接受";TEXT.CooperateassistBtn="协助";TEXT.CooperategetBtn="领取";TEXT.CooperateassitingText="协助中";TEXT.CooperateHaveTaskText="你已经接受任务了，请完成后再次领取任务";TEXT.CooperationApplyTitle="合作请求";TEXT.CooperationremindTip="每周最多能与3家不同公司合作";TEXT.CooperationrefuseBtn="拒绝";TEXT.CooperationreceiveBtn="同意";TEXT.CooperationApplyTip="希望与你签署合作协议，是否同意?";TEXT.CooperationEndTitle="解除合作";TEXT.CooperationEndTip1="是否解除合作关系？";TEXT.CooperationEndTip2="注意：每周只能和三家不同的公司进行合作。";TEXT.CooperationMainPanelTitle="公司合作";TEXT.Cooperationtext1="首次建立合作关系可得：";TEXT.Cooperationtext2="与熟人之间建立合作：";TEXT.Cooperationtext3="公开寻找合作公司：";TEXT.Cooperationremind="首次账号查找建立合作提示";TEXT.Cooperationintro="填写对方ID";TEXT.CooperationinviteBtn1="发出邀请";TEXT.CooperationinviteBtn2="公开邀请";TEXT.CooperationdisinviteBtn="取消邀请";TEXT.CooperationMainPanelTip1="请输入对方用户id";TEXT.CooperationMainPanelTip2="请稍候再次输入";TEXT.CooperationMainPanelID="本地玩家ID： {0}";TEXT.CooperationRealtionshipTitle="合作任务";TEXT.CooperationRealtionshipTip="星级越高奖励越好！";TEXT.CooperationRealtionshiprelieveBtn="解除";TEXT.CooperationGiveRewardDollar="赠送美元";TEXT.CooperationGiveRewardGold="赠送金币";TEXT.Floor="第{0}层";TEXT.BuildFloor="扩建第{0}层";TEXT.BuildUpgrade="升级至 {0}级";TEXT.BuildUpgrade_UBB="[color=#66ff66]升级至{0}级[/color]";TEXT.CompanyLevel="LV.{0}解锁";TEXT.BuildEffect="建筑作用：";TEXT.BuildLevelEffect="升级效果：";TEXT.BuildLevelup="升级";TEXT.BuildConfirm="确认";TEXT.BuildLevel="等级{0}";TEXT.BuildFloorAlert="确认要扩建{0}层吗？";TEXT.BuildTitle="建造";TEXT.ActorExperciseExpedite="加速";TEXT.BuildFloorFailLevel="需要公司等级达到：{0}";TEXT.BuildFloorFailCity="需要占领城市：{0}. {1}";TEXT.BuildActorRoomTalentNpc="星探";TEXT.BuildActorRoomTrainerNpc="培训师";TEXT.TopFloor="Top Floor";TEXT.LincenceMax="拍摄许可证达到上限";TEXT.ArtistDicUITitle="艺人名录";TEXT.ArtistDicUInotHired="未获得此艺人";TEXT.ArtistDicUIStar="星级";TEXT.ArtistDicUICountry="国籍";TEXT.ArtistDicUISex="性别";TEXT.ArtistDicUIAge="年龄类型";TEXT.ArtistDicUIShow="表演类型";TEXT.ArtistDicUIDefName="原艺名：";TEXT.ArtistDicUIHowHave="如何签约该艺人？";TEXT.ArtistDicUIPinglun="请输入留言内容";TEXT.ArtistDicUINoActor="没有符合筛选条件的艺人";TEXT.ArtistDicUINoPinglun="暂时没有玩家留言";TEXT.ArtistDicUIPinglunTitle="留言薄：";TEXT.PlayerUpgradeGetAward="Recieve";TEXT.PlayerSelfSignature="Edit Self-Introduction";TEXT.PlayerSignature="This person didn't leave a messege, just like a closed book~";TEXT.ItemHave="拥有：";TEXT.PlayerInfoTab0="HOME";TEXT.PlayerInfoTab1="CAREER";TEXT.PlayerInfoTab2="TROPHY";TEXT.PlayerInfoTab3="FILMS";TEXT.PlayerInfoTab4="ACTORS";TEXT.PlayerInfoTabHome_Rank0="建筑层数";TEXT.PlayerInfoTabHome_Rank1="艺人数量";TEXT.PlayerInfoTabHome_Rank2="好友数量";TEXT.PlayerInfoTabHome_Rank3="市场占领";TEXT.PlayerInfoTabHome_Rank4="宝物数量";TEXT.PlayerInfoTabHome_Rank5="仓库容量";TEXT.PlayerInfoTabCareer_Rank0="拍摄过的电影数";TEXT.PlayerInfoTabCareer_Rank1="上映电影总数";TEXT.PlayerInfoTabCareer_Rank2="得到的票房总数";TEXT.PlayerInfoTabCareer_Rank3="完成的订单数量";TEXT.PlayerInfoTabCareer_Rank4="解锁过的最高档生产线";TEXT.PlayerInfoTabCareer_Rank5="完成公务次数";TEXT.PlayerInfoTabCareer_Rank6="会议达成协议次数";TEXT.PlayerInfoTabCareer_Rank7="粉丝成功拜访次数";TEXT.PlayerInfoTabCareer_Rank8="得到过多少次分组第一";TEXT.PlayerInfoTabTrophy_Rank00="最佳男演员得奖次数";TEXT.PlayerInfoTabTrophy_Rank11="最佳女演员得奖次数";TEXT.PlayerInfoTabTrophy_Rank22="最佳表演电影得奖次数";TEXT.PlayerInfoTabTrophy_Rank3="最佳艺术电影得奖次数";TEXT.PlayerInfoTabTrophy_Rank4="最受欢迎电影得奖次数";TEXT.PlayerInfoTabTrophy_Rank5="铁齿轮奖得奖次数";TEXT.PlayerInfoTabTrophy_Rank6="金羊驼奖得奖次数";TEXT.PlayerInfoTabTrophy_Rank7="火星人奖得奖次数";TEXT.PlayerInfoTabTrophy_Rank8="金月球奖得奖次数";TEXT.PlayerInfoTabFilm_Rank0="大众口碑最高的电影";TEXT.PlayerInfoTabFilm_Rank1="票房最高的电影";TEXT.PlayerInfoTabFilm_Rank2="拍摄过的恐怖片数量";TEXT.PlayerInfoTabFilm_Rank3="拍摄过的悬疑片数量";TEXT.PlayerInfoTabFilm_Rank4="拍摄过的歌舞片数量";TEXT.PlayerInfoTabFilm_Rank5="拍摄过的喜剧片数量";TEXT.PlayerInfoTabFilm_Rank6="拍摄过的动画片数量";TEXT.PlayerInfoTabFilm_Rank7="拍摄过的叙事片数量";TEXT.PlayerInfoTabFilm_Rank8="拍摄过的爱情片数量";TEXT.PlayerInfoTabFilm_Rank9="拍摄过的动作片数量";TEXT.PlayerInfoTabActor_Rank0="票房号召力最强的艺人";TEXT.PlayerInfoTabActor_Rank1="得奖最多的艺人";TEXT.PlayerInfoTabActor_Rank1Value="{0}次";TEXT.PlayerInfoTabActor_Rank2="拍摄电影最多的艺人";TEXT.PlayerInfoTabActor_Rank2Value="{0}部";TEXT.PlayerInfoTabActor_Rank3="最偏爱的艺人";TEXT.PlayerInfoTabActor_Rank3Value="赠送{0}个";TEXT.PlayerInfoTabActor_Rank4="最重视的艺人";TEXT.PlayerInfoTabActor_Rank4Value="培养{0}次";TEXT.PlayerInfoTabActor_Rank5="最信赖的艺人";TEXT.PlayerInfoTabActor_Rank5Value="技能共{0}级";TEXT.StoryFindTime="搜罗次数:";TEXT.StoryTitle="剧本";TEXT.StoryCollect="集齐剧本";TEXT.StoryFind="收罗剧本";TEXT.StoryCompleteAllChallenge="完成所有挑战";TEXT.StoryAchieve="剧本成就";TEXT.ZuiGaoPiaoFang="最高票房";TEXT.StoryDesc1="用本组剧本拍摄电影时{0}";TEXT.StoryDesc2="{0}属性增加{1}%";TEXT.StoryAchieveTarget1="剧本拍摄{0}/5次";TEXT.StoryAchieveTarget2="媒体评分8分或以上{0}/3次";TEXT.StoryAchieveTarget3="票房档次大卖或以上{0}/5次";TEXT.StorySou="搜罗";TEXT.StoryRewardTitle="奖励";TEXT.StoryRemainNotEnough="剩余次数不足";TEXT.StoryContentEmpty="内容不能是空的";TEXT.StoryContentToMax="内容长度不得超过50";TEXT.StoryContentSpace="内容开头结尾不能有空格";TEXT.StoryContentBlockWord="内容中有屏蔽字符";TEXT.SendMsg="发送";TEXT.StoryInputPromptText="发表我的影评";TEXT.StoryAchievementDesc="成就达成后拍摄时艺人可能会状态爆发";TEXT.StoryAchievementTitle="成就目标";TEXT.StoryGetReward="领取奖励";TEXT.CantGetReward="未达到领取条件";TEXT.GetAllReward="恭喜您已获得全部礼包";TEXT.NextRewardTip="Unlock at LV.{0}";TEXT.GiftTipTitle="LV.{0} Gift";TEXT.ProduceTime="每次生产时间：{0}";TEXT.ProduceGrade="第{0}档";TEXT.ProduceLevel="等级{0}";TEXT.ProduceSkillType1="队列数量";TEXT.ProduceSkillType2="存储上限";TEXT.ProduceSkillType3="时长减免";TEXT.ProduceSkillType4="每次产出";TEXT.ProduceActorTitle="请选择艺人";TEXT.ProduceOffActorTitle="正在进行[{0}]的艺人";TEXT.ProduceQuickBtnName="一键生产";TEXT.ProduceQuickAwardBtnName="一键领取";TEXT.ProduceStart="开始生产";TEXT.ProduceItemStore="库存";TEXT.ProduceUnlock="解锁";TEXT.ProduceActorBusy="忙碌";TEXT.ProduceActorFree="空闲";TEXT.ProduceOffActor="取消派遣";TEXT.OrderNeedTitle="满足粉丝会的需求会让他们更加沉迷";TEXT.OrderNeed="订单需求";TEXT.OrderCompleteReward="完成报酬";TEXT.OrderExtraReward="额外效果";TEXT.OrderNoneOrder="暂无更多订单";TEXT.OrderNewOrderWay="拍电影、市场宣传，都可能获得新订单";TEXT.OrderSortOrder="排队订单：{0}";TEXT.OrderCooperationComfirmTitle="资助";TEXT.OrderTheBoxHasPut="该箱子已装箱完毕";TEXT.OrderSureDeleteOrder="我们要拒绝这个订单吗？需要过一段时间才能收到新的订单哦~~（已装箱资源会被扣除）";TEXT.OrderRefuseOrder="拒绝订单";TEXT.OrderComplete="完成";TEXT.OrderNeedCompleteBox="需要先完成装箱";TEXT.OrderRewardTitle="获得奖励";TEXT.OrderArealyGotReward="已经领取过奖励";TEXT.OrderNeedCompleteBoxNum="需要完成订单{0}个";TEXT.OrderCooperation="合作者";TEXT.VisitNextFansNum="待接见粉丝数量：{0}/{1}";TEXT.VisitStartBtnOk="嗯，去找";TEXT.VisitAutoReceive="自动接待";TEXT.VisitFansTomeetActor="老板，有粉丝想见我司艺人。";TEXT.VisitNextVisitActor="接待室还有{0}名粉丝，是否现在接待";TEXT.VisitNextFans="下一个粉丝";TEXT.VisitHaveOtherFansWaiting="当前已经有粉丝正在等待";TEXT.VisitDonotHaveFans="当前没有粉丝";TEXT.VisitFansWantMeet="粉丝想见";TEXT.BusinessRemainRead="待批阅：{0}/{1}";TEXT.BusinessSendName="发件人：{0}";TEXT.BusinessNextPage="下一页";TEXT.BusinessReadNewMsg="读取新任务";TEXT.BusinessDonotHaveBusiness="没有公务";TEXT.BusinessGet="获得";TEXT.MeetingNextNum="待接见会议数量{0}/{1}";TEXT.MeetingInMeeting="在会议中";TEXT.MeetingVisitCompany="老板{0}的谈判代表已等候多时了。";TEXT.MeetingStartOkBtnText="嗯，开会";TEXT.MeetingStartCancelBtnText="拒绝";TEXT.MeetingMantianYaojia="漫天要价";TEXT.MeetingTaojiahuanjia="讨价还价";TEXT.MeetingChengjiao="成交";TEXT.MeetingChengjiaoSure="成交确认";TEXT.MeetingHuijue="回绝";TEXT.MeetingBye="再见";TEXT.MeetingGameStop="停";TEXT.MeetingRewardTitle="奖励";TEXT.MeetingNext="{0}的会议代表已在门外等候多时，是否马上接见？";TEXT.MeetingNextMeet="下一个会议";TEXT.MeetingNeedAddPiece="不太满意需要加价";TEXT.MettingTitle="会议室";TEXT.TaskArrangement="今天的日程安排";TEXT.TaskState="完成度: [color=#488fc1]{0}[/color]";TEXT.ActorExperciser="训练师";TEXT.ActorExperciserStart="点击加号选择艺人进行训练";TEXT.ActorExperciserOn="完成训练剩余时间";TEXT.ActorExperciseMaxLine="训练队列已达到上限";TEXT.ActorExperciseUnlock="开始新的训练需要";TEXT.ActorExperciseQuick="加速训练需要";TEXT.ActorExperciceCompleteDesc="点击完成训练";TEXT.ActorExperciceKey="艺人经验";TEXT.MissionPanelTipMsg="日程任务提示信息";TEXT.NoticeTitle="提示";TEXT.NoticeServerClose="服务器开始维护， 请退出游戏";TEXT.RankText="第{0}名";TEXT.MarketOccupe="已占领城市{0}/{1}";TEXT.MarketChangeHomeContent="只能在经营总部所在城市派驻形象大使，是否更换总部";TEXT.MarketChangeHomeTitle="更换总部所在城市";TEXT.MarketAddFansTip="得益于公司的市场推广";TEXT.MainTaskAddFansTip="得益于主线任务奖励";TEXT.MarketAddFansInfo="{0}粉丝数 +{1}";TEXT.MarketLvUpNeedFans="公司还需要{0}个粉丝即可升级";TEXT.MarketShare="市场占有率";TEXT.MarketReward="获得奖励";TEXT.MarketActorPromot="提升{0}";TEXT.MarketNoSecretary="您还没有购买终身秘书，是否立即购买";TEXT.MarketPublicityInfo="根据调查，当地观众比较青睐{0}若能找到相关艺人来进行市场代言，将会事半功倍！";TEXT.MarketSelectActor="请选择代言人在 {0} 宣传";TEXT.MarketSelectActorForCity="请选择 {0} 的形象大使";TEXT.MarketMaxAsset="最多存储{0}小时收益";TEXT.MarketItemLockTitle="未开始生产";TEXT.MarketItemLockTip="需要派遣形象大使：{0}";TEXT.MarketHomeActorLock="解锁第5位形象大使，需要升到{0}";TEXT.MarketCityTip="全部街区都完成宣传后可占领当地市场并获得长期收益";TEXT.StreetCinemaInfo="{0}家电影院（{1}）";TEXT.StreetTitle="{1}的第{0}组";TEXT.OscarTitle="{1},{0}";TEXT.StreetCongratulateSelf="不能祝贺自己";TEXT.BagSelectNum="选择数量";TEXT.BagNeedMoreItem="物品不足，还需要{0}个才能合成";TEXT.BagSelectCompoundNum="选择要合成的数量";TEXT.BagCompound="物品合成";TEXT.BagSelectGive="选择赠送对象";TEXT.BagSelectGiveNum="选择要赠送的数量";TEXT.BagGive="物品赠送";TEXT.BagSelectResolveNum="选择要拆分的数量";TEXT.BagResolve="物品拆分";TEXT.BagSelectSaleNum="选择要出售的数量";TEXT.BagSale="物品出售";TEXT.BagSelectUseNum="选择要使用的数量";TEXT.BagUse="物品使用";TEXT.BagSelectActor="请选择一名演员";TEXT.BagSelectItem="请选择一件物品";TEXT.ShopGive="送";TEXT.ShopDayLimit="今日限购";TEXT.ShopWeekLimit="每周限购";TEXT.ShopRegistLimit="永久限购";TEXT.RechargeTitle="充值";TEXT.RechargeTipsMsg="充值界面提示信息 提示信息 提示信息";TEXT.ShopAvailable="有效期{0}天";TEXT.AfterTime="{0}后可以购买";TEXT.OscarName="奥斯卡";TEXT.OscarRewardNameDesc_6="今日最佳：";TEXT.OscarRewardNameDesc_9="今日票房达到大卖：";TEXT.OscarRewardValueDesc_7="总票房第{0}名[color=#e3b121]（{1}）[/color]";TEXT.OscarRewardValueDesc_8="今日拍摄电影达到{0}部";TEXT.OscarRewardValueDesc_9="{0}部";TEXT.OscarRewardInfoDesc_6="票房第{0}名（{1}）";TEXT.OscarRewardInfoDesc_7="超过{0}%的{1}玩家（共{2}人）";TEXT.OscarRewardNoMovie="未拍摄电影";TEXT.OscarDanmuLong="弹幕规定长度为【4-100】";TEXT.OscarDanmuSpace="弹幕开头和结尾不能有空格";TEXT.OscarDanmuBlockword="弹幕中有非法字符";TEXT.OscarMovie="我的《{0}》拍摄完成";TEXT.OscarInputTip="Enter a barrage";TEXT.Today="今天";TEXT.Yestoday="昨天";TEXT.SystemGoOtherFunction_Title="提示";TEXT.SystemGoOtherFunction_Desc_1="技能经验不足，可以安排艺人前往训练室训练已获得技能经验";TEXT.SystemGoOtherFunction_Desc_2="星探次数还在恢复或者今日次数已用完，可以使用星探卡立刻进行一次星探（使用后当前为招募的艺人会离开）";TEXT.SystemGoOtherFunction_Go_1="前往训练";TEXT.SystemGoOtherFunction_Go_2="星探卡";TEXT.SecretaryRemainAutoReadNum="自动批阅次数{0}";TEXT.SecretaryRemainAutoVisitNum="自动接待次数{0}";TEXT.SecretaryRemainAutoPublicizeNum="自动宣传次数{0}";TEXT.SecretaryForeverAgent="终身秘书";TEXT.SystemDisAllowHaveNumber="不能含有数字";TEXT.SystemDisAllowHaveStartLastNumber="开头结尾不能含有数字";TEXT.StateText="完成度:";TEXT.SexTip="请选择你喜欢的艺人";TEXT.LanguageSettings="语言";TEXT.FeedBackSettings="反馈";TEXT.SwitchAccount="切换账号";TEXT.SwitchLanguage="切换语言";TEXT.SureaSwitchAccount="是否确认切换账号？";TEXT.MailTitle="邮件";TEXT.DeleteRead="删除已读";TEXT.ToReader="致玩家：";TEXT.ReawrdMsg="奖励内容：";TEXT.TaskGetReward="点击领取奖励";TEXT.Log="记录";TEXT.Get="领取";TEXT.Go="前往";TEXT.GoldExchangeTitle="金币兑换";TEXT.GoldExchangeRemainNum="剩余可兑换次数：{0}";TEXT.GoldExchangeOne="兑换1次";TEXT.GoldExchangeTen="兑换10次";TEXT.GoldExchangeTimesNoEnough="兑换次数不足";TEXT.GoldExchangeBuildingTitle="金币兑换";TEXT.GoldExchangeOk="兑换成功";TEXT.GuestBindError_1="不是游客账号";TEXT.GuestBindError_2="绑定失败";TEXT.GuestBindError_3="账号已存在";TEXT.SameActorName="艺人的名字和原来一样";TEXT.AssistantDesc="Greatly improved actor's {0}，slightly improved other attri bute.";TEXT.AssistantBaseDesc="Everybody says I look like Jackie chan Everybody says Item ok.";TEXT.AssistantTitle1="属性提升";TEXT.AssistantTitle2="课程效果";TEXT.AssistantTrainTimes="培养次数：";TEXT.AssistantUnlockTrain="{0}级解锁";TEXT.AssistantUnlockTag="{0}级解锁";TEXT.AssistantStudy="学习";TEXT.AssistantUpgrade="提升";TEXT.AssistantUpgradeMax="课程等级已达到上限，无法提升课程等级";TEXT.GuideCompleteRewardTitle="完成主线任务奖励";TEXT.GuideCompleteGetBtnTitle="领取";return TEXT}());Games.TEXT=TEXT})(Games||(Games={}));var SettingKey=(function(){function SettingKey(){}SettingKey.music_switch="music_switch";SettingKey.soundeffect_switch="soundeffect_switch";SettingKey.energy_switch="energy_switch";SettingKey.push_switch="push_switch";SettingKey.title_switch="title_switch";SettingKey.language_setting="language_setting";SettingKey.advice_feedback="advice_feedback";SettingKey.gift_exchange="gift_exchange";return SettingKey}());var Res=(function(){function Res(){}Res.getSpineSKPath=function(path){return Res.root+"spine/"+path+".sk"};Res.getSpinePngPath=function(path){return Res.root+"spine/"+path+".png"};Res.getSpineSoltPartPath=function(path){return Res.root+"spine/SlotTexture/"+path+".png"};Res.getSpritePath=function(path){return Res.root+"fspriteassets/"+path+".png"};Res.getRoom=function(id){return Res.getSpritePath("Building/"+id)};Res.getCinemaCanvasSK=function(){return Res.getSpineSKPath("Scene/Scene_SheYingpeng/Scene_SheYingpeng")};Res.getCinemaCanvasSkin=function(){return Res.getSpinePngPath("Scene/Scene_SheYingpeng/Scene_SheYingpeng")};Res.getAudienceSK=function(){return Res.getSpineSKPath("Scene/Audience01/Audience01")};Res.getAudienceSkin=function(){var skinIndex=Random.rangeBoth(1,4);return Res.getSpinePngPath("Scene/Audience01/Audience0"+skinIndex)};Object.defineProperty(Res,"cinemaHallActorSK",{get:function(){return Res.getSpineSKPath("Scene/Cinema_Hall/Cinema_Hall1")},enumerable:true,configurable:true});Object.defineProperty(Res,"cinemaHallActorSkin",{get:function(){return Res.getSpinePngPath("Scene/Cinema_Hall/Cinema_Hall1")},enumerable:true,configurable:true});Object.defineProperty(Res,"cinemaHallDoorSK",{get:function(){return Res.getSpineSKPath("Scene/Cinema_Hall/Cinema_Hall2")},enumerable:true,configurable:true});Object.defineProperty(Res,"cinemaHallDoorSkin",{get:function(){return Res.getSpinePngPath("Scene/Cinema_Hall/Cinema_Hall2")},enumerable:true,configurable:true});Res.getFx=function(path){return Res.rootFx+path+".part"};Res.rootFx="fx/";Res.root="res/";return Res}());var MsgKey=(function(){function MsgKey(){}MsgKey.Msg_test="Msg_test";MsgKey.account_name_long="account_name_long";MsgKey.account_name_num="account_name_num";MsgKey.account_name_space="account_name_space";MsgKey.account_name_repeat="account_name_repeat";MsgKey.account_name_blockword="account_name_blockword";MsgKey.account_name_repeatothers="account_name_repeatothers";MsgKey.account_name_ok="account_name_ok";MsgKey.account_name_often="account_name_often";MsgKey.produce_one_click="produce_one_click";MsgKey.produce_warehouse_max="produce_warehouse_max";MsgKey.produce_recvip_less="produce_recvip_less";MsgKey.produce_item_less="produce_item_less";MsgKey.produce_paper_less="produce_paper_less";MsgKey.produce_item_max="produce_item_max";MsgKey.produce_line_max="produce_line_max";MsgKey.produce_pre_unlock="produce_pre_unlock";MsgKey.produce_diamond_less="produce_diamond_less";MsgKey.produce_gold_less="produce_gold_less";MsgKey.produce_provip_less="produce_provip_less";MsgKey.produce_lines_max="produce_lines_max";MsgKey.non_midia_visit="non_midia_visit";MsgKey.movie_non_suitable_actor="movie_non_suitable_actor";MsgKey.movie_non_enough_actor="movie_non_enough_actor";MsgKey.movie_actor_recruit="movie_actor_recruit";MsgKey.ranking_list_reset="ranking_list_reset";MsgKey.movie_stop_tips="movie_stop_tips";MsgKey.ranking_list_tips1="ranking_list_tips1";MsgKey.ranking_list_tips2="ranking_list_tips2";MsgKey.movie_ranking_list_hidden="movie_ranking_list_hidden";MsgKey.block_upgrade_requirement="block_upgrade_requirement";MsgKey.trophy_tips="trophy_tips";MsgKey.trophy_tips2="trophy_tips2";MsgKey.finished_block="finished_block";MsgKey.cinema_sign="cinema_sign";MsgKey.ranking_list_instruction1="ranking_list_instruction1";MsgKey.ranking_list_instruction2="ranking_list_instruction2";MsgKey.ranking_list_instruction3="ranking_list_instruction3";MsgKey.change_server_name="change_server_name";MsgKey.choose_cinema="choose_cinema";MsgKey.movie_get_tips="movie_get_tips";MsgKey.movie_story_coordination="movie_story_coordination";MsgKey.movie_character_coordination="movie_character_coordination";MsgKey.movie_story_character_coordination="movie_story_character_coordination";MsgKey.movie_none_coordination="movie_none_coordination";MsgKey.movie_drop_tips="movie_drop_tips";MsgKey.movie_too_much="movie_too_much";MsgKey.movie_critical1="movie_critical1";MsgKey.movie_critical2="movie_critical2";MsgKey.movie_critical3="movie_critical3";MsgKey.movie_critical4="movie_critical4";MsgKey.movie_target_fail="movie_target_fail";MsgKey.movie_big_sell_tips="movie_big_sell_tips";MsgKey.earnings_over="earnings_over";MsgKey.oscar_non_rank_tips="oscar_non_rank_tips";MsgKey.oscar_non_rank_tips2="oscar_non_rank_tips2";MsgKey.oscar_non_movie_tips="oscar_non_movie_tips";MsgKey.oscar_non_bigsell_tips="oscar_non_bigsell_tips";MsgKey.oscar_non_target_tips="oscar_non_target_tips";MsgKey.block_upgrade_msg="block_upgrade_msg";MsgKey.movie_big_sell1="movie_big_sell1";MsgKey.movie_big_sell2="movie_big_sell2";MsgKey.movie_big_sell3="movie_big_sell3";MsgKey.oscar_non_actor="oscar_non_actor";MsgKey.oscar_non_actress="oscar_non_actress";MsgKey.oscar_non_performance="oscar_non_performance";MsgKey.oscar_non_art="oscar_non_art";MsgKey.oscar_non_popular="oscar_non_popular";MsgKey.oscar_actor="oscar_actor";MsgKey.oscar_actress="oscar_actress";MsgKey.oscar_performance="oscar_performance";MsgKey.oscar_art="oscar_art";MsgKey.oscar_popular="oscar_popular";MsgKey.oscar_forbid_movie="oscar_forbid_movie";MsgKey.non_deletable_mail="non_deletable_mail";MsgKey.non_can_receive_mail="non_can_receive_mail";MsgKey.non_mail="non_mail";MsgKey.story_target_tips="story_target_tips";MsgKey.story_non_target_tips="story_non_target_tips";MsgKey.story_midia_tips="story_midia_tips";MsgKey.null_id="null_id";MsgKey.cooperated_player="cooperated_player";MsgKey.no_cooperation_num="no_cooperation_num";MsgKey.no_cooperation_orders="no_cooperation_orders";MsgKey.relieve_cooperation="relieve_cooperation";MsgKey.repetition_cooperation="repetition_cooperation";MsgKey.null_actor_send="null_actor_send";MsgKey.build_confirm="build_confirm";MsgKey.build_non_material="build_non_material";MsgKey.build_non_level="build_non_level";MsgKey.build_non_prebuilding="build_non_prebuilding";MsgKey.build_non_block="build_non_block";MsgKey.build_be_builded="build_be_builded";MsgKey.movie_market_bad1="movie_market_bad1";MsgKey.movie_market_bad2="movie_market_bad2";MsgKey.movie_market_good1="movie_market_good1";MsgKey.movie_market_good2="movie_market_good2";MsgKey.movie_actor_pay="movie_actor_pay";MsgKey.movie_mediavisit_tips="movie_mediavisit_tips";MsgKey.movie_type_addition="movie_type_addition";MsgKey.movie_cinema_tips="movie_cinema_tips";MsgKey.movie_unlock_cinema_tips="movie_unlock_cinema_tips";MsgKey.movie_market_feedback="movie_market_feedback";MsgKey.movie_story_feedback="movie_story_feedback";MsgKey.movie_shoottype_feedback="movie_shoottype_feedback";MsgKey.movie_licence_finish_tips="movie_licence_finish_tips";MsgKey.movie_type_tips="movie_type_tips";MsgKey.movie_state_tips1="movie_state_tips1";MsgKey.movie_state_tips2="movie_state_tips2";MsgKey.movie_state_tips3="movie_state_tips3";MsgKey.bag_own_actor_tips="bag_own_actor_tips";MsgKey.bag_no_compound_tips="bag_no_compound_tips";MsgKey.bag_no_compound_choose_tips="bag_no_compound_choose_tips";MsgKey.bag_no_send_choose_tips="bag_no_send_choose_tips";MsgKey.bag_no_split_choose_tips="bag_no_split_choose_tips";MsgKey.bag_no_sell_choose_tips="bag_no_sell_choose_tips";MsgKey.oscar_presentation_title="oscar_presentation_title";MsgKey.oscar_default_presentation1="oscar_default_presentation1";MsgKey.oscar_default_presentation2="oscar_default_presentation2";MsgKey.oscar_default_presentation3="oscar_default_presentation3";MsgKey.movie_day="movie_day";MsgKey.movie_remaining_days="movie_remaining_days";MsgKey.movie_story_times="movie_story_times";MsgKey.movie_character_coordination_tips="movie_character_coordination_tips";MsgKey.movie_story_coordination_tips="movie_story_coordination_tips";MsgKey.bag_send_no_target="bag_send_no_target";MsgKey.movie_off_line_remaining_time="movie_off_line_remaining_time";MsgKey.movie_off_line_gain_tips="movie_off_line_gain_tips";MsgKey.movie_licence_limit_tips="movie_licence_limit_tips";MsgKey.movie_city_unlock_tips="movie_city_unlock_tips";MsgKey.movie_off_line_gain_evaluation="movie_off_line_gain_evaluation";MsgKey.movie_off_line_tips="movie_off_line_tips";MsgKey.movie_confirm="movie_confirm";MsgKey.train_title_level="train_title_level";MsgKey.train_title_tips="train_title_tips";MsgKey.train_remaining_times="train_remaining_times";MsgKey.train_area_tips="train_area_tips";MsgKey.train_exp="train_exp";MsgKey.train_actor_tips="train_actor_tips";MsgKey.cooperated_send="cooperated_send";MsgKey.movie_licence_get_tips="movie_licence_get_tips";MsgKey.cooperated_claim_tips="cooperated_claim_tips";MsgKey.order_fail="order_fail";MsgKey.order_complete="order_complete";MsgKey.order_received="order_received";MsgKey.order_npc_default="order_npc_default";MsgKey.business_countdown="business_countdown";MsgKey.business_secretary="business_secretary";MsgKey.business_down="business_down";MsgKey.visit_countdown="visit_countdown";MsgKey.visit_secretary="visit_secretary";MsgKey.visit_point="visit_point";MsgKey.market_envoy_wrong1="market_envoy_wrong1";MsgKey.market_envoy_wrong2="market_envoy_wrong2";MsgKey.market_envoy_wrong3="market_envoy_wrong3";MsgKey.market_envoy_wrong4="market_envoy_wrong4";MsgKey.market_envoy_wrong5="market_envoy_wrong5";MsgKey.market_dollar_less="market_dollar_less";MsgKey.market_show_failure="market_show_failure";MsgKey.story_comment_wrong="story_comment_wrong";MsgKey.thumbsup_less="thumbsup_less";MsgKey.story_search_less="story_search_less";MsgKey.block_level_less="block_level_less";MsgKey.story_cd_success="story_cd_success";MsgKey.meeting_time="meeting_time";MsgKey.secretary_bought="secretary_bought";MsgKey.secretary_buy_fail="secretary_buy_fail";MsgKey.sectrary_cannot_buy="sectrary_cannot_buy";MsgKey.daily_sign="daily_sign";MsgKey.setting_not_open="setting_not_open";MsgKey.gift_success="gift_success";MsgKey.gift_used="gift_used";MsgKey.gift_illegal="gift_illegal";MsgKey.shop_period="shop_period";MsgKey.produce_down="produce_down";MsgKey.produce_produce_limit="produce_produce_limit";MsgKey.player_id="player_id";MsgKey.version_num="version_num";MsgKey.choose_language="choose_language";MsgKey.CHS="CHS";MsgKey.CHT="CHT";MsgKey.EN="EN";MsgKey.choose_language_confirm="choose_language_confirm";MsgKey.feedback_title="feedback_title";MsgKey.feedback_words="feedback_words";MsgKey.Qgroup="Qgroup";MsgKey.Wechat="Wechat";MsgKey.Weibo="Weibo";MsgKey.mailbox="mailbox";MsgKey.exchange_title="exchange_title";MsgKey.exchange_input="exchange_input";MsgKey.exhange_button="exhange_button";MsgKey.setting_title="setting_title";MsgKey.setting_notice="setting_notice";MsgKey.meeting_wait="meeting_wait";MsgKey.meeting_goal1="meeting_goal1";MsgKey.meeting_goal2="meeting_goal2";MsgKey.meeting_goal3="meeting_goal3";MsgKey.meeting_goal4="meeting_goal4";MsgKey.meeting_fair="meeting_fair";MsgKey.meeting_win="meeting_win";MsgKey.meeting_lose1="meeting_lose1";MsgKey.meeting_lose2="meeting_lose2";MsgKey.story_stack_locked="story_stack_locked";MsgKey.produce_lock="produce_lock";MsgKey.meeting_goal="meeting_goal";MsgKey.meeting_battle="meeting_battle";MsgKey.meeting_boss_hello="meeting_boss_hello";MsgKey.meeting_client_hello1="meeting_client_hello1";MsgKey.meeting_client_hello2="meeting_client_hello2";MsgKey.meeting_bargain1_boss="meeting_bargain1_boss";MsgKey.meeting_bargain1_client="meeting_bargain1_client";MsgKey.meeting_bargain2_boss="meeting_bargain2_boss";MsgKey.meeting_bargain2_client="meeting_bargain2_client";MsgKey.meeting_bargain_not_fail_boss="meeting_bargain_not_fail_boss";MsgKey.meeting_bargain_not_fail_client="meeting_bargain_not_fail_client";MsgKey.meeting_bargain_fail_boss="meeting_bargain_fail_boss";MsgKey.meeting_bargain_fail_client="meeting_bargain_fail_client";MsgKey.day_count="day_count";MsgKey.daily_sign_title="daily_sign_title";MsgKey.secretary_title="secretary_title";MsgKey.permition_title="permition_title";MsgKey.month_card_title="month_card_title";MsgKey.meeting_midtime="meeting_midtime";MsgKey.day_duration="day_duration";MsgKey.time_out_sevendays="time_out_sevendays";MsgKey.month_card_type1="month_card_type1";MsgKey.month_card_type2="month_card_type2";MsgKey.month_card_firstbuy="month_card_firstbuy";MsgKey.month_card_buy="month_card_buy";MsgKey.month_card_daily_gift="month_card_daily_gift";MsgKey.month_card_contracts_info="month_card_contracts_info";MsgKey.icon_buy="icon_buy";MsgKey.days_left="days_left";MsgKey.month_card_special_package1_title="month_card_special_package1_title";MsgKey.month_card_special_package2_title="month_card_special_package2_title";MsgKey.month_card_not_owned1="month_card_not_owned1";MsgKey.month_card_not_owned2="month_card_not_owned2";MsgKey.box_target_progress1="box_target_progress1";MsgKey.box_target_progress2="box_target_progress2";MsgKey.box_target_progress3="box_target_progress3";MsgKey.box_target_progress4="box_target_progress4";MsgKey.box_target_progress5="box_target_progress5";MsgKey.license_limit="license_limit";MsgKey.license_apply_secretary_not_owned="license_apply_secretary_not_owned";MsgKey.cooperative_order_no="cooperative_order_no";MsgKey.cooperative_order_notice="cooperative_order_notice";MsgKey.cooperative_order_repeat="cooperative_order_repeat";MsgKey.secretary_experience="secretary_experience";MsgKey.go_to_hire="go_to_hire";MsgKey.secretary_not_owned="secretary_not_owned";MsgKey.produce_special="produce_special";MsgKey.visit_wrong1="visit_wrong1";MsgKey.visit_wrong2="visit_wrong2";MsgKey.visit_wrong3="visit_wrong3";MsgKey.produce_inspire_buildlock="produce_inspire_buildlock";MsgKey.produce_inspire_linelock="produce_inspire_linelock";MsgKey.visit_noone="visit_noone";MsgKey.secretary_talk1="secretary_talk1";MsgKey.secretary_talk2="secretary_talk2";MsgKey.secretary_title1="secretary_title1";MsgKey.secretary_title2="secretary_title2";MsgKey.secretary_owned="secretary_owned";MsgKey.market_ambassador="market_ambassador";MsgKey.secretary_gift_received="secretary_gift_received";MsgKey.secretary_rights1="secretary_rights1";MsgKey.secretary_rights2="secretary_rights2";MsgKey.secretary_rights3="secretary_rights3";MsgKey.secretary_rights4="secretary_rights4";MsgKey.secretary_rights5="secretary_rights5";MsgKey.secretary_rights6="secretary_rights6";MsgKey.secretary_rights7="secretary_rights7";MsgKey.secretary_rights8="secretary_rights8";MsgKey.secretary_rights9="secretary_rights9";MsgKey.secretary_rights10="secretary_rights10";MsgKey.secretary_auto1="secretary_auto1";MsgKey.secretary_auto2="secretary_auto2";MsgKey.secretary_auto3="secretary_auto3";MsgKey.chat_notime="chat_notime";MsgKey.chat_nomessage="chat_nomessage";MsgKey.chat_moremessage="chat_moremessage";MsgKey.chat_nospeaker="chat_nospeaker";MsgKey.chat_unlock="chat_unlock";MsgKey.chat_5star1="chat_5star1";MsgKey.chat_5star2="chat_5star2";MsgKey.chat_supersale="chat_supersale";MsgKey.chat_rename="chat_rename";MsgKey.Turntable_full="Turntable_full";MsgKey.order_give="order_give";MsgKey.actor_adept_lv1="actor_adept_lv1";MsgKey.actor_adept_lv2="actor_adept_lv2";MsgKey.actor_adept_lv3="actor_adept_lv3";MsgKey.actor_adept_lv4="actor_adept_lv4";MsgKey.movie_play="movie_play";MsgKey.actor_trainingroom="actor_trainingroom";MsgKey.license_apply_table1="license_apply_table1";MsgKey.license_apply_table2="license_apply_table2";MsgKey.license_apply_table3="license_apply_table3";MsgKey.license_apply_table4="license_apply_table4";MsgKey.license_apply_dialog1="license_apply_dialog1";MsgKey.license_apply_dialog2="license_apply_dialog2";MsgKey.license_apply_dialog3="license_apply_dialog3";MsgKey.license_apply_button1="license_apply_button1";MsgKey.license_apply_button2="license_apply_button2";MsgKey.license_apply_info="license_apply_info";MsgKey.license_apply_limit="license_apply_limit";MsgKey.license_apply_limit_num="license_apply_limit_num";MsgKey.month1="month1";MsgKey.month2="month2";MsgKey.month3="month3";MsgKey.month4="month4";MsgKey.month5="month5";MsgKey.month6="month6";MsgKey.month7="month7";MsgKey.month8="month8";MsgKey.month9="month9";MsgKey.month10="month10";MsgKey.month11="month11";MsgKey.month12="month12";MsgKey.eventhall_moneyless1="eventhall_moneyless1";MsgKey.eventhall_daysless="eventhall_daysless";MsgKey.eventhall_moneyless2="eventhall_moneyless2";MsgKey.eventhall_scoreless2="eventhall_scoreless2";MsgKey.eventhall_scoretext1="eventhall_scoretext1";MsgKey.eventhall_scoretext2="eventhall_scoretext2";MsgKey.eventhall_scoretext3="eventhall_scoretext3";MsgKey.eventhall_scoretext4="eventhall_scoretext4";MsgKey.eventhall_scoretext5="eventhall_scoretext5";MsgKey.eventhall_scoretext6="eventhall_scoretext6";MsgKey.scoring_format="scoring_format";MsgKey.task_unfinished="task_unfinished";MsgKey.task_bottom="task_bottom";MsgKey.eventhall_diamondless2="eventhall_diamondless2";MsgKey.visit_stop="visit_stop";MsgKey.account_load_long1="account_load_long1";MsgKey.account_load_long2="account_load_long2";MsgKey.account_load_again="account_load_again";MsgKey.account_load_wrong1="account_load_wrong1";MsgKey.account_load_wrong2="account_load_wrong2";MsgKey.account_load_wrong3="account_load_wrong3";MsgKey.account_load_wrong4="account_load_wrong4";MsgKey.account_unlock="account_unlock";MsgKey.task_change_info="task_change_info";MsgKey.task_change_zero="task_change_zero";MsgKey.task_zero="task_zero";MsgKey.left_times="left_times";MsgKey.no_activity="no_activity";MsgKey.training_tips="training_tips";MsgKey.training_tips2="training_tips2";MsgKey.produce_lv="produce_lv";MsgKey.Error_Password_HasSpace="Error_Password_HasSpace";MsgKey.connect_lost="connect_lost";MsgKey.backstage_restart="backstage_restart";MsgKey.purchase_delay="purchase_delay";MsgKey.purchase_delay_msg="purchase_delay_msg";MsgKey.level_package_unlock="level_package_unlock";MsgKey.ambassador_unlock="ambassador_unlock";return MsgKey}());var ImageKey=(function(){function ImageKey(){}ImageKey.PopUp_2days="PopUp_2days";ImageKey.PopUp_3days="PopUp_3days";ImageKey.GuideReward="GuideReward";ImageKey.CupPackage="CupPackage";ImageKey.LevelPackage="LevelPackage";ImageKey.Label_Hot="Label_Hot";return ImageKey}());var GlobalKey=(function(){function GlobalKey(){}GlobalKey.Gold_Convert_Count="Gold_Convert_Count";GlobalKey.Gold_Convert_Times="Gold_Convert_Times";GlobalKey.Actor_Training_OpenLevel="Actor_Training_OpenLevel";GlobalKey.Licence_Store_Max="Licence_Store_Max";GlobalKey.Licence_Restore_Max="Licence_Restore_Max";GlobalKey.Script_choose_num="Script_choose_num";GlobalKey.Popularize_Duration="Popularize_Duration";GlobalKey.Movie_Shoot_Time="Movie_Shoot_Time";GlobalKey.Max_Movie_Num="Max_Movie_Num";GlobalKey.Max_Movie_Popularize_Level="Max_Movie_Popularize_Level";GlobalKey.Licence_Restore_Time="Licence_Restore_Time";GlobalKey.Max_Expect="Max_Expect";GlobalKey.Tired_Times="Tired_Times";GlobalKey.Movie_Stop_Tips="Movie_Stop_Tips";GlobalKey.Block_Ranking_List_Reset="Block_Ranking_List_Reset";GlobalKey.Block_Ranking_List_Player_Num="Block_Ranking_List_Player_Num";GlobalKey.Server_Ranking_List_Reset="Server_Ranking_List_Reset";GlobalKey.Block_Ranking_List_Congratulate_Times="Block_Ranking_List_Congratulate_Times";GlobalKey.Block_Ranking_List_Congratulate_Cd="Block_Ranking_List_Congratulate_Cd";GlobalKey.Story_CD="Story_CD";GlobalKey.Golden_Story_Time="Golden_Story_Time";GlobalKey.Golden_Story_Num="Golden_Story_Num";GlobalKey.KEY_23_AoSiKaBi__JiangLiDaoJu="KEY_23_AoSiKaBi__JiangLiDaoJu";GlobalKey.KEY_24_AoSiKaBi__JiangLiShangXian="KEY_24_AoSiKaBi__JiangLiShangXian";GlobalKey.KEY_25_AoSiKaBanJiangShiJian="KEY_25_AoSiKaBanJiangShiJian";GlobalKey.KEY_26_AoSiKaBan__YingShiJianMiao="KEY_26_AoSiKaBan__YingShiJianMiao";GlobalKey.KEY_27_ShouCiGeZuoJiangLi="KEY_27_ShouCiGeZuoJiangLi";GlobalKey.KEY_28_ShouCiZhangHao__GeZuoJiangLi="KEY_28_ShouCiZhangHao__GeZuoJiangLi";GlobalKey.KEY_29_MeiZhouGeZuoCiShu="KEY_29_MeiZhouGeZuoCiShu";GlobalKey.KEY_30_GeZuoRenWu__MeiRiNDian="KEY_30_GeZuoRenWu__MeiRiNDian";GlobalKey.KEY_31_MeiTiFangWen__DengJiShangXian="KEY_31_MeiTiFangWen__DengJiShangXian";GlobalKey.KEY_32_MeiTiFangWen__ShuLiangOuJian="KEY_32_MeiTiFangWen__ShuLiangOuJian";GlobalKey.KEY_33_MeiTiFangWen__ShuLiangShangXian="KEY_33_MeiTiFangWen__ShuLiangShangXian";GlobalKey.KEY_34_MeiRiPaiShe__MeiRiNDian="KEY_34_MeiRiPaiShe__MeiRiNDian";GlobalKey.Bag_Initial_Capacity="Bag_Initial_Capacity";GlobalKey.Movie_License_default_Cd="Movie_License_default_Cd";GlobalKey.Movie_Histogram_Time="Movie_Histogram_Time";GlobalKey.Movie_Licence_ID="Movie_Licence_ID";GlobalKey.Oscar_Candidate_Num="Oscar_Candidate_Num";GlobalKey.Actor_Train_Exp="Actor_Train_Exp";GlobalKey.Actor_Train_Time="Actor_Train_Time";GlobalKey.Oscar_Best_Actor="Oscar_Best_Actor";GlobalKey.Oscar_Best_Actress="Oscar_Best_Actress";GlobalKey.Oscar_Best_Performance="Oscar_Best_Performance";GlobalKey.Oscar_Best_Art="Oscar_Best_Art";GlobalKey.Oscar_Best_Welcome="Oscar_Best_Welcome";GlobalKey.Training_Area_Price="Training_Area_Price";GlobalKey.Oscar_Congratulated_Reward="Oscar_Congratulated_Reward";GlobalKey.Cooperate_Send_Dollar_times="Cooperate_Send_Dollar_times";GlobalKey.Cooperate_Send_Gold_times="Cooperate_Send_Gold_times";GlobalKey.Cooperate_Invited_CD="Cooperate_Invited_CD";GlobalKey.Cooperate_Public_Invited_Time="Cooperate_Public_Invited_Time";GlobalKey.Cooperate_Open_data="Cooperate_Open_data";GlobalKey.Shoot_Golden_Story_Nums="Shoot_Golden_Story_Nums";GlobalKey.Conversion_Initial_Times="Conversion_Initial_Times";GlobalKey.Conversion_Refresh_Time="Conversion_Refresh_Time";GlobalKey.Shoot_Story_Refresh_ResetTime="Shoot_Story_Refresh_ResetTime";GlobalKey.KEY_1001_TanChaXiaoHao="KEY_1001_TanChaXiaoHao";GlobalKey.KEY_1002_XingTanQiaoMu__ChaCDFen="KEY_1002_XingTanQiaoMu__ChaCDFen";GlobalKey.KEY_1003_MeiCiTanCha__JiaShiJianFen="KEY_1003_MeiCiTanCha__JiaShiJianFen";GlobalKey.KEY_1004_TanChaCiShuShangXian="KEY_1004_TanChaCiShuShangXian";GlobalKey.KEY_1005_TanChaCD__WuQiShiJian="KEY_1005_TanChaCD__WuQiShiJian";GlobalKey.KEY_1006_TanChaChuYi__RenShuLiangGe="KEY_1006_TanChaChuYi__RenShuLiangGe";GlobalKey.KEY_1007_TanChaChuYi__ZaiShiJianFen="KEY_1007_TanChaChuYi__ZaiShiJianFen";GlobalKey.KEY_1008_JiangZhiTanCha__PinHeShuLiang="KEY_1008_JiangZhiTanCha__PinHeShuLiang";GlobalKey.KEY_1009_ZuanDanZengJia__ShuLiangXiaoHao="KEY_1009_ZuanDanZengJia__ShuLiangXiaoHao";GlobalKey.KEY_1010_ZiDingYiYi__MingChenXiaoHao="KEY_1010_ZiDingYiYi__MingChenXiaoHao";GlobalKey.KEY_1011_TiLiChongZhi__WuQiShiJian="KEY_1011_TiLiChongZhi__WuQiShiJian";GlobalKey.KEY_1012_ZuanDanPeiYang__YiRenXiaoHao="KEY_1012_ZuanDanPeiYang__YiRenXiaoHao";GlobalKey.KEY_1013_XingTanCiShu="KEY_1013_XingTanCiShu";GlobalKey.KEY_1014_TanChaXingJi__SuiJiGongShi="KEY_1014_TanChaXingJi__SuiJiGongShi";GlobalKey.KEY_1015_YiRenZaiLou__ShuLiangShangXian="KEY_1015_YiRenZaiLou__ShuLiangShangXian";GlobalKey.KEY_1016_MoXingZaiLou__JianDeShuLiang="KEY_1016_MoXingZaiLou__JianDeShuLiang";GlobalKey.KEY_1017_MoXingZaiLou__YiDongSuDu="KEY_1017_MoXingZaiLou__YiDongSuDu";GlobalKey.KEY_1018_DianYingShangYing__ShuaXinShuLiang="KEY_1018_DianYingShangYing__ShuaXinShuLiang";GlobalKey.KEY_1019_TanBanShiYi__ZuoDeSuDu="KEY_1019_TanBanShiYi__ZuoDeSuDu";GlobalKey.KEY_1020_YiRenPaiShe__HuoBiLeiXing="KEY_1020_YiRenPaiShe__HuoBiLeiXing";GlobalKey.KEY_1021_1JiShanChang__MiaoShuWenZi="KEY_1021_1JiShanChang__MiaoShuWenZi";GlobalKey.KEY_1022_2JiShanChang__MiaoShuWenZi="KEY_1022_2JiShanChang__MiaoShuWenZi";GlobalKey.KEY_1023_3JiShanChang__MiaoShuWenZi="KEY_1023_3JiShanChang__MiaoShuWenZi";GlobalKey.KEY_1024_4JiShanChang__MiaoShuWenZi="KEY_1024_4JiShanChang__MiaoShuWenZi";GlobalKey.KEY_1025_WanGuChuShi__ShangXianShuLiang="KEY_1025_WanGuChuShi__ShangXianShuLiang";GlobalKey.KEY_1026_WanGuChuShi__ShuLiangShangXian="KEY_1026_WanGuChuShi__ShuLiangShangXian";GlobalKey.KEY_1027_YiRenPeiYang__ShiJianHaoMiao="KEY_1027_YiRenPeiYang__ShiJianHaoMiao";GlobalKey.KEY_1028_YiRenPeiYang__ShiJianHaoMiao="KEY_1028_YiRenPeiYang__ShiJianHaoMiao";GlobalKey.KEY_1029_YiRenPeiYang__ShiJianHaoMiao="KEY_1029_YiRenPeiYang__ShiJianHaoMiao";GlobalKey.KEY_1030_YiRenPeiYang__ShiJianHaoMiao="KEY_1030_YiRenPeiYang__ShiJianHaoMiao";GlobalKey.KEY_1031_GongSiPeiYang__WuQiShiJian="KEY_1031_GongSiPeiYang__WuQiShiJian";GlobalKey.KEY_1032_YiRenPeiYang__ChengShiID="KEY_1032_YiRenPeiYang__ChengShiID";GlobalKey.KEY_1033_YiRenJiNeng__GongSiDengJi="KEY_1033_YiRenJiNeng__GongSiDengJi";GlobalKey.KEY_1034_YiRenZiChan__GongSiDengJi="KEY_1034_YiRenZiChan__GongSiDengJi";GlobalKey.KEY_1035_YiRenZhongCheng__ShangXianShuLiang="KEY_1035_YiRenZhongCheng__ShangXianShuLiang";GlobalKey.KEY_1036="KEY_1036";GlobalKey.KEY_1037="KEY_1037";GlobalKey.KEY_1038="KEY_1038";GlobalKey.KEY_1039="KEY_1039";GlobalKey.KEY_1040="KEY_1040";GlobalKey.KEY_1041="KEY_1041";GlobalKey.KEY_1042="KEY_1042";GlobalKey.KEY_1043="KEY_1043";GlobalKey.KEY_1044="KEY_1044";GlobalKey.KEY_1045="KEY_1045";GlobalKey.KEY_1046="KEY_1046";GlobalKey.KEY_1047="KEY_1047";GlobalKey.KEY_1048="KEY_1048";GlobalKey.KEY_1049="KEY_1049";GlobalKey.KEY_1050="KEY_1050";GlobalKey.KEY_1051="KEY_1051";GlobalKey.KEY_1052="KEY_1052";GlobalKey.KEY_1053="KEY_1053";GlobalKey.KEY_1054="KEY_1054";GlobalKey.KEY_1055="KEY_1055";GlobalKey.KEY_1056="KEY_1056";GlobalKey.KEY_1057="KEY_1057";GlobalKey.KEY_1058="KEY_1058";GlobalKey.story_cost_rand="story_cost_rand";GlobalKey.actor_cost_rand="actor_cost_rand";GlobalKey.rand_1="rand_1";GlobalKey.rand_2="rand_2";GlobalKey.tired_base="tired_base";GlobalKey.tired_con_1="tired_con_1";GlobalKey.tired_con_2="tired_con_2";GlobalKey.time="time";GlobalKey.type_timer_con="type_timer_con";GlobalKey.att_rate="att_rate";GlobalKey.att_rand="att_rand";GlobalKey.delay_con="delay_con";GlobalKey.delay_base="delay_base";GlobalKey.delay_count="delay_count";GlobalKey.gold_att_con="gold_att_con";GlobalKey.gold_count="gold_count";GlobalKey.bar_con="bar_con";GlobalKey.evaluate_rand="evaluate_rand";GlobalKey.evaluate_con="evaluate_con";GlobalKey.box_office_rand="box_office_rand";GlobalKey.opinions_rand="opinions_rand";GlobalKey.opinions_con="opinions_con";GlobalKey.day_con="day_con";GlobalKey.follow_rand="follow_rand";GlobalKey.random_value="random_value";GlobalKey.random_rand="random_rand";GlobalKey.random_con_1="random_con_1";GlobalKey.random_con_2="random_con_2";GlobalKey.random_con_3="random_con_3";GlobalKey.random_con_4="random_con_4";GlobalKey.task_convert_times="task_convert_times";GlobalKey.story_stack_daily_times="story_stack_daily_times";GlobalKey.story_stack_search_cost="story_stack_search_cost";GlobalKey.story_stack_cd_stage_cost="story_stack_cd_stage_cost";GlobalKey.story_stack_cd_stage_length="story_stack_cd_stage_length";GlobalKey.story_stack_cd_stages="story_stack_cd_stages";GlobalKey.story_stack_cd="story_stack_cd";GlobalKey.story_stack_daily_update="story_stack_daily_update";GlobalKey.story_stack_cd_block_level="story_stack_cd_block_level";GlobalKey.shop_daily_limit="shop_daily_limit";GlobalKey.shop_weekly_limit="shop_weekly_limit";GlobalKey.opinions="opinions";GlobalKey.evaluate="evaluate";GlobalKey.fans_rand="fans_rand";GlobalKey.BarGraph_rand="BarGraph_rand";GlobalKey.BattlePoint_count="BattlePoint_count";GlobalKey.Extension_level_con="Extension_level_con";GlobalKey.default_language="default_language";GlobalKey.month_card_duration="month_card_duration";GlobalKey.proficiency="proficiency";GlobalKey.cooperative_order_reward="cooperative_order_reward";GlobalKey.produce_inspire_buildlock="produce_inspire_buildlock";GlobalKey.produce_inspire_linelock="produce_inspire_linelock";GlobalKey.produce_production_less="produce_production_less";GlobalKey.produce_collection_less="produce_collection_less";GlobalKey.market_ambassador="market_ambassador";GlobalKey.eventhall_score1="eventhall_score1";GlobalKey.eventhall_score2="eventhall_score2";GlobalKey.Extension_box_office_con="Extension_box_office_con";GlobalKey.Extension_con="Extension_con";GlobalKey.Firstday_Actor="Firstday_Actor";GlobalKey.Secondday_Actor="Secondday_Actor";GlobalKey.bussiness_number="bussiness_number";GlobalKey.bussiness_max="bussiness_max";GlobalKey.bussiness_cd="bussiness_cd";GlobalKey.visit_number="visit_number";GlobalKey.visit_max="visit_max";GlobalKey.visit_cd="visit_cd";GlobalKey.meeting_times_basic="meeting_times_basic";GlobalKey.account_lock="account_lock";GlobalKey.common_task_amount="common_task_amount";GlobalKey.common_task_change_times="common_task_change_times";GlobalKey.secretary_price="secretary_price";GlobalKey.secretary_package="secretary_package";GlobalKey.city_random_item_time="city_random_item_time";GlobalKey.movie_output_unit_time="movie_output_unit_time";GlobalKey.player_story_start="player_story_start";GlobalKey.story_leader_actor_level="story_leader_actor_level";GlobalKey.first_story_att="first_story_att";GlobalKey.first_story_evaluate="first_story_evaluate";GlobalKey.first_story_opinions="first_story_opinions";GlobalKey.first_story_random_con="first_story_random_con";GlobalKey.first_story_exp="first_story_exp";GlobalKey.maintask_complete_start="maintask_complete_start";GlobalKey.maintask_complete_end="maintask_complete_end";GlobalKey.maintask_complete_reward="maintask_complete_reward";GlobalKey.three_story="three_story";GlobalKey.three_story_att="three_story_att";GlobalKey.three_story_evaluate="three_story_evaluate";GlobalKey.three_story_opinions="three_story_opinions";GlobalKey.three_storyrandom_con="three_storyrandom_con";GlobalKey.maintask_complete_image="maintask_complete_image";GlobalKey.wheel1_count="wheel1_count";GlobalKey.wheel2_count="wheel2_count";GlobalKey.wheel1_cost_id="wheel1_cost_id";GlobalKey.wheel2_cost_id="wheel2_cost_id";return GlobalKey}());var FxKey=(function(){function FxKey(){}FxKey.BuildFog="Effect_build01";FxKey.BuildHammer="Effect_build02";FxKey.Jinbi01="jinbi_01";return FxKey}());var Particle2D=Laya.Particle2D;var ParticleSetting=Laya.ParticleSetting;var FxCtrl=(function(){function FxCtrl(fxKey){this.displayIndex=-1;this.isPlay=true;this.isDestroyed=false;this.pivotCenter=true;this._x=0;this._y=0;this.key=fxKey;this.pathFull=Res.getFx(fxKey)}Object.defineProperty(FxCtrl.prototype,"x",{get:function(){return this._x},set:function(value){this._x=value;if(this.sp){this.sp.x=this.pivotCenter?value-this.sp.width*0.5:value}},enumerable:true,configurable:true});Object.defineProperty(FxCtrl.prototype,"y",{get:function(){return this._y},set:function(value){this._y=value;if(this.sp){this.sp.y=this.pivotCenter?value-this.sp.height*0.5:value}},enumerable:true,configurable:true});FxCtrl.prototype.load=function(onComplete){this.onComplete=onComplete;Laya.loader.load(this.pathFull,Handler.create(this,this.onAssetsLoaded),null,Loader.JSON)};FxCtrl.prototype.onAssetsLoaded=function(settings){if(this.isDestroyed){return}if(!settings.textureName.startsWith("fx/")){settings.textureName=Res.rootFx+settings.textureName}this.sp=new Particle2D(settings);this.sp.emitter.start();if(this.isPlay){this.sp.play()}this.checkShow();this.sp.x=this.pivotCenter?this.x-this.sp.width*0.5:this.x;this.sp.y=this.pivotCenter?this.y-this.sp.height*0.5:this.y;if(this.onComplete){this.onComplete.run()}};FxCtrl.prototype.showOn=function(parent,displayIndex){if(displayIndex===void 0){displayIndex=-1}if(parent instanceof laya.display.Sprite){this.parent=parent}else{this.parent=parent.displayObject}this.displayIndex=displayIndex;this.checkShow()};FxCtrl.prototype.checkShow=function(){if(this.parent&&this.sp){if(this.displayIndex>=0){this.parent.addChildAt(this.sp,this.displayIndex)}else{this.parent.addChild(this.sp)}}};Object.defineProperty(FxCtrl.prototype,"visible",{set:function(value){if(this.sp){this.sp.visible=value}},enumerable:true,configurable:true});FxCtrl.prototype.play=function(){if(this.sp){this.sp.play()}this.isPlay=true};FxCtrl.prototype.stop=function(){if(this.sp){this.sp.stop()}this.isPlay=false};FxCtrl.prototype.destroy=function(destroyChild){this.isDestroyed=true;if(this.sp){this.sp.destroy(destroyChild);this.sp.removeSelf();this.sp=null}};return FxCtrl}());var FxManager=(function(){function FxManager(){}FxManager.prototype.create=function(fxKey,parent,displayIndex,x,y,pivotCenter,onComplete){if(displayIndex===void 0){displayIndex=-1}if(x===void 0){x=0}if(y===void 0){y=0}if(pivotCenter===void 0){pivotCenter=true}var ctl=new FxCtrl(fxKey);ctl.pivotCenter=pivotCenter;ctl.showOn(parent,displayIndex);ctl.x=x;ctl.y=y;ctl.load(onComplete);return ctl};FxManager.prototype.creatTrail=function(renderClassList,parent,displayIndex,x,y,autoStart){if(displayIndex===void 0){displayIndex=-1}if(x===void 0){x=0}if(y===void 0){y=0}if(autoStart===void 0){autoStart=true}var emitter2D=Game.pool.trailPool.requrestItem();emitter2D.x=x;emitter2D.y=y;emitter2D.showOn(parent,displayIndex);if(!emitter2D.hasRenderer){emitter2D.setRenderList(renderClassList)}if(autoStart){emitter2D.start()}return emitter2D};return FxManager}());var configs;(function(configs){var ConfigFieldType=(function(){function ConfigFieldType(){}ConfigFieldType.MString="string";ConfigFieldType.MStringArray="string[]";return ConfigFieldType}());configs.ConfigFieldType=ConfigFieldType})(configs||(configs={}));var configs;(function(configs){var ActionConfigStruct=(function(_super){__extends(ActionConfigStruct,_super);function ActionConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ActionConfigStruct}(configs.BaseConfig));configs.ActionConfigStruct=ActionConfigStruct})(configs||(configs={}));var configs;(function(configs){var ActionConfig=(function(_super){__extends(ActionConfig,_super);function ActionConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ActionConfig.prototype,"actionSequence",{get:function(){this.sequenceIds=[];this.sequenceIds.push(this.id);var connectActionId=this.getNextAction(this.id);if(connectActionId>0){this.getNextAction(connectActionId)}return this.sequenceIds},enumerable:true,configurable:true});ActionConfig.prototype.getNextAction=function(id){var cfg=Game.config.action.getConfig(id);if(cfg){if(cfg.Connect>0){this.sequenceIds.push(cfg.Connect)}return cfg.Connect}};return ActionConfig}(configs.ActionConfigStruct));configs.ActionConfig=ActionConfig})(configs||(configs={}));var configs;(function(configs){var ActivitiesConfigStruct=(function(_super){__extends(ActivitiesConfigStruct,_super);function ActivitiesConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ActivitiesConfigStruct.prototype,"activities_name",{get:function(){var value=LangManager.Instance.getValue("activities",this.id,"activities_name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_activities_name},enumerable:true,configurable:true});Object.defineProperty(ActivitiesConfigStruct.prototype,"activities_info",{get:function(){var value=LangManager.Instance.getValue("activities",this.id,"activities_info");if(!isNullOrEmpty(value)){return value}return this.zh_cn_activities_info},enumerable:true,configurable:true});return ActivitiesConfigStruct}(configs.BaseConfig));configs.ActivitiesConfigStruct=ActivitiesConfigStruct})(configs||(configs={}));var configs;(function(configs){var ActivitiesConfig=(function(_super){__extends(ActivitiesConfig,_super);function ActivitiesConfig(){return _super!==null&&_super.apply(this,arguments)||this}return ActivitiesConfig}(configs.ActivitiesConfigStruct));configs.ActivitiesConfig=ActivitiesConfig})(configs||(configs={}));var configs;(function(configs){var ActorAideattachConfigStruct=(function(_super){__extends(ActorAideattachConfigStruct,_super);function ActorAideattachConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ActorAideattachConfigStruct}(configs.BaseConfig));configs.ActorAideattachConfigStruct=ActorAideattachConfigStruct})(configs||(configs={}));configs.ActorAideattachConfig=configs.ActorAideattachConfigStruct;var configs;(function(configs){var ActorAideConfigStruct=(function(_super){__extends(ActorAideConfigStruct,_super);function ActorAideConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ActorAideConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("actorAide",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.cn_name},enumerable:true,configurable:true});return ActorAideConfigStruct}(configs.BaseConfig));configs.ActorAideConfigStruct=ActorAideConfigStruct})(configs||(configs={}));var configs;(function(configs){var ActorAideConfig=(function(_super){__extends(ActorAideConfig,_super);function ActorAideConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ActorAideConfig.prototype,"iconUrl",{get:function(){return Game.config.avatar.getConfig(this.avatar).iconUrl},enumerable:true,configurable:true});Object.defineProperty(ActorAideConfig.prototype,"iconUrl2",{get:function(){return Game.config.avatar.getConfig(this.avatar).iconUrl2},enumerable:true,configurable:true});return ActorAideConfig}(configs.ActorAideConfigStruct));configs.ActorAideConfig=ActorAideConfig})(configs||(configs={}));var configs;(function(configs){var ActorAideIntimacyConfigStruct=(function(_super){__extends(ActorAideIntimacyConfigStruct,_super);function ActorAideIntimacyConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ActorAideIntimacyConfigStruct}(configs.BaseConfig));configs.ActorAideIntimacyConfigStruct=ActorAideIntimacyConfigStruct})(configs||(configs={}));configs.ActorAideIntimacyConfig=configs.ActorAideIntimacyConfigStruct;var configs;(function(configs){var ActorAideLvConfigStruct=(function(_super){__extends(ActorAideLvConfigStruct,_super);function ActorAideLvConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ActorAideLvConfigStruct}(configs.BaseConfig));configs.ActorAideLvConfigStruct=ActorAideLvConfigStruct})(configs||(configs={}));var configs;(function(configs){var ActorAideLvConfig=(function(_super){__extends(ActorAideLvConfig,_super);function ActorAideLvConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ActorAideLvConfig.prototype,"itemUrl",{get:function(){return Game.config.avatar.GetIconUrl(this.icon)},enumerable:true,configurable:true});return ActorAideLvConfig}(configs.ActorAideLvConfigStruct));configs.ActorAideLvConfig=ActorAideLvConfig})(configs||(configs={}));var configs;(function(configs){var ActorAssetsConfigStruct=(function(_super){__extends(ActorAssetsConfigStruct,_super);function ActorAssetsConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ActorAssetsConfigStruct}(configs.BaseConfig));configs.ActorAssetsConfigStruct=ActorAssetsConfigStruct})(configs||(configs={}));var configs;(function(configs){var ActorAssetsConfig=(function(_super){__extends(ActorAssetsConfig,_super);function ActorAssetsConfig(){return _super!==null&&_super.apply(this,arguments)||this}return ActorAssetsConfig}(configs.ActorAssetsConfigStruct));configs.ActorAssetsConfig=ActorAssetsConfig})(configs||(configs={}));var configs;(function(configs){var ActorAssetsLvConfigStruct=(function(_super){__extends(ActorAssetsLvConfigStruct,_super);function ActorAssetsLvConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ActorAssetsLvConfigStruct}(configs.BaseConfig));configs.ActorAssetsLvConfigStruct=ActorAssetsLvConfigStruct})(configs||(configs={}));configs.ActorAssetsLvConfig=configs.ActorAssetsLvConfigStruct;var configs;(function(configs){var ActorConfigStruct=(function(_super){__extends(ActorConfigStruct,_super);function ActorConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ActorConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("actor",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.cn_name},enumerable:true,configurable:true});Object.defineProperty(ActorConfigStruct.prototype,"tips",{get:function(){var value=LangManager.Instance.getValue("actor",this.id,"tips");if(!isNullOrEmpty(value)){return value}return this.cn_tips},enumerable:true,configurable:true});Object.defineProperty(ActorConfigStruct.prototype,"getway",{get:function(){var value=LangManager.Instance.getValue("actor",this.id,"getway");if(!isNullOrEmpty(value)){return value}return this.cn_getway},enumerable:true,configurable:true});return ActorConfigStruct}(configs.BaseConfig));configs.ActorConfigStruct=ActorConfigStruct})(configs||(configs={}));var configs;(function(configs){var ActorConfig=(function(_super){__extends(ActorConfig,_super);function ActorConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ActorConfig.prototype,"sexUrl",{get:function(){if(this.sex==1101){return"res/sprites/icon/nv_logo.png"}else{if(this.sex==1102){return"res/sprites/icon/nan_logo.png"}}},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"ID",{get:function(){return this.id},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"yrName",{get:function(){return this.cn_name},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"getSex",{get:function(){return this.sex},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"getReqCountry",{get:function(){return this.country},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"getReqShowType",{get:function(){return this.show_type},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"getReqageType",{get:function(){return this.age_type},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"getSpectacle",{get:function(){return this.spectacle},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"getPerform",{get:function(){return this.perform},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"getPlot",{get:function(){return this.plot},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"getArt",{get:function(){return this.art},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"getEntertainment",{get:function(){return this.entertainment},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"getPayCost",{get:function(){return this.paycheck},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"avatarConfig",{get:function(){return Game.config.avatar.getConfig(this.avatar)},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"starProperty",{get:function(){if(this._starPropertyConfig==null){this._starPropertyConfig=Game.config.property.getConfig(this.star)}return this._starPropertyConfig},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"starNum",{get:function(){if(this._star==null){if(this.starProperty){this._star=parseInt(this.starProperty.field)}else{this._star=0}}return this._star},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"starUrl",{get:function(){if(isNullOrEmpty(this._starUrl)){this._starUrl=Game.config.avatar.getConfig(this.starProperty.icon).iconUrl}return this._starUrl},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"modelSkinUrl",{get:function(){var avatarCfg=Game.config.avatar.getConfig(this.avatar);if(avatarCfg){return avatarCfg.modelSkinUrl}return""},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"modelBoneUrl",{get:function(){var avatarCfg=Game.config.avatar.getConfig(this.avatar);if(avatarCfg){return avatarCfg.modelBoneUrl}return""},enumerable:true,configurable:true});Object.defineProperty(ActorConfig.prototype,"bodyIconUrl",{get:function(){var avatarCfg=Game.config.avatar.getConfig(this.avatar);if(avatarCfg){return avatarCfg.bodyIconUrl}return""},enumerable:true,configurable:true});ActorConfig.prototype.isMainID=function(id){return this.main_id==id};return ActorConfig}(configs.ActorConfigStruct));configs.ActorConfig=ActorConfig})(configs||(configs={}));var configs;(function(configs){var ActorLevelConfigStruct=(function(_super){__extends(ActorLevelConfigStruct,_super);function ActorLevelConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ActorLevelConfigStruct}(configs.BaseConfig));configs.ActorLevelConfigStruct=ActorLevelConfigStruct})(configs||(configs={}));var configs;(function(configs){var ActorLevelConfig=(function(_super){__extends(ActorLevelConfig,_super);function ActorLevelConfig(){return _super!==null&&_super.apply(this,arguments)||this}return ActorLevelConfig}(configs.ActorLevelConfigStruct));configs.ActorLevelConfig=ActorLevelConfig})(configs||(configs={}));var configs;(function(configs){var ActorLoyaltyConfigStruct=(function(_super){__extends(ActorLoyaltyConfigStruct,_super);function ActorLoyaltyConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ActorLoyaltyConfigStruct}(configs.BaseConfig));configs.ActorLoyaltyConfigStruct=ActorLoyaltyConfigStruct})(configs||(configs={}));var configs;(function(configs){var ActorLoyaltyConfig=(function(_super){__extends(ActorLoyaltyConfig,_super);function ActorLoyaltyConfig(){return _super!==null&&_super.apply(this,arguments)||this}return ActorLoyaltyConfig}(configs.ActorLoyaltyConfigStruct));configs.ActorLoyaltyConfig=ActorLoyaltyConfig})(configs||(configs={}));var configs;(function(configs){var ActorProficiencyConfigStruct=(function(_super){__extends(ActorProficiencyConfigStruct,_super);function ActorProficiencyConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ActorProficiencyConfigStruct}(configs.BaseConfig));configs.ActorProficiencyConfigStruct=ActorProficiencyConfigStruct})(configs||(configs={}));var configs;(function(configs){var ActorProficiencyConfig=(function(_super){__extends(ActorProficiencyConfig,_super);function ActorProficiencyConfig(){return _super!==null&&_super.apply(this,arguments)||this}return ActorProficiencyConfig}(configs.ActorProficiencyConfigStruct));configs.ActorProficiencyConfig=ActorProficiencyConfig})(configs||(configs={}));var configs;(function(configs){var ActorTrainConfigStruct=(function(_super){__extends(ActorTrainConfigStruct,_super);function ActorTrainConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ActorTrainConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("actorTrain",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.cn_name},enumerable:true,configurable:true});Object.defineProperty(ActorTrainConfigStruct.prototype,"scene_name",{get:function(){var value=LangManager.Instance.getValue("actorTrain",this.id,"scene_name");if(!isNullOrEmpty(value)){return value}return this.cn_scene_name},enumerable:true,configurable:true});return ActorTrainConfigStruct}(configs.BaseConfig));configs.ActorTrainConfigStruct=ActorTrainConfigStruct})(configs||(configs={}));var configs;(function(configs){var ActorTrainConfig=(function(_super){__extends(ActorTrainConfig,_super);function ActorTrainConfig(){return _super!==null&&_super.apply(this,arguments)||this}return ActorTrainConfig}(configs.ActorTrainConfigStruct));configs.ActorTrainConfig=ActorTrainConfig})(configs||(configs={}));var configs;(function(configs){var ActorTrainLvConfigStruct=(function(_super){__extends(ActorTrainLvConfigStruct,_super);function ActorTrainLvConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ActorTrainLvConfigStruct}(configs.BaseConfig));configs.ActorTrainLvConfigStruct=ActorTrainLvConfigStruct})(configs||(configs={}));configs.ActorTrainLvConfig=configs.ActorTrainLvConfigStruct;var configs;(function(configs){var AvatarConfigStruct=(function(_super){__extends(AvatarConfigStruct,_super);function AvatarConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(AvatarConfigStruct.prototype,"icon",{get:function(){var value=LangManager.Instance.getValue("avatar",this.id,"icon");if(!isNullOrEmpty(value)){return value}return this.zh_cn_icon},enumerable:true,configurable:true});return AvatarConfigStruct}(configs.BaseConfig));configs.AvatarConfigStruct=AvatarConfigStruct})(configs||(configs={}));var configs;(function(configs){var AvatarConfig=(function(_super){__extends(AvatarConfig,_super);function AvatarConfig(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._assetList=[];return _this}Object.defineProperty(AvatarConfig.prototype,"icon",{get:function(){var value=this.zh_cn_icon;switch(LangManager.Instance.lang){case LangType.en:value=this.en_icon;break}if(!isNullOrEmpty(value)){return value}return this.zh_cn_icon},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"modelPath",{get:function(){var arr=this.model_skin.split("/");return this.model_skin.replace("Unit/","")+"/"+arr[arr.length-1]},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"modelSkinUrl",{get:function(){if(!this.model_skin){return null}if(!this._modelSkinUrl){this._modelSkinUrl=Res.getSpinePngPath(this.model_skin)}return this._modelSkinUrl},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"modelBoneUrl",{get:function(){if(!this.model_bones){return null}if(!this._modelBoneUrl){this._modelBoneUrl=Res.getSpineSKPath(this.model_bones)}return this._modelBoneUrl},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"picUrl",{get:function(){if(!this.bg_pic){return null}if(!this._picUrl){this._picUrl=Res.getSpritePath(this.bg_pic)}return this._picUrl},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"modelSkinAssetItem",{get:function(){if(isNullOrEmpty(this.model_skin)){return null}if(!this._modelSkinAssetItem){this._modelSkinAssetItem={url:this.modelSkinUrl,type:Games.AssetItemType.Image}}return this._modelSkinAssetItem},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"modelBoneAssetItem",{get:function(){if(isNullOrEmpty(this.model_bones)){return null}if(!this._modelBoneAssetItem){this._modelBoneAssetItem={url:this.modelBoneUrl,type:Games.AssetItemType.Buffer}}return this._modelBoneAssetItem},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"picAssetItem",{get:function(){if(isNullOrEmpty(this.bg_pic)){return null}if(!this._picAssetItem){this._picAssetItem={url:this.picUrl,type:Games.AssetItemType.Image}}return this._picAssetItem},enumerable:true,configurable:true});AvatarConfig.prototype.getPackagenameByUrl=function(url){return url.split("/")[0]};Object.defineProperty(AvatarConfig.prototype,"iconUrl",{get:function(){if(!this._iconUrl){this._iconUrl="res/fspriteassets/"+this.icon+".png"}return this._iconUrl},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"iconUrl2",{get:function(){if(!this._iconUrl2){this._iconUrl2="res/fspriteassets/"+this.icon+"2.png"}return this._iconUrl2},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"bodyIconUrl",{get:function(){if(!this._bodyIconUrl){this._bodyIconUrl="res/fspriteassets/"+this.body_icon+".png"}return this._bodyIconUrl},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"pieceIconUrl",{get:function(){if(!this._pieceIconUrl){this._pieceIconUrl="res/fspriteassets/"+this.piece_icon+".png"}return this._pieceIconUrl},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"iconPackagename",{get:function(){if(isNullOrEmpty(this.icon)){return null}if(!this._iconPackagename){this._iconPackagename=this.icon.split("/")[0]}return this._iconPackagename},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"bodyIconPackageName",{get:function(){if(isNullOrEmpty(this.body_icon)){return null}if(!this._bodyIconPackageName){this._bodyIconPackageName=this.body_icon.split("/")[0]}return this._bodyIconPackageName},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"pieceIconPackageName",{get:function(){if(isNullOrEmpty(this.piece_icon)){return null}if(!this._pieceIconPackageName){this._pieceIconPackageName=this.piece_icon.split("/")[0]}return this._pieceIconPackageName},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"iconAssetItem",{get:function(){if(isNullOrEmpty(this.icon)){return null}if(!this._iconAssetItem){this._iconAssetItem={url:this.iconPackagename,type:Games.AssetItemType.FspritePackage}}return this._iconAssetItem},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"bodyIconAssetItem",{get:function(){if(isNullOrEmpty(this.body_icon)){return null}if(!this._bodyIconAssetItem){this._bodyIconAssetItem={url:this.bodyIconPackageName,type:Games.AssetItemType.FspritePackage}}return this._bodyIconAssetItem},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"pieceIconAssetItem",{get:function(){if(isNullOrEmpty(this.piece_icon)){return null}if(!this._pieceIconAssetItem){this._pieceIconAssetItem={url:this.pieceIconPackageName,type:Games.AssetItemType.FspritePackage}}return this._pieceIconAssetItem},enumerable:true,configurable:true});Object.defineProperty(AvatarConfig.prototype,"assetList",{get:function(){if(!this._assetList){this._assetList=[];if(this.iconAssetItem){this._assetList.push(this.iconAssetItem)}if(this.bodyIconAssetItem){this._assetList.push(this.bodyIconAssetItem)}if(this.pieceIconAssetItem){this._assetList.push(this.pieceIconAssetItem)}if(this.modelSkinAssetItem){this._assetList.push(this.modelSkinAssetItem)}if(this.modelBoneAssetItem){this._assetList.push(this.modelBoneAssetItem)}if(this.picAssetItem){this._assetList.push(this.picAssetItem)}}return this._assetList},enumerable:true,configurable:true});AvatarConfig.prototype.getAllAssset=function(list,dict){if(!list){return this.assetList}for(var i=0;i<this.assetList.length;i++){var item=this.assetList[i];if(dict){var key=getAssetItemKey(item);if(!dict.hasKey(key)){list.push(item);dict.add(key,item)}}else{list.push(item)}}return list};return AvatarConfig}(configs.AvatarConfigStruct));configs.AvatarConfig=AvatarConfig})(configs||(configs={}));var configs;(function(configs){var BattleLevelConfigStruct=(function(_super){__extends(BattleLevelConfigStruct,_super);function BattleLevelConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return BattleLevelConfigStruct}(configs.BaseConfig));configs.BattleLevelConfigStruct=BattleLevelConfigStruct})(configs||(configs={}));var configs;(function(configs){var BattleLevelConfig=(function(_super){__extends(BattleLevelConfig,_super);function BattleLevelConfig(){return _super!==null&&_super.apply(this,arguments)||this}return BattleLevelConfig}(configs.BattleLevelConfigStruct));configs.BattleLevelConfig=BattleLevelConfig})(configs||(configs={}));var configs;(function(configs){var BattleShootTypeConfigStruct=(function(_super){__extends(BattleShootTypeConfigStruct,_super);function BattleShootTypeConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return BattleShootTypeConfigStruct}(configs.BaseConfig));configs.BattleShootTypeConfigStruct=BattleShootTypeConfigStruct})(configs||(configs={}));var configs;(function(configs){var BattleShootTypeConfig=(function(_super){__extends(BattleShootTypeConfig,_super);function BattleShootTypeConfig(){return _super!==null&&_super.apply(this,arguments)||this}return BattleShootTypeConfig}(configs.BattleShootTypeConfigStruct));configs.BattleShootTypeConfig=BattleShootTypeConfig})(configs||(configs={}));var configs;(function(configs){var BlockLevelConfigStruct=(function(_super){__extends(BlockLevelConfigStruct,_super);function BlockLevelConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(BlockLevelConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("blockLevel",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(BlockLevelConfigStruct.prototype,"current_msg",{get:function(){var value=LangManager.Instance.getValue("blockLevel",this.id,"current_msg");if(!isNullOrEmpty(value)){return value}return this.zh_cn_current_msg},enumerable:true,configurable:true});Object.defineProperty(BlockLevelConfigStruct.prototype,"next_msg",{get:function(){var value=LangManager.Instance.getValue("blockLevel",this.id,"next_msg");if(!isNullOrEmpty(value)){return value}return this.zh_cn_next_msg},enumerable:true,configurable:true});Object.defineProperty(BlockLevelConfigStruct.prototype,"name_tips",{get:function(){var value=LangManager.Instance.getValue("blockLevel",this.id,"name_tips");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name_tips},enumerable:true,configurable:true});return BlockLevelConfigStruct}(configs.BaseConfig));configs.BlockLevelConfigStruct=BlockLevelConfigStruct})(configs||(configs={}));var configs;(function(configs){var BlockLevelConfig=(function(_super){__extends(BlockLevelConfig,_super);function BlockLevelConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(BlockLevelConfig.prototype,"nextMsg",{get:function(){var value=this.next_msg;var msg;if(value instanceof Array){msg=value.join("<br />")}else{msg=value}var nextCfg=Game.config.blockLevel.GetNextSteetCfg(this.id);if(nextCfg){var addMoney=nextCfg.daily_reward.itemNum-this.daily_reward.itemNum;var addGold=nextCfg.movie_daily_reward[0].itemNum-this.movie_daily_reward[0].itemNum;var addReward=nextCfg.movie_daily_reward[1].itemNum-this.movie_daily_reward[1].itemNum;return formatArrayNumberUnit(msg,addMoney,addGold,addReward)}return msg.format(0,0,0)},enumerable:true,configurable:true});Object.defineProperty(BlockLevelConfig.prototype,"currentMsg",{get:function(){var value=this.current_msg;var msg;if(value instanceof Array){msg=value.join("<br />")}else{msg=value}var addMoney=this.daily_reward.itemNum;var addGold=this.movie_daily_reward[0].itemNum;var addReward=this.movie_daily_reward[1].itemNum;return formatArrayNumberUnit(msg,addMoney,addGold,addReward)},enumerable:true,configurable:true});BlockLevelConfig.prototype.GetSellIcon=function(val){if(val>=this.marvel_sell){return 6028}else{if(val>=this.myth_sell){return 6027}else{if(val>=this.great_sell){return 6026}else{if(val>=this.big_sell){return 6025}else{if(val>=this.good){return 6024}else{return 6023}}}}}};BlockLevelConfig.prototype.GetSellIconUrl=function(val){var avatarId=this.GetSellIcon(val);return Game.config.avatar.GetIconUrl(avatarId)};Object.defineProperty(BlockLevelConfig.prototype,"UpgradeMenu",{get:function(){if(this.upgrade_menu&&this.upgrade_menu.length>0&&this.upgrade_menu[0]!=0){return this.upgrade_menu}return[]},enumerable:true,configurable:true});return BlockLevelConfig}(configs.BlockLevelConfigStruct));configs.BlockLevelConfig=BlockLevelConfig})(configs||(configs={}));var configs;(function(configs){var BlockRankingListConfigStruct=(function(_super){__extends(BlockRankingListConfigStruct,_super);function BlockRankingListConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return BlockRankingListConfigStruct}(configs.BaseConfig));configs.BlockRankingListConfigStruct=BlockRankingListConfigStruct})(configs||(configs={}));var configs;(function(configs){var BlockRankingListConfig=(function(_super){__extends(BlockRankingListConfig,_super);function BlockRankingListConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(BlockRankingListConfig.prototype,"reward",{get:function(){if(this.type==1){var rewards=this.box_office_reward.concat(this.extra_reward);return rewards}if(this.type==2){return this.movie_reward}return[]},enumerable:true,configurable:true});return BlockRankingListConfig}(configs.BlockRankingListConfigStruct));configs.BlockRankingListConfig=BlockRankingListConfig})(configs||(configs={}));var configs;(function(configs){var BlockWordsConfigStruct=(function(_super){__extends(BlockWordsConfigStruct,_super);function BlockWordsConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return BlockWordsConfigStruct}(configs.BaseConfig));configs.BlockWordsConfigStruct=BlockWordsConfigStruct})(configs||(configs={}));var configs;(function(configs){var BlockWordsConfig=(function(_super){__extends(BlockWordsConfig,_super);function BlockWordsConfig(){return _super!==null&&_super.apply(this,arguments)||this}return BlockWordsConfig}(configs.BlockWordsConfigStruct));configs.BlockWordsConfig=BlockWordsConfig})(configs||(configs={}));var configs;(function(configs){var BlockWordsIIConfigStruct=(function(_super){__extends(BlockWordsIIConfigStruct,_super);function BlockWordsIIConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return BlockWordsIIConfigStruct}(configs.BaseConfig));configs.BlockWordsIIConfigStruct=BlockWordsIIConfigStruct})(configs||(configs={}));configs.BlockWordsIIConfig=configs.BlockWordsIIConfigStruct;var configs;(function(configs){var BoxTargetConfigStruct=(function(_super){__extends(BoxTargetConfigStruct,_super);function BoxTargetConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(BoxTargetConfigStruct.prototype,"dialog",{get:function(){var value=LangManager.Instance.getValue("boxTarget",this.id,"dialog");if(!isNullOrEmpty(value)){return value}return this.zh_cn_dialog},enumerable:true,configurable:true});Object.defineProperty(BoxTargetConfigStruct.prototype,"title",{get:function(){var value=LangManager.Instance.getValue("boxTarget",this.id,"title");if(!isNullOrEmpty(value)){return value}return this.zh_cn_title},enumerable:true,configurable:true});Object.defineProperty(BoxTargetConfigStruct.prototype,"targettext",{get:function(){var value=LangManager.Instance.getValue("boxTarget",this.id,"targettext");if(!isNullOrEmpty(value)){return value}return this.zh_cn_targettext},enumerable:true,configurable:true});Object.defineProperty(BoxTargetConfigStruct.prototype,"timetext",{get:function(){var value=LangManager.Instance.getValue("boxTarget",this.id,"timetext");if(!isNullOrEmpty(value)){return value}return this.zh_cn_timetext},enumerable:true,configurable:true});Object.defineProperty(BoxTargetConfigStruct.prototype,"reward",{get:function(){var value=LangManager.Instance.getValue("boxTarget",this.id,"reward");if(!isNullOrEmpty(value)){return value}return this.zh_cn_reward},enumerable:true,configurable:true});Object.defineProperty(BoxTargetConfigStruct.prototype,"_final",{get:function(){var value=LangManager.Instance.getValue("boxTarget",this.id,"final");if(!isNullOrEmpty(value)){return value}return this.zh_cn__final},enumerable:true,configurable:true});Object.defineProperty(BoxTargetConfigStruct.prototype,"button",{get:function(){var value=LangManager.Instance.getValue("boxTarget",this.id,"button");if(!isNullOrEmpty(value)){return value}return this.zh_cn_button},enumerable:true,configurable:true});return BoxTargetConfigStruct}(configs.BaseConfig));configs.BoxTargetConfigStruct=BoxTargetConfigStruct})(configs||(configs={}));configs.BoxTargetConfig=configs.BoxTargetConfigStruct;var configs;(function(configs){var BuildingEffectConfigStruct=(function(_super){__extends(BuildingEffectConfigStruct,_super);function BuildingEffectConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(BuildingEffectConfigStruct.prototype,"effect_des",{get:function(){var value=LangManager.Instance.getValue("buildingEffect",this.id,"effect_des");if(!isNullOrEmpty(value)){return value}return this.zh_cn_effect_des},enumerable:true,configurable:true});return BuildingEffectConfigStruct}(configs.BaseConfig));configs.BuildingEffectConfigStruct=BuildingEffectConfigStruct})(configs||(configs={}));var configs;(function(configs){var BuildingEffectConfig=(function(_super){__extends(BuildingEffectConfig,_super);function BuildingEffectConfig(){return _super!==null&&_super.apply(this,arguments)||this}return BuildingEffectConfig}(configs.BuildingEffectConfigStruct));configs.BuildingEffectConfig=BuildingEffectConfig})(configs||(configs={}));var configs;(function(configs){var BuildingLevelConfigStruct=(function(_super){__extends(BuildingLevelConfigStruct,_super);function BuildingLevelConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(BuildingLevelConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("buildingLevel",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(BuildingLevelConfigStruct.prototype,"effect_tips",{get:function(){var value=LangManager.Instance.getValue("buildingLevel",this.id,"effect_tips");if(!isNullOrEmpty(value)){return value}return this.zh_cn_effect_tips},enumerable:true,configurable:true});Object.defineProperty(BuildingLevelConfigStruct.prototype,"level_tips",{get:function(){var value=LangManager.Instance.getValue("buildingLevel",this.id,"level_tips");if(!isNullOrEmpty(value)){return value}return this.zh_cn_level_tips},enumerable:true,configurable:true});return BuildingLevelConfigStruct}(configs.BaseConfig));configs.BuildingLevelConfigStruct=BuildingLevelConfigStruct})(configs||(configs={}));var configs;(function(configs){var BuildingLevelConfig=(function(_super){__extends(BuildingLevelConfig,_super);function BuildingLevelConfig(){return _super!==null&&_super.apply(this,arguments)||this}return BuildingLevelConfig}(configs.BuildingLevelConfigStruct));configs.BuildingLevelConfig=BuildingLevelConfig})(configs||(configs={}));var configs;(function(configs){var BusinessConfigStruct=(function(_super){__extends(BusinessConfigStruct,_super);function BusinessConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(BusinessConfigStruct.prototype,"from",{get:function(){var value=LangManager.Instance.getValue("business",this.id,"from");if(!isNullOrEmpty(value)){return value}return this.zh_cn_from},enumerable:true,configurable:true});Object.defineProperty(BusinessConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("business",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(BusinessConfigStruct.prototype,"description",{get:function(){var value=LangManager.Instance.getValue("business",this.id,"description");if(!isNullOrEmpty(value)){return value}return this.zh_cn_description},enumerable:true,configurable:true});return BusinessConfigStruct}(configs.BaseConfig));configs.BusinessConfigStruct=BusinessConfigStruct})(configs||(configs={}));var configs;(function(configs){var BusinessConfig=(function(_super){__extends(BusinessConfig,_super);function BusinessConfig(){return _super!==null&&_super.apply(this,arguments)||this}return BusinessConfig}(configs.BusinessConfigStruct));configs.BusinessConfig=BusinessConfig})(configs||(configs={}));var configs;(function(configs){var CinemaConfigStruct=(function(_super){__extends(CinemaConfigStruct,_super);function CinemaConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(CinemaConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("cinema",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return CinemaConfigStruct}(configs.BaseConfig));configs.CinemaConfigStruct=CinemaConfigStruct})(configs||(configs={}));var configs;(function(configs){var CinemaConfig=(function(_super){__extends(CinemaConfig,_super);function CinemaConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(CinemaConfig.prototype,"iconUrl",{get:function(){var avatarCfg=Game.config.avatar.getConfig(this.pic);if(avatarCfg){return avatarCfg.iconUrl}return""},enumerable:true,configurable:true});Object.defineProperty(CinemaConfig.prototype,"favoriteActor",{get:function(){var cfg=Game.config.property.getConfig(this.favorite_actor);if(cfg){return cfg.name}return""},enumerable:true,configurable:true});Object.defineProperty(CinemaConfig.prototype,"proportionString",{get:function(){var prop=Math.floor(this.proportion*100)+"%";return Games.TEXT.StreetCinemaInfo.format(formatNumberUnit(this.num),prop)},enumerable:true,configurable:true});return CinemaConfig}(configs.CinemaConfigStruct));configs.CinemaConfig=CinemaConfig})(configs||(configs={}));var configs;(function(configs){var CityConfigStruct=(function(_super){__extends(CityConfigStruct,_super);function CityConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(CityConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("city",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return CityConfigStruct}(configs.BaseConfig));configs.CityConfigStruct=CityConfigStruct})(configs||(configs={}));var configs;(function(configs){var CityConfig=(function(_super){__extends(CityConfig,_super);function CityConfig(){return _super!==null&&_super.apply(this,arguments)||this}CityConfig.prototype.GetStreetList=function(){var list=this.street_id;return list};Object.defineProperty(CityConfig.prototype,"Require",{get:function(){if(this._requireList==null){this._requireList=[];var list=[];if(this.envoy1_art!=0){list.push({type:Games.ActorRequireEnum.art,value:this.envoy1_art})}if(this.envoy1_entertainment!=0){list.push({type:Games.ActorRequireEnum.entertainment,value:this.envoy1_entertainment})}if(this.envoy1_performance!=0){list.push({type:Games.ActorRequireEnum.performance,value:this.envoy1_performance})}if(this.envoy1_plot!=0){list.push({type:Games.ActorRequireEnum.plot,value:this.envoy1_plot})}if(this.envoy1_scene!=0){list.push({type:Games.ActorRequireEnum.scene,value:this.envoy1_scene})}if(this.envoy1_sex!=0){list.push({type:Games.ActorRequireEnum.sex,value:this.envoy1_sex})}if(this.envoy1_age!=0){list.push({type:Games.ActorRequireEnum.age,value:this.envoy1_age})}if(this.envoy1_Continents!=0){list.push({type:Games.ActorRequireEnum.Continents,value:this.envoy1_Continents})}if(this.envoy1_type!=0){list.push({type:Games.ActorRequireEnum.type,value:this.envoy1_type})}this._requireList.push(list);list=[];if(this.envoy2_art!=0){list.push({type:Games.ActorRequireEnum.art,value:this.envoy2_art})}if(this.envoy2_entertainment!=0){list.push({type:Games.ActorRequireEnum.entertainment,value:this.envoy2_entertainment})}if(this.envoy2_performance!=0){list.push({type:Games.ActorRequireEnum.performance,value:this.envoy2_performance})}if(this.envoy2_plot!=0){list.push({type:Games.ActorRequireEnum.plot,value:this.envoy2_plot})}if(this.envoy2_scene!=0){list.push({type:Games.ActorRequireEnum.scene,value:this.envoy2_scene})}if(this.envoy2_sex!=0){list.push({type:Games.ActorRequireEnum.sex,value:this.envoy2_sex})}if(this.envoy2_age!=0){list.push({type:Games.ActorRequireEnum.age,value:this.envoy2_age})}if(this.envoy2_Continents!=0){list.push({type:Games.ActorRequireEnum.Continents,value:this.envoy2_Continents})}if(this.envoy2_type!=0){list.push({type:Games.ActorRequireEnum.type,value:this.envoy2_type})}this._requireList.push(list);list=[];if(this.envoy3_art!=0){list.push({type:Games.ActorRequireEnum.art,value:this.envoy3_art})}if(this.envoy3_entertainment!=0){list.push({type:Games.ActorRequireEnum.entertainment,value:this.envoy3_entertainment})}if(this.envoy3_performance!=0){list.push({type:Games.ActorRequireEnum.performance,value:this.envoy3_performance})}if(this.envoy3_plot!=0){list.push({type:Games.ActorRequireEnum.plot,value:this.envoy3_plot})}if(this.envoy3_scene!=0){list.push({type:Games.ActorRequireEnum.scene,value:this.envoy3_scene})}if(this.envoy3_sex!=0){list.push({type:Games.ActorRequireEnum.sex,value:this.envoy3_sex})}if(this.envoy3_age!=0){list.push({type:Games.ActorRequireEnum.age,value:this.envoy3_age})}if(this.envoy3_Continents!=0){list.push({type:Games.ActorRequireEnum.Continents,value:this.envoy3_Continents})}if(this.envoy3_type!=0){list.push({type:Games.ActorRequireEnum.type,value:this.envoy3_type})}this._requireList.push(list);list=[];if(this.envoy4_art!=0){list.push({type:Games.ActorRequireEnum.art,value:this.envoy4_art})}if(this.envoy4_entertainment!=0){list.push({type:Games.ActorRequireEnum.entertainment,value:this.envoy4_entertainment})}if(this.envoy4_performance!=0){list.push({type:Games.ActorRequireEnum.performance,value:this.envoy4_performance})}if(this.envoy4_plot!=0){list.push({type:Games.ActorRequireEnum.plot,value:this.envoy4_plot})}if(this.envoy4_scene!=0){list.push({type:Games.ActorRequireEnum.scene,value:this.envoy4_scene})}if(this.envoy4_sex!=0){list.push({type:Games.ActorRequireEnum.sex,value:this.envoy4_sex})}if(this.envoy4_age!=0){list.push({type:Games.ActorRequireEnum.age,value:this.envoy4_age})}if(this.envoy4_Continents!=0){list.push({type:Games.ActorRequireEnum.Continents,value:this.envoy4_Continents})}if(this.envoy4_type!=0){list.push({type:Games.ActorRequireEnum.type,value:this.envoy4_type})}this._requireList.push(list);list=[];if(this.envoy5_art!=0){list.push({type:Games.ActorRequireEnum.art,value:this.envoy5_art})}if(this.envoy5_entertainment!=0){list.push({type:Games.ActorRequireEnum.entertainment,value:this.envoy5_entertainment})}if(this.envoy5_performance!=0){list.push({type:Games.ActorRequireEnum.performance,value:this.envoy5_performance})}if(this.envoy5_plot!=0){list.push({type:Games.ActorRequireEnum.plot,value:this.envoy5_plot})}if(this.envoy5_scene!=0){list.push({type:Games.ActorRequireEnum.scene,value:this.envoy5_scene})}if(this.envoy5_sex!=0){list.push({type:Games.ActorRequireEnum.sex,value:this.envoy5_sex})}if(this.envoy5_age!=0){list.push({type:Games.ActorRequireEnum.age,value:this.envoy5_age})}if(this.envoy5_Continents!=0){list.push({type:Games.ActorRequireEnum.Continents,value:this.envoy5_Continents})}if(this.envoy5_type!=0){list.push({type:Games.ActorRequireEnum.type,value:this.envoy5_type})}this._requireList.push(list)}return this._requireList},enumerable:true,configurable:true});return CityConfig}(configs.CityConfigStruct));configs.CityConfig=CityConfig})(configs||(configs={}));var configs;(function(configs){var CityPopularizeConfigStruct=(function(_super){__extends(CityPopularizeConfigStruct,_super);function CityPopularizeConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(CityPopularizeConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("cityPopularize",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return CityPopularizeConfigStruct}(configs.BaseConfig));configs.CityPopularizeConfigStruct=CityPopularizeConfigStruct})(configs||(configs={}));var configs;(function(configs){var CityPopularizeConfig=(function(_super){__extends(CityPopularizeConfig,_super);function CityPopularizeConfig(){return _super!==null&&_super.apply(this,arguments)||this}return CityPopularizeConfig}(configs.CityPopularizeConfigStruct));configs.CityPopularizeConfig=CityPopularizeConfig})(configs||(configs={}));var configs;(function(configs){var CompleteConfigStruct=(function(_super){__extends(CompleteConfigStruct,_super);function CompleteConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return CompleteConfigStruct}(configs.BaseConfig));configs.CompleteConfigStruct=CompleteConfigStruct})(configs||(configs={}));configs.CompleteConfig=configs.CompleteConfigStruct;var configs;(function(configs){var CompoundConfigStruct=(function(_super){__extends(CompoundConfigStruct,_super);function CompoundConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return CompoundConfigStruct}(configs.BaseConfig));configs.CompoundConfigStruct=CompoundConfigStruct})(configs||(configs={}));var configs;(function(configs){var CompoundConfig=(function(_super){__extends(CompoundConfig,_super);function CompoundConfig(){return _super!==null&&_super.apply(this,arguments)||this}return CompoundConfig}(configs.CompoundConfigStruct));configs.CompoundConfig=CompoundConfig})(configs||(configs={}));var configs;(function(configs){var CooperateTaskConfigStruct=(function(_super){__extends(CooperateTaskConfigStruct,_super);function CooperateTaskConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return CooperateTaskConfigStruct}(configs.BaseConfig));configs.CooperateTaskConfigStruct=CooperateTaskConfigStruct})(configs||(configs={}));var configs;(function(configs){var CooperateTaskConfig=(function(_super){__extends(CooperateTaskConfig,_super);function CooperateTaskConfig(){return _super!==null&&_super.apply(this,arguments)||this}return CooperateTaskConfig}(configs.CooperateTaskConfigStruct));configs.CooperateTaskConfig=CooperateTaskConfig})(configs||(configs={}));var configs;(function(configs){var CountActivitiesConfigStruct=(function(_super){__extends(CountActivitiesConfigStruct,_super);function CountActivitiesConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return CountActivitiesConfigStruct}(configs.BaseConfig));configs.CountActivitiesConfigStruct=CountActivitiesConfigStruct})(configs||(configs={}));configs.CountActivitiesConfig=configs.CountActivitiesConfigStruct;var configs;(function(configs){var CountryConfigStruct=(function(_super){__extends(CountryConfigStruct,_super);function CountryConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(CountryConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("country",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return CountryConfigStruct}(configs.BaseConfig));configs.CountryConfigStruct=CountryConfigStruct})(configs||(configs={}));var configs;(function(configs){var CountryConfig=(function(_super){__extends(CountryConfig,_super);function CountryConfig(){return _super!==null&&_super.apply(this,arguments)||this}return CountryConfig}(configs.CountryConfigStruct));configs.CountryConfig=CountryConfig})(configs||(configs={}));var configs;(function(configs){var CupPackageConfigStruct=(function(_super){__extends(CupPackageConfigStruct,_super);function CupPackageConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(CupPackageConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("cupPackage",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(CupPackageConfigStruct.prototype,"des",{get:function(){var value=LangManager.Instance.getValue("cupPackage",this.id,"des");if(!isNullOrEmpty(value)){return value}return this.zh_cn_des},enumerable:true,configurable:true});return CupPackageConfigStruct}(configs.BaseConfig));configs.CupPackageConfigStruct=CupPackageConfigStruct})(configs||(configs={}));configs.CupPackageConfig=configs.CupPackageConfigStruct;var configs;(function(configs){var DailySignConfigStruct=(function(_super){__extends(DailySignConfigStruct,_super);function DailySignConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return DailySignConfigStruct}(configs.BaseConfig));configs.DailySignConfigStruct=DailySignConfigStruct})(configs||(configs={}));var configs;(function(configs){var DailySignConfig=(function(_super){__extends(DailySignConfig,_super);function DailySignConfig(){return _super!==null&&_super.apply(this,arguments)||this}return DailySignConfig}(configs.DailySignConfigStruct));configs.DailySignConfig=DailySignConfig})(configs||(configs={}));var configs;(function(configs){var DailySignTrailerConfigStruct=(function(_super){__extends(DailySignTrailerConfigStruct,_super);function DailySignTrailerConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(DailySignTrailerConfigStruct.prototype,"info",{get:function(){var value=LangManager.Instance.getValue("dailySignTrailer",this.id,"info");if(!isNullOrEmpty(value)){return value}return this.zh_cn_info},enumerable:true,configurable:true});return DailySignTrailerConfigStruct}(configs.BaseConfig));configs.DailySignTrailerConfigStruct=DailySignTrailerConfigStruct})(configs||(configs={}));configs.DailySignTrailerConfig=configs.DailySignTrailerConfigStruct;var configs;(function(configs){var DialogueConfigStruct=(function(_super){__extends(DialogueConfigStruct,_super);function DialogueConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(DialogueConfigStruct.prototype,"content",{get:function(){var value=LangManager.Instance.getValue("dialogue",this.id,"content");if(!isNullOrEmpty(value)){return value}return this.zh_cn_content},enumerable:true,configurable:true});return DialogueConfigStruct}(configs.BaseConfig));configs.DialogueConfigStruct=DialogueConfigStruct})(configs||(configs={}));var configs;(function(configs){var DialogueConfig=(function(_super){__extends(DialogueConfig,_super);function DialogueConfig(){return _super!==null&&_super.apply(this,arguments)||this}return DialogueConfig}(configs.DialogueConfigStruct));configs.DialogueConfig=DialogueConfig})(configs||(configs={}));var configs;(function(configs){var DTActorCharacterStruct=(function(_super){__extends(DTActorCharacterStruct,_super);function DTActorCharacterStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTActorCharacterStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTActorCharacter();config.character=csvGetInt(csv,0);config.lv=csvGetInt(csv,1);config.property=csvGetInt(csv,2);return config};DTActorCharacterStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTActorCharacter.parse(csv[i]))}return list};return DTActorCharacterStruct}(configs.BaseConfig));configs.DTActorCharacterStruct=DTActorCharacterStruct})(configs||(configs={}));var configs;(function(configs){var DTActorCharacter=(function(_super){__extends(DTActorCharacter,_super);function DTActorCharacter(){return _super!==null&&_super.apply(this,arguments)||this}return DTActorCharacter}(configs.DTActorCharacterStruct));configs.DTActorCharacter=DTActorCharacter})(configs||(configs={}));var configs;(function(configs){var DTActorFeatureStruct=(function(_super){__extends(DTActorFeatureStruct,_super);function DTActorFeatureStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTActorFeatureStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTActorFeature();config.feature=csvGetInt(csv,0);config.lv=csvGetInt(csv,1);config.property=csvGetInt(csv,2);return config};DTActorFeatureStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTActorFeature.parse(csv[i]))}return list};return DTActorFeatureStruct}(configs.BaseConfig));configs.DTActorFeatureStruct=DTActorFeatureStruct})(configs||(configs={}));var configs;(function(configs){var DTActorFeature=(function(_super){__extends(DTActorFeature,_super);function DTActorFeature(){return _super!==null&&_super.apply(this,arguments)||this}return DTActorFeature}(configs.DTActorFeatureStruct));configs.DTActorFeature=DTActorFeature})(configs||(configs={}));var configs;(function(configs){var DTActorSkillStruct=(function(_super){__extends(DTActorSkillStruct,_super);function DTActorSkillStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTActorSkillStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTActorSkill();config.group_id=csvGetInt(csv,0);config.lv=csvGetInt(csv,1);return config};DTActorSkillStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTActorSkill.parse(csv[i]))}return list};return DTActorSkillStruct}(configs.BaseConfig));configs.DTActorSkillStruct=DTActorSkillStruct})(configs||(configs={}));var configs;(function(configs){var DTActorSkill=(function(_super){__extends(DTActorSkill,_super);function DTActorSkill(){return _super!==null&&_super.apply(this,arguments)||this}return DTActorSkill}(configs.DTActorSkillStruct));configs.DTActorSkill=DTActorSkill})(configs||(configs={}));var configs;(function(configs){var DTActorStoryStruct=(function(_super){__extends(DTActorStoryStruct,_super);function DTActorStoryStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTActorStoryStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTActorStory();config.story=csvGetInt(csv,0);config.lv=csvGetInt(csv,1);config.property=csvGetInt(csv,2);return config};DTActorStoryStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTActorStory.parse(csv[i]))}return list};return DTActorStoryStruct}(configs.BaseConfig));configs.DTActorStoryStruct=DTActorStoryStruct})(configs||(configs={}));var configs;(function(configs){var DTActorStory=(function(_super){__extends(DTActorStory,_super);function DTActorStory(){return _super!==null&&_super.apply(this,arguments)||this}return DTActorStory}(configs.DTActorStoryStruct));configs.DTActorStory=DTActorStory})(configs||(configs={}));var configs;(function(configs){var DTBuildingReqStruct=(function(_super){__extends(DTBuildingReqStruct,_super);function DTBuildingReqStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTBuildingReqStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTBuildingReq();config.type=csvGetInt(csv,0);config.level=csvGetInt(csv,1);return config};DTBuildingReqStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTBuildingReq.parse(csv[i]))}return list};return DTBuildingReqStruct}(configs.BaseConfig));configs.DTBuildingReqStruct=DTBuildingReqStruct})(configs||(configs={}));var configs;(function(configs){var DTBuildingReq=(function(_super){__extends(DTBuildingReq,_super);function DTBuildingReq(){return _super!==null&&_super.apply(this,arguments)||this}return DTBuildingReq}(configs.DTBuildingReqStruct));configs.DTBuildingReq=DTBuildingReq})(configs||(configs={}));var configs;(function(configs){var DTDateStruct=(function(_super){__extends(DTDateStruct,_super);function DTDateStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTDateStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTDate();config.y=csvGetInt(csv,0);config.m=csvGetInt(csv,1);config.d=csvGetInt(csv,2);return config};DTDateStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTDate.parse(csv[i]))}return list};return DTDateStruct}(configs.BaseConfig));configs.DTDateStruct=DTDateStruct})(configs||(configs={}));configs.DTDate=configs.DTDateStruct;var configs;(function(configs){var DTDateTimeStruct=(function(_super){__extends(DTDateTimeStruct,_super);function DTDateTimeStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTDateTimeStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTDateTime();config.y=csvGetInt(csv,0);config.m=csvGetInt(csv,1);config.d=csvGetInt(csv,2);config.h=csvGetInt(csv,3);config.mm=csvGetInt(csv,4);config.s=csvGetInt(csv,5);return config};DTDateTimeStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTDateTime.parse(csv[i]))}return list};return DTDateTimeStruct}(configs.BaseConfig));configs.DTDateTimeStruct=DTDateTimeStruct})(configs||(configs={}));configs.DTDateTime=configs.DTDateTimeStruct;var configs;(function(configs){var DTDropStruct=(function(_super){__extends(DTDropStruct,_super);function DTDropStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTDropStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTDrop();config.x=csvGetInt(csv,0);config.y=csvGetFloat(csv,1);return config};DTDropStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTDrop.parse(csv[i]))}return list};return DTDropStruct}(configs.BaseConfig));configs.DTDropStruct=DTDropStruct})(configs||(configs={}));configs.DTDrop=configs.DTDropStruct;var configs;(function(configs){var DTItemNumStruct=(function(_super){__extends(DTItemNumStruct,_super);function DTItemNumStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTItemNumStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTItemNum();config.itemId=csvGetInt(csv,0);config.itemNum=csvGetInt(csv,1);return config};DTItemNumStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTItemNum.parse(csv[i]))}return list};return DTItemNumStruct}(configs.BaseConfig));configs.DTItemNumStruct=DTItemNumStruct})(configs||(configs={}));var configs;(function(configs){var DTItemNum=(function(_super){__extends(DTItemNum,_super);function DTItemNum(){return _super!==null&&_super.apply(this,arguments)||this}DTItemNum.parse=function(txt){var csv=toStringArray(txt);if(csv.length<2){return null}var config=new DTItemNum();config.itemId=csvGetInt(csv,0);config.itemNum=csvGetInt(csv,1);return config};DTItemNum.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){var item=DTItemNum.parse(csv[i]);if(item){list.push(DTItemNum.parse(csv[i]))}}return list};Object.defineProperty(DTItemNum.prototype,"itemConfig",{get:function(){return Game.config.item.getConfig(this.itemId)},enumerable:true,configurable:true});Object.defineProperty(DTItemNum.prototype,"itemType",{get:function(){if(this.itemConfig){return this.itemConfig.type}return 0},enumerable:true,configurable:true});Object.defineProperty(DTItemNum.prototype,"itemName",{get:function(){if(this.itemConfig){return this.itemConfig.name}return this.itemId+"\u6CA1\u914D\u7F6E\u8BE5\u7269\u54C1"},enumerable:true,configurable:true});Object.defineProperty(DTItemNum.prototype,"itemDes",{get:function(){if(this.itemConfig){return this.itemConfig.item_des}return this.itemId+"\u6CA1\u914D\u7F6E\u8BE5\u7269\u54C1"},enumerable:true,configurable:true});Object.defineProperty(DTItemNum.prototype,"itemStar",{get:function(){if(this.itemConfig){if(this.itemConfig.star==0){return 0}var propertyCfg=Game.config.property.getConfig(this.itemConfig.star);if(propertyCfg){var star=Number(propertyCfg.zh_cn_name);if(star==null){console.log("Error Item Star");return 0}star=star<0?0:star;star=star>6?6:star;return star}}return 0},enumerable:true,configurable:true});Object.defineProperty(DTItemNum.prototype,"itemIconUrl",{get:function(){if(this.itemConfig){var avatarConfig=Game.config.avatar.getConfig(this.itemConfig.icon);if(avatarConfig){return avatarConfig.iconUrl}}return null},enumerable:true,configurable:true});Object.defineProperty(DTItemNum.prototype,"itemNumTxt",{get:function(){return formatNumberUnit(this.itemNum)},enumerable:true,configurable:true});Object.defineProperty(DTItemNum.prototype,"isBagType",{get:function(){return this.itemType==4||this.itemType==5||this.itemType==6||this.itemType==7||this.itemType==8||this.itemType==9},enumerable:true,configurable:true});return DTItemNum}(configs.DTItemNumStruct));configs.DTItemNum=DTItemNum})(configs||(configs={}));var configs;(function(configs){var DTlValue2Struct=(function(_super){__extends(DTlValue2Struct,_super);function DTlValue2Struct(){return _super!==null&&_super.apply(this,arguments)||this}DTlValue2Struct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTlValue2();config.v1=csvGetInt(csv,0);config.v2=csvGetInt(csv,1);return config};DTlValue2Struct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTlValue2.parse(csv[i]))}return list};return DTlValue2Struct}(configs.BaseConfig));configs.DTlValue2Struct=DTlValue2Struct})(configs||(configs={}));var configs;(function(configs){var DTlValue2=(function(_super){__extends(DTlValue2,_super);function DTlValue2(){return _super!==null&&_super.apply(this,arguments)||this}return DTlValue2}(configs.DTlValue2Struct));configs.DTlValue2=DTlValue2})(configs||(configs={}));var configs;(function(configs){var DTlValue3Struct=(function(_super){__extends(DTlValue3Struct,_super);function DTlValue3Struct(){return _super!==null&&_super.apply(this,arguments)||this}DTlValue3Struct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTlValue3();config.v1=csvGetInt(csv,0);config.v2=csvGetInt(csv,1);config.v3=csvGetInt(csv,2);return config};DTlValue3Struct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTlValue3.parse(csv[i]))}return list};return DTlValue3Struct}(configs.BaseConfig));configs.DTlValue3Struct=DTlValue3Struct})(configs||(configs={}));var configs;(function(configs){var DTlValue3=(function(_super){__extends(DTlValue3,_super);function DTlValue3(){return _super!==null&&_super.apply(this,arguments)||this}return DTlValue3}(configs.DTlValue3Struct));configs.DTlValue3=DTlValue3})(configs||(configs={}));var configs;(function(configs){var DTPartsStruct=(function(_super){__extends(DTPartsStruct,_super);function DTPartsStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTPartsStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTParts();config.v1=csvGetString(csv,0);config.v2=csvGetString(csv,1);return config};DTPartsStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTParts.parse(csv[i]))}return list};return DTPartsStruct}(configs.BaseConfig));configs.DTPartsStruct=DTPartsStruct})(configs||(configs={}));configs.DTParts=configs.DTPartsStruct;var configs;(function(configs){var DTPerformActoinStruct=(function(_super){__extends(DTPerformActoinStruct,_super);function DTPerformActoinStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTPerformActoinStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTPerformActoin();config.v1=csvGetInt(csv,0);config.v2=csvGetInt(csv,1);config.v3=csvGetInt(csv,2);return config};DTPerformActoinStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTPerformActoin.parse(csv[i]))}return list};return DTPerformActoinStruct}(configs.BaseConfig));configs.DTPerformActoinStruct=DTPerformActoinStruct})(configs||(configs={}));configs.DTPerformActoin=configs.DTPerformActoinStruct;var configs;(function(configs){var DTPerformSpeakStruct=(function(_super){__extends(DTPerformSpeakStruct,_super);function DTPerformSpeakStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTPerformSpeakStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTPerformSpeak();config.v1=csvGetInt(csv,0);config.v2=csvGetInt(csv,1);config.v3=csvGetInt(csv,2);return config};DTPerformSpeakStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTPerformSpeak.parse(csv[i]))}return list};return DTPerformSpeakStruct}(configs.BaseConfig));configs.DTPerformSpeakStruct=DTPerformSpeakStruct})(configs||(configs={}));configs.DTPerformSpeak=configs.DTPerformSpeakStruct;var configs;(function(configs){var DTProficiencyStruct=(function(_super){__extends(DTProficiencyStruct,_super);function DTProficiencyStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTProficiencyStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTProficiency();config.v1=csvGetInt(csv,0);config.v2=csvGetInt(csv,1);return config};DTProficiencyStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTProficiency.parse(csv[i]))}return list};return DTProficiencyStruct}(configs.BaseConfig));configs.DTProficiencyStruct=DTProficiencyStruct})(configs||(configs={}));configs.DTProficiency=configs.DTProficiencyStruct;var configs;(function(configs){var DTRandomIntervalStruct=(function(_super){__extends(DTRandomIntervalStruct,_super);function DTRandomIntervalStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTRandomIntervalStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTRandomInterval();config.num1=csvGetInt(csv,0);config.num2=csvGetInt(csv,1);return config};DTRandomIntervalStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTRandomInterval.parse(csv[i]))}return list};return DTRandomIntervalStruct}(configs.BaseConfig));configs.DTRandomIntervalStruct=DTRandomIntervalStruct})(configs||(configs={}));var configs;(function(configs){var DTRandomInterval=(function(_super){__extends(DTRandomInterval,_super);function DTRandomInterval(){return _super!==null&&_super.apply(this,arguments)||this}return DTRandomInterval}(configs.DTRandomIntervalStruct));configs.DTRandomInterval=DTRandomInterval})(configs||(configs={}));var configs;(function(configs){var DTShootTypeStruct=(function(_super){__extends(DTShootTypeStruct,_super);function DTShootTypeStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTShootTypeStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTShootType();config.shoottypeid=csvGetInt(csv,0);config.rate=csvGetInt(csv,1);return config};DTShootTypeStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTShootType.parse(csv[i]))}return list};return DTShootTypeStruct}(configs.BaseConfig));configs.DTShootTypeStruct=DTShootTypeStruct})(configs||(configs={}));var configs;(function(configs){var DTShootType=(function(_super){__extends(DTShootType,_super);function DTShootType(){return _super!==null&&_super.apply(this,arguments)||this}return DTShootType}(configs.DTShootTypeStruct));configs.DTShootType=DTShootType})(configs||(configs={}));var configs;(function(configs){var DTStoryEffectStruct=(function(_super){__extends(DTStoryEffectStruct,_super);function DTStoryEffectStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTStoryEffectStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTStoryEffect();config.storyeffect=csvGetInt(csv,0);config.rate=csvGetInt(csv,1);return config};DTStoryEffectStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTStoryEffect.parse(csv[i]))}return list};return DTStoryEffectStruct}(configs.BaseConfig));configs.DTStoryEffectStruct=DTStoryEffectStruct})(configs||(configs={}));var configs;(function(configs){var DTStoryEffect=(function(_super){__extends(DTStoryEffect,_super);function DTStoryEffect(){return _super!==null&&_super.apply(this,arguments)||this}return DTStoryEffect}(configs.DTStoryEffectStruct));configs.DTStoryEffect=DTStoryEffect})(configs||(configs={}));var configs;(function(configs){var DTStoryNumStruct=(function(_super){__extends(DTStoryNumStruct,_super);function DTStoryNumStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTStoryNumStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTStoryNum();config.star=csvGetInt(csv,0);config.num=csvGetInt(csv,1);return config};DTStoryNumStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTStoryNum.parse(csv[i]))}return list};return DTStoryNumStruct}(configs.BaseConfig));configs.DTStoryNumStruct=DTStoryNumStruct})(configs||(configs={}));var configs;(function(configs){var DTStoryNum=(function(_super){__extends(DTStoryNum,_super);function DTStoryNum(){return _super!==null&&_super.apply(this,arguments)||this}return DTStoryNum}(configs.DTStoryNumStruct));configs.DTStoryNum=DTStoryNum})(configs||(configs={}));var configs;(function(configs){var DTTimeStruct=(function(_super){__extends(DTTimeStruct,_super);function DTTimeStruct(){return _super!==null&&_super.apply(this,arguments)||this}DTTimeStruct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTTime();config.h=csvGetInt(csv,0);config.mm=csvGetInt(csv,1);config.s=csvGetInt(csv,2);return config};DTTimeStruct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTTime.parse(csv[i]))}return list};return DTTimeStruct}(configs.BaseConfig));configs.DTTimeStruct=DTTimeStruct})(configs||(configs={}));configs.DTTime=configs.DTTimeStruct;var configs;(function(configs){var DTVector2Struct=(function(_super){__extends(DTVector2Struct,_super);function DTVector2Struct(){return _super!==null&&_super.apply(this,arguments)||this}DTVector2Struct.parse=function(txt){var csv=toStringArray(txt);var config=new configs.DTVector2();config.x=csvGetFloat(csv,0);config.y=csvGetFloat(csv,1);return config};DTVector2Struct.parseArray=function(txt){var csv=toStringArray(txt,/[;]/);var list=[];for(var i=0;i<csv.length;i++){list.push(configs.DTVector2.parse(csv[i]))}return list};return DTVector2Struct}(configs.BaseConfig));configs.DTVector2Struct=DTVector2Struct})(configs||(configs={}));var configs;(function(configs){var DTVector2=(function(_super){__extends(DTVector2,_super);function DTVector2(){return _super!==null&&_super.apply(this,arguments)||this}return DTVector2}(configs.DTVector2Struct));configs.DTVector2=DTVector2})(configs||(configs={}));var configs;(function(configs){var EventConfigStruct=(function(_super){__extends(EventConfigStruct,_super);function EventConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return EventConfigStruct}(configs.BaseConfig));configs.EventConfigStruct=EventConfigStruct})(configs||(configs={}));configs.EventConfig=configs.EventConfigStruct;var configs;(function(configs){var FloorConfigStruct=(function(_super){__extends(FloorConfigStruct,_super);function FloorConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(FloorConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("floor",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return FloorConfigStruct}(configs.BaseConfig));configs.FloorConfigStruct=FloorConfigStruct})(configs||(configs={}));var configs;(function(configs){var FloorConfig=(function(_super){__extends(FloorConfig,_super);function FloorConfig(){return _super!==null&&_super.apply(this,arguments)||this}return FloorConfig}(configs.FloorConfigStruct));configs.FloorConfig=FloorConfig})(configs||(configs={}));var configs;(function(configs){var GameLevelConfigStruct=(function(_super){__extends(GameLevelConfigStruct,_super);function GameLevelConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(GameLevelConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("gameLevel",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return GameLevelConfigStruct}(configs.BaseConfig));configs.GameLevelConfigStruct=GameLevelConfigStruct})(configs||(configs={}));var configs;(function(configs){var GameLevelConfig=(function(_super){__extends(GameLevelConfig,_super);function GameLevelConfig(){return _super!==null&&_super.apply(this,arguments)||this}return GameLevelConfig}(configs.GameLevelConfigStruct));configs.GameLevelConfig=GameLevelConfig})(configs||(configs={}));var configs;(function(configs){var GameRandomNameConfigStruct=(function(_super){__extends(GameRandomNameConfigStruct,_super);function GameRandomNameConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(GameRandomNameConfigStruct.prototype,"names",{get:function(){var value=LangManager.Instance.getValue("gameRandomName",this.id,"names");if(!isNullOrEmpty(value)){return value}return this.zh_cn_names},enumerable:true,configurable:true});return GameRandomNameConfigStruct}(configs.BaseConfig));configs.GameRandomNameConfigStruct=GameRandomNameConfigStruct})(configs||(configs={}));var configs;(function(configs){var GameRandomNameConfig=(function(_super){__extends(GameRandomNameConfig,_super);function GameRandomNameConfig(){return _super!==null&&_super.apply(this,arguments)||this}return GameRandomNameConfig}(configs.GameRandomNameConfigStruct));configs.GameRandomNameConfig=GameRandomNameConfig})(configs||(configs={}));var configs;(function(configs){var GameVersionConfigStruct=(function(_super){__extends(GameVersionConfigStruct,_super);function GameVersionConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return GameVersionConfigStruct}(configs.BaseConfig));configs.GameVersionConfigStruct=GameVersionConfigStruct})(configs||(configs={}));configs.GameVersionConfig=configs.GameVersionConfigStruct;var configs;(function(configs){var GiftPackageConfigStruct=(function(_super){__extends(GiftPackageConfigStruct,_super);function GiftPackageConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return GiftPackageConfigStruct}(configs.BaseConfig));configs.GiftPackageConfigStruct=GiftPackageConfigStruct})(configs||(configs={}));var configs;(function(configs){var GiftPackageConfig=(function(_super){__extends(GiftPackageConfig,_super);function GiftPackageConfig(){return _super!==null&&_super.apply(this,arguments)||this}return GiftPackageConfig}(configs.GiftPackageConfigStruct));configs.GiftPackageConfig=GiftPackageConfig})(configs||(configs={}));var configs;(function(configs){var GlobalConfigStruct=(function(_super){__extends(GlobalConfigStruct,_super);function GlobalConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return GlobalConfigStruct}(configs.BaseConfig));configs.GlobalConfigStruct=GlobalConfigStruct})(configs||(configs={}));var configs;(function(configs){var GlobalConfig=(function(_super){__extends(GlobalConfig,_super);function GlobalConfig(){return _super!==null&&_super.apply(this,arguments)||this}GlobalConfig.getConfig=function(key){return Game.config.global.getConfig(key)};GlobalConfig.getValue=function(key){var config=GlobalConfig.getConfig(key);if(config){return config.value}return 0};GlobalConfig.getValue1=function(key){var config=GlobalConfig.getConfig(key);if(config){return config.value1}return[]};GlobalConfig.getValue2=function(key){var config=GlobalConfig.getConfig(key);if(config){return config.value2}return[]};GlobalConfig.getValue3=function(key){var config=GlobalConfig.getConfig(key);if(config){return config.value3}return[]};GlobalConfig.getValue4=function(key){var config=GlobalConfig.getConfig(key);if(config){return config.value4}return""};return GlobalConfig}(configs.GlobalConfigStruct));configs.GlobalConfig=GlobalConfig})(configs||(configs={}));var configs;(function(configs){var GuidePathConfigStruct=(function(_super){__extends(GuidePathConfigStruct,_super);function GuidePathConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return GuidePathConfigStruct}(configs.BaseConfig));configs.GuidePathConfigStruct=GuidePathConfigStruct})(configs||(configs={}));configs.GuidePathConfig=configs.GuidePathConfigStruct;var configs;(function(configs){var GuidesystemConfigStruct=(function(_super){__extends(GuidesystemConfigStruct,_super);function GuidesystemConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(GuidesystemConfigStruct.prototype,"content",{get:function(){var value=LangManager.Instance.getValue("guidesystem",this.id,"content");if(!isNullOrEmpty(value)){return value}return this.cn_content},enumerable:true,configurable:true});return GuidesystemConfigStruct}(configs.BaseConfig));configs.GuidesystemConfigStruct=GuidesystemConfigStruct})(configs||(configs={}));var configs;(function(configs){var GuidesystemConfig=(function(_super){__extends(GuidesystemConfig,_super);function GuidesystemConfig(){return _super!==null&&_super.apply(this,arguments)||this}return GuidesystemConfig}(configs.GuidesystemConfigStruct));configs.GuidesystemConfig=GuidesystemConfig})(configs||(configs={}));var configs;(function(configs){var HeadPortraitConfigStruct=(function(_super){__extends(HeadPortraitConfigStruct,_super);function HeadPortraitConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(HeadPortraitConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("headPortrait",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return HeadPortraitConfigStruct}(configs.BaseConfig));configs.HeadPortraitConfigStruct=HeadPortraitConfigStruct})(configs||(configs={}));var configs;(function(configs){var HeadPortraitConfig=(function(_super){__extends(HeadPortraitConfig,_super);function HeadPortraitConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(HeadPortraitConfig.prototype,"iconUrl",{get:function(){var avatarConfig=Game.config.avatar.getConfig(this.icon);if(avatarConfig){return avatarConfig.iconUrl}},enumerable:true,configurable:true});return HeadPortraitConfig}(configs.HeadPortraitConfigStruct));configs.HeadPortraitConfig=HeadPortraitConfig})(configs||(configs={}));var configs;(function(configs){var ImageConfigStruct=(function(_super){__extends(ImageConfigStruct,_super);function ImageConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ImageConfigStruct}(configs.BaseConfig));configs.ImageConfigStruct=ImageConfigStruct})(configs||(configs={}));var configs;(function(configs){var ImageConfig=(function(_super){__extends(ImageConfig,_super);function ImageConfig(){return _super!==null&&_super.apply(this,arguments)||this}ImageConfig.getUrl=function(key){return"res/fspriteassets/Image_"+LangManager.Instance.lang+"/"+key+".png"};return ImageConfig}(configs.ImageConfigStruct));configs.ImageConfig=ImageConfig})(configs||(configs={}));var configs;(function(configs){var InitialActorConfigStruct=(function(_super){__extends(InitialActorConfigStruct,_super);function InitialActorConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return InitialActorConfigStruct}(configs.BaseConfig));configs.InitialActorConfigStruct=InitialActorConfigStruct})(configs||(configs={}));configs.InitialActorConfig=configs.InitialActorConfigStruct;var configs;(function(configs){var ItemConfigStruct=(function(_super){__extends(ItemConfigStruct,_super);function ItemConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ItemConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("item",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(ItemConfigStruct.prototype,"item_des",{get:function(){var value=LangManager.Instance.getValue("item",this.id,"item_des");if(!isNullOrEmpty(value)){return value}return this.zh_cn_item_des},enumerable:true,configurable:true});Object.defineProperty(ItemConfigStruct.prototype,"get_way_explain",{get:function(){var value=LangManager.Instance.getValue("item",this.id,"get_way_explain");if(!isNullOrEmpty(value)){return value}return this.zh_cn_get_way_explain},enumerable:true,configurable:true});return ItemConfigStruct}(configs.BaseConfig));configs.ItemConfigStruct=ItemConfigStruct})(configs||(configs={}));var configs;(function(configs){var ItemConfig=(function(_super){__extends(ItemConfig,_super);function ItemConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ItemConfig.prototype,"avatarConfig",{get:function(){return Game.config.avatar.getConfig(this.icon)},enumerable:true,configurable:true});Object.defineProperty(ItemConfig.prototype,"iconUrl",{get:function(){if(this.avatarConfig){if(this.type==7){return this.avatarConfig.bodyIconUrl}return this.avatarConfig.iconUrl}return""},enumerable:true,configurable:true});Object.defineProperty(ItemConfig.prototype,"itemStarNum",{get:function(){if(this.star==0){return 0}var propertyCfg=Game.config.property.getConfig(this.star);if(propertyCfg){var star=Number(propertyCfg.zh_cn_name);if(star==null){console.log("Error Item Star");return 0}star=star<0?0:star;star=star>6?6:star;return star}return 0},enumerable:true,configurable:true});return ItemConfig}(configs.ItemConfigStruct));configs.ItemConfig=ItemConfig})(configs||(configs={}));var configs;(function(configs){var LanguageTypeConfigStruct=(function(_super){__extends(LanguageTypeConfigStruct,_super);function LanguageTypeConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return LanguageTypeConfigStruct}(configs.BaseConfig));configs.LanguageTypeConfigStruct=LanguageTypeConfigStruct})(configs||(configs={}));configs.LanguageTypeConfig=configs.LanguageTypeConfigStruct;var configs;(function(configs){var LevelGiftPackageConfigStruct=(function(_super){__extends(LevelGiftPackageConfigStruct,_super);function LevelGiftPackageConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(LevelGiftPackageConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("levelGiftPackage",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return LevelGiftPackageConfigStruct}(configs.BaseConfig));configs.LevelGiftPackageConfigStruct=LevelGiftPackageConfigStruct})(configs||(configs={}));configs.LevelGiftPackageConfig=configs.LevelGiftPackageConfigStruct;var configs;(function(configs){var LoaderConfigStruct=(function(_super){__extends(LoaderConfigStruct,_super);function LoaderConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return LoaderConfigStruct}(configs.BaseConfig));configs.LoaderConfigStruct=LoaderConfigStruct})(configs||(configs={}));var configs;(function(configs){var LoaderConfig=(function(_super){__extends(LoaderConfig,_super);function LoaderConfig(){return _super!==null&&_super.apply(this,arguments)||this}return LoaderConfig}(configs.LoaderConfigStruct));configs.LoaderConfig=LoaderConfig})(configs||(configs={}));var configs;(function(configs){var LoadingConfigStruct=(function(_super){__extends(LoadingConfigStruct,_super);function LoadingConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return LoadingConfigStruct}(configs.BaseConfig));configs.LoadingConfigStruct=LoadingConfigStruct})(configs||(configs={}));var configs;(function(configs){var LoadingConfig=(function(_super){__extends(LoadingConfig,_super);function LoadingConfig(){return _super!==null&&_super.apply(this,arguments)||this}return LoadingConfig}(configs.LoadingConfigStruct));configs.LoadingConfig=LoadingConfig})(configs||(configs={}));var configs;(function(configs){var MailConfigStruct=(function(_super){__extends(MailConfigStruct,_super);function MailConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MailConfigStruct.prototype,"title",{get:function(){var value=LangManager.Instance.getValue("mail",this.id,"title");if(!isNullOrEmpty(value)){return value}return this.zh_cn_title},enumerable:true,configurable:true});Object.defineProperty(MailConfigStruct.prototype,"content",{get:function(){var value=LangManager.Instance.getValue("mail",this.id,"content");if(!isNullOrEmpty(value)){return value}return this.zh_cn_content},enumerable:true,configurable:true});return MailConfigStruct}(configs.BaseConfig));configs.MailConfigStruct=MailConfigStruct})(configs||(configs={}));var configs;(function(configs){var MailConfig=(function(_super){__extends(MailConfig,_super);function MailConfig(){return _super!==null&&_super.apply(this,arguments)||this}return MailConfig}(configs.MailConfigStruct));configs.MailConfig=MailConfig})(configs||(configs={}));var configs;(function(configs){var MaintaskConfigStruct=(function(_super){__extends(MaintaskConfigStruct,_super);function MaintaskConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MaintaskConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("maintask",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.cn_name},enumerable:true,configurable:true});Object.defineProperty(MaintaskConfigStruct.prototype,"info",{get:function(){var value=LangManager.Instance.getValue("maintask",this.id,"info");if(!isNullOrEmpty(value)){return value}return this.cn_info},enumerable:true,configurable:true});Object.defineProperty(MaintaskConfigStruct.prototype,"cinfo",{get:function(){var value=LangManager.Instance.getValue("maintask",this.id,"cinfo");if(!isNullOrEmpty(value)){return value}return this.cn_cinfo},enumerable:true,configurable:true});Object.defineProperty(MaintaskConfigStruct.prototype,"content",{get:function(){var value=LangManager.Instance.getValue("maintask",this.id,"content");if(!isNullOrEmpty(value)){return value}return this.cn_content},enumerable:true,configurable:true});return MaintaskConfigStruct}(configs.BaseConfig));configs.MaintaskConfigStruct=MaintaskConfigStruct})(configs||(configs={}));var configs;(function(configs){var MaintaskConfig=(function(_super){__extends(MaintaskConfig,_super);function MaintaskConfig(){return _super!==null&&_super.apply(this,arguments)||this}return MaintaskConfig}(configs.MaintaskConfigStruct));configs.MaintaskConfig=MaintaskConfig})(configs||(configs={}));var configs;(function(configs){var MeetingGameConfigStruct=(function(_super){__extends(MeetingGameConfigStruct,_super);function MeetingGameConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MeetingGameConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("meetingGame",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return MeetingGameConfigStruct}(configs.BaseConfig));configs.MeetingGameConfigStruct=MeetingGameConfigStruct})(configs||(configs={}));var configs;(function(configs){var MeetingGameConfig=(function(_super){__extends(MeetingGameConfig,_super);function MeetingGameConfig(){return _super!==null&&_super.apply(this,arguments)||this}return MeetingGameConfig}(configs.MeetingGameConfigStruct));configs.MeetingGameConfig=MeetingGameConfig})(configs||(configs={}));var configs;(function(configs){var MeetingRewardsConfigStruct=(function(_super){__extends(MeetingRewardsConfigStruct,_super);function MeetingRewardsConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return MeetingRewardsConfigStruct}(configs.BaseConfig));configs.MeetingRewardsConfigStruct=MeetingRewardsConfigStruct})(configs||(configs={}));var configs;(function(configs){var MeetingRewardsConfig=(function(_super){__extends(MeetingRewardsConfig,_super);function MeetingRewardsConfig(){return _super!==null&&_super.apply(this,arguments)||this}return MeetingRewardsConfig}(configs.MeetingRewardsConfigStruct));configs.MeetingRewardsConfig=MeetingRewardsConfig})(configs||(configs={}));var configs;(function(configs){var MenuConfigStruct=(function(_super){__extends(MenuConfigStruct,_super);function MenuConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MenuConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("menu",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return MenuConfigStruct}(configs.BaseConfig));configs.MenuConfigStruct=MenuConfigStruct})(configs||(configs={}));var MenuId=Games.MenuId;var MenuLayerType=Games.MenuLayerType;var MenuCloseOtherType=Games.MenuCloseOtherType;var LoaderId=Games.LoaderId;var configs;(function(configs){var MenuConfig=(function(_super){__extends(MenuConfig,_super);function MenuConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MenuConfig.prototype,"menuId",{get:function(){return this.id},enumerable:true,configurable:true});Object.defineProperty(MenuConfig.prototype,"menuLayer",{get:function(){return this.layer},enumerable:true,configurable:true});Object.defineProperty(MenuConfig.prototype,"menuCloseOtherType",{get:function(){return this.closeOtherType},enumerable:true,configurable:true});Object.defineProperty(MenuConfig.prototype,"menuLoaderId",{get:function(){return this.loaderId},enumerable:true,configurable:true});Object.defineProperty(MenuConfig.prototype,"iconUrl",{get:function(){var avatarConfig=Game.config.avatar.getConfig(this.icon);if(avatarConfig){return avatarConfig.iconUrl}else{return""}},enumerable:true,configurable:true});Object.defineProperty(MenuConfig.prototype,"isSubbarMainButton",{get:function(){return this.menuId>=MenuId.SubMenuButtonBegin},enumerable:true,configurable:true});Object.defineProperty(MenuConfig.prototype,"isUnlock",{get:function(){return Games.MenuValidateUnlock.getInstance().validate(this.menuId)},enumerable:true,configurable:true});Object.defineProperty(MenuConfig.prototype,"lockText",{get:function(){var unlockConfig=Game.config.unlock.getUnlockConfig(this.menuId);if(unlockConfig){return unlockConfig.touch_txt}return Games.TEXT.Lock},enumerable:true,configurable:true});Object.defineProperty(MenuConfig.prototype,"enableOpen",{get:function(){return Games.MenuValidateEnableOpen.getInstance().validate(this.menuId)},enumerable:true,configurable:true});Object.defineProperty(MenuConfig.prototype,"isNew",{get:function(){return Games.MenuValidateNew.getInstance().validate(this.menuId)},enumerable:true,configurable:true});MenuConfig.prototype.openMenu=function(){if(this.menuId<MenuId.SubMenuButtonBegin){if(!this.isUnlock){Game.system.toastText(this.lockText);return false}if(!Games.MenuWindows.get(this.menuId)){Game.system.toastText(Games.TEXT.Disable);return false}if(this.enableOpen){Game.menu.open(this.menuId);return true}}return true};return MenuConfig}(configs.MenuConfigStruct));configs.MenuConfig=MenuConfig})(configs||(configs={}));var configs;(function(configs){var MenuIndexConfigStruct=(function(_super){__extends(MenuIndexConfigStruct,_super);function MenuIndexConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return MenuIndexConfigStruct}(configs.BaseConfig));configs.MenuIndexConfigStruct=MenuIndexConfigStruct})(configs||(configs={}));configs.MenuIndexConfig=configs.MenuIndexConfigStruct;var configs;(function(configs){var MonthCardConfigStruct=(function(_super){__extends(MonthCardConfigStruct,_super);function MonthCardConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MonthCardConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("monthCard",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return MonthCardConfigStruct}(configs.BaseConfig));configs.MonthCardConfigStruct=MonthCardConfigStruct})(configs||(configs={}));configs.MonthCardConfig=configs.MonthCardConfigStruct;var configs;(function(configs){var MovieAdaptationMsgConfigStruct=(function(_super){__extends(MovieAdaptationMsgConfigStruct,_super);function MovieAdaptationMsgConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MovieAdaptationMsgConfigStruct.prototype,"msg1",{get:function(){var value=LangManager.Instance.getValue("movieAdaptationMsg",this.id,"msg1");if(!isNullOrEmpty(value)){return value}return this.zh_cn_msg1},enumerable:true,configurable:true});Object.defineProperty(MovieAdaptationMsgConfigStruct.prototype,"msg2",{get:function(){var value=LangManager.Instance.getValue("movieAdaptationMsg",this.id,"msg2");if(!isNullOrEmpty(value)){return value}return this.zh_cn_msg2},enumerable:true,configurable:true});Object.defineProperty(MovieAdaptationMsgConfigStruct.prototype,"msg3",{get:function(){var value=LangManager.Instance.getValue("movieAdaptationMsg",this.id,"msg3");if(!isNullOrEmpty(value)){return value}return this.zh_cn_msg3},enumerable:true,configurable:true});return MovieAdaptationMsgConfigStruct}(configs.BaseConfig));configs.MovieAdaptationMsgConfigStruct=MovieAdaptationMsgConfigStruct})(configs||(configs={}));configs.MovieAdaptationMsgConfig=configs.MovieAdaptationMsgConfigStruct;var configs;(function(configs){var MovieAudienceEvaluationConfigStruct=(function(_super){__extends(MovieAudienceEvaluationConfigStruct,_super);function MovieAudienceEvaluationConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MovieAudienceEvaluationConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("movieAudienceEvaluation",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(MovieAudienceEvaluationConfigStruct.prototype,"content",{get:function(){var value=LangManager.Instance.getValue("movieAudienceEvaluation",this.id,"content");if(!isNullOrEmpty(value)){return value}return this.zh_cn_content},enumerable:true,configurable:true});return MovieAudienceEvaluationConfigStruct}(configs.BaseConfig));configs.MovieAudienceEvaluationConfigStruct=MovieAudienceEvaluationConfigStruct})(configs||(configs={}));var configs;(function(configs){var MovieAudienceEvaluationConfig=(function(_super){__extends(MovieAudienceEvaluationConfig,_super);function MovieAudienceEvaluationConfig(){return _super!==null&&_super.apply(this,arguments)||this}return MovieAudienceEvaluationConfig}(configs.MovieAudienceEvaluationConfigStruct));configs.MovieAudienceEvaluationConfig=MovieAudienceEvaluationConfig})(configs||(configs={}));var configs;(function(configs){var MovieDropConfigStruct=(function(_super){__extends(MovieDropConfigStruct,_super);function MovieDropConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MovieDropConfigStruct.prototype,"gain_name",{get:function(){var value=LangManager.Instance.getValue("movieDrop",this.id,"gain_name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_gain_name},enumerable:true,configurable:true});Object.defineProperty(MovieDropConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("movieDrop",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return MovieDropConfigStruct}(configs.BaseConfig));configs.MovieDropConfigStruct=MovieDropConfigStruct})(configs||(configs={}));var configs;(function(configs){var MovieDropConfig=(function(_super){__extends(MovieDropConfig,_super);function MovieDropConfig(){return _super!==null&&_super.apply(this,arguments)||this}return MovieDropConfig}(configs.MovieDropConfigStruct));configs.MovieDropConfig=MovieDropConfig})(configs||(configs={}));var configs;(function(configs){var MovieExpectConfigStruct=(function(_super){__extends(MovieExpectConfigStruct,_super);function MovieExpectConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MovieExpectConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("movieExpect",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(MovieExpectConfigStruct.prototype,"pic_word",{get:function(){var value=LangManager.Instance.getValue("movieExpect",this.id,"pic_word");if(!isNullOrEmpty(value)){return value}return this.zh_cn_pic_word},enumerable:true,configurable:true});return MovieExpectConfigStruct}(configs.BaseConfig));configs.MovieExpectConfigStruct=MovieExpectConfigStruct})(configs||(configs={}));var configs;(function(configs){var MovieExpectConfig=(function(_super){__extends(MovieExpectConfig,_super);function MovieExpectConfig(){return _super!==null&&_super.apply(this,arguments)||this}return MovieExpectConfig}(configs.MovieExpectConfigStruct));configs.MovieExpectConfig=MovieExpectConfig})(configs||(configs={}));var configs;(function(configs){var MovieLicenceConfigStruct=(function(_super){__extends(MovieLicenceConfigStruct,_super);function MovieLicenceConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return MovieLicenceConfigStruct}(configs.BaseConfig));configs.MovieLicenceConfigStruct=MovieLicenceConfigStruct})(configs||(configs={}));var configs;(function(configs){var MovieLicenceConfig=(function(_super){__extends(MovieLicenceConfig,_super);function MovieLicenceConfig(){return _super!==null&&_super.apply(this,arguments)||this}return MovieLicenceConfig}(configs.MovieLicenceConfigStruct));configs.MovieLicenceConfig=MovieLicenceConfig})(configs||(configs={}));var configs;(function(configs){var MovieMediaVisitConfigStruct=(function(_super){__extends(MovieMediaVisitConfigStruct,_super);function MovieMediaVisitConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MovieMediaVisitConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("movieMediaVisit",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return MovieMediaVisitConfigStruct}(configs.BaseConfig));configs.MovieMediaVisitConfigStruct=MovieMediaVisitConfigStruct})(configs||(configs={}));var configs;(function(configs){var MovieMediaVisitConfig=(function(_super){__extends(MovieMediaVisitConfig,_super);function MovieMediaVisitConfig(){return _super!==null&&_super.apply(this,arguments)||this}return MovieMediaVisitConfig}(configs.MovieMediaVisitConfigStruct));configs.MovieMediaVisitConfig=MovieMediaVisitConfig})(configs||(configs={}));var configs;(function(configs){var MovieMidiaEvaluationConfigStruct=(function(_super){__extends(MovieMidiaEvaluationConfigStruct,_super);function MovieMidiaEvaluationConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MovieMidiaEvaluationConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("movieMidiaEvaluation",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(MovieMidiaEvaluationConfigStruct.prototype,"commentators",{get:function(){var value=LangManager.Instance.getValue("movieMidiaEvaluation",this.id,"commentators");if(!isNullOrEmpty(value)){return value}return this.zh_cn_commentators},enumerable:true,configurable:true});Object.defineProperty(MovieMidiaEvaluationConfigStruct.prototype,"content",{get:function(){var value=LangManager.Instance.getValue("movieMidiaEvaluation",this.id,"content");if(!isNullOrEmpty(value)){return value}return this.zh_cn_content},enumerable:true,configurable:true});return MovieMidiaEvaluationConfigStruct}(configs.BaseConfig));configs.MovieMidiaEvaluationConfigStruct=MovieMidiaEvaluationConfigStruct})(configs||(configs={}));var configs;(function(configs){var MovieMidiaEvaluationConfig=(function(_super){__extends(MovieMidiaEvaluationConfig,_super);function MovieMidiaEvaluationConfig(){return _super!==null&&_super.apply(this,arguments)||this}return MovieMidiaEvaluationConfig}(configs.MovieMidiaEvaluationConfigStruct));configs.MovieMidiaEvaluationConfig=MovieMidiaEvaluationConfig})(configs||(configs={}));var configs;(function(configs){var MovieMidiaEvaluationMsgConfigStruct=(function(_super){__extends(MovieMidiaEvaluationMsgConfigStruct,_super);function MovieMidiaEvaluationMsgConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MovieMidiaEvaluationMsgConfigStruct.prototype,"msg",{get:function(){var value=LangManager.Instance.getValue("movieMidiaEvaluationMsg",this.id,"msg");if(!isNullOrEmpty(value)){return value}return this.zh_cn_msg},enumerable:true,configurable:true});return MovieMidiaEvaluationMsgConfigStruct}(configs.BaseConfig));configs.MovieMidiaEvaluationMsgConfigStruct=MovieMidiaEvaluationMsgConfigStruct})(configs||(configs={}));configs.MovieMidiaEvaluationMsgConfig=configs.MovieMidiaEvaluationMsgConfigStruct;var configs;(function(configs){var MoviePopularizeConfigStruct=(function(_super){__extends(MoviePopularizeConfigStruct,_super);function MoviePopularizeConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return MoviePopularizeConfigStruct}(configs.BaseConfig));configs.MoviePopularizeConfigStruct=MoviePopularizeConfigStruct})(configs||(configs={}));var configs;(function(configs){var MoviePopularizeConfig=(function(_super){__extends(MoviePopularizeConfig,_super);function MoviePopularizeConfig(){return _super!==null&&_super.apply(this,arguments)||this}return MoviePopularizeConfig}(configs.MoviePopularizeConfigStruct));configs.MoviePopularizeConfig=MoviePopularizeConfig})(configs||(configs={}));var configs;(function(configs){var MovieShootTypeConfigStruct=(function(_super){__extends(MovieShootTypeConfigStruct,_super);function MovieShootTypeConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MovieShootTypeConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("movieShootType",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(MovieShootTypeConfigStruct.prototype,"type_des",{get:function(){var value=LangManager.Instance.getValue("movieShootType",this.id,"type_des");if(!isNullOrEmpty(value)){return value}return this.zh_cn_type_des},enumerable:true,configurable:true});return MovieShootTypeConfigStruct}(configs.BaseConfig));configs.MovieShootTypeConfigStruct=MovieShootTypeConfigStruct})(configs||(configs={}));var configs;(function(configs){var MovieShootTypeConfig=(function(_super){__extends(MovieShootTypeConfig,_super);function MovieShootTypeConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MovieShootTypeConfig.prototype,"getName",{get:function(){return this.name},enumerable:true,configurable:true});Object.defineProperty(MovieShootTypeConfig.prototype,"getLove",{get:function(){return this.type_des},enumerable:true,configurable:true});Object.defineProperty(MovieShootTypeConfig.prototype,"rewardItem",{get:function(){return this.item_id},enumerable:true,configurable:true});return MovieShootTypeConfig}(configs.MovieShootTypeConfigStruct));configs.MovieShootTypeConfig=MovieShootTypeConfig})(configs||(configs={}));var configs;(function(configs){var MsgChatConfigStruct=(function(_super){__extends(MsgChatConfigStruct,_super);function MsgChatConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MsgChatConfigStruct.prototype,"notice",{get:function(){var value=LangManager.Instance.getValue("msgChat",this.id,"notice");if(!isNullOrEmpty(value)){return value}return this.zh_cn_notice},enumerable:true,configurable:true});return MsgChatConfigStruct}(configs.BaseConfig));configs.MsgChatConfigStruct=MsgChatConfigStruct})(configs||(configs={}));configs.MsgChatConfig=configs.MsgChatConfigStruct;var configs;(function(configs){var MsgConfigStruct=(function(_super){__extends(MsgConfigStruct,_super);function MsgConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MsgConfigStruct.prototype,"notice",{get:function(){var value=LangManager.Instance.getValue("msg",this.id,"notice");if(!isNullOrEmpty(value)){return value}return this.zh_cn_notice},enumerable:true,configurable:true});return MsgConfigStruct}(configs.BaseConfig));configs.MsgConfigStruct=MsgConfigStruct})(configs||(configs={}));var configs;(function(configs){var MsgConfig=(function(_super){__extends(MsgConfig,_super);function MsgConfig(){return _super!==null&&_super.apply(this,arguments)||this}return MsgConfig}(configs.MsgConfigStruct));configs.MsgConfig=MsgConfig})(configs||(configs={}));var configs;(function(configs){var MsgProtoErrorConfigStruct=(function(_super){__extends(MsgProtoErrorConfigStruct,_super);function MsgProtoErrorConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MsgProtoErrorConfigStruct.prototype,"notice",{get:function(){var value=LangManager.Instance.getValue("msgProtoError",this.id,"notice");if(!isNullOrEmpty(value)){return value}return this.zh_cn_notice},enumerable:true,configurable:true});return MsgProtoErrorConfigStruct}(configs.BaseConfig));configs.MsgProtoErrorConfigStruct=MsgProtoErrorConfigStruct})(configs||(configs={}));configs.MsgProtoErrorConfig=configs.MsgProtoErrorConfigStruct;var configs;(function(configs){var NpcConfigStruct=(function(_super){__extends(NpcConfigStruct,_super);function NpcConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(NpcConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("npc",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.cn_name},enumerable:true,configurable:true});return NpcConfigStruct}(configs.BaseConfig));configs.NpcConfigStruct=NpcConfigStruct})(configs||(configs={}));var configs;(function(configs){var NpcConfig=(function(_super){__extends(NpcConfig,_super);function NpcConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(NpcConfig.prototype,"modelSkinUrl",{get:function(){var avatarCfg=Game.config.avatar.getConfig(this.avatar);if(avatarCfg){return avatarCfg.modelSkinUrl}return""},enumerable:true,configurable:true});Object.defineProperty(NpcConfig.prototype,"modelBoneUrl",{get:function(){var avatarCfg=Game.config.avatar.getConfig(this.avatar);if(avatarCfg){return avatarCfg.modelBoneUrl}return""},enumerable:true,configurable:true});Object.defineProperty(NpcConfig.prototype,"avatarUrl",{get:function(){var avatarCfg=Game.config.avatar.getConfig(this.avatar);if(avatarCfg){return avatarCfg.bodyIconUrl}return""},enumerable:true,configurable:true});return NpcConfig}(configs.NpcConfigStruct));configs.NpcConfig=NpcConfig})(configs||(configs={}));var configs;(function(configs){var OperationTasksConfigStruct=(function(_super){__extends(OperationTasksConfigStruct,_super);function OperationTasksConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(OperationTasksConfigStruct.prototype,"classname",{get:function(){var value=LangManager.Instance.getValue("operationTasks",this.id,"classname");if(!isNullOrEmpty(value)){return value}return this.zh_cn_classname},enumerable:true,configurable:true});Object.defineProperty(OperationTasksConfigStruct.prototype,"description",{get:function(){var value=LangManager.Instance.getValue("operationTasks",this.id,"description");if(!isNullOrEmpty(value)){return value}return this.zh_cn_description},enumerable:true,configurable:true});return OperationTasksConfigStruct}(configs.BaseConfig));configs.OperationTasksConfigStruct=OperationTasksConfigStruct})(configs||(configs={}));configs.OperationTasksConfig=configs.OperationTasksConfigStruct;var configs;(function(configs){var OperationTasksScoreConfigStruct=(function(_super){__extends(OperationTasksScoreConfigStruct,_super);function OperationTasksScoreConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return OperationTasksScoreConfigStruct}(configs.BaseConfig));configs.OperationTasksScoreConfigStruct=OperationTasksScoreConfigStruct})(configs||(configs={}));configs.OperationTasksScoreConfig=configs.OperationTasksScoreConfigStruct;var configs;(function(configs){var OperationTasksTermsConfigStruct=(function(_super){__extends(OperationTasksTermsConfigStruct,_super);function OperationTasksTermsConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return OperationTasksTermsConfigStruct}(configs.BaseConfig));configs.OperationTasksTermsConfigStruct=OperationTasksTermsConfigStruct})(configs||(configs={}));configs.OperationTasksTermsConfig=configs.OperationTasksTermsConfigStruct;var configs;(function(configs){var OrderConfigStruct=(function(_super){__extends(OrderConfigStruct,_super);function OrderConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(OrderConfigStruct.prototype,"name1",{get:function(){var value=LangManager.Instance.getValue("order",this.id,"name1");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name1},enumerable:true,configurable:true});Object.defineProperty(OrderConfigStruct.prototype,"name2",{get:function(){var value=LangManager.Instance.getValue("order",this.id,"name2");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name2},enumerable:true,configurable:true});return OrderConfigStruct}(configs.BaseConfig));configs.OrderConfigStruct=OrderConfigStruct})(configs||(configs={}));var configs;(function(configs){var OrderConfig=(function(_super){__extends(OrderConfig,_super);function OrderConfig(){return _super!==null&&_super.apply(this,arguments)||this}return OrderConfig}(configs.OrderConfigStruct));configs.OrderConfig=OrderConfig})(configs||(configs={}));var configs;(function(configs){var OscarConfigStruct=(function(_super){__extends(OscarConfigStruct,_super);function OscarConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(OscarConfigStruct.prototype,"content",{get:function(){var value=LangManager.Instance.getValue("oscar",this.id,"content");if(!isNullOrEmpty(value)){return value}return this.zh_cn_content},enumerable:true,configurable:true});return OscarConfigStruct}(configs.BaseConfig));configs.OscarConfigStruct=OscarConfigStruct})(configs||(configs={}));var configs;(function(configs){var OscarConfig=(function(_super){__extends(OscarConfig,_super);function OscarConfig(){return _super!==null&&_super.apply(this,arguments)||this}return OscarConfig}(configs.OscarConfigStruct));configs.OscarConfig=OscarConfig})(configs||(configs={}));var configs;(function(configs){var PerformConfigStruct=(function(_super){__extends(PerformConfigStruct,_super);function PerformConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return PerformConfigStruct}(configs.BaseConfig));configs.PerformConfigStruct=PerformConfigStruct})(configs||(configs={}));var configs;(function(configs){var ATEvent=Games.ATEvent;var PerformConfig=(function(_super){__extends(PerformConfig,_super);function PerformConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(PerformConfig.prototype,"eventList",{get:function(){var evtList=[];this.event.forEach(function(value,index,array){var event=ATEvent.parse(value);evtList.push(event)});return evtList},enumerable:true,configurable:true});return PerformConfig}(configs.PerformConfigStruct));configs.PerformConfig=PerformConfig})(configs||(configs={}));var configs;(function(configs){var PlayActConfigStruct=(function(_super){__extends(PlayActConfigStruct,_super);function PlayActConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return PlayActConfigStruct}(configs.BaseConfig));configs.PlayActConfigStruct=PlayActConfigStruct})(configs||(configs={}));var configs;(function(configs){var ATEvent=Games.ATEvent;var PlayActConfig=(function(_super){__extends(PlayActConfig,_super);function PlayActConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(PlayActConfig.prototype,"eventList",{get:function(){var evtList=[];this.event.forEach(function(value,index,array){var event=ATEvent.parse(value);evtList.push(event)});return evtList},enumerable:true,configurable:true});return PlayActConfig}(configs.PlayActConfigStruct));configs.PlayActConfig=PlayActConfig})(configs||(configs={}));var configs;(function(configs){var PlayerDefaultConfigStruct=(function(_super){__extends(PlayerDefaultConfigStruct,_super);function PlayerDefaultConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return PlayerDefaultConfigStruct}(configs.BaseConfig));configs.PlayerDefaultConfigStruct=PlayerDefaultConfigStruct})(configs||(configs={}));configs.PlayerDefaultConfig=configs.PlayerDefaultConfigStruct;var configs;(function(configs){var PlayerLevelConfigStruct=(function(_super){__extends(PlayerLevelConfigStruct,_super);function PlayerLevelConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return PlayerLevelConfigStruct}(configs.BaseConfig));configs.PlayerLevelConfigStruct=PlayerLevelConfigStruct})(configs||(configs={}));var configs;(function(configs){var PlayerLevelConfig=(function(_super){__extends(PlayerLevelConfig,_super);function PlayerLevelConfig(){return _super!==null&&_super.apply(this,arguments)||this}PlayerLevelConfig.prototype.setLevelData=function(level){this.dtLevel=level};Object.defineProperty(PlayerLevelConfig.prototype,"ShopGold",{get:function(){return this.shop_1003},enumerable:true,configurable:true});Object.defineProperty(PlayerLevelConfig.prototype,"ShopMoney",{get:function(){return this.shop_1004},enumerable:true,configurable:true});return PlayerLevelConfig}(configs.PlayerLevelConfigStruct));configs.PlayerLevelConfig=PlayerLevelConfig})(configs||(configs={}));var configs;(function(configs){var PopUpConfigStruct=(function(_super){__extends(PopUpConfigStruct,_super);function PopUpConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return PopUpConfigStruct}(configs.BaseConfig));configs.PopUpConfigStruct=PopUpConfigStruct})(configs||(configs={}));configs.PopUpConfig=configs.PopUpConfigStruct;var configs;(function(configs){var PositionConfigStruct=(function(_super){__extends(PositionConfigStruct,_super);function PositionConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return PositionConfigStruct}(configs.BaseConfig));configs.PositionConfigStruct=PositionConfigStruct})(configs||(configs={}));var configs;(function(configs){var PositionConfig=(function(_super){__extends(PositionConfig,_super);function PositionConfig(){return _super!==null&&_super.apply(this,arguments)||this}return PositionConfig}(configs.PositionConfigStruct));configs.PositionConfig=PositionConfig})(configs||(configs={}));var configs;(function(configs){var ProduceConfigStruct=(function(_super){__extends(ProduceConfigStruct,_super);function ProduceConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ProduceConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("produce",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(ProduceConfigStruct.prototype,"tip",{get:function(){var value=LangManager.Instance.getValue("produce",this.id,"tip");if(!isNullOrEmpty(value)){return value}return this.zh_cn_tip},enumerable:true,configurable:true});return ProduceConfigStruct}(configs.BaseConfig));configs.ProduceConfigStruct=ProduceConfigStruct})(configs||(configs={}));var configs;(function(configs){var ProduceConfig=(function(_super){__extends(ProduceConfig,_super);function ProduceConfig(){return _super!==null&&_super.apply(this,arguments)||this}return ProduceConfig}(configs.ProduceConfigStruct));configs.ProduceConfig=ProduceConfig})(configs||(configs={}));var configs;(function(configs){var ProduceLevelConfigStruct=(function(_super){__extends(ProduceLevelConfigStruct,_super);function ProduceLevelConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ProduceLevelConfigStruct}(configs.BaseConfig));configs.ProduceLevelConfigStruct=ProduceLevelConfigStruct})(configs||(configs={}));var configs;(function(configs){var ProduceLevelConfig=(function(_super){__extends(ProduceLevelConfig,_super);function ProduceLevelConfig(){return _super!==null&&_super.apply(this,arguments)||this}return ProduceLevelConfig}(configs.ProduceLevelConfigStruct));configs.ProduceLevelConfig=ProduceLevelConfig})(configs||(configs={}));var configs;(function(configs){var ProduceLvConfigStruct=(function(_super){__extends(ProduceLvConfigStruct,_super);function ProduceLvConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ProduceLvConfigStruct}(configs.BaseConfig));configs.ProduceLvConfigStruct=ProduceLvConfigStruct})(configs||(configs={}));configs.ProduceLvConfig=configs.ProduceLvConfigStruct;var configs;(function(configs){var ProduceSouvenirConfigStruct=(function(_super){__extends(ProduceSouvenirConfigStruct,_super);function ProduceSouvenirConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ProduceSouvenirConfigStruct}(configs.BaseConfig));configs.ProduceSouvenirConfigStruct=ProduceSouvenirConfigStruct})(configs||(configs={}));var configs;(function(configs){var ProduceSouvenirConfig=(function(_super){__extends(ProduceSouvenirConfig,_super);function ProduceSouvenirConfig(){return _super!==null&&_super.apply(this,arguments)||this}return ProduceSouvenirConfig}(configs.ProduceSouvenirConfigStruct));configs.ProduceSouvenirConfig=ProduceSouvenirConfig})(configs||(configs={}));var configs;(function(configs){var PropertyConfigStruct=(function(_super){__extends(PropertyConfigStruct,_super);function PropertyConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(PropertyConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("property",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return PropertyConfigStruct}(configs.BaseConfig));configs.PropertyConfigStruct=PropertyConfigStruct})(configs||(configs={}));var configs;(function(configs){var PropertyConfig=(function(_super){__extends(PropertyConfig,_super);function PropertyConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(PropertyConfig.prototype,"iconUrl",{get:function(){var cfg=Game.config.avatar.getConfig(this.icon);if(cfg){return cfg.iconUrl}return""},enumerable:true,configurable:true});return PropertyConfig}(configs.PropertyConfigStruct));configs.PropertyConfig=PropertyConfig})(configs||(configs={}));var configs;(function(configs){var RandomNameConfigStruct=(function(_super){__extends(RandomNameConfigStruct,_super);function RandomNameConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return RandomNameConfigStruct}(configs.BaseConfig));configs.RandomNameConfigStruct=RandomNameConfigStruct})(configs||(configs={}));var configs;(function(configs){var RandomNameConfig=(function(_super){__extends(RandomNameConfig,_super);function RandomNameConfig(){return _super!==null&&_super.apply(this,arguments)||this}return RandomNameConfig}(configs.RandomNameConfigStruct));configs.RandomNameConfig=RandomNameConfig})(configs||(configs={}));var configs;(function(configs){var RandomSurnameConfigStruct=(function(_super){__extends(RandomSurnameConfigStruct,_super);function RandomSurnameConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return RandomSurnameConfigStruct}(configs.BaseConfig));configs.RandomSurnameConfigStruct=RandomSurnameConfigStruct})(configs||(configs={}));var configs;(function(configs){var RandomSurnameConfig=(function(_super){__extends(RandomSurnameConfig,_super);function RandomSurnameConfig(){return _super!==null&&_super.apply(this,arguments)||this}return RandomSurnameConfig}(configs.RandomSurnameConfigStruct));configs.RandomSurnameConfig=RandomSurnameConfig})(configs||(configs={}));var configs;(function(configs){var RechargeConfigStruct=(function(_super){__extends(RechargeConfigStruct,_super);function RechargeConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(RechargeConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("recharge",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return RechargeConfigStruct}(configs.BaseConfig));configs.RechargeConfigStruct=RechargeConfigStruct})(configs||(configs={}));var configs;(function(configs){var RechargeConfig=(function(_super){__extends(RechargeConfig,_super);function RechargeConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(RechargeConfig.prototype,"rechangeDesc",{get:function(){return"$ "+this.cost_dollar},enumerable:true,configurable:true});Object.defineProperty(RechargeConfig.prototype,"rechangeGifts",{get:function(){if(this._gifts==null){this._gifts=[this.item].concat(this.gift)}return this._gifts},enumerable:true,configurable:true});return RechargeConfig}(configs.RechargeConfigStruct));configs.RechargeConfig=RechargeConfig})(configs||(configs={}));var configs;(function(configs){var RoadshowConfigStruct=(function(_super){__extends(RoadshowConfigStruct,_super);function RoadshowConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return RoadshowConfigStruct}(configs.BaseConfig));configs.RoadshowConfigStruct=RoadshowConfigStruct})(configs||(configs={}));configs.RoadshowConfig=configs.RoadshowConfigStruct;var configs;(function(configs){var SecretaryConfigStruct=(function(_super){__extends(SecretaryConfigStruct,_super);function SecretaryConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(SecretaryConfigStruct.prototype,"info",{get:function(){var value=LangManager.Instance.getValue("secretary",this.id,"info");if(!isNullOrEmpty(value)){return value}return this.zh_cn_info},enumerable:true,configurable:true});return SecretaryConfigStruct}(configs.BaseConfig));configs.SecretaryConfigStruct=SecretaryConfigStruct})(configs||(configs={}));var configs;(function(configs){var SecretaryConfig=(function(_super){__extends(SecretaryConfig,_super);function SecretaryConfig(){return _super!==null&&_super.apply(this,arguments)||this}return SecretaryConfig}(configs.SecretaryConfigStruct));configs.SecretaryConfig=SecretaryConfig})(configs||(configs={}));var configs;(function(configs){var SecretaryGiftConfigStruct=(function(_super){__extends(SecretaryGiftConfigStruct,_super);function SecretaryGiftConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return SecretaryGiftConfigStruct}(configs.BaseConfig));configs.SecretaryGiftConfigStruct=SecretaryGiftConfigStruct})(configs||(configs={}));var configs;(function(configs){var SecretaryGiftConfig=(function(_super){__extends(SecretaryGiftConfig,_super);function SecretaryGiftConfig(){return _super!==null&&_super.apply(this,arguments)||this}return SecretaryGiftConfig}(configs.SecretaryGiftConfigStruct));configs.SecretaryGiftConfig=SecretaryGiftConfig})(configs||(configs={}));var configs;(function(configs){var SecretaryTypeConfigStruct=(function(_super){__extends(SecretaryTypeConfigStruct,_super);function SecretaryTypeConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(SecretaryTypeConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("secretaryType",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return SecretaryTypeConfigStruct}(configs.BaseConfig));configs.SecretaryTypeConfigStruct=SecretaryTypeConfigStruct})(configs||(configs={}));var configs;(function(configs){var SecretaryTypeConfig=(function(_super){__extends(SecretaryTypeConfig,_super);function SecretaryTypeConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(SecretaryTypeConfig.prototype,"bodyIconUrl",{get:function(){if(isNullOrEmpty(this._bodyIconUrl)){var avatarConfig=Game.config.avatar.getConfig(this.picid);if(avatarConfig){this._bodyIconUrl=avatarConfig.bodyIconUrl}}return this._bodyIconUrl},enumerable:true,configurable:true});return SecretaryTypeConfig}(configs.SecretaryTypeConfigStruct));configs.SecretaryTypeConfig=SecretaryTypeConfig})(configs||(configs={}));var configs;(function(configs){var ServerRankingListConfigStruct=(function(_super){__extends(ServerRankingListConfigStruct,_super);function ServerRankingListConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return ServerRankingListConfigStruct}(configs.BaseConfig));configs.ServerRankingListConfigStruct=ServerRankingListConfigStruct})(configs||(configs={}));var configs;(function(configs){var ServerRankingListConfig=(function(_super){__extends(ServerRankingListConfig,_super);function ServerRankingListConfig(){return _super!==null&&_super.apply(this,arguments)||this}return ServerRankingListConfig}(configs.ServerRankingListConfigStruct));configs.ServerRankingListConfig=ServerRankingListConfig})(configs||(configs={}));var configs;(function(configs){var SettingDefaultConfigStruct=(function(_super){__extends(SettingDefaultConfigStruct,_super);function SettingDefaultConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(SettingDefaultConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("settingDefault",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return SettingDefaultConfigStruct}(configs.BaseConfig));configs.SettingDefaultConfigStruct=SettingDefaultConfigStruct})(configs||(configs={}));var configs;(function(configs){var SettingDefaultConfig=(function(_super){__extends(SettingDefaultConfig,_super);function SettingDefaultConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(SettingDefaultConfig.prototype,"OnOff",{get:function(){return this._default==1},enumerable:true,configurable:true});return SettingDefaultConfig}(configs.SettingDefaultConfigStruct));configs.SettingDefaultConfig=SettingDefaultConfig})(configs||(configs={}));var configs;(function(configs){var ShopConfigStruct=(function(_super){__extends(ShopConfigStruct,_super);function ShopConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ShopConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("shop",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return ShopConfigStruct}(configs.BaseConfig));configs.ShopConfigStruct=ShopConfigStruct})(configs||(configs={}));var configs;(function(configs){var ShopConfig=(function(_super){__extends(ShopConfig,_super);function ShopConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ShopConfig.prototype,"name",{get:function(){if(this.type==1&&this.item.length==1){return this.item[0].itemName}var value=LangManager.Instance.getValue("shop",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(ShopConfig.prototype,"isPeriodTime",{get:function(){var strTime=this.period.split("-");if(strTime.length>=2){var timeBegin=TimeHelper.TimeReformat2(strTime[0]);var timeEnd=TimeHelper.TimeReformat2(strTime[1]);var time=Game.time.serverMilliseconds;return timeBegin<time&&time<timeEnd}return true},enumerable:true,configurable:true});Object.defineProperty(ShopConfig.prototype,"hasPeriodTime",{get:function(){return this.period!="0"},enumerable:true,configurable:true});Object.defineProperty(ShopConfig.prototype,"hasAfterTime",{get:function(){return this.delay!=0},enumerable:true,configurable:true});return ShopConfig}(configs.ShopConfigStruct));configs.ShopConfig=ShopConfig})(configs||(configs={}));var configs;(function(configs){var SkillConfigStruct=(function(_super){__extends(SkillConfigStruct,_super);function SkillConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(SkillConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("skill",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.cn_name},enumerable:true,configurable:true});Object.defineProperty(SkillConfigStruct.prototype,"tips",{get:function(){var value=LangManager.Instance.getValue("skill",this.id,"tips");if(!isNullOrEmpty(value)){return value}return this.cn_tips},enumerable:true,configurable:true});Object.defineProperty(SkillConfigStruct.prototype,"effecttext",{get:function(){var value=LangManager.Instance.getValue("skill",this.id,"effecttext");if(!isNullOrEmpty(value)){return value}return this.cn_effecttext},enumerable:true,configurable:true});return SkillConfigStruct}(configs.BaseConfig));configs.SkillConfigStruct=SkillConfigStruct})(configs||(configs={}));var configs;(function(configs){var SkillConfig=(function(_super){__extends(SkillConfig,_super);function SkillConfig(){return _super!==null&&_super.apply(this,arguments)||this}return SkillConfig}(configs.SkillConfigStruct));configs.SkillConfig=SkillConfig})(configs||(configs={}));var configs;(function(configs){var SkillEffectConfigStruct=(function(_super){__extends(SkillEffectConfigStruct,_super);function SkillEffectConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return SkillEffectConfigStruct}(configs.BaseConfig));configs.SkillEffectConfigStruct=SkillEffectConfigStruct})(configs||(configs={}));var configs;(function(configs){var SkillEffectConfig=(function(_super){__extends(SkillEffectConfig,_super);function SkillEffectConfig(){return _super!==null&&_super.apply(this,arguments)||this}return SkillEffectConfig}(configs.SkillEffectConfigStruct));configs.SkillEffectConfig=SkillEffectConfig})(configs||(configs={}));var configs;(function(configs){var SkillTriggerConfigStruct=(function(_super){__extends(SkillTriggerConfigStruct,_super);function SkillTriggerConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return SkillTriggerConfigStruct}(configs.BaseConfig));configs.SkillTriggerConfigStruct=SkillTriggerConfigStruct})(configs||(configs={}));var configs;(function(configs){var SkillTriggerConfig=(function(_super){__extends(SkillTriggerConfig,_super);function SkillTriggerConfig(){return _super!==null&&_super.apply(this,arguments)||this}return SkillTriggerConfig}(configs.SkillTriggerConfigStruct));configs.SkillTriggerConfig=SkillTriggerConfig})(configs||(configs={}));var configs;(function(configs){var SpeakConfigStruct=(function(_super){__extends(SpeakConfigStruct,_super);function SpeakConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(SpeakConfigStruct.prototype,"speak",{get:function(){var value=LangManager.Instance.getValue("speak",this.id,"speak");if(!isNullOrEmpty(value)){return value}return this.cn_speak},enumerable:true,configurable:true});return SpeakConfigStruct}(configs.BaseConfig));configs.SpeakConfigStruct=SpeakConfigStruct})(configs||(configs={}));var configs;(function(configs){var SpeakConfig=(function(_super){__extends(SpeakConfig,_super);function SpeakConfig(){return _super!==null&&_super.apply(this,arguments)||this}return SpeakConfig}(configs.SpeakConfigStruct));configs.SpeakConfig=SpeakConfig})(configs||(configs={}));var configs;(function(configs){var StarConConfigStruct=(function(_super){__extends(StarConConfigStruct,_super);function StarConConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return StarConConfigStruct}(configs.BaseConfig));configs.StarConConfigStruct=StarConConfigStruct})(configs||(configs={}));var configs;(function(configs){var StarConConfig=(function(_super){__extends(StarConConfig,_super);function StarConConfig(){return _super!==null&&_super.apply(this,arguments)||this}return StarConConfig}(configs.StarConConfigStruct));configs.StarConConfig=StarConConfig})(configs||(configs={}));var configs;(function(configs){var StoryCharactersConfigStruct=(function(_super){__extends(StoryCharactersConfigStruct,_super);function StoryCharactersConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(StoryCharactersConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("storyCharacters",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(StoryCharactersConfigStruct.prototype,"introduction",{get:function(){var value=LangManager.Instance.getValue("storyCharacters",this.id,"introduction");if(!isNullOrEmpty(value)){return value}return this.zh_cn_introduction},enumerable:true,configurable:true});return StoryCharactersConfigStruct}(configs.BaseConfig));configs.StoryCharactersConfigStruct=StoryCharactersConfigStruct})(configs||(configs={}));var configs;(function(configs){var StoryCharactersConfig=(function(_super){__extends(StoryCharactersConfig,_super);function StoryCharactersConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(StoryCharactersConfig.prototype,"getSex",{get:function(){return this.type_pic},enumerable:true,configurable:true});Object.defineProperty(StoryCharactersConfig.prototype,"getType",{get:function(){return Game.config.property.getConfig(this.type).name},enumerable:true,configurable:true});Object.defineProperty(StoryCharactersConfig.prototype,"getName",{get:function(){return this.name},enumerable:true,configurable:true});Object.defineProperty(StoryCharactersConfig.prototype,"getDes",{get:function(){return this.introduction},enumerable:true,configurable:true});Object.defineProperty(StoryCharactersConfig.prototype,"getReqShowTypeToString",{get:function(){if(this.show_type===0){return""}return Game.config.property.getConfig(this.show_type).name},enumerable:true,configurable:true});Object.defineProperty(StoryCharactersConfig.prototype,"getReqageType",{get:function(){return this.age_type},enumerable:true,configurable:true});Object.defineProperty(StoryCharactersConfig.prototype,"getReqageTypeToString",{get:function(){if(this.age_type===0){return""}return Game.config.property.getConfig(this.age_type).name},enumerable:true,configurable:true});Object.defineProperty(StoryCharactersConfig.prototype,"geteffect",{get:function(){var result=new Array(this.effect.length);for(var index=0;index<this.effect.length;index++){result[index]=Game.config.property.getConfig(this.effect[index]).name}return result},enumerable:true,configurable:true});Object.defineProperty(StoryCharactersConfig.prototype,"geteffectVal",{get:function(){return this.effect},enumerable:true,configurable:true});return StoryCharactersConfig}(configs.StoryCharactersConfigStruct));configs.StoryCharactersConfig=StoryCharactersConfig})(configs||(configs={}));var configs;(function(configs){var StoryConfigStruct=(function(_super){__extends(StoryConfigStruct,_super);function StoryConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(StoryConfigStruct.prototype,"story_name",{get:function(){var value=LangManager.Instance.getValue("story",this.id,"story_name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_story_name},enumerable:true,configurable:true});Object.defineProperty(StoryConfigStruct.prototype,"introduction",{get:function(){var value=LangManager.Instance.getValue("story",this.id,"introduction");if(!isNullOrEmpty(value)){return value}return this.zh_cn_introduction},enumerable:true,configurable:true});return StoryConfigStruct}(configs.BaseConfig));configs.StoryConfigStruct=StoryConfigStruct})(configs||(configs={}));var configs;(function(configs){var StoryConfig=(function(_super){__extends(StoryConfig,_super);function StoryConfig(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._newStoryName=null;return _this}Object.defineProperty(StoryConfig.prototype,"filmIndex",{get:function(){return this.id},enumerable:true,configurable:true});Object.defineProperty(StoryConfig.prototype,"filmName",{get:function(){if(!this._newStoryName){this._newStoryName=this.story_name}return this._newStoryName},set:function(value){if(!value){console.error("剧本名字 有问题 StoryConfig.filmName value="+value)}this._newStoryName=value},enumerable:true,configurable:true});Object.defineProperty(StoryConfig.prototype,"starNumber",{get:function(){return parseInt(Game.config.property.getConfig(this.stars).name)},enumerable:true,configurable:true});Object.defineProperty(StoryConfig.prototype,"filmType",{get:function(){return Game.config.property.getConfig(this.type).name},enumerable:true,configurable:true});Object.defineProperty(StoryConfig.prototype,"filmTags",{get:function(){var result=new Array(this.tags.length);for(var index=0;index<this.tags.length;index++){result[index]=Game.config.property.getConfig(this.tags[index]).name}return result},enumerable:true,configurable:true});Object.defineProperty(StoryConfig.prototype,"filmDes",{get:function(){return this.introduction},enumerable:true,configurable:true});Object.defineProperty(StoryConfig.prototype,"filmCosts",{get:function(){return this.cost.toString()},enumerable:true,configurable:true});Object.defineProperty(StoryConfig.prototype,"characterProperty",{get:function(){var result=new Array(this.property.length);for(var index=0;index<this.property.length;index++){result[index]=Game.config.storyCharacters.getConfig(this.property[index])}return result},enumerable:true,configurable:true});Object.defineProperty(StoryConfig.prototype,"getMale",{get:function(){return this.male_percent},enumerable:true,configurable:true});Object.defineProperty(StoryConfig.prototype,"getFemale",{get:function(){return this.female_percent},enumerable:true,configurable:true});Object.defineProperty(StoryConfig.prototype,"getChild",{get:function(){return this.child_percent},enumerable:true,configurable:true});Object.defineProperty(StoryConfig.prototype,"getReward",{get:function(){return this.reward},enumerable:true,configurable:true});return StoryConfig}(configs.StoryConfigStruct));configs.StoryConfig=StoryConfig})(configs||(configs={}));var configs;(function(configs){var StoryGoalsConfigStruct=(function(_super){__extends(StoryGoalsConfigStruct,_super);function StoryGoalsConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return StoryGoalsConfigStruct}(configs.BaseConfig));configs.StoryGoalsConfigStruct=StoryGoalsConfigStruct})(configs||(configs={}));var configs;(function(configs){var StoryGoalsConfig=(function(_super){__extends(StoryGoalsConfig,_super);function StoryGoalsConfig(){return _super!==null&&_super.apply(this,arguments)||this}return StoryGoalsConfig}(configs.StoryGoalsConfigStruct));configs.StoryGoalsConfig=StoryGoalsConfig})(configs||(configs={}));var configs;(function(configs){var StorylineConfigStruct=(function(_super){__extends(StorylineConfigStruct,_super);function StorylineConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(StorylineConfigStruct.prototype,"ui_content",{get:function(){var value=LangManager.Instance.getValue("storyline",this.id,"ui_content");if(!isNullOrEmpty(value)){return value}return this.cn_ui_content},enumerable:true,configurable:true});Object.defineProperty(StorylineConfigStruct.prototype,"content",{get:function(){var value=LangManager.Instance.getValue("storyline",this.id,"content");if(!isNullOrEmpty(value)){return value}return this.cn_content},enumerable:true,configurable:true});Object.defineProperty(StorylineConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("storyline",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.cn_name},enumerable:true,configurable:true});return StorylineConfigStruct}(configs.BaseConfig));configs.StorylineConfigStruct=StorylineConfigStruct})(configs||(configs={}));var configs;(function(configs){var StorylineConfig=(function(_super){__extends(StorylineConfig,_super);function StorylineConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(StorylineConfig.prototype,"contentFormatCustom",{get:function(){if(isNullOrEmpty(this.fcontent)){this.fcontent=contentFormatCustom(this.content)}return this.fcontent},enumerable:true,configurable:true});Object.defineProperty(StorylineConfig.prototype,"bodyIconUrl",{get:function(){if(this.name=="{repeatactor}"){return Game.config.actor.getConfig(toInt(this.type_id)).bodyIconUrl}else{var actorId=contentFormatCustomId(this.type_id);if(actorId>0){return Game.config.avatar.getConfig(actorId).bodyIconUrl}}return""},enumerable:true,configurable:true});Object.defineProperty(StorylineConfig.prototype,"nName",{get:function(){var n="";if(this.name=="{repeatactor}"){return Game.config.actor.getConfig(toInt(this.type_id)).name}else{n=contentFormatCustom(this.name)}return n},enumerable:true,configurable:true});return StorylineConfig}(configs.StorylineConfigStruct));configs.StorylineConfig=StorylineConfig})(configs||(configs={}));var configs;(function(configs){var StoryRateConfigStruct=(function(_super){__extends(StoryRateConfigStruct,_super);function StoryRateConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return StoryRateConfigStruct}(configs.BaseConfig));configs.StoryRateConfigStruct=StoryRateConfigStruct})(configs||(configs={}));var configs;(function(configs){var StoryRateConfig=(function(_super){__extends(StoryRateConfig,_super);function StoryRateConfig(){return _super!==null&&_super.apply(this,arguments)||this}return StoryRateConfig}(configs.StoryRateConfigStruct));configs.StoryRateConfig=StoryRateConfig})(configs||(configs={}));var configs;(function(configs){var StoryRefreshPriceConfigStruct=(function(_super){__extends(StoryRefreshPriceConfigStruct,_super);function StoryRefreshPriceConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return StoryRefreshPriceConfigStruct}(configs.BaseConfig));configs.StoryRefreshPriceConfigStruct=StoryRefreshPriceConfigStruct})(configs||(configs={}));configs.StoryRefreshPriceConfig=configs.StoryRefreshPriceConfigStruct;var configs;(function(configs){var StoryStackItemConfigStruct=(function(_super){__extends(StoryStackItemConfigStruct,_super);function StoryStackItemConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return StoryStackItemConfigStruct}(configs.BaseConfig));configs.StoryStackItemConfigStruct=StoryStackItemConfigStruct})(configs||(configs={}));var configs;(function(configs){var StoryStackItemConfig=(function(_super){__extends(StoryStackItemConfig,_super);function StoryStackItemConfig(){return _super!==null&&_super.apply(this,arguments)||this}return StoryStackItemConfig}(configs.StoryStackItemConfigStruct));configs.StoryStackItemConfig=StoryStackItemConfig})(configs||(configs={}));var configs;(function(configs){var StoryStackSortConfigStruct=(function(_super){__extends(StoryStackSortConfigStruct,_super);function StoryStackSortConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(StoryStackSortConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("storyStackSort",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return StoryStackSortConfigStruct}(configs.BaseConfig));configs.StoryStackSortConfigStruct=StoryStackSortConfigStruct})(configs||(configs={}));var configs;(function(configs){var StoryStackSortConfig=(function(_super){__extends(StoryStackSortConfig,_super);function StoryStackSortConfig(){return _super!==null&&_super.apply(this,arguments)||this}return StoryStackSortConfig}(configs.StoryStackSortConfigStruct));configs.StoryStackSortConfig=StoryStackSortConfig})(configs||(configs={}));var configs;(function(configs){var StreetConfigStruct=(function(_super){__extends(StreetConfigStruct,_super);function StreetConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(StreetConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("street",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return StreetConfigStruct}(configs.BaseConfig));configs.StreetConfigStruct=StreetConfigStruct})(configs||(configs={}));var configs;(function(configs){var StreetConfig=(function(_super){__extends(StreetConfig,_super);function StreetConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(StreetConfig.prototype,"Require",{get:function(){if(this._require==null){this._require=[];if(this.spokesperson_art!=0){this._require.push({type:Games.ActorRequireEnum.art,value:this.spokesperson_art})}if(this.spokesperson_entertainment!=0){this._require.push({type:Games.ActorRequireEnum.entertainment,value:this.spokesperson_entertainment})}if(this.spokesperson_performance!=0){this._require.push({type:Games.ActorRequireEnum.performance,value:this.spokesperson_performance})}if(this.spokesperson_plot!=0){this._require.push({type:Games.ActorRequireEnum.plot,value:this.spokesperson_plot})}if(this.spokesperson_scene!=0){this._require.push({type:Games.ActorRequireEnum.scene,value:this.spokesperson_scene})}if(this.spokesperson_sex!=0){this._require.push({type:Games.ActorRequireEnum.sex,value:this.spokesperson_sex})}if(this.spokesperson_age!=0){this._require.push({type:Games.ActorRequireEnum.age,value:this.spokesperson_age})}if(this.spokesperson_Continents!=0){this._require.push({type:Games.ActorRequireEnum.Continents,value:this.spokesperson_Continents})}if(this.spokesperson_type!=0){this._require.push({type:Games.ActorRequireEnum.type,value:this.spokesperson_type})}}return this._require},enumerable:true,configurable:true});return StreetConfig}(configs.StreetConfigStruct));configs.StreetConfig=StreetConfig})(configs||(configs={}));var configs;(function(configs){var SysTimeConfigStruct=(function(_super){__extends(SysTimeConfigStruct,_super);function SysTimeConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return SysTimeConfigStruct}(configs.BaseConfig));configs.SysTimeConfigStruct=SysTimeConfigStruct})(configs||(configs={}));configs.SysTimeConfig=configs.SysTimeConfigStruct;var configs;(function(configs){var TaskConfigStruct=(function(_super){__extends(TaskConfigStruct,_super);function TaskConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(TaskConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("task",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return TaskConfigStruct}(configs.BaseConfig));configs.TaskConfigStruct=TaskConfigStruct})(configs||(configs={}));var configs;(function(configs){var TaskConfig=(function(_super){__extends(TaskConfig,_super);function TaskConfig(){return _super!==null&&_super.apply(this,arguments)||this}return TaskConfig}(configs.TaskConfigStruct));configs.TaskConfig=TaskConfig})(configs||(configs={}));var configs;(function(configs){var TestConfigStruct=(function(_super){__extends(TestConfigStruct,_super);function TestConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return TestConfigStruct}(configs.BaseConfig));configs.TestConfigStruct=TestConfigStruct})(configs||(configs={}));var configs;(function(configs){var TestConfig=(function(_super){__extends(TestConfig,_super);function TestConfig(){return _super!==null&&_super.apply(this,arguments)||this}return TestConfig}(configs.TestConfigStruct));configs.TestConfig=TestConfig})(configs||(configs={}));var configs;(function(configs){var TurntableCompleteConfigStruct=(function(_super){__extends(TurntableCompleteConfigStruct,_super);function TurntableCompleteConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return TurntableCompleteConfigStruct}(configs.BaseConfig));configs.TurntableCompleteConfigStruct=TurntableCompleteConfigStruct})(configs||(configs={}));configs.TurntableCompleteConfig=configs.TurntableCompleteConfigStruct;var configs;(function(configs){var TurntableRewardConfigStruct=(function(_super){__extends(TurntableRewardConfigStruct,_super);function TurntableRewardConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return TurntableRewardConfigStruct}(configs.BaseConfig));configs.TurntableRewardConfigStruct=TurntableRewardConfigStruct})(configs||(configs={}));configs.TurntableRewardConfig=configs.TurntableRewardConfigStruct;var configs;(function(configs){var TypeConfigStruct=(function(_super){__extends(TypeConfigStruct,_super);function TypeConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return TypeConfigStruct}(configs.BaseConfig));configs.TypeConfigStruct=TypeConfigStruct})(configs||(configs={}));var configs;(function(configs){var TypeConfig=(function(_super){__extends(TypeConfig,_super);function TypeConfig(){return _super!==null&&_super.apply(this,arguments)||this}return TypeConfig}(configs.TypeConfigStruct));configs.TypeConfig=TypeConfig})(configs||(configs={}));var configs;(function(configs){var UnlockConfigStruct=(function(_super){__extends(UnlockConfigStruct,_super);function UnlockConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(UnlockConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("unlock",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(UnlockConfigStruct.prototype,"touch_txt",{get:function(){var value=LangManager.Instance.getValue("unlock",this.id,"touch_txt");if(!isNullOrEmpty(value)){return value}return this.zh_cn_touch_txt},enumerable:true,configurable:true});return UnlockConfigStruct}(configs.BaseConfig));configs.UnlockConfigStruct=UnlockConfigStruct})(configs||(configs={}));var configs;(function(configs){var UnlockConfig=(function(_super){__extends(UnlockConfig,_super);function UnlockConfig(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(UnlockConfig.prototype,"menuConfig",{get:function(){return Game.config.menu.getConfig(this.menu_id)},enumerable:true,configurable:true});Object.defineProperty(UnlockConfig.prototype,"lockvisible",{get:function(){return this.show_type==1},enumerable:true,configurable:true});Object.defineProperty(UnlockConfig.prototype,"isUnlock",{get:function(){var menuConfig=this.menuConfig;if(menuConfig){return menuConfig.isUnlock}return false},enumerable:true,configurable:true});Object.defineProperty(UnlockConfig.prototype,"isNew",{get:function(){var menuConfig=this.menuConfig;if(menuConfig){return menuConfig.isNew}return false},enumerable:true,configurable:true});Object.defineProperty(UnlockConfig.prototype,"menuId",{get:function(){return this.menu_id},enumerable:true,configurable:true});Object.defineProperty(UnlockConfig.prototype,"isOpenShow",{get:function(){for(var index=0;index<this.open_show.length;index++){var element=this.open_show[index];if(element==1){return true}}return false},enumerable:true,configurable:true});Object.defineProperty(UnlockConfig.prototype,"isOpenShowMenu",{get:function(){for(var index=0;index<this.open_show.length;index++){var element=this.open_show[index];if(element==2){return true}}return false},enumerable:true,configurable:true});Object.defineProperty(UnlockConfig.prototype,"progressGoal",{get:function(){return Games.MenuValidateProgress.getInstance().progress(this.menuId)},enumerable:true,configurable:true});Object.defineProperty(UnlockConfig.prototype,"iconUrl",{get:function(){var url="";if(this.item_id>0){url=Game.config.item.getItemIcon(this.item_id)}else{if(this.menuConfig){url=this.menuConfig.iconUrl}}return url},enumerable:true,configurable:true});return UnlockConfig}(configs.UnlockConfigStruct));configs.UnlockConfig=UnlockConfig})(configs||(configs={}));var configs;(function(configs){var VisitConfigStruct=(function(_super){__extends(VisitConfigStruct,_super);function VisitConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(VisitConfigStruct.prototype,"fans_speak0",{get:function(){var value=LangManager.Instance.getValue("visit",this.id,"fans_speak0");if(!isNullOrEmpty(value)){return value}return this.zh_cn_fans_speak0},enumerable:true,configurable:true});Object.defineProperty(VisitConfigStruct.prototype,"actor_speak0",{get:function(){var value=LangManager.Instance.getValue("visit",this.id,"actor_speak0");if(!isNullOrEmpty(value)){return value}return this.zh_cn_actor_speak0},enumerable:true,configurable:true});Object.defineProperty(VisitConfigStruct.prototype,"fans_speak1",{get:function(){var value=LangManager.Instance.getValue("visit",this.id,"fans_speak1");if(!isNullOrEmpty(value)){return value}return this.zh_cn_fans_speak1},enumerable:true,configurable:true});Object.defineProperty(VisitConfigStruct.prototype,"actor_speak1",{get:function(){var value=LangManager.Instance.getValue("visit",this.id,"actor_speak1");if(!isNullOrEmpty(value)){return value}return this.zh_cn_actor_speak1},enumerable:true,configurable:true});Object.defineProperty(VisitConfigStruct.prototype,"fans_speak2",{get:function(){var value=LangManager.Instance.getValue("visit",this.id,"fans_speak2");if(!isNullOrEmpty(value)){return value}return this.zh_cn_fans_speak2},enumerable:true,configurable:true});Object.defineProperty(VisitConfigStruct.prototype,"actor_speak2",{get:function(){var value=LangManager.Instance.getValue("visit",this.id,"actor_speak2");if(!isNullOrEmpty(value)){return value}return this.zh_cn_actor_speak2},enumerable:true,configurable:true});return VisitConfigStruct}(configs.BaseConfig));configs.VisitConfigStruct=VisitConfigStruct})(configs||(configs={}));var configs;(function(configs){var VisitConfig=(function(_super){__extends(VisitConfig,_super);function VisitConfig(){return _super!==null&&_super.apply(this,arguments)||this}return VisitConfig}(configs.VisitConfigStruct));configs.VisitConfig=VisitConfig})(configs||(configs={}));var configs;(function(configs){var WeeklyQuestConfigStruct=(function(_super){__extends(WeeklyQuestConfigStruct,_super);function WeeklyQuestConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(WeeklyQuestConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("weeklyQuest",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});Object.defineProperty(WeeklyQuestConfigStruct.prototype,"des",{get:function(){var value=LangManager.Instance.getValue("weeklyQuest",this.id,"des");if(!isNullOrEmpty(value)){return value}return this.zh_cn_des},enumerable:true,configurable:true});return WeeklyQuestConfigStruct}(configs.BaseConfig));configs.WeeklyQuestConfigStruct=WeeklyQuestConfigStruct})(configs||(configs={}));configs.WeeklyQuestConfig=configs.WeeklyQuestConfigStruct;var configs;(function(configs){var WelfareConfigStruct=(function(_super){__extends(WelfareConfigStruct,_super);function WelfareConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(WelfareConfigStruct.prototype,"activities_name",{get:function(){var value=LangManager.Instance.getValue("welfare",this.id,"activities_name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_activities_name},enumerable:true,configurable:true});return WelfareConfigStruct}(configs.BaseConfig));configs.WelfareConfigStruct=WelfareConfigStruct})(configs||(configs={}));configs.WelfareConfig=configs.WelfareConfigStruct;var configs;(function(configs){var WheelDropConfigStruct=(function(_super){__extends(WheelDropConfigStruct,_super);function WheelDropConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return WheelDropConfigStruct}(configs.BaseConfig));configs.WheelDropConfigStruct=WheelDropConfigStruct})(configs||(configs={}));configs.WheelDropConfig=configs.WheelDropConfigStruct;var configs;(function(configs){var WriterAbilityConfigStruct=(function(_super){__extends(WriterAbilityConfigStruct,_super);function WriterAbilityConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return WriterAbilityConfigStruct}(configs.BaseConfig));configs.WriterAbilityConfigStruct=WriterAbilityConfigStruct})(configs||(configs={}));configs.WriterAbilityConfig=configs.WriterAbilityConfigStruct;var configs;(function(configs){var WriterAdaptEffectConfigStruct=(function(_super){__extends(WriterAdaptEffectConfigStruct,_super);function WriterAdaptEffectConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(WriterAdaptEffectConfigStruct.prototype,"adapt",{get:function(){var value=LangManager.Instance.getValue("writerAdaptEffect",this.id,"adapt");if(!isNullOrEmpty(value)){return value}return this.zh_cn_adapt},enumerable:true,configurable:true});Object.defineProperty(WriterAdaptEffectConfigStruct.prototype,"adapt_des",{get:function(){var value=LangManager.Instance.getValue("writerAdaptEffect",this.id,"adapt_des");if(!isNullOrEmpty(value)){return value}return this.zh_cn_adapt_des},enumerable:true,configurable:true});return WriterAdaptEffectConfigStruct}(configs.BaseConfig));configs.WriterAdaptEffectConfigStruct=WriterAdaptEffectConfigStruct})(configs||(configs={}));configs.WriterAdaptEffectConfig=configs.WriterAdaptEffectConfigStruct;var configs;(function(configs){var WriterConfigStruct=(function(_super){__extends(WriterConfigStruct,_super);function WriterConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(WriterConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("writer",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return WriterConfigStruct}(configs.BaseConfig));configs.WriterConfigStruct=WriterConfigStruct})(configs||(configs={}));configs.WriterConfig=configs.WriterConfigStruct;var configs;(function(configs){var WriterLevelConfigStruct=(function(_super){__extends(WriterLevelConfigStruct,_super);function WriterLevelConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(WriterLevelConfigStruct.prototype,"name",{get:function(){var value=LangManager.Instance.getValue("writerLevel",this.id,"name");if(!isNullOrEmpty(value)){return value}return this.zh_cn_name},enumerable:true,configurable:true});return WriterLevelConfigStruct}(configs.BaseConfig));configs.WriterLevelConfigStruct=WriterLevelConfigStruct})(configs||(configs={}));configs.WriterLevelConfig=configs.WriterLevelConfigStruct;var configs;(function(configs){var WriterSkillConfigStruct=(function(_super){__extends(WriterSkillConfigStruct,_super);function WriterSkillConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return WriterSkillConfigStruct}(configs.BaseConfig));configs.WriterSkillConfigStruct=WriterSkillConfigStruct})(configs||(configs={}));configs.WriterSkillConfig=configs.WriterSkillConfigStruct;var configs;(function(configs){var WriterStationConfigStruct=(function(_super){__extends(WriterStationConfigStruct,_super);function WriterStationConfigStruct(){return _super!==null&&_super.apply(this,arguments)||this}return WriterStationConfigStruct}(configs.BaseConfig));configs.WriterStationConfigStruct=WriterStationConfigStruct})(configs||(configs={}));configs.WriterStationConfig=configs.WriterStationConfigStruct;var configs;(function(configs){var ActionConfigReaderStruct=(function(_super){__extends(ActionConfigReaderStruct,_super);function ActionConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Action";return _this}ActionConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActionConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.action=csvGetString(csv,this.GetHeadIndex("action"));config.parts=configs.DTParts.parse(csvGetString(csv,this.GetHeadIndex("parts")));config.loop=csvGetInt(csv,this.GetHeadIndex("loop"));config.Connect=csvGetInt(csv,this.GetHeadIndex("Connect"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return ActionConfigReaderStruct}(configs.CsvConfigRender));configs.ActionConfigReaderStruct=ActionConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var ActionConfigReader=(function(_super){__extends(ActionConfigReader,_super);function ActionConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}ActionConfigReader.prototype.getActionId=function(actionName){var actionList=this.getConfigList();var finder=actionList.findOne(function(item){return item.action==actionName});return(finder&&finder.id)||1002};return ActionConfigReader}(configs.ActionConfigReaderStruct));configs.ActionConfigReader=ActionConfigReader})(configs||(configs={}));var configs;(function(configs){var ActivitiesConfigReaderStruct=(function(_super){__extends(ActivitiesConfigReaderStruct,_super);function ActivitiesConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Activities";return _this}ActivitiesConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActivitiesConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.zh_cn_activities_name=csvGetString(csv,this.GetHeadIndex("zh_cn_activities_name"));config.start_type=csvGetInt(csv,this.GetHeadIndex("start_type"));config.level_req=csvGetInt(csv,this.GetHeadIndex("level_req"));config.block_req=csvGetInt(csv,this.GetHeadIndex("block_req"));config.start=csvGetInt(csv,this.GetHeadIndex("start"));config.duration=csvGetInt(csv,this.GetHeadIndex("duration"));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.icon_chosen=csvGetInt(csv,this.GetHeadIndex("icon_chosen"));config.zh_cn_activities_info=csvGetString(csv,this.GetHeadIndex("zh_cn_activities_info"));config.info=csvGetString(csv,this.GetHeadIndex("info"));this.addConfig(config)};return ActivitiesConfigReaderStruct}(configs.CsvConfigRender));configs.ActivitiesConfigReaderStruct=ActivitiesConfigReaderStruct})(configs||(configs={}));configs.ActivitiesConfigReader=configs.ActivitiesConfigReaderStruct;var configs;(function(configs){var ActorAideattachConfigReaderStruct=(function(_super){__extends(ActorAideattachConfigReaderStruct,_super);function ActorAideattachConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ActorAideattach";return _this}ActorAideattachConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActorAideattachConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.actor=csvGetInt(csv,this.GetHeadIndex("actor"));config.aide_type=csvGetInt(csv,this.GetHeadIndex("aide_type"));config.attach_type=csvGetInt(csv,this.GetHeadIndex("attach_type"));config.value=csvGetInt(csv,this.GetHeadIndex("value"));config.lv=csvGetInt(csv,this.GetHeadIndex("lv"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return ActorAideattachConfigReaderStruct}(configs.CsvConfigRender));configs.ActorAideattachConfigReaderStruct=ActorAideattachConfigReaderStruct})(configs||(configs={}));configs.ActorAideattachConfigReader=configs.ActorAideattachConfigReaderStruct;var configs;(function(configs){var ActorAideConfigReaderStruct=(function(_super){__extends(ActorAideConfigReaderStruct,_super);function ActorAideConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ActorAide";return _this}ActorAideConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActorAideConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.star=csvGetInt(csv,this.GetHeadIndex("star"));config.aide_type=csvGetInt(csv,this.GetHeadIndex("aide_type"));config.number=csvGetInt(csv,this.GetHeadIndex("number"));config.lv=csvGetInt(csv,this.GetHeadIndex("lv"));config.cost=csvGetInt(csv,this.GetHeadIndex("cost"));config.introduction=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("introduction")));config.en_name=csvGetString(csv,this.GetHeadIndex("en_name"));config.cn_name=csvGetString(csv,this.GetHeadIndex("cn_name"));config.avatar=csvGetInt(csv,this.GetHeadIndex("avatar"));config.secondary_property=csvGetInt(csv,this.GetHeadIndex("secondary_property"));config.main_property=csvGetInt(csv,this.GetHeadIndex("main_property"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return ActorAideConfigReaderStruct}(configs.CsvConfigRender));configs.ActorAideConfigReaderStruct=ActorAideConfigReaderStruct})(configs||(configs={}));configs.ActorAideConfigReader=configs.ActorAideConfigReaderStruct;var configs;(function(configs){var ActorAideIntimacyConfigReaderStruct=(function(_super){__extends(ActorAideIntimacyConfigReaderStruct,_super);function ActorAideIntimacyConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ActorAideIntimacy";return _this}ActorAideIntimacyConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActorAideIntimacyConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.cost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("cost")));config.percent=csvGetInt(csv,this.GetHeadIndex("percent"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return ActorAideIntimacyConfigReaderStruct}(configs.CsvConfigRender));configs.ActorAideIntimacyConfigReaderStruct=ActorAideIntimacyConfigReaderStruct})(configs||(configs={}));configs.ActorAideIntimacyConfigReader=configs.ActorAideIntimacyConfigReaderStruct;var configs;(function(configs){var ActorAideLvConfigReaderStruct=(function(_super){__extends(ActorAideLvConfigReaderStruct,_super);function ActorAideLvConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ActorAideLv";return _this}ActorAideLvConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActorAideLvConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.lv=toIntArray(csvGetString(csv,this.GetHeadIndex("lv")));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return ActorAideLvConfigReaderStruct}(configs.CsvConfigRender));configs.ActorAideLvConfigReaderStruct=ActorAideLvConfigReaderStruct})(configs||(configs={}));configs.ActorAideLvConfigReader=configs.ActorAideLvConfigReaderStruct;var configs;(function(configs){var ActorAssetsConfigReaderStruct=(function(_super){__extends(ActorAssetsConfigReaderStruct,_super);function ActorAssetsConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ActorAssets";return _this}ActorAssetsConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActorAssetsConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.actor_property=csvGetInt(csv,this.GetHeadIndex("actor_property"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return ActorAssetsConfigReaderStruct}(configs.CsvConfigRender));configs.ActorAssetsConfigReaderStruct=ActorAssetsConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var ActorAssetsConfigReader=(function(_super){__extends(ActorAssetsConfigReader,_super);function ActorAssetsConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}ActorAssetsConfigReader.prototype.onGameLoadedAll=function(){};return ActorAssetsConfigReader}(configs.ActorAssetsConfigReaderStruct));configs.ActorAssetsConfigReader=ActorAssetsConfigReader})(configs||(configs={}));var configs;(function(configs){var ActorAssetsLvConfigReaderStruct=(function(_super){__extends(ActorAssetsLvConfigReaderStruct,_super);function ActorAssetsLvConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ActorAssetsLv";return _this}ActorAssetsLvConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActorAssetsLvConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.star1_num=csvGetInt(csv,this.GetHeadIndex("star1_num"));config.star2_num=csvGetInt(csv,this.GetHeadIndex("star2_num"));config.star3_num=csvGetInt(csv,this.GetHeadIndex("star3_num"));config.star4_num=csvGetInt(csv,this.GetHeadIndex("star4_num"));config.star5_num=csvGetInt(csv,this.GetHeadIndex("star5_num"));config.star6_num=csvGetInt(csv,this.GetHeadIndex("star6_num"));config.star1_value=csvGetInt(csv,this.GetHeadIndex("star1_value"));config.star2_value=csvGetInt(csv,this.GetHeadIndex("star2_value"));config.star3_value=csvGetInt(csv,this.GetHeadIndex("star3_value"));config.star4_value=csvGetInt(csv,this.GetHeadIndex("star4_value"));config.star5_value=csvGetInt(csv,this.GetHeadIndex("star5_value"));config.star6_value=csvGetInt(csv,this.GetHeadIndex("star6_value"));config.sex_1101=csvGetInt(csv,this.GetHeadIndex("sex_1101"));config.sex_1102=csvGetInt(csv,this.GetHeadIndex("sex_1102"));config.c_1201=csvGetInt(csv,this.GetHeadIndex("c_1201"));config.c_1202=csvGetInt(csv,this.GetHeadIndex("c_1202"));config.c_1203=csvGetInt(csv,this.GetHeadIndex("c_1203"));config.p_1401=csvGetInt(csv,this.GetHeadIndex("p_1401"));config.p_1402=csvGetInt(csv,this.GetHeadIndex("p_1402"));config.y_1501=csvGetInt(csv,this.GetHeadIndex("y_1501"));config.y_1502=csvGetInt(csv,this.GetHeadIndex("y_1502"));config.star1_max=csvGetInt(csv,this.GetHeadIndex("star1_max"));config.star2_max=csvGetInt(csv,this.GetHeadIndex("star2_max"));config.star3_max=csvGetInt(csv,this.GetHeadIndex("star3_max"));config.star4_max=csvGetInt(csv,this.GetHeadIndex("star4_max"));config.star5_max=csvGetInt(csv,this.GetHeadIndex("star5_max"));config.star6_max=csvGetInt(csv,this.GetHeadIndex("star6_max"));this.addConfig(config)};return ActorAssetsLvConfigReaderStruct}(configs.CsvConfigRender));configs.ActorAssetsLvConfigReaderStruct=ActorAssetsLvConfigReaderStruct})(configs||(configs={}));configs.ActorAssetsLvConfigReader=configs.ActorAssetsLvConfigReaderStruct;var configs;(function(configs){var ActorConfigReaderStruct=(function(_super){__extends(ActorConfigReaderStruct,_super);function ActorConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Actor";return _this}ActorConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActorConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.en_name=csvGetString(csv,this.GetHeadIndex("en_name"));config.cn_name=csvGetString(csv,this.GetHeadIndex("cn_name"));config.random_name=csvGetInt(csv,this.GetHeadIndex("random_name"));config.star=csvGetInt(csv,this.GetHeadIndex("star"));config.sex=csvGetInt(csv,this.GetHeadIndex("sex"));config.country=csvGetInt(csv,this.GetHeadIndex("country"));config.show_type=csvGetInt(csv,this.GetHeadIndex("show_type"));config.age_type=csvGetInt(csv,this.GetHeadIndex("age_type"));config.avatar=csvGetInt(csv,this.GetHeadIndex("avatar"));config.spectacle=csvGetInt(csv,this.GetHeadIndex("spectacle"));config.perform=csvGetInt(csv,this.GetHeadIndex("perform"));config.plot=csvGetInt(csv,this.GetHeadIndex("plot"));config.art=csvGetInt(csv,this.GetHeadIndex("art"));config.entertainment=csvGetInt(csv,this.GetHeadIndex("entertainment"));config.main_id=csvGetInt(csv,this.GetHeadIndex("main_id"));config.skill=configs.DTActorSkill.parseArray(csvGetString(csv,this.GetHeadIndex("skill")));config.story_type=configs.DTActorStory.parseArray(csvGetString(csv,this.GetHeadIndex("story_type")));config.story_feature=configs.DTActorFeature.parseArray(csvGetString(csv,this.GetHeadIndex("story_feature")));config.character=configs.DTActorCharacter.parseArray(csvGetString(csv,this.GetHeadIndex("character")));config.surprise=csvGetInt(csv,this.GetHeadIndex("surprise"));config.cost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("cost")));config.recruit_reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("recruit_reward")));config.enable_cost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("enable_cost")));config.random_value=csvGetInt(csv,this.GetHeadIndex("random_value"));config.exp=csvGetInt(csv,this.GetHeadIndex("exp"));config.paycheck=csvGetInt(csv,this.GetHeadIndex("paycheck"));config.stamina=csvGetInt(csv,this.GetHeadIndex("stamina"));config.culture=csvGetInt(csv,this.GetHeadIndex("culture"));config.assets=csvGetInt(csv,this.GetHeadIndex("assets"));config.en_tips=csvGetString(csv,this.GetHeadIndex("en_tips"));config.cn_tips=csvGetString(csv,this.GetHeadIndex("cn_tips"));config.en_getway=csvGetString(csv,this.GetHeadIndex("en_getway"));config.cn_getway=csvGetString(csv,this.GetHeadIndex("cn_getway"));this.addConfig(config)};return ActorConfigReaderStruct}(configs.CsvConfigRender));configs.ActorConfigReaderStruct=ActorConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var ActorConfigReader=(function(_super){__extends(ActorConfigReader,_super);function ActorConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}ActorConfigReader.prototype.GetRequire=function(id){var cfg=this.getConfig(id);var list=[];var map={};map[Games.ActorRequireEnum.sex.toString()]=cfg.sex;map[Games.ActorRequireEnum.age.toString()]=cfg.age_type;map[Games.ActorRequireEnum.Continents.toString()]=cfg.country;map[Games.ActorRequireEnum.type.toString()]=cfg.show_type;return map};ActorConfigReader.prototype.GetBodyIconUrl=function(id){var cfg=this.getConfig(id);if(cfg){return Game.config.avatar.GetBodyIconUrl(cfg.avatar)}return""};return ActorConfigReader}(configs.ActorConfigReaderStruct));configs.ActorConfigReader=ActorConfigReader})(configs||(configs={}));var configs;(function(configs){var ActorLevelConfigReaderStruct=(function(_super){__extends(ActorLevelConfigReaderStruct,_super);function ActorLevelConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ActorLevel";return _this}ActorLevelConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActorLevelConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.star1_vice=csvGetInt(csv,this.GetHeadIndex("star1_vice"));config.star1_main=csvGetInt(csv,this.GetHeadIndex("star1_main"));config.star2_vice=csvGetInt(csv,this.GetHeadIndex("star2_vice"));config.star2_main=csvGetInt(csv,this.GetHeadIndex("star2_main"));config.star3_vice=csvGetInt(csv,this.GetHeadIndex("star3_vice"));config.star3_main=csvGetInt(csv,this.GetHeadIndex("star3_main"));config.star4_vice=csvGetInt(csv,this.GetHeadIndex("star4_vice"));config.star4_main=csvGetInt(csv,this.GetHeadIndex("star4_main"));config.star5_vice=csvGetInt(csv,this.GetHeadIndex("star5_vice"));config.star5_main=csvGetInt(csv,this.GetHeadIndex("star5_main"));config.star6_vice=csvGetInt(csv,this.GetHeadIndex("star6_vice"));config.star6_main=csvGetInt(csv,this.GetHeadIndex("star6_main"));config.cost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("cost")));config.star1_paycheck=csvGetInt(csv,this.GetHeadIndex("star1_paycheck"));config.star2_paycheck=csvGetInt(csv,this.GetHeadIndex("star2_paycheck"));config.star3_paycheck=csvGetInt(csv,this.GetHeadIndex("star3_paycheck"));config.star4_paycheck=csvGetInt(csv,this.GetHeadIndex("star4_paycheck"));config.star5_paycheck=csvGetInt(csv,this.GetHeadIndex("star5_paycheck"));config.star6_paycheck=csvGetInt(csv,this.GetHeadIndex("star6_paycheck"));config.star1_assets=csvGetInt(csv,this.GetHeadIndex("star1_assets"));config.star2_assets=csvGetInt(csv,this.GetHeadIndex("star2_assets"));config.star3_assets=csvGetInt(csv,this.GetHeadIndex("star3_assets"));config.star4_assets=csvGetInt(csv,this.GetHeadIndex("star4_assets"));config.star5_assets=csvGetInt(csv,this.GetHeadIndex("star5_assets"));config.star6_assets=csvGetInt(csv,this.GetHeadIndex("star6_assets"));config.star1_stamina=csvGetInt(csv,this.GetHeadIndex("star1_stamina"));config.star2_stamina=csvGetInt(csv,this.GetHeadIndex("star2_stamina"));config.star3_stamina=csvGetInt(csv,this.GetHeadIndex("star3_stamina"));config.star4_stamina=csvGetInt(csv,this.GetHeadIndex("star4_stamina"));config.star5_stamina=csvGetInt(csv,this.GetHeadIndex("star5_stamina"));config.star6_stamina=csvGetInt(csv,this.GetHeadIndex("star6_stamina"));config.culture=csvGetInt(csv,this.GetHeadIndex("culture"));config.star1_paycheck_max=csvGetInt(csv,this.GetHeadIndex("star1_paycheck_max"));config.star2_paycheck_max=csvGetInt(csv,this.GetHeadIndex("star2_paycheck_max"));config.star3_paycheck_max=csvGetInt(csv,this.GetHeadIndex("star3_paycheck_max"));config.star4_paycheck_max=csvGetInt(csv,this.GetHeadIndex("star4_paycheck_max"));config.star5_paycheck_max=csvGetInt(csv,this.GetHeadIndex("star5_paycheck_max"));config.star6_paycheck_max=csvGetInt(csv,this.GetHeadIndex("star6_paycheck_max"));this.addConfig(config)};return ActorLevelConfigReaderStruct}(configs.CsvConfigRender));configs.ActorLevelConfigReaderStruct=ActorLevelConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var ActorLevelConfigReader=(function(_super){__extends(ActorLevelConfigReader,_super);function ActorLevelConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}ActorLevelConfigReader.prototype.getConfigByIdLv=function(id,lv){var actorConfig=Game.config.actor.getConfig(id);if(actorConfig){}return this.getConfig(id)};return ActorLevelConfigReader}(configs.ActorLevelConfigReaderStruct));configs.ActorLevelConfigReader=ActorLevelConfigReader})(configs||(configs={}));var configs;(function(configs){var ActorLoyaltyConfigReaderStruct=(function(_super){__extends(ActorLoyaltyConfigReaderStruct,_super);function ActorLoyaltyConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ActorLoyalty";return _this}ActorLoyaltyConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActorLoyaltyConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.lv=csvGetInt(csv,this.GetHeadIndex("lv"));config.exp=csvGetInt(csv,this.GetHeadIndex("exp"));config.max_lv=csvGetInt(csv,this.GetHeadIndex("max_lv"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return ActorLoyaltyConfigReaderStruct}(configs.CsvConfigRender));configs.ActorLoyaltyConfigReaderStruct=ActorLoyaltyConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var ActorLoyaltyConfigReader=(function(_super){__extends(ActorLoyaltyConfigReader,_super);function ActorLoyaltyConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.acotrLoyaltyDict=new Dictionary();return _this}ActorLoyaltyConfigReader.prototype.addConfig=function(cfg){_super.prototype.addConfig.call(this,cfg);var actorId=this.getActorId(cfg.id);var lvs;if(this.acotrLoyaltyDict.hasKey(actorId)==false){lvs=[];this.acotrLoyaltyDict.add(actorId,lvs)}else{lvs=this.acotrLoyaltyDict.getValue(actorId)}if(lvs.length==0||(lvs.length>0&&lvs[lvs.length-1]!=cfg.max_lv)){lvs.push(cfg.max_lv)}};ActorLoyaltyConfigReader.prototype.getLoyaltyId=function(id,lv){return id*100+lv};ActorLoyaltyConfigReader.prototype.getActorId=function(id){return Math.floor(id/100)};ActorLoyaltyConfigReader.prototype.getConfigByIdLv=function(id,lv){var id=this.getLoyaltyId(id,lv);return this.getConfig(id)};ActorLoyaltyConfigReader.prototype.getCurMaxLv=function(id,lv,realMaxLv){var maxlv=0;var lvs=this.acotrLoyaltyDict.getValue(id);if(lvs&&lvs.length>0){for(var index=0;index<lvs.length;index++){var element=lvs[index];if(element>lv){maxlv=element;break}else{if(element==lv){if(realMaxLv<=element){maxlv=element;break}}}}}return maxlv};ActorLoyaltyConfigReader.prototype.getMaxLv=function(id,lv){var maxlv=0;var lvs=this.acotrLoyaltyDict.getValue(id);if(lvs&&lvs.length>0){for(var index=0;index<lvs.length;index++){var element=lvs[index];if(element>=lv){maxlv=element;break}}}return maxlv};return ActorLoyaltyConfigReader}(configs.ActorLoyaltyConfigReaderStruct));configs.ActorLoyaltyConfigReader=ActorLoyaltyConfigReader})(configs||(configs={}));var configs;(function(configs){var ActorProficiencyConfigReaderStruct=(function(_super){__extends(ActorProficiencyConfigReaderStruct,_super);function ActorProficiencyConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ActorProficiency";return _this}ActorProficiencyConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActorProficiencyConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.shoot_type=csvGetInt(csv,this.GetHeadIndex("shoot_type"));config.lv=csvGetInt(csv,this.GetHeadIndex("lv"));config.shoot_exp=csvGetInt(csv,this.GetHeadIndex("shoot_exp"));config.exp=csvGetInt(csv,this.GetHeadIndex("exp"));config.proficiency=configs.DTProficiency.parse(csvGetString(csv,this.GetHeadIndex("proficiency")));this.addConfig(config)};return ActorProficiencyConfigReaderStruct}(configs.CsvConfigRender));configs.ActorProficiencyConfigReaderStruct=ActorProficiencyConfigReaderStruct})(configs||(configs={}));configs.ActorProficiencyConfigReader=configs.ActorProficiencyConfigReaderStruct;var configs;(function(configs){var ActorTrainConfigReaderStruct=(function(_super){__extends(ActorTrainConfigReaderStruct,_super);function ActorTrainConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ActorTrain";return _this}ActorTrainConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActorTrainConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.train_type=csvGetInt(csv,this.GetHeadIndex("train_type"));config.en_name=csvGetString(csv,this.GetHeadIndex("en_name"));config.cn_name=csvGetString(csv,this.GetHeadIndex("cn_name"));config.property=toIntArray(csvGetString(csv,this.GetHeadIndex("property")));config.en_scene_name=csvGetString(csv,this.GetHeadIndex("en_scene_name"));config.cn_scene_name=csvGetString(csv,this.GetHeadIndex("cn_scene_name"));config.action=csvGetInt(csv,this.GetHeadIndex("action"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return ActorTrainConfigReaderStruct}(configs.CsvConfigRender));configs.ActorTrainConfigReaderStruct=ActorTrainConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var ActorTrainConfigReader=(function(_super){__extends(ActorTrainConfigReader,_super);function ActorTrainConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}return ActorTrainConfigReader}(configs.ActorTrainConfigReaderStruct));configs.ActorTrainConfigReader=ActorTrainConfigReader})(configs||(configs={}));var configs;(function(configs){var ActorTrainLvConfigReaderStruct=(function(_super){__extends(ActorTrainLvConfigReaderStruct,_super);function ActorTrainLvConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ActorTrainLv";return _this}ActorTrainLvConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ActorTrainLvConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.star1_vice=toIntArray(csvGetString(csv,this.GetHeadIndex("star1_vice")));config.star1_main=toIntArray(csvGetString(csv,this.GetHeadIndex("star1_main")));config.star2_vice=toIntArray(csvGetString(csv,this.GetHeadIndex("star2_vice")));config.star2_main=toIntArray(csvGetString(csv,this.GetHeadIndex("star2_main")));config.star3_vice=toIntArray(csvGetString(csv,this.GetHeadIndex("star3_vice")));config.star3_main=toIntArray(csvGetString(csv,this.GetHeadIndex("star3_main")));config.star4_vice=toIntArray(csvGetString(csv,this.GetHeadIndex("star4_vice")));config.star4_main=toIntArray(csvGetString(csv,this.GetHeadIndex("star4_main")));config.star5_vice=toIntArray(csvGetString(csv,this.GetHeadIndex("star5_vice")));config.star5_main=toIntArray(csvGetString(csv,this.GetHeadIndex("star5_main")));config.star6_vice=toIntArray(csvGetString(csv,this.GetHeadIndex("star6_vice")));config.star6_main=toIntArray(csvGetString(csv,this.GetHeadIndex("star6_main")));config.cost=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("cost")));config.diamonds_cost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("diamonds_cost")));this.addConfig(config)};return ActorTrainLvConfigReaderStruct}(configs.CsvConfigRender));configs.ActorTrainLvConfigReaderStruct=ActorTrainLvConfigReaderStruct})(configs||(configs={}));configs.ActorTrainLvConfigReader=configs.ActorTrainLvConfigReaderStruct;var configs;(function(configs){var AvatarConfigReaderStruct=(function(_super){__extends(AvatarConfigReaderStruct,_super);function AvatarConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Avatar";return _this}AvatarConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.AvatarConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name_e=csvGetString(csv,this.GetHeadIndex("name_e"));config.name_c=csvGetString(csv,this.GetHeadIndex("name_c"));config.body_icon=csvGetString(csv,this.GetHeadIndex("body_icon"));config.zh_cn_icon=csvGetString(csv,this.GetHeadIndex("zh_cn_icon"));config.en_icon=csvGetString(csv,this.GetHeadIndex("en_icon"));config.piece_icon=csvGetString(csv,this.GetHeadIndex("piece_icon"));config.model_skin=csvGetString(csv,this.GetHeadIndex("model_skin"));config.model_bones=csvGetString(csv,this.GetHeadIndex("model_bones"));config.bg_pic=csvGetString(csv,this.GetHeadIndex("bg_pic"));config.co_vector=configs.DTVector2.parse(csvGetString(csv,this.GetHeadIndex("co_vector")));this.addConfig(config)};return AvatarConfigReaderStruct}(configs.CsvConfigRender));configs.AvatarConfigReaderStruct=AvatarConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var AvatarConfigReader=(function(_super){__extends(AvatarConfigReader,_super);function AvatarConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.listBoxOfficeIcon=[6023,6024,6025,6026,6027,6028];return _this}AvatarConfigReader.prototype.GetAvatarInfo=function(id){var avatarCfg=this.getConfig(id);var avatarInfo=new Games.AvatarInfo();avatarInfo.texturePath=avatarCfg.modelSkinUrl;avatarInfo.skeletonPath=avatarCfg.modelBoneUrl;avatarInfo.type=Games.AvatarType.Npc;return avatarInfo};AvatarConfigReader.prototype.GetBodyIconUrl=function(avatarId){var cfg=this.getConfig(avatarId);if(cfg){return cfg.bodyIconUrl}return""};AvatarConfigReader.prototype.GetIconUrl=function(avatarId){var cfg=this.getConfig(avatarId);if(cfg){return cfg.iconUrl}return""};AvatarConfigReader.prototype.GetBoxOfficEvaluationIconUrl=function(index){var avatarIcon=this.listBoxOfficeIcon[index];if(avatarIcon){return Game.config.avatar.GetIconUrl(this.listBoxOfficeIcon[index])}console.log("票房等级"+index+"没有数据");return""};return AvatarConfigReader}(configs.AvatarConfigReaderStruct));configs.AvatarConfigReader=AvatarConfigReader})(configs||(configs={}));var configs;(function(configs){var BattleLevelConfigReaderStruct=(function(_super){__extends(BattleLevelConfigReaderStruct,_super);function BattleLevelConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="BattleLevel";return _this}BattleLevelConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.BattleLevelConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type_con=csvGetInt(csv,this.GetHeadIndex("type_con"));config.tag_con=csvGetInt(csv,this.GetHeadIndex("tag_con"));config.character_con=csvGetInt(csv,this.GetHeadIndex("character_con"));this.addConfig(config)};return BattleLevelConfigReaderStruct}(configs.CsvConfigRender));configs.BattleLevelConfigReaderStruct=BattleLevelConfigReaderStruct})(configs||(configs={}));configs.BattleLevelConfigReader=configs.BattleLevelConfigReaderStruct;var configs;(function(configs){var BattleShootTypeConfigReaderStruct=(function(_super){__extends(BattleShootTypeConfigReaderStruct,_super);function BattleShootTypeConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="BattleShootType";return _this}BattleShootTypeConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.BattleShootTypeConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.man=csvGetInt(csv,this.GetHeadIndex("man"));config.woman=csvGetInt(csv,this.GetHeadIndex("woman"));config.child=csvGetInt(csv,this.GetHeadIndex("child"));this.addConfig(config)};return BattleShootTypeConfigReaderStruct}(configs.CsvConfigRender));configs.BattleShootTypeConfigReaderStruct=BattleShootTypeConfigReaderStruct})(configs||(configs={}));configs.BattleShootTypeConfigReader=configs.BattleShootTypeConfigReaderStruct;var configs;(function(configs){var BlockLevelConfigReaderStruct=(function(_super){__extends(BlockLevelConfigReaderStruct,_super);function BlockLevelConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="BlockLevel";return _this}BlockLevelConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.BlockLevelConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.pic=csvGetInt(csv,this.GetHeadIndex("pic"));config.upgrade_req=csvGetInt(csv,this.GetHeadIndex("upgrade_req"));config.upgrade_menu=toIntArray(csvGetString(csv,this.GetHeadIndex("upgrade_menu")));config.upgrade_reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("upgrade_reward")));config.daily_reward=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("daily_reward")));config.cinema=toIntArray(csvGetString(csv,this.GetHeadIndex("cinema")));config.storysearchcost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("storysearchcost")));config.storysearchdollar=csvGetInt(csv,this.GetHeadIndex("storysearchdollar"));config.level_multiple=csvGetInt(csv,this.GetHeadIndex("level_multiple"));config.level_con=csvGetInt(csv,this.GetHeadIndex("level_con"));config.theater_level_con=csvGetInt(csv,this.GetHeadIndex("theater_level_con"));config.good=csvGetInt(csv,this.GetHeadIndex("good"));config.big_sell=csvGetInt(csv,this.GetHeadIndex("big_sell"));config.great_sell=csvGetInt(csv,this.GetHeadIndex("great_sell"));config.myth_sell=csvGetInt(csv,this.GetHeadIndex("myth_sell"));config.marvel_sell=csvGetInt(csv,this.GetHeadIndex("marvel_sell"));config.zh_cn_current_msg=toStringArray(csvGetString(csv,this.GetHeadIndex("zh_cn_current_msg")));config.zh_cn_next_msg=toStringArray(csvGetString(csv,this.GetHeadIndex("zh_cn_next_msg")));config.movie_daily_reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("movie_daily_reward")));config.task_cd=csvGetInt(csv,this.GetHeadIndex("task_cd"));config.city_gold=csvGetInt(csv,this.GetHeadIndex("city_gold"));config.city_fans=csvGetInt(csv,this.GetHeadIndex("city_fans"));config.party_guest=csvGetInt(csv,this.GetHeadIndex("party_guest"));config.story_num=csvGetInt(csv,this.GetHeadIndex("story_num"));config.city_envoy_max=csvGetInt(csv,this.GetHeadIndex("city_envoy_max"));config.finance_exchange=csvGetInt(csv,this.GetHeadIndex("finance_exchange"));config.actor_max=csvGetInt(csv,this.GetHeadIndex("actor_max"));config.certificate=csvGetInt(csv,this.GetHeadIndex("certificate"));config.sequel_max=csvGetInt(csv,this.GetHeadIndex("sequel_max"));config.screenwriter_max=csvGetInt(csv,this.GetHeadIndex("screenwriter_max"));config.story_refresh_times=csvGetInt(csv,this.GetHeadIndex("story_refresh_times"));config.box_target1=csvGetInt(csv,this.GetHeadIndex("box_target1"));config.box_target1_reward=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("box_target1_reward")));config.box_target2=csvGetInt(csv,this.GetHeadIndex("box_target2"));config.box_target2_reward=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("box_target2_reward")));config.box_target3=csvGetInt(csv,this.GetHeadIndex("box_target3"));config.box_target3_reward=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("box_target3_reward")));config.box_target_all=csvGetInt(csv,this.GetHeadIndex("box_target_all"));config.box_target_all_reward=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("box_target_all_reward")));config.new_effect=csvGetBoolean(csv,this.GetHeadIndex("new_effect"));config.zh_cn_name_tips=csvGetString(csv,this.GetHeadIndex("zh_cn_name_tips"));this.addConfig(config)};return BlockLevelConfigReaderStruct}(configs.CsvConfigRender));configs.BlockLevelConfigReaderStruct=BlockLevelConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var BlockLevelConfigReader=(function(_super){__extends(BlockLevelConfigReader,_super);function BlockLevelConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}BlockLevelConfigReader.prototype.getSellIcon=function(val){var list=this.getConfigList();for(var i=0;i<list.length;i++){if(list[i].id===User.info.stall){if(val>=list[i].marvel_sell){return 6028}else{if(val>=list[i].myth_sell){return 6027}else{if(val>=list[i].great_sell){return 6026}else{if(val>=list[i].big_sell){return 6025}else{if(val>=list[i].good){return 6024}else{return 6023}}}}}}}};BlockLevelConfigReader.prototype.GetSellIconUrl=function(block,boxOffic){var cfg=Game.config.blockLevel.getConfig(block);if(cfg){return cfg.GetSellIconUrl(boxOffic)}console.log("街区"+block+"缺少配置");return""};BlockLevelConfigReader.prototype.GetNextSteetCfg=function(streetId){var list=this.getConfigList();for(var index=0;index<list.length;index++){var cfg=list[index];if(cfg.id==streetId){return list[index+1]}}return null};BlockLevelConfigReader.prototype.GetLastStreetCfg=function(streetId){var list=this.getConfigList();for(var index=0;index<list.length;index++){var cfg=list[index];if(cfg.id==streetId){if(index>0){return list[index-1]}}}return null};BlockLevelConfigReader.prototype.getBlockIconUrl=function(stall){var cfg=Game.config.blockLevel.getConfig(stall);if(cfg){return Game.config.avatar.GetIconUrl(cfg.pic)}return""};Object.defineProperty(BlockLevelConfigReader.prototype,"CityEnvoyMaxStreet",{get:function(){var list=this.getConfigList();var cfg=list.findOne(function(value){return value.city_envoy_max==1});if(cfg){return cfg.id}return 0},enumerable:true,configurable:true});return BlockLevelConfigReader}(configs.BlockLevelConfigReaderStruct));configs.BlockLevelConfigReader=BlockLevelConfigReader})(configs||(configs={}));var configs;(function(configs){var BlockRankingListConfigReaderStruct=(function(_super){__extends(BlockRankingListConfigReaderStruct,_super);function BlockRankingListConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="BlockRankingList";return _this}BlockRankingListConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.BlockRankingListConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.rank=csvGetInt(csv,this.GetHeadIndex("rank"));config.movie_reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("movie_reward")));config.box_office_reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("box_office_reward")));config.extra_reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("extra_reward")));config.congratulate_switch=csvGetBoolean(csv,this.GetHeadIndex("congratulate_switch"));config.congratulate_reward=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("congratulate_reward")));this.addConfig(config)};return BlockRankingListConfigReaderStruct}(configs.CsvConfigRender));configs.BlockRankingListConfigReaderStruct=BlockRankingListConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var BlockRankingListConfigReader=(function(_super){__extends(BlockRankingListConfigReader,_super);function BlockRankingListConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}BlockRankingListConfigReader.prototype.GetReward=function(type,rank){if(rank>=1000){return[]}var id=type*1000+rank;var cfg=this.getConfig(id);if(cfg){return cfg.reward}return[]};BlockRankingListConfigReader.prototype.GetExtraReward=function(type,rank){if(rank>=1000){return null}var id=type*1000+rank;var cfg=this.getConfig(id);if(cfg&&cfg.reward.length>0){return cfg.extra_reward[0]}return null};return BlockRankingListConfigReader}(configs.BlockRankingListConfigReaderStruct));configs.BlockRankingListConfigReader=BlockRankingListConfigReader})(configs||(configs={}));var configs;(function(configs){var BlockWordsConfigReaderStruct=(function(_super){__extends(BlockWordsConfigReaderStruct,_super);function BlockWordsConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="BlockWords";return _this}BlockWordsConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.BlockWordsConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.text=csvGetString(csv,this.GetHeadIndex("text"));this.addConfig(config)};return BlockWordsConfigReaderStruct}(configs.CsvConfigRender));configs.BlockWordsConfigReaderStruct=BlockWordsConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var BlockWordsConfigReader=(function(_super){__extends(BlockWordsConfigReader,_super);function BlockWordsConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._blockList=[];return _this}BlockWordsConfigReader.prototype.hasWord=function(target){var words=this.getConfigList();for(var _i=0,words_1=words;_i<words_1.length;_i++){var word=words_1[_i];if(target.indexOf(word.text)!=-1){return true}}return false};Object.defineProperty(BlockWordsConfigReader.prototype,"wordList",{get:function(){if(this._blockList.length==0){this.parseWords()}return this._blockList},enumerable:true,configurable:true});BlockWordsConfigReader.prototype.parseWords=function(){var wordsRule=this.getConfigList();var n=wordsRule.length;for(var i=0;i<n;i++){this._blockList.push(wordsRule[i].text)}};return BlockWordsConfigReader}(configs.BlockWordsConfigReaderStruct));configs.BlockWordsConfigReader=BlockWordsConfigReader})(configs||(configs={}));var configs;(function(configs){var BlockWordsIIConfigReaderStruct=(function(_super){__extends(BlockWordsIIConfigReaderStruct,_super);function BlockWordsIIConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="BlockWordsII";return _this}BlockWordsIIConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.BlockWordsIIConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.text=csvGetString(csv,this.GetHeadIndex("text"));this.addConfig(config)};return BlockWordsIIConfigReaderStruct}(configs.CsvConfigRender));configs.BlockWordsIIConfigReaderStruct=BlockWordsIIConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var BlockWordsIIConfigReader=(function(_super){__extends(BlockWordsIIConfigReader,_super);function BlockWordsIIConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._blockList=[];return _this}Object.defineProperty(BlockWordsIIConfigReader.prototype,"wordList",{get:function(){if(this._blockList.length==0){this.parseWords()}return this._blockList},enumerable:true,configurable:true});BlockWordsIIConfigReader.prototype.parseWords=function(){var wordsRule=this.getConfigList();var len=wordsRule.length;for(var i=0;i<len;i++){var group=wordsRule[i].text.split("|");if(group.length==1){this._blockList.push(group[0])}else{for(var n=1;n<group.length;n++){this._blockList.push(group[0]+group[n])}}}};return BlockWordsIIConfigReader}(configs.BlockWordsIIConfigReaderStruct));configs.BlockWordsIIConfigReader=BlockWordsIIConfigReader})(configs||(configs={}));var configs;(function(configs){var BoxTargetConfigReaderStruct=(function(_super){__extends(BoxTargetConfigReaderStruct,_super);function BoxTargetConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="BoxTarget";return _this}BoxTargetConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.BoxTargetConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.target=csvGetInt(csv,this.GetHeadIndex("target"));config.zh_cn_dialog=csvGetString(csv,this.GetHeadIndex("zh_cn_dialog"));config.zh_cn_title=csvGetString(csv,this.GetHeadIndex("zh_cn_title"));config.zh_cn_targettext=csvGetString(csv,this.GetHeadIndex("zh_cn_targettext"));config.zh_cn_timetext=csvGetString(csv,this.GetHeadIndex("zh_cn_timetext"));config.time=csvGetInt(csv,this.GetHeadIndex("time"));config.zh_cn_reward=csvGetString(csv,this.GetHeadIndex("zh_cn_reward"));config.zh_cn__final=csvGetString(csv,this.GetHeadIndex("zh_cn_final"));config.zh_cn_button=csvGetString(csv,this.GetHeadIndex("zh_cn_button"));this.addConfig(config)};return BoxTargetConfigReaderStruct}(configs.CsvConfigRender));configs.BoxTargetConfigReaderStruct=BoxTargetConfigReaderStruct})(configs||(configs={}));configs.BoxTargetConfigReader=configs.BoxTargetConfigReaderStruct;var configs;(function(configs){var BuildingEffectConfigReaderStruct=(function(_super){__extends(BuildingEffectConfigReaderStruct,_super);function BuildingEffectConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="BuildingEffect";return _this}BuildingEffectConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.BuildingEffectConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));config.level=csvGetInt(csv,this.GetHeadIndex("level"));config.zh_cn_effect_des=csvGetString(csv,this.GetHeadIndex("zh_cn_effect_des"));config.effect=csvGetInt(csv,this.GetHeadIndex("effect"));config.par1=csvGetFloat(csv,this.GetHeadIndex("par1"));config.par2=csvGetFloat(csv,this.GetHeadIndex("par2"));config.par3=csvGetFloat(csv,this.GetHeadIndex("par3"));config.par4=csvGetFloat(csv,this.GetHeadIndex("par4"));config.par5=csvGetFloat(csv,this.GetHeadIndex("par5"));this.addConfig(config)};return BuildingEffectConfigReaderStruct}(configs.CsvConfigRender));configs.BuildingEffectConfigReaderStruct=BuildingEffectConfigReaderStruct})(configs||(configs={}));configs.BuildingEffectConfigReader=configs.BuildingEffectConfigReaderStruct;var configs;(function(configs){var BuildingLevelConfigReaderStruct=(function(_super){__extends(BuildingLevelConfigReaderStruct,_super);function BuildingLevelConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="BuildingLevel";return _this}BuildingLevelConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.BuildingLevelConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.level=csvGetInt(csv,this.GetHeadIndex("level"));config.cost=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("cost")));config.level_req=csvGetInt(csv,this.GetHeadIndex("level_req"));config.type_level=configs.DTBuildingReq.parseArray(csvGetString(csv,this.GetHeadIndex("type_level")));config.block_req=csvGetInt(csv,this.GetHeadIndex("block_req"));config.function_open=toIntArray(csvGetString(csv,this.GetHeadIndex("function_open")));config.UI=csvGetBoolean(csv,this.GetHeadIndex("UI"));config.effect_id=toIntArray(csvGetString(csv,this.GetHeadIndex("effect_id")));config.zh_cn_effect_tips=csvGetString(csv,this.GetHeadIndex("zh_cn_effect_tips"));config.zh_cn_level_tips=csvGetString(csv,this.GetHeadIndex("zh_cn_level_tips"));config.building_small=csvGetInt(csv,this.GetHeadIndex("building_small"));this.addConfig(config)};return BuildingLevelConfigReaderStruct}(configs.CsvConfigRender));configs.BuildingLevelConfigReaderStruct=BuildingLevelConfigReaderStruct})(configs||(configs={}));configs.BuildingLevelConfigReader=configs.BuildingLevelConfigReaderStruct;var configs;(function(configs){var BusinessConfigReaderStruct=(function(_super){__extends(BusinessConfigReaderStruct,_super);function BusinessConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Business";return _this}BusinessConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.BusinessConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_from=csvGetString(csv,this.GetHeadIndex("zh_cn_from"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.zh_cn_description=csvGetString(csv,this.GetHeadIndex("zh_cn_description"));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));config.expect=csvGetInt(csv,this.GetHeadIndex("expect"));this.addConfig(config)};return BusinessConfigReaderStruct}(configs.CsvConfigRender));configs.BusinessConfigReaderStruct=BusinessConfigReaderStruct})(configs||(configs={}));configs.BusinessConfigReader=configs.BusinessConfigReaderStruct;var configs;(function(configs){var CinemaConfigReaderStruct=(function(_super){__extends(CinemaConfigReaderStruct,_super);function CinemaConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Cinema";return _this}CinemaConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.CinemaConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.level=csvGetInt(csv,this.GetHeadIndex("level"));config.sign_level=csvGetInt(csv,this.GetHeadIndex("sign_level"));config.pic=csvGetInt(csv,this.GetHeadIndex("pic"));config.num=csvGetInt(csv,this.GetHeadIndex("num"));config.proportion=csvGetFloat(csv,this.GetHeadIndex("proportion"));config.favorite_actor=csvGetInt(csv,this.GetHeadIndex("favorite_actor"));config.increase=csvGetInt(csv,this.GetHeadIndex("increase"));config.unlock=csvGetInt(csv,this.GetHeadIndex("unlock"));this.addConfig(config)};return CinemaConfigReaderStruct}(configs.CsvConfigRender));configs.CinemaConfigReaderStruct=CinemaConfigReaderStruct})(configs||(configs={}));configs.CinemaConfigReader=configs.CinemaConfigReaderStruct;var configs;(function(configs){var CityConfigReaderStruct=(function(_super){__extends(CityConfigReaderStruct,_super);function CityConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="City";return _this}CityConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.CityConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.city_num=csvGetInt(csv,this.GetHeadIndex("city_num"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.en_name=csvGetString(csv,this.GetHeadIndex("en_name"));config.street_num=csvGetInt(csv,this.GetHeadIndex("street_num"));config.street_id=toIntArray(csvGetString(csv,this.GetHeadIndex("street_id")));config.show_cost=csvGetInt(csv,this.GetHeadIndex("show_cost"));config.show_need=csvGetInt(csv,this.GetHeadIndex("show_need"));config.hold_reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("hold_reward")));config.envoy1_sex=csvGetInt(csv,this.GetHeadIndex("envoy1_sex"));config.envoy1_Continents=csvGetInt(csv,this.GetHeadIndex("envoy1_Continents"));config.envoy1_type=csvGetInt(csv,this.GetHeadIndex("envoy1_type"));config.envoy1_age=csvGetInt(csv,this.GetHeadIndex("envoy1_age"));config.envoy1_scene=csvGetInt(csv,this.GetHeadIndex("envoy1_scene"));config.envoy1_performance=csvGetInt(csv,this.GetHeadIndex("envoy1_performance"));config.envoy1_plot=csvGetInt(csv,this.GetHeadIndex("envoy1_plot"));config.envoy1_art=csvGetInt(csv,this.GetHeadIndex("envoy1_art"));config.envoy1_entertainment=csvGetInt(csv,this.GetHeadIndex("envoy1_entertainment"));config.envoy2_sex=csvGetInt(csv,this.GetHeadIndex("envoy2_sex"));config.envoy2_Continents=csvGetInt(csv,this.GetHeadIndex("envoy2_Continents"));config.envoy2_type=csvGetInt(csv,this.GetHeadIndex("envoy2_type"));config.envoy2_age=csvGetInt(csv,this.GetHeadIndex("envoy2_age"));config.envoy2_scene=csvGetInt(csv,this.GetHeadIndex("envoy2_scene"));config.envoy2_performance=csvGetInt(csv,this.GetHeadIndex("envoy2_performance"));config.envoy2_plot=csvGetInt(csv,this.GetHeadIndex("envoy2_plot"));config.envoy2_art=csvGetInt(csv,this.GetHeadIndex("envoy2_art"));config.envoy2_entertainment=csvGetInt(csv,this.GetHeadIndex("envoy2_entertainment"));config.envoy3_sex=csvGetInt(csv,this.GetHeadIndex("envoy3_sex"));config.envoy3_Continents=csvGetInt(csv,this.GetHeadIndex("envoy3_Continents"));config.envoy3_type=csvGetInt(csv,this.GetHeadIndex("envoy3_type"));config.envoy3_age=csvGetInt(csv,this.GetHeadIndex("envoy3_age"));config.envoy3_scene=csvGetInt(csv,this.GetHeadIndex("envoy3_scene"));config.envoy3_performance=csvGetInt(csv,this.GetHeadIndex("envoy3_performance"));config.envoy3_plot=csvGetInt(csv,this.GetHeadIndex("envoy3_plot"));config.envoy3_art=csvGetInt(csv,this.GetHeadIndex("envoy3_art"));config.envoy3_entertainment=csvGetInt(csv,this.GetHeadIndex("envoy3_entertainment"));config.envoy4_sex=csvGetInt(csv,this.GetHeadIndex("envoy4_sex"));config.envoy4_Continents=csvGetInt(csv,this.GetHeadIndex("envoy4_Continents"));config.envoy4_type=csvGetInt(csv,this.GetHeadIndex("envoy4_type"));config.envoy4_age=csvGetInt(csv,this.GetHeadIndex("envoy4_age"));config.envoy4_scene=csvGetInt(csv,this.GetHeadIndex("envoy4_scene"));config.envoy4_performance=csvGetInt(csv,this.GetHeadIndex("envoy4_performance"));config.envoy4_plot=csvGetInt(csv,this.GetHeadIndex("envoy4_plot"));config.envoy4_art=csvGetInt(csv,this.GetHeadIndex("envoy4_art"));config.envoy4_entertainment=csvGetInt(csv,this.GetHeadIndex("envoy4_entertainment"));config.envoy5_sex=csvGetInt(csv,this.GetHeadIndex("envoy5_sex"));config.envoy5_Continents=csvGetInt(csv,this.GetHeadIndex("envoy5_Continents"));config.envoy5_type=csvGetInt(csv,this.GetHeadIndex("envoy5_type"));config.envoy5_age=csvGetInt(csv,this.GetHeadIndex("envoy5_age"));config.envoy5_scene=csvGetInt(csv,this.GetHeadIndex("envoy5_scene"));config.envoy5_performance=csvGetInt(csv,this.GetHeadIndex("envoy5_performance"));config.envoy5_plot=csvGetInt(csv,this.GetHeadIndex("envoy5_plot"));config.envoy5_art=csvGetInt(csv,this.GetHeadIndex("envoy5_art"));config.envoy5_entertainment=csvGetInt(csv,this.GetHeadIndex("envoy5_entertainment"));config.drop_out=toIntArray(csvGetString(csv,this.GetHeadIndex("drop_out")));config.random_out=toIntArray(csvGetString(csv,this.GetHeadIndex("random_out")));config.order_qua=toIntArray(csvGetString(csv,this.GetHeadIndex("order_qua")));config.order_num=csvGetInt(csv,this.GetHeadIndex("order_num"));config.expect=csvGetInt(csv,this.GetHeadIndex("expect"));config.pre_id=csvGetInt(csv,this.GetHeadIndex("pre_id"));config.next_city=csvGetInt(csv,this.GetHeadIndex("next_city"));config.cut_scene=csvGetInt(csv,this.GetHeadIndex("cut_scene"));config.new_user_guide=csvGetInt(csv,this.GetHeadIndex("new_user_guide"));config.country=csvGetInt(csv,this.GetHeadIndex("country"));config.popularize_id=csvGetInt(csv,this.GetHeadIndex("popularize_id"));this.addConfig(config)};return CityConfigReaderStruct}(configs.CsvConfigRender));configs.CityConfigReaderStruct=CityConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var CityConfigReader=(function(_super){__extends(CityConfigReader,_super);function CityConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(CityConfigReader.prototype,"Dict",{get:function(){if(this.dict==null){this.dict=new Dictionary();var citylist=this.getConfigList();for(var index=0;index<citylist.length;index++){var cfg=citylist[index];var list=this.dict.getValue(cfg.country);if(list==null){list=[]}list.push(cfg);this.dict.set(cfg.country,list)}}return this.dict},enumerable:true,configurable:true});CityConfigReader.prototype.getCitysByCountry=function(countryId){return this.Dict.getValue(countryId)};CityConfigReader.prototype.GetCityRequire=function(id){var retLst=[];var cfg=this.getConfig(id);if(cfg){return cfg.Require}return[[],[],[],[],[]]};CityConfigReader.prototype.GetCityByNum=function(num){if(this.dicCityNum==null){this.dicCityNum=new Dictionary();var list=this.getConfigList();for(var index=0;index<list.length;index++){var cfg=list[index];this.dicCityNum.add(cfg.city_num,cfg)}}return this.dicCityNum.getValue(num)};CityConfigReader.prototype.GetCityName=function(id){var cfg=this.getConfig(id);if(cfg){return cfg.name}return""};CityConfigReader.prototype.sort=function(a,b){var ca=this.getConfig(a);var cb=this.getConfig(b);if(ca&&cb){return ca.city_num-cb.city_num}if(ca==null){return -1}if(cb==null){return 1}};CityConfigReader.prototype.GetCityIndexInCountry=function(id){var cfg=this.getConfig(id);if(cfg){var list=this.getCitysByCountry(cfg.country);return list.indexOf(cfg)}return -1};return CityConfigReader}(configs.CityConfigReaderStruct));configs.CityConfigReader=CityConfigReader})(configs||(configs={}));var configs;(function(configs){var CityPopularizeConfigReaderStruct=(function(_super){__extends(CityPopularizeConfigReaderStruct,_super);function CityPopularizeConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="CityPopularize";return _this}CityPopularizeConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.CityPopularizeConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.level_out_3=csvGetInt(csv,this.GetHeadIndex("level_out_3"));config.level_num_3=csvGetInt(csv,this.GetHeadIndex("level_num_3"));config.level_chance_3=csvGetInt(csv,this.GetHeadIndex("level_chance_3"));config.level_out_7=csvGetInt(csv,this.GetHeadIndex("level_out_7"));config.level_num_7=csvGetInt(csv,this.GetHeadIndex("level_num_7"));config.level_chance_7=csvGetInt(csv,this.GetHeadIndex("level_chance_7"));config.level_out_10=csvGetInt(csv,this.GetHeadIndex("level_out_10"));config.level_num_10=csvGetInt(csv,this.GetHeadIndex("level_num_10"));config.level_chance_10=csvGetInt(csv,this.GetHeadIndex("level_chance_10"));config.level_out_15=csvGetInt(csv,this.GetHeadIndex("level_out_15"));config.level_num_15=csvGetInt(csv,this.GetHeadIndex("level_num_15"));config.level_chance_15=csvGetInt(csv,this.GetHeadIndex("level_chance_15"));config.level_out_20=csvGetInt(csv,this.GetHeadIndex("level_out_20"));config.level_num_20=csvGetInt(csv,this.GetHeadIndex("level_num_20"));config.level_chance_20=csvGetInt(csv,this.GetHeadIndex("level_chance_20"));this.addConfig(config)};return CityPopularizeConfigReaderStruct}(configs.CsvConfigRender));configs.CityPopularizeConfigReaderStruct=CityPopularizeConfigReaderStruct})(configs||(configs={}));configs.CityPopularizeConfigReader=configs.CityPopularizeConfigReaderStruct;var configs;(function(configs){var CompleteConfigReaderStruct=(function(_super){__extends(CompleteConfigReaderStruct,_super);function CompleteConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Complete";return _this}CompleteConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.CompleteConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.module=csvGetString(csv,this.GetHeadIndex("module"));config.completion=csvGetInt(csv,this.GetHeadIndex("completion"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));this.addConfig(config)};return CompleteConfigReaderStruct}(configs.CsvConfigRender));configs.CompleteConfigReaderStruct=CompleteConfigReaderStruct})(configs||(configs={}));var configs;(function(configs_1){var CompleteConfigReader=(function(_super){__extends(CompleteConfigReader,_super);function CompleteConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.completeDict=new Dictionary();return _this}CompleteConfigReader.prototype.getCompleteList=function(progressId){if(!this.completeDict.hasKey(progressId)){this.completeDict.add(progressId,[])}return this.completeDict.getValue(progressId)};CompleteConfigReader.prototype.onGameLoadedAll=function(){var configs=this.getConfigList();configs=configs.sort(function(a,b){return a.id-b.id});for(var i=0;i<configs.length;i++){var config=configs[i];var progressId=Math.floor(config.id/1000);var list=this.getCompleteList(progressId);list.push(config)}};return CompleteConfigReader}(configs_1.CompleteConfigReaderStruct));configs_1.CompleteConfigReader=CompleteConfigReader})(configs||(configs={}));var configs;(function(configs){var CompoundConfigReaderStruct=(function(_super){__extends(CompoundConfigReaderStruct,_super);function CompoundConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Compound";return _this}CompoundConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.CompoundConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name_tips=csvGetString(csv,this.GetHeadIndex("name_tips"));config.syn_item=csvGetInt(csv,this.GetHeadIndex("syn_item"));config.num_req=csvGetInt(csv,this.GetHeadIndex("num_req"));config.split_list=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("split_list")));this.addConfig(config)};return CompoundConfigReaderStruct}(configs.CsvConfigRender));configs.CompoundConfigReaderStruct=CompoundConfigReaderStruct})(configs||(configs={}));configs.CompoundConfigReader=configs.CompoundConfigReaderStruct;var configs;(function(configs){var CooperateTaskConfigReaderStruct=(function(_super){__extends(CooperateTaskConfigReaderStruct,_super);function CooperateTaskConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="CooperateTask";return _this}CooperateTaskConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.CooperateTaskConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.task_name=csvGetString(csv,this.GetHeadIndex("task_name"));config.task_star=csvGetInt(csv,this.GetHeadIndex("task_star"));config.task_type=csvGetInt(csv,this.GetHeadIndex("task_type"));config.parameter1=toIntArray(csvGetString(csv,this.GetHeadIndex("parameter1")));config.parameter2=toIntArray(csvGetString(csv,this.GetHeadIndex("parameter2")));config.parameter3=toIntArray(csvGetString(csv,this.GetHeadIndex("parameter3")));config.parameter4=toIntArray(csvGetString(csv,this.GetHeadIndex("parameter4")));config.parameter5=toIntArray(csvGetString(csv,this.GetHeadIndex("parameter5")));config.reward_id=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward_id")));this.addConfig(config)};return CooperateTaskConfigReaderStruct}(configs.CsvConfigRender));configs.CooperateTaskConfigReaderStruct=CooperateTaskConfigReaderStruct})(configs||(configs={}));configs.CooperateTaskConfigReader=configs.CooperateTaskConfigReaderStruct;var configs;(function(configs){var CountActivitiesConfigReaderStruct=(function(_super){__extends(CountActivitiesConfigReaderStruct,_super);function CountActivitiesConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="CountActivities";return _this}CountActivitiesConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.CountActivitiesConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.count=csvGetInt(csv,this.GetHeadIndex("count"));config.special_reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("special_reward")));config.image=csvGetString(csv,this.GetHeadIndex("image"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));config.info=csvGetString(csv,this.GetHeadIndex("info"));this.addConfig(config)};return CountActivitiesConfigReaderStruct}(configs.CsvConfigRender));configs.CountActivitiesConfigReaderStruct=CountActivitiesConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var CountActivitiesConfigReader=(function(_super){__extends(CountActivitiesConfigReader,_super);function CountActivitiesConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}CountActivitiesConfigReader.prototype.sevenConfigList=function(){var list=this.getConfigList();var result=new Array();for(var i=0;i<list.length;i++){if(list[i].type===1){result.push(list[i])}}return result};return CountActivitiesConfigReader}(configs.CountActivitiesConfigReaderStruct));configs.CountActivitiesConfigReader=CountActivitiesConfigReader})(configs||(configs={}));var configs;(function(configs){var CountryConfigReaderStruct=(function(_super){__extends(CountryConfigReaderStruct,_super);function CountryConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Country";return _this}CountryConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.CountryConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.number=csvGetInt(csv,this.GetHeadIndex("number"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.en_name=csvGetString(csv,this.GetHeadIndex("en_name"));config.city_num=csvGetInt(csv,this.GetHeadIndex("city_num"));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.flag=csvGetInt(csv,this.GetHeadIndex("flag"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));config.pre_id=csvGetInt(csv,this.GetHeadIndex("pre_id"));config.next_country=csvGetInt(csv,this.GetHeadIndex("next_country"));this.addConfig(config)};return CountryConfigReaderStruct}(configs.CsvConfigRender));configs.CountryConfigReaderStruct=CountryConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var CountryConfigReader=(function(_super){__extends(CountryConfigReader,_super);function CountryConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}CountryConfigReader.prototype.sort=function(a,b){var ca=this.getConfig(a);var cb=this.getConfig(b);if(ca&&cb){return ca.number-cb.number}if(ca==null){return -1}if(cb==null){return 1}};return CountryConfigReader}(configs.CountryConfigReaderStruct));configs.CountryConfigReader=CountryConfigReader})(configs||(configs={}));var configs;(function(configs){var CupPackageConfigReaderStruct=(function(_super){__extends(CupPackageConfigReaderStruct,_super);function CupPackageConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="CupPackage";return _this}CupPackageConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.CupPackageConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.zh_cn_des=csvGetString(csv,this.GetHeadIndex("zh_cn_des"));config.target_type=toIntArray(csvGetString(csv,this.GetHeadIndex("target_type")));config.target_num=csvGetInt(csv,this.GetHeadIndex("target_num"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));config.limit_time=csvGetInt(csv,this.GetHeadIndex("limit_time"));config.image=csvGetString(csv,this.GetHeadIndex("image"));this.addConfig(config)};return CupPackageConfigReaderStruct}(configs.CsvConfigRender));configs.CupPackageConfigReaderStruct=CupPackageConfigReaderStruct})(configs||(configs={}));configs.CupPackageConfigReader=configs.CupPackageConfigReaderStruct;var configs;(function(configs){var DailySignConfigReaderStruct=(function(_super){__extends(DailySignConfigReaderStruct,_super);function DailySignConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="DailySign";return _this}DailySignConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.DailySignConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.cycle=csvGetInt(csv,this.GetHeadIndex("cycle"));config.day=csvGetInt(csv,this.GetHeadIndex("day"));config.reward=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("reward")));config.info=csvGetString(csv,this.GetHeadIndex("info"));this.addConfig(config)};return DailySignConfigReaderStruct}(configs.CsvConfigRender));configs.DailySignConfigReaderStruct=DailySignConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var DailySignConfigReader=(function(_super){__extends(DailySignConfigReader,_super);function DailySignConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}DailySignConfigReader.prototype.getSingList=function(cycle){var list=this.getConfigList();var result=new Array();for(var i=0;i<list.length;i++){if(list[i].cycle===cycle){result.push(list[i])}}return result};return DailySignConfigReader}(configs.DailySignConfigReaderStruct));configs.DailySignConfigReader=DailySignConfigReader})(configs||(configs={}));var configs;(function(configs){var DailySignTrailerConfigReaderStruct=(function(_super){__extends(DailySignTrailerConfigReaderStruct,_super);function DailySignTrailerConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="DailySignTrailer";return _this}DailySignTrailerConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.DailySignTrailerConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.day=csvGetInt(csv,this.GetHeadIndex("day"));config.reward=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("reward")));config.zh_cn_info=csvGetString(csv,this.GetHeadIndex("zh_cn_info"));this.addConfig(config)};return DailySignTrailerConfigReaderStruct}(configs.CsvConfigRender));configs.DailySignTrailerConfigReaderStruct=DailySignTrailerConfigReaderStruct})(configs||(configs={}));configs.DailySignTrailerConfigReader=configs.DailySignTrailerConfigReaderStruct;var configs;(function(configs){var DialogueConfigReaderStruct=(function(_super){__extends(DialogueConfigReaderStruct,_super);function DialogueConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Dialogue";return _this}DialogueConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.DialogueConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.face=csvGetInt(csv,this.GetHeadIndex("face"));config.zh_cn_content=csvGetString(csv,this.GetHeadIndex("zh_cn_content"));this.addConfig(config)};return DialogueConfigReaderStruct}(configs.CsvConfigRender));configs.DialogueConfigReaderStruct=DialogueConfigReaderStruct})(configs||(configs={}));configs.DialogueConfigReader=configs.DialogueConfigReaderStruct;var configs;(function(configs){var EventConfigReaderStruct=(function(_super){__extends(EventConfigReaderStruct,_super);function EventConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Event";return _this}EventConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.EventConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.model=csvGetInt(csv,this.GetHeadIndex("model"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.action=configs.DTPerformActoin.parseArray(csvGetString(csv,this.GetHeadIndex("action")));config.speak=configs.DTPerformSpeak.parseArray(csvGetString(csv,this.GetHeadIndex("speak")));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return EventConfigReaderStruct}(configs.CsvConfigRender));configs.EventConfigReaderStruct=EventConfigReaderStruct})(configs||(configs={}));configs.EventConfigReader=configs.EventConfigReaderStruct;var configs;(function(configs){var FloorConfigReaderStruct=(function(_super){__extends(FloorConfigReaderStruct,_super);function FloorConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Floor";return _this}FloorConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.FloorConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.cost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("cost")));config.level_req=csvGetInt(csv,this.GetHeadIndex("level_req"));config.city_req=csvGetInt(csv,this.GetHeadIndex("city_req"));this.addConfig(config)};return FloorConfigReaderStruct}(configs.CsvConfigRender));configs.FloorConfigReaderStruct=FloorConfigReaderStruct})(configs||(configs={}));configs.FloorConfigReader=configs.FloorConfigReaderStruct;var configs;(function(configs){var GameLevelConfigReaderStruct=(function(_super){__extends(GameLevelConfigReaderStruct,_super);function GameLevelConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="GameLevel";return _this}GameLevelConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.GameLevelConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.stall=csvGetInt(csv,this.GetHeadIndex("stall"));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.pre_id=csvGetInt(csv,this.GetHeadIndex("pre_id"));config.next_level=csvGetInt(csv,this.GetHeadIndex("next_level"));this.addConfig(config)};return GameLevelConfigReaderStruct}(configs.CsvConfigRender));configs.GameLevelConfigReaderStruct=GameLevelConfigReaderStruct})(configs||(configs={}));configs.GameLevelConfigReader=configs.GameLevelConfigReaderStruct;var configs;(function(configs){var GameRandomNameConfigReaderStruct=(function(_super){__extends(GameRandomNameConfigReaderStruct,_super);function GameRandomNameConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="GameRandomName";return _this}GameRandomNameConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.GameRandomNameConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.zh_cn_names=toStringArray(csvGetString(csv,this.GetHeadIndex("zh_cn_names")));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return GameRandomNameConfigReaderStruct}(configs.CsvConfigRender));configs.GameRandomNameConfigReaderStruct=GameRandomNameConfigReaderStruct})(configs||(configs={}));configs.GameRandomNameConfigReader=configs.GameRandomNameConfigReaderStruct;var configs;(function(configs){var GameVersionConfigReaderStruct=(function(_super){__extends(GameVersionConfigReaderStruct,_super);function GameVersionConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="GameVersion";return _this}GameVersionConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.GameVersionConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.Platform=csvGetString(csv,this.GetHeadIndex("Platform"));config.ApplicationId=csvGetString(csv,this.GetHeadIndex("ApplicationId"));config.ResWeb=csvGetString(csv,this.GetHeadIndex("ResWeb"));config.AppVersion=csvGetString(csv,this.GetHeadIndex("AppVersion"));config.PartialVersion=csvGetString(csv,this.GetHeadIndex("PartialVersion"));config.PartialFolder=csvGetString(csv,this.GetHeadIndex("PartialFolder"));config.PatchVersion=csvGetString(csv,this.GetHeadIndex("PatchVersion"));config.PatchFolder=csvGetString(csv,this.GetHeadIndex("PatchFolder"));config.IsPartialAlert=csvGetBoolean(csv,this.GetHeadIndex("IsPartialAlert"));config.IsPatchAlert=csvGetBoolean(csv,this.GetHeadIndex("IsPatchAlert"));config.VisiableGM=csvGetBoolean(csv,this.GetHeadIndex("VisiableGM"));config.IsErrorAlert=csvGetBoolean(csv,this.GetHeadIndex("IsErrorAlert"));config.AppDownloadWeb=csvGetString(csv,this.GetHeadIndex("AppDownloadWeb"));this.addConfig(config)};return GameVersionConfigReaderStruct}(configs.CsvConfigRender));configs.GameVersionConfigReaderStruct=GameVersionConfigReaderStruct})(configs||(configs={}));configs.GameVersionConfigReader=configs.GameVersionConfigReaderStruct;var configs;(function(configs){var GiftPackageConfigReaderStruct=(function(_super){__extends(GiftPackageConfigReaderStruct,_super);function GiftPackageConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="GiftPackage";return _this}GiftPackageConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.GiftPackageConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.plat=csvGetInt(csv,this.GetHeadIndex("plat"));config.country=csvGetInt(csv,this.GetHeadIndex("country"));config.gift=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("gift")));config.cn=csvGetString(csv,this.GetHeadIndex("cn"));this.addConfig(config)};return GiftPackageConfigReaderStruct}(configs.CsvConfigRender));configs.GiftPackageConfigReaderStruct=GiftPackageConfigReaderStruct})(configs||(configs={}));configs.GiftPackageConfigReader=configs.GiftPackageConfigReaderStruct;var configs;(function(configs){var GlobalConfigReaderStruct=(function(_super){__extends(GlobalConfigReaderStruct,_super);function GlobalConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Global";return _this}GlobalConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.GlobalConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.key=csvGetString(csv,this.GetHeadIndex("key"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.value=csvGetInt(csv,this.GetHeadIndex("value"));config.value4=csvGetString(csv,this.GetHeadIndex("value4"));config.value1=toIntArray(csvGetString(csv,this.GetHeadIndex("value1")));config.value2=configs.DTlValue2.parseArray(csvGetString(csv,this.GetHeadIndex("value2")));config.value3=configs.DTlValue3.parseArray(csvGetString(csv,this.GetHeadIndex("value3")));config.value5=configs.DTPerformActoin.parseArray(csvGetString(csv,this.GetHeadIndex("value5")));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return GlobalConfigReaderStruct}(configs.CsvConfigRender));configs.GlobalConfigReaderStruct=GlobalConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var GlobalConfigReader=(function(_super){__extends(GlobalConfigReader,_super);function GlobalConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.configsByKey=new Dictionary();return _this}GlobalConfigReader.prototype.onGameLoadedAll=function(){_super.prototype.onGameLoadedAll.call(this);var list=this.configs.getValues();for(var i=0;i<list.length;i++){var key=list[i].key;if(isNullOrEmpty(key)){key=list[i].id}this.configsByKey.add(key,list[i])}};GlobalConfigReader.prototype.getConfig=function(key){if(!this.configsByKey.hasKey(key)){if(this.configs.hasKey(key)){return this.configs.getValue(key)}console.log(this.tableName+" \u6CA1\u6709 key="+key+" \u7684\u914D\u7F6E")}return this.configsByKey.getValue(key)};GlobalConfigReader.prototype.outKeyCode=function(){console.log("");console.log("class GlobalKey");console.log("{");var list=this.configsByKey.getValues();for(var i=0;i<list.length;i++){var key=list[i].key;var val=key;if(isNullOrEmpty(key)){key="KEY_"+list[i].id;val=list[i].id}else{key=key.replace("-","_")}console.log("\tstatic "+key+' = "'+val+'";')}console.log("}");console.log("");console.log("")};Object.defineProperty(GlobalConfigReader.prototype,"OscarHour",{get:function(){if(this.oscarHour==null){this.oscarHour=Game.config.global.getConfig(GlobalKey.KEY_25_AoSiKaBanJiangShiJian).value}return this.oscarHour},enumerable:true,configurable:true});GlobalConfigReader.prototype.SetOscarHour=function(value){this.oscarHour=value};Object.defineProperty(GlobalConfigReader.prototype,"OscarMin",{get:function(){if(this.oscarMin==null){this.oscarMin=0}return this.oscarMin},enumerable:true,configurable:true});GlobalConfigReader.prototype.SetOscarMin=function(value){this.oscarMin=value};return GlobalConfigReader}(configs.GlobalConfigReaderStruct));configs.GlobalConfigReader=GlobalConfigReader})(configs||(configs={}));var configs;(function(configs){var GuidePathConfigReaderStruct=(function(_super){__extends(GuidePathConfigReaderStruct,_super);function GuidePathConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="GuidePath";return _this}GuidePathConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.GuidePathConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.find_ui_type=csvGetInt(csv,this.GetHeadIndex("find_ui_type"));config.menuid=csvGetInt(csv,this.GetHeadIndex("menuid"));config.path=csvGetString(csv,this.GetHeadIndex("path"));config.list_path=csvGetString(csv,this.GetHeadIndex("list_path"));config.sub_id=csvGetInt(csv,this.GetHeadIndex("sub_id"));config.list_index=csvGetInt(csv,this.GetHeadIndex("list_index"));config.add_btn=csvGetInt(csv,this.GetHeadIndex("add_btn"));config.tip=csvGetString(csv,this.GetHeadIndex("tip"));this.addConfig(config)};return GuidePathConfigReaderStruct}(configs.CsvConfigRender));configs.GuidePathConfigReaderStruct=GuidePathConfigReaderStruct})(configs||(configs={}));configs.GuidePathConfigReader=configs.GuidePathConfigReaderStruct;var configs;(function(configs){var GuidesystemConfigReaderStruct=(function(_super){__extends(GuidesystemConfigReaderStruct,_super);function GuidesystemConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Guidesystem";return _this}GuidesystemConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.GuidesystemConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.group=csvGetInt(csv,this.GetHeadIndex("group"));config.order=csvGetInt(csv,this.GetHeadIndex("order"));config.finish_type=csvGetInt(csv,this.GetHeadIndex("finish_type"));config.finish_value_1=csvGetInt(csv,this.GetHeadIndex("finish_value_1"));config.finish_value_2=csvGetInt(csv,this.GetHeadIndex("finish_value_2"));config.trigger_type=csvGetInt(csv,this.GetHeadIndex("trigger_type"));config.trigger_value=csvGetInt(csv,this.GetHeadIndex("trigger_value"));config.break_guide=csvGetInt(csv,this.GetHeadIndex("break_guide"));config.next_guide=csvGetInt(csv,this.GetHeadIndex("next_guide"));config.path_id=csvGetInt(csv,this.GetHeadIndex("path_id"));config.path_par1=csvGetInt(csv,this.GetHeadIndex("path_par1"));config.assistant=csvGetBoolean(csv,this.GetHeadIndex("assistant"));config.position=configs.DTVector2.parse(csvGetString(csv,this.GetHeadIndex("position")));config.cn_content=csvGetString(csv,this.GetHeadIndex("cn_content"));config.en_content=csvGetString(csv,this.GetHeadIndex("en_content"));config.f_direction=csvGetInt(csv,this.GetHeadIndex("f_direction"));config.halo=csvGetBoolean(csv,this.GetHeadIndex("halo"));config.radius=csvGetInt(csv,this.GetHeadIndex("radius"));config.storyline=csvGetBoolean(csv,this.GetHeadIndex("storyline"));config.storyline_id=csvGetInt(csv,this.GetHeadIndex("storyline_id"));config.force=csvGetBoolean(csv,this.GetHeadIndex("force"));config.stay=csvGetBoolean(csv,this.GetHeadIndex("stay"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));config.tips2=csvGetString(csv,this.GetHeadIndex("tips2"));this.addConfig(config)};return GuidesystemConfigReaderStruct}(configs.CsvConfigRender));configs.GuidesystemConfigReaderStruct=GuidesystemConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var GuidesystemConfigReader=(function(_super){__extends(GuidesystemConfigReader,_super);function GuidesystemConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.groups=[];return _this}GuidesystemConfigReader.prototype.addConfig=function(config){_super.prototype.addConfig.call(this,config);if(this.configDict==null){this.configDict=new Dictionary()}if(this.configOrderDict==null){this.configOrderDict=new Dictionary()}var list=this.configDict.getValue(config.group);if(list==null){list=new Array();this.configDict.add(config.group,list);this.groups.push(config.group)}list.push(config);var dict=this.configOrderDict.getValue(config.group);if(dict==null){dict=new Dictionary();this.configOrderDict.add(config.group,dict)}dict.add(config.order,config)};GuidesystemConfigReader.prototype.onGameLoadedAll=function(){for(var index=0;index<this.groups.length;index++){var element=this.groups[index];var list=this.configDict.getValue(element);list.sort(function(a,b){return a.order-b.order})}};GuidesystemConfigReader.prototype.getNextGuide=function(id){var config=this.getConfig(id);var nextConfig;if(config){var dict=this.configOrderDict.getValue(config.group);if(dict){nextConfig=dict.getValue(config.order+1)}}return nextConfig};GuidesystemConfigReader.prototype.getPreGuide=function(id){var config=this.getConfig(id);var preConfig;if(config){var dict=this.configOrderDict.getValue(config.group);if(dict){preConfig=dict.getValue(config.order-1)}}return preConfig};GuidesystemConfigReader.prototype.getConfigsByGroup=function(group){return this.configDict.getValue(group)};return GuidesystemConfigReader}(configs.GuidesystemConfigReaderStruct));configs.GuidesystemConfigReader=GuidesystemConfigReader})(configs||(configs={}));var configs;(function(configs){var HeadPortraitConfigReaderStruct=(function(_super){__extends(HeadPortraitConfigReaderStruct,_super);function HeadPortraitConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="HeadPortrait";return _this}HeadPortraitConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.HeadPortraitConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.sex=csvGetInt(csv,this.GetHeadIndex("sex"));config.unlock=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("unlock")));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));this.addConfig(config)};return HeadPortraitConfigReaderStruct}(configs.CsvConfigRender));configs.HeadPortraitConfigReaderStruct=HeadPortraitConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var HeadPortraitConfigReader=(function(_super){__extends(HeadPortraitConfigReader,_super);function HeadPortraitConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}HeadPortraitConfigReader.prototype.GetPlayerIconUrl=function(icon,sex){if(icon&&icon!=0){var cfg=this.getConfig(icon);if(cfg){return cfg.iconUrl}}if(sex==EUserSex.boy){return this.getConfig(1101).iconUrl}return this.getConfig(1001).iconUrl};return HeadPortraitConfigReader}(configs.HeadPortraitConfigReaderStruct));configs.HeadPortraitConfigReader=HeadPortraitConfigReader})(configs||(configs={}));var configs;(function(configs){var ImageConfigReaderStruct=(function(_super){__extends(ImageConfigReaderStruct,_super);function ImageConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Image";return _this}ImageConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ImageConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.key=csvGetString(csv,this.GetHeadIndex("key"));config.tip=csvGetString(csv,this.GetHeadIndex("tip"));this.addConfig(config)};return ImageConfigReaderStruct}(configs.CsvConfigRender));configs.ImageConfigReaderStruct=ImageConfigReaderStruct})(configs||(configs={}));configs.ImageConfigReader=configs.ImageConfigReaderStruct;var configs;(function(configs){var InitialActorConfigReaderStruct=(function(_super){__extends(InitialActorConfigReaderStruct,_super);function InitialActorConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="InitialActor";return _this}InitialActorConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.InitialActorConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.actor_id=csvGetInt(csv,this.GetHeadIndex("actor_id"));this.addConfig(config)};return InitialActorConfigReaderStruct}(configs.CsvConfigRender));configs.InitialActorConfigReaderStruct=InitialActorConfigReaderStruct})(configs||(configs={}));configs.InitialActorConfigReader=configs.InitialActorConfigReaderStruct;var configs;(function(configs){var ItemConfigReaderStruct=(function(_super){__extends(ItemConfigReaderStruct,_super);function ItemConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Item";return _this}ItemConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ItemConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.zh_cn_item_des=csvGetString(csv,this.GetHeadIndex("zh_cn_item_des"));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.star=csvGetInt(csv,this.GetHeadIndex("star"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.max_num=csvGetInt(csv,this.GetHeadIndex("max_num"));config.get_way=toIntArray(csvGetString(csv,this.GetHeadIndex("get_way")));config.can_use=csvGetBoolean(csv,this.GetHeadIndex("can_use"));config.use_type=csvGetInt(csv,this.GetHeadIndex("use_type"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));config.can_sell=csvGetBoolean(csv,this.GetHeadIndex("can_sell"));config.price=csvGetInt(csv,this.GetHeadIndex("price"));config.syn_id=csvGetInt(csv,this.GetHeadIndex("syn_id"));config.actor_id=csvGetInt(csv,this.GetHeadIndex("actor_id"));config.actor_num=csvGetInt(csv,this.GetHeadIndex("actor_num"));config.zh_cn_get_way_explain=csvGetString(csv,this.GetHeadIndex("zh_cn_get_way_explain"));config.User_item_info=csvGetInt(csv,this.GetHeadIndex("User_item_info"));this.addConfig(config)};return ItemConfigReaderStruct}(configs.CsvConfigRender));configs.ItemConfigReaderStruct=ItemConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var ItemConfigReader=(function(_super){__extends(ItemConfigReader,_super);function ItemConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._dict=new Dictionary();return _this}ItemConfigReader.prototype.addConfig=function(config){_super.prototype.addConfig.call(this,config);if(config.actor_id>0){this._dict.add(config.actor_id,config)}};ItemConfigReader.prototype.getConfigsByType=function(){var itemTypes=[];for(var _i=0;_i<arguments.length;_i++){itemTypes[_i]=arguments[_i]}var list=[];var items=this.getConfigList();for(var i=0;i<items.length;i++){for(var j=0;j<itemTypes.length;j++){if(items[i].type==itemTypes[j]){list.push(items[i]);break}}}return list};ItemConfigReader.prototype.getType=function(id){var cfg=this.getConfig(id);if(cfg){return cfg.type}return null};ItemConfigReader.prototype.getItemIcon=function(itemId){var cfg=this.getConfig(itemId);return cfg.iconUrl};ItemConfigReader.prototype.getStarNum=function(itemId){var cfg=this.getConfig(itemId);return cfg.itemStarNum};ItemConfigReader.prototype.getItemByActorId=function(actorId){return this._dict.getValue(actorId)};return ItemConfigReader}(configs.ItemConfigReaderStruct));configs.ItemConfigReader=ItemConfigReader})(configs||(configs={}));var configs;(function(configs){var LanguageTypeConfigReaderStruct=(function(_super){__extends(LanguageTypeConfigReaderStruct,_super);function LanguageTypeConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="LanguageType";return _this}LanguageTypeConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.LanguageTypeConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetString(csv,this.GetHeadIndex("type"));config.info=csvGetString(csv,this.GetHeadIndex("info"));config.value=csvGetString(csv,this.GetHeadIndex("value"));config.languageswitch=csvGetInt(csv,this.GetHeadIndex("languageswitch"));this.addConfig(config)};return LanguageTypeConfigReaderStruct}(configs.CsvConfigRender));configs.LanguageTypeConfigReaderStruct=LanguageTypeConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var LanguageTypeConfigReader=(function(_super){__extends(LanguageTypeConfigReader,_super);function LanguageTypeConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dictByValue=new Dictionary();return _this}LanguageTypeConfigReader.prototype.onGameLoadedAll=function(){var list=this.getConfigList();for(var _i=0,list_1=list;_i<list_1.length;_i++){var config=list_1[_i];this.dictByValue.add(config.value,config)}};LanguageTypeConfigReader.prototype.getConfigByValue=function(value){return this.dictByValue.getValue(value)};return LanguageTypeConfigReader}(configs.LanguageTypeConfigReaderStruct));configs.LanguageTypeConfigReader=LanguageTypeConfigReader})(configs||(configs={}));var configs;(function(configs){var LevelGiftPackageConfigReaderStruct=(function(_super){__extends(LevelGiftPackageConfigReaderStruct,_super);function LevelGiftPackageConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="LevelGiftPackage";return _this}LevelGiftPackageConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.LevelGiftPackageConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.player_level=csvGetInt(csv,this.GetHeadIndex("player_level"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));config.next_id=csvGetInt(csv,this.GetHeadIndex("next_id"));config.image=csvGetString(csv,this.GetHeadIndex("image"));this.addConfig(config)};return LevelGiftPackageConfigReaderStruct}(configs.CsvConfigRender));configs.LevelGiftPackageConfigReaderStruct=LevelGiftPackageConfigReaderStruct})(configs||(configs={}));configs.LevelGiftPackageConfigReader=configs.LevelGiftPackageConfigReaderStruct;var configs;(function(configs){var LoaderConfigReaderStruct=(function(_super){__extends(LoaderConfigReaderStruct,_super);function LoaderConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Loader";return _this}LoaderConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.LoaderConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.isShowCircle=csvGetBoolean(csv,this.GetHeadIndex("isShowCircle"));this.addConfig(config)};return LoaderConfigReaderStruct}(configs.CsvConfigRender));configs.LoaderConfigReaderStruct=LoaderConfigReaderStruct})(configs||(configs={}));configs.LoaderConfigReader=configs.LoaderConfigReaderStruct;var configs;(function(configs){var LoadingConfigReaderStruct=(function(_super){__extends(LoadingConfigReaderStruct,_super);function LoadingConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Loading";return _this}LoadingConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.LoadingConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.text=csvGetString(csv,this.GetHeadIndex("text"));this.addConfig(config)};return LoadingConfigReaderStruct}(configs.CsvConfigRender));configs.LoadingConfigReaderStruct=LoadingConfigReaderStruct})(configs||(configs={}));configs.LoadingConfigReader=configs.LoadingConfigReaderStruct;var configs;(function(configs){var MailConfigReaderStruct=(function(_super){__extends(MailConfigReaderStruct,_super);function MailConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Mail";return _this}MailConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MailConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.tip=csvGetString(csv,this.GetHeadIndex("tip"));config.life_time=csvGetInt(csv,this.GetHeadIndex("life_time"));config.zh_cn_title=csvGetString(csv,this.GetHeadIndex("zh_cn_title"));config.en_title=csvGetString(csv,this.GetHeadIndex("en_title"));config.zh_tw_title=csvGetString(csv,this.GetHeadIndex("zh_tw_title"));config.item=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("item")));config.zh_cn_content=csvGetString(csv,this.GetHeadIndex("zh_cn_content"));config.en_content=csvGetString(csv,this.GetHeadIndex("en_content"));config.zh_tw_content=csvGetString(csv,this.GetHeadIndex("zh_tw_content"));this.addConfig(config)};return MailConfigReaderStruct}(configs.CsvConfigRender));configs.MailConfigReaderStruct=MailConfigReaderStruct})(configs||(configs={}));configs.MailConfigReader=configs.MailConfigReaderStruct;var configs;(function(configs){var MaintaskConfigReaderStruct=(function(_super){__extends(MaintaskConfigReaderStruct,_super);function MaintaskConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Maintask";return _this}MaintaskConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MaintaskConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.cn_name=csvGetString(csv,this.GetHeadIndex("cn_name"));config.en_name=csvGetString(csv,this.GetHeadIndex("en_name"));config.trigger=csvGetInt(csv,this.GetHeadIndex("trigger"));config.t_value=csvGetInt(csv,this.GetHeadIndex("t_value"));config.require=csvGetInt(csv,this.GetHeadIndex("require"));config.r_value=csvGetInt(csv,this.GetHeadIndex("r_value"));config.s_r_value=csvGetInt(csv,this.GetHeadIndex("s_r_value"));config.goal=csvGetInt(csv,this.GetHeadIndex("goal"));config.cn_info=csvGetString(csv,this.GetHeadIndex("cn_info"));config.en_info=csvGetString(csv,this.GetHeadIndex("en_info"));config.cn_cinfo=csvGetString(csv,this.GetHeadIndex("cn_cinfo"));config.en_cinfo=csvGetString(csv,this.GetHeadIndex("en_cinfo"));config.cn_content=csvGetString(csv,this.GetHeadIndex("cn_content"));config.en_content=csvGetString(csv,this.GetHeadIndex("en_content"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));config.pre_quest=csvGetInt(csv,this.GetHeadIndex("pre_quest"));config.guide=csvGetBoolean(csv,this.GetHeadIndex("guide"));config.guide_id=csvGetInt(csv,this.GetHeadIndex("guide_id"));this.addConfig(config)};return MaintaskConfigReaderStruct}(configs.CsvConfigRender));configs.MaintaskConfigReaderStruct=MaintaskConfigReaderStruct})(configs||(configs={}));configs.MaintaskConfigReader=configs.MaintaskConfigReaderStruct;var configs;(function(configs){var MeetingGameConfigReaderStruct=(function(_super){__extends(MeetingGameConfigReaderStruct,_super);function MeetingGameConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MeetingGame";return _this}MeetingGameConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MeetingGameConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetString(csv,this.GetHeadIndex("type"));config.result=csvGetInt(csv,this.GetHeadIndex("result"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.times=configs.DTlValue2.parse(csvGetString(csv,this.GetHeadIndex("times")));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return MeetingGameConfigReaderStruct}(configs.CsvConfigRender));configs.MeetingGameConfigReaderStruct=MeetingGameConfigReaderStruct})(configs||(configs={}));configs.MeetingGameConfigReader=configs.MeetingGameConfigReaderStruct;var configs;(function(configs){var MeetingRewardsConfigReaderStruct=(function(_super){__extends(MeetingRewardsConfigReaderStruct,_super);function MeetingRewardsConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MeetingRewards";return _this}MeetingRewardsConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MeetingRewardsConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.rewards=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("rewards")));config.expect=csvGetInt(csv,this.GetHeadIndex("expect"));config.rate=csvGetInt(csv,this.GetHeadIndex("rate"));config.info=csvGetString(csv,this.GetHeadIndex("info"));this.addConfig(config)};return MeetingRewardsConfigReaderStruct}(configs.CsvConfigRender));configs.MeetingRewardsConfigReaderStruct=MeetingRewardsConfigReaderStruct})(configs||(configs={}));configs.MeetingRewardsConfigReader=configs.MeetingRewardsConfigReaderStruct;var configs;(function(configs){var MenuConfigReaderStruct=(function(_super){__extends(MenuConfigReaderStruct,_super);function MenuConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Menu";return _this}MenuConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MenuConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.moduleName=csvGetString(csv,this.GetHeadIndex("moduleName"));config.layer=csvGetInt(csv,this.GetHeadIndex("layer"));config.closeOtherType=csvGetInt(csv,this.GetHeadIndex("closeOtherType"));config.closeHomeWindow=csvGetBoolean(csv,this.GetHeadIndex("closeHomeWindow"));config.isAutoOpenHomeWindow=csvGetBoolean(csv,this.GetHeadIndex("isAutoOpenHomeWindow"));config.cacheTime=csvGetInt(csv,this.GetHeadIndex("cacheTime"));config.loaderId=csvGetInt(csv,this.GetHeadIndex("loaderId"));config.barType=csvGetInt(csv,this.GetHeadIndex("barType"));config.barIndex=csvGetInt(csv,this.GetHeadIndex("barIndex"));config.openAnimation=csvGetInt(csv,this.GetHeadIndex("openAnimation"));config.closeAnimation=csvGetInt(csv,this.GetHeadIndex("closeAnimation"));this.addConfig(config)};return MenuConfigReaderStruct}(configs.CsvConfigRender));configs.MenuConfigReaderStruct=MenuConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var MenuConfigReader=(function(_super){__extends(MenuConfigReader,_super);function MenuConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.barDict=new Dictionary();return _this}MenuConfigReader.prototype.getBarMenus=function(barType){if(this.barDict.hasKey(barType)){return this.barDict.getValue(barType)}return[]};MenuConfigReader.prototype.onGameLoadedAll=function(){var list=this.getConfigList();for(var i=0;i<list.length;i++){var config=list[i];var menuList=this.barDict.getValue(config.barType);if(!menuList){menuList=[];this.barDict.add(config.barType,menuList)}menuList.push(config)}};return MenuConfigReader}(configs.MenuConfigReaderStruct));configs.MenuConfigReader=MenuConfigReader})(configs||(configs={}));var configs;(function(configs){var MenuIndexConfigReaderStruct=(function(_super){__extends(MenuIndexConfigReaderStruct,_super);function MenuIndexConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MenuIndex";return _this}MenuIndexConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MenuIndexConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.menuId=csvGetInt(csv,this.GetHeadIndex("menuId"));config.openType=csvGetInt(csv,this.GetHeadIndex("openType"));config.menuIndex=csvGetInt(csv,this.GetHeadIndex("menuIndex"));this.addConfig(config)};return MenuIndexConfigReaderStruct}(configs.CsvConfigRender));configs.MenuIndexConfigReaderStruct=MenuIndexConfigReaderStruct})(configs||(configs={}));configs.MenuIndexConfigReader=configs.MenuIndexConfigReaderStruct;var configs;(function(configs){var MonthCardConfigReaderStruct=(function(_super){__extends(MonthCardConfigReaderStruct,_super);function MonthCardConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MonthCard";return _this}MonthCardConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MonthCardConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.serial=csvGetInt(csv,this.GetHeadIndex("serial"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.actor=csvGetInt(csv,this.GetHeadIndex("actor"));config.daily_gift_resource=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("daily_gift_resource")));config.daily_gift_contract1=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("daily_gift_contract1")));config.daily_gift_contract2=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("daily_gift_contract2")));config.gift_crystal=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("gift_crystal")));config.gift_item=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("gift_item")));config.info=csvGetString(csv,this.GetHeadIndex("info"));this.addConfig(config)};return MonthCardConfigReaderStruct}(configs.CsvConfigRender));configs.MonthCardConfigReaderStruct=MonthCardConfigReaderStruct})(configs||(configs={}));configs.MonthCardConfigReader=configs.MonthCardConfigReaderStruct;var configs;(function(configs){var MovieAdaptationMsgConfigReaderStruct=(function(_super){__extends(MovieAdaptationMsgConfigReaderStruct,_super);function MovieAdaptationMsgConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MovieAdaptationMsg";return _this}MovieAdaptationMsgConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MovieAdaptationMsgConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.adaptation_min=csvGetInt(csv,this.GetHeadIndex("adaptation_min"));config.adaptation_max=csvGetInt(csv,this.GetHeadIndex("adaptation_max"));config.zh_cn_msg1=csvGetString(csv,this.GetHeadIndex("zh_cn_msg1"));config.zh_cn_msg2=csvGetString(csv,this.GetHeadIndex("zh_cn_msg2"));config.zh_cn_msg3=csvGetString(csv,this.GetHeadIndex("zh_cn_msg3"));this.addConfig(config)};return MovieAdaptationMsgConfigReaderStruct}(configs.CsvConfigRender));configs.MovieAdaptationMsgConfigReaderStruct=MovieAdaptationMsgConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var MovieAdaptationMsgConfigReader=(function(_super){__extends(MovieAdaptationMsgConfigReader,_super);function MovieAdaptationMsgConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}MovieAdaptationMsgConfigReader.prototype.getStoryShootTypeTip=function(typeValue){var list=this.getConfigList();var result="";for(var i=0;i<list.length;i++){if(typeValue>=list[i].adaptation_min&&typeValue<list[i].adaptation_max){var randomT=Random.rangeBoth(0,2);switch(randomT){case 0:result=list[i].msg1;case 1:result=list[i].msg2;case 2:result=list[i].msg3}break}}return result};return MovieAdaptationMsgConfigReader}(configs.MovieAdaptationMsgConfigReaderStruct));configs.MovieAdaptationMsgConfigReader=MovieAdaptationMsgConfigReader})(configs||(configs={}));var configs;(function(configs){var MovieAudienceEvaluationConfigReaderStruct=(function(_super){__extends(MovieAudienceEvaluationConfigReaderStruct,_super);function MovieAudienceEvaluationConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MovieAudienceEvaluation";return _this}MovieAudienceEvaluationConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MovieAudienceEvaluationConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.sex=csvGetInt(csv,this.GetHeadIndex("sex"));config.pic=csvGetInt(csv,this.GetHeadIndex("pic"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));config.min_score=csvGetFloat(csv,this.GetHeadIndex("min_score"));config.max_score=csvGetFloat(csv,this.GetHeadIndex("max_score"));config.zh_cn_content=csvGetString(csv,this.GetHeadIndex("zh_cn_content"));this.addConfig(config)};return MovieAudienceEvaluationConfigReaderStruct}(configs.CsvConfigRender));configs.MovieAudienceEvaluationConfigReaderStruct=MovieAudienceEvaluationConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var MovieAudienceEvaluationConfigReader=(function(_super){__extends(MovieAudienceEvaluationConfigReader,_super);function MovieAudienceEvaluationConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}MovieAudienceEvaluationConfigReader.prototype.getMovieAudience=function(val){if(val<10){val=10}if(val>99){val=99}var list=this.getConfigList();var result;var listResult=Array();for(var i=0;i<list.length;i++){if(val>=list[i].min_score&&val<list[i].max_score){listResult.push(list[i])}}return listResult[Random.range(0,listResult.length)]};return MovieAudienceEvaluationConfigReader}(configs.MovieAudienceEvaluationConfigReaderStruct));configs.MovieAudienceEvaluationConfigReader=MovieAudienceEvaluationConfigReader})(configs||(configs={}));var configs;(function(configs){var MovieDropConfigReaderStruct=(function(_super){__extends(MovieDropConfigReaderStruct,_super);function MovieDropConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MovieDrop";return _this}MovieDropConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MovieDropConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.gain_level=csvGetInt(csv,this.GetHeadIndex("gain_level"));config.zh_cn_gain_name=csvGetString(csv,this.GetHeadIndex("zh_cn_gain_name"));config.gain_pic=csvGetInt(csv,this.GetHeadIndex("gain_pic"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.order_num=csvGetInt(csv,this.GetHeadIndex("order_num"));config.oreder_qua=toIntArray(csvGetString(csv,this.GetHeadIndex("oreder_qua")));config.expect=csvGetInt(csv,this.GetHeadIndex("expect"));config.fixed_drop=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("fixed_drop")));config.drop_num=csvGetInt(csv,this.GetHeadIndex("drop_num"));config.drop_item=toIntArray(csvGetString(csv,this.GetHeadIndex("drop_item")));config.item_num=toIntArray(csvGetString(csv,this.GetHeadIndex("item_num")));config.base_fans=csvGetInt(csv,this.GetHeadIndex("base_fans"));this.addConfig(config)};return MovieDropConfigReaderStruct}(configs.CsvConfigRender));configs.MovieDropConfigReaderStruct=MovieDropConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var MovieDropConfigReader=(function(_super){__extends(MovieDropConfigReader,_super);function MovieDropConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}MovieDropConfigReader.prototype.getSellTip=function(val){var list=this.getConfigList();for(var i=0;i<list.length;i++){if(list[i].gain_pic==val){return list[i]}}};MovieDropConfigReader.prototype.getSellIcon=function(level){var list=this.getConfigList();for(var i=0;i<list.length;i++){if(list[i].gain_level==level){return list[i].gain_pic}}};return MovieDropConfigReader}(configs.MovieDropConfigReaderStruct));configs.MovieDropConfigReader=MovieDropConfigReader})(configs||(configs={}));var configs;(function(configs){var MovieExpectConfigReaderStruct=(function(_super){__extends(MovieExpectConfigReaderStruct,_super);function MovieExpectConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MovieExpect";return _this}MovieExpectConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MovieExpectConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));config.expect_req_min=csvGetInt(csv,this.GetHeadIndex("expect_req_min"));config.expect_req_max=csvGetInt(csv,this.GetHeadIndex("expect_req_max"));config.pic=csvGetInt(csv,this.GetHeadIndex("pic"));config.gain_up=csvGetInt(csv,this.GetHeadIndex("gain_up"));config.zh_cn_pic_word=csvGetString(csv,this.GetHeadIndex("zh_cn_pic_word"));this.addConfig(config)};return MovieExpectConfigReaderStruct}(configs.CsvConfigRender));configs.MovieExpectConfigReaderStruct=MovieExpectConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var MovieExpectConfigReader=(function(_super){__extends(MovieExpectConfigReader,_super);function MovieExpectConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}MovieExpectConfigReader.prototype.getConfigWithExpect=function(val){var list=this.getConfigList();var indexOf=0;for(var i=0;i<list.length;i++){if(val>=list[i].expect_req_min){if(list[i].expect_req_max<0||val<list[i].expect_req_max){indexOf=i}}}return list[indexOf]};return MovieExpectConfigReader}(configs.MovieExpectConfigReaderStruct));configs.MovieExpectConfigReader=MovieExpectConfigReader})(configs||(configs={}));var configs;(function(configs){var MovieLicenceConfigReaderStruct=(function(_super){__extends(MovieLicenceConfigReaderStruct,_super);function MovieLicenceConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MovieLicence";return _this}MovieLicenceConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MovieLicenceConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));config.cool_down=csvGetInt(csv,this.GetHeadIndex("cool_down"));this.addConfig(config)};return MovieLicenceConfigReaderStruct}(configs.CsvConfigRender));configs.MovieLicenceConfigReaderStruct=MovieLicenceConfigReaderStruct})(configs||(configs={}));configs.MovieLicenceConfigReader=configs.MovieLicenceConfigReaderStruct;var configs;(function(configs){var MovieMediaVisitConfigReaderStruct=(function(_super){__extends(MovieMediaVisitConfigReaderStruct,_super);function MovieMediaVisitConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MovieMediaVisit";return _this}MovieMediaVisitConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MovieMediaVisitConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.mediaId=csvGetInt(csv,this.GetHeadIndex("mediaId"));config.level=csvGetInt(csv,this.GetHeadIndex("level"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.levelup_req=csvGetInt(csv,this.GetHeadIndex("levelup_req"));config.cost_id=csvGetInt(csv,this.GetHeadIndex("cost_id"));config.cost_num=csvGetInt(csv,this.GetHeadIndex("cost_num"));config.min_expection=csvGetInt(csv,this.GetHeadIndex("min_expection"));config.max_expection=csvGetInt(csv,this.GetHeadIndex("max_expection"));config.pic=csvGetInt(csv,this.GetHeadIndex("pic"));this.addConfig(config)};return MovieMediaVisitConfigReaderStruct}(configs.CsvConfigRender));configs.MovieMediaVisitConfigReaderStruct=MovieMediaVisitConfigReaderStruct})(configs||(configs={}));configs.MovieMediaVisitConfigReader=configs.MovieMediaVisitConfigReaderStruct;var configs;(function(configs){var MovieMidiaEvaluationConfigReaderStruct=(function(_super){__extends(MovieMidiaEvaluationConfigReaderStruct,_super);function MovieMidiaEvaluationConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MovieMidiaEvaluation";return _this}MovieMidiaEvaluationConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MovieMidiaEvaluationConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.media_id=csvGetInt(csv,this.GetHeadIndex("media_id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.zh_cn_commentators=csvGetString(csv,this.GetHeadIndex("zh_cn_commentators"));config.min_score=csvGetFloat(csv,this.GetHeadIndex("min_score"));config.max_score=csvGetFloat(csv,this.GetHeadIndex("max_score"));config.zh_cn_content=csvGetString(csv,this.GetHeadIndex("zh_cn_content"));config.praise=toIntArray(csvGetString(csv,this.GetHeadIndex("praise")));config.pic=csvGetInt(csv,this.GetHeadIndex("pic"));this.addConfig(config)};return MovieMidiaEvaluationConfigReaderStruct}(configs.CsvConfigRender));configs.MovieMidiaEvaluationConfigReaderStruct=MovieMidiaEvaluationConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var MovieMidiaEvaluationConfigReader=(function(_super){__extends(MovieMidiaEvaluationConfigReader,_super);function MovieMidiaEvaluationConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}MovieMidiaEvaluationConfigReader.prototype.getMovieMidiaEva=function(val,mediaId){var list=this.getConfigList();var result;for(var i=0;i<list.length;i++){if(mediaId===list[i].media_id&&val>=list[i].min_score&&val<list[i].max_score){result=list[i];break}}return result};return MovieMidiaEvaluationConfigReader}(configs.MovieMidiaEvaluationConfigReaderStruct));configs.MovieMidiaEvaluationConfigReader=MovieMidiaEvaluationConfigReader})(configs||(configs={}));var configs;(function(configs){var MovieMidiaEvaluationMsgConfigReaderStruct=(function(_super){__extends(MovieMidiaEvaluationMsgConfigReaderStruct,_super);function MovieMidiaEvaluationMsgConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MovieMidiaEvaluationMsg";return _this}MovieMidiaEvaluationMsgConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MovieMidiaEvaluationMsgConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.score_min=csvGetInt(csv,this.GetHeadIndex("score_min"));config.scor_max=csvGetInt(csv,this.GetHeadIndex("scor_max"));config.zh_cn_msg=csvGetString(csv,this.GetHeadIndex("zh_cn_msg"));this.addConfig(config)};return MovieMidiaEvaluationMsgConfigReaderStruct}(configs.CsvConfigRender));configs.MovieMidiaEvaluationMsgConfigReaderStruct=MovieMidiaEvaluationMsgConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var MovieMidiaEvaluationMsgConfigReader=(function(_super){__extends(MovieMidiaEvaluationMsgConfigReader,_super);function MovieMidiaEvaluationMsgConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}MovieMidiaEvaluationMsgConfigReader.prototype.getMsgFoNotice=function(score){var list=this.getConfigList();var result;for(var i=0;i<list.length;i++){if(score>=list[i].score_min&&score<list[i].scor_max){result=list[i];break}}return result};return MovieMidiaEvaluationMsgConfigReader}(configs.MovieMidiaEvaluationMsgConfigReaderStruct));configs.MovieMidiaEvaluationMsgConfigReader=MovieMidiaEvaluationMsgConfigReader})(configs||(configs={}));var configs;(function(configs){var MoviePopularizeConfigReaderStruct=(function(_super){__extends(MoviePopularizeConfigReaderStruct,_super);function MoviePopularizeConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MoviePopularize";return _this}MoviePopularizeConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MoviePopularizeConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));config.cost_id=csvGetInt(csv,this.GetHeadIndex("cost_id"));config.cost_num=csvGetInt(csv,this.GetHeadIndex("cost_num"));config.increase=csvGetFloat(csv,this.GetHeadIndex("increase"));this.addConfig(config)};return MoviePopularizeConfigReaderStruct}(configs.CsvConfigRender));configs.MoviePopularizeConfigReaderStruct=MoviePopularizeConfigReaderStruct})(configs||(configs={}));configs.MoviePopularizeConfigReader=configs.MoviePopularizeConfigReaderStruct;var configs;(function(configs){var MovieShootTypeConfigReaderStruct=(function(_super){__extends(MovieShootTypeConfigReaderStruct,_super);function MovieShootTypeConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MovieShootType";return _this}MovieShootTypeConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MovieShootTypeConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.zh_cn_type_des=csvGetString(csv,this.GetHeadIndex("zh_cn_type_des"));config.item_id=csvGetInt(csv,this.GetHeadIndex("item_id"));config.item_num=csvGetInt(csv,this.GetHeadIndex("item_num"));config.pic=csvGetInt(csv,this.GetHeadIndex("pic"));this.addConfig(config)};return MovieShootTypeConfigReaderStruct}(configs.CsvConfigRender));configs.MovieShootTypeConfigReaderStruct=MovieShootTypeConfigReaderStruct})(configs||(configs={}));configs.MovieShootTypeConfigReader=configs.MovieShootTypeConfigReaderStruct;var configs;(function(configs){var MsgChatConfigReaderStruct=(function(_super){__extends(MsgChatConfigReaderStruct,_super);function MsgChatConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MsgChat";return _this}MsgChatConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MsgChatConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.key=csvGetString(csv,this.GetHeadIndex("key"));config.info=csvGetString(csv,this.GetHeadIndex("info"));config.zh_cn_notice=csvGetString(csv,this.GetHeadIndex("zh_cn_notice"));config.parameter=configs.DTlValue2.parseArray(csvGetString(csv,this.GetHeadIndex("parameter")));config.popup=configs.DTlValue2.parseArray(csvGetString(csv,this.GetHeadIndex("popup")));this.addConfig(config)};return MsgChatConfigReaderStruct}(configs.CsvConfigRender));configs.MsgChatConfigReaderStruct=MsgChatConfigReaderStruct})(configs||(configs={}));configs.MsgChatConfigReader=configs.MsgChatConfigReaderStruct;var configs;(function(configs){var MsgConfigReaderStruct=(function(_super){__extends(MsgConfigReaderStruct,_super);function MsgConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Msg";return _this}MsgConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MsgConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.key=csvGetString(csv,this.GetHeadIndex("key"));config.module=csvGetString(csv,this.GetHeadIndex("module"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.zh_cn_notice=csvGetString(csv,this.GetHeadIndex("zh_cn_notice"));config.en_notice=csvGetString(csv,this.GetHeadIndex("en_notice"));this.addConfig(config)};return MsgConfigReaderStruct}(configs.CsvConfigRender));configs.MsgConfigReaderStruct=MsgConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var MsgConfigReader=(function(_super){__extends(MsgConfigReader,_super);function MsgConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.configsByKey=new Dictionary();return _this}MsgConfigReader.prototype.onGameLoadedAll=function(){_super.prototype.onGameLoadedAll.call(this);var list=this.configs.getValues();for(var i=0;i<list.length;i++){var key=list[i].key;if(isNullOrEmpty(key)){key=list[i].id}this.configsByKey.add(key,list[i])}};MsgConfigReader.prototype.getConfig=function(key){if(!this.configsByKey.hasKey(key)){if(this.configs.hasKey(key)){return this.configs.getValue(key)}console.log(this.tableName+" \u6CA1\u6709 key="+key+" \u7684\u914D\u7F6E")}return this.configsByKey.getValue(key)};MsgConfigReader.prototype.getTxt=function(key){var config=this.getConfig(key);if(!config){return"[Error]"+this.tableName+" \u6CA1\u6709 key="+key+" \u7684\u914D\u7F6E"}return config.notice};MsgConfigReader.prototype.getTxtFormat=function(key){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}var txt=(_a=this.getTxt(key)).format.apply(_a,args);return txt;var _a};MsgConfigReader.prototype.outKeyCode=function(){console.log("");console.log("class MsgKey");console.log("{");var list=this.configsByKey.getValues();for(var i=0;i<list.length;i++){var key=list[i].key;var val=key;if(isNullOrEmpty(key)){key="KEY_"+list[i].id;val=list[i].id}else{key=key.replace("-","_")}console.log("\tstatic "+key+' = "'+val+'";')}console.log("}");console.log("");console.log("")};return MsgConfigReader}(configs.MsgConfigReaderStruct));configs.MsgConfigReader=MsgConfigReader})(configs||(configs={}));var configs;(function(configs){var MsgProtoErrorConfigReaderStruct=(function(_super){__extends(MsgProtoErrorConfigReaderStruct,_super);function MsgProtoErrorConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="MsgProtoError";return _this}MsgProtoErrorConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.MsgProtoErrorConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.key=csvGetString(csv,this.GetHeadIndex("key"));config.module=csvGetString(csv,this.GetHeadIndex("module"));config.zh_cn_notice=csvGetString(csv,this.GetHeadIndex("zh_cn_notice"));this.addConfig(config)};return MsgProtoErrorConfigReaderStruct}(configs.CsvConfigRender));configs.MsgProtoErrorConfigReaderStruct=MsgProtoErrorConfigReaderStruct})(configs||(configs={}));configs.MsgProtoErrorConfigReader=configs.MsgProtoErrorConfigReaderStruct;var configs;(function(configs){var NpcConfigReaderStruct=(function(_super){__extends(NpcConfigReaderStruct,_super);function NpcConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Npc";return _this}NpcConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.NpcConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.en_name=csvGetString(csv,this.GetHeadIndex("en_name"));config.cn_name=csvGetString(csv,this.GetHeadIndex("cn_name"));config.sex=csvGetInt(csv,this.GetHeadIndex("sex"));config.avatar=csvGetInt(csv,this.GetHeadIndex("avatar"));this.addConfig(config)};return NpcConfigReaderStruct}(configs.CsvConfigRender));configs.NpcConfigReaderStruct=NpcConfigReaderStruct})(configs||(configs={}));configs.NpcConfigReader=configs.NpcConfigReaderStruct;var configs;(function(configs){var OperationTasksConfigReaderStruct=(function(_super){__extends(OperationTasksConfigReaderStruct,_super);function OperationTasksConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="OperationTasks";return _this}OperationTasksConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.OperationTasksConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.starttime=csvGetInt(csv,this.GetHeadIndex("starttime"));config.endtime=csvGetInt(csv,this.GetHeadIndex("endtime"));config.country=csvGetInt(csv,this.GetHeadIndex("country"));config.plate=csvGetInt(csv,this.GetHeadIndex("plate"));config.functionid=csvGetInt(csv,this.GetHeadIndex("functionid"));config.parameter=csvGetInt(csv,this.GetHeadIndex("parameter"));config.typename=csvGetInt(csv,this.GetHeadIndex("typename"));config.counts=csvGetInt(csv,this.GetHeadIndex("counts"));config.actors=csvGetInt(csv,this.GetHeadIndex("actors"));config.actor_nation=csvGetInt(csv,this.GetHeadIndex("actor_nation"));config.actor_sex=csvGetInt(csv,this.GetHeadIndex("actor_sex"));config.actor_type=csvGetInt(csv,this.GetHeadIndex("actor_type"));config.box_level=csvGetInt(csv,this.GetHeadIndex("box_level"));config.movie_type=csvGetInt(csv,this.GetHeadIndex("movie_type"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));config.zh_cn_classname=csvGetString(csv,this.GetHeadIndex("zh_cn_classname"));config.zh_cn_description=csvGetString(csv,this.GetHeadIndex("zh_cn_description"));this.addConfig(config)};return OperationTasksConfigReaderStruct}(configs.CsvConfigRender));configs.OperationTasksConfigReaderStruct=OperationTasksConfigReaderStruct})(configs||(configs={}));configs.OperationTasksConfigReader=configs.OperationTasksConfigReaderStruct;var configs;(function(configs){var OperationTasksScoreConfigReaderStruct=(function(_super){__extends(OperationTasksScoreConfigReaderStruct,_super);function OperationTasksScoreConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="OperationTasksScore";return _this}OperationTasksScoreConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.OperationTasksScoreConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.score=csvGetInt(csv,this.GetHeadIndex("score"));config.rewards=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("rewards")));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.info=csvGetString(csv,this.GetHeadIndex("info"));this.addConfig(config)};return OperationTasksScoreConfigReaderStruct}(configs.CsvConfigRender));configs.OperationTasksScoreConfigReaderStruct=OperationTasksScoreConfigReaderStruct})(configs||(configs={}));configs.OperationTasksScoreConfigReader=configs.OperationTasksScoreConfigReaderStruct;var configs;(function(configs){var OperationTasksTermsConfigReaderStruct=(function(_super){__extends(OperationTasksTermsConfigReaderStruct,_super);function OperationTasksTermsConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="OperationTasksTerms";return _this}OperationTasksTermsConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.OperationTasksTermsConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.counts=csvGetInt(csv,this.GetHeadIndex("counts"));config.actors=csvGetInt(csv,this.GetHeadIndex("actors"));config.actor_nation=csvGetInt(csv,this.GetHeadIndex("actor_nation"));config.actor_sex=csvGetInt(csv,this.GetHeadIndex("actor_sex"));config.actor_type=csvGetInt(csv,this.GetHeadIndex("actor_type"));config.box_level=csvGetInt(csv,this.GetHeadIndex("box_level"));config.movie_type=csvGetInt(csv,this.GetHeadIndex("movie_type"));config.info=csvGetString(csv,this.GetHeadIndex("info"));this.addConfig(config)};return OperationTasksTermsConfigReaderStruct}(configs.CsvConfigRender));configs.OperationTasksTermsConfigReaderStruct=OperationTasksTermsConfigReaderStruct})(configs||(configs={}));configs.OperationTasksTermsConfigReader=configs.OperationTasksTermsConfigReaderStruct;var configs;(function(configs){var OrderConfigReaderStruct=(function(_super){__extends(OrderConfigReaderStruct,_super);function OrderConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Order";return _this}OrderConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.OrderConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name1=csvGetString(csv,this.GetHeadIndex("zh_cn_name1"));config.zh_cn_name2=csvGetString(csv,this.GetHeadIndex("zh_cn_name2"));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.block=csvGetInt(csv,this.GetHeadIndex("block"));config.need=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("need")));config.quality=csvGetInt(csv,this.GetHeadIndex("quality"));config.reward=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("reward")));config.expect=csvGetInt(csv,this.GetHeadIndex("expect"));this.addConfig(config)};return OrderConfigReaderStruct}(configs.CsvConfigRender));configs.OrderConfigReaderStruct=OrderConfigReaderStruct})(configs||(configs={}));configs.OrderConfigReader=configs.OrderConfigReaderStruct;var configs;(function(configs){var OscarConfigReaderStruct=(function(_super){__extends(OscarConfigReaderStruct,_super);function OscarConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Oscar";return _this}OscarConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.OscarConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.oscar_type=csvGetInt(csv,this.GetHeadIndex("oscar_type"));config.compere_type=csvGetInt(csv,this.GetHeadIndex("compere_type"));config.zh_cn_content=csvGetString(csv,this.GetHeadIndex("zh_cn_content"));config.content_duration=csvGetInt(csv,this.GetHeadIndex("content_duration"));config.act=csvGetString(csv,this.GetHeadIndex("act"));config.act_duration=csvGetInt(csv,this.GetHeadIndex("act_duration"));this.addConfig(config)};return OscarConfigReaderStruct}(configs.CsvConfigRender));configs.OscarConfigReaderStruct=OscarConfigReaderStruct})(configs||(configs={}));configs.OscarConfigReader=configs.OscarConfigReaderStruct;var configs;(function(configs){var PerformConfigReaderStruct=(function(_super){__extends(PerformConfigReaderStruct,_super);function PerformConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Perform";return _this}PerformConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.PerformConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.building=csvGetInt(csv,this.GetHeadIndex("building"));config.weight=csvGetInt(csv,this.GetHeadIndex("weight"));config.event=toIntArray(csvGetString(csv,this.GetHeadIndex("event")));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return PerformConfigReaderStruct}(configs.CsvConfigRender));configs.PerformConfigReaderStruct=PerformConfigReaderStruct})(configs||(configs={}));configs.PerformConfigReader=configs.PerformConfigReaderStruct;var configs;(function(configs){var PlayActConfigReaderStruct=(function(_super){__extends(PlayActConfigReaderStruct,_super);function PlayActConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="PlayAct";return _this}PlayActConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.PlayActConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.data=csvGetInt(csv,this.GetHeadIndex("data"));config.event=toIntArray(csvGetString(csv,this.GetHeadIndex("event")));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return PlayActConfigReaderStruct}(configs.CsvConfigRender));configs.PlayActConfigReaderStruct=PlayActConfigReaderStruct})(configs||(configs={}));configs.PlayActConfigReader=configs.PlayActConfigReaderStruct;var configs;(function(configs){var PlayerDefaultConfigReaderStruct=(function(_super){__extends(PlayerDefaultConfigReaderStruct,_super);function PlayerDefaultConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="PlayerDefault";return _this}PlayerDefaultConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.PlayerDefaultConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.actors=toIntArray(csvGetString(csv,this.GetHeadIndex("actors")));config.items=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("items")));this.addConfig(config)};return PlayerDefaultConfigReaderStruct}(configs.CsvConfigRender));configs.PlayerDefaultConfigReaderStruct=PlayerDefaultConfigReaderStruct})(configs||(configs={}));configs.PlayerDefaultConfigReader=configs.PlayerDefaultConfigReaderStruct;var configs;(function(configs){var PlayerLevelConfigReaderStruct=(function(_super){__extends(PlayerLevelConfigReaderStruct,_super);function PlayerLevelConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="PlayerLevel";return _this}PlayerLevelConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.PlayerLevelConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.fans=csvGetInt(csv,this.GetHeadIndex("fans"));config.story=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("story")));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));config.order_qua=toIntArray(csvGetString(csv,this.GetHeadIndex("order_qua")));config.order_num=csvGetInt(csv,this.GetHeadIndex("order_num"));config.train_max=csvGetInt(csv,this.GetHeadIndex("train_max"));config.train_count=csvGetInt(csv,this.GetHeadIndex("train_count"));config.actor_max=csvGetInt(csv,this.GetHeadIndex("actor_max"));config.actor_count=csvGetInt(csv,this.GetHeadIndex("actor_count"));config.hide_max=csvGetInt(csv,this.GetHeadIndex("hide_max"));config.hide_count=csvGetInt(csv,this.GetHeadIndex("hide_count"));config.day_max=csvGetInt(csv,this.GetHeadIndex("day_max"));config.day=csvGetInt(csv,this.GetHeadIndex("day"));config.meeting_cd=csvGetInt(csv,this.GetHeadIndex("meeting_cd"));config.cost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("cost")));config.mc_special_package1=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("mc_special_package1")));config.mc_special_package2=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("mc_special_package2")));config.shop_1003=csvGetInt(csv,this.GetHeadIndex("shop_1003"));config.shop_1004=csvGetInt(csv,this.GetHeadIndex("shop_1004"));config.Turntable_min=csvGetInt(csv,this.GetHeadIndex("Turntable_min"));config.Turntable_max=csvGetInt(csv,this.GetHeadIndex("Turntable_max"));this.addConfig(config)};return PlayerLevelConfigReaderStruct}(configs.CsvConfigRender));configs.PlayerLevelConfigReaderStruct=PlayerLevelConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var PlayerLevelConfigReader=(function(_super){__extends(PlayerLevelConfigReader,_super);function PlayerLevelConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.maxLevel=1;_this.level=1;return _this}PlayerLevelConfigReader.prototype.addConfig=function(config){_super.prototype.addConfig.call(this,config);this.maxLevel=Math.max(this.maxLevel,config.id);this.level=1};PlayerLevelConfigReader.prototype.getConfig=function(id){id=Math.min(id,this.maxLevel);return _super.prototype.getConfig.call(this,id)};PlayerLevelConfigReader.prototype.GetShopGold=function(playerLv){var cfg=this.getConfig(playerLv);if(cfg){return cfg.ShopGold}return 0};PlayerLevelConfigReader.prototype.GetShopMoney=function(playerLv){var cfg=this.getConfig(playerLv);if(cfg){return cfg.ShopMoney}return 0};PlayerLevelConfigReader.prototype.GetFansLimit=function(playerLv){var cfg=this.getConfig(playerLv);if(cfg){return cfg.fans}return 0};return PlayerLevelConfigReader}(configs.PlayerLevelConfigReaderStruct));configs.PlayerLevelConfigReader=PlayerLevelConfigReader})(configs||(configs={}));var configs;(function(configs){var PopUpConfigReaderStruct=(function(_super){__extends(PopUpConfigReaderStruct,_super);function PopUpConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="PopUp";return _this}PopUpConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.PopUpConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));config.start_type=csvGetInt(csv,this.GetHeadIndex("start_type"));config.start_par1=csvGetInt(csv,this.GetHeadIndex("start_par1"));config.start_par2=configs.DTDate.parse(csvGetString(csv,this.GetHeadIndex("start_par2")));config.start_par3=csvGetInt(csv,this.GetHeadIndex("start_par3"));config.image=csvGetString(csv,this.GetHeadIndex("image"));config.priority=csvGetInt(csv,this.GetHeadIndex("priority"));this.addConfig(config)};return PopUpConfigReaderStruct}(configs.CsvConfigRender));configs.PopUpConfigReaderStruct=PopUpConfigReaderStruct})(configs||(configs={}));configs.PopUpConfigReader=configs.PopUpConfigReaderStruct;var configs;(function(configs){var PositionConfigReaderStruct=(function(_super){__extends(PositionConfigReaderStruct,_super);function PositionConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Position";return _this}PositionConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.PositionConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.position_cost_con=csvGetInt(csv,this.GetHeadIndex("position_cost_con"));config.position_con=csvGetInt(csv,this.GetHeadIndex("position_con"));this.addConfig(config)};return PositionConfigReaderStruct}(configs.CsvConfigRender));configs.PositionConfigReaderStruct=PositionConfigReaderStruct})(configs||(configs={}));configs.PositionConfigReader=configs.PositionConfigReaderStruct;var configs;(function(configs){var ProduceConfigReaderStruct=(function(_super){__extends(ProduceConfigReaderStruct,_super);function ProduceConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Produce";return _this}ProduceConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ProduceConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.item=csvGetInt(csv,this.GetHeadIndex("item"));config.zh_cn_tip=csvGetString(csv,this.GetHeadIndex("zh_cn_tip"));config.grade=csvGetInt(csv,this.GetHeadIndex("grade"));config.unlock_level=csvGetInt(csv,this.GetHeadIndex("unlock_level"));config.unlock_building=csvGetInt(csv,this.GetHeadIndex("unlock_building"));config.unlock_gold=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("unlock_gold")));config.unlock_reward=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("unlock_reward")));config.cd=csvGetInt(csv,this.GetHeadIndex("cd"));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.cheer_sex=csvGetInt(csv,this.GetHeadIndex("cheer_sex"));config.cheer_continents=csvGetInt(csv,this.GetHeadIndex("cheer_continents"));config.cheer_type=csvGetInt(csv,this.GetHeadIndex("cheer_type"));config.cheer_age=csvGetInt(csv,this.GetHeadIndex("cheer_age"));config.pre_id=csvGetInt(csv,this.GetHeadIndex("pre_id"));config.next_line=csvGetInt(csv,this.GetHeadIndex("next_line"));this.addConfig(config)};return ProduceConfigReaderStruct}(configs.CsvConfigRender));configs.ProduceConfigReaderStruct=ProduceConfigReaderStruct})(configs||(configs={}));configs.ProduceConfigReader=configs.ProduceConfigReaderStruct;var configs;(function(configs){var ProduceLevelConfigReaderStruct=(function(_super){__extends(ProduceLevelConfigReaderStruct,_super);function ProduceLevelConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ProduceLevel";return _this}ProduceLevelConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ProduceLevelConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.cost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("cost")));config.limit_grade=toIntArray(csvGetString(csv,this.GetHeadIndex("limit_grade")));this.addConfig(config)};return ProduceLevelConfigReaderStruct}(configs.CsvConfigRender));configs.ProduceLevelConfigReaderStruct=ProduceLevelConfigReaderStruct})(configs||(configs={}));configs.ProduceLevelConfigReader=configs.ProduceLevelConfigReaderStruct;var configs;(function(configs){var ProduceLvConfigReaderStruct=(function(_super){__extends(ProduceLvConfigReaderStruct,_super);function ProduceLvConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ProduceLv";return _this}ProduceLvConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ProduceLvConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.lv=csvGetInt(csv,this.GetHeadIndex("lv"));config.effect=toIntArray(csvGetString(csv,this.GetHeadIndex("effect")));config.produce_lv=csvGetInt(csv,this.GetHeadIndex("produce_lv"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return ProduceLvConfigReaderStruct}(configs.CsvConfigRender));configs.ProduceLvConfigReaderStruct=ProduceLvConfigReaderStruct})(configs||(configs={}));configs.ProduceLvConfigReader=configs.ProduceLvConfigReaderStruct;var configs;(function(configs){var ProduceSouvenirConfigReaderStruct=(function(_super){__extends(ProduceSouvenirConfigReaderStruct,_super);function ProduceSouvenirConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ProduceSouvenir";return _this}ProduceSouvenirConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ProduceSouvenirConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.once=csvGetInt(csv,this.GetHeadIndex("once"));config.max=csvGetInt(csv,this.GetHeadIndex("max"));this.addConfig(config)};return ProduceSouvenirConfigReaderStruct}(configs.CsvConfigRender));configs.ProduceSouvenirConfigReaderStruct=ProduceSouvenirConfigReaderStruct})(configs||(configs={}));configs.ProduceSouvenirConfigReader=configs.ProduceSouvenirConfigReaderStruct;var configs;(function(configs){var PropertyConfigReaderStruct=(function(_super){__extends(PropertyConfigReaderStruct,_super);function PropertyConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Property";return _this}PropertyConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.PropertyConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.field=csvGetString(csv,this.GetHeadIndex("field"));config.enName=csvGetString(csv,this.GetHeadIndex("enName"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.tip=csvGetString(csv,this.GetHeadIndex("tip"));this.addConfig(config)};return PropertyConfigReaderStruct}(configs.CsvConfigRender));configs.PropertyConfigReaderStruct=PropertyConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var PropertyConfigReader=(function(_super){__extends(PropertyConfigReader,_super);function PropertyConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}PropertyConfigReader.prototype.getPropertyWithType=function(type){var result=new Array();var list=this.getConfigList();for(var i=0;i<list.length;i++){if(list[i].type==type){result.push(list[i])}}return result};PropertyConfigReader.prototype.getPropertyList=function(){var result=new Array();var list=this.getConfigList();for(var i=0;i<list.length;i++){if(list[i].type==6){result.push(list[i].id)}}return result};PropertyConfigReader.prototype.getPropertyConfigList=function(){var result=new Array();var list=this.getConfigList();for(var i=0;i<list.length;i++){if(list[i].type==6){result.push(list[i])}}return result};PropertyConfigReader.prototype.GetPropertyName=function(propertyId){var cfg=this.getConfig(propertyId);if(cfg){return cfg.name}return""};return PropertyConfigReader}(configs.PropertyConfigReaderStruct));configs.PropertyConfigReader=PropertyConfigReader})(configs||(configs={}));var configs;(function(configs){var RandomNameConfigReaderStruct=(function(_super){__extends(RandomNameConfigReaderStruct,_super);function RandomNameConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="RandomName";return _this}RandomNameConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.RandomNameConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.text=csvGetString(csv,this.GetHeadIndex("text"));this.addConfig(config)};return RandomNameConfigReaderStruct}(configs.CsvConfigRender));configs.RandomNameConfigReaderStruct=RandomNameConfigReaderStruct})(configs||(configs={}));configs.RandomNameConfigReader=configs.RandomNameConfigReaderStruct;var configs;(function(configs){var RandomSurnameConfigReaderStruct=(function(_super){__extends(RandomSurnameConfigReaderStruct,_super);function RandomSurnameConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="RandomSurname";return _this}RandomSurnameConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.RandomSurnameConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.text=csvGetString(csv,this.GetHeadIndex("text"));this.addConfig(config)};return RandomSurnameConfigReaderStruct}(configs.CsvConfigRender));configs.RandomSurnameConfigReaderStruct=RandomSurnameConfigReaderStruct})(configs||(configs={}));configs.RandomSurnameConfigReader=configs.RandomSurnameConfigReaderStruct;var configs;(function(configs){var RechargeConfigReaderStruct=(function(_super){__extends(RechargeConfigReaderStruct,_super);function RechargeConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Recharge";return _this}RechargeConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.RechargeConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.product_name=csvGetString(csv,this.GetHeadIndex("product_name"));config.product_id=csvGetString(csv,this.GetHeadIndex("product_id"));config.cost_dollar=csvGetFloat(csv,this.GetHeadIndex("cost_dollar"));config.item=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("item")));config.gift=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("gift")));config._double=csvGetInt(csv,this.GetHeadIndex("double"));config.go=csvGetInt(csv,this.GetHeadIndex("go"));config.term=csvGetInt(csv,this.GetHeadIndex("term"));config.is_show=csvGetBoolean(csv,this.GetHeadIndex("is_show"));config.limit=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("limit")));this.addConfig(config)};return RechargeConfigReaderStruct}(configs.CsvConfigRender));configs.RechargeConfigReaderStruct=RechargeConfigReaderStruct})(configs||(configs={}));configs.RechargeConfigReader=configs.RechargeConfigReaderStruct;var configs;(function(configs){var RoadshowConfigReaderStruct=(function(_super){__extends(RoadshowConfigReaderStruct,_super);function RoadshowConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Roadshow";return _this}RoadshowConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.RoadshowConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.compere_type=csvGetInt(csv,this.GetHeadIndex("compere_type"));config.content=csvGetString(csv,this.GetHeadIndex("content"));config.remaks=csvGetString(csv,this.GetHeadIndex("remaks"));config.content_duration=csvGetInt(csv,this.GetHeadIndex("content_duration"));config.act=csvGetString(csv,this.GetHeadIndex("act"));config.act_duration=csvGetInt(csv,this.GetHeadIndex("act_duration"));this.addConfig(config)};return RoadshowConfigReaderStruct}(configs.CsvConfigRender));configs.RoadshowConfigReaderStruct=RoadshowConfigReaderStruct})(configs||(configs={}));configs.RoadshowConfigReader=configs.RoadshowConfigReaderStruct;var configs;(function(configs){var SecretaryConfigReaderStruct=(function(_super){__extends(SecretaryConfigReaderStruct,_super);function SecretaryConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Secretary";return _this}SecretaryConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.SecretaryConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.key=csvGetString(csv,this.GetHeadIndex("key"));config.zh_cn_info=csvGetString(csv,this.GetHeadIndex("zh_cn_info"));config.par=csvGetInt(csv,this.GetHeadIndex("par"));config.description=csvGetString(csv,this.GetHeadIndex("description"));this.addConfig(config)};return SecretaryConfigReaderStruct}(configs.CsvConfigRender));configs.SecretaryConfigReaderStruct=SecretaryConfigReaderStruct})(configs||(configs={}));configs.SecretaryConfigReader=configs.SecretaryConfigReaderStruct;var configs;(function(configs){var SecretaryGiftConfigReaderStruct=(function(_super){__extends(SecretaryGiftConfigReaderStruct,_super);function SecretaryGiftConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="SecretaryGift";return _this}SecretaryGiftConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.SecretaryGiftConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.items=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("items")));config.info=csvGetString(csv,this.GetHeadIndex("info"));this.addConfig(config)};return SecretaryGiftConfigReaderStruct}(configs.CsvConfigRender));configs.SecretaryGiftConfigReaderStruct=SecretaryGiftConfigReaderStruct})(configs||(configs={}));configs.SecretaryGiftConfigReader=configs.SecretaryGiftConfigReaderStruct;var configs;(function(configs){var SecretaryTypeConfigReaderStruct=(function(_super){__extends(SecretaryTypeConfigReaderStruct,_super);function SecretaryTypeConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="SecretaryType";return _this}SecretaryTypeConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.SecretaryTypeConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.sex=csvGetString(csv,this.GetHeadIndex("sex"));config.pic=csvGetString(csv,this.GetHeadIndex("pic"));config.picid=csvGetInt(csv,this.GetHeadIndex("picid"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));this.addConfig(config)};return SecretaryTypeConfigReaderStruct}(configs.CsvConfigRender));configs.SecretaryTypeConfigReaderStruct=SecretaryTypeConfigReaderStruct})(configs||(configs={}));configs.SecretaryTypeConfigReader=configs.SecretaryTypeConfigReaderStruct;var configs;(function(configs){var ServerRankingListConfigReaderStruct=(function(_super){__extends(ServerRankingListConfigReaderStruct,_super);function ServerRankingListConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="ServerRankingList";return _this}ServerRankingListConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ServerRankingListConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.rank=toIntArray(csvGetString(csv,this.GetHeadIndex("rank")));config.normal_reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("normal_reward")));config.spec_reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("spec_reward")));this.addConfig(config)};return ServerRankingListConfigReaderStruct}(configs.CsvConfigRender));configs.ServerRankingListConfigReaderStruct=ServerRankingListConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var ServerRankingListConfigReader=(function(_super){__extends(ServerRankingListConfigReader,_super);function ServerRankingListConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(ServerRankingListConfigReader.prototype,"weekRewardList",{get:function(){var list=[];var cfglist=this.getConfigList();for(var index=0;index<cfglist.length;index++){var cfg=cfglist[index];if(cfg){list.push(new Games.ServerRewardItemData(cfg.rank,cfg.spec_reward))}}list.sort(function(a,b){return a.rank[0]-b.rank[0]});return list},enumerable:true,configurable:true});Object.defineProperty(ServerRankingListConfigReader.prototype,"dailyRewardList",{get:function(){var list=[];var cfglist=this.getConfigList();for(var index=0;index<cfglist.length;index++){var cfg=cfglist[index];if(cfg){list.push(new Games.ServerRewardItemData(cfg.rank,cfg.normal_reward))}}list.sort(function(a,b){return a.rank[0]-b.rank[0]});return list},enumerable:true,configurable:true});ServerRankingListConfigReader.prototype.GetRewards=function(rank,isWeek){var list=this.getConfigList();for(var index=0;index<list.length;index++){var cfg=list[index];if(cfg.rank.length==1&&cfg.rank[0]==rank){return isWeek?cfg.spec_reward:cfg.normal_reward}else{if(cfg.rank.length==2&&cfg.rank[0]<=rank&&cfg.rank[1]>=rank){return isWeek?cfg.spec_reward:cfg.normal_reward}}}return[]};return ServerRankingListConfigReader}(configs.ServerRankingListConfigReaderStruct));configs.ServerRankingListConfigReader=ServerRankingListConfigReader})(configs||(configs={}));var configs;(function(configs){var SettingDefaultConfigReaderStruct=(function(_super){__extends(SettingDefaultConfigReaderStruct,_super);function SettingDefaultConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="SettingDefault";return _this}SettingDefaultConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.SettingDefaultConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.key=csvGetString(csv,this.GetHeadIndex("key"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config._default=csvGetInt(csv,this.GetHeadIndex("default"));config._switch=csvGetBoolean(csv,this.GetHeadIndex("switch"));config.popup=csvGetString(csv,this.GetHeadIndex("popup"));this.addConfig(config)};return SettingDefaultConfigReaderStruct}(configs.CsvConfigRender));configs.SettingDefaultConfigReaderStruct=SettingDefaultConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var SettingDefaultConfigReader=(function(_super){__extends(SettingDefaultConfigReader,_super);function SettingDefaultConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.keyDict=new Dictionary();_this.inListConfigs=[];return _this}SettingDefaultConfigReader.prototype.onGameLoadedAll=function(){var list=this.getConfigList();for(var i=0;i<list.length;i++){this.keyDict.add(list[i].key,list[i])}};SettingDefaultConfigReader.prototype.getConfig=function(key){if(this.keyDict.hasKey(key)){return this.keyDict.getValue(key)}return _super.prototype.getConfig.call(this,key)};SettingDefaultConfigReader.prototype.getConfigInList=function(){if(this.inListConfigs.length<=0){var list=this.getConfigList();for(var index=0;index<list.length;index++){var element=list[index];if(element.id!=3&&element.id!=4&&element.id!=5&&element.id!=7&&element.id!=8){this.inListConfigs.push(element)}}}return this.inListConfigs};return SettingDefaultConfigReader}(configs.SettingDefaultConfigReaderStruct));configs.SettingDefaultConfigReader=SettingDefaultConfigReader})(configs||(configs={}));var configs;(function(configs){var ShopConfigReaderStruct=(function(_super){__extends(ShopConfigReaderStruct,_super);function ShopConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Shop";return _this}ShopConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.ShopConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.item=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("item")));config.cost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("cost")));config.period=csvGetString(csv,this.GetHeadIndex("period"));config.limit=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("limit")));config.special=csvGetInt(csv,this.GetHeadIndex("special"));config.delay=csvGetInt(csv,this.GetHeadIndex("delay"));this.addConfig(config)};return ShopConfigReaderStruct}(configs.CsvConfigRender));configs.ShopConfigReaderStruct=ShopConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var ShopConfigReader=(function(_super){__extends(ShopConfigReader,_super);function ShopConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}ShopConfigReader.prototype.GetCfgByType=function(type){var list=[];for(var key in this.configs){if(this.configs.hasOwnProperty(key)){var cfg=this.configs[key];if(cfg.type==type){list.push(cfg)}}}return list};ShopConfigReader.prototype.SetPeroid=function(id,time){var cfg=this.getConfig(id);if(cfg){cfg.period=time}};return ShopConfigReader}(configs.ShopConfigReaderStruct));configs.ShopConfigReader=ShopConfigReader})(configs||(configs={}));var configs;(function(configs){var SkillConfigReaderStruct=(function(_super){__extends(SkillConfigReaderStruct,_super);function SkillConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Skill";return _this}SkillConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.SkillConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.group_id=csvGetInt(csv,this.GetHeadIndex("group_id"));config.lv=csvGetInt(csv,this.GetHeadIndex("lv"));config.exp=csvGetInt(csv,this.GetHeadIndex("exp"));config.en_name=csvGetString(csv,this.GetHeadIndex("en_name"));config.cn_name=csvGetString(csv,this.GetHeadIndex("cn_name"));config.en_tips=csvGetString(csv,this.GetHeadIndex("en_tips"));config.cn_tips=csvGetString(csv,this.GetHeadIndex("cn_tips"));config.en_effecttext=csvGetString(csv,this.GetHeadIndex("en_effecttext"));config.cn_effecttext=csvGetString(csv,this.GetHeadIndex("cn_effecttext"));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.trigger=toIntArray(csvGetString(csv,this.GetHeadIndex("trigger")));config.effect=csvGetInt(csv,this.GetHeadIndex("effect"));config.value=csvGetFloat(csv,this.GetHeadIndex("value"));config.stamina=csvGetInt(csv,this.GetHeadIndex("stamina"));this.addConfig(config)};return SkillConfigReaderStruct}(configs.CsvConfigRender));configs.SkillConfigReaderStruct=SkillConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var SkillConfigReader=(function(_super){__extends(SkillConfigReader,_super);function SkillConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}SkillConfigReader.prototype.addConfig=function(config){_super.prototype.addConfig.call(this,config);if(this.groups==null){this.groups=new Dictionary()}var skills;if(this.groups.hasKey(config.group_id)){skills=this.groups.getValue(config.group_id)}else{skills=new Dictionary();this.groups.add(config.group_id,skills)}skills.add(config.lv,config)};SkillConfigReader.prototype.getConfigByGroupIdAndLv=function(groupId,lv){var config;if(this.groups.hasKey(groupId)){var skills=this.groups.getValue(groupId);config=skills.getValue(lv)}return config};return SkillConfigReader}(configs.SkillConfigReaderStruct));configs.SkillConfigReader=SkillConfigReader})(configs||(configs={}));var configs;(function(configs){var SkillEffectConfigReaderStruct=(function(_super){__extends(SkillEffectConfigReaderStruct,_super);function SkillEffectConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="SkillEffect";return _this}SkillEffectConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.SkillEffectConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.effect=csvGetInt(csv,this.GetHeadIndex("effect"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return SkillEffectConfigReaderStruct}(configs.CsvConfigRender));configs.SkillEffectConfigReaderStruct=SkillEffectConfigReaderStruct})(configs||(configs={}));configs.SkillEffectConfigReader=configs.SkillEffectConfigReaderStruct;var configs;(function(configs){var SkillTriggerConfigReaderStruct=(function(_super){__extends(SkillTriggerConfigReaderStruct,_super);function SkillTriggerConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="SkillTrigger";return _this}SkillTriggerConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.SkillTriggerConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.trigger=csvGetInt(csv,this.GetHeadIndex("trigger"));config.value=csvGetInt(csv,this.GetHeadIndex("value"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return SkillTriggerConfigReaderStruct}(configs.CsvConfigRender));configs.SkillTriggerConfigReaderStruct=SkillTriggerConfigReaderStruct})(configs||(configs={}));configs.SkillTriggerConfigReader=configs.SkillTriggerConfigReaderStruct;var configs;(function(configs){var SpeakConfigReaderStruct=(function(_super){__extends(SpeakConfigReaderStruct,_super);function SpeakConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Speak";return _this}SpeakConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.SpeakConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.en_speak=csvGetString(csv,this.GetHeadIndex("en_speak"));config.cn_speak=csvGetString(csv,this.GetHeadIndex("cn_speak"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return SpeakConfigReaderStruct}(configs.CsvConfigRender));configs.SpeakConfigReaderStruct=SpeakConfigReaderStruct})(configs||(configs={}));configs.SpeakConfigReader=configs.SpeakConfigReaderStruct;var configs;(function(configs){var StarConConfigReaderStruct=(function(_super){__extends(StarConConfigReaderStruct,_super);function StarConConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="StarCon";return _this}StarConConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.StarConConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.story_star_con=csvGetInt(csv,this.GetHeadIndex("story_star_con"));config.att_con=csvGetInt(csv,this.GetHeadIndex("att_con"));config.count=csvGetInt(csv,this.GetHeadIndex("count"));config.evaluate_protect=csvGetInt(csv,this.GetHeadIndex("evaluate_protect"));config.opinions_protect=csvGetInt(csv,this.GetHeadIndex("opinions_protect"));this.addConfig(config)};return StarConConfigReaderStruct}(configs.CsvConfigRender));configs.StarConConfigReaderStruct=StarConConfigReaderStruct})(configs||(configs={}));configs.StarConConfigReader=configs.StarConConfigReaderStruct;var configs;(function(configs){var StoryCharactersConfigReaderStruct=(function(_super){__extends(StoryCharactersConfigReaderStruct,_super);function StoryCharactersConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="StoryCharacters";return _this}StoryCharactersConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.StoryCharactersConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.story_id=csvGetInt(csv,this.GetHeadIndex("story_id"));config.character_num=csvGetInt(csv,this.GetHeadIndex("character_num"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.type_pic=csvGetInt(csv,this.GetHeadIndex("type_pic"));config.sex=csvGetInt(csv,this.GetHeadIndex("sex"));config.country=csvGetInt(csv,this.GetHeadIndex("country"));config.show_type=csvGetInt(csv,this.GetHeadIndex("show_type"));config.age_type=csvGetInt(csv,this.GetHeadIndex("age_type"));config.tags=toIntArray(csvGetString(csv,this.GetHeadIndex("tags")));config.effect=toIntArray(csvGetString(csv,this.GetHeadIndex("effect")));config.zh_cn_introduction=csvGetString(csv,this.GetHeadIndex("zh_cn_introduction"));this.addConfig(config)};return StoryCharactersConfigReaderStruct}(configs.CsvConfigRender));configs.StoryCharactersConfigReaderStruct=StoryCharactersConfigReaderStruct})(configs||(configs={}));configs.StoryCharactersConfigReader=configs.StoryCharactersConfigReaderStruct;var configs;(function(configs){var StoryConfigReaderStruct=(function(_super){__extends(StoryConfigReaderStruct,_super);function StoryConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Story";return _this}StoryConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.StoryConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.story_num=csvGetInt(csv,this.GetHeadIndex("story_num"));config.stack_sort=csvGetInt(csv,this.GetHeadIndex("stack_sort"));config.zh_cn_story_name=csvGetString(csv,this.GetHeadIndex("zh_cn_story_name"));config.name_tips=csvGetString(csv,this.GetHeadIndex("name_tips"));config.poster_name=csvGetInt(csv,this.GetHeadIndex("poster_name"));config.zh_cn_introduction=csvGetString(csv,this.GetHeadIndex("zh_cn_introduction"));config.introduction_tips=csvGetString(csv,this.GetHeadIndex("introduction_tips"));config.length=csvGetInt(csv,this.GetHeadIndex("length"));config.cost=csvGetInt(csv,this.GetHeadIndex("cost"));config.stars=csvGetInt(csv,this.GetHeadIndex("stars"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.tags=toIntArray(csvGetString(csv,this.GetHeadIndex("tags")));config.hidden_tags=toIntArray(csvGetString(csv,this.GetHeadIndex("hidden_tags")));config.shoot_type=csvGetInt(csv,this.GetHeadIndex("shoot_type"));config.property=toIntArray(csvGetString(csv,this.GetHeadIndex("property")));config.target_mark=csvGetBoolean(csv,this.GetHeadIndex("target_mark"));config.male_percent=csvGetInt(csv,this.GetHeadIndex("male_percent"));config.female_percent=csvGetInt(csv,this.GetHeadIndex("female_percent"));config.child_percent=csvGetInt(csv,this.GetHeadIndex("child_percent"));config.reward=configs.DTStoryEffect.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));config.sequel_mark=csvGetBoolean(csv,this.GetHeadIndex("sequel_mark"));config.random_name=csvGetInt(csv,this.GetHeadIndex("random_name"));config.box_office_story_con=csvGetInt(csv,this.GetHeadIndex("box_office_story_con"));this.addConfig(config)};return StoryConfigReaderStruct}(configs.CsvConfigRender));configs.StoryConfigReaderStruct=StoryConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var StoryConfigReader=(function(_super){__extends(StoryConfigReader,_super);function StoryConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}StoryConfigReader.prototype.GetPoster=function(id){var cfg=this.getConfig(id);if(cfg){return Game.config.avatar.GetIconUrl(cfg.poster_name)}};StoryConfigReader.prototype.GetStar=function(id){var cfg=this.getConfig(id);if(cfg){return cfg.starNumber}};return StoryConfigReader}(configs.StoryConfigReaderStruct));configs.StoryConfigReader=StoryConfigReader})(configs||(configs={}));var configs;(function(configs){var StoryGoalsConfigReaderStruct=(function(_super){__extends(StoryGoalsConfigReaderStruct,_super);function StoryGoalsConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="StoryGoals";return _this}StoryGoalsConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.StoryGoalsConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.storyid=csvGetInt(csv,this.GetHeadIndex("storyid"));config.rank=csvGetInt(csv,this.GetHeadIndex("rank"));config.property1=csvGetInt(csv,this.GetHeadIndex("property1"));config.value1=csvGetInt(csv,this.GetHeadIndex("value1"));config.property2=csvGetInt(csv,this.GetHeadIndex("property2"));config.value2=csvGetInt(csv,this.GetHeadIndex("value2"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));config.info=csvGetString(csv,this.GetHeadIndex("info"));this.addConfig(config)};return StoryGoalsConfigReaderStruct}(configs.CsvConfigRender));configs.StoryGoalsConfigReaderStruct=StoryGoalsConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var StoryGoalsConfigReader=(function(_super){__extends(StoryGoalsConfigReader,_super);function StoryGoalsConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}StoryGoalsConfigReader.prototype.getGoalTarget=function(storyId,rank){var list=this.getConfigList();for(var i=0;i<list.length;i++){if(list[i].storyid===storyId&&list[i].rank===rank){return list[i]}}return null};return StoryGoalsConfigReader}(configs.StoryGoalsConfigReaderStruct));configs.StoryGoalsConfigReader=StoryGoalsConfigReader})(configs||(configs={}));var configs;(function(configs){var StorylineConfigReaderStruct=(function(_super){__extends(StorylineConfigReaderStruct,_super);function StorylineConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Storyline";return _this}StorylineConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.StorylineConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.trigger=csvGetInt(csv,this.GetHeadIndex("trigger"));config.value=csvGetInt(csv,this.GetHeadIndex("value"));config.guide_type=csvGetInt(csv,this.GetHeadIndex("guide_type"));config.guide_id=csvGetInt(csv,this.GetHeadIndex("guide_id"));config.group=csvGetInt(csv,this.GetHeadIndex("group"));config.order=csvGetInt(csv,this.GetHeadIndex("order"));config.type_id=csvGetString(csv,this.GetHeadIndex("type_id"));config.ui_type=csvGetInt(csv,this.GetHeadIndex("ui_type"));config.cn_ui_content=csvGetString(csv,this.GetHeadIndex("cn_ui_content"));config.en_ui_content=csvGetString(csv,this.GetHeadIndex("en_ui_content"));config.cn_content=csvGetString(csv,this.GetHeadIndex("cn_content"));config.en_content=csvGetString(csv,this.GetHeadIndex("en_content"));config.cn_name=csvGetString(csv,this.GetHeadIndex("cn_name"));config.en_name=csvGetString(csv,this.GetHeadIndex("en_name"));config.anchor=csvGetInt(csv,this.GetHeadIndex("anchor"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));this.addConfig(config)};return StorylineConfigReaderStruct}(configs.CsvConfigRender));configs.StorylineConfigReaderStruct=StorylineConfigReaderStruct})(configs||(configs={}));var configs;(function(configs_1){var StorylineConfigReader=(function(_super){__extends(StorylineConfigReader,_super);function StorylineConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.groups=[];return _this}StorylineConfigReader.prototype.addConfig=function(config){_super.prototype.addConfig.call(this,config);if(this.configDict==null){this.configDict=new Dictionary()}if(this.configOrderDict==null){this.configOrderDict=new Dictionary()}if(this.configTriggerDict==null){this.configTriggerDict=new Dictionary()}var list=this.configDict.getValue(config.group);if(list==null){list=new Array();this.configDict.add(config.group,list);this.groups.push(config.group)}list.push(config);list=this.configTriggerDict.getValue(config.trigger);if(list==null){list=new Array();this.configTriggerDict.add(config.trigger,list)}list.push(config);var dict=this.configOrderDict.getValue(config.group);if(dict==null){dict=new Dictionary();this.configOrderDict.add(config.group,dict)}dict.add(config.order,config)};StorylineConfigReader.prototype.onGameLoadedAll=function(){for(var index=0;index<this.groups.length;index++){var element=this.groups[index];var list=this.configDict.getValue(element);list.sort(function(a,b){return a.order-b.order})}};StorylineConfigReader.prototype.getNextStoryline=function(id){var config=this.getConfig(id);var nextConfig;if(config){var dict=this.configOrderDict.getValue(config.group);if(dict){nextConfig=dict.getValue(config.order+1)}}return nextConfig};StorylineConfigReader.prototype.getConfigByTrigger=function(type){var configs=this.configTriggerDict.getValue(type);return configs};StorylineConfigReader.prototype.getConfigsByTriggers=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var configs=[];for(var index=0;index<args.length;index++){var element=args[index];configs=configs.concat(this.configTriggerDict.getValue(element))}return configs};StorylineConfigReader.prototype.getConfigListByGroup=function(group){var configs=this.configDict.getValue(group);return configs};return StorylineConfigReader}(configs_1.StorylineConfigReaderStruct));configs_1.StorylineConfigReader=StorylineConfigReader})(configs||(configs={}));var configs;(function(configs){var StoryRateConfigReaderStruct=(function(_super){__extends(StoryRateConfigReaderStruct,_super);function StoryRateConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="StoryRate";return _this}StoryRateConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.StoryRateConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.rate=csvGetInt(csv,this.GetHeadIndex("rate"));this.addConfig(config)};return StoryRateConfigReaderStruct}(configs.CsvConfigRender));configs.StoryRateConfigReaderStruct=StoryRateConfigReaderStruct})(configs||(configs={}));configs.StoryRateConfigReader=configs.StoryRateConfigReaderStruct;var configs;(function(configs){var StoryRefreshPriceConfigReaderStruct=(function(_super){__extends(StoryRefreshPriceConfigReaderStruct,_super);function StoryRefreshPriceConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="StoryRefreshPrice";return _this}StoryRefreshPriceConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.StoryRefreshPriceConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.price=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("price")));this.addConfig(config)};return StoryRefreshPriceConfigReaderStruct}(configs.CsvConfigRender));configs.StoryRefreshPriceConfigReaderStruct=StoryRefreshPriceConfigReaderStruct})(configs||(configs={}));configs.StoryRefreshPriceConfigReader=configs.StoryRefreshPriceConfigReaderStruct;var configs;(function(configs){var StoryStackItemConfigReaderStruct=(function(_super){__extends(StoryStackItemConfigReaderStruct,_super);function StoryStackItemConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="StoryStackItem";return _this}StoryStackItemConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.StoryStackItemConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.num=csvGetInt(csv,this.GetHeadIndex("num"));config.rate=csvGetInt(csv,this.GetHeadIndex("rate"));this.addConfig(config)};return StoryStackItemConfigReaderStruct}(configs.CsvConfigRender));configs.StoryStackItemConfigReaderStruct=StoryStackItemConfigReaderStruct})(configs||(configs={}));configs.StoryStackItemConfigReader=configs.StoryStackItemConfigReaderStruct;var configs;(function(configs){var StoryStackSortConfigReaderStruct=(function(_super){__extends(StoryStackSortConfigReaderStruct,_super);function StoryStackSortConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="StoryStackSort";return _this}StoryStackSortConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.StoryStackSortConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.scripts=toIntArray(csvGetString(csv,this.GetHeadIndex("scripts")));config.rewards=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("rewards")));config.addition_scene=configs.DTStoryEffect.parseArray(csvGetString(csv,this.GetHeadIndex("addition_scene")));this.addConfig(config)};return StoryStackSortConfigReaderStruct}(configs.CsvConfigRender));configs.StoryStackSortConfigReaderStruct=StoryStackSortConfigReaderStruct})(configs||(configs={}));configs.StoryStackSortConfigReader=configs.StoryStackSortConfigReaderStruct;var configs;(function(configs){var StreetConfigReaderStruct=(function(_super){__extends(StreetConfigReaderStruct,_super);function StreetConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Street";return _this}StreetConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.StreetConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.en_name=csvGetString(csv,this.GetHeadIndex("en_name"));config.city_schedule=csvGetInt(csv,this.GetHeadIndex("city_schedule"));config.position=configs.DTVector2.parse(csvGetString(csv,this.GetHeadIndex("position")));config.spokesperson_sex=csvGetInt(csv,this.GetHeadIndex("spokesperson_sex"));config.spokesperson_Continents=csvGetInt(csv,this.GetHeadIndex("spokesperson_Continents"));config.spokesperson_type=csvGetInt(csv,this.GetHeadIndex("spokesperson_type"));config.spokesperson_age=csvGetInt(csv,this.GetHeadIndex("spokesperson_age"));config.spokesperson_scene=csvGetInt(csv,this.GetHeadIndex("spokesperson_scene"));config.spokesperson_performance=csvGetInt(csv,this.GetHeadIndex("spokesperson_performance"));config.spokesperson_plot=csvGetInt(csv,this.GetHeadIndex("spokesperson_plot"));config.spokesperson_art=csvGetInt(csv,this.GetHeadIndex("spokesperson_art"));config.spokesperson_entertainment=csvGetInt(csv,this.GetHeadIndex("spokesperson_entertainment"));config.publicize_schedule=csvGetInt(csv,this.GetHeadIndex("publicize_schedule"));config.publicize_cost=csvGetInt(csv,this.GetHeadIndex("publicize_cost"));config.once_reward=csvGetInt(csv,this.GetHeadIndex("once_reward"));config.finale_reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("finale_reward")));config.expect=csvGetInt(csv,this.GetHeadIndex("expect"));config.pre_id=csvGetInt(csv,this.GetHeadIndex("pre_id"));config.next_stage=csvGetInt(csv,this.GetHeadIndex("next_stage"));config.city=csvGetInt(csv,this.GetHeadIndex("city"));this.addConfig(config)};return StreetConfigReaderStruct}(configs.CsvConfigRender));configs.StreetConfigReaderStruct=StreetConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var StreetConfigReader=(function(_super){__extends(StreetConfigReader,_super);function StreetConfigReader(){return _super!==null&&_super.apply(this,arguments)||this}StreetConfigReader.prototype.GetRequire=function(id){var cfg=this.getConfig(id);if(cfg){return cfg.Require}return[]};return StreetConfigReader}(configs.StreetConfigReaderStruct));configs.StreetConfigReader=StreetConfigReader})(configs||(configs={}));var configs;(function(configs){var SysTimeConfigReaderStruct=(function(_super){__extends(SysTimeConfigReaderStruct,_super);function SysTimeConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="SysTime";return _this}SysTimeConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.SysTimeConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));config.hour=csvGetInt(csv,this.GetHeadIndex("hour"));config.min=csvGetInt(csv,this.GetHeadIndex("min"));config.sec=csvGetInt(csv,this.GetHeadIndex("sec"));this.addConfig(config)};return SysTimeConfigReaderStruct}(configs.CsvConfigRender));configs.SysTimeConfigReaderStruct=SysTimeConfigReaderStruct})(configs||(configs={}));configs.SysTimeConfigReader=configs.SysTimeConfigReaderStruct;var configs;(function(configs){var TaskConfigReaderStruct=(function(_super){__extends(TaskConfigReaderStruct,_super);function TaskConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Task";return _this}TaskConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.TaskConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.unlock=csvGetInt(csv,this.GetHeadIndex("unlock"));config.require=csvGetInt(csv,this.GetHeadIndex("require"));config.goal=csvGetInt(csv,this.GetHeadIndex("goal"));config.s_goal=csvGetInt(csv,this.GetHeadIndex("s_goal"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));config.Complete=csvGetInt(csv,this.GetHeadIndex("Complete"));config.pre_id=csvGetInt(csv,this.GetHeadIndex("pre_id"));config.guide=csvGetInt(csv,this.GetHeadIndex("guide"));this.addConfig(config)};return TaskConfigReaderStruct}(configs.CsvConfigRender));configs.TaskConfigReaderStruct=TaskConfigReaderStruct})(configs||(configs={}));configs.TaskConfigReader=configs.TaskConfigReaderStruct;var configs;(function(configs){var TestConfigReaderStruct=(function(_super){__extends(TestConfigReaderStruct,_super);function TestConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Test";return _this}TestConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.TestConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.age=csvGetInt(csv,this.GetHeadIndex("age"));config.intArray=toIntArray(csvGetString(csv,this.GetHeadIndex("intArray")));config.coin=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("coin")));config.items=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("items")));config.position=configs.DTVector2.parse(csvGetString(csv,this.GetHeadIndex("position")));config.story=configs.DTStoryNum.parse(csvGetString(csv,this.GetHeadIndex("story")));this.addConfig(config)};return TestConfigReaderStruct}(configs.CsvConfigRender));configs.TestConfigReaderStruct=TestConfigReaderStruct})(configs||(configs={}));configs.TestConfigReader=configs.TestConfigReaderStruct;var configs;(function(configs){var TurntableCompleteConfigReaderStruct=(function(_super){__extends(TurntableCompleteConfigReaderStruct,_super);function TurntableCompleteConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="TurntableComplete";return _this}TurntableCompleteConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.TurntableCompleteConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.start=toIntArray(csvGetString(csv,this.GetHeadIndex("start")));config.end=toIntArray(csvGetString(csv,this.GetHeadIndex("end")));config.Reception=csvGetInt(csv,this.GetHeadIndex("Reception"));config.actor1=toIntArray(csvGetString(csv,this.GetHeadIndex("actor1")));config.actor2=toIntArray(csvGetString(csv,this.GetHeadIndex("actor2")));config.integral=csvGetInt(csv,this.GetHeadIndex("integral"));config.reward=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("reward")));this.addConfig(config)};return TurntableCompleteConfigReaderStruct}(configs.CsvConfigRender));configs.TurntableCompleteConfigReaderStruct=TurntableCompleteConfigReaderStruct})(configs||(configs={}));configs.TurntableCompleteConfigReader=configs.TurntableCompleteConfigReaderStruct;var configs;(function(configs){var TurntableRewardConfigReaderStruct=(function(_super){__extends(TurntableRewardConfigReaderStruct,_super);function TurntableRewardConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="TurntableReward";return _this}TurntableRewardConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.TurntableRewardConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.itemtype=csvGetInt(csv,this.GetHeadIndex("itemtype"));config.itme=csvGetInt(csv,this.GetHeadIndex("itme"));config.quantity=csvGetInt(csv,this.GetHeadIndex("quantity"));config.weights=csvGetInt(csv,this.GetHeadIndex("weights"));this.addConfig(config)};return TurntableRewardConfigReaderStruct}(configs.CsvConfigRender));configs.TurntableRewardConfigReaderStruct=TurntableRewardConfigReaderStruct})(configs||(configs={}));configs.TurntableRewardConfigReader=configs.TurntableRewardConfigReaderStruct;var configs;(function(configs){var TypeConfigReaderStruct=(function(_super){__extends(TypeConfigReaderStruct,_super);function TypeConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Type";return _this}TypeConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.TypeConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.field=csvGetString(csv,this.GetHeadIndex("field"));config.enName=csvGetString(csv,this.GetHeadIndex("enName"));config.cnName=csvGetString(csv,this.GetHeadIndex("cnName"));config.tip=csvGetString(csv,this.GetHeadIndex("tip"));this.addConfig(config)};return TypeConfigReaderStruct}(configs.CsvConfigRender));configs.TypeConfigReaderStruct=TypeConfigReaderStruct})(configs||(configs={}));configs.TypeConfigReader=configs.TypeConfigReaderStruct;var configs;(function(configs){var UnlockConfigReaderStruct=(function(_super){__extends(UnlockConfigReaderStruct,_super);function UnlockConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Unlock";return _this}UnlockConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.UnlockConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.icon_type=csvGetInt(csv,this.GetHeadIndex("icon_type"));config.menu_id=csvGetInt(csv,this.GetHeadIndex("menu_id"));config.item_id=csvGetInt(csv,this.GetHeadIndex("item_id"));config.show_type=csvGetInt(csv,this.GetHeadIndex("show_type"));config.group=csvGetInt(csv,this.GetHeadIndex("group"));config.group_id=csvGetInt(csv,this.GetHeadIndex("group_id"));config.position=csvGetInt(csv,this.GetHeadIndex("position"));config.open_type=csvGetInt(csv,this.GetHeadIndex("open_type"));config.open_data=csvGetInt(csv,this.GetHeadIndex("open_data"));config.open_show=toIntArray(csvGetString(csv,this.GetHeadIndex("open_show")));config.plot=csvGetInt(csv,this.GetHeadIndex("plot"));config.time=csvGetInt(csv,this.GetHeadIndex("time"));config.close_type=csvGetInt(csv,this.GetHeadIndex("close_type"));config.close_data=csvGetInt(csv,this.GetHeadIndex("close_data"));config._continue=csvGetInt(csv,this.GetHeadIndex("continue"));config.is_new=csvGetBoolean(csv,this.GetHeadIndex("is_new"));config.zh_cn_touch_txt=csvGetString(csv,this.GetHeadIndex("zh_cn_touch_txt"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));this.addConfig(config)};return UnlockConfigReaderStruct}(configs.CsvConfigRender));configs.UnlockConfigReaderStruct=UnlockConfigReaderStruct})(configs||(configs={}));var configs;(function(configs){var UnlockConfigReader=(function(_super){__extends(UnlockConfigReader,_super);function UnlockConfigReader(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.menuConfigs=new Dictionary();_this.menuGroups=new Dictionary();_this.unlockGroups=new Dictionary();_this.sortMenus=new Dictionary();return _this}UnlockConfigReader.prototype.addConfig=function(config){_super.prototype.addConfig.call(this,config);this.menuConfigs.add(config.menu_id,config);var list,group;group=config.group;if(this.menuGroups.hasKey(group)){list=this.menuGroups.getValue(group)}else{list=[];this.menuGroups.add(group,list)}list.push(config);var openList,type;type=config.open_type;if(this.unlockGroups.hasKey(type)){openList=this.unlockGroups.getValue(type)}else{openList=[];this.unlockGroups.add(type,openList)}openList.push(config)};UnlockConfigReader.prototype.getUnlockConfig=function(menuId){return this.menuConfigs.getValue(menuId)};UnlockConfigReader.prototype.getBarMenus=function(barType){var list=this.menuGroups.getValue(barType);if(this.sortMenus.hasKey(barType)==false){list.sort(function(a,b){return a.group_id-b.group_id});this.sortMenus.add(barType,true)}return list};UnlockConfigReader.prototype.getUnlocks=function(openType){var list=this.unlockGroups.getValue(openType);return list};UnlockConfigReader.prototype.onGameLoadedAll=function(){};return UnlockConfigReader}(configs.UnlockConfigReaderStruct));configs.UnlockConfigReader=UnlockConfigReader})(configs||(configs={}));var configs;(function(configs){var VisitConfigReaderStruct=(function(_super){__extends(VisitConfigReaderStruct,_super);function VisitConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Visit";return _this}VisitConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.VisitConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.fans=csvGetInt(csv,this.GetHeadIndex("fans"));config.flower=csvGetInt(csv,this.GetHeadIndex("flower"));config.zh_cn_fans_speak0=csvGetString(csv,this.GetHeadIndex("zh_cn_fans_speak0"));config.zh_cn_actor_speak0=csvGetString(csv,this.GetHeadIndex("zh_cn_actor_speak0"));config.zh_cn_fans_speak1=csvGetString(csv,this.GetHeadIndex("zh_cn_fans_speak1"));config.zh_cn_actor_speak1=csvGetString(csv,this.GetHeadIndex("zh_cn_actor_speak1"));config.zh_cn_fans_speak2=csvGetString(csv,this.GetHeadIndex("zh_cn_fans_speak2"));config.zh_cn_actor_speak2=csvGetString(csv,this.GetHeadIndex("zh_cn_actor_speak2"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));config.expect=csvGetInt(csv,this.GetHeadIndex("expect"));this.addConfig(config)};return VisitConfigReaderStruct}(configs.CsvConfigRender));configs.VisitConfigReaderStruct=VisitConfigReaderStruct})(configs||(configs={}));configs.VisitConfigReader=configs.VisitConfigReaderStruct;var configs;(function(configs){var WeeklyQuestConfigReaderStruct=(function(_super){__extends(WeeklyQuestConfigReaderStruct,_super);function WeeklyQuestConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="WeeklyQuest";return _this}WeeklyQuestConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.WeeklyQuestConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.zh_cn_des=csvGetString(csv,this.GetHeadIndex("zh_cn_des"));config.target_score=csvGetInt(csv,this.GetHeadIndex("target_score"));config.target_days=csvGetInt(csv,this.GetHeadIndex("target_days"));config.reward=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("reward")));this.addConfig(config)};return WeeklyQuestConfigReaderStruct}(configs.CsvConfigRender));configs.WeeklyQuestConfigReaderStruct=WeeklyQuestConfigReaderStruct})(configs||(configs={}));configs.WeeklyQuestConfigReader=configs.WeeklyQuestConfigReaderStruct;var configs;(function(configs){var WelfareConfigReaderStruct=(function(_super){__extends(WelfareConfigReaderStruct,_super);function WelfareConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Welfare";return _this}WelfareConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.WelfareConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.type=csvGetInt(csv,this.GetHeadIndex("type"));config.icon=csvGetInt(csv,this.GetHeadIndex("icon"));config.icon_chosen=csvGetInt(csv,this.GetHeadIndex("icon_chosen"));config.zh_cn_activities_name=csvGetString(csv,this.GetHeadIndex("zh_cn_activities_name"));config.info=csvGetString(csv,this.GetHeadIndex("info"));this.addConfig(config)};return WelfareConfigReaderStruct}(configs.CsvConfigRender));configs.WelfareConfigReaderStruct=WelfareConfigReaderStruct})(configs||(configs={}));configs.WelfareConfigReader=configs.WelfareConfigReaderStruct;var configs;(function(configs){var WheelDropConfigReaderStruct=(function(_super){__extends(WheelDropConfigReaderStruct,_super);function WheelDropConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="WheelDrop";return _this}WheelDropConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.WheelDropConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.wheel_type=csvGetInt(csv,this.GetHeadIndex("wheel_type"));config.priority=csvGetInt(csv,this.GetHeadIndex("priority"));config.drop_item=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("drop_item")));config.label_id=csvGetInt(csv,this.GetHeadIndex("label_id"));config.weight=csvGetInt(csv,this.GetHeadIndex("weight"));this.addConfig(config)};return WheelDropConfigReaderStruct}(configs.CsvConfigRender));configs.WheelDropConfigReaderStruct=WheelDropConfigReaderStruct})(configs||(configs={}));configs.WheelDropConfigReader=configs.WheelDropConfigReaderStruct;var configs;(function(configs){var WriterAbilityConfigReaderStruct=(function(_super){__extends(WriterAbilityConfigReaderStruct,_super);function WriterAbilityConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="WriterAbility";return _this}WriterAbilityConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.WriterAbilityConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.advanced_level=csvGetInt(csv,this.GetHeadIndex("advanced_level"));config.increase=csvGetInt(csv,this.GetHeadIndex("increase"));config.train_time=csvGetInt(csv,this.GetHeadIndex("train_time"));config.train_cost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("train_cost")));this.addConfig(config)};return WriterAbilityConfigReaderStruct}(configs.CsvConfigRender));configs.WriterAbilityConfigReaderStruct=WriterAbilityConfigReaderStruct})(configs||(configs={}));configs.WriterAbilityConfigReader=configs.WriterAbilityConfigReaderStruct;var configs;(function(configs){var WriterAdaptEffectConfigReaderStruct=(function(_super){__extends(WriterAdaptEffectConfigReaderStruct,_super);function WriterAdaptEffectConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="WriterAdaptEffect";return _this}WriterAdaptEffectConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.WriterAdaptEffectConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_adapt=csvGetString(csv,this.GetHeadIndex("zh_cn_adapt"));config.zh_cn_adapt_des=csvGetString(csv,this.GetHeadIndex("zh_cn_adapt_des"));config.effect1=csvGetInt(csv,this.GetHeadIndex("effect1"));config.effect1_weight=csvGetInt(csv,this.GetHeadIndex("effect1_weight"));config.effect2=csvGetInt(csv,this.GetHeadIndex("effect2"));config.effect2_weight=csvGetInt(csv,this.GetHeadIndex("effect2_weight"));config.effect3=csvGetInt(csv,this.GetHeadIndex("effect3"));config.effect3_weight=csvGetInt(csv,this.GetHeadIndex("effect3_weight"));config.effect4=csvGetInt(csv,this.GetHeadIndex("effect4"));config.effect4_weight=csvGetInt(csv,this.GetHeadIndex("effect4_weight"));this.addConfig(config)};return WriterAdaptEffectConfigReaderStruct}(configs.CsvConfigRender));configs.WriterAdaptEffectConfigReaderStruct=WriterAdaptEffectConfigReaderStruct})(configs||(configs={}));configs.WriterAdaptEffectConfigReader=configs.WriterAdaptEffectConfigReaderStruct;var configs;(function(configs){var WriterConfigReaderStruct=(function(_super){__extends(WriterConfigReaderStruct,_super);function WriterConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="Writer";return _this}WriterConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.WriterConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.quality=csvGetInt(csv,this.GetHeadIndex("quality"));config.head=csvGetInt(csv,this.GetHeadIndex("head"));config.advanced_ability=csvGetInt(csv,this.GetHeadIndex("advanced_ability"));config.special_skill=toIntArray(csvGetString(csv,this.GetHeadIndex("special_skill")));config.skill_level=toIntArray(csvGetString(csv,this.GetHeadIndex("skill_level")));config.employee_cost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("employee_cost")));this.addConfig(config)};return WriterConfigReaderStruct}(configs.CsvConfigRender));configs.WriterConfigReaderStruct=WriterConfigReaderStruct})(configs||(configs={}));configs.WriterConfigReader=configs.WriterConfigReaderStruct;var configs;(function(configs){var WriterLevelConfigReaderStruct=(function(_super){__extends(WriterLevelConfigReaderStruct,_super);function WriterLevelConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="WriterLevel";return _this}WriterLevelConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.WriterLevelConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.zh_cn_name=csvGetString(csv,this.GetHeadIndex("zh_cn_name"));config.level=csvGetInt(csv,this.GetHeadIndex("level"));config.ability=csvGetInt(csv,this.GetHeadIndex("ability"));config.levelup_cost=configs.DTItemNum.parseArray(csvGetString(csv,this.GetHeadIndex("levelup_cost")));this.addConfig(config)};return WriterLevelConfigReaderStruct}(configs.CsvConfigRender));configs.WriterLevelConfigReaderStruct=WriterLevelConfigReaderStruct})(configs||(configs={}));configs.WriterLevelConfigReader=configs.WriterLevelConfigReaderStruct;var configs;(function(configs){var WriterSkillConfigReaderStruct=(function(_super){__extends(WriterSkillConfigReaderStruct,_super);function WriterSkillConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="WriterSkill";return _this}WriterSkillConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.WriterSkillConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.name=csvGetString(csv,this.GetHeadIndex("name"));config.skill_level=csvGetInt(csv,this.GetHeadIndex("skill_level"));config.cost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("cost")));config.req_level=csvGetInt(csv,this.GetHeadIndex("req_level"));config.label=toIntArray(csvGetString(csv,this.GetHeadIndex("label")));this.addConfig(config)};return WriterSkillConfigReaderStruct}(configs.CsvConfigRender));configs.WriterSkillConfigReaderStruct=WriterSkillConfigReaderStruct})(configs||(configs={}));configs.WriterSkillConfigReader=configs.WriterSkillConfigReaderStruct;var configs;(function(configs){var WriterStationConfigReaderStruct=(function(_super){__extends(WriterStationConfigReaderStruct,_super);function WriterStationConfigReaderStruct(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tableName="WriterStation";return _this}WriterStationConfigReaderStruct.prototype.ParseCsv=function(csv){var config=new configs.WriterStationConfig();config.id=csvGetInt(csv,this.GetHeadIndex("id"));config.tips=csvGetString(csv,this.GetHeadIndex("tips"));config.cost=configs.DTItemNum.parse(csvGetString(csv,this.GetHeadIndex("cost")));config.req_block=csvGetInt(csv,this.GetHeadIndex("req_block"));this.addConfig(config)};return WriterStationConfigReaderStruct}(configs.CsvConfigRender));configs.WriterStationConfigReaderStruct=WriterStationConfigReaderStruct})(configs||(configs={}));configs.WriterStationConfigReader=configs.WriterStationConfigReaderStruct;var fgui;(function(fgui){var Activity;(function(Activity){var ActivityMainStruct=(function(_super){__extends(ActivityMainStruct,_super);function ActivityMainStruct(){return _super.call(this)||this}ActivityMainStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","ActivityMain"))};ActivityMainStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_noActivityControl=this.getController("noActivityControl");this.m_topList=(this.getChild("topList"));this.m_title=(this.getChild("title"));this.m_noActivity=(this.getChild("noActivity"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_panel=(this.getChild("panel"))};ActivityMainStruct.URL="ui://9qou8rs7sga10";ActivityMainStruct.DependPackages=["Activity","Common","WarMovie"];return ActivityMainStruct}(fairygui.GComponent));Activity.ActivityMainStruct=ActivityMainStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var ActivityMain=(function(_super){__extends(ActivityMain,_super);function ActivityMain(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.delayShowTimeOutNum=-1;return _this}ActivityMain.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_topList.itemRenderer=Laya.Handler.create(this,this.initItem,null,false);this.m_topList.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem);this.m_closeBtn.onClick(this,this.onClickCloseBtn)};ActivityMain.prototype.onClickCloseBtn=function(){Game.moduleModel.secretary.curSelectKey=0;this.moduleWindow.menuBack()};ActivityMain.prototype.onWindowShow=function(){if(!this.comList){this.comList=new Dictionary()}Game.moduleModel.activity.sUpdateSign.add(this.updateSign,this);Game.moduleModel.activity.sUpdateSeven.add(this.updateSeven,this);Game.moduleModel.secretary.sGetLicenseUpdate.add(this.sGetLicenseUpdate,this);Game.protoOkEvent.add(ProtoEventKey.SecretaryData,this.updateSecretaryHandler,this);this.setData()};ActivityMain.prototype.onWindowHide=function(){if(this.delayShowTimeOutNum!==-1){clearTimeout(this.delayShowTimeOutNum)}Game.moduleModel.activity.sUpdateSign.remove(this.updateSign,this);Game.moduleModel.activity.sUpdateSeven.remove(this.updateSeven,this);Game.moduleModel.secretary.sGetLicenseUpdate.remove(this.sGetLicenseUpdate,this);Game.protoOkEvent.remove(ProtoEventKey.SecretaryData,this.updateSecretaryHandler,this);var panelList=this.comList.getValues();for(var i=0;i<panelList.length;i++){panelList[i].visible=false}};ActivityMain.prototype.sGetLicenseUpdate=function(){if(this.applyLicensePanel&&this.applyLicensePanel.visible){this.applyLicensePanel.delayShowFx()}};ActivityMain.prototype.updateSign=function(){GlobalModalWaiting.hide();if(this.signPanel&&this.signPanel!==null&&this.signPanel.visible){this.signPanel.signRewardTip()}this.m_topList.numItems=this.m_topList.numItems};ActivityMain.prototype.updateSeven=function(){GlobalModalWaiting.hide();if(this.sevenPanel&&this.sevenPanel!==null&&this.sevenPanel.visible){this.sevenPanel.onRefrush()}this.m_topList.numItems=this.m_topList.numItems};ActivityMain.prototype.updateSecretaryHandler=function(){if(this.secretaryPanel&&this.secretaryPanel.visible){this.secretaryPanel.setData()}if(this.applyLicensePanel&&this.applyLicensePanel.visible){this.applyLicensePanel.setData(this)}this.m_topList.numItems=this.m_topList.numItems;if(Game.moduleModel.secretary.curSelectKey>0&&Game.moduleModel.secretary.isForever){Game.moduleModel.secretary.openSecretary(Game.moduleModel.secretary.curSelectKey)}};ActivityMain.prototype.setData=function(num){var _this=this;if(num===void 0){num=0}if(this.moduleWindow.menuParameter.args.length>0){this.curSelectItem=this.moduleWindow.menuParameter.args[0];var ctl=Game.menu.getMenuCtl(this.moduleWindow.menuId);if(ctl&&ctl.backMenuId>0){var backCtrl=Game.menu.getMenuCtl(ctl.backMenuId);switch(backCtrl.menuId){case MenuId.Market:Game.moduleModel.secretary.curSelectKey=ESecretary.cityTimes;break;case MenuId.Official:Game.moduleModel.secretary.curSelectKey=ESecretary.workTimes;break;default:Game.moduleModel.secretary.curSelectKey=ESecretary.visitTimes;break}}else{Game.moduleModel.secretary.curSelectKey=ESecretary.visitTimes}}else{this.curSelectItem=num}if(this.moduleWindow.menuId===MenuId.Weal){if(!this.welfareConfig||this.welfareConfig===null){this.welfareConfig=Game.config.welfare.getConfigList()}this.m_title.text=TEXT.WelfTitle;this.m_topList.numItems=0;this.delayShowTimeOutNum=setTimeout(function(){_this.m_topList.numItems=_this.welfareConfig.length;_this.m_topList.addSelection(_this.curSelectItem);_this.openWelfSwitch()},100)}else{if(this.moduleWindow.menuId===MenuId.Event){this.m_title.text=TEXT.ActivityTitle;var sevenHave=Game.moduleModel.activity.sevenInit(null);if(sevenHave){this.m_noActivityControl.setSelectedIndex(0);if(!this.activityConfig||this.activityConfig===null){this.activityConfig=Game.config.activities.getConfigList()}for(var i=this.activityConfig.length-1;i>=0;i--){if(this.activityConfig[i].id===1){this.activityConfig.slice(i,1)}}this.m_topList.numItems=this.activityConfig.length;this.m_topList.addSelection(this.curSelectItem);this.openActivitySwitch()}else{this.m_topList.numItems=0;this.m_noActivityControl.setSelectedIndex(1)}}}};ActivityMain.prototype.openWelfSwitch=function(){var panelList=this.comList.getValues();for(var i=0;i<panelList.length;i++){panelList[i].visible=false}switch(this.curSelectItem){case 0:if(!this.signPanel||this.signPanel===null||!this.comList.hasKey("signPanel")){this.signPanel=fgui.Activity.SignPanel.createInstance();this.m_panel.addChild(this.signPanel);this.signPanel.setXY((this.m_panel.width-this.signPanel.width)/2,0);this.comList.add("signPanel",this.signPanel)}Game.moduleModel.activity.signInit(null);this.signPanel.setData();this.signPanel.height=this.m_panel.height;break;case 1:if(!this.secretaryPanel||this.secretaryPanel===null||!this.comList.hasKey("secretaryPanel")){this.secretaryPanel=fgui.Activity.SecretaryPanel.createInstance();this.m_panel.addChild(this.secretaryPanel);this.secretaryPanel.setXY((this.m_panel.width-this.secretaryPanel.width)/2,0);this.comList.add("secretaryPanel",this.secretaryPanel)}this.secretaryPanel.setData();break;case 2:if(!this.applyLicensePanel||this.applyLicensePanel===null||!this.comList.hasKey("applyLicensePanel")){this.applyLicensePanel=fgui.Activity.LicenseReq.createInstance();this.m_panel.addChild(this.applyLicensePanel);this.applyLicensePanel.setXY((this.m_panel.width-this.applyLicensePanel.width)/2,0);this.comList.add("applyLicensePanel",this.applyLicensePanel)}this.applyLicensePanel.setData(this);break}};ActivityMain.prototype.openActivitySwitch=function(){var panelList=this.comList.getValues();for(var i=0;i<panelList.length;i++){panelList[i].visible=false}switch(this.curSelectItem){case 0:if(!this.sevenPanel||this.sevenPanel===null||!this.comList.hasKey("sevenPanel")){this.sevenPanel=fgui.Activity.ActivitySeven.createInstance();this.m_panel.addChild(this.sevenPanel);this.sevenPanel.setXY((this.m_panel.width-this.sevenPanel.width)/2,0);this.comList.add("sevenPanel",this.sevenPanel)}this.sevenPanel.setData(this.activityConfig[this.curSelectItem]);this.sevenPanel.height=this.m_panel.height;break}};ActivityMain.prototype.initItem=function(index,obj){var item=obj;if(this.moduleWindow.menuId===MenuId.Weal){item.setDataWelf(this.welfareConfig[index])}else{if(this.moduleWindow.menuId===MenuId.Event){item.setData(this.activityConfig[index])}}};ActivityMain.prototype.onClickItem=function(obj){var index=this.m_topList.getChildIndex(obj);if(this.curSelectItem!==index){this.curSelectItem=index;if(this.moduleWindow.menuId===MenuId.Weal){this.openWelfSwitch()}else{if(this.moduleWindow.menuId===MenuId.Event){this.openActivitySwitch()}}}};return ActivityMain}(Activity.ActivityMainStruct));Activity.ActivityMain=ActivityMain})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var ActivitySevenStruct=(function(_super){__extends(ActivitySevenStruct,_super);function ActivitySevenStruct(){return _super.call(this)||this}ActivitySevenStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","ActivitySeven"))};ActivitySevenStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_rewardList=(this.getChild("rewardList"));this.m_tip1=(this.getChild("tip1"));this.m_tip2=(this.getChild("tip2"));this.m_tip1Val=(this.getChild("tip1Val"));this.m_tip2Val=(this.getChild("tip2Val"))};ActivitySevenStruct.URL="ui://9qou8rs7sga12";ActivitySevenStruct.DependPackages=["Activity"];return ActivitySevenStruct}(fairygui.GComponent));Activity.ActivitySevenStruct=ActivitySevenStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var ActivitySeven=(function(_super){__extends(ActivitySeven,_super);function ActivitySeven(){return _super!==null&&_super.apply(this,arguments)||this}ActivitySeven.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_rewardList.itemRenderer=Laya.Handler.create(this,this.initItem,null,false)};ActivitySeven.prototype.setData=function(data){this.sevenConfig=Game.moduleModel.activity.sevenConfig;var regTime=Game.time.timestampToTime(Game.time.registerSeconds);var nextTime=Game.time.timestampToTime(Game.time.registerSeconds+data.duration*24*3600);if(LangManager.Instance.lang==LangType.zh_cn){this.m_tip1Val.text=format(Game.config.msg.getConfig(MsgKey.day_duration).notice,regTime[1],regTime[2],nextTime[1],nextTime[2])}else{this.m_tip1Val.text=format(Game.config.msg.getConfig(MsgKey.day_duration).notice,TimeHelper.MonthText[regTime[1]-1],regTime[2],TimeHelper.MonthText[nextTime[1]-1],nextTime[2])}this.m_tip2Val.text=data.activities_info;this.m_rewardList.numItems=0;this.m_rewardList.numItems=this.sevenConfig.length;this.visible=true};ActivitySeven.prototype.onRefrush=function(){var reward=[];var sevenConf=this.sevenConfig[Game.moduleModel.activity.curGear];for(var i=0;i<sevenConf.special_reward.length;i++){reward.push(sevenConf.special_reward[i])}for(var i=0;i<sevenConf.reward.length;i++){reward.push(sevenConf.reward[i])}Game.system.getRewardText(reward,TEXT.StoryGetReward,0);this.m_rewardList.numItems=this.sevenConfig.length};ActivitySeven.prototype.initItem=function(index,obj){var item=obj;item.setData(this.sevenConfig[index],index)};return ActivitySeven}(Activity.ActivitySevenStruct));Activity.ActivitySeven=ActivitySeven})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var ActivityTopItemBtnStruct=(function(_super){__extends(ActivityTopItemBtnStruct,_super);function ActivityTopItemBtnStruct(){return _super.call(this)||this}ActivityTopItemBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","ActivityTopItemBtn"))};ActivityTopItemBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_iconSelect=(this.getChild("iconSelect"));this.m_title=(this.getChild("title"));this.m_red=(this.getChild("red"))};ActivityTopItemBtnStruct.URL="ui://9qou8rs7sga11";ActivityTopItemBtnStruct.DependPackages=["Activity","MainUI","Common"];return ActivityTopItemBtnStruct}(fairygui.GButton));Activity.ActivityTopItemBtnStruct=ActivityTopItemBtnStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var ActivityTopItemBtn=(function(_super){__extends(ActivityTopItemBtn,_super);function ActivityTopItemBtn(){return _super!==null&&_super.apply(this,arguments)||this}ActivityTopItemBtn.prototype.setData=function(data){this.m_title.text=data.activities_name;this.m_icon.icon=Games.WarLoadPic.getAvatarIcon(data.icon);this.m_iconSelect.icon=Games.WarLoadPic.getAvatarIcon(data.icon_chosen);switch(data.id){case 1:this.m_red.visible=Game.moduleModel.activity.waitForGetNum>0;this.m_red.m_num.text=Game.moduleModel.activity.waitForGetNum.toString();break}};ActivityTopItemBtn.prototype.setDataWelf=function(data){this.m_title.text=data.activities_name;this.m_icon.icon=Games.WarLoadPic.getAvatarIcon(data.icon);this.m_iconSelect.icon=Games.WarLoadPic.getAvatarIcon(data.icon_chosen);switch(data.type){case 1:this.m_red.visible=!Game.moduleModel.activity.curIsSign;this.m_red.m_num.text="1";break;case 2:this.m_red.visible=Game.moduleModel.secretary.isCanGetWelf;this.m_red.m_num.text="1";break;case 3:this.m_red.visible=Game.moduleModel.secretary.isCanGetLicense;this.m_red.m_num.text="1";break}};return ActivityTopItemBtn}(Activity.ActivityTopItemBtnStruct));Activity.ActivityTopItemBtn=ActivityTopItemBtn})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var DialogStruct=(function(_super){__extends(DialogStruct,_super);function DialogStruct(){return _super.call(this)||this}DialogStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","Dialog"))};DialogStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dir=this.getController("dir");this.m_bg=(this.getChild("bg"));this.m_arrowRight=(this.getChild("arrowRight"));this.m_arrowLeft=(this.getChild("arrowLeft"));this.m_bgShadow=(this.getChild("bgShadow"));this.m_title=(this.getChild("title"))};DialogStruct.URL="ui://9qou8rs7f9f11e";DialogStruct.DependPackages=["Activity","Common"];return DialogStruct}(fairygui.GLabel));Activity.DialogStruct=DialogStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var Dialog=(function(_super){__extends(Dialog,_super);function Dialog(){return _super!==null&&_super.apply(this,arguments)||this}return Dialog}(Activity.DialogStruct));Activity.Dialog=Dialog})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var EmptyPanelStruct=(function(_super){__extends(EmptyPanelStruct,_super);function EmptyPanelStruct(){return _super.call(this)||this}EmptyPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","emptyPanel"))};EmptyPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};EmptyPanelStruct.URL="ui://9qou8rs7mk2r1h";EmptyPanelStruct.DependPackages=["Activity","Common"];return EmptyPanelStruct}(fairygui.GComponent));Activity.EmptyPanelStruct=EmptyPanelStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var EmptyPanel=(function(_super){__extends(EmptyPanel,_super);function EmptyPanel(){return _super!==null&&_super.apply(this,arguments)||this}return EmptyPanel}(Activity.EmptyPanelStruct));Activity.EmptyPanel=EmptyPanel})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var LicenseReqStruct=(function(_super){__extends(LicenseReqStruct,_super);function LicenseReqStruct(){return _super.call(this)||this}LicenseReqStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","LicenseReq"))};LicenseReqStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_fxCt=this.getController("fxCt");this.m_tip1=(this.getChild("tip1"));this.m_tip2=(this.getChild("tip2"));this.m_tip3=(this.getChild("tip3"));this.m_bottomTip1=(this.getChild("bottomTip1"));this.m_BottomTip2=(this.getChild("BottomTip2"));this.m_timeTip=(this.getChild("timeTip"));this.m_okBtn=(this.getChild("okBtn"));this.m_dialog=(this.getChild("dialog"));this.m_fxBase=(this.getChild("fxBase"));this.m_fx=(this.getChild("fx"))};LicenseReqStruct.URL="ui://9qou8rs7ac07w";LicenseReqStruct.DependPackages=["Activity","WarMovie","Fx"];return LicenseReqStruct}(fairygui.GComponent));Activity.LicenseReqStruct=LicenseReqStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var LicenseReq=(function(_super){__extends(LicenseReq,_super);function LicenseReq(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.updateNum=0;return _this}LicenseReq.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_okBtn.onClick(this,this.onClickBtn)};LicenseReq.prototype.onClickBtn=function(){var _this=this;switch(this.state){case 0:if(Game.moduleModel.secretary.isForever){Game.moduleModel.secretary.isNewDayForLicense=false;Game.protosender.secretary.ApplyMovieLicence()}else{Game.system.confirmText(Game.config.msg.getConfig(MsgKey.license_apply_secretary_not_owned).notice,TEXT.SecretaryForeverAgent,null,function(){_this.activityMain.setData(1)},null,Game.config.msg.getTxt(MsgKey.go_to_hire),TEXT.ButtonCannel,false)}break;case 2:if(Game.moduleModel.warData.licenceNumInFilming<Game.config.global.getConfig(GlobalKey.Licence_Store_Max).value){this.m_fxCt.setSelectedIndex(1);Game.protosender.secretary.RewardMovieLicence()}else{Game.system.toastText(Game.config.msg.getConfig(MsgKey.license_limit).notice)}break;case 3:Game.system.toastText(Game.config.msg.getConfig(MsgKey.license_apply_limit).notice);break}};LicenseReq.prototype.delayShowFx=function(){var _this=this;this.m_fxCt.setSelectedIndex(1);if(this.m_fxBase&&this.m_fxBase.m_t0){this.m_fxBase.m_t0.play(Handler.create(this,function(){if(_this.m_fx&&_this.m_fx.m_t5555555){_this.m_fx.m_t5555555.play(Handler.create(_this,function(){_this.m_fxCt.setSelectedIndex(0)}),1)}}),1)}};LicenseReq.prototype.setData=function(activityMain){var _this=this;if(this.m_fxCt.selectedIndex!==0){this.m_fxCt.setSelectedIndex(0)}Game.moduleModel.secretary.secondUpdateActivity();if(this.updateNum>0){clearInterval(this.updateNum);this.updateNum=0}var maxNum=Game.config.secretary.getConfig(1).par+Game.config.blockLevel.getConfig(User.info.stall).certificate;this.activityMain=activityMain;this.secreData=Game.moduleModel.secretary.secretaryData;var curHaveGet=this.secreData.applyFrequency;if(Game.moduleModel.secretary.isNewDayForLicense){curHaveGet=0}if(this.secreData.isApply){this.state=1}else{if(curHaveGet<maxNum){this.state=0}else{this.state=3}}this.m_c1.setSelectedIndex(this.state);switch(this.state){case 0:this.m_tip3.text=Game.config.msg.getConfig(MsgKey.license_apply_table1).notice;this.m_okBtn.m_title.text=Game.config.msg.getConfig(MsgKey.license_apply_button1).notice;this.m_dialog.text=Game.config.msg.getConfig(MsgKey.license_apply_dialog1).notice;this.m_timeTip.text=format(Game.config.msg.getConfig(MsgKey.license_apply_limit_num).notice,maxNum-curHaveGet,maxNum);break;case 1:this.m_tip3.text=Game.config.msg.getConfig(MsgKey.license_apply_table2).notice;this.updateTime();this.updateNum=setInterval(function(){_this.updateTime()},1000);break;case 2:this.m_tip1.text=Game.config.msg.getConfig(MsgKey.license_apply_table3).notice;this.m_dialog.text=Game.config.msg.getConfig(MsgKey.license_apply_dialog3).notice;this.m_okBtn.m_title.text=Game.config.msg.getConfig(MsgKey.license_apply_button2).notice;this.m_timeTip.text=Game.config.msg.getConfig(MsgKey.license_apply_info).notice;this.m_timeTip.text=format(Game.config.msg.getConfig(MsgKey.license_apply_limit_num).notice,maxNum-curHaveGet,maxNum);break;case 3:this.m_tip2.text=Game.config.msg.getConfig(MsgKey.license_apply_table4).notice;this.m_okBtn.m_title.text=Game.config.msg.getConfig(MsgKey.license_apply_button1).notice;break}this.visible=true};LicenseReq.prototype.updateTime=function(){var overTime=Game.config.secretary.getConfig(11).par-Game.time.getSubSecondsPre(this.secreData.applyLastTime);if(overTime>0){var timeShow=TimeHelper.TimeFormat(overTime);this.m_dialog.text=format(Game.config.msg.getConfig(MsgKey.license_apply_dialog2).notice,overTime);this.m_bottomTip1.text=format(Game.config.msg.getConfig(MsgKey.license_apply_info).notice,timeShow);this.m_BottomTip2.text=timeShow}else{this.state=2;this.m_c1.setSelectedIndex(this.state);this.m_tip1.text=Game.config.msg.getConfig(MsgKey.license_apply_table3).notice;this.m_dialog.text=Game.config.msg.getConfig(MsgKey.license_apply_dialog3).notice;this.m_okBtn.m_title.text=Game.config.msg.getConfig(MsgKey.license_apply_button2).notice;this.m_timeTip.text=Game.config.msg.getConfig(MsgKey.license_apply_info).notice;var maxNum=Game.config.secretary.getConfig(1).par+Game.config.blockLevel.getConfig(User.info.stall).certificate;var curHaveGet=this.secreData.applyFrequency;if(Game.moduleModel.secretary.isNewDayForLicense){curHaveGet=maxNum}this.m_timeTip.text=format(Game.config.msg.getConfig(MsgKey.license_apply_limit_num).notice,curHaveGet,maxNum)}};return LicenseReq}(Activity.LicenseReqStruct));Activity.LicenseReq=LicenseReq})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var LoadPanelStruct=(function(_super){__extends(LoadPanelStruct,_super);function LoadPanelStruct(){return _super.call(this)||this}LoadPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","loadPanel"))};LoadPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};LoadPanelStruct.URL="ui://9qou8rs7ac07x";LoadPanelStruct.DependPackages=["Activity","Common"];return LoadPanelStruct}(fairygui.GComponent));Activity.LoadPanelStruct=LoadPanelStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var LoadPanel=(function(_super){__extends(LoadPanel,_super);function LoadPanel(){return _super!==null&&_super.apply(this,arguments)||this}return LoadPanel}(Activity.LoadPanelStruct));Activity.LoadPanel=LoadPanel})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SecretaryButtonStruct=(function(_super){__extends(SecretaryButtonStruct,_super);function SecretaryButtonStruct(){return _super.call(this)||this}SecretaryButtonStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","SecretaryButton"))};SecretaryButtonStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_Icon=(this.getChild("Icon"));this.m_title=(this.getChild("title"))};SecretaryButtonStruct.URL="ui://9qou8rs7rrsj7";SecretaryButtonStruct.DependPackages=["Activity","Common"];return SecretaryButtonStruct}(fairygui.GComponent));Activity.SecretaryButtonStruct=SecretaryButtonStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SecretaryButton=(function(_super){__extends(SecretaryButton,_super);function SecretaryButton(){return _super!==null&&_super.apply(this,arguments)||this}return SecretaryButton}(Activity.SecretaryButtonStruct));Activity.SecretaryButton=SecretaryButton})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SecretaryCommonStruct=(function(_super){__extends(SecretaryCommonStruct,_super);function SecretaryCommonStruct(){return _super.call(this)||this}SecretaryCommonStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","SecretaryCommon"))};SecretaryCommonStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"))};SecretaryCommonStruct.URL="ui://9qou8rs7rrsj8";SecretaryCommonStruct.DependPackages=["Activity","Common","Fx"];return SecretaryCommonStruct}(fairygui.GComponent));Activity.SecretaryCommonStruct=SecretaryCommonStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SecretaryCommon=(function(_super){__extends(SecretaryCommon,_super);function SecretaryCommon(){return _super!==null&&_super.apply(this,arguments)||this}return SecretaryCommon}(Activity.SecretaryCommonStruct));Activity.SecretaryCommon=SecretaryCommon})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SecretaryGiftButtonStruct=(function(_super){__extends(SecretaryGiftButtonStruct,_super);function SecretaryGiftButtonStruct(){return _super.call(this)||this}SecretaryGiftButtonStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","SecretaryGiftButton"))};SecretaryGiftButtonStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};SecretaryGiftButtonStruct.URL="ui://9qou8rs7rrsja";SecretaryGiftButtonStruct.DependPackages=["Activity","Common"];return SecretaryGiftButtonStruct}(fairygui.GButton));Activity.SecretaryGiftButtonStruct=SecretaryGiftButtonStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SecretaryGiftButton=(function(_super){__extends(SecretaryGiftButton,_super);function SecretaryGiftButton(){return _super!==null&&_super.apply(this,arguments)||this}return SecretaryGiftButton}(Activity.SecretaryGiftButtonStruct));Activity.SecretaryGiftButton=SecretaryGiftButton})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SecretaryGiftPanelStruct=(function(_super){__extends(SecretaryGiftPanelStruct,_super);function SecretaryGiftPanelStruct(){return _super.call(this)||this}SecretaryGiftPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","SecretaryGiftPanel"))};SecretaryGiftPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_des=(this.getChild("des"));this.m_list=(this.getChild("list"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_moneyBtn=(this.getChild("moneyBtn"))};SecretaryGiftPanelStruct.URL="ui://9qou8rs7rrsjb";SecretaryGiftPanelStruct.DependPackages=["Activity","Common"];return SecretaryGiftPanelStruct}(fairygui.GComponent));Activity.SecretaryGiftPanelStruct=SecretaryGiftPanelStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SecretaryGiftPanel=(function(_super){__extends(SecretaryGiftPanel,_super);function SecretaryGiftPanel(){return _super!==null&&_super.apply(this,arguments)||this}return SecretaryGiftPanel}(Activity.SecretaryGiftPanelStruct));Activity.SecretaryGiftPanel=SecretaryGiftPanel})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SecretaryPanelStruct=(function(_super){__extends(SecretaryPanelStruct,_super);function SecretaryPanelStruct(){return _super.call(this)||this}SecretaryPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","SecretaryPanel"))};SecretaryPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bodyIcon=(this.getChild("bodyIcon"));this.m_msgTitle=(this.getChild("msgTitle"));this.m_tipmsg=(this.getChild("tipmsg"));this.m_ownedGroup=(this.getChild("ownedGroup"));this.m_dailyBtn=(this.getChild("dailyBtn"));this.m_moneyBtn=(this.getChild("moneyBtn"));this.m_welfareBtn=(this.getChild("welfareBtn"));this.m_msgPanel=(this.getChild("msgPanel"));this.m_dialog=(this.getChild("dialog"));this.m_t0=this.getTransition("t0")};SecretaryPanelStruct.URL="ui://9qou8rs7rrsjc";SecretaryPanelStruct.DependPackages=["Activity","Common"];return SecretaryPanelStruct}(fairygui.GComponent));Activity.SecretaryPanelStruct=SecretaryPanelStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SecretaryPanel=(function(_super){__extends(SecretaryPanel,_super);function SecretaryPanel(){return _super!==null&&_super.apply(this,arguments)||this}SecretaryPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dailyBtn.onClick(this,this.onClickDailyBtn);this.m_welfareBtn.onClick(this,this.onClickWelfareBtn);this.m_moneyBtn.onClick(this,this.onClickMoneyBtn);var rechangeTxt=Game.config.recharge.getConfig(1008).rechangeDesc;if(BrowserDetect.isDebugRecharge){rechangeTxt="Free"}this.m_moneyBtn.text=rechangeTxt;this.m_welfareBtn.text=TEXT.Secretary_GetWelfare};SecretaryPanel.prototype.onClickMoneyBtn=function(){if(BrowserDetect.isDebugRecharge){Game.protosender.test.SetSecretaryStatus(ESecretaryType.had)}else{Game.protosender.pay.StartOrder(Game.config.recharge.getConfig(1008).id,1)}};SecretaryPanel.prototype.onClickDailyBtn=function(){var dailyConfig=Game.moduleModel.secretary.dailyGiftCfg;if(this.secretaryData.secretaryType==ESecretaryType.had){Game.moduleModel.secretary.preMoneyReward=true;if(Game.moduleModel.secretary.isMoneyGetReward){Game.system.openAwardsGift(dailyConfig.rechangeGifts,TEXT.Secretary_DailyGiftTitle,Game.config.msg.getTxt(MsgKey.secretary_bought),TEXT.Buyed,false)}else{var rechangeTxt=dailyConfig.rechangeDesc;Game.system.openAwardsGift(dailyConfig.rechangeGifts,TEXT.Secretary_DailyGiftTitle,TEXT.Secretary_GetRewardDailySecretary,rechangeTxt,true,function(){Game.protosender.pay.StartOrder(Game.config.recharge.getConfig(1009).id,1)})}}else{Game.system.openAwardsGift(dailyConfig.rechangeGifts,TEXT.Secretary_DailyGiftTitle,TEXT.Secretary_NeedBuySecretary,dailyConfig.rechangeDesc,true,function(){Game.system.toastMsg(MsgKey.sectrary_cannot_buy)})}};SecretaryPanel.prototype.onClickWelfareBtn=function(){if(Game.moduleModel.secretary.isFreeGetReward==false){Game.protosender.secretary.GetDailyReward()}};SecretaryPanel.prototype.setData=function(){var secretaryData=Game.moduleModel.secretary.secretaryData;this.giftConfig=Game.config.secretaryGift.getConfig(1001);if(secretaryData){if(secretaryData.secretaryType==ESecretaryType.had){this.m_msgTitle.text=Game.config.msg.getTxt(MsgKey.secretary_title2);this.m_ownedGroup.visible=true;this.m_welfareBtn.visible=true;this.m_moneyBtn.visible=false;var dailyItem=this.giftConfig.items[0];this.m_welfareBtn.m_text.text=dailyItem.itemNum+"";this.m_welfareBtn.m_icon.icon=dailyItem.itemIconUrl;if(Game.moduleModel.secretary.isFreeGetReward){this.m_welfareBtn.grayed=true;this.m_welfareBtn.enabled=false}else{this.m_welfareBtn.grayed=false;this.m_welfareBtn.enabled=true}if(Game.moduleModel.secretary.isMoneyGetReward){this.m_dailyBtn.grayed=true}else{this.m_dailyBtn.grayed=false}}else{this.m_msgTitle.text=Game.config.msg.getTxt(MsgKey.secretary_title1);this.m_ownedGroup.visible=false;this.m_welfareBtn.visible=false;this.m_moneyBtn.visible=true}this.m_tipmsg.text=Game.config.msg.getTxt(MsgKey.secretary_owned);var msg="";for(var id=2145;id<2155;id++){var config=Game.config.msg.getConfig(id);var info=config.notice;msg=msg+info+(id!=2154?"\n":"")}this.m_msgPanel.text=msg;this.m_dialog.text=Game.config.msg.getTxt(Math.random()>0.5?MsgKey.secretary_talk1:MsgKey.secretary_talk2);this.m_t0.play();var secretaryTypeConfig=void 0;if(User.info.sex==EUserSex.boy){secretaryTypeConfig=Game.config.secretaryType.getConfig(1002)}else{secretaryTypeConfig=Game.config.secretaryType.getConfig(1001)}this.m_bodyIcon.icon=secretaryTypeConfig.bodyIconUrl}this.secretaryData=secretaryData;this.visible=true};return SecretaryPanel}(Activity.SecretaryPanelStruct));Activity.SecretaryPanel=SecretaryPanel})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SecretaryWelfareMsgItemStruct=(function(_super){__extends(SecretaryWelfareMsgItemStruct,_super);function SecretaryWelfareMsgItemStruct(){return _super.call(this)||this}SecretaryWelfareMsgItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","SecretaryWelfareMsgItem"))};SecretaryWelfareMsgItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};SecretaryWelfareMsgItemStruct.URL="ui://9qou8rs7rrsjd";SecretaryWelfareMsgItemStruct.DependPackages=["Activity"];return SecretaryWelfareMsgItemStruct}(fairygui.GLabel));Activity.SecretaryWelfareMsgItemStruct=SecretaryWelfareMsgItemStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SecretaryWelfareMsgItem=(function(_super){__extends(SecretaryWelfareMsgItem,_super);function SecretaryWelfareMsgItem(){return _super!==null&&_super.apply(this,arguments)||this}return SecretaryWelfareMsgItem}(Activity.SecretaryWelfareMsgItemStruct));Activity.SecretaryWelfareMsgItem=SecretaryWelfareMsgItem})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SevenItemStruct=(function(_super){__extends(SevenItemStruct,_super);function SevenItemStruct(){return _super.call(this)||this}SevenItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","SevenItem"))};SevenItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_dayTip=(this.getChild("dayTip"));this.m_rewardList=(this.getChild("rewardList"));this.m_okTip=(this.getChild("okTip"));this.m_waitTip=(this.getChild("waitTip"));this.m_okBtn=(this.getChild("okBtn"))};SevenItemStruct.URL="ui://9qou8rs7sga13";SevenItemStruct.DependPackages=["Activity","Common"];return SevenItemStruct}(fairygui.GComponent));Activity.SevenItemStruct=SevenItemStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SevenItem=(function(_super){__extends(SevenItem,_super);function SevenItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.specialNum=0;return _this}SevenItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_waitTip.text=TEXT.NoGetReward;this.m_okBtn.m_title.text=TEXT.GetReward;this.m_rewardList.itemRenderer=Laya.Handler.create(this,this.initItem,null,false);this.m_rewardList.itemProvider=Handler.create(this,this.providerItem,null,false);this.m_okBtn.onClick(this,this.onClickOkBtn)};SevenItem.prototype.onClickOkBtn=function(){if(Game.moduleModel.activity.sevenIsOver){Game.system.toastText(Game.config.msg.getConfig(MsgKey.time_out_sevendays).notice)}else{GlobalModalWaiting.show();Game.moduleModel.activity.sendSevenGet(this.indexOf)}};SevenItem.prototype.setData=function(data,index){this.indexOf=index;this.curData=data;this.m_dayTip.text=format(Game.config.msg.getConfig(MsgKey.day_count).notice,this.curData.count);this.setItemInfData(this.curData.special_reward,this.curData.reward);this.m_rewardList.numItems=this.itemInf.length;this.m_c1.setSelectedIndex(Game.moduleModel.activity.curSevenStatus(data.count))};SevenItem.prototype.setItemInfData=function(special_reward,reward){this.itemInf=[];this.specialNum=0;for(var i=0;i<special_reward.length;i++){this.itemInf.push(special_reward[i]);this.specialNum++}for(var i=0;i<reward.length;i++){this.itemInf.push(reward[i])}};SevenItem.prototype.initItem=function(index,obj){var data=this.itemInf[index];var showSpecail=0;if(index<this.specialNum){showSpecail=1}if(data==null){return}var itemData=Games.ItemData.Create(data.itemId,data.itemNum);if(itemData.itemType==7){var item=obj;item.Render(itemData);if(showSpecail===1&&this.curData.image.length>1){item.m_special.icon=ImageConfig.getUrl(this.curData.image);item.m_showSpecial.setSelectedIndex(showSpecail)}else{item.m_showSpecial.setSelectedIndex(0)}}else{var item=obj;item.m_icon.icon=itemData.itemIconUrl;item.title=itemData.itemNumTxt;item.m_star.starNum=itemData.itemStar;item.PopupInfo=itemData.itemId;if(showSpecail===1&&this.curData.image.length>1){item.m_special.icon=ImageConfig.getUrl(this.curData.image);item.m_showSpecial.setSelectedIndex(showSpecail)}else{item.m_showSpecial.setSelectedIndex(0)}}};SevenItem.prototype.providerItem=function(index){var data=this.itemInf[index];if(data==null){return fgui.Common.CommonAssetItem_little.URL}var item=Games.ItemData.Create(data.itemId,data.itemNum);if(item.itemType==7){return fgui.Common.PactIcon_44.URL}else{return fgui.Common.CommonAssetItem_little.URL}};return SevenItem}(Activity.SevenItemStruct));Activity.SevenItem=SevenItem})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SignItemStruct=(function(_super){__extends(SignItemStruct,_super);function SignItemStruct(){return _super.call(this)||this}SignItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","SignItem"))};SignItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_c1=this.getController("c1");this.m_icon=(this.getChild("icon"));this.m_day=(this.getChild("day"));this.m_num=(this.getChild("num"));this.m_starList=(this.getChild("starList"))};SignItemStruct.URL="ui://9qou8rs7pytu6";SignItemStruct.DependPackages=["Activity","Common","PfSkin"];return SignItemStruct}(fairygui.GButton));Activity.SignItemStruct=SignItemStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SignItem=(function(_super){__extends(SignItem,_super);function SignItem(){return _super!==null&&_super.apply(this,arguments)||this}SignItem.prototype.setData=function(data){this.m_day.text=format(Game.config.msg.getConfig(MsgKey.day_count).notice,data.day);this.m_icon.icon=Game.config.item.getItemIcon(data.reward.itemId);this.m_num.text=data.reward.itemNum.toFixed(0);this.m_c1.setSelectedIndex(Game.moduleModel.activity.curSignStatus(data.day));this.m_starList.numItems=Game.config.item.getStarNum(data.reward.itemId)};return SignItem}(Activity.SignItemStruct));Activity.SignItem=SignItem})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SignItem2Struct=(function(_super){__extends(SignItem2Struct,_super);function SignItem2Struct(){return _super.call(this)||this}SignItem2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","SignItem2"))};SignItem2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_button=this.getController("button");this.m_day=(this.getChild("day"));this.m_starList=(this.getChild("starList"));this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"))};SignItem2Struct.URL="ui://9qou8rs7l1hm13";SignItem2Struct.DependPackages=["Activity","Common"];return SignItem2Struct}(fairygui.GButton));Activity.SignItem2Struct=SignItem2Struct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SignItem2=(function(_super){__extends(SignItem2,_super);function SignItem2(){return _super!==null&&_super.apply(this,arguments)||this}SignItem2.prototype.setData=function(data){this.m_day.text=format(Game.config.msg.getConfig(MsgKey.day_count).notice,data.day);this.m_icon.m_icon.url=Game.config.item.getItemIcon(data.reward.itemId);this.m_title.text=data.reward.itemNum.toFixed(0);this.m_c1.setSelectedIndex(Game.moduleModel.activity.curSignStatus(data.day));var itemConf=Game.config.item.getConfig(data.reward.itemId);this.m_starList.numItems=itemConf.itemStarNum};SignItem2.prototype.showPopup=function(button){fairygui.GRoot.inst.showPopup(this,button)};return SignItem2}(Activity.SignItem2Struct));Activity.SignItem2=SignItem2})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SignPanelStruct=(function(_super){__extends(SignPanelStruct,_super);function SignPanelStruct(){return _super.call(this)||this}SignPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","SignPanel"))};SignPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_noNext=this.getController("noNext");this.m_signList=(this.getChild("signList"));this.m_nextTip=(this.getChild("nextTip"));this.m_nextIcon=(this.getChild("nextIcon"));this.m_nextNum=(this.getChild("nextNum"));this.m_starList=(this.getChild("starList"));this.m_okBtn=(this.getChild("okBtn"))};SignPanelStruct.URL="ui://9qou8rs7pytu5";SignPanelStruct.DependPackages=["Activity","Common"];return SignPanelStruct}(fairygui.GComponent));Activity.SignPanelStruct=SignPanelStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var SignPanel=(function(_super){__extends(SignPanel,_super);function SignPanel(){return _super!==null&&_super.apply(this,arguments)||this}SignPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_signList.setVirtual();this.m_signList.itemRenderer=Laya.Handler.create(this,this.initItem,null,false);this.m_signList.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem);this.m_signList.itemProvider=Handler.create(this,this.providerItem,null,false);this.m_okBtn.onClick(this,this.onClickOkBtn,[-1])};SignPanel.prototype.onClickItem=function(obj){var index=this.m_signList.getChildIndex(obj);var realIndex=this.m_signList.childIndexToItemIndex(index);this.onClickOkBtn(realIndex,obj)};SignPanel.prototype.onClickOkBtn=function(index,obj){if(!Game.moduleModel.activity.curIsSign&&(index===-1||index===Game.moduleModel.activity.curSignDay-1)){GlobalModalWaiting.show();Game.moduleModel.activity.sendSign()}else{if(Game.moduleModel.activity.curIsSign&&index<Game.moduleModel.activity.curSignDay){Game.system.toastText(Game.config.msg.getConfig(MsgKey.daily_sign).notice)}else{Game.system.showItemInfo(obj,this.signList[index].reward.itemId)}}};SignPanel.prototype.signRewardTip=function(){var sevDrop=Game.moduleModel.activity.signDrop;if(sevDrop!==null){var drop=new DTItemNum();drop.itemId=sevDrop.itemId;drop.itemNum=sevDrop.amount;Game.system.getRewardText([drop],TEXT.StoryGetReward,0);this.setData()}else{this.setData()}};SignPanel.prototype.setData=function(){var curCycle=Game.moduleModel.activity.curCycle;this.signList=Game.config.dailySign.getSingList(curCycle);this.m_signList.numItems=this.signList.length;this.onShowNextTip();this.m_okBtn.visible=!Game.moduleModel.activity.curIsSign;this.visible=true};SignPanel.prototype.initItem=function(index,obj){var data=this.signList[index];if(data==null){return null}if(data.reward.itemType==7){var item=obj;item.setData(data)}else{var item=obj;item.setData(data)}};SignPanel.prototype.providerItem=function(index,obj){var data=this.signList[index];if(data.reward.itemType==7){return fgui.Activity.SignItem2.URL}else{return fgui.Activity.SignItem.URL}};SignPanel.prototype.onShowNextTip=function(){var list=Game.config.dailySignTrailer.getConfigList();var curList=new Array();for(var i=list.length-1;i>=0;i--){if(list[i].day>Game.moduleModel.activity.curCycle){curList.push(list[i])}}if(curList.length>0){this.m_noNext.setSelectedIndex(0);curList=curList.sort(function(a,b){return b.day-a.day});var conf=curList[0];this.m_nextIcon.icon=Games.WarLoadPic.getItemIcon(conf.reward.itemId);this.m_nextIcon.visible=true;this.m_nextNum.text=conf.reward.itemNum.toString();this.m_nextTip.text=conf.info;var itemConf=Game.config.item.getConfig(conf.reward.itemId);this.m_starList.numItems=itemConf.itemStarNum}else{this.m_noNext.setSelectedIndex(1)}};return SignPanel}(Activity.SignPanelStruct));Activity.SignPanel=SignPanel})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var WelfareMainStruct=(function(_super){__extends(WelfareMainStruct,_super);function WelfareMainStruct(){return _super.call(this)||this}WelfareMainStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Activity","WelfareMain"))};WelfareMainStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_tabPanel=(this.getChild("tabPanel"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_secretaryPanel=(this.getChild("secretaryPanel"))};WelfareMainStruct.URL="ui://9qou8rs7rrsje";WelfareMainStruct.DependPackages=["Activity","Common"];return WelfareMainStruct}(fairygui.GComponent));Activity.WelfareMainStruct=WelfareMainStruct})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Activity;(function(Activity){var WelfareMain=(function(_super){__extends(WelfareMain,_super);function WelfareMain(){return _super!==null&&_super.apply(this,arguments)||this}return WelfareMain}(Activity.WelfareMainStruct));Activity.WelfareMain=WelfareMain})(Activity=fgui.Activity||(fgui.Activity={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ActionItemStruct=(function(_super){__extends(ActionItemStruct,_super);function ActionItemStruct(){return _super.call(this)||this}ActionItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ActionItem"))};ActionItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_level=(this.getChild("level"));this.m_type=(this.getChild("type"))};ActionItemStruct.URL="ui://gif3gjfsjazc1lw";ActionItemStruct.DependPackages=["ArtistDetail","PfSkin"];return ActionItemStruct}(fairygui.GComponent));ArtistDetail.ActionItemStruct=ActionItemStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ActionItem=(function(_super){__extends(ActionItem,_super);function ActionItem(){return _super!==null&&_super.apply(this,arguments)||this}ActionItem.prototype.updateView=function(data){var shootId=data.type-400;var config=Game.config.movieShootType.getConfig(shootId);if(config){this.m_icon.icon=Game.config.avatar.getConfig(config.pic).iconUrl}var propConfig=Game.config.property.getConfig(shootId);if(propConfig){this.m_type.text=propConfig.name}this.m_level.text=data.proficiencyLevel+""};return ActionItem}(ArtistDetail.ActionItemStruct));ArtistDetail.ActionItem=ActionItem})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ActorAttrItemStruct=(function(_super){__extends(ActorAttrItemStruct,_super);function ActorAttrItemStruct(){return _super.call(this)||this}ActorAttrItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ActorAttrItem"))};ActorAttrItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_attrIcon=(this.getChild("attrIcon"));this.m_attTitle=(this.getChild("attTitle"));this.m_attLabel=(this.getChild("attLabel"))};ActorAttrItemStruct.URL="ui://gif3gjfsjd830";ActorAttrItemStruct.DependPackages=["ArtistDetail","Common"];return ActorAttrItemStruct}(fairygui.GComponent));ArtistDetail.ActorAttrItemStruct=ActorAttrItemStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ActorAttrItem=(function(_super){__extends(ActorAttrItem,_super);function ActorAttrItem(){return _super!==null&&_super.apply(this,arguments)||this}ActorAttrItem.prototype.updateView=function(value,name,iconUrl){this.m_attLabel.text=formatNumberUnit(value);this.m_attTitle.text=name;this.m_attrIcon.url=iconUrl};return ActorAttrItem}(ArtistDetail.ActorAttrItemStruct));ArtistDetail.ActorAttrItem=ActorAttrItem})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistAssetItemStruct=(function(_super){__extends(ArtistAssetItemStruct,_super);function ArtistAssetItemStruct(){return _super.call(this)||this}ArtistAssetItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ArtistAssetItem"))};ArtistAssetItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_name=(this.getChild("name"));this.m_starList=(this.getChild("starList"));this.m_desc=(this.getChild("desc"));this.m_value=(this.getChild("value"));this.m_picon=(this.getChild("picon"));this.m_unLockGroup=(this.getChild("unLockGroup"));this.m_unlock=(this.getChild("unlock"));this.m_condition=(this.getChild("condition"));this.m_lockGroup=(this.getChild("lockGroup"));this.m_sendBtn=(this.getChild("sendBtn"));this.m_bar=(this.getChild("bar"));this.m_itemView=(this.getChild("itemView"))};ArtistAssetItemStruct.URL="ui://gif3gjfsjazc1ly";ArtistAssetItemStruct.DependPackages=["ArtistDetail","Common","PfSkin"];return ArtistAssetItemStruct}(fairygui.GComponent));ArtistDetail.ArtistAssetItemStruct=ArtistAssetItemStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistAssetItem=(function(_super){__extends(ArtistAssetItem,_super);function ArtistAssetItem(){return _super!==null&&_super.apply(this,arguments)||this}ArtistAssetItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_sendBtn.onClick(this,this.onClickSendBtn);this.m_starList.itemRenderer=Handler.create(this,this.onUpdateStarItem,null,false);this.m_sendBtn.text=Games.TEXT.Send;this.m_lockGroup.visible=false};ArtistAssetItem.prototype.onUpdateStarItem=function(index,item){item.icon=Game.config.avatar.getConfig(Game.config.property.getConfig(this.itemConfig.star).icon).iconUrl};ArtistAssetItem.prototype.updateView=function(data,index){this.index=index;this.actorData=data;this.assetData=data.assets[index];var itemId=this.assetData.item;var itemConfig=Game.config.item.getConfig(itemId);this.itemConfig=itemConfig;if(itemConfig){this.m_itemView.icon=itemConfig.iconUrl;this.m_name.text=itemConfig.name+"";var propertyConfig=Game.config.property.getConfig(itemConfig.star);if(propertyConfig){this.m_starList.numItems=parseInt(propertyConfig.field)}}this.m_picon.icon=Game.config.avatar.getConfig(Game.config.property.getConfig(this.assetData.actor_property).icon).iconUrl;this.m_value.text=format("+{0}",this.assetData.value);this.m_desc.text=format(Games.TEXT.GetAssetToGetProp,this.assetData.num);var sendMax=this.assetData.maxSendNum;sendMax=Math.min(sendMax,this.assetData.max);var currMax=this.assetData.getItemNum(itemId);this.m_itemView.title=format("{0}/{1}",currMax,sendMax);this.currSendNum=currMax;this.maxSendNum=sendMax;var remain=sendMax-currMax;remain=Math.max(0,remain);var curr=Game.moduleModel.item.getItemNum(itemId);this.max=Math.min(curr,remain);this.curr=curr;this.m_sendBtn.grayed=this.max<=0;this.m_bar.max=this.assetData.num;this.m_bar.value=this.assetData.getCurLvItemNum(itemId)};ArtistAssetItem.prototype.onClickSendBtn=function(){var _this=this;if(this.assetData.isMax){Game.system.toastText(TEXT.AssetSendMax);return}if(this.currSendNum>=this.maxSendNum){Game.system.confirmText(TEXT.AssetSendMaxToExpend,TEXT.AssetExpend,null,function(){},function(){if(ItemHelper.checkItemEnough2(5003,1)){var max=Math.min(_this.assetData.useCardMax,Game.moduleModel.item.getItemNum(5003));Game.system.setNumText(max,TEXT.AssetChooseCardNum,"",null,function(num){Game.protosender.Actor.GiveLoyaltyCard(_this.actorData.uuid,_this.assetData.type,num)},null,TEXT.Use)}else{Game.system.openItemWay(5003,1)}},TEXT.AssetArtistUpgrade,TEXT.AssetUseCard)}else{if(this.curr>0){if(this.max>0){Game.system.setNumText(this.max,Games.TEXT.ChooseSendAssetNum,"",null,function(num){Game.moduleModel.actor.giveAssetType=_this.index;Game.moduleModel.actor.giveAssetUUid=_this.actorData.uuid;Game.moduleModel.actor.giveAssetNum=num;Game.protosender.Actor.giveActorAssets(_this.actorData.uuid,_this.assetData.type,_this.assetData.lv,num);Games.Static.Instance.onUserorbit("star",_this.actorData.id.toString(),"asset");Games.Static.Instance.onResourceinput([ItemHelper.createDtItem([_this.itemConfig.id,num])],"starAsset",_this.actorData.id,-1)})}else{Game.system.toastText(Games.TEXT.SendAssetMax)}}else{Game.system.openItemWay(this.itemConfig.id,1)}}};return ArtistAssetItem}(ArtistDetail.ArtistAssetItemStruct));ArtistDetail.ArtistAssetItem=ArtistAssetItem})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistAssetPanelStruct=(function(_super){__extends(ArtistAssetPanelStruct,_super);function ArtistAssetPanelStruct(){return _super.call(this)||this}ArtistAssetPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ArtistAssetPanel"))};ArtistAssetPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_tipMsg=(this.getChild("tipMsg"));this.m_assetLoyaltyBar=(this.getChild("assetLoyaltyBar"));this.m_t0=this.getTransition("t0")};ArtistAssetPanelStruct.URL="ui://gif3gjfsjazc1l1";ArtistAssetPanelStruct.DependPackages=["ArtistDetail","Common"];return ArtistAssetPanelStruct}(fairygui.GComponent));ArtistDetail.ArtistAssetPanelStruct=ArtistAssetPanelStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistAssetPanel=(function(_super){__extends(ArtistAssetPanel,_super);function ArtistAssetPanel(){return _super!==null&&_super.apply(this,arguments)||this}ArtistAssetPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.itemRenderer=Handler.create(this,this.onUpdateItem,null,false);this.m_list.setVirtual();this.poolIcons=[];this.items=[];this.tweenItems=[]};ArtistAssetPanel.prototype.updateView=function(data){this.actorData=data;var curConfig=Game.config.actorLoyalty.getConfigByIdLv(this.actorData.id,this.actorData.loyaltyLevel);this.m_assetLoyaltyBar.m_assetBar.value=this.actorData.loyaltyExp;this.m_assetLoyaltyBar.m_assetBar.max=curConfig.exp;this.m_tipMsg.text=Games.TEXT.PropertyTipMsg;this.m_assetLoyaltyBar.m_assetBar.m_title.visible=false;if(this.actorData.isLoyaltyMaxLv){this.m_assetLoyaltyBar.m_title.text="MAX"}else{this.m_assetLoyaltyBar.m_title.text=this.actorData.loyaltyExp+"/"+curConfig.exp}this.m_list.numItems=Games.ActorModel.assetLenth;this.m_assetLoyaltyBar.m_love.text=Games.TEXT.Level+this.actorData.loyaltyLevel};ArtistAssetPanel.prototype.onUpdateItem=function(index,item){item.updateView(this.actorData,index)};ArtistAssetPanel.prototype.playeffect=function(){this.m_t0.play()};ArtistAssetPanel.prototype.playUpAsset=function(){var _this=this;var type=Game.moduleModel.actor.giveAssetType;var uuid=Game.moduleModel.actor.giveAssetUUid;var num=Game.moduleModel.actor.giveAssetNum;if(uuid==this.actorData.uuid){var item=this.m_list.getChildAt(type);if(item){var globalPos=item.localToGlobal(item.m_sendBtn.x,item.m_sendBtn.y);var localPos=this.globalToLocal(globalPos.x,globalPos.y);var cItem_1;if(this.poolIcons.length>0){cItem_1=this.poolIcons[0];this.poolIcons.splice(0,1)}else{cItem_1=fgui.Common.CommonItem.createInstance();this.items.push(cItem_1)}cItem_1.m_icon.icon=fairygui.UIPackage.getItemURL(Games.GuiPackageNames.PfSkin,"icon_contribution");cItem_1.m_c_show_bg.selectedIndex=1;cItem_1.m_title.text="";this.addChild(cItem_1);cItem_1.alpha=0.5;cItem_1.setXY(localPos.x,localPos.y);this.tweenItems.push(cItem_1);Game.sound.playSound(SoundKey.MM21_ArtistAccord);Laya.Tween.to(cItem_1,{x:0,y:0,alpha:1},500,Laya.Ease.quadIn,Handler.create(null,function(){_this.removeChild(cItem_1);_this.poolIcons.push(cItem_1)}))}}};ArtistAssetPanel.prototype.stopUpAsset=function(){for(var index=0;index<this.tweenItems.length;index++){var element=this.tweenItems[index];Laya.Tween.clearAll(element);element.removeFromParent()}};return ArtistAssetPanel}(ArtistDetail.ArtistAssetPanelStruct));ArtistDetail.ArtistAssetPanel=ArtistAssetPanel})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistAssistantPanelStruct=(function(_super){__extends(ArtistAssistantPanelStruct,_super);function ArtistAssistantPanelStruct(){return _super.call(this)||this}ArtistAssistantPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ArtistAssistantPanel"))};ArtistAssistantPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_attrList=(this.getChild("attrList"));this.m_desc=(this.getChild("desc"));this.m_icon=(this.getChild("icon"));this.m_lvIcon=(this.getChild("lvIcon"));this.m_lessonList=(this.getChild("lessonList"));this.m_courseTitle=(this.getChild("courseTitle"));this.m_attributeTitle=(this.getChild("attributeTitle"));this.m_pactIcon=(this.getChild("pactIcon"));this.m_energyBar=(this.getChild("energyBar"));this.m_contractTitle=(this.getChild("contractTitle"))};ArtistAssistantPanelStruct.URL="ui://gif3gjfsjd831";ArtistAssistantPanelStruct.DependPackages=["ArtistDetail","Common"];return ArtistAssistantPanelStruct}(fairygui.GComponent));ArtistDetail.ArtistAssistantPanelStruct=ArtistAssistantPanelStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistAssistantPanel=(function(_super){__extends(ArtistAssistantPanel,_super);function ArtistAssistantPanel(){return _super!==null&&_super.apply(this,arguments)||this}ArtistAssistantPanel.prototype.updateView=function(data){this.actorData=data;if(data){var props=data.getProps();this.m_attrList.numItems=props.length;this.m_lessonList.numItems=data.assitantList.length;this.m_pactIcon.updateContractByActorId(data.id);if(data.aideLvConfig){this.m_lvIcon.url=data.aideLvConfig.itemUrl;if(data.aideLvConfig.id==0){this.m_energyBar.value=0;this.m_energyBar.max=data.aideLvConfig.lv[1];this.m_energyBar.m_title.visible=false}else{this.m_energyBar.value=data.assistantLv;this.m_energyBar.max=data.aideLvConfig.lv[1];this.m_energyBar.m_title.visible=true}}}};ArtistAssistantPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};ArtistAssistantPanel.prototype.onWindowShow=function(){this.m_attrList.itemRenderer=Handler.create(this,this.updateAttrHandler,null,false);this.m_lessonList.itemRenderer=Handler.create(this,this.updateLessonHandler,null,false);this.m_lessonList.on(fairygui.Events.CLICK_ITEM,this,this.onClickLessonItem);Game.protoOkEvent.add(ProtoEventKey.ActorData,this.onUpdatehandler,this);this.m_icon.url=Game.moduleModel.actor.assistantNpcUrl;this.m_desc.text=TEXT.AssistantBaseDesc};ArtistAssistantPanel.prototype.onWindowHide=function(){this.m_attrList.itemRenderer.recover();this.m_lessonList.itemRenderer.recover();Game.protoOkEvent.remove(ProtoEventKey.ActorData,this.onUpdatehandler,this);this.m_lessonList.off(fairygui.Events.CLICK_ITEM,this,this.onClickLessonItem)};ArtistAssistantPanel.prototype.onUpdatehandler=function(){this.updateView(this.actorData)};ArtistAssistantPanel.prototype.onClickLessonItem=function(item){Game.menu.open(MenuId.ArtistAssistant,item.lessonData)};ArtistAssistantPanel.prototype.updateAttrHandler=function(index,item){var assistantData=this.actorData.assitantList[index];item.updateView(assistantData,assistantData.propId)};ArtistAssistantPanel.prototype.updateLessonHandler=function(index,item){var lessonData=this.actorData.assitantList[index];if(lessonData){item.showUp=true;item.updateView(lessonData)}};return ArtistAssistantPanel}(ArtistDetail.ArtistAssistantPanelStruct));ArtistDetail.ArtistAssistantPanel=ArtistAssistantPanel})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistBasePanelStruct=(function(_super){__extends(ArtistBasePanelStruct,_super);function ArtistBasePanelStruct(){return _super.call(this)||this}ArtistBasePanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ArtistBasePanel"))};ArtistBasePanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_attr=(this.getChild("attr"));this.m_attrList=(this.getChild("attrList"));this.m_descGroup=(this.getChild("descGroup"));this.m_upgradeBtn=(this.getChild("upgradeBtn"));this.m_DetailTextCom=(this.getChild("DetailTextCom"))};ArtistBasePanelStruct.URL="ui://gif3gjfsjazc1l2";ArtistBasePanelStruct.DependPackages=["ArtistDetail","Common","PfSkin"];return ArtistBasePanelStruct}(fairygui.GComponent));ArtistDetail.ArtistBasePanelStruct=ArtistBasePanelStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistBasePanel=(function(_super){__extends(ArtistBasePanel,_super);function ArtistBasePanel(){return _super!==null&&_super.apply(this,arguments)||this}ArtistBasePanel.prototype.updateView=function(data){this.actorData=data;if(data){var props=data.getProps();this.m_attrList.numItems=props.length;this.m_upgradeBtn.grayed=Game.moduleModel.actor.isOpenTrain==false;this.m_DetailTextCom.text=data.config.tips;var isHide=Game.moduleModel.actor.isHide(data.id);this.m_upgradeBtn.visible=!isHide}};ArtistBasePanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_attrList.itemRenderer=Handler.create(this,this.updateAttrHandler,null,false);this.m_upgradeBtn.text=Games.TEXT.ActorTrain;this.m_upgradeBtn.onClick(this,this.onClickUpgradeBtn)};ArtistBasePanel.prototype.updateAttrHandler=function(index,item){var props=this.actorData.getProps();var id=props[index];var config=Game.config.property.getConfig(id);var field=config.field;var value=this.actorData[field];item.updateView(value,config.name,Game.config.avatar.getConfig(config.icon).iconUrl)};ArtistBasePanel.prototype.onClickUpgradeBtn=function(){if(Game.moduleModel.actor.isOpenTrain){Game.menu.open(MenuId.ArtistTrain,this.actorData.id)}else{Game.system.toastText(Game.moduleModel.actor.openTrainTip)}};ArtistBasePanel.lv=30;return ArtistBasePanel}(ArtistDetail.ArtistBasePanelStruct));ArtistDetail.ArtistBasePanel=ArtistBasePanel})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistDetailContentStruct=(function(_super){__extends(ArtistDetailContentStruct,_super);function ArtistDetailContentStruct(){return _super.call(this)||this}ArtistDetailContentStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ArtistDetailContent"))};ArtistDetailContentStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_di=(this.getChild("di"))};ArtistDetailContentStruct.URL="ui://gif3gjfsqr3yt1wm";ArtistDetailContentStruct.DependPackages=["ArtistDetail","PfSkin","Common"];return ArtistDetailContentStruct}(fairygui.GComponent));ArtistDetail.ArtistDetailContentStruct=ArtistDetailContentStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistDetailContent=(function(_super){__extends(ArtistDetailContent,_super);function ArtistDetailContent(){return _super!==null&&_super.apply(this,arguments)||this}return ArtistDetailContent}(ArtistDetail.ArtistDetailContentStruct));ArtistDetail.ArtistDetailContent=ArtistDetailContent})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistDetailUIStruct=(function(_super){__extends(ArtistDetailUIStruct,_super);function ArtistDetailUIStruct(){return _super.call(this)||this}ArtistDetailUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ArtistDetailUI"))};ArtistDetailUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_visble_panel=this.getController("c_visble_panel");this.m_name=(this.getChild("name"));this.m_icon=(this.getChild("icon"));this.m_sex=(this.getChild("sex"));this.m_contory=(this.getChild("contory"));this.m_biaoqian1=(this.getChild("biaoqian1"));this.m_biaoqian2=(this.getChild("biaoqian2"));this.m_starList=(this.getChild("starList"));this.m_tablist=(this.getChild("tablist"));this.m_gold=(this.getChild("gold"));this.m_needGold=(this.getChild("needGold"));this.m_srcName=(this.getChild("srcName"));this.m_tsrcName=(this.getChild("tsrcName"));this.m_level=(this.getChild("level"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_frozenBtn=(this.getChild("frozenBtn"));this.m_renameBtn=(this.getChild("renameBtn"));this.m_content=(this.getChild("content"));this.m_expbar=(this.getChild("expbar"));this.m_upgradeBtn=(this.getChild("upgradeBtn"));this.m_effect=(this.getChild("effect"));this.m_basePanel=(this.getChild("basePanel"));this.m_assetPanel=(this.getChild("assetPanel"));this.m_skillPanel=(this.getChild("skillPanel"));this.m_expertPanel=(this.getChild("expertPanel"));this.m_assistantPanel=(this.getChild("assistantPanel"))};ArtistDetailUIStruct.URL="ui://gif3gjfsjazc1l3";ArtistDetailUIStruct.DependPackages=["ArtistDetail","Common","Fx","PfSkin"];return ArtistDetailUIStruct}(fairygui.GComponent));ArtistDetail.ArtistDetailUIStruct=ArtistDetailUIStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistDetailUI=(function(_super){__extends(ArtistDetailUI,_super);function ArtistDetailUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.actorId=0;_this.lv=0;_this.floatpos=[new laya.maths.Point(-200,180),new laya.maths.Point(200,180),new laya.maths.Point(-200,300),new laya.maths.Point(200,300)];_this.downTimeoutHandler=-1;_this.downIntervalHandler=-1;_this.upTimeoutHandler=-1;_this.isDowning=false;_this.preSkillEnable=false;return _this}ArtistDetailUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.attrlist=new Array();this.m_upgradeBtn.text=Games.TEXT.Upgrade;this.m_upgradeBtn.sound="";this.preProps=new Dictionary();this.m_effect.visible=false};ArtistDetailUI.prototype.onUpgradeUp=function(){var _this=this;if(this.downTimeoutHandler!=-1){clearTimeout(this.downTimeoutHandler);this.downTimeoutHandler=-1}if(this.downIntervalHandler!=-1){clearInterval(this.downIntervalHandler);this.downIntervalHandler=-1}if(this.isDowning){this.upTimeoutHandler=setTimeout(function(){_this.isDowning=false},200)}};ArtistDetailUI.prototype.onUpgradeDowm=function(){var _this=this;if(this.upTimeoutHandler!=-1){clearTimeout(this.upTimeoutHandler);this.upTimeoutHandler=-1}this.downTimeoutHandler=setTimeout(function(){_this.isDowning=true;_this.downIntervalHandler=setInterval(function(){_this.onClickUpgradeBtn()},200)},200)};ArtistDetailUI.prototype.onClickUpgradeBtn=function(){var _this=this;this.isDowning=false;var levelLimit=this.actorData.getMaxLv();if(levelLimit>this.actorData.level){if(Games.ItemHelper.checkItemEnough2(this.actorData.levelData.cost.itemId,1)){Game.protosender.Actor.upgradeActor(this.actorData.uuid)}else{this.onUpgradeUp();Game.system.openItemWay(this.actorData.levelData.cost.itemId,this.actorData.upgradeCostNum)}}else{if(this.actorData.isMaxLv()){Game.system.toastText(Games.TEXT.LvUpMax);this.onUpgradeUp()}else{this.onUpgradeUp();if(this.levelupLimit==null){this.levelupLimit=fgui.Common.LevelUpLimitUI.createInstance()}this.levelupLimit.open(Games.TEXT.UpLvLimit,Games.TEXT.LoyaltyText,format(Games.TEXT.LvUpTo,this.actorData.name,this.actorData.level,this.actorData.getNextLvUpLv()),format(Games.TEXT.BuildLevel,this.actorData.getNextLvUpLoyaltyLv()),null,function(){_this.moduleWindow.effectAsset()})}}};ArtistDetailUI.prototype.toValue=function(data){var _this=this;if(this.isPlayLvUp){return}if(this.isCanPlayCross==true){this.isPlayLvUp=true;Laya.Tween.to(this.m_expbar,{value:data.levelExp},200,null,Handler.create(null,function(){_this.isPlayLvUp=false}))}else{this.m_expbar.max=data.upgradeTotalCostNum;this.m_expbar.value=data.levelExp}};ArtistDetailUI.prototype.crossToValue=function(data){var _this=this;if(this.isPlayLvUp){return}this.isPlayLvUp=true;Laya.Tween.to(this.m_expbar,{value:this.preCostNum},200,null,Handler.create(null,function(){_this.isPlayLvUp=false;_this.m_expbar.value=0;if(data.levelExp!=0){_this.toValue(data)}else{_this.m_expbar.max=data.upgradeTotalCostNum}}))};ArtistDetailUI.prototype.updateView=function(data){var _this=this;var lvUp=false;if(this.actorId==data.id&&this.lv<data.level){lvUp=true}if(this.actorId==data.id){this.isCanPlayCross=true}else{this.isCanPlayCross=false}var skill=data.getUnlockSkillByType(Games.SkillTriggerType.upgrade_gold_cost);if(lvUp&&skill&&this.preSkillEnable){Game.system.playSkillEffect(data.id,Games.SkillTriggerType.upgrade_gold_cost)}this.preSkillEnable=skill&&skill.isEnable;if(lvUp){Games.Static.Instance.onUserorbit("star",data.star+"&"+data.id,"upgrade");var sub=data.giveAssetsCountLimit-this.preAssetNum;if(sub>0){Game.system.toastText(format(TEXT.ActorUpgradeAssetCount,sub))}Game.sound.playSound(SoundKey.MM14_ArtistGradeUp,true);this.m_effect.m_t501.stop(true,true);this.m_effect.visible=true;this.m_effect.m_t501.play(Handler.create(null,function(){_this.m_effect.visible=false}));if(data.level==data.preMaxLv+1){this.onUpgradeUp();Game.system.playBreakEffect(data.id,format(TEXT.ActorBreakToLv,data.curMaxLv))}this.crossToValue(data)}else{this.toValue(data)}this.lv=data.level;this.actorData=data;this.preAssetNum=data.giveAssetsCountLimit;this.m_name.text=this.actorData.name;var levelLimit=this.actorData.getMaxLv();this.m_level.text=format(Games.TEXT.CurNextLv,this.actorData.level,this.actorData.curMaxLv);this.m_gold.text=formatNumberUnit(Game.moduleModel.item.getItemNum(EItemId.gold));this.m_icon.icon=Game.config.avatar.getConfig(data.config.avatar).bodyIconUrl;this.m_expbar.m_title.visible=false;this.m_starList.numItems=this.actorData.star;this.m_sex.icon=Game.config.avatar.getConfig(Game.config.property.getConfig(this.actorData.config.sex).icon).iconUrl;this.m_contory.icon=Game.config.avatar.getConfig(Game.config.property.getConfig(this.actorData.config.country).icon).iconUrl;this.m_biaoqian1.icon=Game.config.avatar.getConfig(Game.config.property.getConfig(this.actorData.config.show_type).icon).iconUrl;this.m_biaoqian2.icon=Game.config.avatar.getConfig(Game.config.property.getConfig(this.actorData.config.age_type).icon).iconUrl;this.m_tsrcName.text=Games.TEXT.OldName;this.m_srcName.text=""+this.actorData.config.name;if(data.levelData){this.preCostNum=data.upgradeTotalCostNum;this.m_needGold.text=format(Games.TEXT.UpgradeNeedGold,formatNumberUnit(data.upgradeCostNum))}else{this.m_needGold.text=format(Games.TEXT.UpgradeNeedGold,formatNumberUnit(data.upgradeCostNum));this.m_upgradeBtn.visible=false}var props=data.getProps();var pos=0;for(var index=0;index<props.length;index++){var id=props[index];var config=Game.config.property.getConfig(id);var field=config.field;var value=data[field];if(this.preProps.hasKey(id)&&this.actorId==data.id){var preValue=this.preProps.getValue(id);if(value>preValue){var url=Game.config.avatar.getConfig(config.icon).iconUrl;this.floatAddAttrView(value-preValue,url,this.floatpos[pos]);pos++}}this.preProps.add(id,value)}this.actorId=data.id};ArtistDetailUI.prototype.floatAddAttrView=function(value,url,pos){var _this=this;var attr;if(this.attrlist.length>0){attr=this.attrlist.pop()}else{attr=fgui.Common.AttrUpView.createInstance();this.addChild(attr)}if(this.targetPos==null){this.targetPos=new laya.maths.Point()}this.targetPos.x=(fairygui.GRoot.inst.width>>1)+pos.x+(Math.random()>0.5?-1:1)*10;this.targetPos.y=pos.y+(Math.random()>0.5?-1:1)*20;attr.setXY((fairygui.GRoot.inst.width>>1)+pos.x,pos.y);attr.text="+"+value;attr.visible=true;attr.icon=url;laya.utils.Tween.to(attr,{y:pos.y-40},500,Laya.Ease.quadIn,Handler.create(this,function(){_this.attrlist.push(attr);attr.visible=false}))};ArtistDetailUI.prototype.clearProps=function(){this.preProps.clear()};ArtistDetailUI.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.Actor_GiveActorAssets,this.giveAssetHandler,this);this.m_upgradeBtn.onClick(this,this.onClickUpgradeBtn);this.m_upgradeBtn.on(Laya.Event.MOUSE_DOWN,this,this.onUpgradeDowm);this.m_upgradeBtn.on(Laya.Event.MOUSE_UP,this,this.onUpgradeUp);this.m_upgradeBtn.on(Laya.Event.MOUSE_OUT,this,this.onUpgradeUp);this.m_upgradeBtn.on(Laya.Event.FOCUS_CHANGE,this,this.onUpgradeUp);Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onUpgradeUp);Laya.stage.on(Laya.Event.FOCUS_CHANGE,this,this.onUpgradeUp);Laya.stage.on(Laya.Event.MOUSE_OUT,this,this.onUpgradeUp);gameApplication.sAppPause.add(this.onUpgradeUp,this);this.m_starList.itemRenderer=Handler.create(this,this.updateStarRender,null,false);this.m_starList.itemProvider=Handler.create(this,this.updateStarProvider,null,false);this.m_effect.visible=false;this.moduleWindow.openUpdateView()};ArtistDetailUI.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.Actor_GiveActorAssets,this.giveAssetHandler,this);this.m_upgradeBtn.offClick(this,this.onClickUpgradeBtn);this.m_upgradeBtn.off(Laya.Event.MOUSE_DOWN,this,this.onUpgradeDowm);this.m_upgradeBtn.off(Laya.Event.MOUSE_UP,this,this.onUpgradeUp);this.m_upgradeBtn.off(Laya.Event.MOUSE_OUT,this,this.onUpgradeUp);this.m_upgradeBtn.off(Laya.Event.FOCUS_CHANGE,this,this.onUpgradeUp);Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onUpgradeUp);Laya.stage.off(Laya.Event.MOUSE_OUT,this,this.onUpgradeUp);gameApplication.sAppPause.remove(this.onUpgradeUp,this);this.m_starList.itemRenderer.recover();this.m_starList.itemProvider.recover();this.onUpgradeUp();this.actorId=0};ArtistDetailUI.prototype.updateStarProvider=function(index){return fgui.Common.StarItem.URL};ArtistDetailUI.prototype.updateStarRender=function(index,item){if(item&&this.actorData&&this.actorData.config){item.icon=this.actorData.config.starUrl}};ArtistDetailUI.prototype.giveAssetHandler=function(msg){this.moduleWindow.assetPanel.playUpAsset()};ArtistDetailUI.prototype.getSelectTab=function(index){return this.m_tablist.getChildAt(index)};return ArtistDetailUI}(ArtistDetail.ArtistDetailUIStruct));ArtistDetail.ArtistDetailUI=ArtistDetailUI})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistExpertItem1Struct=(function(_super){__extends(ArtistExpertItem1Struct,_super);function ArtistExpertItem1Struct(){return _super.call(this)||this}ArtistExpertItem1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ArtistExpertItem1"))};ArtistExpertItem1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_title=(this.getChild("title"))};ArtistExpertItem1Struct.URL="ui://gif3gjfsjazc1l4";ArtistExpertItem1Struct.DependPackages=["ArtistDetail","Common"];return ArtistExpertItem1Struct}(fairygui.GComponent));ArtistDetail.ArtistExpertItem1Struct=ArtistExpertItem1Struct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistExpertItem1=(function(_super){__extends(ArtistExpertItem1,_super);function ArtistExpertItem1(){return _super!==null&&_super.apply(this,arguments)||this}return ArtistExpertItem1}(ArtistDetail.ArtistExpertItem1Struct));ArtistDetail.ArtistExpertItem1=ArtistExpertItem1})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistExpertItem2Struct=(function(_super){__extends(ArtistExpertItem2Struct,_super);function ArtistExpertItem2Struct(){return _super.call(this)||this}ArtistExpertItem2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ArtistExpertItem2"))};ArtistExpertItem2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_title=(this.getChild("title"))};ArtistExpertItem2Struct.URL="ui://gif3gjfsjazc1l5";ArtistExpertItem2Struct.DependPackages=["ArtistDetail","Common"];return ArtistExpertItem2Struct}(fairygui.GComponent));ArtistDetail.ArtistExpertItem2Struct=ArtistExpertItem2Struct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistExpertItem2=(function(_super){__extends(ArtistExpertItem2,_super);function ArtistExpertItem2(){return _super!==null&&_super.apply(this,arguments)||this}return ArtistExpertItem2}(ArtistDetail.ArtistExpertItem2Struct));ArtistDetail.ArtistExpertItem2=ArtistExpertItem2})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistExpertPanelStruct=(function(_super){__extends(ArtistExpertPanelStruct,_super);function ArtistExpertPanelStruct(){return _super.call(this)||this}ArtistExpertPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ArtistExpertPanel"))};ArtistExpertPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"))};ArtistExpertPanelStruct.URL="ui://gif3gjfsjazc1l6";ArtistExpertPanelStruct.DependPackages=["ArtistDetail","Common"];return ArtistExpertPanelStruct}(fairygui.GComponent));ArtistDetail.ArtistExpertPanelStruct=ArtistExpertPanelStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistExpertPanel=(function(_super){__extends(ArtistExpertPanel,_super);function ArtistExpertPanel(){var _this=_super.call(this)||this;_this.on(Laya.Event.ADDED,_this,_this.onAddToStage);_this.on(Laya.Event.REMOVED,_this,_this.onRemoveFromStage);return _this}ArtistExpertPanel.prototype.onAddToStage=function(){this.m_list.scrollItemToViewOnClick=false;this.tagtip=ArtistDetail.ArtistTagTip.createInstance();this.addChild(this.tagtip);this.tagtip.visible=false;Laya.stage.on(Laya.Event.CLICK,this,this.onClickStage)};ArtistExpertPanel.prototype.onRemoveFromStage=function(){this.off(Laya.Event.ADDED,this,this.onAddToStage);this.off(Laya.Event.REMOVED,this,this.onRemoveFromStage);Laya.stage.off(Laya.Event.CLICK,this,this.onClickStage)};ArtistExpertPanel.prototype.refreshView=function(){};ArtistExpertPanel.prototype.updateView=function(data){this.actorData=data;this.tagtip.visible=false;this.m_list.removeChildrenToPool();var characterNum=this.actorData.config.character.length;var storyNum=this.actorData.config.story_type.length+this.actorData.config.story_feature.length;this.shootTypeList=this.actorData.getShootListLvGreater0();var movieNum=this.shootTypeList.length;var line=0;if(storyNum>0){this.storyList=this.m_list.addItemFromPool(ArtistDetail.ArtistExpertItem1.URL);this.storyList.m_list.on(fairygui.Events.CLICK_ITEM,this,this.onClickStoryItem);this.storyList.m_list.itemRenderer=Handler.create(this,this.onUpdateStory,null,false);this.storyList.m_list.numItems=storyNum;line=Math.ceil(storyNum/this.storyList.m_list.columnCount);this.storyList.m_list.viewHeight=(this.storyList.m_list.lineGap+70)*line;this.storyList.m_title.text=Games.TEXT.ExpertStory}if(characterNum>0){this.characterList=this.m_list.addItemFromPool(ArtistDetail.ArtistExpertItem1.URL);this.characterList.m_list.on(fairygui.Events.CLICK_ITEM,this,this.onClickCharacterItem);this.characterList.m_list.itemRenderer=Handler.create(this,this.onUpdateCharacter,null,false);this.characterList.m_list.numItems=characterNum;line=Math.ceil(characterNum/this.characterList.m_list.columnCount);this.characterList.m_list.viewHeight=(this.characterList.m_list.lineGap+70)*line;this.characterList.m_title.text=Games.TEXT.ExpertCharacter}if(movieNum>0){this.movieList=this.m_list.addItemFromPool(ArtistDetail.ArtistExpertItem2.URL);this.movieList.m_list.itemRenderer=Handler.create(this,this.onUpdateMoveShootRender,null,false);this.movieList.m_list.numItems=movieNum;line=Math.ceil(movieNum/this.movieList.m_list.columnCount);this.movieList.m_list.viewHeight=(this.movieList.m_list.lineGap+135)*line;this.movieList.m_title.text=Games.TEXT.ExpertType}};ArtistExpertPanel.prototype.onUpdateCharacter=function(index,charItem){charItem.updateViewByTagData(this.actorData.actorCharactersTags[index])};ArtistExpertPanel.prototype.onUpdateStory=function(index,charItem){var storyTagLength=this.actorData.actorStoryTags.length;if(index>=storyTagLength){charItem.updateViewByTagData(this.actorData.actorFeaturesTags[index-storyTagLength])}else{charItem.updateViewByTagData(this.actorData.actorStoryTags[index])}};ArtistExpertPanel.prototype.onUpdateMoveShootRender=function(index,movieItem){movieItem.updateView(this.shootTypeList[index])};ArtistExpertPanel.prototype.onClickStage=function(evt){if(this.isClickItem==false){this.tagtip.visible=false}this.isClickItem=false};ArtistExpertPanel.prototype.onClickStoryItem=function(charItem){var index=this.storyList.m_list.getChildIndex(charItem);var realIndex=this.storyList.m_list.childIndexToItemIndex(index);var globalPos=charItem.localToGlobal(0,0);var localPos=this.globalToLocal(globalPos.x,globalPos.y+charItem.height);this.tagtip.visible=true;this.tagtip.setXY(localPos.x,localPos.y);this.isClickItem=true;this.tagtip.text=charItem.tip};ArtistExpertPanel.prototype.onClickCharacterItem=function(charItem){var index=this.characterList.m_list.getChildIndex(charItem);var realIndex=this.characterList.m_list.childIndexToItemIndex(index);var globalPos=charItem.localToGlobal(0,0);var localPos=this.globalToLocal(globalPos.x,globalPos.y+charItem.height);this.tagtip.visible=true;this.tagtip.setXY(localPos.x,localPos.y);this.isClickItem=true;this.tagtip.text=charItem.tip};return ArtistExpertPanel}(ArtistDetail.ArtistExpertPanelStruct));ArtistDetail.ArtistExpertPanel=ArtistExpertPanel})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistSkillItemStruct=(function(_super){__extends(ArtistSkillItemStruct,_super);function ArtistSkillItemStruct(){return _super.call(this)||this}ArtistSkillItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ArtistSkillItem"))};ArtistSkillItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_skillName=(this.getChild("skillName"));this.m_desc=(this.getChild("desc"));this.m_lv=(this.getChild("lv"));this.m_cost=(this.getChild("cost"));this.m_unLockGroup=(this.getChild("unLockGroup"));this.m_lock=(this.getChild("lock"));this.m_condition=(this.getChild("condition"));this.m_lockGroup=(this.getChild("lockGroup"));this.m_skill=(this.getChild("skill"));this.m_upgradeBtn=(this.getChild("upgradeBtn"))};ArtistSkillItemStruct.URL="ui://gif3gjfsjazc1m2";ArtistSkillItemStruct.DependPackages=["ArtistDetail","Common","PfSkin"];return ArtistSkillItemStruct}(fairygui.GComponent));ArtistDetail.ArtistSkillItemStruct=ArtistSkillItemStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistSkillItem=(function(_super){__extends(ArtistSkillItem,_super);function ArtistSkillItem(){return _super!==null&&_super.apply(this,arguments)||this}ArtistSkillItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_desc.ubbEnabled=true;this.m_upgradeBtn.onClick(this,this.onClickUpgradeBtn)};ArtistSkillItem.prototype.onClickUpgradeBtn=function(){if(this.isHasNextLv){if(this.actorData.skillExp>=this.config.exp){Game.protosender.Actor.upgradeActorSkill(this.actorData.uuid,this.config.id);Games.Static.Instance.onUserorbit("star",this.actorData.id+"&"+this.config.id,"skill")}else{Game.system.openGoOtherFunc(Games.OtherFunctionType.ActorSkillExp)}}else{Game.system.toastText(Games.TEXT.SkillLvMaxTip)}};ArtistSkillItem.prototype.updateView=function(data,index){this.actorData=data;var skill=data.skills[index];if(skill){this.config=skill.config;if(skill.dtActor.lv>data.level){this.m_unLockGroup.visible=false;this.m_lockGroup.visible=true;this.m_condition.text=format(Games.TEXT.UnlockSkill,skill.dtActor.lv)}else{this.m_unLockGroup.visible=true;this.m_lockGroup.visible=false;this.m_skillName.text=this.config.name;this.m_desc.text=skill.desc;this.m_lv.text=Games.TEXT.Level+this.config.lv;this.m_cost.text=this.config.exp+"";var nextConfig=Game.config.skill.getConfigByGroupIdAndLv(this.config.group_id,this.config.lv+1);if(nextConfig){this.isHasNextLv=true;this.m_cost.text=this.config.exp+""}else{this.isHasNextLv=false;this.m_cost.text=Games.TEXT.MaxLevel}this.m_skill.icon=skill.iconUrl}}};return ArtistSkillItem}(ArtistDetail.ArtistSkillItemStruct));ArtistDetail.ArtistSkillItem=ArtistSkillItem})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistSkillPanelStruct=(function(_super){__extends(ArtistSkillPanelStruct,_super);function ArtistSkillPanelStruct(){return _super.call(this)||this}ArtistSkillPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ArtistSkillPanel"))};ArtistSkillPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_skillexp=(this.getChild("skillexp"));this.m_exp=(this.getChild("exp"));this.m_energy2=(this.getChild("energy2"));this.m_list=(this.getChild("list"));this.m_energyBar=(this.getChild("energyBar"))};ArtistSkillPanelStruct.URL="ui://gif3gjfsjazc1lb";ArtistSkillPanelStruct.DependPackages=["ArtistDetail","Common"];return ArtistSkillPanelStruct}(fairygui.GComponent));ArtistDetail.ArtistSkillPanelStruct=ArtistSkillPanelStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistSkillPanel=(function(_super){__extends(ArtistSkillPanel,_super);function ArtistSkillPanel(){return _super!==null&&_super.apply(this,arguments)||this}ArtistSkillPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.itemRenderer=Handler.create(this,this.onUpdateItem,null,false);this.m_list.setVirtual()};ArtistSkillPanel.prototype.updateView=function(data){this.currentActor=data;this.skills=data.config.skill;this.m_list.numItems=this.skills.length;this.m_energyBar.max=data.staminaLimit;this.m_energyBar.value=data.stamina;this.m_energyBar.m_bar.width=this.m_energyBar.width*this.m_energyBar.value/this.m_energyBar.max;this.m_exp.text=data.skillExp+""};ArtistSkillPanel.prototype.onUpdateItem=function(index,item){var aitem=item;aitem.updateView(this.currentActor,index)};return ArtistSkillPanel}(ArtistDetail.ArtistSkillPanelStruct));ArtistDetail.ArtistSkillPanel=ArtistSkillPanel})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistTagStruct=(function(_super){__extends(ArtistTagStruct,_super);function ArtistTagStruct(){return _super.call(this)||this}ArtistTagStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ArtistTag"))};ArtistTagStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};ArtistTagStruct.URL="ui://gif3gjfsjazc1m4";ArtistTagStruct.DependPackages=["ArtistDetail","Common"];return ArtistTagStruct}(fairygui.GButton));ArtistDetail.ArtistTagStruct=ArtistTagStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistTag=(function(_super){__extends(ArtistTag,_super);function ArtistTag(){return _super!==null&&_super.apply(this,arguments)||this}ArtistTag.prototype.updateViewByTagData=function(tagData){this.title=Game.config.property.getConfig(tagData.id).name;this.tip=Game.config.msg.getConfig(3000+tagData.lv).notice;this.m_c1.selectedIndex=tagData.lv-1};ArtistTag.prototype.updateViewByIdLv=function(id,lv){this.title=Game.config.property.getConfig(id).name;this.tip=Game.config.msg.getConfig(3000+lv).notice;this.m_c1.selectedIndex=lv-1};ArtistTag.prototype.updateViewByCharacter=function(mchar){this.title=Game.config.property.getConfig(mchar.character).name;this.tip=Game.config.msg.getConfig(3000+mchar.lv).notice;this.m_c1.selectedIndex=mchar.lv-1};ArtistTag.prototype.updateViewByFeatureType=function(feature){this.title=Game.config.property.getConfig(feature.feature).name;this.tip=Game.config.msg.getConfig(3000+feature.lv).notice;this.m_c1.selectedIndex=feature.lv-1};ArtistTag.prototype.updateViewByStoryType=function(story){this.title=Game.config.property.getConfig(story.story).name;this.tip=Game.config.msg.getConfig(3000+story.lv).notice;this.m_c1.selectedIndex=story.lv-1};return ArtistTag}(ArtistDetail.ArtistTagStruct));ArtistDetail.ArtistTag=ArtistTag})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistTagTipStruct=(function(_super){__extends(ArtistTagTipStruct,_super);function ArtistTagTipStruct(){return _super.call(this)||this}ArtistTagTipStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","ArtistTagTip"))};ArtistTagTipStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};ArtistTagTipStruct.URL="ui://gif3gjfsgb1ht26y";ArtistTagTipStruct.DependPackages=["ArtistDetail","Common"];return ArtistTagTipStruct}(fairygui.GLabel));ArtistDetail.ArtistTagTipStruct=ArtistTagTipStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var ArtistTagTip=(function(_super){__extends(ArtistTagTip,_super);function ArtistTagTip(){return _super!==null&&_super.apply(this,arguments)||this}return ArtistTagTip}(ArtistDetail.ArtistTagTipStruct));ArtistDetail.ArtistTagTip=ArtistTagTip})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AssetLoyaltyBarStruct=(function(_super){__extends(AssetLoyaltyBarStruct,_super);function AssetLoyaltyBarStruct(){return _super.call(this)||this}AssetLoyaltyBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","AssetLoyaltyBar"))};AssetLoyaltyBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_love=(this.getChild("love"));this.m_title=(this.getChild("title"));this.m_assetBar=(this.getChild("assetBar"))};AssetLoyaltyBarStruct.URL="ui://gif3gjfsjs171nu";AssetLoyaltyBarStruct.DependPackages=["ArtistDetail","Common"];return AssetLoyaltyBarStruct}(fairygui.GLabel));ArtistDetail.AssetLoyaltyBarStruct=AssetLoyaltyBarStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AssetLoyaltyBar=(function(_super){__extends(AssetLoyaltyBar,_super);function AssetLoyaltyBar(){return _super!==null&&_super.apply(this,arguments)||this}return AssetLoyaltyBar}(ArtistDetail.AssetLoyaltyBarStruct));ArtistDetail.AssetLoyaltyBar=AssetLoyaltyBar})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AssistantBottomPanelStruct=(function(_super){__extends(AssistantBottomPanelStruct,_super);function AssistantBottomPanelStruct(){return _super.call(this)||this}AssistantBottomPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","AssistantBottomPanel"))};AssistantBottomPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};AssistantBottomPanelStruct.URL="ui://gif3gjfsep0gt27s";AssistantBottomPanelStruct.DependPackages=["ArtistDetail"];return AssistantBottomPanelStruct}(fairygui.GComponent));ArtistDetail.AssistantBottomPanelStruct=AssistantBottomPanelStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AssistantBottomPanel=(function(_super){__extends(AssistantBottomPanel,_super);function AssistantBottomPanel(){return _super!==null&&_super.apply(this,arguments)||this}AssistantBottomPanel.prototype.updateView=function(lessonData){};return AssistantBottomPanel}(ArtistDetail.AssistantBottomPanelStruct));ArtistDetail.AssistantBottomPanel=AssistantBottomPanel})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AssistantCenterPanelStruct=(function(_super){__extends(AssistantCenterPanelStruct,_super);function AssistantCenterPanelStruct(){return _super.call(this)||this}AssistantCenterPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","AssistantCenterPanel"))};AssistantCenterPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_visible_max=this.getController("c_visible_max");this.m_icon=(this.getChild("icon"));this.m_attrLabel=(this.getChild("attrLabel"));this.m_nextAddLabel=(this.getChild("nextAddLabel"));this.m_nextAddNum=(this.getChild("nextAddNum"));this.m_trainTimes=(this.getChild("trainTimes"));this.m_trainTimesNum=(this.getChild("trainTimesNum"));this.m_trainTimesUnlockTip=(this.getChild("trainTimesUnlockTip"));this.m_unlockTagTip=(this.getChild("unlockTagTip"));this.m_curTag=(this.getChild("curTag"));this.m_nextTag=(this.getChild("nextTag"));this.m_attrTitle=(this.getChild("attrTitle"));this.m_tagTitle=(this.getChild("tagTitle"))};AssistantCenterPanelStruct.URL="ui://gif3gjfsep0gt27t";AssistantCenterPanelStruct.DependPackages=["ArtistDetail","PfSkin","Common"];return AssistantCenterPanelStruct}(fairygui.GComponent));ArtistDetail.AssistantCenterPanelStruct=AssistantCenterPanelStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AssistantCenterPanel=(function(_super){__extends(AssistantCenterPanel,_super);function AssistantCenterPanel(){return _super!==null&&_super.apply(this,arguments)||this}AssistantCenterPanel.prototype.updateView=function(lessonData){this.m_icon.url=lessonData.propUrl;this.m_attrTitle.text=TEXT.AssistantTitle1;this.m_tagTitle.text=TEXT.AssistantTitle2;this.m_attrLabel.text=lessonData.propValue.toString();this.m_c_visible_max.selectedIndex=lessonData.isMax?1:0;if(lessonData.isMax==false){this.m_nextAddLabel.text=lessonData.propValue.toString();this.m_nextAddNum.text=format("(+{0})",lessonData.nextValue)}this.m_trainTimes.text=TEXT.AssistantTrainTimes;this.m_trainTimesNum.text=format("(+{0})",lessonData.trainAddValue);this.m_unlockTagTip.visible=lessonData.isUnlockTag==false;this.m_trainTimesUnlockTip.visible=lessonData.isUnlockTrain==false;this.m_unlockTagTip.text=lessonData.unlockTagTip;this.m_trainTimesUnlockTip.text=lessonData.unlockTrainTip;if(lessonData.actorSign>0){var tagData=lessonData.actorData.getTagById(lessonData.actorSign);this.m_curTag.updateViewByIdLv(tagData.id,tagData.srcLv);this.m_nextTag.updateViewByIdLv(tagData.id,tagData.srcLv+lessonData.tagAddValue)}};return AssistantCenterPanel}(ArtistDetail.AssistantCenterPanelStruct));ArtistDetail.AssistantCenterPanel=AssistantCenterPanel})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AssistantTopPanelStruct=(function(_super){__extends(AssistantTopPanelStruct,_super);function AssistantTopPanelStruct(){return _super.call(this)||this}AssistantTopPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","AssistantTopPanel"))};AssistantTopPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_icon=(this.getChild("icon"));this.m_selfId=(this.getChild("selfId"));this.m_lessonItem=(this.getChild("lessonItem"))};AssistantTopPanelStruct.URL="ui://gif3gjfsep0gt27r";AssistantTopPanelStruct.DependPackages=["ArtistDetail","Common","PfSkin"];return AssistantTopPanelStruct}(fairygui.GComponent));ArtistDetail.AssistantTopPanelStruct=AssistantTopPanelStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AssistantTopPanel=(function(_super){__extends(AssistantTopPanel,_super);function AssistantTopPanel(){return _super!==null&&_super.apply(this,arguments)||this}AssistantTopPanel.prototype.updateView=function(lessonData){this.m_icon.url=Game.moduleModel.actor.assistantNpcUrl;this.m_lessonItem.updateView(lessonData);this.m_selfId.text=lessonData.config.name};return AssistantTopPanel}(ArtistDetail.AssistantTopPanelStruct));ArtistDetail.AssistantTopPanel=AssistantTopPanel})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AssistantUIStruct=(function(_super){__extends(AssistantUIStruct,_super);function AssistantUIStruct(){return _super.call(this)||this}AssistantUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","AssistantUI"))};AssistantUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_canup=this.getController("c_canup");this.m_c_effect_visible=this.getController("c_effect_visible");this.m_des=(this.getChild("des"));this.m_costList=(this.getChild("costList"));this.m_dialogPanel=(this.getChild("dialogPanel"));this.m_topPanel=(this.getChild("topPanel"));this.m_centerPanel=(this.getChild("centerPanel"));this.m_upgradeBtn=(this.getChild("upgradeBtn"));this.m_effect=(this.getChild("effect"))};AssistantUIStruct.URL="ui://gif3gjfsmmict27j";AssistantUIStruct.DependPackages=["ArtistDetail","Common","Fx"];return AssistantUIStruct}(fairygui.GComponent));ArtistDetail.AssistantUIStruct=AssistantUIStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AssistantUI=(function(_super){__extends(AssistantUI,_super);function AssistantUI(){return _super!==null&&_super.apply(this,arguments)||this}AssistantUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.attrlist=new Array()};AssistantUI.prototype.onWindowShow=function(){this.m_upgradeBtn.onClick(this,this.onClickUpgradeBtn);this.m_costList.itemRenderer=Handler.create(this,this.onUpdateCostRender,null,false);this.m_costList.itemProvider=Handler.create(this,this.onUpdateProviderRender,null,false);this.lessonData=this.moduleWindow.menuParameter.args[0];Game.protoOkEvent.add(ProtoEventKey.ActorData,this.updateView,this);Game.protoOkEvent.add(ProtoEventKey.Actor_AssistantUpLv,this.assistantUpHandler,this);this.updateView();this.m_c_effect_visible.selectedIndex=0};AssistantUI.prototype.onWindowHide=function(){this.m_costList.itemRenderer.recover();this.m_costList.itemProvider.recover();this.m_upgradeBtn.offClick(this,this.onClickUpgradeBtn);Game.protoOkEvent.remove(ProtoEventKey.ActorData,this.updateView,this);Game.protoOkEvent.remove(ProtoEventKey.Actor_AssistantUpLv,this.assistantUpHandler,this)};AssistantUI.prototype.assistantUpHandler=function(msg){var _this=this;var data=Game.moduleModel.actor.getActorByUUid(msg.uuid);if(data){var assistantData=data.assitantList[msg.id-1];if(assistantData&&assistantData.preValue){var preValue=assistantData.preValue;if(preValue<=0){return}var attr;if(this.attrlist.length>0){attr=this.attrlist.pop()}else{attr=fgui.Common.AttrUpView.createInstance();this.addChild(attr)}attr.text="+"+preValue;attr.icon=assistantData.propUrl;var posX=this.m_topPanel.x+this.m_topPanel.width-100;var posY=this.m_topPanel.y+this.m_topPanel.height-attr.height;attr.setXY(posX,posY);attr.visible=true;laya.utils.Tween.to(attr,{y:posY-100},500,Laya.Ease.quadIn,Handler.create(this,function(){_this.attrlist.push(attr);attr.visible=false}));this.m_effect.m_t501.stop(true,true);this.m_c_effect_visible.selectedIndex=1;this.m_effect.m_t501.play(Handler.create(null,function(){_this.m_c_effect_visible.selectedIndex=0}),1,0,0,1)}}};AssistantUI.prototype.onClickUpgradeBtn=function(){if(this.lessonData.isMax){Game.system.toastText(TEXT.AssistantUpgradeMax);return}var enough=ItemHelper.checkItemsEnough(this.cost);if(enough){Game.protosender.Actor.AssistantUpLv(this.lessonData.uuid,this.lessonData.id)}else{var item=ItemHelper.getItemNotEnough(this.cost);Game.system.openItemWay(item.itemId,item.itemNum)}};AssistantUI.prototype.onUpdateProviderRender=function(index){var url=fgui.Common.PactIcon_80.URL;if(this.lessonData.cost[index].itemType!=EItemCategory.contract){url=fgui.Common.PropInfoItem.URL}return url};AssistantUI.prototype.onUpdateCostRender=function(index,item){item.setCost(this.lessonData.cost[index])};AssistantUI.prototype.updateView=function(){if(this.lessonData.level>0){this.m_upgradeBtn.text=TEXT.AssistantUpgrade;this.m_c_canup.selectedIndex=0}else{this.m_upgradeBtn.text=TEXT.AssistantStudy;this.m_c_canup.selectedIndex=1;var propId=this.lessonData.actorData.getProps()[this.lessonData.id-1];var propstr=Game.config.property.getConfig(propId).name;this.m_des.text=format(TEXT.AssistantDesc,propstr)}this.m_topPanel.updateView(this.lessonData);this.m_centerPanel.updateView(this.lessonData);this.cost=this.lessonData.cost;this.m_costList.removeChildrenToPool();this.m_costList.numItems=this.cost.length};return AssistantUI}(ArtistDetail.AssistantUIStruct));ArtistDetail.AssistantUI=AssistantUI})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AttrLabelLongTitleStruct=(function(_super){__extends(AttrLabelLongTitleStruct,_super);function AttrLabelLongTitleStruct(){return _super.call(this)||this}AttrLabelLongTitleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","AttrLabelLongTitle"))};AttrLabelLongTitleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};AttrLabelLongTitleStruct.URL="ui://gif3gjfsep0gt27p";AttrLabelLongTitleStruct.DependPackages=["ArtistDetail","Common"];return AttrLabelLongTitleStruct}(fairygui.GLabel));ArtistDetail.AttrLabelLongTitleStruct=AttrLabelLongTitleStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AttrLabelLongTitle=(function(_super){__extends(AttrLabelLongTitle,_super);function AttrLabelLongTitle(){return _super!==null&&_super.apply(this,arguments)||this}return AttrLabelLongTitle}(ArtistDetail.AttrLabelLongTitleStruct));ArtistDetail.AttrLabelLongTitle=AttrLabelLongTitle})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AttrLabelTitleStruct=(function(_super){__extends(AttrLabelTitleStruct,_super);function AttrLabelTitleStruct(){return _super.call(this)||this}AttrLabelTitleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","AttrLabelTitle"))};AttrLabelTitleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};AttrLabelTitleStruct.URL="ui://gif3gjfsmmict27i";AttrLabelTitleStruct.DependPackages=["ArtistDetail","Common"];return AttrLabelTitleStruct}(fairygui.GLabel));ArtistDetail.AttrLabelTitleStruct=AttrLabelTitleStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var AttrLabelTitle=(function(_super){__extends(AttrLabelTitle,_super);function AttrLabelTitle(){return _super!==null&&_super.apply(this,arguments)||this}return AttrLabelTitle}(ArtistDetail.AttrLabelTitleStruct));ArtistDetail.AttrLabelTitle=AttrLabelTitle})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var CollectBtnStruct=(function(_super){__extends(CollectBtnStruct,_super);function CollectBtnStruct(){return _super.call(this)||this}CollectBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","CollectBtn"))};CollectBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};CollectBtnStruct.URL="ui://gif3gjfsjazc1mb";CollectBtnStruct.DependPackages=["ArtistDetail","PfSkin"];return CollectBtnStruct}(fairygui.GButton));ArtistDetail.CollectBtnStruct=CollectBtnStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var CollectBtn=(function(_super){__extends(CollectBtn,_super);function CollectBtn(){return _super!==null&&_super.apply(this,arguments)||this}return CollectBtn}(ArtistDetail.CollectBtnStruct));ArtistDetail.CollectBtn=CollectBtn})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var RenameBtnStruct=(function(_super){__extends(RenameBtnStruct,_super);function RenameBtnStruct(){return _super.call(this)||this}RenameBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDetail","RenameBtn"))};RenameBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};RenameBtnStruct.URL="ui://gif3gjfsjazc1mp";RenameBtnStruct.DependPackages=["ArtistDetail","Common"];return RenameBtnStruct}(fairygui.GButton));ArtistDetail.RenameBtnStruct=RenameBtnStruct})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDetail;(function(ArtistDetail){var RenameBtn=(function(_super){__extends(RenameBtn,_super);function RenameBtn(){return _super!==null&&_super.apply(this,arguments)||this}return RenameBtn}(ArtistDetail.RenameBtnStruct));ArtistDetail.RenameBtn=RenameBtn})(ArtistDetail=fgui.ArtistDetail||(fgui.ArtistDetail={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var ActorBgStruct=(function(_super){__extends(ActorBgStruct,_super);function ActorBgStruct(){return _super.call(this)||this}ActorBgStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDic","actorBg"))};ActorBgStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_noHave=this.getController("noHave");this.m_title=(this.getChild("title"));this.m_starList=(this.getChild("starList"));this.m_icon=(this.getChild("icon"))};ActorBgStruct.URL="ui://aeg3jnlem8at11";ActorBgStruct.DependPackages=["ArtistDic","Common","WarMovie"];return ActorBgStruct}(fairygui.GButton));ArtistDic.ActorBgStruct=ActorBgStruct})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var ActorBg=(function(_super){__extends(ActorBg,_super);function ActorBg(){return _super!==null&&_super.apply(this,arguments)||this}ActorBg.prototype.setData=function(data){this.m_starList.numItems=data.starNum;this.m_icon.m_icon.icon=Games.WarLoadPic.getActorIcon(data.avatar);if(Game.moduleModel.actor.hasActor(data.id)){this.m_noHave.setSelectedIndex(0);this.m_title.text=Game.moduleModel.actor.getActor(data.id).name}else{this.m_noHave.setSelectedIndex(1);this.m_title.text=data.name}};return ActorBg}(ArtistDic.ActorBgStruct));ArtistDic.ActorBg=ActorBg})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var ActorIconStruct=(function(_super){__extends(ActorIconStruct,_super);function ActorIconStruct(){return _super.call(this)||this}ActorIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDic","ActorIcon"))};ActorIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};ActorIconStruct.URL="ui://aeg3jnlem8at12";ActorIconStruct.DependPackages=["ArtistDic"];return ActorIconStruct}(fairygui.GComponent));ArtistDic.ActorIconStruct=ActorIconStruct})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var ActorIcon=(function(_super){__extends(ActorIcon,_super);function ActorIcon(){return _super!==null&&_super.apply(this,arguments)||this}return ActorIcon}(ArtistDic.ActorIconStruct));ArtistDic.ActorIcon=ActorIcon})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var ArtistDicUIStruct=(function(_super){__extends(ArtistDicUIStruct,_super);function ArtistDicUIStruct(){return _super.call(this)||this}ArtistDicUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDic","ArtistDicUI"))};ArtistDicUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_screen=this.getController("screen");this.m_showDetails=this.getController("showDetails");this.m_title=(this.getChild("title"));this.m_screenList=(this.getChild("screenList"));this.m_type1=(this.getChild("type1"));this.m_type2=(this.getChild("type2"));this.m_type3=(this.getChild("type3"));this.m_type4=(this.getChild("type4"));this.m_type5=(this.getChild("type5"));this.m_typeList1=(this.getChild("typeList1"));this.m_typeList2=(this.getChild("typeList2"));this.m_typeList3=(this.getChild("typeList3"));this.m_typeList4=(this.getChild("typeList4"));this.m_typeList5=(this.getChild("typeList5"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_closeSearchBtn=(this.getChild("closeSearchBtn"));this.m_artistList=(this.getChild("artistList"));this.m_ScreenBtn=(this.getChild("ScreenBtn"));this.m_shwoDetail=(this.getChild("shwoDetail"))};ArtistDicUIStruct.URL="ui://aeg3jnlem8atq";ArtistDicUIStruct.DependPackages=["ArtistDic","WarMovie","Common","PfSkin"];return ArtistDicUIStruct}(fairygui.GComponent));ArtistDic.ArtistDicUIStruct=ArtistDicUIStruct})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var ArtistDicUI=(function(_super){__extends(ArtistDicUI,_super);function ArtistDicUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.userCloseUI=true;_this.scrollPanelPosy=0;_this.haveScreen=false;_this.screenStar=[false,false,false,false,false];_this.screenCountry=[false,false,false];_this.screenSex=[false,false];_this.screenAge=[false,false];_this.screenShow=[false,false];_this.isInit=true;_this.initListNum=-1;_this.initListNum1=-1;_this.initListNum2=-1;return _this}ArtistDicUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.ArtistDicUITitle;this.m_shwoDetail.m_notHired.text=TEXT.ArtistDicUInotHired;this.m_type1.text=TEXT.ArtistDicUIStar;this.m_type2.text=TEXT.ArtistDicUICountry;this.m_type3.text=TEXT.ArtistDicUISex;this.m_type4.text=TEXT.ArtistDicUIAge;this.m_type5.text=TEXT.ArtistDicUIShow;this.m_artistList.m_noTip.text=TEXT.ArtistDicUINoActor;this.m_shwoDetail.m_noTip.text=TEXT.ArtistDicUINoPinglun;this.m_shwoDetail.m_tip3.text=TEXT.ArtistDicUIPinglunTitle;this.m_screenList.itemRenderer=Laya.Handler.create(this,this.initScreenListItem,null,false);this.m_artistList.m_fiveList.setVirtual();this.m_artistList.m_fourList.setVirtual();this.m_artistList.m_otherList.setVirtual();this.m_artistList.m_fiveList.itemRenderer=Laya.Handler.create(this,this.fiveItem,null,false);this.m_artistList.m_fourList.itemRenderer=Laya.Handler.create(this,this.fourItem,null,false);this.m_artistList.m_otherList.itemRenderer=Laya.Handler.create(this,this.otherItem,null,false);this.m_typeList1.itemRenderer=Laya.Handler.create(this,this.typeItem1,null,false);this.m_typeList2.itemRenderer=Laya.Handler.create(this,this.typeItem2,null,false);this.m_typeList3.itemRenderer=Laya.Handler.create(this,this.typeItem3,null,false);this.m_typeList4.itemRenderer=Laya.Handler.create(this,this.typeItem4,null,false);this.m_typeList5.itemRenderer=Laya.Handler.create(this,this.typeItem5,null,false);this.m_typeList1.on(fairygui.Events.CLICK_ITEM,this,this.OnSelectType1);this.m_typeList2.on(fairygui.Events.CLICK_ITEM,this,this.OnSelectType2);this.m_typeList3.on(fairygui.Events.CLICK_ITEM,this,this.OnSelectType3);this.m_typeList4.on(fairygui.Events.CLICK_ITEM,this,this.OnSelectType4);this.m_typeList5.on(fairygui.Events.CLICK_ITEM,this,this.OnSelectType5);this.m_artistList.m_fiveList.on(fairygui.Events.CLICK_ITEM,this,this.OnClickFive);this.m_artistList.m_fourList.on(fairygui.Events.CLICK_ITEM,this,this.OnClickFour);this.m_artistList.m_otherList.on(fairygui.Events.CLICK_ITEM,this,this.OnClickOther);this.m_screenList.on(fairygui.Events.CLICK_ITEM,this,this.OnSelectTypeList);this.m_ScreenBtn.onClick(this,this.onScreenBtne);this.m_closeSearchBtn.onClick(this,this.onCloseScreenBtne);this.m_closeSearchBtn.sound="";this.m_closeSearchBtn.soundVolumeScale=0;this.m_closeBtn.onClick(this,this.onClicClose);this.m_shwoDetail.m_input.promptText=TEXT.ArtistDicUIPinglun;this.m_shwoDetail.m_talkList.itemRenderer=Laya.Handler.create(this.m_shwoDetail,this.m_shwoDetail.initItem,null,false);this.m_shwoDetail.m_detailsBtn.onClick(this.m_shwoDetail,this.m_shwoDetail.onShowDetailsBtn);this.m_shwoDetail.m_sendBtn.onClick(this.m_shwoDetail,this.m_shwoDetail.onSendBtn);this.m_shwoDetail.m_closeBtn.onClick(this,this.onClicCloseDetails)};ArtistDicUI.prototype.onClicCloseDetails=function(){this.m_showDetails.setSelectedIndex(0)};ArtistDicUI.prototype.onClicClose=function(){this.userCloseUI=true;this.scrollPanelPosy=0;this.moduleWindow.menuClose()};ArtistDicUI.prototype.onCloseScreenBtne=function(){this.m_screen.setSelectedIndex(0)};ArtistDicUI.prototype.onScreenBtne=function(){if(this.m_screen.selectedIndex===1){this.m_screen.setSelectedIndex(0)}else{if(this.m_screen.selectedIndex===0){this.m_typeList1.numItems=5;this.m_typeList2.numItems=3;this.m_typeList3.numItems=2;this.m_typeList4.numItems=2;this.m_typeList5.numItems=2;this.m_screen.setSelectedIndex(1)}}};ArtistDicUI.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.story_GetMessage,this.updateMsgBoard,this);Game.protoOkEvent.add(ProtoEventKey.story_SetMessage,this.setMessage,this);this.setData()};ArtistDicUI.prototype.onWindowHide=function(){if(this.initListNum>-1){clearTimeout(this.initListNum);this.initListNum=-1}if(this.initListNum1>-1){clearTimeout(this.initListNum1);this.initListNum=-1}if(this.initListNum2>-1){clearTimeout(this.initListNum2);this.initListNum=-1}Game.protoOkEvent.remove(ProtoEventKey.story_GetMessage,this.updateMsgBoard,this);Game.protoOkEvent.remove(ProtoEventKey.story_SetMessage,this.setMessage,this)};ArtistDicUI.prototype.setMessage=function(){if(this.m_showDetails.selectedIndex===1&&this.m_shwoDetail.actorData!==null){Game.protosender.story.getMessage(this.m_shwoDetail.actorData.id)}};ArtistDicUI.prototype.updateMsgBoard=function(msg){if(this.m_showDetails.selectedIndex===1&&this.m_shwoDetail.actorData!==null){if(msg){this.m_shwoDetail.talkMsg=msg.message;this.m_shwoDetail.m_talkList.numItems=this.m_shwoDetail.talkMsg.length;this.m_shwoDetail.m_talkList.scrollPane.scrollBottom();this.m_shwoDetail.m_haveNoBoard.setSelectedIndex(this.m_shwoDetail.talkMsg.length>0?0:1)}else{this.m_shwoDetail.m_talkList.numItems=0;this.m_shwoDetail.m_haveNoBoard.setSelectedIndex(1)}}};ArtistDicUI.prototype.setData=function(){if(this.userCloseUI){this.userCloseUI=false;this.initBase()}this.showSearchResult();this.m_artistList.scrollPane.percY=this.scrollPanelPosy};ArtistDicUI.prototype.initBase=function(){this.isInit=true;this.m_showDetails.setSelectedIndex(0);this.m_typeList1.numItems=5;this.m_typeList2.numItems=3;this.m_typeList3.numItems=2;this.m_typeList4.numItems=2;this.m_typeList5.numItems=2;this.screenStar=[false,false,false,false,false];this.screenCountry=[false,false,false];this.screenSex=[false,false];this.screenAge=[false,false];this.screenShow=[false,false];this.haveScreen=false;this.haveSelectTypeList=new Array();this.haveSelectTypeDic=new Dictionary();this.m_screen.setSelectedIndex(0)};ArtistDicUI.prototype.showSearchResult=function(){var _this=this;this.fiveActorData=new Array();this.fourActorData=new Array();this.otherActorData=new Array();var actorList=Game.config.actor.getConfigList();this.setHaveSelectList();var starSelect=this.screenStar[0]||this.screenStar[1]||this.screenStar[2]||this.screenStar[3]||this.screenStar[4];var countrySelect=this.screenCountry[0]||this.screenCountry[1]||this.screenCountry[2];var sexSelect=this.screenSex[0]||this.screenSex[1];var ageSelect=this.screenAge[0]||this.screenAge[1];var showSelect=this.screenShow[0]||this.screenShow[1];this.haveScreen=starSelect||countrySelect||sexSelect||ageSelect||showSelect;for(var i=0;i<actorList.length;i++){if(actorList[i].star===1306||actorList[i].id>7000){}else{if(actorList[i].star===1305){if(this.haveScreen){if(this.checkScreen(starSelect,countrySelect,sexSelect,ageSelect,showSelect,actorList[i],4)){this.fiveActorData.push(actorList[i])}}else{this.fiveActorData.push(actorList[i])}}else{if(actorList[i].star===1304){if(this.haveScreen){if(this.checkScreen(starSelect,countrySelect,sexSelect,ageSelect,showSelect,actorList[i],3)){this.fourActorData.push(actorList[i])}}else{this.fourActorData.push(actorList[i])}}else{if(actorList[i].star!==0){if(this.haveScreen){if(!starSelect||(starSelect&&(this.screenStar[2]&&actorList[i].starNum===3)||(this.screenStar[1]&&actorList[i].starNum===2)||(this.screenStar[0]&&actorList[i].starNum===1))){if(this.checkScreen(false,countrySelect,sexSelect,ageSelect,showSelect,actorList[i],0)){this.otherActorData.push(actorList[i])}}}else{this.otherActorData.push(actorList[i])}}}}}}this.sortList();var haveActorList=1;if(this.fiveActorData.length>0){this.m_artistList.m_five.height=71;this.m_artistList.m_five.visible=true;if(this.isInit){this.m_artistList.m_fiveList.numItems=0}else{this.m_artistList.m_fiveList.numItems=this.fiveActorData.length}var ht=this.fiveActorData.length/3+(this.fiveActorData.length%3>0?1:0);this.m_artistList.m_fiveList.height=ht*(274+12)-12;haveActorList=0}else{this.m_artistList.m_five.height=0;this.m_artistList.m_five.visible=false;this.m_artistList.m_fiveList.numItems=0;this.m_artistList.m_fiveList.height=0}if(this.fourActorData.length>0){this.m_artistList.m_four.height=71;this.m_artistList.m_four.visible=true;if(this.isInit){this.m_artistList.m_fourList.numItems=0}else{this.m_artistList.m_fourList.numItems=this.fourActorData.length}var ht=this.fourActorData.length/3+(this.fourActorData.length%3>0?1:0);this.m_artistList.m_fourList.height=ht*(274+12)-12;haveActorList=0}else{this.m_artistList.m_four.height=0;this.m_artistList.m_four.visible=false;this.m_artistList.m_fourList.numItems=0;this.m_artistList.m_fourList.height=0}if(this.otherActorData.length>0){this.m_artistList.m_other.height=71;this.m_artistList.m_other.visible=true;if(this.isInit){this.m_artistList.m_otherList.numItems=0}else{this.m_artistList.m_otherList.numItems=this.otherActorData.length}var ht=this.otherActorData.length/3+(this.otherActorData.length%3>0?1:0);this.m_artistList.m_otherList.height=ht*(274+12)-12;haveActorList=0}else{this.m_artistList.m_other.height=0;this.m_artistList.m_other.visible=false;this.m_artistList.m_otherList.numItems=0;this.m_artistList.m_otherList.height=0}if(this.isInit){this.isInit=false;this.initListNum=setTimeout(function(){_this.delayShowList(1)},100);this.initListNum1=setTimeout(function(){_this.delayShowList(2)},200);this.initListNum2=setTimeout(function(){_this.delayShowList(3)},300)}this.m_artistList.m_c1.setSelectedIndex(haveActorList);this.m_artistList.scrollPane.setPercY(0,true)};ArtistDicUI.prototype.delayShowList=function(index){if(index===1){this.m_artistList.m_fiveList.numItems=this.fiveActorData.length}else{if(index===2){this.m_artistList.m_fourList.numItems=this.fourActorData.length}else{this.m_artistList.m_otherList.numItems=this.otherActorData.length}}};ArtistDicUI.prototype.setHaveSelectList=function(){this.haveSelectTypeList=new Array();this.haveSelectTypeDic.clear();for(var i=0;i<5;i++){if(this.screenStar[i]){this.haveSelectTypeDic.add(this.haveSelectTypeList.length,[1,i]);this.haveSelectTypeList.push(i+1)}}for(var i=0;i<3;i++){if(this.screenCountry[i]){this.haveSelectTypeDic.add(this.haveSelectTypeList.length,[2,i]);this.haveSelectTypeList.push(1201+i)}}for(var i=0;i<2;i++){if(this.screenSex[i]){this.haveSelectTypeDic.add(this.haveSelectTypeList.length,[3,i]);this.haveSelectTypeList.push(1101+i)}}for(var i=0;i<2;i++){if(this.screenAge[i]){this.haveSelectTypeDic.add(this.haveSelectTypeList.length,[4,i]);this.haveSelectTypeList.push(1501+i)}}for(var i=0;i<2;i++){if(this.screenShow[i]){this.haveSelectTypeDic.add(this.haveSelectTypeList.length,[5,i]);this.haveSelectTypeList.push(1401+i)}}this.m_screenList.numItems=this.haveSelectTypeList.length};ArtistDicUI.prototype.checkScreen=function(starSelect,countrySelect,sexSelect,ageSelect,showSelect,data,star){if(!starSelect||(starSelect&&this.screenStar[star])){if(!countrySelect||(countrySelect&&((data.country===1201&&this.screenCountry[0])||(data.country===1202&&this.screenCountry[1])||(data.country===1203&&this.screenCountry[2])))){if(!sexSelect||(sexSelect&&((this.screenSex[0]&&data.sex===1101)||(this.screenSex[1]&&data.sex===1102)))){if(!ageSelect||(ageSelect&&((this.screenAge[0]&&data.age_type===1501)||(this.screenAge[1]&&data.age_type===1502)))){if(!showSelect||(showSelect&&((this.screenShow[0]&&data.show_type===1401)||(this.screenShow[1]&&data.show_type===1402)))){return true}}}}}return false};ArtistDicUI.prototype.sortList=function(){this.fiveActorData=this.fiveActorData.sort(function(valA,valB){var haveA=Game.moduleModel.actor.hasActor(valA.id);var haveB=Game.moduleModel.actor.hasActor(valB.id);if(haveA&&!haveB){return -1}else{if(haveB&&!haveA){return 1}else{if((haveA&&haveA)||(!haveA&&!haveA)){return valA.id-valB.id}}}});this.fourActorData=this.fourActorData.sort(function(valA,valB){var haveA=Game.moduleModel.actor.hasActor(valA.id);var haveB=Game.moduleModel.actor.hasActor(valB.id);if(haveA&&!haveB){return -1}else{if(haveB&&!haveA){return 1}else{if((haveA&&haveA)||(!haveA&&!haveA)){return valA.id-valB.id}}}});this.otherActorData=this.otherActorData.sort(function(valA,valB){var haveA=Game.moduleModel.actor.hasActor(valA.id);var haveB=Game.moduleModel.actor.hasActor(valB.id);if(haveA&&!haveB){return -1}else{if(haveB&&!haveA){return 1}else{if((haveA&&haveA)||(!haveA&&!haveA)){if(valA.star===valB.star){return valA.id-valB.id}else{return valB.star-valA.star}}}}})};ArtistDicUI.prototype.initScreenListItem=function(index,obj){var item=obj;item.setData(this.haveSelectTypeList[index])};ArtistDicUI.prototype.fiveItem=function(index,obj){var item=obj;item.setData(this.fiveActorData[index])};ArtistDicUI.prototype.fourItem=function(index,obj){var item=obj;item.setData(this.fourActorData[index])};ArtistDicUI.prototype.otherItem=function(index,obj){var item=obj;item.setData(this.otherActorData[index])};ArtistDicUI.prototype.typeItem1=function(index,obj){obj.selected=this.screenStar[index]};ArtistDicUI.prototype.typeItem2=function(index,obj){var item=obj;item.setData(1201+index);obj.selected=this.screenCountry[index]};ArtistDicUI.prototype.typeItem3=function(index,obj){var item=obj;item.setData(1101+index);obj.selected=this.screenSex[index]};ArtistDicUI.prototype.typeItem4=function(index,obj){var item=obj;item.setData(1501+index);obj.selected=this.screenAge[index]};ArtistDicUI.prototype.typeItem5=function(index,obj){var item=obj;item.setData(1401+index);obj.selected=this.screenShow[index]};ArtistDicUI.prototype.OnSelectType1=function(obj){var index=this.m_typeList1.getChildIndex(obj);var status=obj.selected;this.screenStar[index]=status;this.showSearchResult()};ArtistDicUI.prototype.OnSelectType2=function(obj){var index=this.m_typeList2.getChildIndex(obj);var status=obj.selected;this.screenCountry[index]=status;this.showSearchResult()};ArtistDicUI.prototype.OnSelectType3=function(obj){var index=this.m_typeList3.getChildIndex(obj);var status=obj.selected;this.screenSex[index]=status;this.showSearchResult()};ArtistDicUI.prototype.OnSelectType4=function(obj){var index=this.m_typeList4.getChildIndex(obj);var status=obj.selected;this.screenAge[index]=status;this.showSearchResult()};ArtistDicUI.prototype.OnSelectType5=function(obj){var index=this.m_typeList5.getChildIndex(obj);var status=obj.selected;this.screenShow[index]=status;this.showSearchResult()};ArtistDicUI.prototype.OnSelectTypeList=function(obj){var index=this.m_screenList.getChildIndex(obj);var DicVal=this.haveSelectTypeDic.getValue(index);switch(DicVal[0]){case 1:this.screenStar[DicVal[1]]=false;break;case 2:this.screenCountry[DicVal[1]]=false;break;case 3:this.screenSex[DicVal[1]]=false;break;case 4:this.screenAge[DicVal[1]]=false;break;case 5:this.screenShow[DicVal[1]]=false;break}this.showSearchResult()};ArtistDicUI.prototype.OnClickFive=function(obj){var index=this.m_artistList.m_fiveList.getChildIndex(obj);this.m_shwoDetail.setData(this.fiveActorData[index]);this.m_showDetails.setSelectedIndex(1);this.scrollPanelPosy=this.m_artistList.scrollPane.percY};ArtistDicUI.prototype.OnClickFour=function(obj){var index=this.m_artistList.m_fourList.getChildIndex(obj);this.m_shwoDetail.setData(this.fourActorData[index]);this.m_showDetails.setSelectedIndex(1);this.scrollPanelPosy=this.m_artistList.scrollPane.percY};ArtistDicUI.prototype.OnClickOther=function(obj){var index=this.m_artistList.m_otherList.getChildIndex(obj);this.m_shwoDetail.setData(this.otherActorData[index]);this.m_showDetails.setSelectedIndex(1);this.scrollPanelPosy=this.m_artistList.scrollPane.percY};return ArtistDicUI}(ArtistDic.ArtistDicUIStruct));ArtistDic.ArtistDicUI=ArtistDicUI})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var ArtistListStruct=(function(_super){__extends(ArtistListStruct,_super);function ArtistListStruct(){return _super.call(this)||this}ArtistListStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDic","ArtistList"))};ArtistListStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_fiveList=(this.getChild("fiveList"));this.m_fourList=(this.getChild("fourList"));this.m_otherList=(this.getChild("otherList"));this.m_noTip=(this.getChild("noTip"));this.m_five=(this.getChild("five"));this.m_four=(this.getChild("four"));this.m_other=(this.getChild("other"))};ArtistListStruct.URL="ui://aeg3jnlem8at14";ArtistListStruct.DependPackages=["ArtistDic"];return ArtistListStruct}(fairygui.GComponent));ArtistDic.ArtistListStruct=ArtistListStruct})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var ArtistList=(function(_super){__extends(ArtistList,_super);function ArtistList(){return _super!==null&&_super.apply(this,arguments)||this}return ArtistList}(ArtistDic.ArtistListStruct));ArtistDic.ArtistList=ArtistList})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var ArtistShowStruct=(function(_super){__extends(ArtistShowStruct,_super);function ArtistShowStruct(){return _super.call(this)||this}ArtistShowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDic","ArtistShow"))};ArtistShowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_HaveNo=this.getController("HaveNo");this.m_haveNoBoard=this.getController("haveNoBoard");this.m_nameTip1=(this.getChild("nameTip1"));this.m_nameTip2=(this.getChild("nameTip2"));this.m_icon=(this.getChild("icon"));this.m_notHired=(this.getChild("notHired"));this.m_name=(this.getChild("name"));this.m_starList=(this.getChild("starList"));this.m_sexIcon=(this.getChild("sexIcon"));this.m_countryIcon=(this.getChild("countryIcon"));this.m_showIcon=(this.getChild("showIcon"));this.m_ageIcon=(this.getChild("ageIcon"));this.m_tip1=(this.getChild("tip1"));this.m_tip2=(this.getChild("tip2"));this.m_talkList=(this.getChild("talkList"));this.m_inputBG=(this.getChild("inputBG"));this.m_input=(this.getChild("input"));this.m_tip3=(this.getChild("tip3"));this.m_noTip=(this.getChild("noTip"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_sendBtn=(this.getChild("sendBtn"));this.m_detailsBtn=(this.getChild("detailsBtn"))};ArtistShowStruct.URL="ui://aeg3jnlem8atr";ArtistShowStruct.DependPackages=["ArtistDic","WarMovie","Common","PfSkin"];return ArtistShowStruct}(fairygui.GComponent));ArtistDic.ArtistShowStruct=ArtistShowStruct})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var ArtistShow=(function(_super){__extends(ArtistShow,_super);function ArtistShow(){return _super!==null&&_super.apply(this,arguments)||this}ArtistShow.prototype.onShowDetailsBtn=function(){Game.menu.open(MenuId.ArtistDetail,this.actorData.id,Games.ArtistDetailTabType.Base)};ArtistShow.prototype.onSendBtn=function(){if(validateSendMsgBoard(this.m_input.text)){Game.protosender.story.setMessage(this.actorData.id,this.m_input.text);this.m_input.text=""}};ArtistShow.prototype.setData=function(actorData){this.m_talkList.numItems=0;this.actorData=actorData;var hasactor=Game.moduleModel.actor.hasActor(this.actorData.id);this.m_nameTip1.text=TEXT.ArtistDicUIDefName;this.m_tip1.text=TEXT.ArtistDicUIHowHave;this.m_nameTip2.text=this.actorData.name;this.m_icon.icon=Games.WarLoadPic.getActorIcon(this.actorData.avatar);if(hasactor){this.m_name.text=Game.moduleModel.actor.getActor(this.actorData.id).name;FguiHelper.clearFilters(this.m_icon);this.m_HaveNo.setSelectedIndex(0)}else{this.m_name.text=this.actorData.name;FguiHelper.half2Staturation(this.m_icon);this.m_HaveNo.setSelectedIndex(1)}this.m_starList.numItems=this.actorData.starNum;this.m_sexIcon.icon=Games.WarLoadPic.getActorTypeIcon(this.actorData.sex);this.m_countryIcon.icon=Games.WarLoadPic.getActorTypeIcon(this.actorData.country);this.m_ageIcon.icon=Games.WarLoadPic.getActorTypeIcon(this.actorData.show_type);this.m_showIcon.icon=Games.WarLoadPic.getActorTypeIcon(this.actorData.age_type);this.m_tip2.text=this.actorData.getway.replace("/n","\n");Game.protosender.story.getMessage(this.actorData.id)};ArtistShow.prototype.initItem=function(index,obj){var item=obj;item.updateView(this.talkMsg[index])};return ArtistShow}(ArtistDic.ArtistShowStruct));ArtistDic.ArtistShow=ArtistShow})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var SelectItemStruct=(function(_super){__extends(SelectItemStruct,_super);function SelectItemStruct(){return _super.call(this)||this}SelectItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDic","SelectItem"))};SelectItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_starNo=this.getController("starNo");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};SelectItemStruct.URL="ui://aeg3jnlem8at16";SelectItemStruct.DependPackages=["ArtistDic","Common"];return SelectItemStruct}(fairygui.GButton));ArtistDic.SelectItemStruct=SelectItemStruct})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var SelectItem=(function(_super){__extends(SelectItem,_super);function SelectItem(){return _super!==null&&_super.apply(this,arguments)||this}SelectItem.prototype.setData=function(numData){if(numData<6){this.m_starNo.setSelectedIndex(1);this.m_title.text=numData.toString()}else{this.m_starNo.setSelectedIndex(0);this.m_icon.icon=Games.WarLoadPic.getActorTypeIcon(numData)}this.selected=true};return SelectItem}(ArtistDic.SelectItemStruct));ArtistDic.SelectItem=SelectItem})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var SelectItem2Struct=(function(_super){__extends(SelectItem2Struct,_super);function SelectItem2Struct(){return _super.call(this)||this}SelectItem2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDic","SelectItem2"))};SelectItem2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"))};SelectItem2Struct.URL="ui://aeg3jnlem8at17";SelectItem2Struct.DependPackages=["ArtistDic","Common"];return SelectItem2Struct}(fairygui.GButton));ArtistDic.SelectItem2Struct=SelectItem2Struct})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var SelectItem2=(function(_super){__extends(SelectItem2,_super);function SelectItem2(){return _super!==null&&_super.apply(this,arguments)||this}SelectItem2.prototype.setData=function(protId){this.m_icon.icon=Games.WarLoadPic.getActorTypeIcon(protId)};return SelectItem2}(ArtistDic.SelectItem2Struct));ArtistDic.SelectItem2=SelectItem2})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var SelectItem3Struct=(function(_super){__extends(SelectItem3Struct,_super);function SelectItem3Struct(){return _super.call(this)||this}SelectItem3Struct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDic","SelectItem3"))};SelectItem3Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};SelectItem3Struct.URL="ui://aeg3jnlem8at18";SelectItem3Struct.DependPackages=["ArtistDic","Common"];return SelectItem3Struct}(fairygui.GButton));ArtistDic.SelectItem3Struct=SelectItem3Struct})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var SelectItem3=(function(_super){__extends(SelectItem3,_super);function SelectItem3(){return _super!==null&&_super.apply(this,arguments)||this}return SelectItem3}(ArtistDic.SelectItem3Struct));ArtistDic.SelectItem3=SelectItem3})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var StarStruct=(function(_super){__extends(StarStruct,_super);function StarStruct(){return _super.call(this)||this}StarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDic","Star"))};StarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};StarStruct.URL="ui://aeg3jnle8hl11b";StarStruct.DependPackages=["ArtistDic","Common"];return StarStruct}(fairygui.GComponent));ArtistDic.StarStruct=StarStruct})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var Star=(function(_super){__extends(Star,_super);function Star(){return _super!==null&&_super.apply(this,arguments)||this}return Star}(ArtistDic.StarStruct));ArtistDic.Star=Star})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var StarTitleStruct=(function(_super){__extends(StarTitleStruct,_super);function StarTitleStruct(){return _super.call(this)||this}StarTitleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("ArtistDic","StarTitle"))};StarTitleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};StarTitleStruct.URL="ui://aeg3jnlem8at13";StarTitleStruct.DependPackages=["ArtistDic"];return StarTitleStruct}(fairygui.GLabel));ArtistDic.StarTitleStruct=StarTitleStruct})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var ArtistDic;(function(ArtistDic){var StarTitle=(function(_super){__extends(StarTitle,_super);function StarTitle(){return _super!==null&&_super.apply(this,arguments)||this}return StarTitle}(ArtistDic.StarTitleStruct));ArtistDic.StarTitle=StarTitle})(ArtistDic=fgui.ArtistDic||(fgui.ArtistDic={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var ActorBgStruct=(function(_super){__extends(ActorBgStruct,_super);function ActorBgStruct(){return _super.call(this)||this}ActorBgStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Bag","actorBg"))};ActorBgStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};ActorBgStruct.URL="ui://wdrb9z06nd2wy";ActorBgStruct.DependPackages=["Bag","Common"];return ActorBgStruct}(fairygui.GComponent));Bag.ActorBgStruct=ActorBgStruct})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var ActorBg=(function(_super){__extends(ActorBg,_super);function ActorBg(){return _super!==null&&_super.apply(this,arguments)||this}return ActorBg}(Bag.ActorBgStruct));Bag.ActorBg=ActorBg})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var ActorItemStruct=(function(_super){__extends(ActorItemStruct,_super);function ActorItemStruct(){return _super.call(this)||this}ActorItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Bag","ActorItem"))};ActorItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_txtLv=(this.getChild("txtLv"));this.m_title=(this.getChild("title"));this.m_lvIcon=(this.getChild("lvIcon"));this.m_star=(this.getChild("star"))};ActorItemStruct.URL="ui://wdrb9z06n9f05";ActorItemStruct.DependPackages=["Bag","Common"];return ActorItemStruct}(fairygui.GButton));Bag.ActorItemStruct=ActorItemStruct})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var ActorItem=(function(_super){__extends(ActorItem,_super);function ActorItem(){return _super!==null&&_super.apply(this,arguments)||this}ActorItem.prototype.UpdateView=function(actorData){this.actorData=actorData;this.title=Games.TEXT.LVDot.format(actorData.loyaltyLevel);this.m_star.starNum=actorData.star;this.m_icon.url=Game.moduleModel.market.GetActorIcon(actorData.id);this.m_txtLv.text=Games.TEXT.LVDot.format(actorData.level)};return ActorItem}(Bag.ActorItemStruct));Bag.ActorItem=ActorItem})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var BagItemInfoStruct=(function(_super){__extends(BagItemInfoStruct,_super);function BagItemInfoStruct(){return _super.call(this)||this}BagItemInfoStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Bag","BagItemInfo"))};BagItemInfoStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_buttonType=this.getController("buttonType");this.m_txtName=(this.getChild("txtName"));this.m_txtInfo=(this.getChild("txtInfo"));this.m_labItem=(this.getChild("labItem"));this.m_labActor=(this.getChild("labActor"));this.m_labPrice=(this.getChild("labPrice"));this.m_btnSale=(this.getChild("btnSale"));this.m_btnUse=(this.getChild("btnUse"));this.m_btnInfo=(this.getChild("btnInfo"));this.m_btnResolve=(this.getChild("btnResolve"));this.m_btnGive=(this.getChild("btnGive"));this.m_btnCompound=(this.getChild("btnCompound"))};BagItemInfoStruct.URL="ui://wdrb9z06n9f00";BagItemInfoStruct.DependPackages=["Bag","Common","MainUI"];return BagItemInfoStruct}(fairygui.GComponent));Bag.BagItemInfoStruct=BagItemInfoStruct})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var BagItemInfo=(function(_super){__extends(BagItemInfo,_super);function BagItemInfo(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.GetItems=[];return _this}BagItemInfo.prototype.InitView=function(){this.m_btnCompound.onClick(this,this.OnBtnCompoundClick);this.m_btnGive.onClick(this,this.OnBtnGiveClick);this.m_btnResolve.onClick(this,this.OnBtnResolveClick);this.m_btnSale.onClick(this,this.OnBtnSaleClick);this.m_btnUse.onClick(this,this.OnBtnUseClick);this.m_btnInfo.onClick(this,this.OnBtnInfo)};BagItemInfo.prototype.UpdateView=function(id){this.itemData=Game.moduleModel.item.getItem(id);if(this.itemData.itemType==7||this.itemData.itemType==16){this.m_labActor.m_actor.m_icon.url=this.itemData.itemBodyIconUrl;this.m_labActor.title=this.itemData.itemNumTxt;this.m_labActor.star=this.itemData.itemStar;this.m_labActor.visible=true;this.m_labItem.visible=false}else{this.m_labItem.icon=this.itemData.itemIconUrl;this.m_labItem.title=this.itemData.itemNumTxt;this.m_labItem.star=this.itemData.itemStar;this.m_labActor.visible=false;this.m_labItem.visible=true}this.m_txtName.text=this.itemData.itemName;this.m_labPrice.icon=Game.moduleModel.item.getItem(3).itemIconUrl;this.m_labPrice.title=formatNumberUnit(this.itemData.itemConfig.price).toString();this.m_txtInfo.text=this.itemData.itemDes;this.UpdateButtonType()};BagItemInfo.prototype.UpdateButtonType=function(){if(this.itemData.itemType==6){if(this.itemData.splitItem.length==0){this.m_buttonType.setSelectedIndex(4)}else{if(this.itemData.compoundItem==null){this.m_buttonType.setSelectedIndex(5)}else{this.m_buttonType.setSelectedIndex(6)}}}else{var cfg=this.itemData.itemConfig;if(cfg.can_use&&cfg.can_sell){this.m_buttonType.setSelectedIndex(3)}else{if(cfg.can_sell){this.m_buttonType.setSelectedIndex(2)}else{if(cfg.can_use){this.m_buttonType.setSelectedIndex(1)}else{this.m_buttonType.setSelectedIndex(0)}}}}this.m_btnInfo.visible=this.itemData.itemType==7};BagItemInfo.prototype.OnBtnCompoundClick=function(){this.GetItems=[];var limit=this.itemData.compoundNum;if(limit==0){var needNum=this.itemData.compoundItem.itemNum-this.itemData.itemNum;Game.system.toastMsg(MsgKey.bag_no_compound_tips,needNum);return}Game.system.setNumText(limit,Games.TEXT.BagSelectCompoundNum,Games.TEXT.BagCompound,this,this.OnConfirmCompound)};BagItemInfo.prototype.OnConfirmCompound=function(itemNum){var item=new DTItemNum();item.itemId=this.itemData.compoundItem.itemId;item.itemNum=itemNum;this.GetItems.push(item);Game.protosender.item.Compound(this.itemData.uuid,this.itemData.itemId,itemNum)};BagItemInfo.prototype.OnBtnGiveClick=function(){var actorList=this.GetActorListByAsset();Game.system.selectActor(actorList,this.OnConfirmGiveActor,this,Games.TEXT.BagSelectGive)};BagItemInfo.prototype.GetActorListByAsset=function(){var list=[];var actorList=Game.moduleModel.actor.getActors();for(var i=0;i<actorList.length;i++){var actor=actorList[i];var assetList=actor.assets;for(var j=0;j<assetList.length;j++){var asset=assetList[j];var itemId=asset.item;if(itemId==this.itemData.itemId){list.push(actor);break}}}return list};BagItemInfo.prototype.OnConfirmGiveActor=function(actorId){Game.menu.open(MenuId.ArtistDetail,actorId,Games.ArtistDetailTabType.Asset)};BagItemInfo.prototype.OnBtnResolveClick=function(){this.GetItems=[];var limit=this.itemData.itemNum;Game.system.setNumText(limit,Games.TEXT.BagSelectResolveNum,Games.TEXT.BagResolve,this,this.OnConfirmResolve)};BagItemInfo.prototype.OnConfirmResolve=function(itemNum){for(var index=0;index<this.itemData.splitItem.length;index++){var item=new DTItemNum();item.itemId=this.itemData.splitItem[index].itemId;item.itemNum=this.itemData.splitItem[index].itemNum*itemNum;this.GetItems.push(item)}Game.protosender.item.Split(this.itemData.uuid,this.itemData.itemId,itemNum)};BagItemInfo.prototype.OnBtnSaleClick=function(){var limit=this.itemData.itemNum;Game.system.setNumText(limit,Games.TEXT.BagSelectSaleNum,Games.TEXT.BagSale,this,this.OnConfirmSale)};BagItemInfo.prototype.OnConfirmSale=function(num){var item=new DTItemNum();item.itemId=3;item.itemNum=num*this.itemData.itemConfig.price;this.GetItems=[item];Game.protosender.item.SellOut(this.itemData.uuid,this.itemData.itemId,num)};BagItemInfo.prototype.OnBtnUseClick=function(){if(!this.itemData.canUse){return}this.GetItems=[];switch(this.itemData.itemConfig.use_type){case Games.ItemUseType.AllReward:case Games.ItemUseType.RandomReward:Game.system.setNumText(this.itemData.itemNum,Games.TEXT.BagSelectUseNum,Games.TEXT.BagUse,this,this.OnConfirmUse);break;case Games.ItemUseType.ActorUse:var actorList=Game.moduleModel.actor.noEnoughStaminaActors;Game.system.selectActor(actorList,this.OnConfigUseWaterActor,this,Games.TEXT.BagSelectGive);break;case Games.ItemUseType.SelectReward:var itemlist=this.itemData.itemConfig.reward;Game.system.selectItem(itemlist,this,this.OnSelectReward);break;case Games.ItemUseType.None:this.CompoundActor();break;default:break}};BagItemInfo.prototype.OnSelectReward=function(index){var itemlist=this.itemData.itemConfig.reward;this.itemSelectReward=itemlist[index];if(this.itemData.itemNum==1){this.OnConfirmSelectReward(1)}else{Game.system.setNumText(this.itemData.itemNum,Games.TEXT.BagSelectUseNum,Games.TEXT.BagUse,this,this.OnConfirmSelectReward)}};BagItemInfo.prototype.OnConfirmSelectReward=function(itemNum){Game.protosender.item.UsePiecesGiftBag(this.itemData.uuid,this.itemData.itemId,itemNum,this.itemSelectReward.itemId)};BagItemInfo.prototype.OnConfirmUse=function(itemNum){Game.protosender.item.Use(this.itemData.uuid,this.itemData.itemId,itemNum)};BagItemInfo.prototype.OnConfigUseWaterActor=function(actorId){this.protoUseWaterActorId=actorId;var actor=Game.moduleModel.actor.getActor(actorId);var reward;if(this.itemData.itemConfig.reward.length>=1&&this.itemData.itemConfig.reward[0]!=null){reward=this.itemData.itemConfig.reward[0].itemNum}else{reward=1}var limit=Math.min(this.itemData.itemNum,Math.ceil((actor.staminaLimit-actor.stamina)/reward));Game.system.setNumText(limit,Games.TEXT.BagSelectGiveNum,Games.TEXT.BagGive,this,this.OnConfigUseWaterNum)};BagItemInfo.prototype.OnConfigUseWaterNum=function(itemNum){Game.protosender.item.UseActorSkillWater("",this.itemData.itemId,this.protoUseWaterActorId,itemNum)};BagItemInfo.prototype.CompoundActor=function(){if(Game.moduleModel.actor.actorIsMax){Game.system.confirmBuyText(Games.TEXT.AlertTextBuyActor,GlobalConfig.getValue1(GlobalKey.KEY_1009_ZuanDanZengJia__ShuLiangXiaoHao),null,function(){Game.protosender.Actor.addActorSlot()});return}if(this.itemData.compoundActor){var actorId=this.itemData.compoundActor.itemId;if(Game.moduleModel.actor.getActor(actorId)!=null){Game.system.toastMsg(MsgKey.bag_own_actor_tips);return}}var limit=this.itemData.compoundActorNum;if(limit==0){var needNum=this.itemData.compoundActor.itemNum-this.itemData.itemNum;Game.system.toastMsg(MsgKey.bag_no_compound_tips,needNum);return}Game.protosender.item.CompoundActor(this.itemData.uuid,this.itemData.itemId)};BagItemInfo.prototype.OnBtnInfo=function(){var actorId=this.itemData.compoundActor.itemId;Game.menu.open(MenuId.ActorDetail,actorId)};BagItemInfo.prototype.OnItemDataResponse=function(){};BagItemInfo.prototype.OnSellOutResponse=function(){Game.system.getItemText(this.GetItems)};BagItemInfo.prototype.OnCompoundResponse=function(){Game.system.getItemText(this.GetItems)};BagItemInfo.prototype.OnSplitResponse=function(){Game.system.getItemText(this.GetItems)};BagItemInfo.prototype.OnUseResponse=function(){};BagItemInfo.prototype.OnCompoundActorResponse=function(){};BagItemInfo.prototype.Show=function(){this.visible=true};BagItemInfo.prototype.Hide=function(){this.visible=false};return BagItemInfo}(Bag.BagItemInfoStruct));Bag.BagItemInfo=BagItemInfo})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var BagMainPanelStruct=(function(_super){__extends(BagMainPanelStruct,_super);function BagMainPanelStruct(){return _super.call(this)||this}BagMainPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Bag","BagMainPanel"))};BagMainPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_select=this.getController("select");this.m_isShowInfo=this.getController("isShowInfo");this.m_listTab=(this.getChild("listTab"));this.m_listBagItem=(this.getChild("listBagItem"));this.m_txtCapacity=(this.getChild("txtCapacity"));this.m_btnClose=(this.getChild("btnClose"));this.m_btnLv=(this.getChild("btnLv"));this.m_itemInfo=(this.getChild("itemInfo"))};BagMainPanelStruct.URL="ui://wdrb9z06n9f02";BagMainPanelStruct.DependPackages=["Bag","Common","MainUI"];return BagMainPanelStruct}(fairygui.GComponent));Bag.BagMainPanelStruct=BagMainPanelStruct})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var BagType;(function(BagType){})(BagType||(BagType={}));var BagMainPanel=(function(_super){__extends(BagMainPanel,_super);function BagMainPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.bagTab=[[4],[5,8,9,17],[6],[7,16]];return _this}BagMainPanel.prototype.onWindowInited=function(){this.m_btnClose.onClick(this,this.OnCloseClick);this.m_listBagItem.itemRenderer=new Handler(this,this.RenderItem,null,false);this.m_listBagItem.setVirtual();this.m_listBagItem.on(fairygui.Events.CLICK_ITEM,this,this.OnItemClick);this.m_listBagItem.itemProvider=new Handler(this,this.GetListItemResource,null,false);this.m_listTab.on(fairygui.Events.CLICK_ITEM,this,this.OnTabClick);this.m_btnLv.onClick(this,this.OnBtnLvClick);this.m_itemInfo.InitView()};BagMainPanel.prototype.onWindowShow=function(){this.AddProtoHandler();this.UpdateView()};BagMainPanel.prototype.onWindowHide=function(){this.RemoveProtoHandler()};BagMainPanel.prototype.UpdateView=function(){if(this.selectTab==null){this.selectTab=0}this.m_listTab.selectedIndex=this.selectTab;this.UpdateBagItemList();this.UpdateItemInfo();if(this.m_listTab.selectedIndex==0){this.m_txtCapacity.text=Game.moduleModel.bag.GetItemNumByType(4)+"/"+Game.moduleModel.bag.GetBagVolume()}this.UpdateRed()};BagMainPanel.prototype.UpdateRed=function(){var objGift=this.m_listTab.getChildAt(1);var objPact=this.m_listTab.getChildAt(3);objGift.Red=Game.moduleModel.bag.RedGift;objPact.Red=Game.moduleModel.bag.RedPact};BagMainPanel.prototype.UpdateBagItemList=function(){var itemTypes=this.GetItemTypes();this.itemList=Game.moduleModel.item.GetItemListByType(itemTypes);if(this.m_listTab.selectedIndex==3){this.itemList=this.itemList.sort(function(a,b){if(b.itemStar==a.itemStar){return a.itemId-b.itemId}return b.itemStar-a.itemStar})}this.m_listBagItem.numItems=this.itemList.length;var selectIndex=this.GetSelectIndex();this.m_listBagItem.selectedIndex=this.GetSelectIndex();var scrollIndex=selectIndex-this.m_listBagItem.columnCount>0?selectIndex-this.m_listBagItem.columnCount:0;this.m_listBagItem.scrollToView(scrollIndex,true,true)};BagMainPanel.prototype.GetItemTypes=function(){if(this.m_listTab.selectedIndex>=0&&this.m_listTab.selectedIndex<this.bagTab.length){return this.bagTab[this.m_listTab.selectedIndex]}return[]};BagMainPanel.prototype.GetSelectIndex=function(){if(this.selectItem==null){return -1}var itemType=this.selectItem.itemType;var itemTypes=this.GetItemTypes();if(itemTypes.indexOf(itemType)>=0){for(var index=0;index<this.itemList.length;index++){var item=this.itemList[index];if(item.itemId==this.selectItem.itemId){return index}}}return -1};BagMainPanel.prototype.UpdateItemInfo=function(){var itemData=this.selectItem;if(itemData==null||itemData.itemNum==0){this.m_isShowInfo.setSelectedIndex(0);this.m_itemInfo.Hide();return}this.m_isShowInfo.setSelectedIndex(1);this.m_itemInfo.UpdateView(itemData.itemId);this.m_itemInfo.Show()};BagMainPanel.prototype.OnCloseClick=function(){this.selectItem=null;this.selectTab=null;this.moduleWindow.menuClose()};BagMainPanel.prototype.RenderItem=function(index,obj){if(this.m_listTab.selectedIndex==3){var itemObj=obj;var data=this.itemList[index];itemObj.RenderItem(data)}else{var itemObj=obj;var data=this.itemList[index];itemObj.RenderItem(data)}};BagMainPanel.prototype.OnItemClick=function(obj){this.selectItem=this.itemList[this.m_listBagItem.selectedIndex];this.m_isShowInfo.setSelectedIndex(1);this.UpdateItemInfo()};BagMainPanel.prototype.OnTabClick=function(obj){this.selectTab=this.m_listTab.selectedIndex;this.UpdateView()};BagMainPanel.prototype.GetListItemResource=function(index){if(this.m_listTab.selectedIndex==3){return fgui.Bag.PactItem.URL}else{return fgui.Bag.PropItem.URL}};BagMainPanel.prototype.OnBtnLvClick=function(){var roomInfo=Game.moduleModel.building.getRoomByType(6);if(roomInfo){Game.menu.open(MenuId.BuildRoomUpgrade,roomInfo)}};BagMainPanel.prototype.AddProtoHandler=function(){Game.protoOkEvent.add(ProtoEventKey.item_SellOut,this.OnSellOutResponse,this);Game.protoOkEvent.add(ProtoEventKey.item_Compound,this.OnCompoundResponse,this);Game.protoOkEvent.add(ProtoEventKey.item_CompoundActor,this.OnCompoundActorResponse,this);Game.protoOkEvent.add(ProtoEventKey.item_Split,this.OnSplitResponse,this);Game.protoOkEvent.add(ProtoEventKey.item_Use,this.OnUseResponse,this);Game.protoOkEvent.add(ProtoEventKey.ItemData,this.OnItemDataResponse,this);Game.protoOkEvent.add(ProtoEventKey.CinemaBuild_UpgradeRoom,this.OnCinemaBuildUpgradeRoomResponse,this);Game.protoOkEvent.add(ProtoEventKey.CinemaBuild_BuildRoom,this.OnCinemaBuildUpgradeRoomResponse,this);Game.moduleModel.actor.sAddActorList.add(this.onAddActorHandler,this)};BagMainPanel.prototype.RemoveProtoHandler=function(){Game.protoOkEvent.remove(ProtoEventKey.item_SellOut,this.OnSellOutResponse,this);Game.protoOkEvent.remove(ProtoEventKey.item_Compound,this.OnCompoundResponse,this);Game.protoOkEvent.remove(ProtoEventKey.item_CompoundActor,this.OnCompoundActorResponse,this);Game.protoOkEvent.remove(ProtoEventKey.item_Split,this.OnSplitResponse,this);Game.protoOkEvent.remove(ProtoEventKey.item_Use,this.OnUseResponse,this);Game.protoOkEvent.remove(ProtoEventKey.ItemData,this.OnItemDataResponse,this);Game.protoOkEvent.remove(ProtoEventKey.CinemaBuild_UpgradeRoom,this.OnCinemaBuildUpgradeRoomResponse,this);Game.protoOkEvent.remove(ProtoEventKey.CinemaBuild_BuildRoom,this.OnCinemaBuildUpgradeRoomResponse,this);Game.moduleModel.actor.sAddActorList.remove(this.onAddActorHandler,this)};BagMainPanel.prototype.OnCinemaBuildUpgradeRoomResponse=function(){this.UpdateView()};BagMainPanel.prototype.OnItemDataResponse=function(){this.m_itemInfo.OnItemDataResponse();this.UpdateView()};BagMainPanel.prototype.OnSellOutResponse=function(){this.m_itemInfo.OnSellOutResponse();this.UpdateView()};BagMainPanel.prototype.OnCompoundResponse=function(){this.m_itemInfo.OnCompoundResponse();this.UpdateView()};BagMainPanel.prototype.OnSplitResponse=function(){this.m_itemInfo.OnSplitResponse();this.UpdateView()};BagMainPanel.prototype.OnUseResponse=function(){this.m_itemInfo.OnUseResponse();this.UpdateView()};BagMainPanel.prototype.OnCompoundActorResponse=function(){this.m_itemInfo.OnCompoundActorResponse();this.UpdateView()};BagMainPanel.prototype.onAddActorHandler=function(data){Game.menu.open(MenuId.ArtistScoutSuccess,data)};return BagMainPanel}(Bag.BagMainPanelStruct));Bag.BagMainPanel=BagMainPanel})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var BtnTabStruct=(function(_super){__extends(BtnTabStruct,_super);function BtnTabStruct(){return _super.call(this)||this}BtnTabStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Bag","btnTab"))};BtnTabStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_grayed=this.getController("grayed");this.m_title=(this.getChild("title"));this.m_red=(this.getChild("red"))};BtnTabStruct.URL="ui://wdrb9z06kvagr";BtnTabStruct.DependPackages=["Bag","MainUI","Common"];return BtnTabStruct}(fairygui.GButton));Bag.BtnTabStruct=BtnTabStruct})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var BtnTab=(function(_super){__extends(BtnTab,_super);function BtnTab(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(BtnTab.prototype,"Red",{set:function(num){this.m_red.m_num.text=num.toString();this.m_red.visible=num>0},enumerable:true,configurable:true});return BtnTab}(Bag.BtnTabStruct));Bag.BtnTab=BtnTab})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var MarketLabAssetStruct=(function(_super){__extends(MarketLabAssetStruct,_super);function MarketLabAssetStruct(){return _super.call(this)||this}MarketLabAssetStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Bag","MarketLabAsset"))};MarketLabAssetStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_trColor=this.getController("trColor");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};MarketLabAssetStruct.URL="ui://wdrb9z06nd2w11";MarketLabAssetStruct.DependPackages=["Bag","Common"];return MarketLabAssetStruct}(fairygui.GLabel));Bag.MarketLabAssetStruct=MarketLabAssetStruct})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var MarketLabAsset=(function(_super){__extends(MarketLabAsset,_super);function MarketLabAsset(){return _super!==null&&_super.apply(this,arguments)||this}return MarketLabAsset}(Bag.MarketLabAssetStruct));Bag.MarketLabAsset=MarketLabAsset})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var PactItemStruct=(function(_super){__extends(PactItemStruct,_super);function PactItemStruct(){return _super.call(this)||this}PactItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Bag","PactItem"))};PactItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_state=this.getController("state");this.m_title=(this.getChild("title"));this.m_actor=(this.getChild("actor"));this.m_star=(this.getChild("star"))};PactItemStruct.URL="ui://wdrb9z06n9f09";PactItemStruct.DependPackages=["Bag","Common"];return PactItemStruct}(fairygui.GButton));Bag.PactItemStruct=PactItemStruct})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var PactItem=(function(_super){__extends(PactItem,_super);function PactItem(){return _super!==null&&_super.apply(this,arguments)||this}PactItem.prototype.RenderItem=function(data){this.m_actor.m_icon.url=data.itemBodyIconUrl;this.title=data.itemNumTxt;this.star=data.itemStar;var actorId=data.itemConfig.actor_id;var actorNum=data.itemConfig.actor_num;var actor=Game.moduleModel.actor.getActor(actorId);if(actor){this.m_state.setSelectedIndex(1)}else{if(actorNum<=data.itemNum){this.m_state.setSelectedIndex(2)}else{this.m_state.setSelectedIndex(0)}}};Object.defineProperty(PactItem.prototype,"star",{set:function(num){this.m_star.starNum=num},enumerable:true,configurable:true});return PactItem}(Bag.PactItemStruct));Bag.PactItem=PactItem})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var PropItemStruct=(function(_super){__extends(PropItemStruct,_super);function PropItemStruct(){return _super.call(this)||this}PropItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Bag","PropItem"))};PropItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_type=this.getController("type");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_star=(this.getChild("star"));this.m_red=(this.getChild("red"))};PropItemStruct.URL="ui://wdrb9z06n9f0e";PropItemStruct.DependPackages=["Bag","Common","MainUI"];return PropItemStruct}(fairygui.GButton));Bag.PropItemStruct=PropItemStruct})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var PropItem=(function(_super){__extends(PropItem,_super);function PropItem(){return _super!==null&&_super.apply(this,arguments)||this}PropItem.prototype.RenderItem=function(data){this.icon=data.itemIconUrl;this.title=data.itemNumTxt;this.star=data.itemStar;this.Red=data.red};Object.defineProperty(PropItem.prototype,"star",{set:function(num){this.m_star.starNum=num},enumerable:true,configurable:true});Object.defineProperty(PropItem.prototype,"Red",{set:function(isShow){this.m_red.m_num.text="";this.m_red.visible=isShow},enumerable:true,configurable:true});return PropItem}(Bag.PropItemStruct));Bag.PropItem=PropItem})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var SystemSelectActorPanelStruct=(function(_super){__extends(SystemSelectActorPanelStruct,_super);function SystemSelectActorPanelStruct(){return _super.call(this)||this}SystemSelectActorPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Bag","SystemSelectActorPanel"))};SystemSelectActorPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_list=(this.getChild("list"));this.m_tipNoActor=(this.getChild("tipNoActor"));this.m_btnClose=(this.getChild("btnClose"));this.m_btnConfirm=(this.getChild("btnConfirm"))};SystemSelectActorPanelStruct.URL="ui://wdrb9z06n9f03";SystemSelectActorPanelStruct.DependPackages=["Bag","Common"];return SystemSelectActorPanelStruct}(fairygui.GComponent));Bag.SystemSelectActorPanelStruct=SystemSelectActorPanelStruct})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Bag;(function(Bag){var SystemSelectActorPanel=(function(_super){__extends(SystemSelectActorPanel,_super);function SystemSelectActorPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.NAME_ITEM="ActorItem";return _this}SystemSelectActorPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnClose.onClick(this,this.OnCloseClick);this.m_btnConfirm.onClick(this,this.OnSelect);this.m_list.itemRenderer=Handler.create(this,this.RenderListItem,null,false);this.m_list.setVirtual()};SystemSelectActorPanel.prototype.open=function(actorList,_onselect,caller,title){this.m_list.selectNone();this.onSelect=_onselect;this.caller=caller;this.m_title.text=title;this.actorList=actorList;this.m_list.numItems=this.actorList.length;this.m_list.refreshVirtualList();this.m_tipNoActor.visible=this.actorList.length==0;Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);centerScreen(this)};SystemSelectActorPanel.prototype.OnSelect=function(){var itemIndex=this.m_list.selectedIndex;if(itemIndex>this.actorList.length-1||itemIndex<0){Game.system.toastText(Games.TEXT.BagSelectActor);return}var actor=this.actorList[itemIndex];if(actor==null){Game.system.toastText(Games.TEXT.BagSelectActor);return}if(this.onSelect){if(this.caller){this.onSelect.apply(this.caller,[actor.id])}else{this.onSelect(actor.id)}}this.close()};SystemSelectActorPanel.prototype.RenderListItem=function(index,obj){var item=obj;item.name=this.NAME_ITEM+index;var data=this.actorList[index];item.setPivot(0.5,0.5);item.UpdateView(data)};SystemSelectActorPanel.prototype.OnCloseClick=function(){this.close()};SystemSelectActorPanel.prototype.close=function(){Games.MenuLayer.hideDialogModel();this.onHide()};SystemSelectActorPanel.prototype.onHide=function(){this.removeFromParent()};return SystemSelectActorPanel}(Bag.SystemSelectActorPanelStruct));Bag.SystemSelectActorPanel=SystemSelectActorPanel})(Bag=fgui.Bag||(fgui.Bag={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var ActorNpcSeatStruct=(function(_super){__extends(ActorNpcSeatStruct,_super);function ActorNpcSeatStruct(){return _super.call(this)||this}ActorNpcSeatStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","ActorNpcSeat"))};ActorNpcSeatStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_pos1=(this.getChild("pos1"));this.m_pos2=(this.getChild("pos2"));this.m_btnNpcTip1=(this.getChild("btnNpcTip1"));this.m_btnNpcTip2=(this.getChild("btnNpcTip2"))};ActorNpcSeatStruct.URL="ui://d062jvkgu8cee149";ActorNpcSeatStruct.DependPackages=["Building","Common"];return ActorNpcSeatStruct}(fairygui.GComponent));Building.ActorNpcSeatStruct=ActorNpcSeatStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var ActorNpcSeat=(function(_super){__extends(ActorNpcSeat,_super);function ActorNpcSeat(){return _super!==null&&_super.apply(this,arguments)||this}return ActorNpcSeat}(Building.ActorNpcSeatStruct));Building.ActorNpcSeat=ActorNpcSeat})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var AssetItemStruct=(function(_super){__extends(AssetItemStruct,_super);function AssetItemStruct(){return _super.call(this)||this}AssetItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","AssetItem"))};AssetItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_assetCtrl=this.getController("assetCtrl");this.m_assetNum=(this.getChild("assetNum"));this.m_assetLoad=(this.getChild("assetLoad"))};AssetItemStruct.URL="ui://d062jvkgo11z122";AssetItemStruct.DependPackages=["Building"];return AssetItemStruct}(fairygui.GComponent));Building.AssetItemStruct=AssetItemStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var AssetItem=(function(_super){__extends(AssetItem,_super);function AssetItem(){return _super!==null&&_super.apply(this,arguments)||this}return AssetItem}(Building.AssetItemStruct));Building.AssetItem=AssetItem})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var AvatarDisplayObjectStruct=(function(_super){__extends(AvatarDisplayObjectStruct,_super);function AvatarDisplayObjectStruct(){return _super.call(this)||this}AvatarDisplayObjectStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","AvatarDisplayObject"))};AvatarDisplayObjectStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};AvatarDisplayObjectStruct.URL="ui://d062jvkgkxna128";AvatarDisplayObjectStruct.DependPackages=["Building"];return AvatarDisplayObjectStruct}(fairygui.GComponent));Building.AvatarDisplayObjectStruct=AvatarDisplayObjectStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var AvatarDisplayObject=(function(_super){__extends(AvatarDisplayObject,_super);function AvatarDisplayObject(){return _super!==null&&_super.apply(this,arguments)||this}return AvatarDisplayObject}(Building.AvatarDisplayObjectStruct));Building.AvatarDisplayObject=AvatarDisplayObject})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BtnNpcTipsStruct=(function(_super){__extends(BtnNpcTipsStruct,_super);function BtnNpcTipsStruct(){return _super.call(this)||this}BtnNpcTipsStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BtnNpcTips"))};BtnNpcTipsStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};BtnNpcTipsStruct.URL="ui://d062jvkggy5h13r";BtnNpcTipsStruct.DependPackages=["Building","PfSkin","Common"];return BtnNpcTipsStruct}(fairygui.GButton));Building.BtnNpcTipsStruct=BtnNpcTipsStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BtnNpcTips=(function(_super){__extends(BtnNpcTips,_super);function BtnNpcTips(){return _super!==null&&_super.apply(this,arguments)||this}BtnNpcTips.prototype.setInfo=function(iconId,title){this.m_icon.url=Game.config.avatar.GetIconUrl(iconId);this.m_title.text=title};BtnNpcTips.prototype.setItemInfo=function(itemId,title){this.m_icon.url=Game.config.item.getItemIcon(itemId);this.m_title.text=title};Object.defineProperty(BtnNpcTips.prototype,"scaleXY",{set:function(val){this.setScale(val,val)},enumerable:true,configurable:true});return BtnNpcTips}(Building.BtnNpcTipsStruct));Building.BtnNpcTips=BtnNpcTips})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var Btn_addStruct=(function(_super){__extends(Btn_addStruct,_super);function Btn_addStruct(){return _super.call(this)||this}Btn_addStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","btn_add"))};Btn_addStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_addStruct.URL="ui://d062jvkgitjo13l";Btn_addStruct.DependPackages=["Building","Common"];return Btn_addStruct}(fairygui.GButton));Building.Btn_addStruct=Btn_addStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var Btn_add=(function(_super){__extends(Btn_add,_super);function Btn_add(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_add}(Building.Btn_addStruct));Building.Btn_add=Btn_add})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var Btn_buildFloorStruct=(function(_super){__extends(Btn_buildFloorStruct,_super);function Btn_buildFloorStruct(){return _super.call(this)||this}Btn_buildFloorStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","btn_buildFloor"))};Btn_buildFloorStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_Title=(this.getChild("Title"))};Btn_buildFloorStruct.URL="ui://d062jvkgcpc911k";Btn_buildFloorStruct.DependPackages=["Building"];return Btn_buildFloorStruct}(fairygui.GButton));Building.Btn_buildFloorStruct=Btn_buildFloorStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var Btn_buildFloor=(function(_super){__extends(Btn_buildFloor,_super);function Btn_buildFloor(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_buildFloor}(Building.Btn_buildFloorStruct));Building.Btn_buildFloor=Btn_buildFloor})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var Btn_buildRoomStruct=(function(_super){__extends(Btn_buildRoomStruct,_super);function Btn_buildRoomStruct(){return _super.call(this)||this}Btn_buildRoomStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","btn_buildRoom"))};Btn_buildRoomStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_Title=(this.getChild("Title"))};Btn_buildRoomStruct.URL="ui://d062jvkg8zgr3n";Btn_buildRoomStruct.DependPackages=["Building","Common"];return Btn_buildRoomStruct}(fairygui.GButton));Building.Btn_buildRoomStruct=Btn_buildRoomStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var Btn_buildRoom=(function(_super){__extends(Btn_buildRoom,_super);function Btn_buildRoom(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_buildRoom}(Building.Btn_buildRoomStruct));Building.Btn_buildRoom=Btn_buildRoom})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var Btn_roomTipStruct=(function(_super){__extends(Btn_roomTipStruct,_super);function Btn_roomTipStruct(){return _super.call(this)||this}Btn_roomTipStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","btn_roomTip"))};Btn_roomTipStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_roomTipStruct.URL="ui://d062jvkgcpc911h";Btn_roomTipStruct.DependPackages=["Building","Common"];return Btn_roomTipStruct}(fairygui.GButton));Building.Btn_roomTipStruct=Btn_roomTipStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var Btn_roomTip=(function(_super){__extends(Btn_roomTip,_super);function Btn_roomTip(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_roomTip}(Building.Btn_roomTipStruct));Building.Btn_roomTip=Btn_roomTip})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildCinemaScreenStruct=(function(_super){__extends(BuildCinemaScreenStruct,_super);function BuildCinemaScreenStruct(){return _super.call(this)||this}BuildCinemaScreenStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildCinemaScreen"))};BuildCinemaScreenStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_screenPart=(this.getChild("screenPart"))};BuildCinemaScreenStruct.URL="ui://d062jvkgcrx7e14a";BuildCinemaScreenStruct.DependPackages=["Building"];return BuildCinemaScreenStruct}(fairygui.GComponent));Building.BuildCinemaScreenStruct=BuildCinemaScreenStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildCinemaScreen=(function(_super){__extends(BuildCinemaScreen,_super);function BuildCinemaScreen(){return _super!==null&&_super.apply(this,arguments)||this}return BuildCinemaScreen}(Building.BuildCinemaScreenStruct));Building.BuildCinemaScreen=BuildCinemaScreen})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildListItemIconStruct=(function(_super){__extends(BuildListItemIconStruct,_super);function BuildListItemIconStruct(){return _super.call(this)||this}BuildListItemIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildListItemIcon"))};BuildListItemIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_room_icon=(this.getChild("room_icon"))};BuildListItemIconStruct.URL="ui://d062jvkgfv9e13b";BuildListItemIconStruct.DependPackages=["Building","Activity"];return BuildListItemIconStruct}(fairygui.GComponent));Building.BuildListItemIconStruct=BuildListItemIconStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildListItemIcon=(function(_super){__extends(BuildListItemIcon,_super);function BuildListItemIcon(){return _super!==null&&_super.apply(this,arguments)||this}return BuildListItemIcon}(Building.BuildListItemIconStruct));Building.BuildListItemIcon=BuildListItemIcon})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildRoomStruct=(function(_super){__extends(BuildRoomStruct,_super);function BuildRoomStruct(){return _super.call(this)||this}BuildRoomStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildRoom"))};BuildRoomStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Button=this.getController("Button");this.m_buildScene=(this.getChild("buildScene"));this.m_buildSceneUI=(this.getChild("buildSceneUI"))};BuildRoomStruct.URL="ui://d062jvkgor9t1";BuildRoomStruct.DependPackages=["Building"];return BuildRoomStruct}(fairygui.GComponent));Building.BuildRoomStruct=BuildRoomStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildRoom=(function(_super){__extends(BuildRoom,_super);function BuildRoom(){return _super!==null&&_super.apply(this,arguments)||this}return BuildRoom}(Building.BuildRoomStruct));Building.BuildRoom=BuildRoom})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildRoomListStruct=(function(_super){__extends(BuildRoomListStruct,_super);function BuildRoomListStruct(){return _super.call(this)||this}BuildRoomListStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildRoomList"))};BuildRoomListStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_roomList=(this.getChild("roomList"));this.m_topAsset=(this.getChild("topAsset"))};BuildRoomListStruct.URL="ui://d062jvkgcpc911f";BuildRoomListStruct.DependPackages=["Building","Common"];return BuildRoomListStruct}(fairygui.GComponent));Building.BuildRoomListStruct=BuildRoomListStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildRoomList=(function(_super){__extends(BuildRoomList,_super);function BuildRoomList(){var _this=_super.call(this)||this;_this.roomInfoList=[];return _this}BuildRoomList.prototype.onWindowInited=function(){};BuildRoomList.prototype.onWindowShow=function(){};BuildRoomList.prototype.onWindowHide=function(){};BuildRoomList.prototype.init=function(floor){this.setTopAssets();this.floor=floor;this.roomInfoList.length=0;var configRooms=this.getBuildRoomList();for(var _i=0,configRooms_1=configRooms;_i<configRooms_1.length;_i++){var room=configRooms_1[_i];var info=new Games.RoomInfo();info.id=room.id;info.name=room.name;info.type=room.type;if(this.isRoomBuilded(room.type)){info.isBuilded=true}this.roomInfoList.push(info)}this.showRoomList()};BuildRoomList.prototype.setTopAssets=function(){this.m_topAsset.m_assetList.removeChildrenToPool();var asset=this.m_topAsset.m_assetList.addItemFromPool();asset.setItemId(Games.AssetType.Tile);this.m_topAsset.m_assetList.addChild(asset);asset=this.m_topAsset.m_assetList.addItemFromPool();asset.setItemId(Games.AssetType.Glass);this.m_topAsset.m_assetList.addChild(asset);asset=this.m_topAsset.m_assetList.addItemFromPool();asset.setItemId(Games.AssetType.Wood);this.m_topAsset.m_assetList.addChild(asset);asset=this.m_topAsset.m_assetList.addItemFromPool();asset.setItemId(Games.AssetType.Cement);this.m_topAsset.m_assetList.addChild(asset)};BuildRoomList.prototype.showRoomList=function(){var _this=this;var sortId=function(valA,valB){return valA.id-valB.id};var sortHasBuild=function(valA,valB){if(valA.isBuilded&&!valB.isBuilded){return 1}else{if(!valA.isBuilded&&valB.isBuilded){return -1}}return sortId(valA,valB)};this.roomInfoList=this.roomInfoList.sort(function(valA,valB){var checkA=_this.checkAll(valA);var checkB=_this.checkAll(valB);if(checkA.result&&!checkB.result){return -1}else{if(!checkA.result&&checkB.result){return 1}else{return sortHasBuild(valA,valB)}}});this.m_roomList.scrollItemToViewOnClick=false;this.m_roomList.removeChildrenToPool();for(var _i=0,_a=this.roomInfoList;_i<_a.length;_i++){var roomInfo=_a[_i];var buildRoom=this.m_roomList.addItemFromPool();buildRoom.setInfo(roomInfo);this.m_roomList.addChild(buildRoom);buildRoom.m_btn_roomTip.onClick(this,this.onRoomTip);if(!roomInfo.isBuilded){buildRoom.m_touch.onClick(this,this.onRoomSelect,[roomInfo])}var checkAll=this.checkAll(roomInfo);if(!checkAll.result){buildRoom.setBuildLock(checkAll.reason)}}this.m_topAsset.m_btn_topClose.onClick(this,this.onClose)};BuildRoomList.prototype.checkAll=function(roomInfo){var checkResult={result:true,reason:""};var checkIsBuilded=this.checkIsBuilded(roomInfo);var checkLevel=this.checkLevel(roomInfo);var checkBlock=this.checkBlock(roomInfo);var checkPrevTypeLevel=this.checkPrevTypeLevel(roomInfo);if(!checkIsBuilded.result){checkResult.result=false;checkResult.reason+=checkIsBuilded.reason;return checkResult}if(!checkLevel.result){checkResult.result=false;checkResult.reason+=checkLevel.reason+";"}if(!checkBlock.result){checkResult.result=false;checkResult.reason+=checkBlock.reason+";"}if(!checkPrevTypeLevel.result){checkResult.result=false;checkResult.reason+=checkPrevTypeLevel.reason+";"}checkResult.reason=checkResult.reason.replace(";;",";");checkResult.reason=checkResult.reason.substring(0,checkResult.reason.length-1);return checkResult};BuildRoomList.prototype.checkPrevTypeLevel=function(roomInfo){var checkResult={result:true,reason:""};var typeLevelList=Game.config.buildingLevel.getConfig(roomInfo.id).type_level;for(var _i=0,typeLevelList_1=typeLevelList;_i<typeLevelList_1.length;_i++){var typeLevel=typeLevelList_1[_i];if(typeLevel.type!=roomInfo.type){var buildRoomInfo=Game.moduleModel.building.getRoomByType(typeLevel.type);if(!buildRoomInfo){checkResult.result=false;var lv=typeLevel.level==1?"":typeLevel.level;var msg=Game.config.msg.getTxtFormat(MsgKey.build_non_prebuilding,this.getRoomNameByType(typeLevel.type),lv);checkResult.reason+=msg+";"}else{if(buildRoomInfo.level<typeLevel.level){checkResult.result=false;var lv=typeLevel.level==1?"":typeLevel.level;var msg=Game.config.msg.getTxtFormat(MsgKey.build_non_prebuilding,this.getRoomNameByType(typeLevel.type),lv);checkResult.reason+=msg+";"}}}}return checkResult};BuildRoomList.prototype.checkIsBuilded=function(roomInfo){var checkResult={result:true,reason:""};if(roomInfo.isBuilded){checkResult.result=false;checkResult.reason=Game.config.msg.getTxt(MsgKey.build_be_builded)}return checkResult};BuildRoomList.prototype.checkLevel=function(roomInfo){var checkResult={result:true,reason:""};var levelReq=Game.config.buildingLevel.getConfig(roomInfo.id).level_req;if(levelReq>User.info.level){checkResult.result=false;var msg=Game.config.msg.getTxtFormat(MsgKey.build_non_level,levelReq);checkResult.reason=msg;return checkResult}return checkResult};BuildRoomList.prototype.checkBlock=function(roomInfo){var checkResult={result:true,reason:""};var blockReq=Game.config.buildingLevel.getConfig(roomInfo.id).block_req;if(blockReq>User.info.stall){checkResult.result=false;var blockCfg=Game.config.blockLevel.getConfig(blockReq);var msg=Game.config.msg.getTxtFormat(MsgKey.build_non_block,blockCfg.name);checkResult.reason=msg;return checkResult}return checkResult};BuildRoomList.prototype.getRoomNameByType=function(roomType){var list=Game.config.buildingLevel.getConfigList();for(var _i=0,list_1=list;_i<list_1.length;_i++){var room=list_1[_i];if(room.type==roomType){return room.name}}};BuildRoomList.prototype.onRoomSelect=function(roomInfo){var _this=this;if(this.checkCost(roomInfo)){var checkAll=this.checkAll(roomInfo);if(!checkAll.result){return}if(roomInfo.isBuilded){return}Game.system.confirmText(Game.config.msg.getTxtFormat(MsgKey.build_confirm,roomInfo.name),"",null,function(){Game.sound.playSound(SoundKey.MM06_Building);Game.protosender.CinemaBuild.BuildRoom(_this.floor,roomInfo.type);_this.dispose();Games.AvatarManager.stopTimeAlloc()},null)}};BuildRoomList.prototype.onRoomTip=function(){};BuildRoomList.prototype.checkCost=function(roomInfo){var costItemList=Game.config.buildingLevel.getConfig(roomInfo.id).cost;for(var _i=0,costItemList_1=costItemList;_i<costItemList_1.length;_i++){var cost=costItemList_1[_i];var itemcfg=Game.config.item.getConfig(cost.itemId);var hasItemNum=Game.moduleModel.item.getItemNum(cost.itemId);if(cost.itemNum>hasItemNum){Game.system.openItemWay(cost.itemId,cost.itemNum);return false}}return true};BuildRoomList.prototype.isRoomBuilded=function(type){var buildingRoomInfoList=Game.moduleModel.building.getInfoList();for(var _i=0,buildingRoomInfoList_1=buildingRoomInfoList;_i<buildingRoomInfoList_1.length;_i++){var info=buildingRoomInfoList_1[_i];if(info.type==type){return true}}return false};BuildRoomList.prototype.getBuildRoomList=function(){var result=[];var roomListConfig=Game.config.buildingLevel.getConfigList();for(var _i=0,roomListConfig_1=roomListConfig;_i<roomListConfig_1.length;_i++){var source=roomListConfig_1[_i];var isMatch=false;for(var _a=0,result_1=result;_a<result_1.length;_a++){var des=result_1[_a];if(des.type==source.type){isMatch=true}}if(!isMatch){result.push(source)}}return result};BuildRoomList.prototype.dispose=function(){Game.menu.close(MenuId.BuildRoomList)};BuildRoomList.prototype.onClose=function(){this.dispose()};BuildRoomList.prototype.getRoomAndScrollTop=function(roomType){var index=this.getRoomIndexByType(roomType);if(index<0||index>this.m_roomList.numChildren-1){return}this.m_roomList.scrollToView(index,false,true);return this.m_roomList.getChildAt(index)};BuildRoomList.prototype.getRoomIndexByType=function(roomType){var num=this.m_roomList.numChildren;for(var i=0;i<num;i++){var roomInfoItem=this.m_roomList.getChildAt(i);if(roomInfoItem.info.type==roomType){return i}}return -1};return BuildRoomList}(Building.BuildRoomListStruct));Building.BuildRoomList=BuildRoomList})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildRoomTipsStruct=(function(_super){__extends(BuildRoomTipsStruct,_super);function BuildRoomTipsStruct(){return _super.call(this)||this}BuildRoomTipsStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildRoomTips"))};BuildRoomTipsStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_effectText1=(this.getChild("effectText1"));this.m_effectValue1=(this.getChild("effectValue1"));this.m_effectText2=(this.getChild("effectText2"));this.m_effectValue2=(this.getChild("effectValue2"));this.m_t0=this.getTransition("t0")};BuildRoomTipsStruct.URL="ui://d062jvkgi24u12c";BuildRoomTipsStruct.DependPackages=["Building","Common"];return BuildRoomTipsStruct}(fairygui.GComponent));Building.BuildRoomTipsStruct=BuildRoomTipsStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildRoomTips=(function(_super){__extends(BuildRoomTips,_super);function BuildRoomTips(){return _super!==null&&_super.apply(this,arguments)||this}return BuildRoomTips}(Building.BuildRoomTipsStruct));Building.BuildRoomTips=BuildRoomTips})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildRoomUpgradeStruct=(function(_super){__extends(BuildRoomUpgradeStruct,_super);function BuildRoomUpgradeStruct(){return _super.call(this)||this}BuildRoomUpgradeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildRoomUpgrade"))};BuildRoomUpgradeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_minImage=(this.getChild("minImage"));this.m_bg=(this.getChild("bg"));this.m_txt_name=(this.getChild("txt_name"));this.m_needAssetList=(this.getChild("needAssetList"));this.m_maxLevelDesc=(this.getChild("maxLevelDesc"));this.m_maxLevelGroup=(this.getChild("maxLevelGroup"));this.m_scenePart=(this.getChild("scenePart"));this.m_topAsset=(this.getChild("topAsset"));this.m_curLevelProp=(this.getChild("curLevelProp"));this.m_nextLevelProp=(this.getChild("nextLevelProp"));this.m_btn_confirm=(this.getChild("btn_confirm"));this.m_btn_levelup=(this.getChild("btn_levelup"))};BuildRoomUpgradeStruct.URL="ui://d062jvkg8zgr3o";BuildRoomUpgradeStruct.DependPackages=["Building","Common","System"];return BuildRoomUpgradeStruct}(fairygui.GComponent));Building.BuildRoomUpgradeStruct=BuildRoomUpgradeStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var MenuLayer=Games.MenuLayer;var BuildRoomUpgrade=(function(_super){__extends(BuildRoomUpgrade,_super);function BuildRoomUpgrade(){return _super!==null&&_super.apply(this,arguments)||this}BuildRoomUpgrade.prototype.onWindowInited=function(){};BuildRoomUpgrade.prototype.onWindowDestory=function(){console.log("123")};BuildRoomUpgrade.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.CinemaBuild_UpgradeRoom,this.onServerRoomUpgrade,this)};BuildRoomUpgrade.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.CinemaBuild_UpgradeRoom,this.onServerRoomUpgrade,this);this.removeRoomPart()};BuildRoomUpgrade.prototype.onServerRoomUpgrade=function(msg){var roomInfo=Game.moduleModel.building.getRoomInfo(msg.roomId);this.setInfo(roomInfo);this.onUpgradeSuccess();Games.Static.Instance.onUserorbit("building",roomInfo.floor+"&"+msg.roomId,"upgrade")};BuildRoomUpgrade.prototype.setInfo=function(info){this.info=info;var maxLevel=this.getBuildRoomMaxLevel(info.type);var curentCfg=Game.config.buildingLevel.getConfig(info.id);var nextId=info.id+1;var nextCfg=Game.config.buildingLevel.getConfig(nextId);this.m_minImage.url=Res.getRoom(info.type);this.loadRoomPart();this.m_btn_levelup.m_title.text=TEXT.BuildLevelup;this.m_btn_confirm.m_title.text=TEXT.BuildConfirm;this.setCurrentProp(curentCfg);this.setNextProp(nextCfg);this.setLevelupCost(nextCfg);if(curentCfg.level<maxLevel){this.m_btn_levelup.visible=true;this.m_btn_confirm.visible=false;this.m_maxLevelGroup.visible=false;this.m_txt_name.text=info.name}else{this.m_txt_name.text=info.name;this.m_btn_confirm.visible=false;this.m_btn_levelup.visible=false;this.m_maxLevelGroup.visible=true;this.m_nextLevelProp.m_list.removeChildrenToPool();this.m_nextLevelProp.m_title.text="";this.m_needAssetList.removeChildrenToPool();this.m_topAsset.m_assetList.removeChildrenToPool()}this.m_topAsset.m_btn_topClose.onClick(this,this.onClose);this.m_btn_confirm.onClick(this,this.onConfirm);this.m_btn_levelup.onClick(this,this.onUpgradeClick);if(this.checkLevelCondition()){FguiHelper.clearFilters(this.m_btn_levelup)}else{FguiHelper.setGray(this.m_btn_levelup);this.m_btn_levelup.m_title.text=format(Games.TEXT.CompanyLevel,nextCfg.level_req)}};BuildRoomUpgrade.prototype.loadRoomPart=function(){if(!this.info){return}switch(this.info.type){case Games.RoomType.Cinema:this.roomPart=fgui.Building.BuildScene1.createInstance();break}if(this.roomPart){this.m_scenePart.addChild(this.roomPart)}};BuildRoomUpgrade.prototype.removeRoomPart=function(){if(this.roomPart){this.roomPart.removeFromParent();this.roomPart.dispose();this.roomPart=null}};BuildRoomUpgrade.prototype.setCurrentProp=function(cfg){this.m_curLevelProp.m_title.text=format(TEXT.BuildLevel,cfg.level);this.m_curLevelProp.m_list.removeChildrenToPool();var effects=cfg.effect_id;for(var _i=0,effects_1=effects;_i<effects_1.length;_i++){var effectId=effects_1[_i];var effectCfg=Game.config.buildingEffect.getConfig(effectId);var itemProp=this.m_curLevelProp.m_list.addItemFromPool();itemProp.getChild("title").text=effectCfg.effect_des;this.m_curLevelProp.m_list.addChild(itemProp)}};BuildRoomUpgrade.prototype.setNextProp=function(cfg){if(cfg==null){return}this.m_nextLevelProp.m_title.text=format(TEXT.BuildLevel,cfg.level);this.m_nextLevelProp.m_list.removeChildrenToPool();var effects=cfg.effect_id;for(var _i=0,effects_2=effects;_i<effects_2.length;_i++){var effectId=effects_2[_i];var effectCfg=Game.config.buildingEffect.getConfig(effectId);var itemProp=this.m_nextLevelProp.m_list.addItemFromPool();itemProp.getChild("title").text=effectCfg.effect_des;this.m_nextLevelProp.m_list.addChild(itemProp)}};BuildRoomUpgrade.prototype.setLevelupCost=function(cfg){if(cfg==null){return}this.setTopAsset(cfg);this.m_needAssetList.removeChildrenToPool();var costList=cfg.cost;for(var _i=0,costList_1=costList;_i<costList_1.length;_i++){var costItem=costList_1[_i];var itemCfg=Game.config.item.getConfig(costItem.itemId);var userItem=Game.moduleModel.item.getItem(costItem.itemId);var asset=this.m_needAssetList.addItemFromPool();asset.setEnoughInfo(userItem.itemIconUrl,costItem.itemId,costItem.itemNum);this.m_needAssetList.addChild(asset)}};BuildRoomUpgrade.prototype.setTopAsset=function(cfg){this.m_topAsset.m_assetList.removeChildrenToPool();var costList=cfg.cost;for(var _i=0,costList_2=costList;_i<costList_2.length;_i++){var costItem=costList_2[_i];var userItem=Game.moduleModel.item.getItem(costItem.itemId);var itemNum=Game.moduleModel.item.getItemNum(costItem.itemId);var assetItem=this.m_topAsset.m_assetList.addItemFromPool();assetItem.setInfo(userItem.itemIconUrl,itemNum);this.m_topAsset.m_assetList.addChild(assetItem)}};BuildRoomUpgrade.prototype.checkCondition=function(){var nextId=this.info.id+1;var buildConfig=Game.config.buildingLevel.getConfig(nextId);if(buildConfig!=null){if(User.info.level<buildConfig.level_req){var msg=Game.config.msg.getTxtFormat(MsgKey.build_non_level,buildConfig.level_req);Game.system.toastText(msg);return false}for(var _i=0,_a=buildConfig.cost;_i<_a.length;_i++){var cost=_a[_i];var hasItemNum=Game.moduleModel.item.getItemNum(cost.itemId);if(hasItemNum<cost.itemNum){var itemCfg=Game.config.item.getConfig(cost.itemId);var msg=Game.config.msg.getTxtFormat(MsgKey.build_non_material,itemCfg.name);Game.system.openItemWay(cost.itemId,cost.itemNum);return false}}}return true};BuildRoomUpgrade.prototype.checkLevelCondition=function(){var nextId=this.info.id+1;var buildConfig=Game.config.buildingLevel.getConfig(nextId);if(buildConfig!=null){if(User.info.level<buildConfig.level_req){return false}}return true};BuildRoomUpgrade.prototype.getBuildRoomMaxLevel=function(type){var roomListConfig=Game.config.buildingLevel.getConfigList();var result=roomListConfig.filter(function(value,index,array){return value.type==type});return result.length};BuildRoomUpgrade.prototype.onUpgradeClick=function(){if(this.checkCondition()){Game.sound.playSound(SoundKey.MM05_Upgrade);Game.protosender.CinemaBuild.UpgradeRoom(this.info.id)}};BuildRoomUpgrade.prototype.onUpgradeSuccess=function(){var buildRoomUpgradeSuccess=Building.BuildRoomUpgradeSuccess.createInstance();buildRoomUpgradeSuccess.init(this.info);MenuLayer.module.addChild(buildRoomUpgradeSuccess);buildRoomUpgradeSuccess.setSize(fairygui.GRoot.inst.width,fairygui.GRoot.inst.height);buildRoomUpgradeSuccess.addRelation(Games.MenuLayer.module,fairygui.RelationType.Size);this.onClose()};BuildRoomUpgrade.prototype.onConfirm=function(){this.onClose()};BuildRoomUpgrade.prototype.onClose=function(){Game.menu.close(MenuId.BuildRoomUpgrade)};BuildRoomUpgrade.prototype.btnLevelUp=function(type){if(this.info.type==type){return this.m_btn_levelup}return null};return BuildRoomUpgrade}(Building.BuildRoomUpgradeStruct));Building.BuildRoomUpgrade=BuildRoomUpgrade})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildRoomUpgradeSuccessStruct=(function(_super){__extends(BuildRoomUpgradeSuccessStruct,_super);function BuildRoomUpgradeSuccessStruct(){return _super.call(this)||this}BuildRoomUpgradeSuccessStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildRoomUpgradeSuccess"))};BuildRoomUpgradeSuccessStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_porpList=(this.getChild("porpList"));this.m_n18_fireworks02=(this.getChild("n18_fireworks02"));this.m_n17_fireworks01=(this.getChild("n17_fireworks01"));this.m_effectGroup=(this.getChild("effectGroup"));this.m_btn_confirm=(this.getChild("btn_confirm"));this.m_n16_levelup002=(this.getChild("n16_levelup002"));this.m_t0=this.getTransition("t0")};BuildRoomUpgradeSuccessStruct.URL="ui://d062jvkgcpc911n";BuildRoomUpgradeSuccessStruct.DependPackages=["Building","Fx","Common"];return BuildRoomUpgradeSuccessStruct}(fairygui.GComponent));Building.BuildRoomUpgradeSuccessStruct=BuildRoomUpgradeSuccessStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildRoomUpgradeSuccess=(function(_super){__extends(BuildRoomUpgradeSuccess,_super);function BuildRoomUpgradeSuccess(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.childIndex=-1;_this.propItemOrginalX=0;return _this}BuildRoomUpgradeSuccess.prototype.init=function(info){var _this=this;this.info=info;var level=Game.config.buildingLevel.getConfig(info.id).level;this.m_effectGroup.m_roomName.text=info.name+format(Games.TEXT.BuildUpgrade," "+level);var effects=Game.config.buildingLevel.getConfig(info.id).effect_id;this.m_porpList.removeChildrenToPool();for(var _i=0,effects_1=effects;_i<effects_1.length;_i++){var effectId=effects_1[_i];var cfg=Game.config.buildingEffect.getConfig(effectId);var propItem=this.m_porpList.addItemFromPool();propItem.getChild("title").text=cfg.effect_des;this.m_porpList.addChild(propItem);this.propItemOrginalX=propItem.x}this.setBuildIcon();this.m_btn_confirm.m_title.text=TEXT.ButtonOk;this.m_btn_confirm.onClick(this,this.onConfirm);this.m_btn_confirm.visible=false;for(var i=0;i<this.m_porpList.numChildren;i++){var item=this.m_porpList.getChildAt(i);item.x=Laya.stage.width}var duration=300;FguiHelper.boundEffect(this.m_effectGroup,duration);setTimeout(function(){_this.startTweenPropItem()},duration)};BuildRoomUpgradeSuccess.prototype.startTweenPropItem=function(){Laya.timer.loop(500,this,this.onTweenPropItem,null,true,true)};BuildRoomUpgradeSuccess.prototype.onTweenPropItem=function(){this.childIndex++;if(this.childIndex>=this.m_porpList.numChildren){Laya.timer.clear(this,this.onTweenPropItem);this.m_btn_confirm.visible=true;return}var item=this.m_porpList.getChildAt(this.childIndex);var endY=item.y;item.x=this.propItemOrginalX;item.y=endY+this.m_porpList.height;Laya.Tween.to(item,{y:endY},300,Laya.Ease.linearIn,Handler.create(null,function(target){},[item]),0,true,true)};BuildRoomUpgradeSuccess.prototype.setBuildIcon=function(){this.m_effectGroup.m_roomFrame.m_room_icon.url=Res.getRoom(this.info.type)};BuildRoomUpgradeSuccess.prototype.onConfirm=function(){Laya.timer.clear(this,this.onTweenPropItem);this.parent.removeChild(this)};return BuildRoomUpgradeSuccess}(Building.BuildRoomUpgradeSuccessStruct));Building.BuildRoomUpgradeSuccess=BuildRoomUpgradeSuccess})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildSceneStruct=(function(_super){__extends(BuildSceneStruct,_super);function BuildSceneStruct(){return _super.call(this)||this}BuildSceneStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildScene"))};BuildSceneStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_loader=(this.getChild("loader"));this.m_scenePartBottom=(this.getChild("scenePartBottom"));this.m_scenePart=(this.getChild("scenePart"));this.m_avatarContainer0=(this.getChild("avatarContainer0"));this.m_avatarContainer1=(this.getChild("avatarContainer1"));this.m_canvasContainer=(this.getChild("canvasContainer"))};BuildSceneStruct.URL="ui://d062jvkgnjm312o";BuildSceneStruct.DependPackages=["Building","Common"];return BuildSceneStruct}(fairygui.GComponent));Building.BuildSceneStruct=BuildSceneStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildScene=(function(_super){__extends(BuildScene,_super);function BuildScene(){return _super!==null&&_super.apply(this,arguments)||this}return BuildScene}(Building.BuildSceneStruct));Building.BuildScene=BuildScene})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildScene1Struct=(function(_super){__extends(BuildScene1Struct,_super);function BuildScene1Struct(){return _super.call(this)||this}BuildScene1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildScene1"))};BuildScene1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_chairPart=(this.getChild("chairPart"))};BuildScene1Struct.URL="ui://d062jvkgnjm312p";BuildScene1Struct.DependPackages=["Building"];return BuildScene1Struct}(fairygui.GComponent));Building.BuildScene1Struct=BuildScene1Struct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildScene1=(function(_super){__extends(BuildScene1,_super);function BuildScene1(){return _super!==null&&_super.apply(this,arguments)||this}return BuildScene1}(Building.BuildScene1Struct));Building.BuildScene1=BuildScene1})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildScene12Struct=(function(_super){__extends(BuildScene12Struct,_super);function BuildScene12Struct(){return _super.call(this)||this}BuildScene12Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildScene12"))};BuildScene12Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_pos=(this.getChild("pos"))};BuildScene12Struct.URL="ui://d062jvkguju9e14j";BuildScene12Struct.DependPackages=["Building"];return BuildScene12Struct}(fairygui.GComponent));Building.BuildScene12Struct=BuildScene12Struct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildScene12=(function(_super){__extends(BuildScene12,_super);function BuildScene12(){return _super!==null&&_super.apply(this,arguments)||this}return BuildScene12}(Building.BuildScene12Struct));Building.BuildScene12=BuildScene12})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildScene13Struct=(function(_super){__extends(BuildScene13Struct,_super);function BuildScene13Struct(){return _super.call(this)||this}BuildScene13Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildScene13"))};BuildScene13Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_seat=(this.getChild("seat"))};BuildScene13Struct.URL="ui://d062jvkgnjm312q";BuildScene13Struct.DependPackages=["Building"];return BuildScene13Struct}(fairygui.GComponent));Building.BuildScene13Struct=BuildScene13Struct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildScene13=(function(_super){__extends(BuildScene13,_super);function BuildScene13(){return _super!==null&&_super.apply(this,arguments)||this}return BuildScene13}(Building.BuildScene13Struct));Building.BuildScene13=BuildScene13})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildScene3Struct=(function(_super){__extends(BuildScene3Struct,_super);function BuildScene3Struct(){return _super.call(this)||this}BuildScene3Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildScene3"))};BuildScene3Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_seat=(this.getChild("seat"))};BuildScene3Struct.URL="ui://d062jvkggy5h13s";BuildScene3Struct.DependPackages=["Building","Common"];return BuildScene3Struct}(fairygui.GComponent));Building.BuildScene3Struct=BuildScene3Struct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildScene3=(function(_super){__extends(BuildScene3,_super);function BuildScene3(){return _super!==null&&_super.apply(this,arguments)||this}return BuildScene3}(Building.BuildScene3Struct));Building.BuildScene3=BuildScene3})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildSceneFilmEnterStruct=(function(_super){__extends(BuildSceneFilmEnterStruct,_super);function BuildSceneFilmEnterStruct(){return _super.call(this)||this}BuildSceneFilmEnterStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildSceneFilmEnter"))};BuildSceneFilmEnterStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_screenlight=(this.getChild("screenlight"));this.m_filmlight=(this.getChild("filmlight"));this.m_title=(this.getChild("title"));this.m_stoyIcon=(this.getChild("stoyIcon"));this.m_doorContainer=(this.getChild("doorContainer"));this.m_canvasContainer=(this.getChild("canvasContainer"))};BuildSceneFilmEnterStruct.URL="ui://d062jvkgg9i613z";BuildSceneFilmEnterStruct.DependPackages=["Building"];return BuildSceneFilmEnterStruct}(fairygui.GComponent));Building.BuildSceneFilmEnterStruct=BuildSceneFilmEnterStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildSceneFilmEnter=(function(_super){__extends(BuildSceneFilmEnter,_super);function BuildSceneFilmEnter(){return _super!==null&&_super.apply(this,arguments)||this}return BuildSceneFilmEnter}(Building.BuildSceneFilmEnterStruct));Building.BuildSceneFilmEnter=BuildSceneFilmEnter})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildScenePartStruct=(function(_super){__extends(BuildScenePartStruct,_super);function BuildScenePartStruct(){return _super.call(this)||this}BuildScenePartStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildScenePart"))};BuildScenePartStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};BuildScenePartStruct.URL="ui://d062jvkgnjm312r";BuildScenePartStruct.DependPackages=["Building"];return BuildScenePartStruct}(fairygui.GComponent));Building.BuildScenePartStruct=BuildScenePartStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildScenePart=(function(_super){__extends(BuildScenePart,_super);function BuildScenePart(){return _super!==null&&_super.apply(this,arguments)||this}return BuildScenePart}(Building.BuildScenePartStruct));Building.BuildScenePart=BuildScenePart})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildSceneUIStruct=(function(_super){__extends(BuildSceneUIStruct,_super);function BuildSceneUIStruct(){return _super.call(this)||this}BuildSceneUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildSceneUI"))};BuildSceneUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_frame=(this.getChild("frame"));this.m_frameTitleBg=(this.getChild("frameTitleBg"));this.m_buildFloorInfo=(this.getChild("buildFloorInfo"));this.m_failReason=(this.getChild("failReason"));this.m_btn_roomName=(this.getChild("btn_roomName"));this.m_btn_buildRoom=(this.getChild("btn_buildRoom"));this.m_btn_buildFloor=(this.getChild("btn_buildFloor"));this.m_effectContainer=(this.getChild("effectContainer"))};BuildSceneUIStruct.URL="ui://d062jvkglgv4e14p";BuildSceneUIStruct.DependPackages=["Building"];return BuildSceneUIStruct}(fairygui.GComponent));Building.BuildSceneUIStruct=BuildSceneUIStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildSceneUI=(function(_super){__extends(BuildSceneUI,_super);function BuildSceneUI(){return _super!==null&&_super.apply(this,arguments)||this}return BuildSceneUI}(Building.BuildSceneUIStruct));Building.BuildSceneUI=BuildSceneUI})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildUpgradePropitemStruct=(function(_super){__extends(BuildUpgradePropitemStruct,_super);function BuildUpgradePropitemStruct(){return _super.call(this)||this}BuildUpgradePropitemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","BuildUpgradePropitem"))};BuildUpgradePropitemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};BuildUpgradePropitemStruct.URL="ui://d062jvkgfv9e13e";BuildUpgradePropitemStruct.DependPackages=["Building"];return BuildUpgradePropitemStruct}(fairygui.GComponent));Building.BuildUpgradePropitemStruct=BuildUpgradePropitemStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var BuildUpgradePropitem=(function(_super){__extends(BuildUpgradePropitem,_super);function BuildUpgradePropitem(){return _super!==null&&_super.apply(this,arguments)||this}return BuildUpgradePropitem}(Building.BuildUpgradePropitemStruct));Building.BuildUpgradePropitem=BuildUpgradePropitem})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var CinemaChairStruct=(function(_super){__extends(CinemaChairStruct,_super);function CinemaChairStruct(){return _super.call(this)||this}CinemaChairStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","CinemaChair"))};CinemaChairStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_chair1=(this.getChild("chair1"));this.m_sit_group1=(this.getChild("sit_group1"));this.m_chair2=(this.getChild("chair2"));this.m_sit_group2=(this.getChild("sit_group2"));this.m_sit0=(this.getChild("sit0"));this.m_sit3=(this.getChild("sit3"));this.m_sit2=(this.getChild("sit2"));this.m_sit1=(this.getChild("sit1"));this.m_sit4=(this.getChild("sit4"));this.m_sit5=(this.getChild("sit5"))};CinemaChairStruct.URL="ui://d062jvkgu8cee146";CinemaChairStruct.DependPackages=["Building"];return CinemaChairStruct}(fairygui.GComponent));Building.CinemaChairStruct=CinemaChairStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var CinemaChair=(function(_super){__extends(CinemaChair,_super);function CinemaChair(){return _super!==null&&_super.apply(this,arguments)||this}return CinemaChair}(Building.CinemaChairStruct));Building.CinemaChair=CinemaChair})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var CinemaScreenStruct=(function(_super){__extends(CinemaScreenStruct,_super);function CinemaScreenStruct(){return _super.call(this)||this}CinemaScreenStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","CinemaScreen"))};CinemaScreenStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};CinemaScreenStruct.URL="ui://d062jvkgdgure145";CinemaScreenStruct.DependPackages=["Building"];return CinemaScreenStruct}(fairygui.GComponent));Building.CinemaScreenStruct=CinemaScreenStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var CinemaScreen=(function(_super){__extends(CinemaScreen,_super);function CinemaScreen(){return _super!==null&&_super.apply(this,arguments)||this}return CinemaScreen}(Building.CinemaScreenStruct));Building.CinemaScreen=CinemaScreen})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var ExperciseSeatStruct=(function(_super){__extends(ExperciseSeatStruct,_super);function ExperciseSeatStruct(){return _super.call(this)||this}ExperciseSeatStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","ExperciseSeat"))};ExperciseSeatStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_trainSit5=(this.getChild("trainSit5"));this.m_trainSit4=(this.getChild("trainSit4"));this.m_trainSit3=(this.getChild("trainSit3"));this.m_trainSit2=(this.getChild("trainSit2"));this.m_trainSit1=(this.getChild("trainSit1"))};ExperciseSeatStruct.URL="ui://d062jvkgu8cee148";ExperciseSeatStruct.DependPackages=["Building"];return ExperciseSeatStruct}(fairygui.GComponent));Building.ExperciseSeatStruct=ExperciseSeatStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var ExperciseSeat=(function(_super){__extends(ExperciseSeat,_super);function ExperciseSeat(){return _super!==null&&_super.apply(this,arguments)||this}return ExperciseSeat}(Building.ExperciseSeatStruct));Building.ExperciseSeat=ExperciseSeat})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var FilmDoorPointStruct=(function(_super){__extends(FilmDoorPointStruct,_super);function FilmDoorPointStruct(){return _super.call(this)||this}FilmDoorPointStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","FilmDoorPoint"))};FilmDoorPointStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};FilmDoorPointStruct.URL="ui://d062jvkgopnp140";FilmDoorPointStruct.DependPackages=["Building"];return FilmDoorPointStruct}(fairygui.GComponent));Building.FilmDoorPointStruct=FilmDoorPointStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var FilmDoorPoint=(function(_super){__extends(FilmDoorPoint,_super);function FilmDoorPoint(){return _super!==null&&_super.apply(this,arguments)||this}return FilmDoorPoint}(Building.FilmDoorPointStruct));Building.FilmDoorPoint=FilmDoorPoint})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var FinanceNpcSeatStruct=(function(_super){__extends(FinanceNpcSeatStruct,_super);function FinanceNpcSeatStruct(){return _super.call(this)||this}FinanceNpcSeatStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","FinanceNpcSeat"))};FinanceNpcSeatStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};FinanceNpcSeatStruct.URL="ui://d062jvkguju9e14i";FinanceNpcSeatStruct.DependPackages=["Building"];return FinanceNpcSeatStruct}(fairygui.GComponent));Building.FinanceNpcSeatStruct=FinanceNpcSeatStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var FinanceNpcSeat=(function(_super){__extends(FinanceNpcSeat,_super);function FinanceNpcSeat(){return _super!==null&&_super.apply(this,arguments)||this}return FinanceNpcSeat}(Building.FinanceNpcSeatStruct));Building.FinanceNpcSeat=FinanceNpcSeat})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var LevelupNextPropStruct=(function(_super){__extends(LevelupNextPropStruct,_super);function LevelupNextPropStruct(){return _super.call(this)||this}LevelupNextPropStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","LevelupNextProp"))};LevelupNextPropStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_list=(this.getChild("list"))};LevelupNextPropStruct.URL="ui://d062jvkg9zjb13j";LevelupNextPropStruct.DependPackages=["Building","Common"];return LevelupNextPropStruct}(fairygui.GComponent));Building.LevelupNextPropStruct=LevelupNextPropStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var LevelupNextProp=(function(_super){__extends(LevelupNextProp,_super);function LevelupNextProp(){return _super!==null&&_super.apply(this,arguments)||this}return LevelupNextProp}(Building.LevelupNextPropStruct));Building.LevelupNextProp=LevelupNextProp})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var LevelupPropStruct=(function(_super){__extends(LevelupPropStruct,_super);function LevelupPropStruct(){return _super.call(this)||this}LevelupPropStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","LevelupProp"))};LevelupPropStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_list=(this.getChild("list"))};LevelupPropStruct.URL="ui://d062jvkgcpc911b";LevelupPropStruct.DependPackages=["Building"];return LevelupPropStruct}(fairygui.GComponent));Building.LevelupPropStruct=LevelupPropStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var LevelupProp=(function(_super){__extends(LevelupProp,_super);function LevelupProp(){return _super!==null&&_super.apply(this,arguments)||this}return LevelupProp}(Building.LevelupPropStruct));Building.LevelupProp=LevelupProp})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var MainStruct=(function(_super){__extends(MainStruct,_super);function MainStruct(){return _super.call(this)||this}MainStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","Main"))};MainStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_screenBg=(this.getChild("screenBg"));this.m_main_bottom=(this.getChild("main_bottom"));this.m_main_top=(this.getChild("main_top"));this.m_BuildList=(this.getChild("BuildList"))};MainStruct.URL="ui://d062jvkgor9t0";MainStruct.DependPackages=["Building"];return MainStruct}(fairygui.GComponent));Building.MainStruct=MainStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var Main=(function(_super){__extends(Main,_super);function Main(){return _super!==null&&_super.apply(this,arguments)||this}return Main}(Building.MainStruct));Building.Main=Main})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var RoomInfoItemStruct=(function(_super){__extends(RoomInfoItemStruct,_super);function RoomInfoItemStruct(){return _super.call(this)||this}RoomInfoItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","roomInfoItem"))};RoomInfoItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_room_title=(this.getChild("room_title"));this.m_assetList=(this.getChild("assetList"));this.m_iconLoader=(this.getChild("iconLoader"));this.m_roomLock=(this.getChild("roomLock"));this.m_touch=(this.getChild("touch"));this.m_btn_roomTip=(this.getChild("btn_roomTip"));this.m_tips=(this.getChild("tips"))};RoomInfoItemStruct.URL="ui://d062jvkgcpc911i";RoomInfoItemStruct.DependPackages=["Building","Common"];return RoomInfoItemStruct}(fairygui.GComponent));Building.RoomInfoItemStruct=RoomInfoItemStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var RoomInfoItem=(function(_super){__extends(RoomInfoItem,_super);function RoomInfoItem(){return _super!==null&&_super.apply(this,arguments)||this}RoomInfoItem.prototype.setInfo=function(info){this.info=info;this.cfg=Game.config.buildingLevel.getConfig(this.info.id);this.m_iconLoader.visible=true;if(this.info.isBuilded){this.m_roomLock.visible=true;var reason=Game.config.msg.getTxtFormat(MsgKey.build_be_builded);this.setBuildLock(reason)}else{this.m_room_title.text=info.name;this.m_roomLock.visible=false;this.setBuildCost()}this.m_btn_roomTip.onClick(this,this.showRoomTips);this.setBuildIcon()};RoomInfoItem.prototype.setBuildIcon=function(){this.m_iconLoader.m_room_icon.url=Res.getRoom(this.info.type)};RoomInfoItem.prototype.setBuildCost=function(){this.m_assetList.removeChildrenToPool();var costList=this.cfg.cost;for(var _i=0,costList_1=costList;_i<costList_1.length;_i++){var costItem=costList_1[_i];var itemCfg=Game.config.item.getConfig(costItem.itemId);var userItem=Game.moduleModel.item.getItem(costItem.itemId);var asset=this.m_assetList.addItemFromPool();asset.setEnoughInfo(userItem.itemIconUrl,costItem.itemId,costItem.itemNum);this.m_assetList.addChild(asset)}};RoomInfoItem.prototype.showRoomTips=function(){this.m_tips.visible=true;this.m_tips.m_effectText1.text=TEXT.BuildEffect;this.m_tips.m_effectValue1.text=this.cfg.effect_tips;this.m_tips.m_effectText2.text=TEXT.BuildLevelEffect;this.m_tips.m_effectValue2.text=this.cfg.level_tips;fairygui.GRoot.inst.showPopup(this.m_tips)};RoomInfoItem.prototype.setBuildLock=function(reason){this.m_assetList.removeChildrenToPool();this.m_roomLock.visible=true;this.m_roomLock.m_room_title.text=this.info.name;this.m_roomLock.m_reason.text=reason};return RoomInfoItem}(Building.RoomInfoItemStruct));Building.RoomInfoItem=RoomInfoItem})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var RoomInfoLockItemStruct=(function(_super){__extends(RoomInfoLockItemStruct,_super);function RoomInfoLockItemStruct(){return _super.call(this)||this}RoomInfoLockItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","roomInfoLockItem"))};RoomInfoLockItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_room_title=(this.getChild("room_title"));this.m_reason=(this.getChild("reason"))};RoomInfoLockItemStruct.URL="ui://d062jvkgcpc911j";RoomInfoLockItemStruct.DependPackages=["Building"];return RoomInfoLockItemStruct}(fairygui.GComponent));Building.RoomInfoLockItemStruct=RoomInfoLockItemStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var RoomInfoLockItem=(function(_super){__extends(RoomInfoLockItem,_super);function RoomInfoLockItem(){return _super!==null&&_super.apply(this,arguments)||this}return RoomInfoLockItem}(Building.RoomInfoLockItemStruct));Building.RoomInfoLockItem=RoomInfoLockItem})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var TouchComponentStruct=(function(_super){__extends(TouchComponentStruct,_super);function TouchComponentStruct(){return _super.call(this)||this}TouchComponentStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","TouchComponent"))};TouchComponentStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_touch=(this.getChild("touch"))};TouchComponentStruct.URL="ui://d062jvkgoqb213v";TouchComponentStruct.DependPackages=["Building"];return TouchComponentStruct}(fairygui.GComponent));Building.TouchComponentStruct=TouchComponentStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var TouchComponent=(function(_super){__extends(TouchComponent,_super);function TouchComponent(){return _super!==null&&_super.apply(this,arguments)||this}return TouchComponent}(Building.TouchComponentStruct));Building.TouchComponent=TouchComponent})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var UpgradeSuccessGroupStruct=(function(_super){__extends(UpgradeSuccessGroupStruct,_super);function UpgradeSuccessGroupStruct(){return _super.call(this)||this}UpgradeSuccessGroupStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Building","UpgradeSuccessGroup"))};UpgradeSuccessGroupStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_roomName=(this.getChild("roomName"));this.m_roomFrame=(this.getChild("roomFrame"))};UpgradeSuccessGroupStruct.URL="ui://d062jvkgui5j13w";UpgradeSuccessGroupStruct.DependPackages=["Building"];return UpgradeSuccessGroupStruct}(fairygui.GComponent));Building.UpgradeSuccessGroupStruct=UpgradeSuccessGroupStruct})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Building;(function(Building){var UpgradeSuccessGroup=(function(_super){__extends(UpgradeSuccessGroup,_super);function UpgradeSuccessGroup(){return _super!==null&&_super.apply(this,arguments)||this}return UpgradeSuccessGroup}(Building.UpgradeSuccessGroupStruct));Building.UpgradeSuccessGroup=UpgradeSuccessGroup})(Building=fgui.Building||(fgui.Building={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ActorBodyStruct=(function(_super){__extends(ActorBodyStruct,_super);function ActorBodyStruct(){return _super.call(this)||this}ActorBodyStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","actorBody"))};ActorBodyStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};ActorBodyStruct.URL="ui://txcuvopdcp1ct24i";ActorBodyStruct.DependPackages=["Common"];return ActorBodyStruct}(fairygui.GLabel));Common.ActorBodyStruct=ActorBodyStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ActorBody=(function(_super){__extends(ActorBody,_super);function ActorBody(){return _super!==null&&_super.apply(this,arguments)||this}return ActorBody}(Common.ActorBodyStruct));Common.ActorBody=ActorBody})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ActorIconStruct=(function(_super){__extends(ActorIconStruct,_super);function ActorIconStruct(){return _super.call(this)||this}ActorIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ActorIcon"))};ActorIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"));this.m_star=(this.getChild("star"))};ActorIconStruct.URL="ui://txcuvopdcvs8dn";ActorIconStruct.DependPackages=["Common"];return ActorIconStruct}(fairygui.GButton));Common.ActorIconStruct=ActorIconStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ActorIcon=(function(_super){__extends(ActorIcon,_super);function ActorIcon(){return _super!==null&&_super.apply(this,arguments)||this}ActorIcon.prototype.Render=function(actorId,name){var cfg=Game.config.actor.getConfig(actorId);this.m_icon.icon=Game.config.actor.GetBodyIconUrl(actorId);this.title=name;this.m_star.starNum=cfg.starNum};return ActorIcon}(Common.ActorIconStruct));Common.ActorIcon=ActorIcon})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ActorLvBreakCompentStruct=(function(_super){__extends(ActorLvBreakCompentStruct,_super);function ActorLvBreakCompentStruct(){return _super.call(this)||this}ActorLvBreakCompentStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ActorLvBreakCompent"))};ActorLvBreakCompentStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Effect_actor01=(this.getChild("Effect_actor01"));this.m_Effect_actor02=(this.getChild("Effect_actor02"));this.m_Effect_actor04=(this.getChild("Effect_actor04"));this.m_Effect_actor05=(this.getChild("Effect_actor05"));this.m_Effect_actor03=(this.getChild("Effect_actor03"));this.m_icon=(this.getChild("icon"));this.m_desc=(this.getChild("desc"));this.m_t0=this.getTransition("t0")};ActorLvBreakCompentStruct.URL="ui://txcuvopdvmyct25a";ActorLvBreakCompentStruct.DependPackages=["Common","Fx"];return ActorLvBreakCompentStruct}(fairygui.GComponent));Common.ActorLvBreakCompentStruct=ActorLvBreakCompentStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ActorLvBreakCompent=(function(_super){__extends(ActorLvBreakCompent,_super);function ActorLvBreakCompent(){return _super!==null&&_super.apply(this,arguments)||this}return ActorLvBreakCompent}(Common.ActorLvBreakCompentStruct));Common.ActorLvBreakCompent=ActorLvBreakCompent})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ActorLvBreaktUIStruct=(function(_super){__extends(ActorLvBreaktUIStruct,_super);function ActorLvBreaktUIStruct(){return _super.call(this)||this}ActorLvBreaktUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ActorLvBreaktUI"))};ActorLvBreaktUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_panel=(this.getChild("panel"))};ActorLvBreaktUIStruct.URL="ui://txcuvopdlvexed";ActorLvBreaktUIStruct.DependPackages=["Common","Fx"];return ActorLvBreaktUIStruct}(fairygui.GComponent));Common.ActorLvBreaktUIStruct=ActorLvBreaktUIStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ActorLvBreaktUI=(function(_super){__extends(ActorLvBreaktUI,_super);function ActorLvBreaktUI(){return _super!==null&&_super.apply(this,arguments)||this}ActorLvBreaktUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickClose)};ActorLvBreaktUI.prototype.onClickClose=function(){if(this.isCanClosed){this.removeFromParent()}};ActorLvBreaktUI.prototype.playEffect=function(actorId,desc){var _this=this;this.isCanClosed=false;var data=Game.moduleModel.actor.getActor(actorId);if(data){setScreenSize(this);centerScreen(this);Games.MenuLayer.floatMsg.addChild(this);this.m_panel.m_desc.text=desc;this.m_panel.m_icon.icon=data.bodyIconUrl;this.m_panel.m_t0.play(Handler.create(this,this.playEnd),1);setTimeout(function(){_this.isCanClosed=true},1000)}};ActorLvBreaktUI.prototype.playEnd=function(){this.isCanClosed=true;this.onClickClose()};return ActorLvBreaktUI}(Common.ActorLvBreaktUIStruct));Common.ActorLvBreaktUI=ActorLvBreaktUI})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ActorSelectItemStruct=(function(_super){__extends(ActorSelectItemStruct,_super);function ActorSelectItemStruct(){return _super.call(this)||this}ActorSelectItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ActorSelectItem"))};ActorSelectItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=this.getController("state");this.m_button=this.getController("button");this.m_selectType=this.getController("selectType");this.m_icon=(this.getChild("icon"));this.m_starList=(this.getChild("starList"));this.m_title=(this.getChild("title"));this.m_skillExp=(this.getChild("skillExp"));this.m_btnSelect=(this.getChild("btnSelect"))};ActorSelectItemStruct.URL="ui://txcuvopdq41hga";ActorSelectItemStruct.DependPackages=["Common"];return ActorSelectItemStruct}(fairygui.GButton));Common.ActorSelectItemStruct=ActorSelectItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ActorSelectItem=(function(_super){__extends(ActorSelectItem,_super);function ActorSelectItem(){return _super!==null&&_super.apply(this,arguments)||this}ActorSelectItem.prototype.setInfo=function(data){this.data=data;this.m_title.text=data.name;this.m_skillExp.text=format(TEXT.ActorSkillExp,data.skillExp);this.m_btnSelect.m_title.text=TEXT.ButtonSelect;this.m_starList.removeChildrenToPool();for(var i=0;i<data.star;i++){var star=this.m_starList.addItemFromPool();this.m_starList.addChild(star)}this.m_icon.url=Game.config.avatar.getConfig(data.config.avatar).bodyIconUrl};Object.defineProperty(ActorSelectItem.prototype,"isOnProduce",{get:function(){return this._isOnProduce},set:function(val){this._isOnProduce=val;if(val){this.m_skillExp.text=TEXT.ProduceActorBusy}else{this.m_skillExp.text=TEXT.ProduceActorFree}},enumerable:true,configurable:true});return ActorSelectItem}(Common.ActorSelectItemStruct));Common.ActorSelectItem=ActorSelectItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AddBtnStruct=(function(_super){__extends(AddBtnStruct,_super);function AddBtnStruct(){return _super.call(this)||this}AddBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","addBtn"))};AddBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};AddBtnStruct.URL="ui://txcuvopdhh7684";AddBtnStruct.DependPackages=["Common"];return AddBtnStruct}(fairygui.GButton));Common.AddBtnStruct=AddBtnStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AddBtn=(function(_super){__extends(AddBtn,_super);function AddBtn(){return _super!==null&&_super.apply(this,arguments)||this}return AddBtn}(Common.AddBtnStruct));Common.AddBtn=AddBtn})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AddBtn2Struct=(function(_super){__extends(AddBtn2Struct,_super);function AddBtn2Struct(){return _super.call(this)||this}AddBtn2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","addBtn2"))};AddBtn2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};AddBtn2Struct.URL="ui://txcuvopdo3z6ad";AddBtn2Struct.DependPackages=["Common"];return AddBtn2Struct}(fairygui.GButton));Common.AddBtn2Struct=AddBtn2Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AddBtn2=(function(_super){__extends(AddBtn2,_super);function AddBtn2(){return _super!==null&&_super.apply(this,arguments)||this}return AddBtn2}(Common.AddBtn2Struct));Common.AddBtn2=AddBtn2})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AddBtn3Struct=(function(_super){__extends(AddBtn3Struct,_super);function AddBtn3Struct(){return _super.call(this)||this}AddBtn3Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","addBtn3"))};AddBtn3Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};AddBtn3Struct.URL="ui://txcuvopdo3z6af";AddBtn3Struct.DependPackages=["Common"];return AddBtn3Struct}(fairygui.GButton));Common.AddBtn3Struct=AddBtn3Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AddBtn3=(function(_super){__extends(AddBtn3,_super);function AddBtn3(){return _super!==null&&_super.apply(this,arguments)||this}return AddBtn3}(Common.AddBtn3Struct));Common.AddBtn3=AddBtn3})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ArtistLessonItemStruct=(function(_super){__extends(ArtistLessonItemStruct,_super);function ArtistLessonItemStruct(){return _super.call(this)||this}ArtistLessonItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ArtistLessonItem"))};ArtistLessonItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_visible_up=this.getController("c_visible_up");this.m_c_visible_level=this.getController("c_visible_level");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};ArtistLessonItemStruct.URL="ui://txcuvopdmmict272";ArtistLessonItemStruct.DependPackages=["Common","ArtistDetail"];return ArtistLessonItemStruct}(fairygui.GButton));Common.ArtistLessonItemStruct=ArtistLessonItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ArtistLessonItem=(function(_super){__extends(ArtistLessonItem,_super);function ArtistLessonItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.showLv=true;_this.showUp=false;return _this}ArtistLessonItem.prototype.updateView=function(lessonData){var url=lessonData.iconUrl;var levelTxt=lessonData.levelTxt;this.m_title.text=levelTxt;this.m_icon.url=url;if(this.showLv&&lessonData.level>0){this.m_c_visible_level.selectedIndex=1}else{this.m_c_visible_level.selectedIndex=0}this.lessonData=lessonData;if(this.showUp){this.m_c_visible_up.selectedIndex=lessonData.canUp?1:0}else{this.m_c_visible_up.selectedIndex=0}};return ArtistLessonItem}(Common.ArtistLessonItemStruct));Common.ArtistLessonItem=ArtistLessonItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AssetItemStruct=(function(_super){__extends(AssetItemStruct,_super);function AssetItemStruct(){return _super.call(this)||this}AssetItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","AssetItem"))};AssetItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_showBg=this.getController("showBg");this.m_assetLoader=(this.getChild("assetLoader"));this.m_title=(this.getChild("title"))};AssetItemStruct.URL="ui://txcuvopddtlg2n";AssetItemStruct.DependPackages=["Common","PfSkin"];return AssetItemStruct}(fairygui.GLabel));Common.AssetItemStruct=AssetItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AssetItem=(function(_super){__extends(AssetItem,_super);function AssetItem(){return _super!==null&&_super.apply(this,arguments)||this}AssetItem.prototype.setItemId=function(itemId){var userItem=Game.moduleModel.item.getItem(itemId);var itemNum=Game.moduleModel.item.getItemNum(itemId);this.setInfo(userItem.itemIconUrl,itemNum)};AssetItem.prototype.setInfo=function(iconUrl,value){this.m_assetLoader.url=iconUrl;this.m_title.text=formatNumberUnit(value)};return AssetItem}(Common.AssetItemStruct));Common.AssetItem=AssetItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AssetItemBigStruct=(function(_super){__extends(AssetItemBigStruct,_super);function AssetItemBigStruct(){return _super.call(this)||this}AssetItemBigStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","AssetItemBig"))};AssetItemBigStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Title=(this.getChild("Title"));this.m_assetLoader=(this.getChild("assetLoader"))};AssetItemBigStruct.URL="ui://txcuvopdu21kas";AssetItemBigStruct.DependPackages=["Common"];return AssetItemBigStruct}(fairygui.GComponent));Common.AssetItemBigStruct=AssetItemBigStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AssetItemBig=(function(_super){__extends(AssetItemBig,_super);function AssetItemBig(){return _super!==null&&_super.apply(this,arguments)||this}AssetItemBig.prototype.setItemId=function(itemId){var userItem=Game.moduleModel.item.getItem(itemId);var itemNum=Game.moduleModel.item.getItemNum(itemId);this.setInfo(userItem.itemIconUrl,itemNum)};AssetItemBig.prototype.setInfo=function(iconUrl,value){this.m_assetLoader.url=iconUrl;this.m_Title.text=formatNumberUnit(value)};AssetItemBig.prototype.setEnoughInfo=function(iconUrl,itemId,value){this.m_assetLoader.url=iconUrl;if(ItemHelper.checkItemEnough2(itemId,value)){this.m_Title.text=formatNumberUnit(value)}else{this.m_Title.text="[color=#ff0000]"+formatNumberUnit(value)+"[/color]"}};return AssetItemBig}(Common.AssetItemBigStruct));Common.AssetItemBig=AssetItemBig})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AssetItemListStruct=(function(_super){__extends(AssetItemListStruct,_super);function AssetItemListStruct(){return _super.call(this)||this}AssetItemListStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","AssetItemList"))};AssetItemListStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_assetList=(this.getChild("assetList"))};AssetItemListStruct.URL="ui://txcuvopdfd6533";AssetItemListStruct.DependPackages=["Common"];return AssetItemListStruct}(fairygui.GComponent));Common.AssetItemListStruct=AssetItemListStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AssetItemList=(function(_super){__extends(AssetItemList,_super);function AssetItemList(){return _super!==null&&_super.apply(this,arguments)||this}AssetItemList.prototype.setAssets=function(assetIds){this.m_assetList.removeChildrenToPool();this.assetIds=assetIds;for(var _i=0,assetIds_1=assetIds;_i<assetIds_1.length;_i++){var assetId=assetIds_1[_i];var assetItem=this.m_assetList.addItemFromPool();assetItem.setItemId(assetId);this.m_assetList.addChild(assetItem)}};AssetItemList.prototype.updateAssets=function(){this.setAssets(this.assetIds)};AssetItemList.prototype.dispose=function(){this.assetIds.length=0;this.m_assetList.removeChildrenToPool()};return AssetItemList}(Common.AssetItemListStruct));Common.AssetItemList=AssetItemList})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AssetItemVerticalStruct=(function(_super){__extends(AssetItemVerticalStruct,_super);function AssetItemVerticalStruct(){return _super.call(this)||this}AssetItemVerticalStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","AssetItemVertical"))};AssetItemVerticalStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_star=(this.getChild("star"))};AssetItemVerticalStruct.URL="ui://txcuvopdsc1s32";AssetItemVerticalStruct.DependPackages=["Common"];return AssetItemVerticalStruct}(fairygui.GComponent));Common.AssetItemVerticalStruct=AssetItemVerticalStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AssetItemVertical=(function(_super){__extends(AssetItemVertical,_super);function AssetItemVertical(){return _super!==null&&_super.apply(this,arguments)||this}return AssetItemVertical}(Common.AssetItemVerticalStruct));Common.AssetItemVertical=AssetItemVertical})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AssetItem_littleStruct=(function(_super){__extends(AssetItem_littleStruct,_super);function AssetItem_littleStruct(){return _super.call(this)||this}AssetItem_littleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","AssetItem_little"))};AssetItem_littleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_showBg=this.getController("showBg");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};AssetItem_littleStruct.URL="ui://txcuvopdmdyxt22y";AssetItem_littleStruct.DependPackages=["Common","PfSkin"];return AssetItem_littleStruct}(fairygui.GLabel));Common.AssetItem_littleStruct=AssetItem_littleStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AssetItem_little=(function(_super){__extends(AssetItem_little,_super);function AssetItem_little(){return _super!==null&&_super.apply(this,arguments)||this}return AssetItem_little}(Common.AssetItem_littleStruct));Common.AssetItem_little=AssetItem_little})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AttrUpViewStruct=(function(_super){__extends(AttrUpViewStruct,_super);function AttrUpViewStruct(){return _super.call(this)||this}AttrUpViewStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","AttrUpView"))};AttrUpViewStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_titleColor=this.getController("titleColor");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};AttrUpViewStruct.URL="ui://txcuvopdl3ra1nm";AttrUpViewStruct.DependPackages=["Common"];return AttrUpViewStruct}(fairygui.GLabel));Common.AttrUpViewStruct=AttrUpViewStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AttrUpView=(function(_super){__extends(AttrUpView,_super);function AttrUpView(){return _super!==null&&_super.apply(this,arguments)||this}return AttrUpView}(Common.AttrUpViewStruct));Common.AttrUpView=AttrUpView})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AvatarShadowStruct=(function(_super){__extends(AvatarShadowStruct,_super);function AvatarShadowStruct(){return _super.call(this)||this}AvatarShadowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","AvatarShadow"))};AvatarShadowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};AvatarShadowStruct.URL="ui://txcuvopdoapba3";AvatarShadowStruct.DependPackages=["Common"];return AvatarShadowStruct}(fairygui.GComponent));Common.AvatarShadowStruct=AvatarShadowStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var AvatarShadow=(function(_super){__extends(AvatarShadow,_super);function AvatarShadow(){return _super!==null&&_super.apply(this,arguments)||this}return AvatarShadow}(Common.AvatarShadowStruct));Common.AvatarShadow=AvatarShadow})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnBlueCloseStruct=(function(_super){__extends(BtnBlueCloseStruct,_super);function BtnBlueCloseStruct(){return _super.call(this)||this}BtnBlueCloseStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","BtnBlueClose"))};BtnBlueCloseStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};BtnBlueCloseStruct.URL="ui://txcuvopdol2e2o";BtnBlueCloseStruct.DependPackages=["Common"];return BtnBlueCloseStruct}(fairygui.GButton));Common.BtnBlueCloseStruct=BtnBlueCloseStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnBlueClose=(function(_super){__extends(BtnBlueClose,_super);function BtnBlueClose(){return _super!==null&&_super.apply(this,arguments)||this}return BtnBlueClose}(Common.BtnBlueCloseStruct));Common.BtnBlueClose=BtnBlueClose})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnCongraStruct=(function(_super){__extends(BtnCongraStruct,_super);function BtnCongraStruct(){return _super.call(this)||this}BtnCongraStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","BtnCongra"))};BtnCongraStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_time=(this.getChild("time"))};BtnCongraStruct.URL="ui://txcuvopdp54lt212";BtnCongraStruct.DependPackages=["Common"];return BtnCongraStruct}(fairygui.GButton));Common.BtnCongraStruct=BtnCongraStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnCongra=(function(_super){__extends(BtnCongra,_super);function BtnCongra(){return _super!==null&&_super.apply(this,arguments)||this}return BtnCongra}(Common.BtnCongraStruct));Common.BtnCongra=BtnCongra})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnHelpStruct=(function(_super){__extends(BtnHelpStruct,_super);function BtnHelpStruct(){return _super.call(this)||this}BtnHelpStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","BtnHelp"))};BtnHelpStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnHelp=(this.getChild("btnHelp"))};BtnHelpStruct.URL="ui://txcuvopdcvs8ci";BtnHelpStruct.DependPackages=["Common"];return BtnHelpStruct}(fairygui.GComponent));Common.BtnHelpStruct=BtnHelpStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnHelp=(function(_super){__extends(BtnHelp,_super);function BtnHelp(){return _super!==null&&_super.apply(this,arguments)||this}return BtnHelp}(Common.BtnHelpStruct));Common.BtnHelp=BtnHelp})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnItemBuyStruct=(function(_super){__extends(BtnItemBuyStruct,_super);function BtnItemBuyStruct(){return _super.call(this)||this}BtnItemBuyStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","BtnItemBuy"))};BtnItemBuyStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_itemIcon=(this.getChild("itemIcon"));this.m_itemCount=(this.getChild("itemCount"))};BtnItemBuyStruct.URL="ui://txcuvopdol2e2p";BtnItemBuyStruct.DependPackages=["Common"];return BtnItemBuyStruct}(fairygui.GButton));Common.BtnItemBuyStruct=BtnItemBuyStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnItemBuy=(function(_super){__extends(BtnItemBuy,_super);function BtnItemBuy(){return _super!==null&&_super.apply(this,arguments)||this}return BtnItemBuy}(Common.BtnItemBuyStruct));Common.BtnItemBuy=BtnItemBuy})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnLeftStruct=(function(_super){__extends(BtnLeftStruct,_super);function BtnLeftStruct(){return _super.call(this)||this}BtnLeftStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","BtnLeft"))};BtnLeftStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};BtnLeftStruct.URL="ui://txcuvopdenjffk";BtnLeftStruct.DependPackages=["Common"];return BtnLeftStruct}(fairygui.GButton));Common.BtnLeftStruct=BtnLeftStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnLeft=(function(_super){__extends(BtnLeft,_super);function BtnLeft(){return _super!==null&&_super.apply(this,arguments)||this}return BtnLeft}(Common.BtnLeftStruct));Common.BtnLeft=BtnLeft})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnNextStruct=(function(_super){__extends(BtnNextStruct,_super);function BtnNextStruct(){return _super.call(this)||this}BtnNextStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","BtnNext"))};BtnNextStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};BtnNextStruct.URL="ui://txcuvopdenjffh";BtnNextStruct.DependPackages=["Common"];return BtnNextStruct}(fairygui.GButton));Common.BtnNextStruct=BtnNextStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnNext=(function(_super){__extends(BtnNext,_super);function BtnNext(){return _super!==null&&_super.apply(this,arguments)||this}return BtnNext}(Common.BtnNextStruct));Common.BtnNext=BtnNext})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnRightStruct=(function(_super){__extends(BtnRightStruct,_super);function BtnRightStruct(){return _super.call(this)||this}BtnRightStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","BtnRight"))};BtnRightStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};BtnRightStruct.URL="ui://txcuvopdenjffl";BtnRightStruct.DependPackages=["Common"];return BtnRightStruct}(fairygui.GButton));Common.BtnRightStruct=BtnRightStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var BtnRight=(function(_super){__extends(BtnRight,_super);function BtnRight(){return _super!==null&&_super.apply(this,arguments)||this}return BtnRight}(Common.BtnRightStruct));Common.BtnRight=BtnRight})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Btn_editor_nameStruct=(function(_super){__extends(Btn_editor_nameStruct,_super);function Btn_editor_nameStruct(){return _super.call(this)||this}Btn_editor_nameStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","btn_editor_name"))};Btn_editor_nameStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_editor_nameStruct.URL="ui://txcuvopdcvs8dq";Btn_editor_nameStruct.DependPackages=["Common"];return Btn_editor_nameStruct}(fairygui.GButton));Common.Btn_editor_nameStruct=Btn_editor_nameStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Btn_editor_name=(function(_super){__extends(Btn_editor_name,_super);function Btn_editor_name(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_editor_name}(Common.Btn_editor_nameStruct));Common.Btn_editor_name=Btn_editor_name})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonBlueStruct=(function(_super){__extends(ButtonBlueStruct,_super);function ButtonBlueStruct(){return _super.call(this)||this}ButtonBlueStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonBlue"))};ButtonBlueStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};ButtonBlueStruct.URL="ui://txcuvopdoapba0";ButtonBlueStruct.DependPackages=["Common"];return ButtonBlueStruct}(fairygui.GButton));Common.ButtonBlueStruct=ButtonBlueStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonBlue=(function(_super){__extends(ButtonBlue,_super);function ButtonBlue(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonBlue}(Common.ButtonBlueStruct));Common.ButtonBlue=ButtonBlue})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonBlueBigStruct=(function(_super){__extends(ButtonBlueBigStruct,_super);function ButtonBlueBigStruct(){return _super.call(this)||this}ButtonBlueBigStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonBlueBig"))};ButtonBlueBigStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};ButtonBlueBigStruct.URL="ui://txcuvopdx9zq4n";ButtonBlueBigStruct.DependPackages=["Common"];return ButtonBlueBigStruct}(fairygui.GButton));Common.ButtonBlueBigStruct=ButtonBlueBigStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonBlueBig=(function(_super){__extends(ButtonBlueBig,_super);function ButtonBlueBig(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonBlueBig}(Common.ButtonBlueBigStruct));Common.ButtonBlueBig=ButtonBlueBig})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonBlueSmallStruct=(function(_super){__extends(ButtonBlueSmallStruct,_super);function ButtonBlueSmallStruct(){return _super.call(this)||this}ButtonBlueSmallStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonBlueSmall"))};ButtonBlueSmallStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};ButtonBlueSmallStruct.URL="ui://txcuvopdx9zq4k";ButtonBlueSmallStruct.DependPackages=["Common"];return ButtonBlueSmallStruct}(fairygui.GButton));Common.ButtonBlueSmallStruct=ButtonBlueSmallStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonBlueSmall=(function(_super){__extends(ButtonBlueSmall,_super);function ButtonBlueSmall(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonBlueSmall}(Common.ButtonBlueSmallStruct));Common.ButtonBlueSmall=ButtonBlueSmall})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonCostStruct=(function(_super){__extends(ButtonCostStruct,_super);function ButtonCostStruct(){return _super.call(this)||this}ButtonCostStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonCost"))};ButtonCostStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"));this.m_number=(this.getChild("number"))};ButtonCostStruct.URL="ui://txcuvopdw1srd0";ButtonCostStruct.DependPackages=["Common","Manage"];return ButtonCostStruct}(fairygui.GButton));Common.ButtonCostStruct=ButtonCostStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonCost=(function(_super){__extends(ButtonCost,_super);function ButtonCost(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonCost}(Common.ButtonCostStruct));Common.ButtonCost=ButtonCost})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonCostPurpleStruct=(function(_super){__extends(ButtonCostPurpleStruct,_super);function ButtonCostPurpleStruct(){return _super.call(this)||this}ButtonCostPurpleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonCostPurple"))};ButtonCostPurpleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_num=(this.getChild("num"));this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"))};ButtonCostPurpleStruct.URL="ui://txcuvopdq41hg7";ButtonCostPurpleStruct.DependPackages=["Common"];return ButtonCostPurpleStruct}(fairygui.GButton));Common.ButtonCostPurpleStruct=ButtonCostPurpleStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonCostPurple=(function(_super){__extends(ButtonCostPurple,_super);function ButtonCostPurple(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonCostPurple}(Common.ButtonCostPurpleStruct));Common.ButtonCostPurple=ButtonCostPurple})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonCostYellowStruct=(function(_super){__extends(ButtonCostYellowStruct,_super);function ButtonCostYellowStruct(){return _super.call(this)||this}ButtonCostYellowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonCostYellow"))};ButtonCostYellowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_num=(this.getChild("num"));this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"))};ButtonCostYellowStruct.URL="ui://txcuvopdq41hg8";ButtonCostYellowStruct.DependPackages=["Common"];return ButtonCostYellowStruct}(fairygui.GButton));Common.ButtonCostYellowStruct=ButtonCostYellowStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonCostYellow=(function(_super){__extends(ButtonCostYellow,_super);function ButtonCostYellow(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonCostYellow}(Common.ButtonCostYellowStruct));Common.ButtonCostYellow=ButtonCostYellow})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonDoubleLabelStruct=(function(_super){__extends(ButtonDoubleLabelStruct,_super);function ButtonDoubleLabelStruct(){return _super.call(this)||this}ButtonDoubleLabelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonDoubleLabel"))};ButtonDoubleLabelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_number=(this.getChild("number"))};ButtonDoubleLabelStruct.URL="ui://txcuvopdw1srd3";ButtonDoubleLabelStruct.DependPackages=["Common"];return ButtonDoubleLabelStruct}(fairygui.GButton));Common.ButtonDoubleLabelStruct=ButtonDoubleLabelStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonDoubleLabel=(function(_super){__extends(ButtonDoubleLabel,_super);function ButtonDoubleLabel(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonDoubleLabel}(Common.ButtonDoubleLabelStruct));Common.ButtonDoubleLabel=ButtonDoubleLabel})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonPurpleBigStruct=(function(_super){__extends(ButtonPurpleBigStruct,_super);function ButtonPurpleBigStruct(){return _super.call(this)||this}ButtonPurpleBigStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonPurpleBig"))};ButtonPurpleBigStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};ButtonPurpleBigStruct.URL="ui://txcuvopdx9zq4m";ButtonPurpleBigStruct.DependPackages=["Common","System"];return ButtonPurpleBigStruct}(fairygui.GButton));Common.ButtonPurpleBigStruct=ButtonPurpleBigStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonPurpleBig=(function(_super){__extends(ButtonPurpleBig,_super);function ButtonPurpleBig(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonPurpleBig}(Common.ButtonPurpleBigStruct));Common.ButtonPurpleBig=ButtonPurpleBig})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonPurpleSmallStruct=(function(_super){__extends(ButtonPurpleSmallStruct,_super);function ButtonPurpleSmallStruct(){return _super.call(this)||this}ButtonPurpleSmallStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonPurpleSmall"))};ButtonPurpleSmallStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};ButtonPurpleSmallStruct.URL="ui://txcuvopdx9zq4l";ButtonPurpleSmallStruct.DependPackages=["Common"];return ButtonPurpleSmallStruct}(fairygui.GButton));Common.ButtonPurpleSmallStruct=ButtonPurpleSmallStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonPurpleSmall=(function(_super){__extends(ButtonPurpleSmall,_super);function ButtonPurpleSmall(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonPurpleSmall}(Common.ButtonPurpleSmallStruct));Common.ButtonPurpleSmall=ButtonPurpleSmall})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonTipBlueStruct=(function(_super){__extends(ButtonTipBlueStruct,_super);function ButtonTipBlueStruct(){return _super.call(this)||this}ButtonTipBlueStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonTipBlue"))};ButtonTipBlueStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_text=(this.getChild("text"))};ButtonTipBlueStruct.URL="ui://txcuvopdx9zq4s";ButtonTipBlueStruct.DependPackages=["Common"];return ButtonTipBlueStruct}(fairygui.GButton));Common.ButtonTipBlueStruct=ButtonTipBlueStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonTipBlue=(function(_super){__extends(ButtonTipBlue,_super);function ButtonTipBlue(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonTipBlue}(Common.ButtonTipBlueStruct));Common.ButtonTipBlue=ButtonTipBlue})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonTipsStruct=(function(_super){__extends(ButtonTipsStruct,_super);function ButtonTipsStruct(){return _super.call(this)||this}ButtonTipsStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonTips"))};ButtonTipsStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};ButtonTipsStruct.URL="ui://txcuvopdq41hg9";ButtonTipsStruct.DependPackages=["Common"];return ButtonTipsStruct}(fairygui.GButton));Common.ButtonTipsStruct=ButtonTipsStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonTips=(function(_super){__extends(ButtonTips,_super);function ButtonTips(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonTips}(Common.ButtonTipsStruct));Common.ButtonTips=ButtonTips})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonTipYellowStruct=(function(_super){__extends(ButtonTipYellowStruct,_super);function ButtonTipYellowStruct(){return _super.call(this)||this}ButtonTipYellowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonTipYellow"))};ButtonTipYellowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};ButtonTipYellowStruct.URL="ui://txcuvopdfawn4u";ButtonTipYellowStruct.DependPackages=["Common"];return ButtonTipYellowStruct}(fairygui.GButton));Common.ButtonTipYellowStruct=ButtonTipYellowStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonTipYellow=(function(_super){__extends(ButtonTipYellow,_super);function ButtonTipYellow(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonTipYellow}(Common.ButtonTipYellowStruct));Common.ButtonTipYellow=ButtonTipYellow})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonYellowAddStruct=(function(_super){__extends(ButtonYellowAddStruct,_super);function ButtonYellowAddStruct(){return _super.call(this)||this}ButtonYellowAddStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonYellowAdd"))};ButtonYellowAddStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};ButtonYellowAddStruct.URL="ui://txcuvopd9mu0c0";ButtonYellowAddStruct.DependPackages=["Common"];return ButtonYellowAddStruct}(fairygui.GButton));Common.ButtonYellowAddStruct=ButtonYellowAddStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonYellowAdd=(function(_super){__extends(ButtonYellowAdd,_super);function ButtonYellowAdd(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonYellowAdd}(Common.ButtonYellowAddStruct));Common.ButtonYellowAdd=ButtonYellowAdd})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonYellowBigStruct=(function(_super){__extends(ButtonYellowBigStruct,_super);function ButtonYellowBigStruct(){return _super.call(this)||this}ButtonYellowBigStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonYellowBig"))};ButtonYellowBigStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};ButtonYellowBigStruct.URL="ui://txcuvopdx9zq4r";ButtonYellowBigStruct.DependPackages=["Common","System"];return ButtonYellowBigStruct}(fairygui.GButton));Common.ButtonYellowBigStruct=ButtonYellowBigStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonYellowBig=(function(_super){__extends(ButtonYellowBig,_super);function ButtonYellowBig(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonYellowBig}(Common.ButtonYellowBigStruct));Common.ButtonYellowBig=ButtonYellowBig})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonYellowIconBigStruct=(function(_super){__extends(ButtonYellowIconBigStruct,_super);function ButtonYellowIconBigStruct(){return _super.call(this)||this}ButtonYellowIconBigStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonYellowIconBig"))};ButtonYellowIconBigStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"));this.m_text=(this.getChild("text"))};ButtonYellowIconBigStruct.URL="ui://txcuvopdrrsjaa";ButtonYellowIconBigStruct.DependPackages=["Common","System"];return ButtonYellowIconBigStruct}(fairygui.GButton));Common.ButtonYellowIconBigStruct=ButtonYellowIconBigStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonYellowIconBig=(function(_super){__extends(ButtonYellowIconBig,_super);function ButtonYellowIconBig(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonYellowIconBig}(Common.ButtonYellowIconBigStruct));Common.ButtonYellowIconBig=ButtonYellowIconBig})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonYellowSmallStruct=(function(_super){__extends(ButtonYellowSmallStruct,_super);function ButtonYellowSmallStruct(){return _super.call(this)||this}ButtonYellowSmallStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ButtonYellowSmall"))};ButtonYellowSmallStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};ButtonYellowSmallStruct.URL="ui://txcuvopdx9zq4j";ButtonYellowSmallStruct.DependPackages=["Common"];return ButtonYellowSmallStruct}(fairygui.GButton));Common.ButtonYellowSmallStruct=ButtonYellowSmallStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ButtonYellowSmall=(function(_super){__extends(ButtonYellowSmall,_super);function ButtonYellowSmall(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonYellowSmall}(Common.ButtonYellowSmallStruct));Common.ButtonYellowSmall=ButtonYellowSmall})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CheckBox2Struct=(function(_super){__extends(CheckBox2Struct,_super);function CheckBox2Struct(){return _super.call(this)||this}CheckBox2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CheckBox2"))};CheckBox2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};CheckBox2Struct.URL="ui://txcuvopde77bbw";CheckBox2Struct.DependPackages=["Common"];return CheckBox2Struct}(fairygui.GButton));Common.CheckBox2Struct=CheckBox2Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CheckBox2=(function(_super){__extends(CheckBox2,_super);function CheckBox2(){return _super!==null&&_super.apply(this,arguments)||this}return CheckBox2}(Common.CheckBox2Struct));Common.CheckBox2=CheckBox2})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CheckBoxWithTitleStruct=(function(_super){__extends(CheckBoxWithTitleStruct,_super);function CheckBoxWithTitleStruct(){return _super.call(this)||this}CheckBoxWithTitleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CheckBoxWithTitle"))};CheckBoxWithTitleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};CheckBoxWithTitleStruct.URL="ui://txcuvopdmpdxt260";CheckBoxWithTitleStruct.DependPackages=["Common"];return CheckBoxWithTitleStruct}(fairygui.GButton));Common.CheckBoxWithTitleStruct=CheckBoxWithTitleStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CheckBoxWithTitle=(function(_super){__extends(CheckBoxWithTitle,_super);function CheckBoxWithTitle(){return _super!==null&&_super.apply(this,arguments)||this}return CheckBoxWithTitle}(Common.CheckBoxWithTitleStruct));Common.CheckBoxWithTitle=CheckBoxWithTitle})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CloseBtnStruct=(function(_super){__extends(CloseBtnStruct,_super);function CloseBtnStruct(){return _super.call(this)||this}CloseBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","closeBtn"))};CloseBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_closeBtn=(this.getChild("closeBtn"))};CloseBtnStruct.URL="ui://txcuvopdx9zq4b";CloseBtnStruct.DependPackages=["Common"];return CloseBtnStruct}(fairygui.GButton));Common.CloseBtnStruct=CloseBtnStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CloseBtn=(function(_super){__extends(CloseBtn,_super);function CloseBtn(){return _super!==null&&_super.apply(this,arguments)||this}return CloseBtn}(Common.CloseBtnStruct));Common.CloseBtn=CloseBtn})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonAssetItemStruct=(function(_super){__extends(CommonAssetItemStruct,_super);function CommonAssetItemStruct(){return _super.call(this)||this}CommonAssetItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonAssetItem"))};CommonAssetItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_isLock=this.getController("isLock");this.m_frame=(this.getChild("frame"));this.m_icon=(this.getChild("icon"));this.m_num=(this.getChild("num"));this.m_star=(this.getChild("star"))};CommonAssetItemStruct.URL="ui://txcuvopdib9zb5";CommonAssetItemStruct.DependPackages=["Common"];return CommonAssetItemStruct}(fairygui.GButton));Common.CommonAssetItemStruct=CommonAssetItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonAssetItem=(function(_super){__extends(CommonAssetItem,_super);function CommonAssetItem(){return _super!==null&&_super.apply(this,arguments)||this}CommonAssetItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.OnClick)};CommonAssetItem.prototype.OnClick=function(){if(this.itemId!=null){Game.system.showItemInfo(this,this.itemId)}};Object.defineProperty(CommonAssetItem.prototype,"PopupInfo",{set:function(id){this.itemId=id},enumerable:true,configurable:true});CommonAssetItem.prototype.setInfo=function(info){this.m_icon.url=ItemHelper.getItemIcon(info.itemId);this.m_num.text="[color=#e3b121]"+ItemHelper.getItemNum(info.itemId)+"[/color]/"+info.itemNum;this.starNum=Game.config.item.getStarNum(info.itemId);this.PopupInfo=info.itemId};CommonAssetItem.prototype.setItemInfo=function(itemId,itemNum){this.m_icon.url=ItemHelper.getItemIcon(itemId);this.m_num.text="[color=#e3b121]"+ItemHelper.getItemNum(itemId)+"[/color]/"+itemNum;this.PopupInfo=itemId;this.starNum=Game.config.item.getStarNum(itemId)};Object.defineProperty(CommonAssetItem.prototype,"starNum",{set:function(num){this.m_star.starNum=num},enumerable:true,configurable:true});return CommonAssetItem}(Common.CommonAssetItemStruct));Common.CommonAssetItem=CommonAssetItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonAssetItem_littleStruct=(function(_super){__extends(CommonAssetItem_littleStruct,_super);function CommonAssetItem_littleStruct(){return _super.call(this)||this}CommonAssetItem_littleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonAssetItem_little"))};CommonAssetItem_littleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_showSpecial=this.getController("showSpecial");this.m_frame=(this.getChild("frame"));this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_special=(this.getChild("special"));this.m_star=(this.getChild("star"))};CommonAssetItem_littleStruct.URL="ui://txcuvopdpqkqcd";CommonAssetItem_littleStruct.DependPackages=["Common"];return CommonAssetItem_littleStruct}(fairygui.GButton));Common.CommonAssetItem_littleStruct=CommonAssetItem_littleStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonAssetItem_little=(function(_super){__extends(CommonAssetItem_little,_super);function CommonAssetItem_little(){return _super!==null&&_super.apply(this,arguments)||this}CommonAssetItem_little.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.OnClick)};CommonAssetItem_little.prototype.OnClick=function(){if(this.itemId){Game.system.showItemInfo(this,this.itemId)}};Object.defineProperty(CommonAssetItem_little.prototype,"PopupInfo",{set:function(id){this.itemId=id},enumerable:true,configurable:true});return CommonAssetItem_little}(Common.CommonAssetItem_littleStruct));Common.CommonAssetItem_little=CommonAssetItem_little})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonBlackTitleCloseUIStruct=(function(_super){__extends(CommonBlackTitleCloseUIStruct,_super);function CommonBlackTitleCloseUIStruct(){return _super.call(this)||this}CommonBlackTitleCloseUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonBlackTitleCloseUI"))};CommonBlackTitleCloseUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_title=(this.getChild("title"));this.m_btn_close=(this.getChild("btn_close"))};CommonBlackTitleCloseUIStruct.URL="ui://txcuvopdy11yt25b";CommonBlackTitleCloseUIStruct.DependPackages=["Common"];return CommonBlackTitleCloseUIStruct}(fairygui.GComponent));Common.CommonBlackTitleCloseUIStruct=CommonBlackTitleCloseUIStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonBlackTitleCloseUI=(function(_super){__extends(CommonBlackTitleCloseUI,_super);function CommonBlackTitleCloseUI(){return _super!==null&&_super.apply(this,arguments)||this}return CommonBlackTitleCloseUI}(Common.CommonBlackTitleCloseUIStruct));Common.CommonBlackTitleCloseUI=CommonBlackTitleCloseUI})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonButtonStruct=(function(_super){__extends(CommonButtonStruct,_super);function CommonButtonStruct(){return _super.call(this)||this}CommonButtonStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonButton"))};CommonButtonStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_visible_title=this.getController("visible_title");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};CommonButtonStruct.URL="ui://txcuvopdoapb9z";CommonButtonStruct.DependPackages=["Common"];return CommonButtonStruct}(fairygui.GButton));Common.CommonButtonStruct=CommonButtonStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonButton=(function(_super){__extends(CommonButton,_super);function CommonButton(){return _super!==null&&_super.apply(this,arguments)||this}return CommonButton}(Common.CommonButtonStruct));Common.CommonButton=CommonButton})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonDialogUIStruct=(function(_super){__extends(CommonDialogUIStruct,_super);function CommonDialogUIStruct(){return _super.call(this)||this}CommonDialogUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonDialogUI"))};CommonDialogUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_visibleCloseBtn=this.getController("visibleCloseBtn");this.m_title=(this.getChild("title"));this.m_closeBtn=(this.getChild("closeBtn"))};CommonDialogUIStruct.URL="ui://txcuvopdnsfy1p";CommonDialogUIStruct.DependPackages=["Common","System"];return CommonDialogUIStruct}(fairygui.GLabel));Common.CommonDialogUIStruct=CommonDialogUIStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonDialogUI=(function(_super){__extends(CommonDialogUI,_super);function CommonDialogUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isClose=true;return _this}CommonDialogUI.prototype.onWindowHide=function(){this.m_closeBtn.offClick(this,this.onClickClosebtn)};CommonDialogUI.prototype.onWindowShow=function(){this.m_closeBtn.onClick(this,this.onClickClosebtn)};CommonDialogUI.prototype.onClickClosebtn=function(){if(this.moduleWindow&&this.isClose){this.moduleWindow.menuClose()}};return CommonDialogUI}(Common.CommonDialogUIStruct));Common.CommonDialogUI=CommonDialogUI})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonItemStruct=(function(_super){__extends(CommonItemStruct,_super);function CommonItemStruct(){return _super.call(this)||this}CommonItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonItem"))};CommonItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_show_bg=this.getController("c_show_bg");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_star=(this.getChild("star"))};CommonItemStruct.URL="ui://txcuvopdcwjyav";CommonItemStruct.DependPackages=["Common"];return CommonItemStruct}(fairygui.GButton));Common.CommonItemStruct=CommonItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonItem=(function(_super){__extends(CommonItem,_super);function CommonItem(){return _super!==null&&_super.apply(this,arguments)||this}CommonItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.OnClick)};CommonItem.prototype.OnClick=function(){if(this.itemId){Game.system.showItemInfo(this,this.itemId)}};Object.defineProperty(CommonItem.prototype,"PopupInfo",{set:function(id){this.itemId=id},enumerable:true,configurable:true});CommonItem.prototype.setInfo=function(info){this.m_icon.url=ItemHelper.getItemIcon(info.itemId);this.m_title.text="[color=#e3b121]"+ItemHelper.getItemNumFormat(info.itemId)+"[/color]/"+formatNumberUnit(info.itemNum)};CommonItem.prototype.setItemInfo=function(itemId,itemNum){this.m_icon.url=ItemHelper.getItemIcon(itemId);this.m_title.text="[color=#e3b121]"+ItemHelper.getItemNumFormat(itemId)+"[/color]/"+formatNumberUnit(itemNum)};CommonItem.prototype.updateViewByIdNum=function(id,num){var config=Game.config.item.getConfig(id);if(config){this.m_icon.icon=config.iconUrl}this.m_title.text=formatNumberUnit(num);this.m_star.starNum=Game.config.item.getStarNum(id)};CommonItem.prototype.updateViewByDTNum=function(data){var id=data.itemId;var num=data.itemNum;this.updateViewByIdNum(id,num)};CommonItem.prototype.updateViewByArray=function(idNum){var id=idNum[0];var num=idNum[1];this.updateViewByIdNum(id,num)};CommonItem.prototype.updateViewCurMax=function(id,cur,max){var config=Game.config.item.getConfig(id);if(config){this.m_icon.icon=config.iconUrl}this.m_title.text=format("{0}/{1}",cur,max);this.titleColor="#114d74"};CommonItem.prototype.hideBg=function(){this.m_c_show_bg.selectedIndex=1};CommonItem.prototype.showBg=function(){this.m_c_show_bg.selectedIndex=0};return CommonItem}(Common.CommonItemStruct));Common.CommonItem=CommonItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonItem_70Struct=(function(_super){__extends(CommonItem_70Struct,_super);function CommonItem_70Struct(){return _super.call(this)||this}CommonItem_70Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonItem_70"))};CommonItem_70Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_show_bg=this.getController("c_show_bg");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_star=(this.getChild("star"))};CommonItem_70Struct.URL="ui://txcuvopdui5jt23o";CommonItem_70Struct.DependPackages=["Common"];return CommonItem_70Struct}(fairygui.GButton));Common.CommonItem_70Struct=CommonItem_70Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonItem_70=(function(_super){__extends(CommonItem_70,_super);function CommonItem_70(){return _super!==null&&_super.apply(this,arguments)||this}CommonItem_70.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.OnClick)};CommonItem_70.prototype.OnClick=function(){if(this.itemId){Game.system.showItemInfo(this,this.itemId)}};Object.defineProperty(CommonItem_70.prototype,"PopupInfo",{set:function(id){this.itemId=id},enumerable:true,configurable:true});CommonItem_70.prototype.setInfo=function(info){this.m_icon.url=ItemHelper.getItemIcon(info.itemId);this.m_title.text="[color=#e3b121]"+ItemHelper.getItemNum(info.itemId)+"[/color]/"+info.itemNum};CommonItem_70.prototype.setItemInfo=function(itemId,itemNum){this.m_icon.url=ItemHelper.getItemIcon(itemId);this.m_title.text="[color=#e3b121]"+ItemHelper.getItemNum(itemId)+"[/color]/"+itemNum};CommonItem_70.prototype.updateViewByIdNum=function(id,num){var config=Game.config.item.getConfig(id);if(config){this.m_icon.icon=config.iconUrl}this.m_title.text=formatNumberUnit(num)};CommonItem_70.prototype.updateViewByDTNum=function(data){var id=data.itemId;var num=data.itemNum;this.updateViewByIdNum(id,num)};CommonItem_70.prototype.updateViewByArray=function(idNum){var id=idNum[0];var num=idNum[1];this.updateViewByIdNum(id,num)};CommonItem_70.prototype.updateViewCurMax=function(id,cur,max){var config=Game.config.item.getConfig(id);if(config){this.m_icon.icon=config.iconUrl}this.m_title.text=format("{0}/{1}",cur,max);this.titleColor="#114d74"};CommonItem_70.prototype.hideBg=function(){this.m_c_show_bg.selectedIndex=1};CommonItem_70.prototype.showBg=function(){this.m_c_show_bg.selectedIndex=0};return CommonItem_70}(Common.CommonItem_70Struct));Common.CommonItem_70=CommonItem_70})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonProgressBlueStruct=(function(_super){__extends(CommonProgressBlueStruct,_super);function CommonProgressBlueStruct(){return _super.call(this)||this}CommonProgressBlueStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonProgressBlue"))};CommonProgressBlueStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_top1=(this.getChild("top1"))};CommonProgressBlueStruct.URL="ui://txcuvopdr5spav";CommonProgressBlueStruct.DependPackages=["Common","System"];return CommonProgressBlueStruct}(fairygui.GProgressBar));Common.CommonProgressBlueStruct=CommonProgressBlueStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonProgressBlue=(function(_super){__extends(CommonProgressBlue,_super);function CommonProgressBlue(){return _super!==null&&_super.apply(this,arguments)||this}return CommonProgressBlue}(Common.CommonProgressBlueStruct));Common.CommonProgressBlue=CommonProgressBlue})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonSmallItemStruct=(function(_super){__extends(CommonSmallItemStruct,_super);function CommonSmallItemStruct(){return _super.call(this)||this}CommonSmallItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonSmallItem"))};CommonSmallItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_show_bg=this.getController("c_show_bg");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_starList=(this.getChild("starList"));this.m_star=(this.getChild("star"))};CommonSmallItemStruct.URL="ui://txcuvopdtpm8cz";CommonSmallItemStruct.DependPackages=["Common","PfSkin"];return CommonSmallItemStruct}(fairygui.GButton));Common.CommonSmallItemStruct=CommonSmallItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonSmallItem=(function(_super){__extends(CommonSmallItem,_super);function CommonSmallItem(){return _super!==null&&_super.apply(this,arguments)||this}CommonSmallItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.OnClick)};CommonSmallItem.prototype.OnClick=function(){if(this.itemId){Game.system.showItemInfo(this,this.itemId)}};Object.defineProperty(CommonSmallItem.prototype,"PopupInfo",{set:function(id){this.itemId=id},enumerable:true,configurable:true});Object.defineProperty(CommonSmallItem.prototype,"star",{set:function(star){this.m_starList.numItems=star},enumerable:true,configurable:true});CommonSmallItem.prototype.setInfo=function(info){this.m_icon.url=ItemHelper.getItemIcon(info.itemId);this.m_title.text="[color=#e3b121]"+ItemHelper.getItemNum(info.itemId)+"[/color]/"+info.itemNum;this.star=Game.config.item.getStarNum(info.itemId)};CommonSmallItem.prototype.setItemInfo=function(itemId,itemNum){this.m_icon.url=ItemHelper.getItemIcon(itemId);this.m_title.text="[color=#e3b121]"+ItemHelper.getItemNum(itemId)+"[/color]/"+itemNum;this.star=Game.config.item.getStarNum(itemId)};CommonSmallItem.prototype.updateViewByIdNum=function(id,num){var config=Game.config.item.getConfig(id);if(config){this.m_icon.icon=config.iconUrl}this.m_title.text=formatNumberUnit(num);this.star=Game.config.item.getStarNum(id)};CommonSmallItem.prototype.updateViewByDTNum=function(data){var id=data.itemId;var num=data.itemNum;this.updateViewByIdNum(id,num)};CommonSmallItem.prototype.updateViewByArray=function(idNum){var id=idNum[0];var num=idNum[1];this.updateViewByIdNum(id,num)};return CommonSmallItem}(Common.CommonSmallItemStruct));Common.CommonSmallItem=CommonSmallItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonTapeStruct=(function(_super){__extends(CommonTapeStruct,_super);function CommonTapeStruct(){return _super.call(this)||this}CommonTapeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonTape"))};CommonTapeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t1=this.getTransition("t1")};CommonTapeStruct.URL="ui://txcuvopddvatt21f";CommonTapeStruct.DependPackages=["Common"];return CommonTapeStruct}(fairygui.GComponent));Common.CommonTapeStruct=CommonTapeStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonTape=(function(_super){__extends(CommonTape,_super);function CommonTape(){return _super!==null&&_super.apply(this,arguments)||this}return CommonTape}(Common.CommonTapeStruct));Common.CommonTape=CommonTape})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonTitleAssetCloseUIStruct=(function(_super){__extends(CommonTitleAssetCloseUIStruct,_super);function CommonTitleAssetCloseUIStruct(){return _super.call(this)||this}CommonTitleAssetCloseUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonTitleAssetCloseUI"))};CommonTitleAssetCloseUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_assetList=(this.getChild("assetList"));this.m_closeBtn=(this.getChild("closeBtn"))};CommonTitleAssetCloseUIStruct.URL="ui://txcuvopdq41hg2";CommonTitleAssetCloseUIStruct.DependPackages=["Common","System"];return CommonTitleAssetCloseUIStruct}(fairygui.GComponent));Common.CommonTitleAssetCloseUIStruct=CommonTitleAssetCloseUIStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonTitleAssetCloseUI=(function(_super){__extends(CommonTitleAssetCloseUI,_super);function CommonTitleAssetCloseUI(){return _super!==null&&_super.apply(this,arguments)||this}return CommonTitleAssetCloseUI}(Common.CommonTitleAssetCloseUIStruct));Common.CommonTitleAssetCloseUI=CommonTitleAssetCloseUI})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonTitleAssetUIStruct=(function(_super){__extends(CommonTitleAssetUIStruct,_super);function CommonTitleAssetUIStruct(){return _super.call(this)||this}CommonTitleAssetUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonTitleAssetUI"))};CommonTitleAssetUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_assetList=(this.getChild("assetList"))};CommonTitleAssetUIStruct.URL="ui://txcuvopdq41hg3";CommonTitleAssetUIStruct.DependPackages=["Common","System"];return CommonTitleAssetUIStruct}(fairygui.GComponent));Common.CommonTitleAssetUIStruct=CommonTitleAssetUIStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonTitleAssetUI=(function(_super){__extends(CommonTitleAssetUI,_super);function CommonTitleAssetUI(){return _super!==null&&_super.apply(this,arguments)||this}CommonTitleAssetUI.prototype.setAssets=function(assetIds){this.m_assetList.removeChildrenToPool();this.assetIds=assetIds;for(var i=0;i<assetIds.length;i++){var assetId=assetIds[i];var assetItem=this.m_assetList.addItemFromPool();assetItem.setItemId(assetId);this.m_assetList.addChild(assetItem)}};CommonTitleAssetUI.prototype.updateAssets=function(){this.setAssets(this.assetIds)};CommonTitleAssetUI.prototype.getAssetGloblePos=function(index){var assetItem=this.m_assetList.getChildAt(index);var assetIcon=assetItem.m_assetIcon;var globalPos=assetItem.m_assetIcon.displayObject.localToGlobal(new Point(assetIcon.width/2,assetIcon.height/2));return globalPos};return CommonTitleAssetUI}(Common.CommonTitleAssetUIStruct));Common.CommonTitleAssetUI=CommonTitleAssetUI})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonTitlePanelUIStruct=(function(_super){__extends(CommonTitlePanelUIStruct,_super);function CommonTitlePanelUIStruct(){return _super.call(this)||this}CommonTitlePanelUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonTitlePanelUI"))};CommonTitlePanelUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_closeBtn=(this.getChild("closeBtn"))};CommonTitlePanelUIStruct.URL="ui://txcuvopdq41hg4";CommonTitlePanelUIStruct.DependPackages=["Common","System"];return CommonTitlePanelUIStruct}(fairygui.GComponent));Common.CommonTitlePanelUIStruct=CommonTitlePanelUIStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonTitlePanelUI=(function(_super){__extends(CommonTitlePanelUI,_super);function CommonTitlePanelUI(){return _super!==null&&_super.apply(this,arguments)||this}return CommonTitlePanelUI}(Common.CommonTitlePanelUIStruct));Common.CommonTitlePanelUI=CommonTitlePanelUI})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonViewUIStruct=(function(_super){__extends(CommonViewUIStruct,_super);function CommonViewUIStruct(){return _super.call(this)||this}CommonViewUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","CommonViewUI"))};CommonViewUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};CommonViewUIStruct.URL="ui://txcuvopdpqkqcf";CommonViewUIStruct.DependPackages=["Common"];return CommonViewUIStruct}(fairygui.GComponent));Common.CommonViewUIStruct=CommonViewUIStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var CommonViewUI=(function(_super){__extends(CommonViewUI,_super);function CommonViewUI(){return _super!==null&&_super.apply(this,arguments)||this}return CommonViewUI}(Common.CommonViewUIStruct));Common.CommonViewUI=CommonViewUI})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var DialogStruct=(function(_super){__extends(DialogStruct,_super);function DialogStruct(){return _super.call(this)||this}DialogStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","Dialog"))};DialogStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dir=this.getController("dir");this.m_bg=(this.getChild("bg"));this.m_arrowRight=(this.getChild("arrowRight"));this.m_arrowLeft=(this.getChild("arrowLeft"));this.m_bgShadow=(this.getChild("bgShadow"));this.m_title=(this.getChild("title"))};DialogStruct.URL="ui://txcuvopddat1t25z";DialogStruct.DependPackages=["Common"];return DialogStruct}(fairygui.GLabel));Common.DialogStruct=DialogStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Dialog=(function(_super){__extends(Dialog,_super);function Dialog(){return _super!==null&&_super.apply(this,arguments)||this}return Dialog}(Common.DialogStruct));Common.Dialog=Dialog})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var DialogMsgPanelStruct=(function(_super){__extends(DialogMsgPanelStruct,_super);function DialogMsgPanelStruct(){return _super.call(this)||this}DialogMsgPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","DialogMsgPanel"))};DialogMsgPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dir=this.getController("dir");this.m_talkBg=(this.getChild("talkBg"));this.m_title=(this.getChild("title"))};DialogMsgPanelStruct.URL="ui://txcuvopdtpm8c0";DialogMsgPanelStruct.DependPackages=["Common"];return DialogMsgPanelStruct}(fairygui.GLabel));Common.DialogMsgPanelStruct=DialogMsgPanelStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var DialogMsgPanel=(function(_super){__extends(DialogMsgPanel,_super);function DialogMsgPanel(){return _super!==null&&_super.apply(this,arguments)||this}return DialogMsgPanel}(Common.DialogMsgPanelStruct));Common.DialogMsgPanel=DialogMsgPanel})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var EmptyBtnStruct=(function(_super){__extends(EmptyBtnStruct,_super);function EmptyBtnStruct(){return _super.call(this)||this}EmptyBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","emptyBtn"))};EmptyBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};EmptyBtnStruct.URL="ui://txcuvopdyg8ya5";EmptyBtnStruct.DependPackages=["Common"];return EmptyBtnStruct}(fairygui.GButton));Common.EmptyBtnStruct=EmptyBtnStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var EmptyBtn=(function(_super){__extends(EmptyBtn,_super);function EmptyBtn(){return _super!==null&&_super.apply(this,arguments)||this}return EmptyBtn}(Common.EmptyBtnStruct));Common.EmptyBtn=EmptyBtn})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var FunctionItemStruct=(function(_super){__extends(FunctionItemStruct,_super);function FunctionItemStruct(){return _super.call(this)||this}FunctionItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","FunctionItem"))};FunctionItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};FunctionItemStruct.URL="ui://txcuvopdcwjyax";FunctionItemStruct.DependPackages=["Common"];return FunctionItemStruct}(fairygui.GButton));Common.FunctionItemStruct=FunctionItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var OtherFunctionType=Games.OtherFunctionType;var FunctionItem=(function(_super){__extends(FunctionItem,_super);function FunctionItem(){return _super!==null&&_super.apply(this,arguments)||this}FunctionItem.prototype.updateView=function(type){this.type=type;switch(type){case OtherFunctionType.ActorSkillExp:var menuCfg=Game.config.menu.getConfig(MenuId.ArtListExercise);if(menuCfg){var avatarCfg=Game.config.avatar.getConfig(Number(menuCfg.icon));if(avatarCfg){this.m_icon.icon=avatarCfg.iconUrl}}this.m_title.text=TEXT.SystemGoOtherFunction_Go_1;break;case OtherFunctionType.ActorStarCard:var itemConfig=Game.config.item.getConfig(5007);if(itemConfig){this.m_icon.icon=itemConfig.iconUrl;this.m_title.text=itemConfig.name}break;default:break}};return FunctionItem}(Common.FunctionItemStruct));Common.FunctionItem=FunctionItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var GetAssetFxPanelStruct=(function(_super){__extends(GetAssetFxPanelStruct,_super);function GetAssetFxPanelStruct(){return _super.call(this)||this}GetAssetFxPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","GetAssetFxPanel"))};GetAssetFxPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};GetAssetFxPanelStruct.URL="ui://txcuvopdc2r8t24t";GetAssetFxPanelStruct.DependPackages=["Common"];return GetAssetFxPanelStruct}(fairygui.GComponent));Common.GetAssetFxPanelStruct=GetAssetFxPanelStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var GetAssetFxPanel=(function(_super){__extends(GetAssetFxPanel,_super);function GetAssetFxPanel(){return _super!==null&&_super.apply(this,arguments)||this}return GetAssetFxPanel}(Common.GetAssetFxPanelStruct));Common.GetAssetFxPanel=GetAssetFxPanel})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var GetWayAlertStruct=(function(_super){__extends(GetWayAlertStruct,_super);function GetWayAlertStruct(){return _super.call(this)||this}GetWayAlertStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","GetWayAlert"))};GetWayAlertStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_lbl=(this.getChild("lbl"));this.m_descTxt=(this.getChild("descTxt"));this.m_needText=(this.getChild("needText"));this.m_getwayList=(this.getChild("getwayList"));this.m_assetNum=(this.getChild("assetNum"));this.m_assetLoad=(this.getChild("assetLoad"));this.m_bgmodel=(this.getChild("bgmodel"));this.m_commonDialog=(this.getChild("commonDialog"))};GetWayAlertStruct.URL="ui://txcuvopde57g2b";GetWayAlertStruct.DependPackages=["Common","System","PlayerInfo"];return GetWayAlertStruct}(fairygui.GComponent));Common.GetWayAlertStruct=GetWayAlertStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var GetWayAlert=(function(_super){__extends(GetWayAlert,_super);function GetWayAlert(){return _super!==null&&_super.apply(this,arguments)||this}GetWayAlert.prototype.setInfo=function(itemId,costNum){this.m_commonDialog.m_closeBtn.onClick(this,this.onCloseSelf);var itemcfg=Game.config.item.getConfig(itemId);if(itemcfg){this.m_commonDialog.m_title.text=Game.config.msg.getTxtFormat(MsgKey.build_non_material,itemcfg.name);var userItem=Game.moduleModel.item.getItem(itemId);this.m_assetLoad.url=userItem.itemIconUrl;this.m_assetNum.text=formatNumberUnit(costNum-userItem.itemNum).toString();this.m_descTxt.text=itemcfg.get_way_explain;this.setGetWay(itemcfg)}Games.MenuLayer.dialog.addChild(this);this.setSize(fairygui.GRoot.inst.width,fairygui.GRoot.inst.height);this.addRelation(Games.MenuLayer.dialog,fairygui.RelationType.Size)};GetWayAlert.prototype.setGetWay=function(cfg){this.m_getwayList.removeChildrenToPool();var getWayList=cfg.get_way;for(var _i=0,getWayList_1=getWayList;_i<getWayList_1.length;_i++){var getway=getWayList_1[_i];var menuCfg=Game.config.menu.getConfig(getway);if(menuCfg){var getwayItem=this.m_getwayList.addItemFromPool();getwayItem.setMenuId(getway);getwayItem.onClick(this,this.onGetWayItemClick,[getwayItem,getway]);this.m_getwayList.addChild(getwayItem)}}};GetWayAlert.prototype.onGetWayItemClick=function(getwayItem,menuId){var menuConfig=Game.config.menu.getConfig(menuId);if(menuConfig){var openResult=menuConfig.openMenu();if(openResult){this.onCloseSelf()}}Game.sound.playSound(SoundKey.MM01_Button)};GetWayAlert.prototype.onCloseSelf=function(){this.parent.removeChild(this)};return GetWayAlert}(Common.GetWayAlertStruct));Common.GetWayAlert=GetWayAlert})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var GetWayItemStruct=(function(_super){__extends(GetWayItemStruct,_super);function GetWayItemStruct(){return _super.call(this)||this}GetWayItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","GetWayItem"))};GetWayItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_loader=(this.getChild("loader"));this.m_lock=(this.getChild("lock"));this.m_title=(this.getChild("title"))};GetWayItemStruct.URL="ui://txcuvopde57g2e";GetWayItemStruct.DependPackages=["Common"];return GetWayItemStruct}(fairygui.GComponent));Common.GetWayItemStruct=GetWayItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var GetWayItem=(function(_super){__extends(GetWayItem,_super);function GetWayItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.menuId=0;return _this}GetWayItem.prototype.setMenuId=function(menuId){this.menuId=menuId;var menuCfg=Game.config.menu.getConfig(menuId);var avatarCfg=Game.config.avatar.getConfig(Number(menuCfg.icon));if(avatarCfg){this.m_loader.url=avatarCfg.iconUrl}this.m_title.text=menuCfg.name;if(!menuCfg.isUnlock){FguiHelper.halfStaturation(this);this.m_lock.visible=true}else{this.m_lock.visible=false;FguiHelper.clearFilters(this)}};return GetWayItem}(Common.GetWayItemStruct));Common.GetWayItem=GetWayItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var HeadIconItemStruct=(function(_super){__extends(HeadIconItemStruct,_super);function HeadIconItemStruct(){return _super.call(this)||this}HeadIconItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","HeadIconItem"))};HeadIconItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};HeadIconItemStruct.URL="ui://txcuvopdlq443b";HeadIconItemStruct.DependPackages=["Common"];return HeadIconItemStruct}(fairygui.GButton));Common.HeadIconItemStruct=HeadIconItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var HeadIconItem=(function(_super){__extends(HeadIconItem,_super);function HeadIconItem(){return _super!==null&&_super.apply(this,arguments)||this}return HeadIconItem}(Common.HeadIconItemStruct));Common.HeadIconItem=HeadIconItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var HeadItem100Struct=(function(_super){__extends(HeadItem100Struct,_super);function HeadItem100Struct(){return _super.call(this)||this}HeadItem100Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","HeadItem100"))};HeadItem100Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};HeadItem100Struct.URL="ui://txcuvopdtpm8cp";HeadItem100Struct.DependPackages=["Common"];return HeadItem100Struct}(fairygui.GLabel));Common.HeadItem100Struct=HeadItem100Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var HeadItem100=(function(_super){__extends(HeadItem100,_super);function HeadItem100(){return _super!==null&&_super.apply(this,arguments)||this}return HeadItem100}(Common.HeadItem100Struct));Common.HeadItem100=HeadItem100})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var HeadItemIconStruct=(function(_super){__extends(HeadItemIconStruct,_super);function HeadItemIconStruct(){return _super.call(this)||this}HeadItemIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","HeadItemIcon"))};HeadItemIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};HeadItemIconStruct.URL="ui://txcuvopdw1srd5";HeadItemIconStruct.DependPackages=["Common"];return HeadItemIconStruct}(fairygui.GLabel));Common.HeadItemIconStruct=HeadItemIconStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var HeadItemIcon=(function(_super){__extends(HeadItemIcon,_super);function HeadItemIcon(){return _super!==null&&_super.apply(this,arguments)||this}return HeadItemIcon}(Common.HeadItemIconStruct));Common.HeadItemIcon=HeadItemIcon})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var IconLabelItemStruct=(function(_super){__extends(IconLabelItemStruct,_super);function IconLabelItemStruct(){return _super.call(this)||this}IconLabelItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","IconLabelItem"))};IconLabelItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};IconLabelItemStruct.URL="ui://txcuvopdjazc1mf";IconLabelItemStruct.DependPackages=["Common"];return IconLabelItemStruct}(fairygui.GButton));Common.IconLabelItemStruct=IconLabelItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var IconLabelItem=(function(_super){__extends(IconLabelItem,_super);function IconLabelItem(){return _super!==null&&_super.apply(this,arguments)||this}IconLabelItem.prototype.updateView=function(data,id){var config=Game.config.property.getConfig(id);var field=config.field;var value=data[field];this.icon=Game.config.avatar.getConfig(config.icon).iconUrl;this.text=formatNumberUnit(value)};return IconLabelItem}(Common.IconLabelItemStruct));Common.IconLabelItem=IconLabelItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ItemCellViewStruct=(function(_super){__extends(ItemCellViewStruct,_super);function ItemCellViewStruct(){return _super.call(this)||this}ItemCellViewStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ItemCellView"))};ItemCellViewStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};ItemCellViewStruct.URL="ui://txcuvopdjdsf11";ItemCellViewStruct.DependPackages=["Common"];return ItemCellViewStruct}(fairygui.GButton));Common.ItemCellViewStruct=ItemCellViewStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ItemCellView=(function(_super){__extends(ItemCellView,_super);function ItemCellView(){return _super!==null&&_super.apply(this,arguments)||this}ItemCellView.prototype.updateViewByIdNum=function(id,num){var config=Game.config.item.getConfig(id);if(config){this.m_icon.icon=config.iconUrl}this.m_title.text=formatNumberUnit(num)};ItemCellView.prototype.updateViewByDTNum=function(data){var id=data.itemId;var num=data.itemNum;this.updateViewByIdNum(id,num)};ItemCellView.prototype.updateViewByArray=function(idNum){var id=idNum[0];var num=idNum[1];this.updateViewByIdNum(id,num)};return ItemCellView}(Common.ItemCellViewStruct));Common.ItemCellView=ItemCellView})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ItemIconStruct=(function(_super){__extends(ItemIconStruct,_super);function ItemIconStruct(){return _super.call(this)||this}ItemIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ItemIcon"))};ItemIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_itemType=this.getController("itemType");this.m_pactIcon=(this.getChild("pactIcon"));this.m_icon=(this.getChild("icon"))};ItemIconStruct.URL="ui://txcuvopdl5idt25e";ItemIconStruct.DependPackages=["Common"];return ItemIconStruct}(fairygui.GComponent));Common.ItemIconStruct=ItemIconStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ItemIcon=(function(_super){__extends(ItemIcon,_super);function ItemIcon(){return _super!==null&&_super.apply(this,arguments)||this}ItemIcon.prototype.RenderItem=function(data){if(data==null){return}this.itemDate=Games.ItemData.Create(data.itemId,data.itemNum);if(this.itemDate.itemType==7){this.m_itemType.setSelectedIndex(1);this.m_pactIcon.Render(this.itemDate)}else{this.m_itemType.setSelectedIndex(0);this.m_icon.setItemInfo(this.itemDate.itemId,this.itemDate.itemNum);this.m_icon.PopupInfo=this.itemDate.itemId}};Object.defineProperty(ItemIcon.prototype,"ItemId",{set:function(itemId){var itemType=Game.config.item.getType(itemId);if(itemType==7){this.m_itemType.setSelectedIndex(1);this.m_pactIcon.ItemId=itemId}else{this.m_itemType.setSelectedIndex(0);this.m_icon.m_icon.url=Game.config.item.getItemIcon(itemId);this.m_icon.m_star.starNum=Game.config.item.getStarNum(itemId)}},enumerable:true,configurable:true});return ItemIcon}(Common.ItemIconStruct));Common.ItemIcon=ItemIcon})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ItemIcon50x50Struct=(function(_super){__extends(ItemIcon50x50Struct,_super);function ItemIcon50x50Struct(){return _super.call(this)||this}ItemIcon50x50Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ItemIcon50x50"))};ItemIcon50x50Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};ItemIcon50x50Struct.URL="ui://txcuvopdj3a33p";ItemIcon50x50Struct.DependPackages=["Common"];return ItemIcon50x50Struct}(fairygui.GLabel));Common.ItemIcon50x50Struct=ItemIcon50x50Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ItemIcon50x50=(function(_super){__extends(ItemIcon50x50,_super);function ItemIcon50x50(){return _super!==null&&_super.apply(this,arguments)||this}ItemIcon50x50.prototype.setItemNumData=function(data){this.dtItemNum=data;this.m_icon.url=data.itemIconUrl;var level=User.info.level;var titleNum=Math.floor((level/10)+1)*level*10+500;this.m_title.text=formatNumberUnit(titleNum)};ItemIcon50x50.prototype.setItemNumDataForData=function(data){this.m_icon.url=data.itemIconUrl;this.m_title.text=formatNumberUnit(data.itemNum)};ItemIcon50x50.prototype.setItemData=function(data){this.itemData=data;this.m_icon.url=data.itemIconUrl;this.m_title.text=data.itemNumTxt};return ItemIcon50x50}(Common.ItemIcon50x50Struct));Common.ItemIcon50x50=ItemIcon50x50})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ItemInfoStruct=(function(_super){__extends(ItemInfoStruct,_super);function ItemInfoStruct(){return _super.call(this)||this}ItemInfoStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ItemInfo"))};ItemInfoStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_isType7=this.getController("isType7");this.m_name=(this.getChild("name"));this.m_num=(this.getChild("num"));this.m_desc=(this.getChild("desc"));this.m_way=(this.getChild("way"));this.m_itemIcon=(this.getChild("itemIcon"));this.m_btnInfo=(this.getChild("btnInfo"))};ItemInfoStruct.URL="ui://txcuvopddo33t235";ItemInfoStruct.DependPackages=["Common","WarMovie","Cooperation"];return ItemInfoStruct}(fairygui.GComponent));Common.ItemInfoStruct=ItemInfoStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ItemInfo=(function(_super){__extends(ItemInfo,_super);function ItemInfo(){return _super!==null&&_super.apply(this,arguments)||this}ItemInfo.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnInfo.onClick(this,this.OnBtnInfoClick);Game.event.add(GameEventKey.PopupPanel,this.OnEventHide,this)};ItemInfo.prototype.UpdateData=function(data){this.itemData=data;this.m_itemIcon.ItemId=this.itemData.itemId;this.m_name.text=data.itemName;this.m_num.text=Games.TEXT.ItemHave+data.itemNumTxt;this.m_desc.text=data.itemDes;if(data.itemType==7){this.m_isType7.setSelectedIndex(1)}else{this.m_isType7.setSelectedIndex(0);this.m_way.text=data.itemConfig.get_way_explain;if(data.itemType==11||data.itemType==13||data.itemType==14){this.m_num.text=""}else{if(data.itemType==10){this.m_num.text=Games.TEXT.ItemHave+Game.moduleModel.warData.licenceNumInFilming}}}};ItemInfo.prototype.OnEventHide=function(){fairygui.GRoot.inst.hidePopup(this)};ItemInfo.prototype.OnBtnInfoClick=function(){this.OnEventHide();Game.menu.open(MenuId.ActorDetail,this.itemData.compoundActor.itemId)};ItemInfo.prototype.showPopup=function(button){fairygui.GRoot.inst.showPopup(this,button)};ItemInfo.prototype.Show=function(button,itemId){var data=Game.moduleModel.item.getItem(itemId);this.UpdateData(data);this.showPopup(button)};return ItemInfo}(Common.ItemInfoStruct));Common.ItemInfo=ItemInfo})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ItemLockTipStruct=(function(_super){__extends(ItemLockTipStruct,_super);function ItemLockTipStruct(){return _super.call(this)||this}ItemLockTipStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ItemLockTip"))};ItemLockTipStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_name=(this.getChild("name"));this.m_desc=(this.getChild("desc"))};ItemLockTipStruct.URL="ui://txcuvopdcp1ct24f";ItemLockTipStruct.DependPackages=["Common"];return ItemLockTipStruct}(fairygui.GComponent));Common.ItemLockTipStruct=ItemLockTipStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ItemLockTip=(function(_super){__extends(ItemLockTip,_super);function ItemLockTip(){return _super!==null&&_super.apply(this,arguments)||this}ItemLockTip.prototype.UpdateData=function(tip,title){if(title!=null){this.m_name.text=title}this.m_desc.text=tip};ItemLockTip.prototype.showPopup=function(button){fairygui.GRoot.inst.showPopup(this,button,false)};ItemLockTip.prototype.Show=function(button,tip,title){this.UpdateData(tip,title);this.showPopup(button)};return ItemLockTip}(Common.ItemLockTipStruct));Common.ItemLockTip=ItemLockTip})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ItemViewStruct=(function(_super){__extends(ItemViewStruct,_super);function ItemViewStruct(){return _super.call(this)||this}ItemViewStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ItemView"))};ItemViewStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};ItemViewStruct.URL="ui://txcuvopdcwjyb3";ItemViewStruct.DependPackages=["Common"];return ItemViewStruct}(fairygui.GButton));Common.ItemViewStruct=ItemViewStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ItemView=(function(_super){__extends(ItemView,_super);function ItemView(){return _super!==null&&_super.apply(this,arguments)||this}return ItemView}(Common.ItemViewStruct));Common.ItemView=ItemView})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var LevelUpLimitUIStruct=(function(_super){__extends(LevelUpLimitUIStruct,_super);function LevelUpLimitUIStruct(){return _super.call(this)||this}LevelUpLimitUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","LevelUpLimitUI"))};LevelUpLimitUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_content=(this.getChild("content"));this.m_need=(this.getChild("need"));this.m_level=(this.getChild("level"));this.m_bgCom=(this.getChild("bgCom"));this.m_okBtn=(this.getChild("okBtn"));this.m_closeBtn=(this.getChild("closeBtn"))};LevelUpLimitUIStruct.URL="ui://txcuvopdjs171nt";LevelUpLimitUIStruct.DependPackages=["Common"];return LevelUpLimitUIStruct}(fairygui.GComponent));Common.LevelUpLimitUIStruct=LevelUpLimitUIStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var LevelUpLimitUI=(function(_super){__extends(LevelUpLimitUI,_super);function LevelUpLimitUI(){return _super!==null&&_super.apply(this,arguments)||this}LevelUpLimitUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);setScreenSize(this);centerScreen(this);this.m_closeBtn.onClick(this,this.onClickCloseBtn);this.m_okBtn.title=Games.TEXT.Send;this.m_okBtn.onClick(this,this.onClickOkBtn)};LevelUpLimitUI.prototype.onClickCloseBtn=function(){this.removeFromParent()};LevelUpLimitUI.prototype.open=function(title,need,content,level,caller,okFunc){this.m_title.text=title;this.m_level.text=level;this.m_content.text=content;this.m_need.text=need;this.caller=caller;this.okFunc=okFunc;Games.MenuLayer.dialog.addChild(this)};LevelUpLimitUI.prototype.onClickOkBtn=function(){if(this.okFunc){if(this.caller){this.okFunc.apply(this.caller)}else{this.okFunc()}}this.onClickCloseBtn()};return LevelUpLimitUI}(Common.LevelUpLimitUIStruct));Common.LevelUpLimitUI=LevelUpLimitUI})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var MarqueeStruct=(function(_super){__extends(MarqueeStruct,_super);function MarqueeStruct(){return _super.call(this)||this}MarqueeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","Marquee"))};MarqueeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_way=(this.getChild("way"))};MarqueeStruct.URL="ui://txcuvopdenjffs";MarqueeStruct.DependPackages=["Common"];return MarqueeStruct}(fairygui.GLabel));Common.MarqueeStruct=MarqueeStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Marquee=(function(_super){__extends(Marquee,_super);function Marquee(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isShow=false;return _this}Marquee.prototype.onWindowInited=function(){this.tick=Game.tick.AddTick(20,-1,Handler.create(this,this.AddNewContent,null,false),null);this.m_way.IsFinishLoop=true};Marquee.prototype.onWindowDestory=function(){Game.tick.ClearTick(this.tick)};Marquee.prototype.UpdateView=function(msg,distance){if(distance===void 0){distance=20}this.msgList=msg;this.tick.SetDistance(distance)};Marquee.prototype.Show=function(){this.isShow=true;this.m_way.Show();this.tick.Continue()};Marquee.prototype.Hide=function(){this.isShow=false;this.m_way.Hide();this.tick.Stop()};Marquee.prototype.AddNewContent=function(){if(this.isShow&&this.msgList){var range=this.msgList.length;var rand=Math.random();var index=Math.round(rand*(this.msgList.length-1));this.m_way.AddMsg(this.msgList[index])}};return Marquee}(Common.MarqueeStruct));Common.Marquee=Marquee})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ModalBG2Struct=(function(_super){__extends(ModalBG2Struct,_super);function ModalBG2Struct(){return _super.call(this)||this}ModalBG2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ModalBG2"))};ModalBG2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"))};ModalBG2Struct.URL="ui://txcuvopdep0gt25z";ModalBG2Struct.DependPackages=["Common"];return ModalBG2Struct}(fairygui.GComponent));Common.ModalBG2Struct=ModalBG2Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ModalBG2=(function(_super){__extends(ModalBG2,_super);function ModalBG2(){return _super!==null&&_super.apply(this,arguments)||this}return ModalBG2}(Common.ModalBG2Struct));Common.ModalBG2=ModalBG2})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var MovieEvaluationIconStruct=(function(_super){__extends(MovieEvaluationIconStruct,_super);function MovieEvaluationIconStruct(){return _super.call(this)||this}MovieEvaluationIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","MovieEvaluationIcon"))};MovieEvaluationIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_trColor=this.getController("trColor");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};MovieEvaluationIconStruct.URL="ui://txcuvopdcvs8d1";MovieEvaluationIconStruct.DependPackages=["Common"];return MovieEvaluationIconStruct}(fairygui.GLabel));Common.MovieEvaluationIconStruct=MovieEvaluationIconStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var MovieEvaluationIcon=(function(_super){__extends(MovieEvaluationIcon,_super);function MovieEvaluationIcon(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MovieEvaluationIcon.prototype,"ColorIndex",{set:function(value){if(value>=5){this.m_trColor.setSelectedIndex(3)}else{if(value==4){this.m_trColor.setSelectedIndex(2)}else{if(value==3){this.m_trColor.setSelectedIndex(1)}else{this.m_trColor.setSelectedIndex(0)}}}},enumerable:true,configurable:true});return MovieEvaluationIcon}(Common.MovieEvaluationIconStruct));Common.MovieEvaluationIcon=MovieEvaluationIcon})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var MovieIconStruct=(function(_super){__extends(MovieIconStruct,_super);function MovieIconStruct(){return _super.call(this)||this}MovieIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","MovieIcon"))};MovieIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_showHelp=this.getController("showHelp");this.m_showLv=this.getController("showLv");this.m_icon=(this.getChild("icon"));this.m_starList=(this.getChild("starList"));this.m_lv=(this.getChild("lv"));this.m_star=(this.getChild("star"))};MovieIconStruct.URL="ui://txcuvopdcvs8de";MovieIconStruct.DependPackages=["Common","WarMovie"];return MovieIconStruct}(fairygui.GButton));Common.MovieIconStruct=MovieIconStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var MovieIcon=(function(_super){__extends(MovieIcon,_super);function MovieIcon(){return _super!==null&&_super.apply(this,arguments)||this}return MovieIcon}(Common.MovieIconStruct));Common.MovieIcon=MovieIcon})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var MovieIcon_littleStruct=(function(_super){__extends(MovieIcon_littleStruct,_super);function MovieIcon_littleStruct(){return _super.call(this)||this}MovieIcon_littleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","movieIcon_little"))};MovieIcon_littleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};MovieIcon_littleStruct.URL="ui://txcuvopdpqkqch";MovieIcon_littleStruct.DependPackages=["Common"];return MovieIcon_littleStruct}(fairygui.GButton));Common.MovieIcon_littleStruct=MovieIcon_littleStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var MovieIcon_little=(function(_super){__extends(MovieIcon_little,_super);function MovieIcon_little(){return _super!==null&&_super.apply(this,arguments)||this}return MovieIcon_little}(Common.MovieIcon_littleStruct));Common.MovieIcon_little=MovieIcon_little})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var MovieInfoItemStruct=(function(_super){__extends(MovieInfoItemStruct,_super);function MovieInfoItemStruct(){return _super.call(this)||this}MovieInfoItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","MovieInfoItem"))};MovieInfoItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_showHelp=this.getController("showHelp");this.m_boxOffice=(this.getChild("boxOffice"));this.m_icon=(this.getChild("icon"))};MovieInfoItemStruct.URL="ui://txcuvopdcvs8d0";MovieInfoItemStruct.DependPackages=["Common"];return MovieInfoItemStruct}(fairygui.GButton));Common.MovieInfoItemStruct=MovieInfoItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var MovieInfoItem=(function(_super){__extends(MovieInfoItem,_super);function MovieInfoItem(){return _super!==null&&_super.apply(this,arguments)||this}MovieInfoItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};MovieInfoItem.prototype.Render=function(movieData,block){this.movieData=movieData;this.m_boxOffice.text=formatNumberUnit(this.movieData.totalBoxOffice||0,this.movieData.totalBoxOffice>1000?1:0);this.m_icon.icon=Game.config.story.GetPoster(this.movieData.movieId);if(this.movieData&&this.movieData.boxOfficeEvaluation!=null){var sellIcon=Game.config.movieDrop.getSellIcon(this.movieData.boxOfficeEvaluation);this.m_icon.m_lv.icon=Game.config.avatar.GetIconUrl(sellIcon)}this.m_icon.m_lv.title="";this.m_icon.m_starList.numItems=Game.config.story.GetStar(this.movieData.movieId)};return MovieInfoItem}(Common.MovieInfoItemStruct));Common.MovieInfoItem=MovieInfoItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var OscarDanmuStruct=(function(_super){__extends(OscarDanmuStruct,_super);function OscarDanmuStruct(){return _super.call(this)||this}OscarDanmuStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","OscarDanmu"))};OscarDanmuStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"))};OscarDanmuStruct.URL="ui://txcuvopdenjffp";OscarDanmuStruct.DependPackages=["Common"];return OscarDanmuStruct}(fairygui.GComponent));Common.OscarDanmuStruct=OscarDanmuStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var OscarDanmu=(function(_super){__extends(OscarDanmu,_super);function OscarDanmu(){return _super!==null&&_super.apply(this,arguments)||this}OscarDanmu.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.itemRenderer=new Handler(this,this.RenderItem,null,false);this.m_list.numItems=10};OscarDanmu.prototype.Show=function(){for(var index=0;index<this.m_list.numChildren;index++){var item=this.m_list.getChildAt(index);item.Show()}};OscarDanmu.prototype.Hide=function(){for(var index=0;index<this.m_list.numChildren;index++){var item=this.m_list.getChildAt(index);item.Hide()}};OscarDanmu.prototype.RenderItem=function(index,obj){};OscarDanmu.prototype.UpdateView=function(){};OscarDanmu.prototype.AddDanmuList=function(danmuList){if(danmuList==null){return}for(var index=0;index<danmuList.length;index++){var danmu=danmuList[index];this.AddDanmu(danmu)}};OscarDanmu.prototype.AddDanmu=function(danmu){var freetime=Number.MAX_VALUE;var freeItem;for(var index=0;index<this.m_list.numChildren;index++){var item=this.m_list.getChildAt(index);if(item.freeTime<freetime){freetime=item.freeTime;freeItem=item}}if(freeItem){freeItem.AddDanmu(danmu)}};return OscarDanmu}(Common.OscarDanmuStruct));Common.OscarDanmu=OscarDanmu})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var OscarDanmuContentStruct=(function(_super){__extends(OscarDanmuContentStruct,_super);function OscarDanmuContentStruct(){return _super.call(this)||this}OscarDanmuContentStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","OscarDanmuContent"))};OscarDanmuContentStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};OscarDanmuContentStruct.URL="ui://txcuvopdenjffr";OscarDanmuContentStruct.DependPackages=["Common"];return OscarDanmuContentStruct}(fairygui.GLabel));Common.OscarDanmuContentStruct=OscarDanmuContentStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var OscarDanmuContent=(function(_super){__extends(OscarDanmuContent,_super);function OscarDanmuContent(){return _super!==null&&_super.apply(this,arguments)||this}OscarDanmuContent.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};OscarDanmuContent.prototype.InitView=function(data,parentWidth,speed,caller,onFree,onFinish){this.danmuData=data;this.parentWidth=parentWidth;this.speed=speed;this.caller=caller;this.onFree=onFree;this.onFinish=onFinish;this.title=this.danmuData.msg;this.width=this.m_title.width+50;this.startPos=this.parentWidth;this.freePos=this.parentWidth-this.width;this.finishPos=-this.width};OscarDanmuContent.prototype.StartMove=function(){this.StopMove();if(this.x>this.startPos){this.x=this.startPos;this.moveTween=Laya.Tween.to(this,{x:this.freePos},(this.x-this.freePos)/this.speed,null,Handler.create(this,this.OnMoveFinish,null,false))}else{if(this.x>this.freePos){this.moveTween=Laya.Tween.to(this,{x:this.freePos},(this.x-this.freePos)/this.speed,null,Handler.create(this,this.OnMoveFree,null,false))}else{if(this.x>this.finishPos){this.moveTween=Laya.Tween.to(this,{x:this.finishPos},(this.x-this.finishPos)/this.speed,null,Handler.create(this,this.OnMoveFinish,null,false))}else{this.OnMoveFinish()}}}};OscarDanmuContent.prototype.StopMove=function(){if(this.moveTween){this.moveTween.clear();this.moveTween=null}};OscarDanmuContent.prototype.OnMoveFree=function(){this.moveTween=Laya.Tween.to(this,{x:this.finishPos},(this.x-this.finishPos)/this.speed,null,Handler.create(this,this.OnMoveFinish,null,false));this.onFree.apply(this.caller,[this])};OscarDanmuContent.prototype.OnMoveFinish=function(){this.StopMove();this.onFinish.apply(this.caller,[this])};Object.defineProperty(OscarDanmuContent.prototype,"freeTime",{get:function(){if(this.x<this.freePos){return 0}return(this.x-this.freePos)/this.speed},enumerable:true,configurable:true});return OscarDanmuContent}(Common.OscarDanmuContentStruct));Common.OscarDanmuContent=OscarDanmuContent})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var OscarDanmuWayStruct=(function(_super){__extends(OscarDanmuWayStruct,_super);function OscarDanmuWayStruct(){return _super.call(this)||this}OscarDanmuWayStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","OscarDanmuWay"))};OscarDanmuWayStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_talkContent=(this.getChild("talkContent"))};OscarDanmuWayStruct.URL="ui://txcuvopdenjffq";OscarDanmuWayStruct.DependPackages=["Common"];return OscarDanmuWayStruct}(fairygui.GComponent));Common.OscarDanmuWayStruct=OscarDanmuWayStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var OscarDanmuWay=(function(_super){__extends(OscarDanmuWay,_super);function OscarDanmuWay(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.listDanmuContent=[];_this.contentPool=new fairygui.GObjectPool();_this.speed=0.1;_this.contentCache=[];_this.isStart=false;_this.isFinishLoop=false;return _this}Object.defineProperty(OscarDanmuWay.prototype,"IsFinishLoop",{set:function(value){this.isFinishLoop=value},enumerable:true,configurable:true});Object.defineProperty(OscarDanmuWay.prototype,"freeTime",{get:function(){if(this.runToFreeItem){if(this.contentCache.length>0){return this.runToFreeItem.freeTime+this.width/this.speed*this.contentCache.length}else{return this.runToFreeItem.freeTime}}return 0},enumerable:true,configurable:true});OscarDanmuWay.prototype.Show=function(){this.Start()};OscarDanmuWay.prototype.Hide=function(){this.Clear()};OscarDanmuWay.prototype.AddDanmu=function(danmu){if(this.freeTime==0){this.AddDanmuItem(danmu)}else{this.contentCache.push(danmu)}};OscarDanmuWay.prototype.AddMsg=function(msg){var danmu=new Games.DanmuData();danmu.msg=msg;this.AddDanmu(danmu)};OscarDanmuWay.prototype.AddDanmuItem=function(danmu){var content=this.contentPool.getObject(fgui.Common.OscarDanmuContent.URL);this.addChild(content);content.setXY(this.width,0);content.InitView(danmu,this.width,this.speed,this,this.OnMoveFree,this.OnMoveFinish);this.runToFreeItem=content;this.listDanmuContent.push(content);if(this.isStart){content.StartMove()}};OscarDanmuWay.prototype.Start=function(){this.isStart=true;for(var index=0;index<this.listDanmuContent.length;index++){var item=this.listDanmuContent[index];item.StartMove()}};OscarDanmuWay.prototype.Clear=function(){this.isStart=false;if(this.runToFreeItem){this.runToFreeItem=null}for(var index=0;index<this.listDanmuContent.length;index++){var item=this.listDanmuContent[index];item.OnMoveFinish()}this.contentCache.length=0};OscarDanmuWay.prototype.OnMoveFree=function(item){if(!this.isFinishLoop){this.NextDanmu()}};OscarDanmuWay.prototype.NextDanmu=function(){if(this.contentCache&&this.contentCache.length>0){var data=this.contentCache.shift();this.AddDanmuItem(data)}else{this.runToFreeItem=null;if(this.allFreeHandler){this.allFreeHandler.run()}}};OscarDanmuWay.prototype.OnMoveFinish=function(item){if(this.listDanmuContent&&this.listDanmuContent.length>0){this.listDanmuContent.shift()}else{if(this.allFinishHandler){this.allFinishHandler.run()}}this.removeChild(item);this.contentPool.returnObject(item);if(this.isFinishLoop){this.NextDanmu()}};Object.defineProperty(OscarDanmuWay.prototype,"AllFreeHandler",{set:function(handler){this.allFreeHandler=handler},enumerable:true,configurable:true});Object.defineProperty(OscarDanmuWay.prototype,"AllFinishHandler",{set:function(handler){this.allFinishHandler=handler},enumerable:true,configurable:true});return OscarDanmuWay}(Common.OscarDanmuWayStruct));Common.OscarDanmuWay=OscarDanmuWay})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PactIcon_44Struct=(function(_super){__extends(PactIcon_44Struct,_super);function PactIcon_44Struct(){return _super.call(this)||this}PactIcon_44Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","PactIcon_44"))};PactIcon_44Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_showSpecial=this.getController("showSpecial");this.m_title=(this.getChild("title"));this.m_special=(this.getChild("special"));this.m_icon=(this.getChild("icon"));this.m_star=(this.getChild("star"))};PactIcon_44Struct.URL="ui://txcuvopdth3bt23b";PactIcon_44Struct.DependPackages=["Common"];return PactIcon_44Struct}(fairygui.GButton));Common.PactIcon_44Struct=PactIcon_44Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PactIcon_44=(function(_super){__extends(PactIcon_44,_super);function PactIcon_44(){return _super!==null&&_super.apply(this,arguments)||this}PactIcon_44.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.OnClick)};PactIcon_44.prototype.OnClick=function(){if(this.itemData!=null){Game.system.showItemInfo(this,this.itemData.itemId)}};PactIcon_44.prototype.Render=function(itemData){this.itemData=itemData;if(itemData){this.title=itemData.itemNumTxt;this.m_star.starNum=itemData.itemStar;this.m_icon.AvatarId=itemData.itemConfig.icon}};return PactIcon_44}(Common.PactIcon_44Struct));Common.PactIcon_44=PactIcon_44})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PactIcon_80Struct=(function(_super){__extends(PactIcon_80Struct,_super);function PactIcon_80Struct(){return _super.call(this)||this}PactIcon_80Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","PactIcon_80"))};PactIcon_80Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_visible_star=this.getController("c_visible_star");this.m_c_title_color=this.getController("c_title_color");this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"));this.m_star=(this.getChild("star"))};PactIcon_80Struct.URL="ui://txcuvopdyg86t23h";PactIcon_80Struct.DependPackages=["Common"];return PactIcon_80Struct}(fairygui.GButton));Common.PactIcon_80Struct=PactIcon_80Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PactIcon_80=(function(_super){__extends(PactIcon_80,_super);function PactIcon_80(){return _super!==null&&_super.apply(this,arguments)||this}PactIcon_80.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.OnClick)};PactIcon_80.prototype.OnClick=function(){if(this.itemData!=null){Game.system.showItemInfo(this,this.itemData.itemId)}};PactIcon_80.prototype.Render=function(itemData){this.itemData=itemData;if(itemData){this.title=itemData.itemNumTxt;this.m_star.starNum=itemData.itemStar;this.m_icon.m_icon.url=itemData.itemBodyIconUrl}};Object.defineProperty(PactIcon_80.prototype,"ItemId",{set:function(itemId){this.m_icon.m_icon.url=Game.config.item.getItemIcon(itemId);this.m_star.starNum=Game.config.item.getStarNum(itemId)},enumerable:true,configurable:true});PactIcon_80.prototype.updateContractByActorId=function(actorId){var itemConfig=Game.config.item.getItemByActorId(actorId);this.ItemId=itemConfig.id;this.m_title.text=formatNumberUnit(Game.moduleModel.item.getItemNum(itemConfig.id))};PactIcon_80.prototype.setCost=function(cost){this.m_title.text=cost.itemNumTxt;this.ItemId=cost.itemId;var enough=ItemHelper.checkItemEnough(cost);if(enough){this.m_c_title_color.selectedIndex=1}else{this.m_c_title_color.selectedIndex=2}};return PactIcon_80}(Common.PactIcon_80Struct));Common.PactIcon_80=PactIcon_80})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PlayerMovieInfoStruct=(function(_super){__extends(PlayerMovieInfoStruct,_super);function PlayerMovieInfoStruct(){return _super.call(this)||this}PlayerMovieInfoStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","PlayerMovieInfo"))};PlayerMovieInfoStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_listMovieLv=(this.getChild("listMovieLv"));this.m_listBestMovie=(this.getChild("listBestMovie"))};PlayerMovieInfoStruct.URL="ui://txcuvopdcvs8cq";PlayerMovieInfoStruct.DependPackages=["Common"];return PlayerMovieInfoStruct}(fairygui.GComponent));Common.PlayerMovieInfoStruct=PlayerMovieInfoStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PlayerMovieInfo=(function(_super){__extends(PlayerMovieInfo,_super);function PlayerMovieInfo(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.BestMovieItemName="BestMovieItem";return _this}PlayerMovieInfo.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_listMovieLv.itemRenderer=new Handler(this,this.RenderMovieLvItem,null,false);this.m_listBestMovie.itemRenderer=new Handler(this,this.RenderBestMovieItem,null,false);this.m_listMovieLv.on(fairygui.Events.CLICK_ITEM,this,this.OnMovieLvClick);this.m_listBestMovie.on(fairygui.Events.CLICK_ITEM,this,this.OnBestMovieClick);this.m_listMovieLv.foldInvisibleItems=true};PlayerMovieInfo.prototype.Render=function(playerData){this.playerData=playerData;this.m_listMovieLv.numItems=this.playerData.boxOfficeEvaluation.length;this.m_listBestMovie.numItems=this.playerData.bestMovie.length;this.m_listMovieLv.ensureBoundsCorrect()};PlayerMovieInfo.prototype.OnMovieLvClick=function(){};PlayerMovieInfo.prototype.OnBestMovieClick=function(obj){var index=parseInt(obj.name.slice(this.BestMovieItemName.length));var movieData=this.playerData.bestMovie[index];var playerInfo=this.parent;playerInfo.close();Game.system.movieInfo(movieData.movieUuid)};PlayerMovieInfo.prototype.RenderMovieLvItem=function(index,obj){var data=this.playerData.boxOfficeEvaluation[index];if(data<=0){obj.visible=false;return}obj.visible=true;obj.title=data.toString();obj.icon=Game.config.avatar.GetBoxOfficEvaluationIconUrl(index);obj.ColorIndex=index;if(index==5){obj.m_trColor.setSelectedIndex(1)}else{if(index==6){obj.m_trColor.setSelectedIndex(2)}else{obj.m_trColor.setSelectedIndex(0)}}};PlayerMovieInfo.prototype.RenderBestMovieItem=function(index,obj){var data=this.playerData.bestMovie[index];obj.name=this.BestMovieItemName+index;obj.Render(data,this.playerData.blockLevel)};return PlayerMovieInfo}(Common.PlayerMovieInfoStruct));Common.PlayerMovieInfo=PlayerMovieInfo})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUp1056Struct=(function(_super){__extends(PopUp1056Struct,_super);function PopUp1056Struct(){return _super.call(this)||this}PopUp1056Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","PopUp1056"))};PopUp1056Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};PopUp1056Struct.URL="ui://txcuvopdhh7656";PopUp1056Struct.DependPackages=["Common","System"];return PopUp1056Struct}(fairygui.GComponent));Common.PopUp1056Struct=PopUp1056Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUp1056=(function(_super){__extends(PopUp1056,_super);function PopUp1056(){return _super!==null&&_super.apply(this,arguments)||this}return PopUp1056}(Common.PopUp1056Struct));Common.PopUp1056=PopUp1056})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUp406Struct=(function(_super){__extends(PopUp406Struct,_super);function PopUp406Struct(){return _super.call(this)||this}PopUp406Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","PopUp406"))};PopUp406Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};PopUp406Struct.URL="ui://txcuvopdhh7657";PopUp406Struct.DependPackages=["Common","System"];return PopUp406Struct}(fairygui.GComponent));Common.PopUp406Struct=PopUp406Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUp406=(function(_super){__extends(PopUp406,_super);function PopUp406(){return _super!==null&&_super.apply(this,arguments)||this}return PopUp406}(Common.PopUp406Struct));Common.PopUp406=PopUp406})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUp446Struct=(function(_super){__extends(PopUp446Struct,_super);function PopUp446Struct(){return _super.call(this)||this}PopUp446Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","PopUp446"))};PopUp446Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};PopUp446Struct.URL="ui://txcuvopdhh7658";PopUp446Struct.DependPackages=["Common","System"];return PopUp446Struct}(fairygui.GComponent));Common.PopUp446Struct=PopUp446Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUp446=(function(_super){__extends(PopUp446,_super);function PopUp446(){return _super!==null&&_super.apply(this,arguments)||this}return PopUp446}(Common.PopUp446Struct));Common.PopUp446=PopUp446})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUp916Struct=(function(_super){__extends(PopUp916Struct,_super);function PopUp916Struct(){return _super.call(this)||this}PopUp916Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","PopUp916"))};PopUp916Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};PopUp916Struct.URL="ui://txcuvopdhh7659";PopUp916Struct.DependPackages=["Common","System"];return PopUp916Struct}(fairygui.GComponent));Common.PopUp916Struct=PopUp916Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUp916=(function(_super){__extends(PopUp916,_super);function PopUp916(){return _super!==null&&_super.apply(this,arguments)||this}return PopUp916}(Common.PopUp916Struct));Common.PopUp916=PopUp916})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUpBigStruct=(function(_super){__extends(PopUpBigStruct,_super);function PopUpBigStruct(){return _super.call(this)||this}PopUpBigStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","PopUpBig"))};PopUpBigStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_closeBtn=(this.getChild("closeBtn"))};PopUpBigStruct.URL="ui://txcuvopdx9zq48";PopUpBigStruct.DependPackages=["Common","System"];return PopUpBigStruct}(fairygui.GComponent));Common.PopUpBigStruct=PopUpBigStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUpBig=(function(_super){__extends(PopUpBig,_super);function PopUpBig(){return _super!==null&&_super.apply(this,arguments)||this}return PopUpBig}(Common.PopUpBigStruct));Common.PopUpBig=PopUpBig})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUpMsgStruct=(function(_super){__extends(PopUpMsgStruct,_super);function PopUpMsgStruct(){return _super.call(this)||this}PopUpMsgStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","PopUpMsg"))};PopUpMsgStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};PopUpMsgStruct.URL="ui://txcuvopdhh765a";PopUpMsgStruct.DependPackages=["Common","WarMovie"];return PopUpMsgStruct}(fairygui.GComponent));Common.PopUpMsgStruct=PopUpMsgStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUpMsg=(function(_super){__extends(PopUpMsg,_super);function PopUpMsg(){return _super!==null&&_super.apply(this,arguments)||this}return PopUpMsg}(Common.PopUpMsgStruct));Common.PopUpMsg=PopUpMsg})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUpSmallStruct=(function(_super){__extends(PopUpSmallStruct,_super);function PopUpSmallStruct(){return _super.call(this)||this}PopUpSmallStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","PopUpSmall"))};PopUpSmallStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};PopUpSmallStruct.URL="ui://txcuvopdx9zq47";PopUpSmallStruct.DependPackages=["Common","System"];return PopUpSmallStruct}(fairygui.GComponent));Common.PopUpSmallStruct=PopUpSmallStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PopUpSmall=(function(_super){__extends(PopUpSmall,_super);function PopUpSmall(){return _super!==null&&_super.apply(this,arguments)||this}return PopUpSmall}(Common.PopUpSmallStruct));Common.PopUpSmall=PopUpSmall})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBarStruct=(function(_super){__extends(ProgressBarStruct,_super);function ProgressBarStruct(){return _super.call(this)||this}ProgressBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ProgressBar"))};ProgressBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_title=(this.getChild("title"))};ProgressBarStruct.URL="ui://txcuvopdj3a33n";ProgressBarStruct.DependPackages=["Common"];return ProgressBarStruct}(fairygui.GProgressBar));Common.ProgressBarStruct=ProgressBarStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBar=(function(_super){__extends(ProgressBar,_super);function ProgressBar(){return _super!==null&&_super.apply(this,arguments)||this}return ProgressBar}(Common.ProgressBarStruct));Common.ProgressBar=ProgressBar})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBarBlueStruct=(function(_super){__extends(ProgressBarBlueStruct,_super);function ProgressBarBlueStruct(){return _super.call(this)||this}ProgressBarBlueStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ProgressBarBlue"))};ProgressBarBlueStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_light=(this.getChild("light"));this.m_title=(this.getChild("title"))};ProgressBarBlueStruct.URL="ui://txcuvopdfawn4y";ProgressBarBlueStruct.DependPackages=["Common"];return ProgressBarBlueStruct}(fairygui.GProgressBar));Common.ProgressBarBlueStruct=ProgressBarBlueStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBarBlue=(function(_super){__extends(ProgressBarBlue,_super);function ProgressBarBlue(){return _super!==null&&_super.apply(this,arguments)||this}return ProgressBarBlue}(Common.ProgressBarBlueStruct));Common.ProgressBarBlue=ProgressBarBlue})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBarRedStruct=(function(_super){__extends(ProgressBarRedStruct,_super);function ProgressBarRedStruct(){return _super.call(this)||this}ProgressBarRedStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ProgressBarRed"))};ProgressBarRedStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_list=(this.getChild("list"));this.m_light=(this.getChild("light"));this.m_title=(this.getChild("title"))};ProgressBarRedStruct.URL="ui://txcuvopdfawn4v";ProgressBarRedStruct.DependPackages=["Common"];return ProgressBarRedStruct}(fairygui.GProgressBar));Common.ProgressBarRedStruct=ProgressBarRedStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBarRed=(function(_super){__extends(ProgressBarRed,_super);function ProgressBarRed(){return _super!==null&&_super.apply(this,arguments)||this}return ProgressBarRed}(Common.ProgressBarRedStruct));Common.ProgressBarRed=ProgressBarRed})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBarYellowStruct=(function(_super){__extends(ProgressBarYellowStruct,_super);function ProgressBarYellowStruct(){return _super.call(this)||this}ProgressBarYellowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ProgressBarYellow"))};ProgressBarYellowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_list=(this.getChild("list"));this.m_light=(this.getChild("light"));this.m_title=(this.getChild("title"))};ProgressBarYellowStruct.URL="ui://txcuvopddm31t22b";ProgressBarYellowStruct.DependPackages=["Common"];return ProgressBarYellowStruct}(fairygui.GProgressBar));Common.ProgressBarYellowStruct=ProgressBarYellowStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBarYellow=(function(_super){__extends(ProgressBarYellow,_super);function ProgressBarYellow(){return _super!==null&&_super.apply(this,arguments)||this}return ProgressBarYellow}(Common.ProgressBarYellowStruct));Common.ProgressBarYellow=ProgressBarYellow})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBarYellow2Struct=(function(_super){__extends(ProgressBarYellow2Struct,_super);function ProgressBarYellow2Struct(){return _super.call(this)||this}ProgressBarYellow2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ProgressBarYellow2"))};ProgressBarYellow2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_title=(this.getChild("title"))};ProgressBarYellow2Struct.URL="ui://txcuvopdky79he";ProgressBarYellow2Struct.DependPackages=["Common"];return ProgressBarYellow2Struct}(fairygui.GProgressBar));Common.ProgressBarYellow2Struct=ProgressBarYellow2Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBarYellow2=(function(_super){__extends(ProgressBarYellow2,_super);function ProgressBarYellow2(){return _super!==null&&_super.apply(this,arguments)||this}return ProgressBarYellow2}(Common.ProgressBarYellow2Struct));Common.ProgressBarYellow2=ProgressBarYellow2})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBarYellow_smallStruct=(function(_super){__extends(ProgressBarYellow_smallStruct,_super);function ProgressBarYellow_smallStruct(){return _super.call(this)||this}ProgressBarYellow_smallStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ProgressBarYellow_small"))};ProgressBarYellow_smallStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_title=(this.getChild("title"))};ProgressBarYellow_smallStruct.URL="ui://txcuvopdkkdst22z";ProgressBarYellow_smallStruct.DependPackages=["Common"];return ProgressBarYellow_smallStruct}(fairygui.GProgressBar));Common.ProgressBarYellow_smallStruct=ProgressBarYellow_smallStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBarYellow_small=(function(_super){__extends(ProgressBarYellow_small,_super);function ProgressBarYellow_small(){return _super!==null&&_super.apply(this,arguments)||this}return ProgressBarYellow_small}(Common.ProgressBarYellow_smallStruct));Common.ProgressBarYellow_small=ProgressBarYellow_small})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBlueStruct=(function(_super){__extends(ProgressBlueStruct,_super);function ProgressBlueStruct(){return _super.call(this)||this}ProgressBlueStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ProgressBlue"))};ProgressBlueStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_top1=(this.getChild("top1"));this.m_mask=(this.getChild("mask"))};ProgressBlueStruct.URL="ui://txcuvopddk94ay";ProgressBlueStruct.DependPackages=["Common","System"];return ProgressBlueStruct}(fairygui.GProgressBar));Common.ProgressBlueStruct=ProgressBlueStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressBlue=(function(_super){__extends(ProgressBlue,_super);function ProgressBlue(){return _super!==null&&_super.apply(this,arguments)||this}return ProgressBlue}(Common.ProgressBlueStruct));Common.ProgressBlue=ProgressBlue})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressRewardStruct=(function(_super){__extends(ProgressRewardStruct,_super);function ProgressRewardStruct(){return _super.call(this)||this}ProgressRewardStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ProgressReward"))};ProgressRewardStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_progress=this.getController("c_progress");this.m_c_state=this.getController("c_state");this.m_iconBg=(this.getChild("iconBg"));this.m_icon=(this.getChild("icon"));this.m_iconGet=(this.getChild("iconGet"));this.m_title=(this.getChild("title"));this.m_twinkle=this.getTransition("twinkle")};ProgressRewardStruct.URL="ui://txcuvopdx9zq3w";ProgressRewardStruct.DependPackages=["Common"];return ProgressRewardStruct}(fairygui.GButton));Common.ProgressRewardStruct=ProgressRewardStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressReward=(function(_super){__extends(ProgressReward,_super);function ProgressReward(){return _super!==null&&_super.apply(this,arguments)||this}ProgressReward.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickBoxItem);this.tip=Common.TipReward.createInstance()};ProgressReward.prototype.setData=function(index,config,progressData,clickCallBack){this.index=index;this.config=config;this.clickCallBack=clickCallBack;this.progressData=progressData;this.needOrderNum=config.completion-progressData.progress;this.enableGet=progressData.progress>=config.completion;this.isGet=progressData.isGet(index-1);this.title=config.completion.toString();this.m_twinkle.stop();var url="";var iconIndex=index>=2?index-1:1;if(!this.isGet){if(this.enableGet){this.m_c_state.selectedIndex=1;url=format("icon_reward_lv{0}_2",iconIndex);this.m_twinkle.play(null,-1)}else{this.m_c_state.selectedIndex=0;url=format("icon_reward_lv{0}_1",iconIndex)}}else{this.m_c_state.selectedIndex=2;url=format("icon_reward_lv{0}_3",iconIndex)}this.m_icon.icon=fairygui.UIPackage.getItemURL(Games.GuiPackageNames.Common,url);this.m_iconBg.icon=fairygui.UIPackage.getItemURL(Games.GuiPackageNames.Common,url);this.m_iconGet.icon=fairygui.UIPackage.getItemURL(Games.GuiPackageNames.Common,url)};ProgressReward.prototype.onClickBoxItem=function(){if(this.enableGet){var noLicence=true;for(var index=0;index<this.config.reward.length;index++){var element=this.config.reward[index];if(element.itemId==EItemId.licence){noLicence=false}}if(noLicence){Game.protosender.progressBox.GetReward(this.progressData.uuid,this.index)}else{if(Game.moduleModel.warData.isLicenceMax){Game.system.toastText(TEXT.LincenceMax)}else{Game.protosender.progressBox.GetReward(this.progressData.uuid,this.index)}}}if(!this.isGet&&!this.enableGet){if(this.clickCallBack){this.clickCallBack(this.index,this.config.completion,false)}if(this.config){this.showRewardUI(this.config.reward)}}};ProgressReward.prototype.showRewardUI=function(items){this.tip.setItems(items);this.tip.showPopup(this)};return ProgressReward}(Common.ProgressRewardStruct));Common.ProgressReward=ProgressReward})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressTotalBarStruct=(function(_super){__extends(ProgressTotalBarStruct,_super);function ProgressTotalBarStruct(){return _super.call(this)||this}ProgressTotalBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ProgressTotalBar"))};ProgressTotalBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_state=this.getController("c_state");this.m_title=(this.getChild("title"));this.m_list=(this.getChild("list"));this.m_bar=(this.getChild("bar"))};ProgressTotalBarStruct.URL="ui://txcuvopdx9zq3r";ProgressTotalBarStruct.DependPackages=["Common"];return ProgressTotalBarStruct}(fairygui.GComponent));Common.ProgressTotalBarStruct=ProgressTotalBarStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressTotalBar=(function(_super){__extends(ProgressTotalBar,_super);function ProgressTotalBar(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.configs=[];return _this}ProgressTotalBar.prototype.updateBarPanel=function(){};Object.defineProperty(ProgressTotalBar.prototype,"value",{get:function(){return this.m_bar.value},set:function(curProgress){this.m_title.text=curProgress.toString();var progressNums=[];for(var index=0;index<this.configs.length;index++){var element=this.configs[index];progressNums.push(element.completion)}var preMaxValue=0;var max=0;var value=0;var num=progressNums.length;var total=progressNums[num-1];var eachParagragh=total/progressNums.length;for(var index=0;index<num;index++){var prog=progressNums[index];if(curProgress<=prog){max=total/((eachParagragh*(index+1))/prog);var diff=prog-preMaxValue;var va=max*(eachParagragh/total);value=max*(eachParagragh*index/total)+va/diff*(curProgress-preMaxValue);break}preMaxValue=prog}if(max==0){max=progressNums[progressNums.length-1];value=curProgress}this.m_bar.max=max;this.m_bar.value=value},enumerable:true,configurable:true});Object.defineProperty(ProgressTotalBar.prototype,"max",{get:function(){return this.m_bar.max},set:function(value){this.m_bar.max=value},enumerable:true,configurable:true});ProgressTotalBar.prototype.setProgressId=function(progressId,clickCallBack){if(clickCallBack===void 0){clickCallBack=null}this.progressId=progressId;this.clickCallBack=clickCallBack;this.progressData=Game.moduleModel.progressBox.getProgressBoxData(progressId);this.configs=Game.config.complete.getCompleteList(progressId);this.max=this.configs[this.configs.length-1].completion;this.value=this.progressData.progress;var list=this.m_list;if(!list.itemRenderer){list.itemRenderer=Handler.create(this,this.renderListItem,null,false)}list.numItems=this.configs.length};ProgressTotalBar.prototype.renderListItem=function(index,item){var config=this.configs[index];item.setData(index+1,config,this.progressData,this.clickCallBack)};ProgressTotalBar.prototype.updateView=function(){if(this.progressData){this.setProgressId(this.progressId,this.clickCallBack)}};ProgressTotalBar.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.ManageOrderData,this.updateView,this);Game.protoOkEvent.remove(ProtoEventKey.ProgressBoxData,this.updateView,this)};ProgressTotalBar.prototype.onWindowShow=function(){this.updateView();Game.protoOkEvent.add(ProtoEventKey.ManageOrderData,this.updateView,this);Game.protoOkEvent.add(ProtoEventKey.ProgressBoxData,this.updateView,this)};return ProgressTotalBar}(Common.ProgressTotalBarStruct));Common.ProgressTotalBar=ProgressTotalBar})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressYellowBarStruct=(function(_super){__extends(ProgressYellowBarStruct,_super);function ProgressYellowBarStruct(){return _super.call(this)||this}ProgressYellowBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ProgressYellowBar"))};ProgressYellowBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_visiableTitle=this.getController("visiableTitle");this.m_bar=(this.getChild("bar"));this.m_title=(this.getChild("title"))};ProgressYellowBarStruct.URL="ui://txcuvopdx9zq3y";ProgressYellowBarStruct.DependPackages=["Common"];return ProgressYellowBarStruct}(fairygui.GProgressBar));Common.ProgressYellowBarStruct=ProgressYellowBarStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProgressYellowBar=(function(_super){__extends(ProgressYellowBar,_super);function ProgressYellowBar(){return _super!==null&&_super.apply(this,arguments)||this}return ProgressYellowBar}(Common.ProgressYellowBarStruct));Common.ProgressYellowBar=ProgressYellowBar})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProperTextStruct=(function(_super){__extends(ProperTextStruct,_super);function ProperTextStruct(){return _super.call(this)||this}ProperTextStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","ProperText"))};ProperTextStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_value=(this.getChild("value"))};ProperTextStruct.URL="ui://txcuvopdcvs8d8";ProperTextStruct.DependPackages=["Common"];return ProperTextStruct}(fairygui.GLabel));Common.ProperTextStruct=ProperTextStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var ProperText=(function(_super){__extends(ProperText,_super);function ProperText(){return _super!==null&&_super.apply(this,arguments)||this}return ProperText}(Common.ProperTextStruct));Common.ProperText=ProperText})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PropInfoItemStruct=(function(_super){__extends(PropInfoItemStruct,_super);function PropInfoItemStruct(){return _super.call(this)||this}PropInfoItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","PropInfoItem"))};PropInfoItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_c_title_color=this.getController("c_title_color");this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"))};PropInfoItemStruct.URL="ui://txcuvopdlrfq1d";PropInfoItemStruct.DependPackages=["Common"];return PropInfoItemStruct}(fairygui.GButton));Common.PropInfoItemStruct=PropInfoItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var PropInfoItem=(function(_super){__extends(PropInfoItem,_super);function PropInfoItem(){return _super!==null&&_super.apply(this,arguments)||this}PropInfoItem.prototype.setCost=function(cost){this.m_title.text=cost.itemNumTxt+"";this.m_icon.url=cost.itemIconUrl;var enough=ItemHelper.checkItemEnough(cost);if(enough){this.m_c_title_color.selectedIndex=1}else{this.m_c_title_color.selectedIndex=2}};return PropInfoItem}(Common.PropInfoItemStruct));Common.PropInfoItem=PropInfoItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var RankMovieInfoPanelStruct=(function(_super){__extends(RankMovieInfoPanelStruct,_super);function RankMovieInfoPanelStruct(){return _super.call(this)||this}RankMovieInfoPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","RankMovieInfoPanel"))};RankMovieInfoPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_dibian=(this.getChild("dibian"));this.m_name=(this.getChild("name"));this.m_mdiaEaluation=(this.getChild("mdiaEaluation"));this.m_praise=(this.getChild("praise"));this.m_listActor=(this.getChild("listActor"));this.m_Title=(this.getChild("Title"));this.m_boxOffice=(this.getChild("boxOffice"));this.m_btnClose=(this.getChild("btnClose"));this.m_movieIcon=(this.getChild("movieIcon"));this.m_txtDesc=(this.getChild("txtDesc"));this.m_lv=(this.getChild("lv"));this.m_t1=this.getTransition("t1")};RankMovieInfoPanelStruct.URL="ui://txcuvopdcvs8cs";RankMovieInfoPanelStruct.DependPackages=["Common"];return RankMovieInfoPanelStruct}(fairygui.GComponent));Common.RankMovieInfoPanelStruct=RankMovieInfoPanelStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var RankMovieInfoPanel=(function(_super){__extends(RankMovieInfoPanel,_super);function RankMovieInfoPanel(){return _super!==null&&_super.apply(this,arguments)||this}RankMovieInfoPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_listActor.itemRenderer=new Handler(this,this.RenderActor,null,false);this.m_btnClose.onClick(this,this.OnCloseClick)};RankMovieInfoPanel.prototype.open=function(movieData){if(typeof(movieData)==="string"){Game.protoOkEvent.add(ProtoEventKey.rank_GetMovieShortData,this.OnGetMovieShortData,this);Game.protosender.rank.GetMovieShortData(movieData);this.visible=false}else{this.UpdateView(movieData)}Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);centerScreen(this)};RankMovieInfoPanel.prototype.OnGetMovieShortData=function(msg){Game.protoOkEvent.remove(ProtoEventKey.rank_GetMovieShortData,this.OnGetMovieShortData,this);this.UpdateView(msg.data)};RankMovieInfoPanel.prototype.UpdateView=function(movieData){this.visible=true;this.movieData=movieData;this.m_name.text=movieData.name;var cfg=Game.config.story.getConfig(movieData.movieId);this.m_movieIcon.touchable=false;this.m_movieIcon.icon=Game.config.story.GetPoster(this.movieData.movieId);this.m_movieIcon.m_starList.numItems=Game.config.story.GetStar(this.movieData.movieId);this.m_txtDesc.text=cfg.filmDes;this.m_mdiaEaluation.text=this.movieData.mediaCommend.toFixed(1);this.m_praise.text=this.movieData.publicPraise.toFixed(0);if(this.movieData.totalBoxOffice){this.m_lv.text="";var sellIcon=Game.config.movieDrop.getSellIcon(this.movieData.boxOfficeEvaluation);this.m_lv.icon=Game.config.avatar.getConfig(sellIcon).iconUrl;this.m_boxOffice.text=formatNumberUnit(this.movieData.totalBoxOffice,this.movieData.totalBoxOffice>=1000?1:0)}else{this.m_lv.text="";this.m_lv.icon="";this.m_boxOffice.text=""}this.actorList=[];for(var index=0;index<this.movieData.data.length;index++){var actor=this.movieData.data[index];if(actor.actorId<9999){this.actorList.push(actor)}}this.m_listActor.numItems=this.actorList.length};RankMovieInfoPanel.prototype.RenderActor=function(index,obj){var actor=this.actorList[index];obj.touchable=false;obj.Render(actor.actorId,actor.name)};RankMovieInfoPanel.prototype.OnCloseClick=function(){this.close()};RankMovieInfoPanel.prototype.close=function(){Games.MenuLayer.hideDialogModel();this.onHide()};RankMovieInfoPanel.prototype.onHide=function(){this.removeFromParent()};return RankMovieInfoPanel}(Common.RankMovieInfoPanelStruct));Common.RankMovieInfoPanel=RankMovieInfoPanel})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var RankPlayerInfoStruct=(function(_super){__extends(RankPlayerInfoStruct,_super);function RankPlayerInfoStruct(){return _super.call(this)||this}RankPlayerInfoStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","RankPlayerInfo"))};RankPlayerInfoStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_name=(this.getChild("name"));this.m_lv=(this.getChild("lv"));this.m_union=(this.getChild("union"));this.m_signature=(this.getChild("signature"));this.m_street=(this.getChild("street"));this.m_actor=(this.getChild("actor"));this.m_build=(this.getChild("build"));this.m_market=(this.getChild("market"))};RankPlayerInfoStruct.URL="ui://txcuvopdcvs8ck";RankPlayerInfoStruct.DependPackages=["Common"];return RankPlayerInfoStruct}(fairygui.GComponent));Common.RankPlayerInfoStruct=RankPlayerInfoStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var RankPlayerInfo=(function(_super){__extends(RankPlayerInfo,_super);function RankPlayerInfo(){return _super!==null&&_super.apply(this,arguments)||this}RankPlayerInfo.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};RankPlayerInfo.prototype.Render=function(playerData){this.playerData=playerData;if(this.playerData){this.m_name.text=this.playerData.name;this.m_lv.text="Lv."+this.playerData.level;this.m_street.m_value.text=Game.moduleModel.street.GetStreetName(this.playerData.blockLevel);this.m_build.m_value.text=this.playerData.numBuilding.toString();this.m_actor.m_value.text=this.playerData.numActor.toString();var cityStreet=new Games.CityStreetData(this.playerData.city);this.m_market.m_value.text=cityStreet.cityNum+"-"+cityStreet.num;this.m_icon.url=Game.config.headPortrait.GetPlayerIconUrl(this.playerData.portrait,this.playerData.sex);if(this.playerData.perSignature==""){if(this.playerData.userId==User.account.userId){this.playerData.perSignature=Games.TEXT.PlayerSelfSignature}else{this.playerData.perSignature=Games.TEXT.PlayerSignature}}this.m_signature.text=this.playerData.perSignature==""?Games.TEXT.PlayerSignature:this.playerData.perSignature;this.m_union.text=""}};return RankPlayerInfo}(Common.RankPlayerInfoStruct));Common.RankPlayerInfo=RankPlayerInfo})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var RankPlayerInfoPanelStruct=(function(_super){__extends(RankPlayerInfoPanelStruct,_super);function RankPlayerInfoPanelStruct(){return _super.call(this)||this}RankPlayerInfoPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","RankPlayerInfoPanel"))};RankPlayerInfoPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_btnClose=(this.getChild("btnClose"));this.m_info=(this.getChild("info"));this.m_movie=(this.getChild("movie"))};RankPlayerInfoPanelStruct.URL="ui://txcuvopdcvs8cj";RankPlayerInfoPanelStruct.DependPackages=["Common"];return RankPlayerInfoPanelStruct}(fairygui.GComponent));Common.RankPlayerInfoPanelStruct=RankPlayerInfoPanelStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var RankPlayerInfoPanel=(function(_super){__extends(RankPlayerInfoPanel,_super);function RankPlayerInfoPanel(){return _super!==null&&_super.apply(this,arguments)||this}RankPlayerInfoPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnClose.onClick(this,this.OnCloseClick)};RankPlayerInfoPanel.prototype.open=function(playerData){if(typeof(playerData)==="number"){Game.protoOkEvent.add(ProtoEventKey.rank_GetPlayerShortData,this.OnGetPlayerShortDataHandler,this);Game.protosender.rank.GetPlayerShortData(playerData);this.visible=false}else{this.UpdateView(playerData)}Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);centerScreen(this)};RankPlayerInfoPanel.prototype.OnGetPlayerShortDataHandler=function(msg){Game.protoOkEvent.remove(ProtoEventKey.rank_GetPlayerShortData,this.OnGetPlayerShortDataHandler,this);this.UpdateView(msg.data)};RankPlayerInfoPanel.prototype.UpdateView=function(playerData){this.visible=true;this.playerData=playerData;this.m_info.Render(this.playerData);this.m_movie.Render(this.playerData)};RankPlayerInfoPanel.prototype.OnCloseClick=function(){this.close()};RankPlayerInfoPanel.prototype.close=function(){Games.MenuLayer.hideDialogModel();this.onHide()};RankPlayerInfoPanel.prototype.onHide=function(){this.removeFromParent()};return RankPlayerInfoPanel}(Common.RankPlayerInfoPanelStruct));Common.RankPlayerInfoPanel=RankPlayerInfoPanel})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var RankRenamePanelStruct=(function(_super){__extends(RankRenamePanelStruct,_super);function RankRenamePanelStruct(){return _super.call(this)||this}RankRenamePanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","RankRenamePanel"))};RankRenamePanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_titleName=(this.getChild("titleName"));this.m_inputName=(this.getChild("inputName"));this.m_txtContent=(this.getChild("txtContent"));this.m_btn_close=(this.getChild("btn_close"));this.m_btn_rename=(this.getChild("btn_rename"));this.m_btn_editor=(this.getChild("btn_editor"))};RankRenamePanelStruct.URL="ui://txcuvopdcvs8cl";RankRenamePanelStruct.DependPackages=["Common","System"];return RankRenamePanelStruct}(fairygui.GComponent));Common.RankRenamePanelStruct=RankRenamePanelStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var RankRenamePanel=(function(_super){__extends(RankRenamePanel,_super);function RankRenamePanel(){return _super!==null&&_super.apply(this,arguments)||this}RankRenamePanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btn_rename.onClick(this,this.onRenameClick);this.m_btn_close.onClick(this,this.OnCloseClick)};RankRenamePanel.prototype.open=function(title,caller,renameFun,oldName){this.oldName=oldName;this.caller=caller;this.renameFun=renameFun;this.m_inputName.input.focus=true;this.m_inputName.text=this.oldName;Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);centerScreen(this)};RankRenamePanel.prototype.onRenameClick=function(){var newName=this.m_inputName.text;if(this.check()&&newName!=""){this.renameFun.apply(this.caller,[newName]);this.close()}};RankRenamePanel.prototype.check=function(){var newName=this.m_inputName.text;if(!validateServerName(newName,4,18)){return false}if(newName==this.oldName){Game.system.toastText(Game.config.msg.getTxt(MsgKey.account_name_repeat));return false}return true};RankRenamePanel.prototype.OnCloseClick=function(){this.close()};RankRenamePanel.prototype.close=function(){Games.MenuLayer.hideDialogModel();this.onHide()};RankRenamePanel.prototype.onHide=function(){this.m_inputName.input.focus=false;this.removeFromParent()};return RankRenamePanel}(Common.RankRenamePanelStruct));Common.RankRenamePanel=RankRenamePanel})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var RawAssetItemStruct=(function(_super){__extends(RawAssetItemStruct,_super);function RawAssetItemStruct(){return _super.call(this)||this}RawAssetItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","RawAssetItem"))};RawAssetItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_iconLoad=(this.getChild("iconLoad"))};RawAssetItemStruct.URL="ui://txcuvopdahbat23n";RawAssetItemStruct.DependPackages=["Common"];return RawAssetItemStruct}(fairygui.GComponent));Common.RawAssetItemStruct=RawAssetItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var RawAssetItem=(function(_super){__extends(RawAssetItem,_super);function RawAssetItem(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(RawAssetItem.prototype,"itemId",{set:function(id){this.m_iconLoad.url=ItemHelper.getItemIcon(id)},enumerable:true,configurable:true});Object.defineProperty(RawAssetItem.prototype,"avatarId",{set:function(id){this.m_iconLoad.url=Game.config.avatar.GetIconUrl(id)},enumerable:true,configurable:true});Object.defineProperty(RawAssetItem.prototype,"scaleXY",{set:function(val){this.setScale(val,val)},enumerable:true,configurable:true});return RawAssetItem}(Common.RawAssetItemStruct));Common.RawAssetItem=RawAssetItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var RedStruct=(function(_super){__extends(RedStruct,_super);function RedStruct(){return _super.call(this)||this}RedStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","Red"))};RedStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_num=(this.getChild("num"))};RedStruct.URL="ui://txcuvopdw1srd1";RedStruct.DependPackages=["Common"];return RedStruct}(fairygui.GComponent));Common.RedStruct=RedStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Red=(function(_super){__extends(Red,_super);function Red(){return _super!==null&&_super.apply(this,arguments)||this}return Red}(Common.RedStruct));Common.Red=Red})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var RoomContainerStruct=(function(_super){__extends(RoomContainerStruct,_super);function RoomContainerStruct(){return _super.call(this)||this}RoomContainerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","RoomContainer"))};RoomContainerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};RoomContainerStruct.URL="ui://txcuvopdvc2rb2";RoomContainerStruct.DependPackages=["Common"];return RoomContainerStruct}(fairygui.GComponent));Common.RoomContainerStruct=RoomContainerStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var RoomContainer=(function(_super){__extends(RoomContainer,_super);function RoomContainer(){return _super!==null&&_super.apply(this,arguments)||this}return RoomContainer}(Common.RoomContainerStruct));Common.RoomContainer=RoomContainer})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SelectItemStruct=(function(_super){__extends(SelectItemStruct,_super);function SelectItemStruct(){return _super.call(this)||this}SelectItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SelectItem"))};SelectItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_star=(this.getChild("star"))};SelectItemStruct.URL="ui://txcuvopdfwl4t262";SelectItemStruct.DependPackages=["Common"];return SelectItemStruct}(fairygui.GButton));Common.SelectItemStruct=SelectItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SelectItem=(function(_super){__extends(SelectItem,_super);function SelectItem(){return _super!==null&&_super.apply(this,arguments)||this}SelectItem.prototype.Render=function(data){if(data==null){this.m_icon.url="";this.m_title.text="";this.m_star.starNum=0;return}this.m_icon.url=data.itemIconUrl;this.m_title.text=data.itemNumTxt;this.m_star.starNum=data.itemStar};return SelectItem}(Common.SelectItemStruct));Common.SelectItem=SelectItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SkillCellStruct=(function(_super){__extends(SkillCellStruct,_super);function SkillCellStruct(){return _super.call(this)||this}SkillCellStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SkillCell"))};SkillCellStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};SkillCellStruct.URL="ui://txcuvopdjazc1mq";SkillCellStruct.DependPackages=["Common"];return SkillCellStruct}(fairygui.GLabel));Common.SkillCellStruct=SkillCellStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SkillCell=(function(_super){__extends(SkillCell,_super);function SkillCell(){return _super!==null&&_super.apply(this,arguments)||this}return SkillCell}(Common.SkillCellStruct));Common.SkillCell=SkillCell})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SkillEffectCompentStruct=(function(_super){__extends(SkillEffectCompentStruct,_super);function SkillEffectCompentStruct(){return _super.call(this)||this}SkillEffectCompentStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SkillEffectCompent"))};SkillEffectCompentStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Effect_actor01=(this.getChild("Effect_actor01"));this.m_Effect_actor02=(this.getChild("Effect_actor02"));this.m_Effect_actor04=(this.getChild("Effect_actor04"));this.m_Effect_actor05=(this.getChild("Effect_actor05"));this.m_Effect_actor03=(this.getChild("Effect_actor03"));this.m_icon=(this.getChild("icon"));this.m_skillIcon=(this.getChild("skillIcon"));this.m_desc=(this.getChild("desc"));this.m_title=(this.getChild("title"));this.m_t0=this.getTransition("t0")};SkillEffectCompentStruct.URL="ui://txcuvopdvmyct259";SkillEffectCompentStruct.DependPackages=["Common","Fx"];return SkillEffectCompentStruct}(fairygui.GComponent));Common.SkillEffectCompentStruct=SkillEffectCompentStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SkillEffectCompent=(function(_super){__extends(SkillEffectCompent,_super);function SkillEffectCompent(){return _super!==null&&_super.apply(this,arguments)||this}return SkillEffectCompent}(Common.SkillEffectCompentStruct));Common.SkillEffectCompent=SkillEffectCompent})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SkillEffectUIStruct=(function(_super){__extends(SkillEffectUIStruct,_super);function SkillEffectUIStruct(){return _super.call(this)||this}SkillEffectUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SkillEffectUI"))};SkillEffectUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_panel=(this.getChild("panel"))};SkillEffectUIStruct.URL="ui://txcuvopdi2p1ap";SkillEffectUIStruct.DependPackages=["Common","Fx"];return SkillEffectUIStruct}(fairygui.GComponent));Common.SkillEffectUIStruct=SkillEffectUIStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SkillEffectData=(function(){function SkillEffectData(){}return SkillEffectData}());Common.SkillEffectData=SkillEffectData;var SkillEffectUI=(function(_super){__extends(SkillEffectUI,_super);function SkillEffectUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isPlaying=false;_this.isCanClickToComplete=false;_this.skills=[];_this.pools=[];return _this}SkillEffectUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickToNext)};SkillEffectUI.prototype.onClickToNext=function(){if(this.isPlaying&&this.isCanClickToComplete){this.m_panel.m_t0.stop(true,true)}};SkillEffectUI.prototype.playNext=function(){var _this=this;if(this.skills.length>0){setTimeout(function(){_this.isPlaying=false;_this.playOneSkill()},200)}else{this.endPlay()}};SkillEffectUI.prototype.playSkillEffect=function(actorId,type,callback){var data;if(this.pools.length>0){data=this.pools.pop()}else{data=new SkillEffectData()}this.skills.push(data);data.actorId=actorId;data.skillType=type;data.callback=callback;if(data.skillType==Games.SkillTriggerType.upgrade_gold_cost){this.isPlaying=false;this.touchable=false;data.isForce=true}else{data.isForce=false;this.touchable=true}this.playOneSkill()};SkillEffectUI.prototype.playOneSkill=function(){if(this.isPlaying==false){this.isPlaying=true;this.isCanClickToComplete=false;var effectData=void 0;if(this.skills.length>0){effectData=this.skills.shift()}if(effectData){this.playCurSkill(effectData)}else{this.playNextNow()}}else{if(this.skills.length<=0){this.endPlay()}}};SkillEffectUI.prototype.playCurSkill=function(effectData){var _this=this;var actorId=effectData.actorId;var type=effectData.skillType;var callback=effectData.callback;this.pools.push(effectData);var data=Game.moduleModel.actor.getActor(actorId);if(data){var skill=data.getUnlockSkillByType(type);if(skill&&(skill.isEnable||effectData.isForce)){setScreenSize(this);centerScreen(this);Games.MenuLayer.floatMsg.addChild(this);this.m_panel.m_title.text=skill.config.name;this.m_panel.m_desc.text=skill.effectDesc;this.m_panel.m_skillIcon.icon=skill.iconUrl;this.m_panel.m_icon.icon=data.bodyIconUrl;this.isPlaying=true;this.m_panel.m_t0.play(Handler.create(this,this.playEnd,[callback]),1);setTimeout(function(){_this.isCanClickToComplete=true},1000)}else{callback&&callback();this.playNextNow()}}else{callback&&callback();this.playNextNow()}};SkillEffectUI.prototype.playEnd=function(callback){callback&&callback();this.playNext()};SkillEffectUI.prototype.playNextNow=function(){if(this.skills.length>0){this.isPlaying=false;this.playOneSkill()}else{this.endPlay()}};SkillEffectUI.prototype.endPlay=function(){this.isPlaying=false;this.close()};SkillEffectUI.prototype.close=function(){this.removeFromParent()};return SkillEffectUI}(Common.SkillEffectUIStruct));Common.SkillEffectUI=SkillEffectUI})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SliderStruct=(function(_super){__extends(SliderStruct,_super);function SliderStruct(){return _super.call(this)||this}SliderStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","Slider"))};SliderStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_bar=(this.getChild("bar"));this.m_list=(this.getChild("list"));this.m_light=(this.getChild("light"));this.m_num=(this.getChild("num"));this.m_grip=(this.getChild("grip"))};SliderStruct.URL="ui://txcuvopdnsfy29";SliderStruct.DependPackages=["Common"];return SliderStruct}(fairygui.GSlider));Common.SliderStruct=SliderStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Slider=(function(_super){__extends(Slider,_super);function Slider(){return _super!==null&&_super.apply(this,arguments)||this}Slider.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};Object.defineProperty(Slider.prototype,"progress",{get:function(){if(this._progress==null){this._progress=this.value/this.max}return this._progress},set:function(value){this._progress=value},enumerable:true,configurable:true});Object.defineProperty(Slider.prototype,"num",{get:function(){var value=Math.floor(this.progress*this.max);if(value==0){value=1}return value},set:function(value){this.progress=value/this.max;this.value=this.num;this.OnSliderChange()},enumerable:true,configurable:true});Slider.prototype.updateWidthPercent=function(percent){_super.prototype.updateWidthPercent.call(this,percent);var oldNum=this.num;this.progress=percent;if(oldNum!=this.num){this.OnSliderChange()}};Slider.prototype.OnSliderChange=function(){this.m_num.text=this.num+"/"+this.max};return Slider}(Common.SliderStruct));Common.Slider=Slider})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SliderRed_gripStruct=(function(_super){__extends(SliderRed_gripStruct,_super);function SliderRed_gripStruct(){return _super.call(this)||this}SliderRed_gripStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SliderRed_grip"))};SliderRed_gripStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};SliderRed_gripStruct.URL="ui://txcuvopdhh7655";SliderRed_gripStruct.DependPackages=["Common"];return SliderRed_gripStruct}(fairygui.GButton));Common.SliderRed_gripStruct=SliderRed_gripStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SliderRed_grip=(function(_super){__extends(SliderRed_grip,_super);function SliderRed_grip(){return _super!==null&&_super.apply(this,arguments)||this}return SliderRed_grip}(Common.SliderRed_gripStruct));Common.SliderRed_grip=SliderRed_grip})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SplashAssetItemStruct=(function(_super){__extends(SplashAssetItemStruct,_super);function SplashAssetItemStruct(){return _super.call(this)||this}SplashAssetItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SplashAssetItem"))};SplashAssetItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_iconLoad=(this.getChild("iconLoad"))};SplashAssetItemStruct.URL="ui://txcuvopdui5jt23s";SplashAssetItemStruct.DependPackages=["Common"];return SplashAssetItemStruct}(fairygui.GComponent));Common.SplashAssetItemStruct=SplashAssetItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SplashAssetItem=(function(_super){__extends(SplashAssetItem,_super);function SplashAssetItem(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(SplashAssetItem.prototype,"itemId",{set:function(id){this.m_iconLoad.url=ItemHelper.getItemIcon(id);this.scaleXY=0.8},enumerable:true,configurable:true});Object.defineProperty(SplashAssetItem.prototype,"scaleXY",{set:function(val){this.setScale(val,val)},enumerable:true,configurable:true});Object.defineProperty(SplashAssetItem.prototype,"avatarId",{set:function(id){this.m_iconLoad.url=Game.config.avatar.GetIconUrl(id)},enumerable:true,configurable:true});return SplashAssetItem}(Common.SplashAssetItemStruct));Common.SplashAssetItem=SplashAssetItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var StarStruct=(function(_super){__extends(StarStruct,_super);function StarStruct(){return _super.call(this)||this}StarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","Star"))};StarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_starNum=this.getController("starNum");this.m_showBG=this.getController("showBG");this.m_starLimit=this.getController("starLimit");this.m_bs1=(this.getChild("bs1"));this.m_bs2=(this.getChild("bs2"));this.m_bs3=(this.getChild("bs3"));this.m_bs4=(this.getChild("bs4"));this.m_bs5=(this.getChild("bs5"));this.m_bs6=(this.getChild("bs6"));this.m_s1=(this.getChild("s1"));this.m_s2=(this.getChild("s2"));this.m_s3=(this.getChild("s3"));this.m_s4=(this.getChild("s4"));this.m_s5=(this.getChild("s5"));this.m_s6=(this.getChild("s6"))};StarStruct.URL="ui://txcuvopdcvs8do";StarStruct.DependPackages=["Common","WarMovie"];return StarStruct}(fairygui.GComponent));Common.StarStruct=StarStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Star=(function(_super){__extends(Star,_super);function Star(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(Star.prototype,"starNum",{set:function(num){if(num==null){console.log("Error Star Num == null");return}if(num<0){num=0}if(num>6){num=6}this.m_starNum.setSelectedIndex(num)},enumerable:true,configurable:true});return Star}(Common.StarStruct));Common.Star=Star})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var StarItemStruct=(function(_super){__extends(StarItemStruct,_super);function StarItemStruct(){return _super.call(this)||this}StarItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","StarItem"))};StarItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};StarItemStruct.URL="ui://txcuvopdjazc1mu";StarItemStruct.DependPackages=["Common","PfSkin"];return StarItemStruct}(fairygui.GLabel));Common.StarItemStruct=StarItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var StarItem=(function(_super){__extends(StarItem,_super);function StarItem(){return _super!==null&&_super.apply(this,arguments)||this}return StarItem}(Common.StarItemStruct));Common.StarItem=StarItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var StoryItemStruct=(function(_super){__extends(StoryItemStruct,_super);function StoryItemStruct(){return _super.call(this)||this}StoryItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","StoryItem"))};StoryItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_filmStar=(this.getChild("filmStar"))};StoryItemStruct.URL="ui://txcuvopdcwjyay";StoryItemStruct.DependPackages=["Common","WarMovie"];return StoryItemStruct}(fairygui.GLabel));Common.StoryItemStruct=StoryItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var StoryItem=(function(_super){__extends(StoryItem,_super);function StoryItem(){return _super!==null&&_super.apply(this,arguments)||this}return StoryItem}(Common.StoryItemStruct));Common.StoryItem=StoryItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var StreetLevelUpStruct=(function(_super){__extends(StreetLevelUpStruct,_super);function StreetLevelUpStruct(){return _super.call(this)||this}StreetLevelUpStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","StreetLevelUp"))};StreetLevelUpStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_lastStreet=(this.getChild("lastStreet"));this.m_currentStreet=(this.getChild("currentStreet"));this.m_group2=(this.getChild("group2"));this.m_awardList=(this.getChild("awardList"));this.m_btnGetAward=(this.getChild("btnGetAward"));this.m_street=(this.getChild("street"));this.m_t0=this.getTransition("t0")};StreetLevelUpStruct.URL="ui://txcuvopdcke2gb";StreetLevelUpStruct.DependPackages=["Common","Fx","PlayerInfo"];return StreetLevelUpStruct}(fairygui.GComponent));Common.StreetLevelUpStruct=StreetLevelUpStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var StreetLevelUp=(function(_super){__extends(StreetLevelUp,_super);function StreetLevelUp(){return _super!==null&&_super.apply(this,arguments)||this}StreetLevelUp.prototype.open=function(){this.streetData=Game.moduleModel.street.currentStreetData;var lastStreet=this.streetData.LastStreet;if(lastStreet){this.m_lastStreet.text=lastStreet.Name}this.m_street.m_name.text=this.streetData.Name;this.m_street.m_icon.url=this.streetData.iconUrl;this.m_currentStreet.text=this.streetData.Name;this.m_awardList.itemRenderer=Handler.create(this,this.RenderRewardItem,null,false);this.m_awardList.itemProvider=Handler.create(this,this.GetRewardItemResource,null,false);this.m_awardList.numItems=this.streetData.Reward.length;this.m_btnGetAward.onClick(this,this.close);Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);centerScreen(this)};StreetLevelUp.prototype.RenderRewardItem=function(index,obj){var data=this.streetData.Cfg.upgrade_reward[index];if(data==null){return}var itemData=Games.ItemData.Create(data.itemId,data.itemNum);if(itemData.itemType==7){var pact=obj;pact.Render(itemData)}else{var item=obj;item.m_icon.url=itemData.itemIconUrl;item.m_title.text=itemData.itemNumTxt;item.m_star.starNum=itemData.itemStar;item.PopupInfo=data.itemId}};StreetLevelUp.prototype.GetRewardItemResource=function(index){var data=this.streetData.Cfg.upgrade_reward[index];if(data==null){return fgui.Common.CommonItem.URL}var itemType=Game.config.item.getType(data.itemId);if(itemType==7){return fgui.Common.PactIcon_80.URL}else{return fgui.Common.CommonItem.URL}};StreetLevelUp.prototype.close=function(){Games.MenuLayer.hideDialogModel();this.onHide();Game.moduleModel.func.checkBlockLevel()};StreetLevelUp.prototype.onHide=function(){this.removeFromParent()};return StreetLevelUp}(Common.StreetLevelUpStruct));Common.StreetLevelUp=StreetLevelUp})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var StreetLevelUpItemStruct=(function(_super){__extends(StreetLevelUpItemStruct,_super);function StreetLevelUpItemStruct(){return _super.call(this)||this}StreetLevelUpItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","StreetLevelUpItem"))};StreetLevelUpItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_name=(this.getChild("name"))};StreetLevelUpItemStruct.URL="ui://txcuvopdl40ut23c";StreetLevelUpItemStruct.DependPackages=["Common","Building"];return StreetLevelUpItemStruct}(fairygui.GComponent));Common.StreetLevelUpItemStruct=StreetLevelUpItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var StreetLevelUpItem=(function(_super){__extends(StreetLevelUpItem,_super);function StreetLevelUpItem(){return _super!==null&&_super.apply(this,arguments)||this}return StreetLevelUpItem}(Common.StreetLevelUpItemStruct));Common.StreetLevelUpItem=StreetLevelUpItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemAddFansMessageStruct=(function(_super){__extends(SystemAddFansMessageStruct,_super);function SystemAddFansMessageStruct(){return _super.call(this)||this}SystemAddFansMessageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SystemAddFansMessage"))};SystemAddFansMessageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_content=(this.getChild("content"));this.m_progress=(this.getChild("progress"));this.m_btnClose=(this.getChild("btnClose"));this.m_t0=this.getTransition("t0")};SystemAddFansMessageStruct.URL="ui://txcuvopdfbam2m";SystemAddFansMessageStruct.DependPackages=["Common"];return SystemAddFansMessageStruct}(fairygui.GComponent));Common.SystemAddFansMessageStruct=SystemAddFansMessageStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemAddFansMessage=(function(_super){__extends(SystemAddFansMessage,_super);function SystemAddFansMessage(){return _super!==null&&_super.apply(this,arguments)||this}SystemAddFansMessage.prototype.open=function(addFans,closeHandler,title,autoCloseTime){if(autoCloseTime===void 0){autoCloseTime=3}this.addFans=addFans;this.closeHandler=closeHandler;if(isNullOrEmpty(title)){title=Games.TEXT.MarketAddFansTip}this.InitValue(addFans);this.autoCloseTime=autoCloseTime;this.m_progress.max=this.maxValue;this.m_progress.value=this.fromValue;this.m_title.text=title;var str=Games.TEXT.MarketAddFansInfo;this.m_content.text=str.format(User.info.name,formatNumberUnit(addFans));this.m_btnClose.onClick(this,this.close);Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);this.width=this.parent.width;this.height=this.parent.height;this.m_btnClose.visible=false;this.m_t0.play(new Handler(this,this.OnOpen))};SystemAddFansMessage.prototype.OnOpen=function(){this.m_btnClose.visible=true;if(User.info.level>this.lv){this.tweenShowLevelUp=Laya.Tween.to(this.m_progress,{value:this.maxValue},1000,Laya.Ease.linearIn,Handler.create(this,this.ShowLevelUp),0,true,true)}else{this.tweenShowLevelUp=Laya.Tween.to(this.m_progress,{value:this.toValue},1000,Laya.Ease.linearIn,Handler.create(this,this.ShowTip),0,true,true)}};SystemAddFansMessage.prototype.ShowLevelUp=function(){this.fromValue=0;this.lv++;this.maxValue=Game.config.playerLevel.getConfig(this.lv).fans;this.m_progress.value=this.fromValue;this.m_progress.max=this.maxValue;this.OnOpen()};SystemAddFansMessage.prototype.ShowTip=function(){var _this=this;if(this.autoCloseTime>0){this.timeOutHandler=setTimeout(function(){_this.close()},this.autoCloseTime*1000)}else{this.timeOutHandler=null}};SystemAddFansMessage.prototype.close=function(){Games.MenuLayer.hideDialogModel();this.onHide()};SystemAddFansMessage.prototype.onHide=function(){if(this.autoCloseTime>0&&this.timeOutHandler!=null){clearTimeout(this.timeOutHandler);this.timeOutHandler=null}if(this.tweenShowLevelUp){Laya.Tween.clear(this.tweenShowLevelUp);this.tweenShowLevelUp=null}if(this.addFans>this.toValue){Game.system.tryAlertLevelUp(this.closeHandler)}else{if(this.closeHandler){this.closeHandler.run();this.closeHandler=null}}this.removeFromParent()};SystemAddFansMessage.prototype.InitValue=function(addFans){var lastLv=User.info.level;var fansLimit=User.info.fans;if(fansLimit<0){fansLimit=0}var fromValue;while(addFans>fansLimit){lastLv--;if(lastLv<1){break}addFans-=fansLimit;fansLimit=Game.config.playerLevel.GetFansLimit(lastLv)}fromValue=fansLimit-addFans;this.lv=lastLv;this.fromValue=fromValue;this.toValue=User.info.fans;this.maxValue=Game.config.playerLevel.GetFansLimit(this.lv)};return SystemAddFansMessage}(Common.SystemAddFansMessageStruct));Common.SystemAddFansMessage=SystemAddFansMessage})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemAlertAwardsStruct=(function(_super){__extends(SystemAlertAwardsStruct,_super);function SystemAlertAwardsStruct(){return _super.call(this)||this}SystemAlertAwardsStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SystemAlertAwards"))};SystemAlertAwardsStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_assetList=(this.getChild("assetList"));this.m_commonPanel=(this.getChild("commonPanel"));this.m_confirmBtn=(this.getChild("confirmBtn"))};SystemAlertAwardsStruct.URL="ui://txcuvopdsc1s2z";SystemAlertAwardsStruct.DependPackages=["Common"];return SystemAlertAwardsStruct}(fairygui.GComponent));Common.SystemAlertAwardsStruct=SystemAlertAwardsStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemAlertAwards=(function(_super){__extends(SystemAlertAwards,_super);function SystemAlertAwards(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isAddScreenRestSizeListen=false;return _this}SystemAlertAwards.prototype.open=function(itemList,title,confirm,confirmText,hideClose){if(hideClose===void 0){hideClose=false}this.itemList=itemList;this.confirm=confirm;this.m_commonPanel.m_closeBtn.onClick(this,this.onClose);this.m_confirmBtn.onClick(this,this.onConfirm);this.m_confirmBtn.m_title.text=TEXT.ButtonOk;if(confirmText){this.m_confirmBtn.m_title.text=confirmText}if(title){this.m_commonPanel.m_title.text=title}this.m_commonPanel.m_closeBtn.visible=!hideClose;this.m_assetList.removeChildrenToPool();for(var _i=0,itemList_1=itemList;_i<itemList_1.length;_i++){var item=itemList_1[_i];var assetItem=this.m_assetList.addItemFromPool();var cfg=Game.config.item.getConfig(item.itemId);if(cfg){assetItem.m_icon.url=cfg.iconUrl}assetItem.m_title.text=formatNumberUnit(item.itemNum)}Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);this.setScreenSize();this.addScreenRestSizeListen()};SystemAlertAwards.prototype.openRewardStory=function(id,itemNum,title,confirm){this.m_commonPanel.m_closeBtn.onClick(this,this.onClose);this.m_confirmBtn.onClick(this,this.onConfirm);if(title){this.m_commonPanel.m_title.text=title}this.m_assetList.removeChildrenToPool();var assetItem=this.m_assetList.addItemFromPool();var cfg=Game.config.story.getConfig(id);if(cfg){assetItem.m_icon.url=Game.config.avatar.getConfig(cfg.poster_name).iconUrl}assetItem.m_title.text=itemNum.toString();Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);this.setScreenSize();this.addScreenRestSizeListen()};SystemAlertAwards.prototype.onConfirm=function(){if(this.confirm){this.confirm.apply(null,this.itemList)}this.onClose()};SystemAlertAwards.prototype.onClose=function(){this.removeScreenRestSizeListen();Games.MenuLayer.hideDialogModel();this.parent.removeChild(this)};SystemAlertAwards.prototype.addScreenRestSizeListen=function(){if(this.isAddScreenRestSizeListen){return}this.isAddScreenRestSizeListen=true;Laya.stage.on(laya.events.Event.RESIZE,this,this.setScreenSize)};SystemAlertAwards.prototype.removeScreenRestSizeListen=function(){this.isAddScreenRestSizeListen=false;Laya.stage.off(laya.events.Event.RESIZE,this,this.setScreenSize)};SystemAlertAwards.prototype.setScreenSize=function(){centerScreen(this);Games.MenuLayer.resetDialogModelSize()};return SystemAlertAwards}(Common.SystemAlertAwardsStruct));Common.SystemAlertAwards=SystemAlertAwards})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemAlertGiftStruct=(function(_super){__extends(SystemAlertGiftStruct,_super);function SystemAlertGiftStruct(){return _super.call(this)||this}SystemAlertGiftStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SystemAlertGift"))};SystemAlertGiftStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_title=(this.getChild("title"));this.m_des=(this.getChild("des"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_moneyBtn=(this.getChild("moneyBtn"))};SystemAlertGiftStruct.URL="ui://txcuvopdcwjyau";SystemAlertGiftStruct.DependPackages=["Common"];return SystemAlertGiftStruct}(fairygui.GComponent));Common.SystemAlertGiftStruct=SystemAlertGiftStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemAlertGift=(function(_super){__extends(SystemAlertGift,_super);function SystemAlertGift(){return _super!==null&&_super.apply(this,arguments)||this}SystemAlertGift.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_closeBtn.onClick(this,this.onClose);this.m_moneyBtn.onClick(this,this.onConfirm)};SystemAlertGift.prototype.open=function(itemList,title,desc,btnTxt,btnEnabled,confirm,confirmText){this.itemList=itemList;this.confirm=confirm;if(title){this.m_title.text=title}if(desc){this.m_des.text=desc}else{this.m_des.text=""}this.m_moneyBtn.enabled=btnEnabled;this.m_moneyBtn.grayed=!btnEnabled;this.m_moneyBtn.text=btnTxt;this.m_list.removeChildrenToPool();for(var _i=0,itemList_1=itemList;_i<itemList_1.length;_i++){var item=itemList_1[_i];var assetItem=this.m_list.addItemFromPool();var cfg=Game.config.item.getConfig(item.itemId);if(cfg){assetItem.m_icon.icon=cfg.iconUrl}assetItem.m_title.text=item.itemNum.toString()}Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);centerScreen(this)};SystemAlertGift.prototype.onConfirm=function(){if(this.confirm){this.confirm.apply(null,this.itemList)}this.onClose()};SystemAlertGift.prototype.onClose=function(){Games.MenuLayer.hideDialogModel();this.parent.removeChild(this)};return SystemAlertGift}(Common.SystemAlertGiftStruct));Common.SystemAlertGift=SystemAlertGift})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemAlertTextIconMessageStruct=(function(_super){__extends(SystemAlertTextIconMessageStruct,_super);function SystemAlertTextIconMessageStruct(){return _super.call(this)||this}SystemAlertTextIconMessageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SystemAlertTextIconMessage"))};SystemAlertTextIconMessageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_content=(this.getChild("content"));this.m_assetList=(this.getChild("assetList"));this.m_commonDialog=(this.getChild("commonDialog"));this.m_confirmBtn=(this.getChild("confirmBtn"))};SystemAlertTextIconMessageStruct.URL="ui://txcuvopdib9zb4";SystemAlertTextIconMessageStruct.DependPackages=["Common"];return SystemAlertTextIconMessageStruct}(fairygui.GComponent));Common.SystemAlertTextIconMessageStruct=SystemAlertTextIconMessageStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemAlertTextIconMessage=(function(_super){__extends(SystemAlertTextIconMessage,_super);function SystemAlertTextIconMessage(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isAddScreenRestSizeListen=false;return _this}SystemAlertTextIconMessage.prototype.open=function(itemList,title,content,confirm,caller,confirmText,isShowClose,isShowCurNum){if(isShowCurNum===void 0){isShowCurNum=true}this.itemList=itemList;this.confirm=confirm;this.caller=caller;this.m_commonDialog.m_closeBtn.visible=true;if(isShowClose!=null){this.m_commonDialog.m_closeBtn.visible=isShowClose}this.m_commonDialog.m_closeBtn.onClick(this,this.onClose);this.m_confirmBtn.onClick(this,this.onConfirm);this.m_commonDialog.m_title.text="";this.m_content.text="";this.m_confirmBtn.m_title.text=TEXT.ButtonOk;if(title){this.m_commonDialog.m_title.text=title}if(content){this.m_content.text=content}if(confirmText){this.m_confirmBtn.m_title.text=confirmText}this.m_assetList.removeChildrenToPool();for(var _i=0,itemList_1=itemList;_i<itemList_1.length;_i++){var item=itemList_1[_i];var assetItem=this.m_assetList.addItemFromPool();assetItem.sound="";if(isShowCurNum){assetItem.setInfo(item)}else{assetItem.updateViewByDTNum(item)}}Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);this.setScreenSize();this.addScreenRestSizeListen()};SystemAlertTextIconMessage.prototype.onConfirm=function(){if(this.confirm){this.confirm.call(this,this.itemList)}this.onClose()};SystemAlertTextIconMessage.prototype.onClose=function(){this.removeScreenRestSizeListen();Games.MenuLayer.hideDialogModel();this.parent.removeChild(this)};SystemAlertTextIconMessage.prototype.addScreenRestSizeListen=function(){if(this.isAddScreenRestSizeListen){return}this.isAddScreenRestSizeListen=true;Laya.stage.on(laya.events.Event.RESIZE,this,this.setScreenSize)};SystemAlertTextIconMessage.prototype.removeScreenRestSizeListen=function(){this.isAddScreenRestSizeListen=false;Laya.stage.off(laya.events.Event.RESIZE,this,this.setScreenSize)};SystemAlertTextIconMessage.prototype.setScreenSize=function(){centerScreen(this);Games.MenuLayer.resetDialogModelSize()};return SystemAlertTextIconMessage}(Common.SystemAlertTextIconMessageStruct));Common.SystemAlertTextIconMessage=SystemAlertTextIconMessage})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemGetItemMessageStruct=(function(_super){__extends(SystemGetItemMessageStruct,_super);function SystemGetItemMessageStruct(){return _super.call(this)||this}SystemGetItemMessageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SystemGetItemMessage"))};SystemGetItemMessageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_firework=(this.getChild("firework"));this.m_Group=(this.getChild("Group"));this.m_btnClose=(this.getChild("btnClose"));this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1");this.m_t2=this.getTransition("t2")};SystemGetItemMessageStruct.URL="ui://txcuvopdmu1z2b";SystemGetItemMessageStruct.DependPackages=["Common","Fx"];return SystemGetItemMessageStruct}(fairygui.GComponent));Common.SystemGetItemMessageStruct=SystemGetItemMessageStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemGetItemMessage=(function(_super){__extends(SystemGetItemMessage,_super);function SystemGetItemMessage(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.showIndex=0;_this.MaxShowNum=10;return _this}SystemGetItemMessage.prototype.open=function(itemList,closeFun,isAutoClose,closeButtonVisiable,buttonEnable,isClickButtonAutoClose){if(closeFun===void 0){closeFun=null}if(isAutoClose===void 0){isAutoClose=false}if(closeButtonVisiable===void 0){closeButtonVisiable=true}if(buttonEnable===void 0){buttonEnable=true}if(isClickButtonAutoClose===void 0){isClickButtonAutoClose=true}this.triggerCloseFunc();this.items=itemList;this.isClickButtonAutoClose=isClickButtonAutoClose;this.closeFun=closeFun;this.m_Group.m_listItem.itemRenderer=new Handler(this,this.RenderItem,null,false);this.m_btnClose.enabled=buttonEnable;this.m_btnClose.visible=closeButtonVisiable;this.m_btnClose.onClick(this,this.close);this.isAutoClose=isAutoClose;Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);this.width=this.parent.width;this.height=this.parent.height;this.showIndex=0;this.Show()};SystemGetItemMessage.prototype.Show=function(){var _this=this;Game.event.dispatch(GameEventKey.PopupPanel);this.UpdateRewardList();if(this.isAutoClose){this.autoCloseTimeout=setTimeout(function(){_this.close()},500)}this.m_t0.play()};SystemGetItemMessage.prototype.UpdateRewardList=function(){this.m_Group.m_listItem.numItems=Math.min(this.MaxShowNum,this.items.length-this.showIndex)};SystemGetItemMessage.prototype.RenderItem=function(index,obj){var data=this.items[index+this.showIndex];obj.m_num.text=data.itemNumTxt;obj.m_star.starNum=data.itemStar;obj.icon=Game.moduleModel.item.getItem(data.itemId).itemIconUrl;obj.PopupInfo=data.itemId};SystemGetItemMessage.prototype.close=function(){clearTimeout(this.autoCloseTimeout);this.onHide()};SystemGetItemMessage.prototype.onHide=function(){if(this.items.length>this.showIndex+this.MaxShowNum){this.showIndex+=this.MaxShowNum;this.Show();return}Games.MenuLayer.hideDialogModel();this.triggerCloseFunc();this.removeFromParent()};SystemGetItemMessage.prototype.triggerCloseFunc=function(){if(this.closeFun){this.closeFun();this.closeFun=null}};return SystemGetItemMessage}(Common.SystemGetItemMessageStruct));Common.SystemGetItemMessage=SystemGetItemMessage})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemGoOtherFunctionStruct=(function(_super){__extends(SystemGoOtherFunctionStruct,_super);function SystemGoOtherFunctionStruct(){return _super.call(this)||this}SystemGoOtherFunctionStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SystemGoOtherFunction"))};SystemGoOtherFunctionStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_des=(this.getChild("des"));this.m_list=(this.getChild("list"));this.m_closeFullBtn=(this.getChild("closeFullBtn"));this.m_enbaleBtn=(this.getChild("enbaleBtn"));this.m_closeBtn=(this.getChild("closeBtn"))};SystemGoOtherFunctionStruct.URL="ui://txcuvopdcwjyaw";SystemGoOtherFunctionStruct.DependPackages=["Common"];return SystemGoOtherFunctionStruct}(fairygui.GComponent));Common.SystemGoOtherFunctionStruct=SystemGoOtherFunctionStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var OtherFunctionType=Games.OtherFunctionType;var SystemGoOtherFunction=(function(_super){__extends(SystemGoOtherFunction,_super);function SystemGoOtherFunction(){return _super!==null&&_super.apply(this,arguments)||this}SystemGoOtherFunction.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_closeBtn.visible=false;this.m_closeFullBtn.onClick(this,this.onClickFullCloseBtn);this.m_list.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem)};SystemGoOtherFunction.prototype.onClickItem=function(item){this.onClose();switch(item.type){case OtherFunctionType.ActorSkillExp:var menuId=MenuId.ArtListExercise;var menuConfig=Game.config.menu.getConfig(menuId);var lv=Game.moduleModel.building.getRoomLevel(Games.RoomType.Training);if(lv>0){var enableOpen=Games.MenuValidateEnableOpen.getInstance().validate(menuId);if(enableOpen){Game.menu.open(menuId);return}}else{Game.system.toastMsg(MsgKey.actor_trainingroom)}break;case OtherFunctionType.ActorStarCard:this.onConfirm();break;default:break}};SystemGoOtherFunction.prototype.onClickCloseBtn=function(){this.onClose()};SystemGoOtherFunction.prototype.onClickFullCloseBtn=function(){this.onClose()};SystemGoOtherFunction.prototype.open=function(type,title,desc,confirmFunc){this.type=type;this.confirmFunc=confirmFunc;this.m_list.removeChildrenToPool();var item=this.m_list.addItemFromPool();item.updateView(type);if(isNullOrEmpty(title)){this.m_title.text=TEXT.SystemGoOtherFunction_Title}else{this.m_title.text=title}if(isNullOrEmpty(desc)){switch(this.type){case OtherFunctionType.ActorSkillExp:this.m_des.text=TEXT.SystemGoOtherFunction_Desc_1;break;case OtherFunctionType.ActorStarCard:this.m_des.text=TEXT.SystemGoOtherFunction_Desc_2;break;default:break}}else{this.m_des.text=desc}Games.MenuLayer.showDialogModel();setScreenSize(this);centerScreen(this);Games.MenuLayer.dialog.addChild(this)};SystemGoOtherFunction.prototype.onConfirm=function(){if(this.confirmFunc){this.confirmFunc.apply(null)}this.onClose()};SystemGoOtherFunction.prototype.onClose=function(){Games.MenuLayer.hideDialogModel();this.removeFromParent()};return SystemGoOtherFunction}(Common.SystemGoOtherFunctionStruct));Common.SystemGoOtherFunction=SystemGoOtherFunction})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemItemGroupStruct=(function(_super){__extends(SystemItemGroupStruct,_super);function SystemItemGroupStruct(){return _super.call(this)||this}SystemItemGroupStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SystemItemGroup"))};SystemItemGroupStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_listItem=(this.getChild("listItem"));this.m_t0=this.getTransition("t0")};SystemItemGroupStruct.URL="ui://txcuvopdmxlst24b";SystemItemGroupStruct.DependPackages=["Common","Fx"];return SystemItemGroupStruct}(fairygui.GComponent));Common.SystemItemGroupStruct=SystemItemGroupStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemItemGroup=(function(_super){__extends(SystemItemGroup,_super);function SystemItemGroup(){return _super!==null&&_super.apply(this,arguments)||this}return SystemItemGroup}(Common.SystemItemGroupStruct));Common.SystemItemGroup=SystemItemGroup})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemLevelUpMessageStruct=(function(_super){__extends(SystemLevelUpMessageStruct,_super);function SystemLevelUpMessageStruct(){return _super.call(this)||this}SystemLevelUpMessageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SystemLevelUpMessage"))};SystemLevelUpMessageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};SystemLevelUpMessageStruct.URL="ui://txcuvopdfbam2t";SystemLevelUpMessageStruct.DependPackages=["Common"];return SystemLevelUpMessageStruct}(fairygui.GComponent));Common.SystemLevelUpMessageStruct=SystemLevelUpMessageStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemLevelUpMessage=(function(_super){__extends(SystemLevelUpMessage,_super);function SystemLevelUpMessage(){return _super!==null&&_super.apply(this,arguments)||this}return SystemLevelUpMessage}(Common.SystemLevelUpMessageStruct));Common.SystemLevelUpMessage=SystemLevelUpMessage})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemSelectItemMessageStruct=(function(_super){__extends(SystemSelectItemMessageStruct,_super);function SystemSelectItemMessageStruct(){return _super.call(this)||this}SystemSelectItemMessageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SystemSelectItemMessage"))};SystemSelectItemMessageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_assetList=(this.getChild("assetList"));this.m_commonPanel=(this.getChild("commonPanel"));this.m_confirmBtn=(this.getChild("confirmBtn"))};SystemSelectItemMessageStruct.URL="ui://txcuvopdfwl4t261";SystemSelectItemMessageStruct.DependPackages=["Common"];return SystemSelectItemMessageStruct}(fairygui.GComponent));Common.SystemSelectItemMessageStruct=SystemSelectItemMessageStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemSelectItemMessage=(function(_super){__extends(SystemSelectItemMessage,_super);function SystemSelectItemMessage(){return _super!==null&&_super.apply(this,arguments)||this}SystemSelectItemMessage.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_commonPanel.m_closeBtn.onClick(this,this.OnCloseClick);this.m_confirmBtn.onClick(this,this.OnBtnConfirmClick);this.m_assetList.itemRenderer=Handler.create(this,this.RenderItem,null,false)};SystemSelectItemMessage.prototype.open=function(itemList,caller,fun){this.m_assetList.selectNone();this.itemList=itemList;if(this.itemList){this.m_assetList.numItems=this.itemList.length;if(this.itemList.length==1){this.m_assetList.selectedIndex=0}else{this.m_assetList.selectNone()}}this.caller=caller;this.fun=fun;Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);centerScreen(this)};SystemSelectItemMessage.prototype.RenderItem=function(index,obj){var data=this.itemList[index];obj.Render(data)};SystemSelectItemMessage.prototype.OnBtnConfirmClick=function(){if(this.m_assetList.selectedIndex<0){Game.system.toastText(Games.TEXT.BagSelectItem);return}var item=this.itemList[this.m_assetList.selectedIndex];if(item==null){Game.system.toastText(Games.TEXT.BagSelectItem);return}if(this.fun){if(this.caller){this.fun.apply(this.caller,[this.m_assetList.selectedIndex])}else{this.fun(this.m_assetList.selectedIndex)}}this.close()};SystemSelectItemMessage.prototype.OnCloseClick=function(){this.close()};SystemSelectItemMessage.prototype.close=function(){Games.MenuLayer.hideDialogModel();this.onHide()};SystemSelectItemMessage.prototype.onHide=function(){this.removeFromParent()};return SystemSelectItemMessage}(Common.SystemSelectItemMessageStruct));Common.SystemSelectItemMessage=SystemSelectItemMessage})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemSetNumMessageStruct=(function(_super){__extends(SystemSetNumMessageStruct,_super);function SystemSetNumMessageStruct(){return _super.call(this)||this}SystemSetNumMessageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","SystemSetNumMessage"))};SystemSetNumMessageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_content=(this.getChild("content"));this.m_title=(this.getChild("title"));this.m_bgCom=(this.getChild("bgCom"));this.m_okBtn=(this.getChild("okBtn"));this.m_progress=(this.getChild("progress"));this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1")};SystemSetNumMessageStruct.URL="ui://txcuvopdnsfy23";SystemSetNumMessageStruct.DependPackages=["Common"];return SystemSetNumMessageStruct}(fairygui.GComponent));Common.SystemSetNumMessageStruct=SystemSetNumMessageStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var SystemSetNumMessage=(function(_super){__extends(SystemSetNumMessage,_super);function SystemSetNumMessage(){return _super!==null&&_super.apply(this,arguments)||this}SystemSetNumMessage.prototype.open=function(limit,txt,title,caller,yesFun,noFun,yesTxt,closeButtonVisiable,isClickButtonAutoClose){if(txt===void 0){txt=""}if(title===void 0){title=""}if(caller===void 0){caller=null}if(yesFun===void 0){yesFun=null}if(noFun===void 0){noFun=null}if(yesTxt===void 0){yesTxt=null}if(closeButtonVisiable===void 0){closeButtonVisiable=true}if(isClickButtonAutoClose===void 0){isClickButtonAutoClose=true}this.m_progress.max=limit;this.m_progress.num=limit>=1?1:0;if(isNullOrEmpty(title)){this.m_title.text=""}if(isNullOrEmpty(txt)){this.m_content.text=Games.TEXT.BagSelectNum}this.caller=caller;this.yesFun=yesFun;this.noFun=noFun;this.isClickButtonAutoClose=isClickButtonAutoClose;this.m_content.text=txt;this.m_title.text=title;this.m_okBtn.m_title.text=yesTxt;this.m_bgCom.m_closeBtn.visible=closeButtonVisiable;this.m_okBtn.onClick(this,this.onClickYes);this.m_bgCom.m_closeBtn.onClick(this,this.onClickNo);this.m_t1.stop();Games.MenuLayer.showDialogModel();Games.MenuLayer.dialog.addChild(this);centerScreen(this);this.m_t0.play()};SystemSetNumMessage.prototype.close=function(){Games.MenuLayer.hideDialogModel();this.m_t1.play(Handler.create(this,this.onHide))};SystemSetNumMessage.prototype.onHide=function(){this.removeFromParent()};SystemSetNumMessage.prototype.onClickYes=function(){if(this.isClickButtonAutoClose){this.close()}if(this.yesFun){if(this.caller){this.yesFun.apply(this.caller,[this.m_progress.num])}else{this.yesFun(this.m_progress.num)}}};SystemSetNumMessage.prototype.onClickNo=function(){if(this.isClickButtonAutoClose){this.close()}if(this.noFun){if(this.caller){this.noFun.apply(this.caller)}else{this.noFun()}}};return SystemSetNumMessage}(Common.SystemSetNumMessageStruct));Common.SystemSetNumMessage=SystemSetNumMessage})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TalkBoxStruct=(function(_super){__extends(TalkBoxStruct,_super);function TalkBoxStruct(){return _super.call(this)||this}TalkBoxStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","TalkBox"))};TalkBoxStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};TalkBoxStruct.URL="ui://txcuvopdi24u3d";TalkBoxStruct.DependPackages=["Common"];return TalkBoxStruct}(fairygui.GLabel));Common.TalkBoxStruct=TalkBoxStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TalkBox=(function(_super){__extends(TalkBox,_super);function TalkBox(){return _super!==null&&_super.apply(this,arguments)||this}TalkBox.prototype.setText=function(msg){this.m_title.text=msg};return TalkBox}(Common.TalkBoxStruct));Common.TalkBox=TalkBox})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TalkBox1Struct=(function(_super){__extends(TalkBox1Struct,_super);function TalkBox1Struct(){return _super.call(this)||this}TalkBox1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","TalkBox1"))};TalkBox1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};TalkBox1Struct.URL="ui://txcuvopdbdbft23c";TalkBox1Struct.DependPackages=["Common"];return TalkBox1Struct}(fairygui.GLabel));Common.TalkBox1Struct=TalkBox1Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TalkBox1=(function(_super){__extends(TalkBox1,_super);function TalkBox1(){return _super!==null&&_super.apply(this,arguments)||this}return TalkBox1}(Common.TalkBox1Struct));Common.TalkBox1=TalkBox1})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TextInputStruct=(function(_super){__extends(TextInputStruct,_super);function TextInputStruct(){return _super.call(this)||this}TextInputStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","TextInput"))};TextInputStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};TextInputStruct.URL="ui://txcuvopdenjffm";TextInputStruct.DependPackages=["Common"];return TextInputStruct}(fairygui.GLabel));Common.TextInputStruct=TextInputStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TextInput=(function(_super){__extends(TextInput,_super);function TextInput(){return _super!==null&&_super.apply(this,arguments)||this}TextInput.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClick)};TextInput.prototype.OnClick=function(){this.title=""};return TextInput}(Common.TextInputStruct));Common.TextInput=TextInput})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TextScrollStruct=(function(_super){__extends(TextScrollStruct,_super);function TextScrollStruct(){return _super.call(this)||this}TextScrollStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","TextScroll"))};TextScrollStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};TextScrollStruct.URL="ui://txcuvopdcvs8dp";TextScrollStruct.DependPackages=["Common"];return TextScrollStruct}(fairygui.GLabel));Common.TextScrollStruct=TextScrollStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TextScroll=(function(_super){__extends(TextScroll,_super);function TextScroll(){return _super!==null&&_super.apply(this,arguments)||this}return TextScroll}(Common.TextScrollStruct));Common.TextScroll=TextScroll})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TipRewardStruct=(function(_super){__extends(TipRewardStruct,_super);function TipRewardStruct(){return _super.call(this)||this}TipRewardStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","TipReward"))};TipRewardStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_list=(this.getChild("list"));this.m_arrow=(this.getChild("arrow"));this.m_popupMC=this.getTransition("popupMC")};TipRewardStruct.URL="ui://txcuvopdx9zq3z";TipRewardStruct.DependPackages=["Common"];return TipRewardStruct}(fairygui.GLabel));Common.TipRewardStruct=TipRewardStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TipReward=(function(_super){__extends(TipReward,_super);function TipReward(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.itemNumList=[];return _this}TipReward.prototype.setItems=function(itemNumList){this.itemNumList=itemNumList;this.refreshRewardList()};TipReward.prototype.refreshRewardList=function(){var list=this.m_list;this.width=this.itemNumList.length*60+52+(this.itemNumList.length-1)*this.m_list.columnGap;list.setVirtual();list.setVirtualAndLoop();if(!list.itemRenderer){list.itemRenderer=Handler.create(this,this.renderListItem,null,false)}list.numItems=this.itemNumList.length};TipReward.prototype.renderListItem=function(index,item){var data=this.itemNumList[index];item.updateViewByDTNum(data);item.m_c_show_bg.selectedIndex=1};TipReward.prototype.showPopup=function(button){var _this=this;this.touchable=false;this.button=button;fairygui.GRoot.inst.showPopup(this,button,false);this.layoutBottom();this.m_popupMC.play(Handler.create(this,function(){_this.hidePopup()}),1,0)};TipReward.prototype.layoutBottom=function(){var stageWidth=fairygui.GRoot.inst.width;var pos=this.button.localToGlobal();var buttonCenterX=pos.x+this.button.width*0.5;var x=buttonCenterX-this.width*0.5;x=Math.max(x,0);x=Math.min(x,stageWidth-this.width);this.x=x;this.y=this.y+25;this.m_arrow.x=buttonCenterX-this.x;this.setPivot((this.width-56)/this.width,1)};TipReward.prototype.hidePopup=function(){fairygui.GRoot.inst.hidePopup(this)};return TipReward}(Common.TipRewardStruct));Common.TipReward=TipReward})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TopAssetStruct=(function(_super){__extends(TopAssetStruct,_super);function TopAssetStruct(){return _super.call(this)||this}TopAssetStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","TopAsset"))};TopAssetStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Bg=this.getController("Bg");this.m_assetList=(this.getChild("assetList"));this.m_btn_topClose=(this.getChild("btn_topClose"))};TopAssetStruct.URL="ui://txcuvopdfv9eab";TopAssetStruct.DependPackages=["Common"];return TopAssetStruct}(fairygui.GComponent));Common.TopAssetStruct=TopAssetStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TopAsset=(function(_super){__extends(TopAsset,_super);function TopAsset(){return _super!==null&&_super.apply(this,arguments)||this}TopAsset.prototype.InitView=function(thisObj,closeHandler,assetList){if(assetList===void 0){assetList=[]}this.m_btn_topClose.onClick(thisObj,closeHandler);this.m_assetList.itemRenderer=new Handler(this,this.RenderAssetItem,null,false);this.assetList=assetList};TopAsset.prototype.onWindowDestory=function(){this.m_assetList.itemRenderer=null;this.m_btn_topClose.onClick(null,null)};TopAsset.prototype.updateAsset=function(){this.m_assetList.numItems=this.assetList.length};TopAsset.prototype.RenderAssetItem=function(index,obj){var itemId=this.assetList[index];var item=Game.moduleModel.item.getItem(itemId);obj.m_assetIcon.url=item.itemIconUrl;obj.m_title.text=item.itemNumTxt};return TopAsset}(Common.TopAssetStruct));Common.TopAsset=TopAsset})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TopAssetItemStruct=(function(_super){__extends(TopAssetItemStruct,_super);function TopAssetItemStruct(){return _super.call(this)||this}TopAssetItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","TopAssetItem"))};TopAssetItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_assetIcon=(this.getChild("assetIcon"))};TopAssetItemStruct.URL="ui://txcuvopdfv9ead";TopAssetItemStruct.DependPackages=["Common"];return TopAssetItemStruct}(fairygui.GComponent));Common.TopAssetItemStruct=TopAssetItemStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TopAssetItem=(function(_super){__extends(TopAssetItem,_super);function TopAssetItem(){return _super!==null&&_super.apply(this,arguments)||this}TopAssetItem.prototype.setItemId=function(itemId){var userItem=Game.moduleModel.item.getItem(itemId);var itemNum=Game.moduleModel.item.getItemNum(itemId);this.setInfo(userItem.itemIconUrl,itemNum)};TopAssetItem.prototype.setInfo=function(iconUrl,value){this.m_assetIcon.url=iconUrl;this.m_title.text=formatNumberUnit(value)};return TopAssetItem}(Common.TopAssetItemStruct));Common.TopAssetItem=TopAssetItem})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var TouxiangStruct=(function(_super){__extends(TouxiangStruct,_super);function TouxiangStruct(){return _super.call(this)||this}TouxiangStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","touxiang"))};TouxiangStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};TouxiangStruct.URL="ui://txcuvopdi4hgt23z";TouxiangStruct.DependPackages=["Common"];return TouxiangStruct}(fairygui.GLabel));Common.TouxiangStruct=TouxiangStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Touxiang=(function(_super){__extends(Touxiang,_super);function Touxiang(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(Touxiang.prototype,"AvatarId",{set:function(id){var cfg=Game.config.avatar.getConfig(id);if(cfg){this.Icon=cfg.bodyIconUrl;this.Vector=cfg.co_vector}},enumerable:true,configurable:true});Object.defineProperty(Touxiang.prototype,"Icon",{set:function(url){this.m_icon.url=url},enumerable:true,configurable:true});Object.defineProperty(Touxiang.prototype,"Vector",{set:function(pos){this.m_icon.x=0-pos.x;this.m_icon.y=0-pos.y},enumerable:true,configurable:true});return Touxiang}(Common.TouxiangStruct));Common.Touxiang=Touxiang})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Touxiang120Struct=(function(_super){__extends(Touxiang120Struct,_super);function Touxiang120Struct(){return _super.call(this)||this}Touxiang120Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","touxiang120"))};Touxiang120Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};Touxiang120Struct.URL="ui://txcuvopddsh6t25i";Touxiang120Struct.DependPackages=["Common"];return Touxiang120Struct}(fairygui.GLabel));Common.Touxiang120Struct=Touxiang120Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Touxiang120=(function(_super){__extends(Touxiang120,_super);function Touxiang120(){return _super!==null&&_super.apply(this,arguments)||this}return Touxiang120}(Common.Touxiang120Struct));Common.Touxiang120=Touxiang120})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Touxiang160Struct=(function(_super){__extends(Touxiang160Struct,_super);function Touxiang160Struct(){return _super.call(this)||this}Touxiang160Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","touxiang160"))};Touxiang160Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};Touxiang160Struct.URL="ui://txcuvopddsh6t25k";Touxiang160Struct.DependPackages=["Common"];return Touxiang160Struct}(fairygui.GLabel));Common.Touxiang160Struct=Touxiang160Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Touxiang160=(function(_super){__extends(Touxiang160,_super);function Touxiang160(){return _super!==null&&_super.apply(this,arguments)||this}return Touxiang160}(Common.Touxiang160Struct));Common.Touxiang160=Touxiang160})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Touxiang44Struct=(function(_super){__extends(Touxiang44Struct,_super);function Touxiang44Struct(){return _super.call(this)||this}Touxiang44Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","touxiang44"))};Touxiang44Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};Touxiang44Struct.URL="ui://txcuvopddsh6t25l";Touxiang44Struct.DependPackages=["Common"];return Touxiang44Struct}(fairygui.GLabel));Common.Touxiang44Struct=Touxiang44Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Touxiang44=(function(_super){__extends(Touxiang44,_super);function Touxiang44(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(Touxiang44.prototype,"AvatarId",{set:function(id){var cfg=Game.config.avatar.getConfig(id);if(cfg){this.Icon=cfg.bodyIconUrl;this.Vector=cfg.co_vector}},enumerable:true,configurable:true});Object.defineProperty(Touxiang44.prototype,"Icon",{set:function(url){this.m_icon.url=url},enumerable:true,configurable:true});Object.defineProperty(Touxiang44.prototype,"Vector",{set:function(pos){this.m_icon.x=isNaN(pos.x)?-34:0-pos.x;this.m_icon.y=isNaN(pos.y)?-3:0-pos.y},enumerable:true,configurable:true});return Touxiang44}(Common.Touxiang44Struct));Common.Touxiang44=Touxiang44})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Touxiang80Struct=(function(_super){__extends(Touxiang80Struct,_super);function Touxiang80Struct(){return _super.call(this)||this}Touxiang80Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","touxiang80"))};Touxiang80Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};Touxiang80Struct.URL="ui://txcuvopddsh6t25n";Touxiang80Struct.DependPackages=["Common"];return Touxiang80Struct}(fairygui.GLabel));Common.Touxiang80Struct=Touxiang80Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var Touxiang80=(function(_super){__extends(Touxiang80,_super);function Touxiang80(){return _super!==null&&_super.apply(this,arguments)||this}return Touxiang80}(Common.Touxiang80Struct));Common.Touxiang80=Touxiang80})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var UnlockPanelStruct=(function(_super){__extends(UnlockPanelStruct,_super);function UnlockPanelStruct(){return _super.call(this)||this}UnlockPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","UnlockPanel"))};UnlockPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_effect=(this.getChild("effect"))};UnlockPanelStruct.URL="ui://txcuvopdluhpt25y";UnlockPanelStruct.DependPackages=["Common","Fx"];return UnlockPanelStruct}(fairygui.GComponent));Common.UnlockPanelStruct=UnlockPanelStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var UnlockPanel=(function(_super){__extends(UnlockPanel,_super);function UnlockPanel(){return _super!==null&&_super.apply(this,arguments)||this}UnlockPanel.prototype.openUnlockLessonFunc=function(url,txt){var _this=this;this.show();if(this._unlockBtn==null){this._unlockBtn=fgui.MainUI.MenuBButton.createInstance()}this._unlockBtn.x=this.m_effect.x+(this.m_effect.width>>1)-(this._unlockBtn.width>>1);this._unlockBtn.y=this.m_effect.y+(this.m_effect.height>>1)-(this._unlockBtn.height>>1);this.addChild(this._unlockBtn);this._unlockBtn.visible=true;this._unlockBtn.m_icon.url=url;this._unlockBtn.m_lock.visible=false;this._unlockBtn.m_red.visible=false;this._unlockBtn.setScale(0,0);this._unlockBtn.text=txt;Laya.Tween.to(this._unlockBtn,{scaleX:1.5,scaleY:1.5},300,Laya.Ease.linearNone);this.m_effect.m_t1.play(Handler.create(null,function(){_this._unlockBtn.visible=false;_this._unlockBtn.removeFromParent();Games.MenuLayer.hideDialogModel();_this.hide()}))};UnlockPanel.prototype.openUnlock=function(unlockId){var _this=this;this.show();if(this._unlockCtrl==null){this._unlockCtrl=new fgui.MainUI.MenuButtonCtl(unlockId,this,false)}else{this._unlockCtrl.setUnlockConfig(unlockId)}this.addChild(this._unlockCtrl.button);Laya.Tween.clearAll(this._unlockCtrl);this._unlockCtrl.button.x=this.m_effect.x+(this.m_effect.width>>1)-(this._unlockCtrl.button.width>>1);this._unlockCtrl.button.y=this.m_effect.y+(this.m_effect.height>>1)-(this._unlockCtrl.button.height>>1);this._unlockCtrl.button.setScale(0,0);this._unlockCtrl.button.enabled=false;this._unlockCtrl.refreshUnlock();this._unlockCtrl.hideRedPoint();Laya.Tween.to(this._unlockCtrl.button,{scaleX:this._unlockCtrl.unlockScale,scaleY:this._unlockCtrl.unlockScale},300,Laya.Ease.linearNone);this.m_effect.m_t1.play(Handler.create(null,function(){var endX=0;var endY=0;Game.event.dispatch(GameEventKey.GameEventKey_UnlockChange,unlockId);var ctrl=Game.moduleModel.func.getMenuCtrl(unlockId);if(ctrl){var point=ctrl.getGlobalPos();endX=point.x;endY=point.y;Games.MenuLayer.hideDialogModel();Laya.Tween.to(_this._unlockCtrl.button,{x:endX,y:endY,scaleX:1,scaleY:1},ctrl.moveDuration,Laya.Ease.linearNone,Handler.create(_this,_this.playNext))}else{_this.playNext()}}))};UnlockPanel.prototype.closeUnlock=function(){this.hide()};UnlockPanel.prototype.playNext=function(){this._unlockCtrl.hideButton();if(Game.moduleModel.func.playUnlock()==false){this.hide()}};UnlockPanel.prototype.hide=function(){this.removeFromParent()};UnlockPanel.prototype.show=function(){Games.MenuLayer.showDialogModel();setScreenSize(this);centerScreen(this);Games.MenuLayer.dialog.addChild(this)};return UnlockPanel}(Common.UnlockPanelStruct));Common.UnlockPanel=UnlockPanel})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var UpgradeBtnStruct=(function(_super){__extends(UpgradeBtnStruct,_super);function UpgradeBtnStruct(){return _super.call(this)||this}UpgradeBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","upgradeBtn"))};UpgradeBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};UpgradeBtnStruct.URL="ui://txcuvopdoapba1";UpgradeBtnStruct.DependPackages=["Common"];return UpgradeBtnStruct}(fairygui.GButton));Common.UpgradeBtnStruct=UpgradeBtnStruct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var UpgradeBtn=(function(_super){__extends(UpgradeBtn,_super);function UpgradeBtn(){return _super!==null&&_super.apply(this,arguments)||this}return UpgradeBtn}(Common.UpgradeBtnStruct));Common.UpgradeBtn=UpgradeBtn})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var WarActor120Struct=(function(_super){__extends(WarActor120Struct,_super);function WarActor120Struct(){return _super.call(this)||this}WarActor120Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","WarActor120"))};WarActor120Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};WarActor120Struct.URL="ui://txcuvopddsh6t25o";WarActor120Struct.DependPackages=["Common"];return WarActor120Struct}(fairygui.GComponent));Common.WarActor120Struct=WarActor120Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var WarActor120=(function(_super){__extends(WarActor120,_super);function WarActor120(){return _super!==null&&_super.apply(this,arguments)||this}return WarActor120}(Common.WarActor120Struct));Common.WarActor120=WarActor120})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var WarActor160Struct=(function(_super){__extends(WarActor160Struct,_super);function WarActor160Struct(){return _super.call(this)||this}WarActor160Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","WarActor160"))};WarActor160Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};WarActor160Struct.URL="ui://txcuvopddsh6t25p";WarActor160Struct.DependPackages=["Common"];return WarActor160Struct}(fairygui.GComponent));Common.WarActor160Struct=WarActor160Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var WarActor160=(function(_super){__extends(WarActor160,_super);function WarActor160(){return _super!==null&&_super.apply(this,arguments)||this}return WarActor160}(Common.WarActor160Struct));Common.WarActor160=WarActor160})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var WarActor44Struct=(function(_super){__extends(WarActor44Struct,_super);function WarActor44Struct(){return _super.call(this)||this}WarActor44Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","WarActor44"))};WarActor44Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};WarActor44Struct.URL="ui://txcuvopddsh6t25q";WarActor44Struct.DependPackages=["Common"];return WarActor44Struct}(fairygui.GComponent));Common.WarActor44Struct=WarActor44Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var WarActor44=(function(_super){__extends(WarActor44,_super);function WarActor44(){return _super!==null&&_super.apply(this,arguments)||this}WarActor44.prototype.setIcon=function(iconPath){this.m_icon.m_icon.icon=iconPath};WarActor44.prototype.Render=function(actor){this.m_icon.AvatarId=actor.config.avatar};Object.defineProperty(WarActor44.prototype,"ActorId",{set:function(id){var cfg=Game.config.actor.getConfig(id);this.m_icon.AvatarId=cfg.avatar},enumerable:true,configurable:true});Object.defineProperty(WarActor44.prototype,"AvatarId",{set:function(id){this.m_icon.AvatarId=id},enumerable:true,configurable:true});return WarActor44}(Common.WarActor44Struct));Common.WarActor44=WarActor44})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var WarActor80Struct=(function(_super){__extends(WarActor80Struct,_super);function WarActor80Struct(){return _super.call(this)||this}WarActor80Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Common","WarActor80"))};WarActor80Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};WarActor80Struct.URL="ui://txcuvopddsh6t25r";WarActor80Struct.DependPackages=["Common"];return WarActor80Struct}(fairygui.GLabel));Common.WarActor80Struct=WarActor80Struct})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Common;(function(Common){var WarActor80=(function(_super){__extends(WarActor80,_super);function WarActor80(){return _super!==null&&_super.apply(this,arguments)||this}return WarActor80}(Common.WarActor80Struct));Common.WarActor80=WarActor80})(Common=fgui.Common||(fgui.Common={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationAchievedStruct=(function(_super){__extends(CooperationAchievedStruct,_super);function CooperationAchievedStruct(){return _super.call(this)||this}CooperationAchievedStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","CooperationAchieved"))};CooperationAchievedStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_remind=(this.getChild("remind"));this.m_me=(this.getChild("me"));this.m_other=(this.getChild("other"));this.m_name1=(this.getChild("name1"));this.m_name2=(this.getChild("name2"));this.m_level1=(this.getChild("level1"));this.m_level2=(this.getChild("level2"))};CooperationAchievedStruct.URL="ui://k9ycebr5w3bv1";CooperationAchievedStruct.DependPackages=["Cooperation","Fx","Common"];return CooperationAchievedStruct}(fairygui.GComponent));Cooperation.CooperationAchievedStruct=CooperationAchievedStruct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationAchieved=(function(_super){__extends(CooperationAchieved,_super);function CooperationAchieved(){return _super!==null&&_super.apply(this,arguments)||this}CooperationAchieved.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClicClose)};CooperationAchieved.prototype.onClicClose=function(){Game.moduleModel.cooperation.sendReadCooperate();this.moduleWindow.closeSelf()};CooperationAchieved.prototype.onWindowShow=function(){this.setData()};CooperationAchieved.prototype.onWindowHide=function(){};CooperationAchieved.prototype.setData=function(){this.m_me.icon=User.headIconUrl;this.m_other.icon=Game.config.headPortrait.GetPlayerIconUrl(Game.moduleModel.cooperation.partnerInfData.portrait,Game.moduleModel.cooperation.partnerInfData.sex);this.m_name1.text=User.info.name;this.m_level1.text=format(TEXT.Lv,User.info.level);this.m_name2.text=Game.moduleModel.cooperation.partnerInfData.name;this.m_level2.text=format(TEXT.Lv,Game.moduleModel.cooperation.partnerInfData.level)};return CooperationAchieved}(Cooperation.CooperationAchievedStruct));Cooperation.CooperationAchieved=CooperationAchieved})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationApplyStruct=(function(_super){__extends(CooperationApplyStruct,_super);function CooperationApplyStruct(){return _super.call(this)||this}CooperationApplyStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","CooperationApply"))};CooperationApplyStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_name=(this.getChild("name"));this.m_msg=(this.getChild("msg"));this.m_remind=(this.getChild("remind"));this.m_title=(this.getChild("title"));this.m_refuseBtn=(this.getChild("refuseBtn"));this.m_receiveBtn=(this.getChild("receiveBtn"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_icon=(this.getChild("icon"))};CooperationApplyStruct.URL="ui://k9ycebr5w3bv3";CooperationApplyStruct.DependPackages=["Cooperation","Common"];return CooperationApplyStruct}(fairygui.GComponent));Cooperation.CooperationApplyStruct=CooperationApplyStruct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationApply=(function(_super){__extends(CooperationApply,_super);function CooperationApply(){return _super!==null&&_super.apply(this,arguments)||this}CooperationApply.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.CooperationApplyTitle;this.m_remind.text=TEXT.CooperationremindTip;this.m_refuseBtn.m_title.text=TEXT.CooperationrefuseBtn;this.m_receiveBtn.m_title.text=TEXT.CooperationreceiveBtn;this.m_closeBtn.onClick(this,this.onClicClose);this.m_receiveBtn.onClick(this,this.onClickReceiveBtn);this.m_refuseBtn.onClick(this,this.onClickRefuseBtn)};CooperationApply.prototype.onClickRefuseBtn=function(){Game.moduleModel.cooperation.sendApprove(1,this.curData.entityId)};CooperationApply.prototype.onClickReceiveBtn=function(){Game.moduleModel.cooperation.sendApprove(0,this.curData.entityId)};CooperationApply.prototype.onClicClose=function(){this.moduleWindow.menuBack()};CooperationApply.prototype.onWindowShow=function(){this.setData()};CooperationApply.prototype.onWindowHide=function(){};CooperationApply.prototype.setData=function(){this.curData=null;if(Game.moduleModel.cooperation.cooperData&&Game.moduleModel.cooperation.cooperData!==null&&Game.moduleModel.cooperation.cooperData.appList.length>0){this.curData=Game.moduleModel.cooperation.cooperData.appList[0]}if(this.curData!==null){this.m_icon.m_icon.icon=Game.config.headPortrait.GetPlayerIconUrl(Game.moduleModel.cooperation.partnerInfData.portrait,Game.moduleModel.cooperation.partnerInfData.sex);this.m_name.text=Game.moduleModel.cooperation.partnerInfData.name;this.m_msg.text=TEXT.CooperationApplyTip}};return CooperationApply}(Cooperation.CooperationApplyStruct));Cooperation.CooperationApply=CooperationApply})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationEndStruct=(function(_super){__extends(CooperationEndStruct,_super);function CooperationEndStruct(){return _super.call(this)||this}CooperationEndStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","CooperationEnd"))};CooperationEndStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_text1=(this.getChild("text1"));this.m_text2=(this.getChild("text2"));this.m_title=(this.getChild("title"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_sureBtn=(this.getChild("sureBtn"))};CooperationEndStruct.URL="ui://k9ycebr5w3bv2";CooperationEndStruct.DependPackages=["Cooperation","Common"];return CooperationEndStruct}(fairygui.GComponent));Cooperation.CooperationEndStruct=CooperationEndStruct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationEnd=(function(_super){__extends(CooperationEnd,_super);function CooperationEnd(){return _super!==null&&_super.apply(this,arguments)||this}CooperationEnd.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.CooperationEndTitle;this.m_sureBtn.text=TEXT.ButtonOk;this.m_closeBtn.onClick(this,this.onClicClose);this.m_sureBtn.onClick(this,this.onClicSureClose)};CooperationEnd.prototype.onClicClose=function(){this.moduleWindow.closeSelf()};CooperationEnd.prototype.onClicSureClose=function(){Game.moduleModel.cooperation.sendRelieve();this.moduleWindow.closeSelf()};CooperationEnd.prototype.onWindowShow=function(){this.setData()};CooperationEnd.prototype.onWindowHide=function(){};CooperationEnd.prototype.setData=function(){this.m_text1.text=TEXT.CooperationEndTip1;this.m_text2.text=TEXT.CooperationEndTip2};return CooperationEnd}(Cooperation.CooperationEndStruct));Cooperation.CooperationEnd=CooperationEnd})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationItemBtnStruct=(function(_super){__extends(CooperationItemBtnStruct,_super);function CooperationItemBtnStruct(){return _super.call(this)||this}CooperationItemBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","cooperationItemBtn"))};CooperationItemBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};CooperationItemBtnStruct.URL="ui://k9ycebr5g8fc20";CooperationItemBtnStruct.DependPackages=["Cooperation"];return CooperationItemBtnStruct}(fairygui.GButton));Cooperation.CooperationItemBtnStruct=CooperationItemBtnStruct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationItemBtn=(function(_super){__extends(CooperationItemBtn,_super);function CooperationItemBtn(){return _super!==null&&_super.apply(this,arguments)||this}CooperationItemBtn.prototype.setData=function(index,isSelectNum){if(index===0){}};return CooperationItemBtn}(Cooperation.CooperationItemBtnStruct));Cooperation.CooperationItemBtn=CooperationItemBtn})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationItemBtn2Struct=(function(_super){__extends(CooperationItemBtn2Struct,_super);function CooperationItemBtn2Struct(){return _super.call(this)||this}CooperationItemBtn2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","cooperationItemBtn2"))};CooperationItemBtn2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};CooperationItemBtn2Struct.URL="ui://k9ycebr5g8fc21";CooperationItemBtn2Struct.DependPackages=["Cooperation"];return CooperationItemBtn2Struct}(fairygui.GButton));Cooperation.CooperationItemBtn2Struct=CooperationItemBtn2Struct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationItemBtn2=(function(_super){__extends(CooperationItemBtn2,_super);function CooperationItemBtn2(){return _super!==null&&_super.apply(this,arguments)||this}return CooperationItemBtn2}(Cooperation.CooperationItemBtn2Struct));Cooperation.CooperationItemBtn2=CooperationItemBtn2})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationItemBtn3Struct=(function(_super){__extends(CooperationItemBtn3Struct,_super);function CooperationItemBtn3Struct(){return _super.call(this)||this}CooperationItemBtn3Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","cooperationItemBtn3"))};CooperationItemBtn3Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};CooperationItemBtn3Struct.URL="ui://k9ycebr5g8fc22";CooperationItemBtn3Struct.DependPackages=["Cooperation"];return CooperationItemBtn3Struct}(fairygui.GButton));Cooperation.CooperationItemBtn3Struct=CooperationItemBtn3Struct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationItemBtn3=(function(_super){__extends(CooperationItemBtn3,_super);function CooperationItemBtn3(){return _super!==null&&_super.apply(this,arguments)||this}return CooperationItemBtn3}(Cooperation.CooperationItemBtn3Struct));Cooperation.CooperationItemBtn3=CooperationItemBtn3})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationMainStruct=(function(_super){__extends(CooperationMainStruct,_super);function CooperationMainStruct(){return _super.call(this)||this}CooperationMainStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","CooperationMain"))};CooperationMainStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};CooperationMainStruct.URL="ui://k9ycebr5sg8w2d";CooperationMainStruct.DependPackages=["Cooperation","System"];return CooperationMainStruct}(fairygui.GComponent));Cooperation.CooperationMainStruct=CooperationMainStruct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationMain=(function(_super){__extends(CooperationMain,_super);function CooperationMain(){return _super!==null&&_super.apply(this,arguments)||this}CooperationMain.prototype.onWindowShow=function(){this.checkStatus();Game.moduleModel.cooperation.sAccountCooperateDataUpdate.add(this.checkStatus,this)};CooperationMain.prototype.onWindowHide=function(){Game.moduleModel.cooperation.sAccountCooperateDataUpdate.remove(this.checkStatus,this)};CooperationMain.prototype.checkStatus=function(){if(Game.moduleModel.cooperation.havePartner){if(Game.moduleModel.cooperation.cooperData.isRead){if(!this.moduleWindow.cooperationAchievedSubwindow.isShowed&&Game.moduleModel.cooperation.partnerInfData&&Game.moduleModel.cooperation.partnerInfData!==null){if(this.moduleWindow.cooperationRealtionshipSubwindow.isShowed){this.moduleWindow.cooperationRealtionshipSubwindow.closeSelf()}if(this.moduleWindow.serachOther.isShowed){this.moduleWindow.serachOther.closeSelf()}if(this.moduleWindow.cooperationApplySubwindow.isShowed){this.moduleWindow.cooperationApplySubwindow.closeSelf()}this.moduleWindow.openSubwindowByIndex(Games.CooperationSubwindowType.CooperationAchieved,true)}}else{if(!this.moduleWindow.cooperationRealtionshipSubwindow.isShowed&&Game.moduleModel.cooperation.cooperTaskData&&Game.moduleModel.cooperation.cooperTaskData!==null){if(this.moduleWindow.serachOther.isShowed){this.moduleWindow.serachOther.closeSelf()}if(this.moduleWindow.cooperationApplySubwindow.isShowed){this.moduleWindow.cooperationApplySubwindow.closeSelf()}if(this.moduleWindow.cooperationAchievedSubwindow.isShowed){this.moduleWindow.cooperationAchievedSubwindow.closeSelf()}this.moduleWindow.openSubwindowByIndex(Games.CooperationSubwindowType.cooperationRealtionship,true)}}}else{if(Game.moduleModel.cooperation.cooperData&&Game.moduleModel.cooperation.cooperData!==null&&Game.moduleModel.cooperation.cooperData.appList.length>0){if(this.moduleWindow.serachOther.isShowed){this.moduleWindow.serachOther.closeSelf()}if(this.moduleWindow.cooperationRealtionshipSubwindow.isShowed){this.moduleWindow.cooperationRealtionshipSubwindow.closeSelf()}if(!this.moduleWindow.cooperationApplySubwindow.isShowed){if(Game.moduleModel.cooperation.partnerInfData&&Game.moduleModel.cooperation.partnerInfData!==null){this.moduleWindow.openSubwindowByIndex(Games.CooperationSubwindowType.cooperationApply,true)}}else{this.moduleWindow.cooperationApplySubwindow.conent.setData()}}else{if(this.moduleWindow.cooperationApplySubwindow.isShowed){this.moduleWindow.cooperationApplySubwindow.closeSelf()}if(this.moduleWindow.cooperationRealtionshipSubwindow.isShowed){this.moduleWindow.cooperationRealtionshipSubwindow.closeSelf()}if(!this.moduleWindow.serachOther.isShowed){this.moduleWindow.openSubwindowByIndex(Games.CooperationSubwindowType.serachOther,true)}}}};return CooperationMain}(Cooperation.CooperationMainStruct));Cooperation.CooperationMain=CooperationMain})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationMainPanelStruct=(function(_super){__extends(CooperationMainPanelStruct,_super);function CooperationMainPanelStruct(){return _super.call(this)||this}CooperationMainPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","CooperationMainPanel"))};CooperationMainPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_have=this.getController("have");this.m_havefirst=this.getController("havefirst");this.m_title=(this.getChild("title"));this.m_text1=(this.getChild("text1"));this.m_text2=(this.getChild("text2"));this.m_selfId=(this.getChild("selfId"));this.m_remind=(this.getChild("remind"));this.m_intro=(this.getChild("intro"));this.m_text3=(this.getChild("text3"));this.m_otherID=(this.getChild("otherID"));this.m_icon1=(this.getChild("icon1"));this.m_icon2=(this.getChild("icon2"));this.m_number1=(this.getChild("number1"));this.m_number2=(this.getChild("number2"));this.m_time=(this.getChild("time"));this.m_introduce=(this.getChild("introduce"));this.m_time1=(this.getChild("time1"));this.m_inviteBtn1=(this.getChild("inviteBtn1"));this.m_inviteBtn2=(this.getChild("inviteBtn2"));this.m_disinviteBtn=(this.getChild("disinviteBtn"));this.m_closeBtn=(this.getChild("closeBtn"))};CooperationMainPanelStruct.URL="ui://k9ycebr5w3bv0";CooperationMainPanelStruct.DependPackages=["Cooperation","Common"];return CooperationMainPanelStruct}(fairygui.GComponent));Cooperation.CooperationMainPanelStruct=CooperationMainPanelStruct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationMainPanel=(function(_super){__extends(CooperationMainPanel,_super);function CooperationMainPanel(){return _super!==null&&_super.apply(this,arguments)||this}CooperationMainPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.CooperationMainPanelTitle;this.m_text1.text=TEXT.Cooperationtext1;this.m_text2.text=TEXT.Cooperationtext2;this.m_remind.text=TEXT.Cooperationremind;this.m_intro.text=TEXT.Cooperationintro;this.m_inviteBtn1.m_title.text=TEXT.CooperationinviteBtn1;this.m_inviteBtn2.m_title.text=TEXT.CooperationinviteBtn2;this.m_disinviteBtn.m_title.text=TEXT.CooperationdisinviteBtn;this.m_text3.text=TEXT.Cooperationtext3;this.m_otherID.promptText=TEXT.Cooperationintro;this.m_introduce.text="";this.m_otherID.input.maxChars=10;this.m_otherID.input.restrict="0-9";this.m_closeBtn.onClick(this,this.onClicClose);this.m_inviteBtn1.onClick(this,this.onClickSearchBtn);this.m_inviteBtn2.onClick(this,this.onClickPublicBtn);this.m_disinviteBtn.onClick(this,this.onClickDisBtn)};CooperationMainPanel.prototype.onClickDisBtn=function(){Game.moduleModel.cooperation.sendCancelCooperate()};CooperationMainPanel.prototype.onClickPublicBtn=function(){if(Game.moduleModel.cooperation.cooperData.weekTimes<Game.config.global.getConfig(GlobalKey.KEY_29_MeiZhouGeZuoCiShu).value){this.m_inviteBtn2.grayed=true;if(Game.moduleModel.cooperation.setDealyCanUse()){Game.moduleModel.cooperation.sendApply(0)}else{Game.system.toastText(Game.config.msgProtoError.getConfig(5502).notice)}}else{Game.system.toastText(TEXT.CooperationEndTip2)}};CooperationMainPanel.prototype.setUseCan=function(){this.m_inviteBtn2.grayed=false};CooperationMainPanel.prototype.onClickSearchBtn=function(){if(Game.moduleModel.cooperation.lastReqTimeNum<=0){if(Game.moduleModel.cooperation.cooperData.weekTimes<Game.config.global.getConfig(GlobalKey.KEY_29_MeiZhouGeZuoCiShu).value){if(this.m_otherID.text.length>0){Game.moduleModel.cooperation.sendApply(parseInt(this.m_otherID.text))}else{Game.system.toastText(TEXT.CooperationMainPanelTip1)}}else{Game.system.toastText(TEXT.CooperationEndTip2)}}else{Game.system.toastText(TEXT.CooperationMainPanelTip2)}};CooperationMainPanel.prototype.onClicClose=function(){this.moduleWindow.menuBack()};CooperationMainPanel.prototype.onWindowShow=function(){Game.moduleModel.cooperation.sReqTimeUpdate.add(this.checkTime,this);Game.moduleModel.cooperation.sSetDealyCanUseSignal.add(this.setUseCan,this);Game.moduleModel.cooperation.sReqTimeAutoUpdate.add(this.checkTime,this);this.setData()};CooperationMainPanel.prototype.onWindowHide=function(){Game.moduleModel.cooperation.sReqTimeUpdate.remove(this.checkTime,this);Game.moduleModel.cooperation.sSetDealyCanUseSignal.remove(this.setUseCan,this);Game.moduleModel.cooperation.sReqTimeAutoUpdate.remove(this.checkTime,this);this.m_otherID.text=""};CooperationMainPanel.prototype.setData=function(){this.m_otherID.text="";if(!Game.moduleModel.cooperation.cooperPlayerData||Game.moduleModel.cooperation.cooperPlayerData===null||!Game.moduleModel.cooperation.cooperData||Game.moduleModel.cooperation.cooperData===null){Game.system.toastText("no data !!!");this.moduleWindow.menuBack()}else{this.checkTime();this.m_selfId.text=format(TEXT.CooperationMainPanelID,User.info.entityId);if(Game.moduleModel.cooperation.cooperData&&Game.moduleModel.cooperation.cooperData.firstACooperate){if(this.m_remind.visible){this.m_remind.visible=false}if(this.m_icon2.visible){this.m_icon2.visible=false}if(this.m_number2.visible){this.m_number2.visible=false}}else{if(!this.m_remind.visible){this.m_remind.visible=true}if(!this.m_icon2.visible){this.m_icon2.visible=true}if(!this.m_number2.visible){this.m_number2.visible=true}this.m_icon2.icon=Games.WarLoadPic.getItemIcon(Game.config.global.getConfig(GlobalKey.KEY_28_ShouCiZhangHao__GeZuoJiangLi).value1[0]);this.m_number2.text=Game.config.global.getConfig(GlobalKey.KEY_28_ShouCiZhangHao__GeZuoJiangLi).value1[1].toString()}if(Game.moduleModel.cooperation.cooperData&&Game.moduleModel.cooperation.cooperData.firstCooperate){if(this.m_text1.visible){this.m_text1.visible=false}if(this.m_icon1.visible){this.m_icon1.visible=false}if(this.m_number1.visible){this.m_number1.visible=false}}else{if(!this.m_text1.visible){this.m_text1.visible=true}if(!this.m_icon1.visible){this.m_icon1.visible=true}if(!this.m_number1.visible){this.m_number1.visible=true}this.m_icon1.icon=Games.WarLoadPic.getItemIcon(Game.config.global.getConfig(GlobalKey.KEY_27_ShouCiGeZuoJiangLi).value1[0]);this.m_number1.text=Game.config.global.getConfig(GlobalKey.KEY_27_ShouCiGeZuoJiangLi).value1[1].toString()}}};CooperationMainPanel.prototype.checkTime=function(){if(Game.moduleModel.cooperation.lastReqTimeNum>0){if(this.m_havefirst.selectedIndex!==1){this.m_havefirst.setSelectedIndex(1);this.m_inviteBtn1.grayed=true}this.m_time1.text=TimeHelper.TimeFormat(Game.moduleModel.cooperation.lastReqTimeNum)}else{if(this.m_havefirst.selectedIndex!==0){this.m_havefirst.setSelectedIndex(0);this.m_inviteBtn1.grayed=false}}if(Game.moduleModel.cooperation.lastReqTimeAutoNum>0){if(this.m_have.selectedIndex!==1){this.m_have.setSelectedIndex(1)}this.m_time.text=TimeHelper.TimeFormat(Game.moduleModel.cooperation.lastReqTimeAutoNum)}else{if(this.m_have.selectedIndex!==0){this.m_have.setSelectedIndex(0)}}};return CooperationMainPanel}(Cooperation.CooperationMainPanelStruct));Cooperation.CooperationMainPanel=CooperationMainPanel})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationRealtionshipStruct=(function(_super){__extends(CooperationRealtionshipStruct,_super);function CooperationRealtionshipStruct(){return _super.call(this)||this}CooperationRealtionshipStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","CooperationRealtionship"))};CooperationRealtionshipStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_me=(this.getChild("me"));this.m_other=(this.getChild("other"));this.m_name1=(this.getChild("name1"));this.m_name2=(this.getChild("name2"));this.m_level1=(this.getChild("level1"));this.m_level2=(this.getChild("level2"));this.m_des=(this.getChild("des"));this.m_tasklist=(this.getChild("tasklist"));this.m_taskTitleList=(this.getChild("taskTitleList"));this.m_bg=(this.getChild("bg"));this.m_relieveBtn=(this.getChild("relieveBtn"));this.m_progressbar=(this.getChild("progressbar"));this.m_showOtherInf=(this.getChild("showOtherInf"))};CooperationRealtionshipStruct.URL="ui://k9ycebr5w3bv4";CooperationRealtionshipStruct.DependPackages=["Cooperation","Common","WarMovie"];return CooperationRealtionshipStruct}(fairygui.GComponent));Cooperation.CooperationRealtionshipStruct=CooperationRealtionshipStruct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationRealtionship=(function(_super){__extends(CooperationRealtionship,_super);function CooperationRealtionship(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.curMaxTaskNum=0;_this.curSelectTaskNum=0;return _this}CooperationRealtionship.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.CooperationRealtionshipTitle;this.m_des.text=TEXT.CooperationRealtionshipTip;this.m_relieveBtn.m_title.text=TEXT.CooperationRealtionshiprelieveBtn;this.m_progressbar.m_progressbar.m_title.visible=false;this.m_progressbar.m_list.itemRenderer=Laya.Handler.create(this,this.progressItem,null,false);this.m_tasklist.itemRenderer=Laya.Handler.create(this,this.taskItem,null,false);this.m_taskTitleList.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem);this.m_bg.m_closeBtn.onClick(this,this.onClicClose);this.m_relieveBtn.onClick(this,this.onClicRelieveBtn);this.m_showOtherInf.onClick(this,this.onClicShowOtherBtn);this.onClick(this,this.clickPanel)};CooperationRealtionship.prototype.onClicShowOtherBtn=function(){Game.system.playerInfo(Game.moduleModel.cooperation.partnerInfData)};CooperationRealtionship.prototype.clickPanel=function(){Game.moduleModel.cooperation.sRewardHideCall.dispatch()};CooperationRealtionship.prototype.onClicRelieveBtn=function(){this.moduleWindow.mainWindow.openSubwindowByIndex(Games.CooperationSubwindowType.CooperationEnd,true)};CooperationRealtionship.prototype.onClicClose=function(){this.moduleWindow.menuBack()};CooperationRealtionship.prototype.onWindowShow=function(){Game.moduleModel.cooperation.sCooperateTaskDataUpdate.add(this.updateTask,this);Game.moduleModel.cooperation.sUpdateBoxProgress.add(this.updateBoxProgress,this);this.setData()};CooperationRealtionship.prototype.onWindowHide=function(){Game.moduleModel.cooperation.sCooperateTaskDataUpdate.remove(this.updateTask,this);Game.moduleModel.cooperation.sUpdateBoxProgress.remove(this.updateBoxProgress,this);Game.moduleModel.cooperation.sRewardHideCall.removeAll()};CooperationRealtionship.prototype.setData=function(){var otherInf=Game.moduleModel.cooperation.partnerInfData;this.m_name1.text=User.info.name;this.m_level1.text=format(TEXT.Lv,User.info.level);this.m_me.icon=User.headIconUrl;if(otherInf&&otherInf!==null){this.m_name2.text=otherInf.name;this.m_level2.text=format(TEXT.Lv,otherInf.level);this.m_other.icon=Game.config.headPortrait.GetPlayerIconUrl(otherInf.portrait,otherInf.sex)}else{this.m_name2.text="";this.m_level2.text=""}this.completeConfig=Game.config.complete.getCompleteList(EProgressBoxId.cooperateTask);this.cooperTaskData=Game.moduleModel.cooperation.cooperTaskData;this.curMaxTaskNum=this.cooperTaskData.currentStar-1;this.curSelectTaskNum=this.curMaxTaskNum;this.m_progressbar.m_progressbar.max=6;this.updateTask()};CooperationRealtionship.prototype.updateTask=function(){this.cooperTaskData=Game.moduleModel.cooperation.cooperTaskData;if(this.cooperTaskData!==null){this.m_progressbar.m_progressbar.value=this.cooperTaskData.progree;if(this.curMaxTaskNum<this.cooperTaskData.currentStar-1){this.curSelectTaskNum=this.cooperTaskData.currentStar-1}this.curMaxTaskNum=this.cooperTaskData.currentStar-1;this.m_progressbar.m_level.text=this.curMaxTaskNum.toString();this.tasks=this.cooperTaskData.tasks;Game.moduleModel.cooperation.taskIsHaveGetOne=false;if(this.curSelectTaskNum>=this.tasks.length){this.curSelectTaskNum=this.tasks.length-1}this.m_tasklist.numItems=this.tasks[this.curSelectTaskNum].starTasks.length;this.m_taskTitleList.addSelection(this.curSelectTaskNum);this.m_progressbar.m_list.numItems=this.completeConfig.length}};CooperationRealtionship.prototype.updateBoxProgress=function(arg){var index=arg[0];var status=arg[1];if(index>=this.curMaxTaskNum&&status!==1&&Game.moduleModel.cooperation.cooperTaskData.progree>index){this.m_progressbar.m_level.text=(this.curMaxTaskNum+1).toString()}};CooperationRealtionship.prototype.progressItem=function(index,obj){var item=obj;item.setData(this.completeConfig[index],index)};CooperationRealtionship.prototype.taskItem=function(index,obj){var item=obj;item.setData(this.tasks[this.curSelectTaskNum].starTasks[index])};CooperationRealtionship.prototype.onClickItem=function(obj){var index=this.m_taskTitleList.getChildIndex(obj);if(index>this.curMaxTaskNum){this.m_taskTitleList.addSelection(this.curSelectTaskNum)}else{this.curSelectTaskNum=index;this.updateTask()}};return CooperationRealtionship}(Cooperation.CooperationRealtionshipStruct));Cooperation.CooperationRealtionship=CooperationRealtionship})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationRewardStruct=(function(_super){__extends(CooperationRewardStruct,_super);function CooperationRewardStruct(){return _super.call(this)||this}CooperationRewardStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","CooperationReward"))};CooperationRewardStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};CooperationRewardStruct.URL="ui://k9ycebr5w3bv6";CooperationRewardStruct.DependPackages=["Cooperation","Common"];return CooperationRewardStruct}(fairygui.GComponent));Cooperation.CooperationRewardStruct=CooperationRewardStruct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationReward=(function(_super){__extends(CooperationReward,_super);function CooperationReward(){return _super!==null&&_super.apply(this,arguments)||this}return CooperationReward}(Cooperation.CooperationRewardStruct));Cooperation.CooperationReward=CooperationReward})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationReward2Struct=(function(_super){__extends(CooperationReward2Struct,_super);function CooperationReward2Struct(){return _super.call(this)||this}CooperationReward2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","CooperationReward2"))};CooperationReward2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_starList=(this.getChild("starList"))};CooperationReward2Struct.URL="ui://k9ycebr5ggdh2e";CooperationReward2Struct.DependPackages=["Cooperation","Common","PfSkin"];return CooperationReward2Struct}(fairygui.GComponent));Cooperation.CooperationReward2Struct=CooperationReward2Struct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationReward2=(function(_super){__extends(CooperationReward2,_super);function CooperationReward2(){return _super!==null&&_super.apply(this,arguments)||this}CooperationReward2.prototype.setData=function(msg){this.m_icon.icon=Games.WarLoadPic.getItemIcon(msg.itemId);this.m_title.text=formatNumberUnit(msg.itemNum,0);var conf=Game.config.item.getConfig(msg.itemId);this.m_starList.numItems=conf.itemStarNum};return CooperationReward2}(Cooperation.CooperationReward2Struct));Cooperation.CooperationReward2=CooperationReward2})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationRewardBoxStruct=(function(_super){__extends(CooperationRewardBoxStruct,_super);function CooperationRewardBoxStruct(){return _super.call(this)||this}CooperationRewardBoxStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","CooperationRewardBox"))};CooperationRewardBoxStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_level1=this.getController("level1");this.m_level4=this.getController("level4");this.m_level5=this.getController("level5");this.m_levle6=this.getController("levle6");this.m_level3=this.getController("level3");this.m_level2=this.getController("level2");this.m_button=this.getController("button");this.m_listBg=(this.getChild("listBg"));this.m_rewardList=(this.getChild("rewardList"));this.m_rewardCom=(this.getChild("rewardCom"));this.m_numVal=(this.getChild("numVal"))};CooperationRewardBoxStruct.URL="ui://k9ycebr5w3bv8";CooperationRewardBoxStruct.DependPackages=["Cooperation","Common"];return CooperationRewardBoxStruct}(fairygui.GButton));Cooperation.CooperationRewardBoxStruct=CooperationRewardBoxStruct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationRewardBox=(function(_super){__extends(CooperationRewardBox,_super);function CooperationRewardBox(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.hideIndex=0;_this.indexOf=0;_this.status=0;_this.canGetReward=false;return _this}CooperationRewardBox.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_rewardList.itemRenderer=Laya.Handler.create(this,this.progressItem,null,false);this.onClick(this,this.onClicShwoRewardBtn)};CooperationRewardBox.prototype.progressItem=function(index,obj){var item=obj;item.setData(this.rewardList[index])};CooperationRewardBox.prototype.onClicShwoRewardBtn=function(){if(this.status!==1&&Game.moduleModel.cooperation.cooperTaskData.progree>this.indexOf){Game.moduleModel.cooperation.sRewardGetCall.add(this.getReward,this);Game.moduleModel.cooperation.sendGetProgressTask(this.indexOf+1)}else{if(!this.m_rewardCom.visible){this.m_rewardCom.visible=true}this.hideIndex=1}};CooperationRewardBox.prototype.getReward=function(msg){if(msg.index===this.indexOf+1){Game.system.getRewardText(this.rewardList,TEXT.StoryGetReward,0);Game.moduleModel.cooperation.sRewardGetCall.remove(this.getReward,this)}};CooperationRewardBox.prototype.hideReward=function(){this.hideIndex--;if(this.hideIndex<0){if(this.m_rewardCom.visible){this.m_rewardCom.visible=false}}};CooperationRewardBox.prototype.setData=function(msg,index){this.hideIndex=0;Game.moduleModel.cooperation.sRewardHideCall.add(this.hideReward,this);this.rewardList=msg.reward;if(this.rewardList.length>1){this.m_listBg.width=this.rewardList.length*70+10}else{this.m_listBg.width=100}this.m_rewardList.numItems=this.rewardList.length;this.indexOf=index;this.m_numVal.text=(index+1).toString();this.m_level1.setSelectedIndex(0);this.m_level2.setSelectedIndex(0);this.m_level3.setSelectedIndex(0);this.m_level4.setSelectedIndex(0);this.m_level5.setSelectedIndex(0);this.m_levle6.setSelectedIndex(0);this.status=(Game.moduleModel.cooperation.cooperPlayerData.rewardStatus>>index)&1;if(Game.moduleModel.cooperation.isCanGetReward){this.status=0}this.canGetReward=Game.moduleModel.cooperation.cooperTaskData.progree>this.indexOf;switch(index){case 0:if(this.status===1){this.canGetReward=false;this.m_level1.setSelectedIndex(3)}else{if(this.canGetReward){this.m_level1.setSelectedIndex(2)}else{this.m_level1.setSelectedIndex(1)}}break;case 1:if(this.status===1){this.canGetReward=false;this.m_level2.setSelectedIndex(3)}else{if(this.canGetReward){this.m_level2.setSelectedIndex(2)}else{this.m_level2.setSelectedIndex(1)}}break;case 2:if(this.status===1){this.canGetReward=false;this.m_level3.setSelectedIndex(3)}else{if(this.canGetReward){this.m_level3.setSelectedIndex(2)}else{this.m_level3.setSelectedIndex(1)}}break;case 3:if(this.status===1){this.canGetReward=false;this.m_level4.setSelectedIndex(3)}else{if(this.canGetReward){this.m_level4.setSelectedIndex(2)}else{this.m_level4.setSelectedIndex(1)}}break;case 4:if(this.status===1){this.canGetReward=false;this.m_level5.setSelectedIndex(3)}else{if(this.canGetReward){this.m_level5.setSelectedIndex(2)}else{this.m_level5.setSelectedIndex(1)}}break;case 5:if(this.status===1){this.canGetReward=false;this.m_levle6.setSelectedIndex(3)}else{if(this.canGetReward){this.m_levle6.setSelectedIndex(2)}else{this.m_levle6.setSelectedIndex(1)}}break}var arg=new Array();arg.push(index);arg.push(this.status);Game.moduleModel.cooperation.sUpdateBoxProgress.dispatch(arg)};return CooperationRewardBox}(Cooperation.CooperationRewardBoxStruct));Cooperation.CooperationRewardBox=CooperationRewardBox})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationRewardItemStruct=(function(_super){__extends(CooperationRewardItemStruct,_super);function CooperationRewardItemStruct(){return _super.call(this)||this}CooperationRewardItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","CooperationRewardItem"))};CooperationRewardItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_status=this.getController("status");this.m_des=(this.getChild("des"));this.m_list=(this.getChild("list"));this.m_assitingText=(this.getChild("assitingText"));this.m_icon=(this.getChild("icon"));this.m_receiveBtn=(this.getChild("receiveBtn"));this.m_getBtn=(this.getChild("getBtn"));this.m_assistBtn=(this.getChild("assistBtn"))};CooperationRewardItemStruct.URL="ui://k9ycebr5w3bv5";CooperationRewardItemStruct.DependPackages=["Cooperation","Common"];return CooperationRewardItemStruct}(fairygui.GComponent));Cooperation.CooperationRewardItemStruct=CooperationRewardItemStruct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationRewardItem=(function(_super){__extends(CooperationRewardItem,_super);function CooperationRewardItem(){return _super!==null&&_super.apply(this,arguments)||this}CooperationRewardItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.itemRenderer=Laya.Handler.create(this,this.initItem,null,false);this.m_receiveBtn.m_title.text=TEXT.CooperateReceiveBtn;this.m_assistBtn.m_title.text=TEXT.CooperateassistBtn;this.m_getBtn.m_title.text=TEXT.CooperategetBtn;this.m_assitingText.text=TEXT.CooperateassitingText;this.m_receiveBtn.onClick(this,this.clickReceiveBtn);this.m_getBtn.onClick(this,this.clickGetBtn);this.m_assistBtn.onClick(this,this.clickAssistBtn)};CooperationRewardItem.prototype.clickReceiveBtn=function(){if(!Game.moduleModel.cooperation.taskIsHaveGetOne){Game.moduleModel.cooperation.sendTaskOperate(0,this.cooperateTask.id,this.cooperateTask.task_star)}else{Game.system.toastText(TEXT.CooperateHaveTaskText)}};CooperationRewardItem.prototype.clickGetBtn=function(){Game.moduleModel.cooperation.sRewardGetCall.add(this.getReward,this);Game.moduleModel.cooperation.sendGetTaskReward(this.cooperateTask.id,this.cooperateTask.task_star)};CooperationRewardItem.prototype.getReward=function(msg){if(this.cooperateTask.id===msg.taskId&&this.cooperateTask.task_star===msg.star){Game.system.getRewardText(this.dtList,TEXT.StoryGetReward,0);Game.moduleModel.cooperation.sRewardGetCall.remove(this.getReward,this)}};CooperationRewardItem.prototype.clickAssistBtn=function(){Game.moduleModel.cooperation.sendTaskOperate(1,this.cooperateTask.id,this.cooperateTask.task_star)};CooperationRewardItem.prototype.setData=function(msg){this.dtList=new Array();if(!msg.needParam||msg.needParam===null||msg.needParam.length<1){console.error("服务器数据出错")}else{var cooperateTask=Game.config.cooperateTask.getConfig(msg.taskid);this.cooperateTask=cooperateTask;this.coopTaskReward=new DTItemNum();this.coopTaskReward.itemId=msg.itemId;if(Game.moduleModel.cooperation.cooperData.isCaptain){this.coopTaskReward.itemNum=msg.captainItemNum}else{this.coopTaskReward.itemNum=msg.itemNum}if(this.coopTaskReward.itemId>0&&this.coopTaskReward.itemNum>0){this.m_list.numItems=1}else{this.m_list.numItems=0}var otherInf=Game.moduleModel.cooperation.partnerInfData;this.m_icon.icon=Game.config.headPortrait.GetPlayerIconUrl(otherInf.portrait,otherInf.sex);var maxPress=0;switch(msg.taskType){case 1:this.m_des.text=TEXT.CooperateTaskType10;if(msg.needParam.length===5){if(msg.needParam[0]>0){var type=Game.config.property.getConfig(msg.needParam[0]);this.m_des.text+=format(TEXT.CooperateTaskType11,type.name)}if(msg.needParam[1]>0){this.m_des.text+=format(TEXT.CooperateTaskType12,msg.needParam[1])}if(msg.needParam[2]>0){this.m_des.text+=format(TEXT.CooperateTaskType13,msg.needParam[2])}if(msg.needParam[3]>0){var type=Game.config.property.getConfig(msg.needParam[3]);this.m_des.text+=format(TEXT.CooperateTaskType14,type.name)}if(msg.needParam[4]>0){var type=Game.config.property.getConfig(msg.needParam[4]);this.m_des.text+=format(TEXT.CooperateTaskType15,type.name)}}else{console.error("服务器数据出错")}maxPress=1;break;case 2:this.m_des.text=format(TEXT.CooperateTaskType20,msg.needParam[0]);maxPress=msg.needParam[0];break;case 3:this.m_des.text=format(TEXT.CooperateTaskType30,msg.needParam[0]);maxPress=msg.needParam[0];break;case 4:if(msg.needParam.length===2){var goodsItem=Game.config.item.getConfig(msg.needParam[0]);this.m_des.text=format(TEXT.CooperateTaskType40,msg.needParam[1],goodsItem.name);maxPress=msg.needParam[1]}else{console.error("服务器数据出错")}break;case 5:this.m_des.text=format(TEXT.CooperateTaskType50,msg.needParam[0]);maxPress=msg.needParam[0];break;case 6:this.m_des.text=format(TEXT.CooperateTaskType60,msg.needParam[0]);maxPress=msg.needParam[0];break;case 7:this.m_des.text=format(TEXT.CooperateTaskType70,msg.needParam[0]);maxPress=msg.needParam[0];break;case 8:this.m_des.text=format(TEXT.CooperateTaskType80,msg.needParam[0]);maxPress=msg.needParam[0];break;case 9:this.m_des.text=format(TEXT.CooperateTaskType90,msg.needParam[0]);maxPress=msg.needParam[0];break;case 10:this.m_des.text=format(TEXT.CooperateTaskType100,msg.needParam[0]);maxPress=msg.needParam[0];break}var curPress=msg.progress>maxPress?maxPress:msg.progress;this.m_des.text+=format(TEXT.CooperateTaskProgress,curPress,maxPress);switch(msg.status){case 0:if(msg.receiveUuid.length>0){if(parseInt(msg.receiveUuid)===User.info.entityId){Game.moduleModel.cooperation.taskIsHaveGetOne=true;if(msg.helpUuid.length>0&&parseInt(msg.helpUuid)===Game.moduleModel.cooperation.partnerInfData.userId){this.m_status.setSelectedIndex(3)}else{this.m_status.setSelectedIndex(5)}}else{if(parseInt(msg.receiveUuid)===Game.moduleModel.cooperation.partnerInfData.userId){if(msg.helpUuid.length>0&&parseInt(msg.helpUuid)===User.info.entityId){this.m_status.setSelectedIndex(3)}else{this.m_status.setSelectedIndex(1)}}else{console.error("服务器出错，第三人接受了我们的任务")}}}else{this.m_status.setSelectedIndex(0)}break;case 1:if(parseInt(msg.receiveUuid)===User.info.entityId){this.m_status.setSelectedIndex(2)}else{this.m_status.setSelectedIndex(4)}break;case 2:this.m_status.setSelectedIndex(4);break}}};CooperationRewardItem.prototype.initItem=function(index,obj){var item=obj;item.m_icon.icon=Games.WarLoadPic.getItemIcon(this.coopTaskReward.itemId);item.m_title.text=formatNumberUnit(this.coopTaskReward.itemNum,1);var dtItem=new DTItemNum();dtItem.itemId=this.coopTaskReward.itemId;dtItem.itemNum=this.coopTaskReward.itemNum;this.dtList.push(dtItem)};return CooperationRewardItem}(Cooperation.CooperationRewardItemStruct));Cooperation.CooperationRewardItem=CooperationRewardItem})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationTotalBarStruct=(function(_super){__extends(CooperationTotalBarStruct,_super);function CooperationTotalBarStruct(){return _super.call(this)||this}CooperationTotalBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","CooperationTotalBar"))};CooperationTotalBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_level=(this.getChild("level"));this.m_list=(this.getChild("list"));this.m_progressbar=(this.getChild("progressbar"))};CooperationTotalBarStruct.URL="ui://k9ycebr5w3bv7";CooperationTotalBarStruct.DependPackages=["Cooperation","Common"];return CooperationTotalBarStruct}(fairygui.GComponent));Cooperation.CooperationTotalBarStruct=CooperationTotalBarStruct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var CooperationTotalBar=(function(_super){__extends(CooperationTotalBar,_super);function CooperationTotalBar(){return _super!==null&&_super.apply(this,arguments)||this}return CooperationTotalBar}(Cooperation.CooperationTotalBarStruct));Cooperation.CooperationTotalBar=CooperationTotalBar})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var TopHeadIconMaskApplyStruct=(function(_super){__extends(TopHeadIconMaskApplyStruct,_super);function TopHeadIconMaskApplyStruct(){return _super.call(this)||this}TopHeadIconMaskApplyStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Cooperation","TopHeadIconMaskApply"))};TopHeadIconMaskApplyStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};TopHeadIconMaskApplyStruct.URL="ui://k9ycebr5nni52j";TopHeadIconMaskApplyStruct.DependPackages=["Cooperation"];return TopHeadIconMaskApplyStruct}(fairygui.GButton));Cooperation.TopHeadIconMaskApplyStruct=TopHeadIconMaskApplyStruct})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Cooperation;(function(Cooperation){var TopHeadIconMaskApply=(function(_super){__extends(TopHeadIconMaskApply,_super);function TopHeadIconMaskApply(){return _super!==null&&_super.apply(this,arguments)||this}return TopHeadIconMaskApply}(Cooperation.TopHeadIconMaskApplyStruct));Cooperation.TopHeadIconMaskApply=TopHeadIconMaskApply})(Cooperation=fgui.Cooperation||(fgui.Cooperation={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim1;(function(FilmScreenAnim1){var FilmScreenAnim1Struct=(function(_super){__extends(FilmScreenAnim1Struct,_super);function FilmScreenAnim1Struct(){return _super.call(this)||this}FilmScreenAnim1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("FilmScreenAnim1","FilmScreenAnim1"))};FilmScreenAnim1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_3=(this.getChild("3"));this.m_2=(this.getChild("2"));this.m_1=(this.getChild("1"));this.m_t0=this.getTransition("t0")};FilmScreenAnim1Struct.URL="ui://zd7syq8psd1yi";FilmScreenAnim1Struct.DependPackages=["FilmScreenAnim1"];return FilmScreenAnim1Struct}(fairygui.GComponent));FilmScreenAnim1.FilmScreenAnim1Struct=FilmScreenAnim1Struct})(FilmScreenAnim1=fgui.FilmScreenAnim1||(fgui.FilmScreenAnim1={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim1;(function(FilmScreenAnim1_1){var FilmScreenAnim1=(function(_super){__extends(FilmScreenAnim1,_super);function FilmScreenAnim1(){return _super!==null&&_super.apply(this,arguments)||this}return FilmScreenAnim1}(FilmScreenAnim1_1.FilmScreenAnim1Struct));FilmScreenAnim1_1.FilmScreenAnim1=FilmScreenAnim1})(FilmScreenAnim1=fgui.FilmScreenAnim1||(fgui.FilmScreenAnim1={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim10;(function(FilmScreenAnim10){var FilmScreenAnim10Struct=(function(_super){__extends(FilmScreenAnim10Struct,_super);function FilmScreenAnim10Struct(){return _super.call(this)||this}FilmScreenAnim10Struct.createInstance=function(){return(fairygui.UIPackage.createObject("FilmScreenAnim10","FilmScreenAnim10"))};FilmScreenAnim10Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_3=(this.getChild("3"));this.m_2=(this.getChild("2"));this.m_1=(this.getChild("1"));this.m_t0=this.getTransition("t0")};FilmScreenAnim10Struct.URL="ui://fj4c0b9tsd1yp";FilmScreenAnim10Struct.DependPackages=["FilmScreenAnim10"];return FilmScreenAnim10Struct}(fairygui.GComponent));FilmScreenAnim10.FilmScreenAnim10Struct=FilmScreenAnim10Struct})(FilmScreenAnim10=fgui.FilmScreenAnim10||(fgui.FilmScreenAnim10={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim10;(function(FilmScreenAnim10_1){var FilmScreenAnim10=(function(_super){__extends(FilmScreenAnim10,_super);function FilmScreenAnim10(){return _super!==null&&_super.apply(this,arguments)||this}return FilmScreenAnim10}(FilmScreenAnim10_1.FilmScreenAnim10Struct));FilmScreenAnim10_1.FilmScreenAnim10=FilmScreenAnim10})(FilmScreenAnim10=fgui.FilmScreenAnim10||(fgui.FilmScreenAnim10={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim2;(function(FilmScreenAnim2){var FilmScreenAnim2Struct=(function(_super){__extends(FilmScreenAnim2Struct,_super);function FilmScreenAnim2Struct(){return _super.call(this)||this}FilmScreenAnim2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("FilmScreenAnim2","FilmScreenAnim2"))};FilmScreenAnim2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_3=(this.getChild("3"));this.m_2=(this.getChild("2"));this.m_1=(this.getChild("1"));this.m_t0=this.getTransition("t0")};FilmScreenAnim2Struct.URL="ui://sfr8vcohsd1yk";FilmScreenAnim2Struct.DependPackages=["FilmScreenAnim2"];return FilmScreenAnim2Struct}(fairygui.GComponent));FilmScreenAnim2.FilmScreenAnim2Struct=FilmScreenAnim2Struct})(FilmScreenAnim2=fgui.FilmScreenAnim2||(fgui.FilmScreenAnim2={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim2;(function(FilmScreenAnim2_1){var FilmScreenAnim2=(function(_super){__extends(FilmScreenAnim2,_super);function FilmScreenAnim2(){return _super!==null&&_super.apply(this,arguments)||this}return FilmScreenAnim2}(FilmScreenAnim2_1.FilmScreenAnim2Struct));FilmScreenAnim2_1.FilmScreenAnim2=FilmScreenAnim2})(FilmScreenAnim2=fgui.FilmScreenAnim2||(fgui.FilmScreenAnim2={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim3;(function(FilmScreenAnim3){var FilmScreenAnim3Struct=(function(_super){__extends(FilmScreenAnim3Struct,_super);function FilmScreenAnim3Struct(){return _super.call(this)||this}FilmScreenAnim3Struct.createInstance=function(){return(fairygui.UIPackage.createObject("FilmScreenAnim3","FilmScreenAnim3"))};FilmScreenAnim3Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_3=(this.getChild("3"));this.m_2=(this.getChild("2"));this.m_1=(this.getChild("1"));this.m_t0=this.getTransition("t0")};FilmScreenAnim3Struct.URL="ui://sq94p4flm647l";FilmScreenAnim3Struct.DependPackages=["FilmScreenAnim3"];return FilmScreenAnim3Struct}(fairygui.GComponent));FilmScreenAnim3.FilmScreenAnim3Struct=FilmScreenAnim3Struct})(FilmScreenAnim3=fgui.FilmScreenAnim3||(fgui.FilmScreenAnim3={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim3;(function(FilmScreenAnim3_1){var FilmScreenAnim3=(function(_super){__extends(FilmScreenAnim3,_super);function FilmScreenAnim3(){return _super!==null&&_super.apply(this,arguments)||this}return FilmScreenAnim3}(FilmScreenAnim3_1.FilmScreenAnim3Struct));FilmScreenAnim3_1.FilmScreenAnim3=FilmScreenAnim3})(FilmScreenAnim3=fgui.FilmScreenAnim3||(fgui.FilmScreenAnim3={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim4;(function(FilmScreenAnim4){var FilmScreenAnim4Struct=(function(_super){__extends(FilmScreenAnim4Struct,_super);function FilmScreenAnim4Struct(){return _super.call(this)||this}FilmScreenAnim4Struct.createInstance=function(){return(fairygui.UIPackage.createObject("FilmScreenAnim4","FilmScreenAnim4"))};FilmScreenAnim4Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_3=(this.getChild("3"));this.m_2=(this.getChild("2"));this.m_1=(this.getChild("1"));this.m_t0=this.getTransition("t0")};FilmScreenAnim4Struct.URL="ui://fxfjh2tksd1yh";FilmScreenAnim4Struct.DependPackages=["FilmScreenAnim4"];return FilmScreenAnim4Struct}(fairygui.GComponent));FilmScreenAnim4.FilmScreenAnim4Struct=FilmScreenAnim4Struct})(FilmScreenAnim4=fgui.FilmScreenAnim4||(fgui.FilmScreenAnim4={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim4;(function(FilmScreenAnim4_1){var FilmScreenAnim4=(function(_super){__extends(FilmScreenAnim4,_super);function FilmScreenAnim4(){return _super!==null&&_super.apply(this,arguments)||this}return FilmScreenAnim4}(FilmScreenAnim4_1.FilmScreenAnim4Struct));FilmScreenAnim4_1.FilmScreenAnim4=FilmScreenAnim4})(FilmScreenAnim4=fgui.FilmScreenAnim4||(fgui.FilmScreenAnim4={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim5;(function(FilmScreenAnim5){var FilmScreenAnim5Struct=(function(_super){__extends(FilmScreenAnim5Struct,_super);function FilmScreenAnim5Struct(){return _super.call(this)||this}FilmScreenAnim5Struct.createInstance=function(){return(fairygui.UIPackage.createObject("FilmScreenAnim5","FilmScreenAnim5"))};FilmScreenAnim5Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_3=(this.getChild("3"));this.m_2=(this.getChild("2"));this.m_1=(this.getChild("1"));this.m_t0=this.getTransition("t0")};FilmScreenAnim5Struct.URL="ui://fx10j6kysd1yh";FilmScreenAnim5Struct.DependPackages=["FilmScreenAnim5"];return FilmScreenAnim5Struct}(fairygui.GComponent));FilmScreenAnim5.FilmScreenAnim5Struct=FilmScreenAnim5Struct})(FilmScreenAnim5=fgui.FilmScreenAnim5||(fgui.FilmScreenAnim5={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim5;(function(FilmScreenAnim5_1){var FilmScreenAnim5=(function(_super){__extends(FilmScreenAnim5,_super);function FilmScreenAnim5(){return _super!==null&&_super.apply(this,arguments)||this}return FilmScreenAnim5}(FilmScreenAnim5_1.FilmScreenAnim5Struct));FilmScreenAnim5_1.FilmScreenAnim5=FilmScreenAnim5})(FilmScreenAnim5=fgui.FilmScreenAnim5||(fgui.FilmScreenAnim5={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim6;(function(FilmScreenAnim6){var FilmScreenAnim6Struct=(function(_super){__extends(FilmScreenAnim6Struct,_super);function FilmScreenAnim6Struct(){return _super.call(this)||this}FilmScreenAnim6Struct.createInstance=function(){return(fairygui.UIPackage.createObject("FilmScreenAnim6","FilmScreenAnim6"))};FilmScreenAnim6Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_3=(this.getChild("3"));this.m_2=(this.getChild("2"));this.m_1=(this.getChild("1"));this.m_t0=this.getTransition("t0")};FilmScreenAnim6Struct.URL="ui://fa5hxb30sd1yh";FilmScreenAnim6Struct.DependPackages=["FilmScreenAnim6"];return FilmScreenAnim6Struct}(fairygui.GComponent));FilmScreenAnim6.FilmScreenAnim6Struct=FilmScreenAnim6Struct})(FilmScreenAnim6=fgui.FilmScreenAnim6||(fgui.FilmScreenAnim6={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim6;(function(FilmScreenAnim6_1){var FilmScreenAnim6=(function(_super){__extends(FilmScreenAnim6,_super);function FilmScreenAnim6(){return _super!==null&&_super.apply(this,arguments)||this}return FilmScreenAnim6}(FilmScreenAnim6_1.FilmScreenAnim6Struct));FilmScreenAnim6_1.FilmScreenAnim6=FilmScreenAnim6})(FilmScreenAnim6=fgui.FilmScreenAnim6||(fgui.FilmScreenAnim6={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim7;(function(FilmScreenAnim7){var FilmScreenAnim7Struct=(function(_super){__extends(FilmScreenAnim7Struct,_super);function FilmScreenAnim7Struct(){return _super.call(this)||this}FilmScreenAnim7Struct.createInstance=function(){return(fairygui.UIPackage.createObject("FilmScreenAnim7","FilmScreenAnim7"))};FilmScreenAnim7Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_3=(this.getChild("3"));this.m_2=(this.getChild("2"));this.m_1=(this.getChild("1"));this.m_t0=this.getTransition("t0")};FilmScreenAnim7Struct.URL="ui://fka8qla1sd1yh";FilmScreenAnim7Struct.DependPackages=["FilmScreenAnim7"];return FilmScreenAnim7Struct}(fairygui.GComponent));FilmScreenAnim7.FilmScreenAnim7Struct=FilmScreenAnim7Struct})(FilmScreenAnim7=fgui.FilmScreenAnim7||(fgui.FilmScreenAnim7={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim7;(function(FilmScreenAnim7_1){var FilmScreenAnim7=(function(_super){__extends(FilmScreenAnim7,_super);function FilmScreenAnim7(){return _super!==null&&_super.apply(this,arguments)||this}return FilmScreenAnim7}(FilmScreenAnim7_1.FilmScreenAnim7Struct));FilmScreenAnim7_1.FilmScreenAnim7=FilmScreenAnim7})(FilmScreenAnim7=fgui.FilmScreenAnim7||(fgui.FilmScreenAnim7={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim8;(function(FilmScreenAnim8){var FilmScreenAnim8Struct=(function(_super){__extends(FilmScreenAnim8Struct,_super);function FilmScreenAnim8Struct(){return _super.call(this)||this}FilmScreenAnim8Struct.createInstance=function(){return(fairygui.UIPackage.createObject("FilmScreenAnim8","FilmScreenAnim8"))};FilmScreenAnim8Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_3=(this.getChild("3"));this.m_2=(this.getChild("2"));this.m_1=(this.getChild("1"));this.m_t0=this.getTransition("t0")};FilmScreenAnim8Struct.URL="ui://fjsa7hfhsd1yh";FilmScreenAnim8Struct.DependPackages=["FilmScreenAnim8"];return FilmScreenAnim8Struct}(fairygui.GComponent));FilmScreenAnim8.FilmScreenAnim8Struct=FilmScreenAnim8Struct})(FilmScreenAnim8=fgui.FilmScreenAnim8||(fgui.FilmScreenAnim8={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim8;(function(FilmScreenAnim8_1){var FilmScreenAnim8=(function(_super){__extends(FilmScreenAnim8,_super);function FilmScreenAnim8(){return _super!==null&&_super.apply(this,arguments)||this}return FilmScreenAnim8}(FilmScreenAnim8_1.FilmScreenAnim8Struct));FilmScreenAnim8_1.FilmScreenAnim8=FilmScreenAnim8})(FilmScreenAnim8=fgui.FilmScreenAnim8||(fgui.FilmScreenAnim8={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim9;(function(FilmScreenAnim9){var FilmScreenAnim9Struct=(function(_super){__extends(FilmScreenAnim9Struct,_super);function FilmScreenAnim9Struct(){return _super.call(this)||this}FilmScreenAnim9Struct.createInstance=function(){return(fairygui.UIPackage.createObject("FilmScreenAnim9","FilmScreenAnim9"))};FilmScreenAnim9Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_3=(this.getChild("3"));this.m_2=(this.getChild("2"));this.m_1=(this.getChild("1"));this.m_t0=this.getTransition("t0")};FilmScreenAnim9Struct.URL="ui://fo83pk0qsd1yh";FilmScreenAnim9Struct.DependPackages=["FilmScreenAnim9"];return FilmScreenAnim9Struct}(fairygui.GComponent));FilmScreenAnim9.FilmScreenAnim9Struct=FilmScreenAnim9Struct})(FilmScreenAnim9=fgui.FilmScreenAnim9||(fgui.FilmScreenAnim9={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FilmScreenAnim9;(function(FilmScreenAnim9_1){var FilmScreenAnim9=(function(_super){__extends(FilmScreenAnim9,_super);function FilmScreenAnim9(){return _super!==null&&_super.apply(this,arguments)||this}return FilmScreenAnim9}(FilmScreenAnim9_1.FilmScreenAnim9Struct));FilmScreenAnim9_1.FilmScreenAnim9=FilmScreenAnim9})(FilmScreenAnim9=fgui.FilmScreenAnim9||(fgui.FilmScreenAnim9={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Beat01Struct=(function(_super){__extends(Beat01Struct,_super);function Beat01Struct(){return _super.call(this)||this}Beat01Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","beat01"))};Beat01Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_smoke_n9=(this.getChild("smoke_n9"));this.m_smoke_n8=(this.getChild("smoke_n8"));this.m_smoke_n3=(this.getChild("smoke_n3"));this.m_smoke_n2=(this.getChild("smoke_n2"));this.m_smoke_n5=(this.getChild("smoke_n5"));this.m_smoke_n6=(this.getChild("smoke_n6"));this.m_smoke_n10=(this.getChild("smoke_n10"));this.m_smoke_n11=(this.getChild("smoke_n11"));this.m_smoke_n12=(this.getChild("smoke_n12"));this.m_smoke_n16=(this.getChild("smoke_n16"));this.m_smoke_n13=(this.getChild("smoke_n13"));this.m_smoke_n4=(this.getChild("smoke_n4"));this.m_smoke_n14=(this.getChild("smoke_n14"));this.m_smoke_n15=(this.getChild("smoke_n15"));this.m_smoke_n17=(this.getChild("smoke_n17"));this.m_smoke_n18=(this.getChild("smoke_n18"));this.m_smoke_n19=(this.getChild("smoke_n19"));this.m_smoke_n20=(this.getChild("smoke_n20"));this.m_smoke_n21=(this.getChild("smoke_n21"));this.m_n2323133d=(this.getChild("n2323133d"));this.m_smoke_a001=this.getTransition("smoke_a001")};Beat01Struct.URL="ui://9l36y1kiweh5co";Beat01Struct.DependPackages=["Fx"];return Beat01Struct}(fairygui.GComponent));Fx.Beat01Struct=Beat01Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Beat01=(function(_super){__extends(Beat01,_super);function Beat01(){return _super!==null&&_super.apply(this,arguments)||this}return Beat01}(Fx.Beat01Struct));Fx.Beat01=Beat01})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Button_yellow_001Struct=(function(_super){__extends(Button_yellow_001Struct,_super);function Button_yellow_001Struct(){return _super.call(this)||this}Button_yellow_001Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","button_yellow_001"))};Button_yellow_001Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t02522=this.getTransition("t02522")};Button_yellow_001Struct.URL="ui://9l36y1kip3cziw";Button_yellow_001Struct.DependPackages=["Fx"];return Button_yellow_001Struct}(fairygui.GComponent));Fx.Button_yellow_001Struct=Button_yellow_001Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Button_yellow_001=(function(_super){__extends(Button_yellow_001,_super);function Button_yellow_001(){return _super!==null&&_super.apply(this,arguments)||this}return Button_yellow_001}(Fx.Button_yellow_001Struct));Fx.Button_yellow_001=Button_yellow_001})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Car_smokeStruct=(function(_super){__extends(Car_smokeStruct,_super);function Car_smokeStruct(){return _super.call(this)||this}Car_smokeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Car_smoke"))};Car_smokeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_car_smoke999=this.getTransition("car_smoke999")};Car_smokeStruct.URL="ui://9l36y1kiesvsm9";Car_smokeStruct.DependPackages=["Fx"];return Car_smokeStruct}(fairygui.GComponent));Fx.Car_smokeStruct=Car_smokeStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Car_smoke=(function(_super){__extends(Car_smoke,_super);function Car_smoke(){return _super!==null&&_super.apply(this,arguments)||this}return Car_smoke}(Fx.Car_smokeStruct));Fx.Car_smoke=Car_smoke})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Car_smoke02Struct=(function(_super){__extends(Car_smoke02Struct,_super);function Car_smoke02Struct(){return _super.call(this)||this}Car_smoke02Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Car_smoke02"))};Car_smoke02Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0975655=this.getTransition("t0975655")};Car_smoke02Struct.URL="ui://9l36y1kiesvsmb";Car_smoke02Struct.DependPackages=["Fx"];return Car_smoke02Struct}(fairygui.GComponent));Fx.Car_smoke02Struct=Car_smoke02Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Car_smoke02=(function(_super){__extends(Car_smoke02,_super);function Car_smoke02(){return _super!==null&&_super.apply(this,arguments)||this}return Car_smoke02}(Fx.Car_smoke02Struct));Fx.Car_smoke02=Car_smoke02})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_2333Struct=(function(_super){__extends(Effect_2333Struct,_super);function Effect_2333Struct(){return _super.call(this)||this}Effect_2333Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_2333"))};Effect_2333Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t02=this.getTransition("t02")};Effect_2333Struct.URL="ui://9l36y1ki10sh5tn";Effect_2333Struct.DependPackages=["Fx"];return Effect_2333Struct}(fairygui.GComponent));Fx.Effect_2333Struct=Effect_2333Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_2333=(function(_super){__extends(Effect_2333,_super);function Effect_2333(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_2333}(Fx.Effect_2333Struct));Fx.Effect_2333=Effect_2333})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor01Struct=(function(_super){__extends(Effect_actor01Struct,_super);function Effect_actor01Struct(){return _super.call(this)||this}Effect_actor01Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_actor01"))};Effect_actor01Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_actor01Struct.URL="ui://9l36y1kihugnkb";Effect_actor01Struct.DependPackages=["Fx"];return Effect_actor01Struct}(fairygui.GComponent));Fx.Effect_actor01Struct=Effect_actor01Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor01=(function(_super){__extends(Effect_actor01,_super);function Effect_actor01(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_actor01}(Fx.Effect_actor01Struct));Fx.Effect_actor01=Effect_actor01})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_blueStruct=(function(_super){__extends(Effect_actor_skill_top_blueStruct,_super);function Effect_actor_skill_top_blueStruct(){return _super.call(this)||this}Effect_actor_skill_top_blueStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_actor_skill_top_blue"))};Effect_actor_skill_top_blueStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Effect_actor02=(this.getChild("Effect_actor02"));this.m_Effect_actor04=(this.getChild("Effect_actor04"));this.m_Effect_actor05=(this.getChild("Effect_actor05"));this.m_Effect_actor03=(this.getChild("Effect_actor03"));this.m_t0=this.getTransition("t0")};Effect_actor_skill_top_blueStruct.URL="ui://9l36y1kiqkqngr";Effect_actor_skill_top_blueStruct.DependPackages=["Fx","Common"];return Effect_actor_skill_top_blueStruct}(fairygui.GComponent));Fx.Effect_actor_skill_top_blueStruct=Effect_actor_skill_top_blueStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_blue=(function(_super){__extends(Effect_actor_skill_top_blue,_super);function Effect_actor_skill_top_blue(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_actor_skill_top_blue}(Fx.Effect_actor_skill_top_blueStruct));Fx.Effect_actor_skill_top_blue=Effect_actor_skill_top_blue})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_deuceStruct=(function(_super){__extends(Effect_actor_skill_top_deuceStruct,_super);function Effect_actor_skill_top_deuceStruct(){return _super.call(this)||this}Effect_actor_skill_top_deuceStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_actor_skill_top_deuce"))};Effect_actor_skill_top_deuceStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Effect_actor02=(this.getChild("Effect_actor02"));this.m_Effect_actor04=(this.getChild("Effect_actor04"));this.m_Effect_actor05=(this.getChild("Effect_actor05"));this.m_Effect_actor03=(this.getChild("Effect_actor03"));this.m_t0=this.getTransition("t0")};Effect_actor_skill_top_deuceStruct.URL="ui://9l36y1kixeimii";Effect_actor_skill_top_deuceStruct.DependPackages=["Fx","Common"];return Effect_actor_skill_top_deuceStruct}(fairygui.GComponent));Fx.Effect_actor_skill_top_deuceStruct=Effect_actor_skill_top_deuceStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_deuce=(function(_super){__extends(Effect_actor_skill_top_deuce,_super);function Effect_actor_skill_top_deuce(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_actor_skill_top_deuce}(Fx.Effect_actor_skill_top_deuceStruct));Fx.Effect_actor_skill_top_deuce=Effect_actor_skill_top_deuce})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_grayStruct=(function(_super){__extends(Effect_actor_skill_top_grayStruct,_super);function Effect_actor_skill_top_grayStruct(){return _super.call(this)||this}Effect_actor_skill_top_grayStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_actor_skill_top_gray"))};Effect_actor_skill_top_grayStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Effect_actor02=(this.getChild("Effect_actor02"));this.m_Effect_actor04=(this.getChild("Effect_actor04"));this.m_Effect_actor05=(this.getChild("Effect_actor05"));this.m_Effect_actor03=(this.getChild("Effect_actor03"));this.m_t0=this.getTransition("t0")};Effect_actor_skill_top_grayStruct.URL="ui://9l36y1kin57rgw";Effect_actor_skill_top_grayStruct.DependPackages=["Fx","Common"];return Effect_actor_skill_top_grayStruct}(fairygui.GComponent));Fx.Effect_actor_skill_top_grayStruct=Effect_actor_skill_top_grayStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_gray=(function(_super){__extends(Effect_actor_skill_top_gray,_super);function Effect_actor_skill_top_gray(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_actor_skill_top_gray}(Fx.Effect_actor_skill_top_grayStruct));Fx.Effect_actor_skill_top_gray=Effect_actor_skill_top_gray})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_loseStruct=(function(_super){__extends(Effect_actor_skill_top_loseStruct,_super);function Effect_actor_skill_top_loseStruct(){return _super.call(this)||this}Effect_actor_skill_top_loseStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_actor_skill_top_lose"))};Effect_actor_skill_top_loseStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Effect_actor02=(this.getChild("Effect_actor02"));this.m_Effect_actor04=(this.getChild("Effect_actor04"));this.m_Effect_actor05=(this.getChild("Effect_actor05"));this.m_Effect_actor03=(this.getChild("Effect_actor03"));this.m_t222=this.getTransition("t222")};Effect_actor_skill_top_loseStruct.URL="ui://9l36y1kixeimij";Effect_actor_skill_top_loseStruct.DependPackages=["Fx","Common"];return Effect_actor_skill_top_loseStruct}(fairygui.GComponent));Fx.Effect_actor_skill_top_loseStruct=Effect_actor_skill_top_loseStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_lose=(function(_super){__extends(Effect_actor_skill_top_lose,_super);function Effect_actor_skill_top_lose(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_actor_skill_top_lose}(Fx.Effect_actor_skill_top_loseStruct));Fx.Effect_actor_skill_top_lose=Effect_actor_skill_top_lose})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_redStruct=(function(_super){__extends(Effect_actor_skill_top_redStruct,_super);function Effect_actor_skill_top_redStruct(){return _super.call(this)||this}Effect_actor_skill_top_redStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_actor_skill_top_red"))};Effect_actor_skill_top_redStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Effect_actor01=(this.getChild("Effect_actor01"));this.m_Effect_actor02=(this.getChild("Effect_actor02"));this.m_Effect_actor04=(this.getChild("Effect_actor04"));this.m_Effect_actor05=(this.getChild("Effect_actor05"));this.m_Effect_actor03=(this.getChild("Effect_actor03"));this.m_t0=this.getTransition("t0")};Effect_actor_skill_top_redStruct.URL="ui://9l36y1kiqkqngq";Effect_actor_skill_top_redStruct.DependPackages=["Fx","Common"];return Effect_actor_skill_top_redStruct}(fairygui.GComponent));Fx.Effect_actor_skill_top_redStruct=Effect_actor_skill_top_redStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_red=(function(_super){__extends(Effect_actor_skill_top_red,_super);function Effect_actor_skill_top_red(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_actor_skill_top_red}(Fx.Effect_actor_skill_top_redStruct));Fx.Effect_actor_skill_top_red=Effect_actor_skill_top_red})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_winStruct=(function(_super){__extends(Effect_actor_skill_top_winStruct,_super);function Effect_actor_skill_top_winStruct(){return _super.call(this)||this}Effect_actor_skill_top_winStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_actor_skill_top_win"))};Effect_actor_skill_top_winStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Effect_actor01=(this.getChild("Effect_actor01"));this.m_Effect_actor02=(this.getChild("Effect_actor02"));this.m_Effect_actor04=(this.getChild("Effect_actor04"));this.m_Effect_actor05=(this.getChild("Effect_actor05"));this.m_Effect_actor03=(this.getChild("Effect_actor03"));this.m_t2=this.getTransition("t2")};Effect_actor_skill_top_winStruct.URL="ui://9l36y1kixeimih";Effect_actor_skill_top_winStruct.DependPackages=["Fx","Common"];return Effect_actor_skill_top_winStruct}(fairygui.GComponent));Fx.Effect_actor_skill_top_winStruct=Effect_actor_skill_top_winStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_win=(function(_super){__extends(Effect_actor_skill_top_win,_super);function Effect_actor_skill_top_win(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_actor_skill_top_win}(Fx.Effect_actor_skill_top_winStruct));Fx.Effect_actor_skill_top_win=Effect_actor_skill_top_win})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_yellowStruct=(function(_super){__extends(Effect_actor_skill_top_yellowStruct,_super);function Effect_actor_skill_top_yellowStruct(){return _super.call(this)||this}Effect_actor_skill_top_yellowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_actor_skill_top_yellow"))};Effect_actor_skill_top_yellowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Effect_actor01=(this.getChild("Effect_actor01"));this.m_Effect_actor02=(this.getChild("Effect_actor02"));this.m_Effect_actor04=(this.getChild("Effect_actor04"));this.m_Effect_actor05=(this.getChild("Effect_actor05"));this.m_Effect_actor03=(this.getChild("Effect_actor03"));this.m_t0=this.getTransition("t0")};Effect_actor_skill_top_yellowStruct.URL="ui://9l36y1kiqkqngt";Effect_actor_skill_top_yellowStruct.DependPackages=["Fx","Common"];return Effect_actor_skill_top_yellowStruct}(fairygui.GComponent));Fx.Effect_actor_skill_top_yellowStruct=Effect_actor_skill_top_yellowStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_actor_skill_top_yellow=(function(_super){__extends(Effect_actor_skill_top_yellow,_super);function Effect_actor_skill_top_yellow(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_actor_skill_top_yellow}(Fx.Effect_actor_skill_top_yellowStruct));Fx.Effect_actor_skill_top_yellow=Effect_actor_skill_top_yellow})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_bluelight_01Struct=(function(_super){__extends(Effect_bluelight_01Struct,_super);function Effect_bluelight_01Struct(){return _super.call(this)||this}Effect_bluelight_01Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_bluelight_01"))};Effect_bluelight_01Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_bluelight_01Struct.URL="ui://9l36y1kiwaaft7";Effect_bluelight_01Struct.DependPackages=["Fx"];return Effect_bluelight_01Struct}(fairygui.GComponent));Fx.Effect_bluelight_01Struct=Effect_bluelight_01Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_bluelight_01=(function(_super){__extends(Effect_bluelight_01,_super);function Effect_bluelight_01(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_bluelight_01}(Fx.Effect_bluelight_01Struct));Fx.Effect_bluelight_01=Effect_bluelight_01})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_boom_starsStruct=(function(_super){__extends(Effect_boom_starsStruct,_super);function Effect_boom_starsStruct(){return _super.call(this)||this}Effect_boom_starsStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_boom_stars"))};Effect_boom_starsStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_boom_starsStruct.URL="ui://9l36y1ki10sh5tj";Effect_boom_starsStruct.DependPackages=["Fx","OpenAnima"];return Effect_boom_starsStruct}(fairygui.GComponent));Fx.Effect_boom_starsStruct=Effect_boom_starsStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_boom_stars=(function(_super){__extends(Effect_boom_stars,_super);function Effect_boom_stars(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_boom_stars}(Fx.Effect_boom_starsStruct));Fx.Effect_boom_stars=Effect_boom_stars})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_boxgolden_01Struct=(function(_super){__extends(Effect_boxgolden_01Struct,_super);function Effect_boxgolden_01Struct(){return _super.call(this)||this}Effect_boxgolden_01Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_boxgolden_01"))};Effect_boxgolden_01Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_boxgolden_01Struct.URL="ui://9l36y1kiqhas55v7";Effect_boxgolden_01Struct.DependPackages=["Fx"];return Effect_boxgolden_01Struct}(fairygui.GComponent));Fx.Effect_boxgolden_01Struct=Effect_boxgolden_01Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_boxgolden_01=(function(_super){__extends(Effect_boxgolden_01,_super);function Effect_boxgolden_01(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_boxgolden_01}(Fx.Effect_boxgolden_01Struct));Fx.Effect_boxgolden_01=Effect_boxgolden_01})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_build02Struct=(function(_super){__extends(Effect_build02Struct,_super);function Effect_build02Struct(){return _super.call(this)||this}Effect_build02Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_build02"))};Effect_build02Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t000=this.getTransition("t000")};Effect_build02Struct.URL="ui://9l36y1kifm7thb";Effect_build02Struct.DependPackages=["Fx"];return Effect_build02Struct}(fairygui.GComponent));Fx.Effect_build02Struct=Effect_build02Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_build02=(function(_super){__extends(Effect_build02,_super);function Effect_build02(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_build02}(Fx.Effect_build02Struct));Fx.Effect_build02=Effect_build02})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_bulbs_001Struct=(function(_super){__extends(Effect_bulbs_001Struct,_super);function Effect_bulbs_001Struct(){return _super.call(this)||this}Effect_bulbs_001Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_bulbs_001"))};Effect_bulbs_001Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t033333=this.getTransition("t033333")};Effect_bulbs_001Struct.URL="ui://9l36y1kip6obm4";Effect_bulbs_001Struct.DependPackages=["Fx"];return Effect_bulbs_001Struct}(fairygui.GComponent));Fx.Effect_bulbs_001Struct=Effect_bulbs_001Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_bulbs_001=(function(_super){__extends(Effect_bulbs_001,_super);function Effect_bulbs_001(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_bulbs_001}(Fx.Effect_bulbs_001Struct));Fx.Effect_bulbs_001=Effect_bulbs_001})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_cartStruct=(function(_super){__extends(Effect_cartStruct,_super);function Effect_cartStruct(){return _super.call(this)||this}Effect_cartStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_cart"))};Effect_cartStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_cartStruct.URL="ui://9l36y1kiqhas55v5";Effect_cartStruct.DependPackages=["Fx"];return Effect_cartStruct}(fairygui.GComponent));Fx.Effect_cartStruct=Effect_cartStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_cart=(function(_super){__extends(Effect_cart,_super);function Effect_cart(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_cart}(Fx.Effect_cartStruct));Fx.Effect_cart=Effect_cart})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_chapterStruct=(function(_super){__extends(Effect_chapterStruct,_super);function Effect_chapterStruct(){return _super.call(this)||this}Effect_chapterStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_chapter"))};Effect_chapterStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_chapterStruct.URL="ui://9l36y1kikowfik";Effect_chapterStruct.DependPackages=["Fx"];return Effect_chapterStruct}(fairygui.GComponent));Fx.Effect_chapterStruct=Effect_chapterStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_chapter=(function(_super){__extends(Effect_chapter,_super);function Effect_chapter(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_chapter}(Fx.Effect_chapterStruct));Fx.Effect_chapter=Effect_chapter})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_countdownStruct=(function(_super){__extends(Effect_countdownStruct,_super);function Effect_countdownStruct(){return _super.call(this)||this}Effect_countdownStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_countdown"))};Effect_countdownStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_countdownStruct.URL="ui://9l36y1kipjz9ou";Effect_countdownStruct.DependPackages=["Fx"];return Effect_countdownStruct}(fairygui.GComponent));Fx.Effect_countdownStruct=Effect_countdownStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_countdown=(function(_super){__extends(Effect_countdown,_super);function Effect_countdown(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_countdown}(Fx.Effect_countdownStruct));Fx.Effect_countdown=Effect_countdown})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_countdown_lightStruct=(function(_super){__extends(Effect_countdown_lightStruct,_super);function Effect_countdown_lightStruct(){return _super.call(this)||this}Effect_countdown_lightStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_countdown_light"))};Effect_countdown_lightStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_countdown_lightStruct.URL="ui://9l36y1kirxnhp1";Effect_countdown_lightStruct.DependPackages=["Fx"];return Effect_countdown_lightStruct}(fairygui.GComponent));Fx.Effect_countdown_lightStruct=Effect_countdown_lightStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_countdown_light=(function(_super){__extends(Effect_countdown_light,_super);function Effect_countdown_light(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_countdown_light}(Fx.Effect_countdown_lightStruct));Fx.Effect_countdown_light=Effect_countdown_light})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_filming02Struct=(function(_super){__extends(Effect_filming02Struct,_super);function Effect_filming02Struct(){return _super.call(this)||this}Effect_filming02Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_filming02"))};Effect_filming02Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_filming02Struct.URL="ui://9l36y1kisv5mek";Effect_filming02Struct.DependPackages=["Fx"];return Effect_filming02Struct}(fairygui.GComponent));Fx.Effect_filming02Struct=Effect_filming02Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_filming02=(function(_super){__extends(Effect_filming02,_super);function Effect_filming02(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_filming02}(Fx.Effect_filming02Struct));Fx.Effect_filming02=Effect_filming02})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks002Struct=(function(_super){__extends(Effect_fireworks002Struct,_super);function Effect_fireworks002Struct(){return _super.call(this)||this}Effect_fireworks002Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_fireworks002"))};Effect_fireworks002Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Effect_fireworks_n16=(this.getChild("Effect_fireworks_n16"));this.m_fireworks_11=this.getTransition("fireworks_11")};Effect_fireworks002Struct.URL="ui://9l36y1kilofb6k";Effect_fireworks002Struct.DependPackages=["Fx"];return Effect_fireworks002Struct}(fairygui.GComponent));Fx.Effect_fireworks002Struct=Effect_fireworks002Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks002=(function(_super){__extends(Effect_fireworks002,_super);function Effect_fireworks002(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_fireworks002}(Fx.Effect_fireworks002Struct));Fx.Effect_fireworks002=Effect_fireworks002})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks_blueStruct=(function(_super){__extends(Effect_fireworks_blueStruct,_super);function Effect_fireworks_blueStruct(){return _super.call(this)||this}Effect_fireworks_blueStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_fireworks_blue"))};Effect_fireworks_blueStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t023=this.getTransition("t023")};Effect_fireworks_blueStruct.URL="ui://9l36y1kirs6lm3";Effect_fireworks_blueStruct.DependPackages=["Fx"];return Effect_fireworks_blueStruct}(fairygui.GComponent));Fx.Effect_fireworks_blueStruct=Effect_fireworks_blueStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks_blue=(function(_super){__extends(Effect_fireworks_blue,_super);function Effect_fireworks_blue(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_fireworks_blue}(Fx.Effect_fireworks_blueStruct));Fx.Effect_fireworks_blue=Effect_fireworks_blue})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks_goldenStruct=(function(_super){__extends(Effect_fireworks_goldenStruct,_super);function Effect_fireworks_goldenStruct(){return _super.call(this)||this}Effect_fireworks_goldenStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_fireworks_golden"))};Effect_fireworks_goldenStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_fireworks_11111=this.getTransition("fireworks_11111")};Effect_fireworks_goldenStruct.URL="ui://9l36y1kijmphdw";Effect_fireworks_goldenStruct.DependPackages=["Fx"];return Effect_fireworks_goldenStruct}(fairygui.GComponent));Fx.Effect_fireworks_goldenStruct=Effect_fireworks_goldenStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks_golden=(function(_super){__extends(Effect_fireworks_golden,_super);function Effect_fireworks_golden(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_fireworks_golden}(Fx.Effect_fireworks_goldenStruct));Fx.Effect_fireworks_golden=Effect_fireworks_golden})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks_light01Struct=(function(_super){__extends(Effect_fireworks_light01Struct,_super);function Effect_fireworks_light01Struct(){return _super.call(this)||this}Effect_fireworks_light01Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_fireworks_light01"))};Effect_fireworks_light01Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_yy0=this.getTransition("yy0")};Effect_fireworks_light01Struct.URL="ui://9l36y1kirlky63";Effect_fireworks_light01Struct.DependPackages=["Fx"];return Effect_fireworks_light01Struct}(fairygui.GComponent));Fx.Effect_fireworks_light01Struct=Effect_fireworks_light01Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks_light01=(function(_super){__extends(Effect_fireworks_light01,_super);function Effect_fireworks_light01(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_fireworks_light01}(Fx.Effect_fireworks_light01Struct));Fx.Effect_fireworks_light01=Effect_fireworks_light01})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks_light03Struct=(function(_super){__extends(Effect_fireworks_light03Struct,_super);function Effect_fireworks_light03Struct(){return _super.call(this)||this}Effect_fireworks_light03Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_fireworks_light03"))};Effect_fireworks_light03Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_fireworks_light03Struct.URL="ui://9l36y1kisl89e5";Effect_fireworks_light03Struct.DependPackages=["Fx"];return Effect_fireworks_light03Struct}(fairygui.GComponent));Fx.Effect_fireworks_light03Struct=Effect_fireworks_light03Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks_light03=(function(_super){__extends(Effect_fireworks_light03,_super);function Effect_fireworks_light03(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_fireworks_light03}(Fx.Effect_fireworks_light03Struct));Fx.Effect_fireworks_light03=Effect_fireworks_light03})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks_showcaseStruct=(function(_super){__extends(Effect_fireworks_showcaseStruct,_super);function Effect_fireworks_showcaseStruct(){return _super.call(this)||this}Effect_fireworks_showcaseStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_fireworks_showcase"))};Effect_fireworks_showcaseStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t1=this.getTransition("t1")};Effect_fireworks_showcaseStruct.URL="ui://9l36y1kilv2z5u0";Effect_fireworks_showcaseStruct.DependPackages=["Fx"];return Effect_fireworks_showcaseStruct}(fairygui.GComponent));Fx.Effect_fireworks_showcaseStruct=Effect_fireworks_showcaseStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks_showcase=(function(_super){__extends(Effect_fireworks_showcase,_super);function Effect_fireworks_showcase(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_fireworks_showcase}(Fx.Effect_fireworks_showcaseStruct));Fx.Effect_fireworks_showcase=Effect_fireworks_showcase})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks_showcase002Struct=(function(_super){__extends(Effect_fireworks_showcase002Struct,_super);function Effect_fireworks_showcase002Struct(){return _super.call(this)||this}Effect_fireworks_showcase002Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_fireworks_showcase002"))};Effect_fireworks_showcase002Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t1=this.getTransition("t1")};Effect_fireworks_showcase002Struct.URL="ui://9l36y1kiv2lu55v8";Effect_fireworks_showcase002Struct.DependPackages=["Fx"];return Effect_fireworks_showcase002Struct}(fairygui.GComponent));Fx.Effect_fireworks_showcase002Struct=Effect_fireworks_showcase002Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_fireworks_showcase002=(function(_super){__extends(Effect_fireworks_showcase002,_super);function Effect_fireworks_showcase002(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_fireworks_showcase002}(Fx.Effect_fireworks_showcase002Struct));Fx.Effect_fireworks_showcase002=Effect_fireworks_showcase002})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_firework_blue55Struct=(function(_super){__extends(Effect_firework_blue55Struct,_super);function Effect_firework_blue55Struct(){return _super.call(this)||this}Effect_firework_blue55Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_firework_blue55"))};Effect_firework_blue55Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};Effect_firework_blue55Struct.URL="ui://9l36y1kinmj1k9";Effect_firework_blue55Struct.DependPackages=["Fx"];return Effect_firework_blue55Struct}(fairygui.GComponent));Fx.Effect_firework_blue55Struct=Effect_firework_blue55Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_firework_blue55=(function(_super){__extends(Effect_firework_blue55,_super);function Effect_firework_blue55(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_firework_blue55}(Fx.Effect_firework_blue55Struct));Fx.Effect_firework_blue55=Effect_firework_blue55})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_flower02Struct=(function(_super){__extends(Effect_flower02Struct,_super);function Effect_flower02Struct(){return _super.call(this)||this}Effect_flower02Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_flower02"))};Effect_flower02Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_yumilili001=(this.getChild("yumilili001"));this.m_n12_baoguangg=(this.getChild("n12_baoguangg"));this.m_t0=this.getTransition("t0")};Effect_flower02Struct.URL="ui://9l36y1kih6prmf";Effect_flower02Struct.DependPackages=["Fx"];return Effect_flower02Struct}(fairygui.GComponent));Fx.Effect_flower02Struct=Effect_flower02Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_flower02=(function(_super){__extends(Effect_flower02,_super);function Effect_flower02(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_flower02}(Fx.Effect_flower02Struct));Fx.Effect_flower02=Effect_flower02})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_FxPicRollLoginStruct=(function(_super){__extends(Effect_FxPicRollLoginStruct,_super);function Effect_FxPicRollLoginStruct(){return _super.call(this)||this}Effect_FxPicRollLoginStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_FxPicRollLogin"))};Effect_FxPicRollLoginStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_FxPicRollLoginStruct.URL="ui://9l36y1kip6obm8";Effect_FxPicRollLoginStruct.DependPackages=["Fx"];return Effect_FxPicRollLoginStruct}(fairygui.GComponent));Fx.Effect_FxPicRollLoginStruct=Effect_FxPicRollLoginStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_FxPicRollLogin=(function(_super){__extends(Effect_FxPicRollLogin,_super);function Effect_FxPicRollLogin(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_FxPicRollLogin}(Fx.Effect_FxPicRollLoginStruct));Fx.Effect_FxPicRollLogin=Effect_FxPicRollLogin})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_goldappear_01Struct=(function(_super){__extends(Effect_goldappear_01Struct,_super);function Effect_goldappear_01Struct(){return _super.call(this)||this}Effect_goldappear_01Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_goldappear_01"))};Effect_goldappear_01Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t08445=this.getTransition("t08445")};Effect_goldappear_01Struct.URL="ui://9l36y1kioecql2";Effect_goldappear_01Struct.DependPackages=["Fx"];return Effect_goldappear_01Struct}(fairygui.GComponent));Fx.Effect_goldappear_01Struct=Effect_goldappear_01Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_goldappear_01=(function(_super){__extends(Effect_goldappear_01,_super);function Effect_goldappear_01(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_goldappear_01}(Fx.Effect_goldappear_01Struct));Fx.Effect_goldappear_01=Effect_goldappear_01})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_lights_ascarStruct=(function(_super){__extends(Effect_lights_ascarStruct,_super);function Effect_lights_ascarStruct(){return _super.call(this)||this}Effect_lights_ascarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_lights_ascar"))};Effect_lights_ascarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_lights_ascarStruct.URL="ui://9l36y1kipldw55us";Effect_lights_ascarStruct.DependPackages=["Fx"];return Effect_lights_ascarStruct}(fairygui.GComponent));Fx.Effect_lights_ascarStruct=Effect_lights_ascarStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_lights_ascar=(function(_super){__extends(Effect_lights_ascar,_super);function Effect_lights_ascar(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_lights_ascar}(Fx.Effect_lights_ascarStruct));Fx.Effect_lights_ascar=Effect_lights_ascar})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_light_300Struct=(function(_super){__extends(Effect_light_300Struct,_super);function Effect_light_300Struct(){return _super.call(this)||this}Effect_light_300Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_light_300"))};Effect_light_300Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_light_300Struct.URL="ui://9l36y1kidbud5tx";Effect_light_300Struct.DependPackages=["Fx"];return Effect_light_300Struct}(fairygui.GComponent));Fx.Effect_light_300Struct=Effect_light_300Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_light_300=(function(_super){__extends(Effect_light_300,_super);function Effect_light_300(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_light_300}(Fx.Effect_light_300Struct));Fx.Effect_light_300=Effect_light_300})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_light_ticketStruct=(function(_super){__extends(Effect_light_ticketStruct,_super);function Effect_light_ticketStruct(){return _super.call(this)||this}Effect_light_ticketStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_light_ticket"))};Effect_light_ticketStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_light_ticketStruct.URL="ui://9l36y1kiqhas55v2";Effect_light_ticketStruct.DependPackages=["Fx"];return Effect_light_ticketStruct}(fairygui.GComponent));Fx.Effect_light_ticketStruct=Effect_light_ticketStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_light_ticket=(function(_super){__extends(Effect_light_ticket,_super);function Effect_light_ticket(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_light_ticket}(Fx.Effect_light_ticketStruct));Fx.Effect_light_ticket=Effect_light_ticket})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_MovieTarget_FailedStruct=(function(_super){__extends(Effect_MovieTarget_FailedStruct,_super);function Effect_MovieTarget_FailedStruct(){return _super.call(this)||this}Effect_MovieTarget_FailedStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_MovieTarget_Failed"))};Effect_MovieTarget_FailedStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_failed_01=this.getTransition("failed_01")};Effect_MovieTarget_FailedStruct.URL="ui://9l36y1kijeka42";Effect_MovieTarget_FailedStruct.DependPackages=["Fx","Common"];return Effect_MovieTarget_FailedStruct}(fairygui.GComponent));Fx.Effect_MovieTarget_FailedStruct=Effect_MovieTarget_FailedStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_MovieTarget_Failed=(function(_super){__extends(Effect_MovieTarget_Failed,_super);function Effect_MovieTarget_Failed(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_MovieTarget_Failed}(Fx.Effect_MovieTarget_FailedStruct));Fx.Effect_MovieTarget_Failed=Effect_MovieTarget_Failed})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_Movie_EarningsStruct=(function(_super){__extends(Effect_Movie_EarningsStruct,_super);function Effect_Movie_EarningsStruct(){return _super.call(this)||this}Effect_Movie_EarningsStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_Movie_Earnings"))};Effect_Movie_EarningsStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_1_A_E=(this.getChild("1_A_E"));this.m_2_B_A=(this.getChild("2_B_A"));this.m_3_C_R=(this.getChild("3_C_R"));this.m_4_D_N=(this.getChild("4_D_N"));this.m_5_E_I=(this.getChild("5_E_I"));this.m_6_F_N=(this.getChild("6_F_N"));this.m_7_G_G=(this.getChild("7_G_G"));this.m_8_G_S=(this.getChild("8_G_S"));this.m_FILMING=this.getTransition("FILMING")};Effect_Movie_EarningsStruct.URL="ui://9l36y1kil22x4e";Effect_Movie_EarningsStruct.DependPackages=["Fx","Common"];return Effect_Movie_EarningsStruct}(fairygui.GComponent));Fx.Effect_Movie_EarningsStruct=Effect_Movie_EarningsStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_Movie_Earnings=(function(_super){__extends(Effect_Movie_Earnings,_super);function Effect_Movie_Earnings(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_Movie_Earnings}(Fx.Effect_Movie_EarningsStruct));Fx.Effect_Movie_Earnings=Effect_Movie_Earnings})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_num1Struct=(function(_super){__extends(Effect_num1Struct,_super);function Effect_num1Struct(){return _super.call(this)||this}Effect_num1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_num1"))};Effect_num1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_t5555555=this.getTransition("t5555555")};Effect_num1Struct.URL="ui://9l36y1kis1hsj1";Effect_num1Struct.DependPackages=["Fx"];return Effect_num1Struct}(fairygui.GComponent));Fx.Effect_num1Struct=Effect_num1Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_num1=(function(_super){__extends(Effect_num1,_super);function Effect_num1(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_num1}(Fx.Effect_num1Struct));Fx.Effect_num1=Effect_num1})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_Oscar_Choose01Struct=(function(_super){__extends(Effect_Oscar_Choose01Struct,_super);function Effect_Oscar_Choose01Struct(){return _super.call(this)||this}Effect_Oscar_Choose01Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_Oscar_Choose01"))};Effect_Oscar_Choose01Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_Oscar_Choose01Struct.URL="ui://9l36y1ki6n1hdu";Effect_Oscar_Choose01Struct.DependPackages=["Fx"];return Effect_Oscar_Choose01Struct}(fairygui.GComponent));Fx.Effect_Oscar_Choose01Struct=Effect_Oscar_Choose01Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_Oscar_Choose01=(function(_super){__extends(Effect_Oscar_Choose01,_super);function Effect_Oscar_Choose01(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_Oscar_Choose01}(Fx.Effect_Oscar_Choose01Struct));Fx.Effect_Oscar_Choose01=Effect_Oscar_Choose01})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_Oscar_Choose02Struct=(function(_super){__extends(Effect_Oscar_Choose02Struct,_super);function Effect_Oscar_Choose02Struct(){return _super.call(this)||this}Effect_Oscar_Choose02Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_Oscar_Choose02"))};Effect_Oscar_Choose02Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_Oscar_Choose02Struct.URL="ui://9l36y1kitbt4cv";Effect_Oscar_Choose02Struct.DependPackages=["Fx"];return Effect_Oscar_Choose02Struct}(fairygui.GComponent));Fx.Effect_Oscar_Choose02Struct=Effect_Oscar_Choose02Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_Oscar_Choose02=(function(_super){__extends(Effect_Oscar_Choose02,_super);function Effect_Oscar_Choose02(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_Oscar_Choose02}(Fx.Effect_Oscar_Choose02Struct));Fx.Effect_Oscar_Choose02=Effect_Oscar_Choose02})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_Oscar_light02Struct=(function(_super){__extends(Effect_Oscar_light02Struct,_super);function Effect_Oscar_light02Struct(){return _super.call(this)||this}Effect_Oscar_light02Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_Oscar_light02"))};Effect_Oscar_light02Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t12333=this.getTransition("t12333")};Effect_Oscar_light02Struct.URL="ui://9l36y1kitbt4d5";Effect_Oscar_light02Struct.DependPackages=["Fx"];return Effect_Oscar_light02Struct}(fairygui.GComponent));Fx.Effect_Oscar_light02Struct=Effect_Oscar_light02Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_Oscar_light02=(function(_super){__extends(Effect_Oscar_light02,_super);function Effect_Oscar_light02(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_Oscar_light02}(Fx.Effect_Oscar_light02Struct));Fx.Effect_Oscar_light02=Effect_Oscar_light02})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_Oscar_particleStruct=(function(_super){__extends(Effect_Oscar_particleStruct,_super);function Effect_Oscar_particleStruct(){return _super.call(this)||this}Effect_Oscar_particleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_Oscar_particle"))};Effect_Oscar_particleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_Oscar_particleStruct.URL="ui://9l36y1kitbt4d2";Effect_Oscar_particleStruct.DependPackages=["Fx"];return Effect_Oscar_particleStruct}(fairygui.GComponent));Fx.Effect_Oscar_particleStruct=Effect_Oscar_particleStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_Oscar_particle=(function(_super){__extends(Effect_Oscar_particle,_super);function Effect_Oscar_particle(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_Oscar_particle}(Fx.Effect_Oscar_particleStruct));Fx.Effect_Oscar_particle=Effect_Oscar_particle})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_Oscar_particle2323Struct=(function(_super){__extends(Effect_Oscar_particle2323Struct,_super);function Effect_Oscar_particle2323Struct(){return _super.call(this)||this}Effect_Oscar_particle2323Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_Oscar_particle2323"))};Effect_Oscar_particle2323Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t88=this.getTransition("t88")};Effect_Oscar_particle2323Struct.URL="ui://9l36y1kiipn7dq";Effect_Oscar_particle2323Struct.DependPackages=["Fx"];return Effect_Oscar_particle2323Struct}(fairygui.GComponent));Fx.Effect_Oscar_particle2323Struct=Effect_Oscar_particle2323Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_Oscar_particle2323=(function(_super){__extends(Effect_Oscar_particle2323,_super);function Effect_Oscar_particle2323(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_Oscar_particle2323}(Fx.Effect_Oscar_particle2323Struct));Fx.Effect_Oscar_particle2323=Effect_Oscar_particle2323})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_pro002Struct=(function(_super){__extends(Effect_pro002Struct,_super);function Effect_pro002Struct(){return _super.call(this)||this}Effect_pro002Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_pro002"))};Effect_pro002Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t88999=this.getTransition("t88999")};Effect_pro002Struct.URL="ui://9l36y1kiqacwgk";Effect_pro002Struct.DependPackages=["Fx"];return Effect_pro002Struct}(fairygui.GComponent));Fx.Effect_pro002Struct=Effect_pro002Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_pro002=(function(_super){__extends(Effect_pro002,_super);function Effect_pro002(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_pro002}(Fx.Effect_pro002Struct));Fx.Effect_pro002=Effect_pro002})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_propagate_01Struct=(function(_super){__extends(Effect_propagate_01Struct,_super);function Effect_propagate_01Struct(){return _super.call(this)||this}Effect_propagate_01Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_propagate_01"))};Effect_propagate_01Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_propagate_01Struct.URL="ui://9l36y1kiqs6efm";Effect_propagate_01Struct.DependPackages=["Fx"];return Effect_propagate_01Struct}(fairygui.GComponent));Fx.Effect_propagate_01Struct=Effect_propagate_01Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_propagate_01=(function(_super){__extends(Effect_propagate_01,_super);function Effect_propagate_01(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_propagate_01}(Fx.Effect_propagate_01Struct));Fx.Effect_propagate_01=Effect_propagate_01})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_propagate_02Struct=(function(_super){__extends(Effect_propagate_02Struct,_super);function Effect_propagate_02Struct(){return _super.call(this)||this}Effect_propagate_02Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_propagate_02"))};Effect_propagate_02Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_propagate_02Struct.URL="ui://9l36y1kin176o2";Effect_propagate_02Struct.DependPackages=["Fx"];return Effect_propagate_02Struct}(fairygui.GComponent));Fx.Effect_propagate_02Struct=Effect_propagate_02Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_propagate_02=(function(_super){__extends(Effect_propagate_02,_super);function Effect_propagate_02(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_propagate_02}(Fx.Effect_propagate_02Struct));Fx.Effect_propagate_02=Effect_propagate_02})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_propagate_02_textStruct=(function(_super){__extends(Effect_propagate_02_textStruct,_super);function Effect_propagate_02_textStruct(){return _super.call(this)||this}Effect_propagate_02_textStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_propagate_02_text"))};Effect_propagate_02_textStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_propagate_02_textStruct.URL="ui://9l36y1ki8r1v5ts";Effect_propagate_02_textStruct.DependPackages=["Fx"];return Effect_propagate_02_textStruct}(fairygui.GComponent));Fx.Effect_propagate_02_textStruct=Effect_propagate_02_textStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_propagate_02_text=(function(_super){__extends(Effect_propagate_02_text,_super);function Effect_propagate_02_text(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_propagate_02_text}(Fx.Effect_propagate_02_textStruct));Fx.Effect_propagate_02_text=Effect_propagate_02_text})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_propagate_03Struct=(function(_super){__extends(Effect_propagate_03Struct,_super);function Effect_propagate_03Struct(){return _super.call(this)||this}Effect_propagate_03Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_propagate_03"))};Effect_propagate_03Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_propagate_03Struct.URL="ui://9l36y1kifftoo6";Effect_propagate_03Struct.DependPackages=["Fx"];return Effect_propagate_03Struct}(fairygui.GComponent));Fx.Effect_propagate_03Struct=Effect_propagate_03Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_propagate_03=(function(_super){__extends(Effect_propagate_03,_super);function Effect_propagate_03(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_propagate_03}(Fx.Effect_propagate_03Struct));Fx.Effect_propagate_03=Effect_propagate_03})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_rotate_lightStruct=(function(_super){__extends(Effect_rotate_lightStruct,_super);function Effect_rotate_lightStruct(){return _super.call(this)||this}Effect_rotate_lightStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_rotate_light"))};Effect_rotate_lightStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t078334=this.getTransition("t078334")};Effect_rotate_lightStruct.URL="ui://9l36y1kipbnqj2";Effect_rotate_lightStruct.DependPackages=["Fx"];return Effect_rotate_lightStruct}(fairygui.GComponent));Fx.Effect_rotate_lightStruct=Effect_rotate_lightStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_rotate_light=(function(_super){__extends(Effect_rotate_light,_super);function Effect_rotate_light(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_rotate_light}(Fx.Effect_rotate_lightStruct));Fx.Effect_rotate_light=Effect_rotate_light})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_show_0077Struct=(function(_super){__extends(Effect_show_0077Struct,_super);function Effect_show_0077Struct(){return _super.call(this)||this}Effect_show_0077Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_show_0077"))};Effect_show_0077Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_show_0077Struct.URL="ui://9l36y1kijikq5ue";Effect_show_0077Struct.DependPackages=["Fx"];return Effect_show_0077Struct}(fairygui.GComponent));Fx.Effect_show_0077Struct=Effect_show_0077Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_show_0077=(function(_super){__extends(Effect_show_0077,_super);function Effect_show_0077(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_show_0077}(Fx.Effect_show_0077Struct));Fx.Effect_show_0077=Effect_show_0077})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_show_stagelightStruct=(function(_super){__extends(Effect_show_stagelightStruct,_super);function Effect_show_stagelightStruct(){return _super.call(this)||this}Effect_show_stagelightStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_show_stagelight"))};Effect_show_stagelightStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_show_stagelightStruct.URL="ui://9l36y1ki8ukwom";Effect_show_stagelightStruct.DependPackages=["Fx"];return Effect_show_stagelightStruct}(fairygui.GComponent));Fx.Effect_show_stagelightStruct=Effect_show_stagelightStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_show_stagelight=(function(_super){__extends(Effect_show_stagelight,_super);function Effect_show_stagelight(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_show_stagelight}(Fx.Effect_show_stagelightStruct));Fx.Effect_show_stagelight=Effect_show_stagelight})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_simple_firework02Struct=(function(_super){__extends(Effect_simple_firework02Struct,_super);function Effect_simple_firework02Struct(){return _super.call(this)||this}Effect_simple_firework02Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_simple_firework02"))};Effect_simple_firework02Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_simple_firework02Struct.URL="ui://9l36y1ki10sh5to";Effect_simple_firework02Struct.DependPackages=["Fx"];return Effect_simple_firework02Struct}(fairygui.GComponent));Fx.Effect_simple_firework02Struct=Effect_simple_firework02Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_simple_firework02=(function(_super){__extends(Effect_simple_firework02,_super);function Effect_simple_firework02(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_simple_firework02}(Fx.Effect_simple_firework02Struct));Fx.Effect_simple_firework02=Effect_simple_firework02})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_starfly0222Struct=(function(_super){__extends(Effect_starfly0222Struct,_super);function Effect_starfly0222Struct(){return _super.call(this)||this}Effect_starfly0222Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_starfly0222"))};Effect_starfly0222Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t123333=this.getTransition("t123333")};Effect_starfly0222Struct.URL="ui://9l36y1kig8v8kh";Effect_starfly0222Struct.DependPackages=["Fx"];return Effect_starfly0222Struct}(fairygui.GComponent));Fx.Effect_starfly0222Struct=Effect_starfly0222Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_starfly0222=(function(_super){__extends(Effect_starfly0222,_super);function Effect_starfly0222(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_starfly0222}(Fx.Effect_starfly0222Struct));Fx.Effect_starfly0222=Effect_starfly0222})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_starfly0223Struct=(function(_super){__extends(Effect_starfly0223Struct,_super);function Effect_starfly0223Struct(){return _super.call(this)||this}Effect_starfly0223Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_starfly0223"))};Effect_starfly0223Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t7=this.getTransition("t7")};Effect_starfly0223Struct.URL="ui://9l36y1kig8v8kk";Effect_starfly0223Struct.DependPackages=["Fx"];return Effect_starfly0223Struct}(fairygui.GComponent));Fx.Effect_starfly0223Struct=Effect_starfly0223Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_starfly0223=(function(_super){__extends(Effect_starfly0223,_super);function Effect_starfly0223(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_starfly0223}(Fx.Effect_starfly0223Struct));Fx.Effect_starfly0223=Effect_starfly0223})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_starfly0224Struct=(function(_super){__extends(Effect_starfly0224Struct,_super);function Effect_starfly0224Struct(){return _super.call(this)||this}Effect_starfly0224Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_starfly0224"))};Effect_starfly0224Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t64343=this.getTransition("t64343")};Effect_starfly0224Struct.URL="ui://9l36y1kig8v8kl";Effect_starfly0224Struct.DependPackages=["Fx"];return Effect_starfly0224Struct}(fairygui.GComponent));Fx.Effect_starfly0224Struct=Effect_starfly0224Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_starfly0224=(function(_super){__extends(Effect_starfly0224,_super);function Effect_starfly0224(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_starfly0224}(Fx.Effect_starfly0224Struct));Fx.Effect_starfly0224=Effect_starfly0224})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_starfly0333Struct=(function(_super){__extends(Effect_starfly0333Struct,_super);function Effect_starfly0333Struct(){return _super.call(this)||this}Effect_starfly0333Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_starfly0333"))};Effect_starfly0333Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t2=this.getTransition("t2")};Effect_starfly0333Struct.URL="ui://9l36y1kig8v8kj";Effect_starfly0333Struct.DependPackages=["Fx"];return Effect_starfly0333Struct}(fairygui.GComponent));Fx.Effect_starfly0333Struct=Effect_starfly0333Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_starfly0333=(function(_super){__extends(Effect_starfly0333,_super);function Effect_starfly0333(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_starfly0333}(Fx.Effect_starfly0333Struct));Fx.Effect_starfly0333=Effect_starfly0333})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_story_unlockStruct=(function(_super){__extends(Effect_story_unlockStruct,_super);function Effect_story_unlockStruct(){return _super.call(this)||this}Effect_story_unlockStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_story_unlock"))};Effect_story_unlockStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Effect_story_unlockStruct.URL="ui://9l36y1kiz8b5io";Effect_story_unlockStruct.DependPackages=["Fx"];return Effect_story_unlockStruct}(fairygui.GComponent));Fx.Effect_story_unlockStruct=Effect_story_unlockStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_story_unlock=(function(_super){__extends(Effect_story_unlock,_super);function Effect_story_unlock(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_story_unlock}(Fx.Effect_story_unlockStruct));Fx.Effect_story_unlock=Effect_story_unlock})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_taillightStruct=(function(_super){__extends(Effect_taillightStruct,_super);function Effect_taillightStruct(){return _super.call(this)||this}Effect_taillightStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_taillight"))};Effect_taillightStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t2333=this.getTransition("t2333")};Effect_taillightStruct.URL="ui://9l36y1kil5u85tq";Effect_taillightStruct.DependPackages=["Fx"];return Effect_taillightStruct}(fairygui.GComponent));Fx.Effect_taillightStruct=Effect_taillightStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_taillight=(function(_super){__extends(Effect_taillight,_super);function Effect_taillight(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_taillight}(Fx.Effect_taillightStruct));Fx.Effect_taillight=Effect_taillight})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_upgrade_01Struct=(function(_super){__extends(Effect_upgrade_01Struct,_super);function Effect_upgrade_01Struct(){return _super.call(this)||this}Effect_upgrade_01Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","Effect_upgrade_01"))};Effect_upgrade_01Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_n7_dddd=(this.getChild("n7_dddd"));this.m_n8_dddd=(this.getChild("n8_dddd"));this.m_n9_dddd=(this.getChild("n9_dddd"));this.m_n10_dddd=(this.getChild("n10_dddd"));this.m_n11_dddd=(this.getChild("n11_dddd"));this.m_n26_dsdwd=(this.getChild("n26_dsdwd"));this.m_t501=this.getTransition("t501")};Effect_upgrade_01Struct.URL="ui://9l36y1ki85lbf3";Effect_upgrade_01Struct.DependPackages=["Fx"];return Effect_upgrade_01Struct}(fairygui.GComponent));Fx.Effect_upgrade_01Struct=Effect_upgrade_01Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Effect_upgrade_01=(function(_super){__extends(Effect_upgrade_01,_super);function Effect_upgrade_01(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_upgrade_01}(Fx.Effect_upgrade_01Struct));Fx.Effect_upgrade_01=Effect_upgrade_01})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Find_artistStruct=(function(_super){__extends(Find_artistStruct,_super);function Find_artistStruct(){return _super.call(this)||this}Find_artistStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","find_artist"))};Find_artistStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Find_artistStruct.URL="ui://9l36y1kib2tpp8";Find_artistStruct.DependPackages=["Fx"];return Find_artistStruct}(fairygui.GComponent));Fx.Find_artistStruct=Find_artistStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Find_artist=(function(_super){__extends(Find_artist,_super);function Find_artist(){return _super!==null&&_super.apply(this,arguments)||this}return Find_artist}(Fx.Find_artistStruct));Fx.Find_artist=Find_artist})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_level_upStruct=(function(_super){__extends(Fireworks_level_upStruct,_super);function Fireworks_level_upStruct(){return _super.call(this)||this}Fireworks_level_upStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","fireworks_level_up"))};Fireworks_level_upStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Effect_fireworks_n0=(this.getChild("Effect_fireworks_n0"));this.m_Effect_fireworks_n9=(this.getChild("Effect_fireworks_n9"));this.m_Effect_fireworks_n7=(this.getChild("Effect_fireworks_n7"));this.m_fireworks_11=this.getTransition("fireworks_11")};Fireworks_level_upStruct.URL="ui://9l36y1kip57y8p";Fireworks_level_upStruct.DependPackages=["Fx"];return Fireworks_level_upStruct}(fairygui.GComponent));Fx.Fireworks_level_upStruct=Fireworks_level_upStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_level_up=(function(_super){__extends(Fireworks_level_up,_super);function Fireworks_level_up(){return _super!==null&&_super.apply(this,arguments)||this}return Fireworks_level_up}(Fx.Fireworks_level_upStruct));Fx.Fireworks_level_up=Fireworks_level_up})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_level_up_002Struct=(function(_super){__extends(Fireworks_level_up_002Struct,_super);function Fireworks_level_up_002Struct(){return _super.call(this)||this}Fireworks_level_up_002Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","fireworks_level_up_002"))};Fireworks_level_up_002Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Effect_fireworks_n0=(this.getChild("Effect_fireworks_n0"));this.m_Effect_fireworks_n9=(this.getChild("Effect_fireworks_n9"));this.m_Effect_fireworks_n7=(this.getChild("Effect_fireworks_n7"));this.m_fireworks_11=this.getTransition("fireworks_11")};Fireworks_level_up_002Struct.URL="ui://9l36y1kilrr48y";Fireworks_level_up_002Struct.DependPackages=["Fx"];return Fireworks_level_up_002Struct}(fairygui.GComponent));Fx.Fireworks_level_up_002Struct=Fireworks_level_up_002Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_level_up_002=(function(_super){__extends(Fireworks_level_up_002,_super);function Fireworks_level_up_002(){return _super!==null&&_super.apply(this,arguments)||this}return Fireworks_level_up_002}(Fx.Fireworks_level_up_002Struct));Fx.Fireworks_level_up_002=Fireworks_level_up_002})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_spotlights0001Struct=(function(_super){__extends(Fireworks_spotlights0001Struct,_super);function Fireworks_spotlights0001Struct(){return _super.call(this)||this}Fireworks_spotlights0001Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","fireworks_spotlights0001"))};Fireworks_spotlights0001Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_fireworks_22=(this.getChild("fireworks_22"));this.m_fireworks_33=(this.getChild("fireworks_33"));this.m_fireworks_44=(this.getChild("fireworks_44"));this.m_fireworks_spotligts01=this.getTransition("fireworks_spotligts01")};Fireworks_spotlights0001Struct.URL="ui://9l36y1kiflbk6e";Fireworks_spotlights0001Struct.DependPackages=["Fx"];return Fireworks_spotlights0001Struct}(fairygui.GComponent));Fx.Fireworks_spotlights0001Struct=Fireworks_spotlights0001Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_spotlights0001=(function(_super){__extends(Fireworks_spotlights0001,_super);function Fireworks_spotlights0001(){return _super!==null&&_super.apply(this,arguments)||this}return Fireworks_spotlights0001}(Fx.Fireworks_spotlights0001Struct));Fx.Fireworks_spotlights0001=Fireworks_spotlights0001})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_spotlights0002Struct=(function(_super){__extends(Fireworks_spotlights0002Struct,_super);function Fireworks_spotlights0002Struct(){return _super.call(this)||this}Fireworks_spotlights0002Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","fireworks_spotlights0002"))};Fireworks_spotlights0002Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_fireworks_spotlights23=(this.getChild("fireworks_spotlights23"));this.m_fireworks_spotlights0444=(this.getChild("fireworks_spotlights0444"));this.m_fireworks_spotlights0222=this.getTransition("fireworks_spotlights0222")};Fireworks_spotlights0002Struct.URL="ui://9l36y1kiflbk6f";Fireworks_spotlights0002Struct.DependPackages=["Fx"];return Fireworks_spotlights0002Struct}(fairygui.GComponent));Fx.Fireworks_spotlights0002Struct=Fireworks_spotlights0002Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_spotlights0002=(function(_super){__extends(Fireworks_spotlights0002,_super);function Fireworks_spotlights0002(){return _super!==null&&_super.apply(this,arguments)||this}return Fireworks_spotlights0002}(Fx.Fireworks_spotlights0002Struct));Fx.Fireworks_spotlights0002=Fireworks_spotlights0002})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_spotlights0003Struct=(function(_super){__extends(Fireworks_spotlights0003Struct,_super);function Fireworks_spotlights0003Struct(){return _super.call(this)||this}Fireworks_spotlights0003Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","fireworks_spotlights0003"))};Fireworks_spotlights0003Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_fireworks_nn23=(this.getChild("fireworks_nn23"));this.m_fireworks_111=this.getTransition("fireworks_111")};Fireworks_spotlights0003Struct.URL="ui://9l36y1kiflbk6i";Fireworks_spotlights0003Struct.DependPackages=["Fx"];return Fireworks_spotlights0003Struct}(fairygui.GComponent));Fx.Fireworks_spotlights0003Struct=Fireworks_spotlights0003Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_spotlights0003=(function(_super){__extends(Fireworks_spotlights0003,_super);function Fireworks_spotlights0003(){return _super!==null&&_super.apply(this,arguments)||this}return Fireworks_spotlights0003}(Fx.Fireworks_spotlights0003Struct));Fx.Fireworks_spotlights0003=Fireworks_spotlights0003})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_spotlights0004Struct=(function(_super){__extends(Fireworks_spotlights0004Struct,_super);function Fireworks_spotlights0004Struct(){return _super.call(this)||this}Fireworks_spotlights0004Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","fireworks_spotlights0004"))};Fireworks_spotlights0004Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_fireworks_spotlights0005=this.getTransition("fireworks_spotlights0005")};Fireworks_spotlights0004Struct.URL="ui://9l36y1kiflbk6j";Fireworks_spotlights0004Struct.DependPackages=["Fx"];return Fireworks_spotlights0004Struct}(fairygui.GComponent));Fx.Fireworks_spotlights0004Struct=Fireworks_spotlights0004Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_spotlights0004=(function(_super){__extends(Fireworks_spotlights0004,_super);function Fireworks_spotlights0004(){return _super!==null&&_super.apply(this,arguments)||this}return Fireworks_spotlights0004}(Fx.Fireworks_spotlights0004Struct));Fx.Fireworks_spotlights0004=Fireworks_spotlights0004})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_spotlights0005Struct=(function(_super){__extends(Fireworks_spotlights0005Struct,_super);function Fireworks_spotlights0005Struct(){return _super.call(this)||this}Fireworks_spotlights0005Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","fireworks_spotlights0005"))};Fireworks_spotlights0005Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Fireworks_spotlights0005Struct.URL="ui://9l36y1ki10sh5th";Fireworks_spotlights0005Struct.DependPackages=["Fx"];return Fireworks_spotlights0005Struct}(fairygui.GComponent));Fx.Fireworks_spotlights0005Struct=Fireworks_spotlights0005Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Fireworks_spotlights0005=(function(_super){__extends(Fireworks_spotlights0005,_super);function Fireworks_spotlights0005(){return _super!==null&&_super.apply(this,arguments)||this}return Fireworks_spotlights0005}(Fx.Fireworks_spotlights0005Struct));Fx.Fireworks_spotlights0005=Fireworks_spotlights0005})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var HaloStruct=(function(_super){__extends(HaloStruct,_super);function HaloStruct(){return _super.call(this)||this}HaloStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","halo"))};HaloStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};HaloStruct.URL="ui://9l36y1kiijjhi6";HaloStruct.DependPackages=["Fx"];return HaloStruct}(fairygui.GComponent));Fx.HaloStruct=HaloStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Halo=(function(_super){__extends(Halo,_super);function Halo(){return _super!==null&&_super.apply(this,arguments)||this}return Halo}(Fx.HaloStruct));Fx.Halo=Halo})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Icon_allneedStruct=(function(_super){__extends(Icon_allneedStruct,_super);function Icon_allneedStruct(){return _super.call(this)||this}Icon_allneedStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","icon_allneed"))};Icon_allneedStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Icon_allneedStruct.URL="ui://9l36y1kipldw55uw";Icon_allneedStruct.DependPackages=["Fx"];return Icon_allneedStruct}(fairygui.GComponent));Fx.Icon_allneedStruct=Icon_allneedStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Icon_allneed=(function(_super){__extends(Icon_allneed,_super);function Icon_allneed(){return _super!==null&&_super.apply(this,arguments)||this}return Icon_allneed}(Fx.Icon_allneedStruct));Fx.Icon_allneed=Icon_allneed})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Level_allneed_cameralightStruct=(function(_super){__extends(Level_allneed_cameralightStruct,_super);function Level_allneed_cameralightStruct(){return _super.call(this)||this}Level_allneed_cameralightStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","level_allneed_cameralight"))};Level_allneed_cameralightStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Level_allneed_cameralightStruct.URL="ui://9l36y1kir7woqu";Level_allneed_cameralightStruct.DependPackages=["Fx"];return Level_allneed_cameralightStruct}(fairygui.GComponent));Fx.Level_allneed_cameralightStruct=Level_allneed_cameralightStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Level_allneed_cameralight=(function(_super){__extends(Level_allneed_cameralight,_super);function Level_allneed_cameralight(){return _super!==null&&_super.apply(this,arguments)||this}return Level_allneed_cameralight}(Fx.Level_allneed_cameralightStruct));Fx.Level_allneed_cameralight=Level_allneed_cameralight})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var ManagerOrderNeedItemStruct=(function(_super){__extends(ManagerOrderNeedItemStruct,_super);function ManagerOrderNeedItemStruct(){return _super.call(this)||this}ManagerOrderNeedItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","ManagerOrderNeedItem"))};ManagerOrderNeedItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_complete=this.getController("complete");this.m_canComplete=this.getController("canComplete");this.m_lv=(this.getChild("lv"));this.m_icon=(this.getChild("icon"));this.m_head=(this.getChild("head"));this.m_t0=this.getTransition("t0")};ManagerOrderNeedItemStruct.URL="ui://9l36y1kio7trng";ManagerOrderNeedItemStruct.DependPackages=["Fx","Common"];return ManagerOrderNeedItemStruct}(fairygui.GButton));Fx.ManagerOrderNeedItemStruct=ManagerOrderNeedItemStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var ManagerOrderNeedItem=(function(_super){__extends(ManagerOrderNeedItem,_super);function ManagerOrderNeedItem(){return _super!==null&&_super.apply(this,arguments)||this}return ManagerOrderNeedItem}(Fx.ManagerOrderNeedItemStruct));Fx.ManagerOrderNeedItem=ManagerOrderNeedItem})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var OscarAnim_022Struct=(function(_super){__extends(OscarAnim_022Struct,_super);function OscarAnim_022Struct(){return _super.call(this)||this}OscarAnim_022Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","OscarAnim_022"))};OscarAnim_022Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};OscarAnim_022Struct.URL="ui://9l36y1kik14co7";OscarAnim_022Struct.DependPackages=["Fx"];return OscarAnim_022Struct}(fairygui.GComponent));Fx.OscarAnim_022Struct=OscarAnim_022Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var OscarAnim_022=(function(_super){__extends(OscarAnim_022,_super);function OscarAnim_022(){return _super!==null&&_super.apply(this,arguments)||this}return OscarAnim_022}(Fx.OscarAnim_022Struct));Fx.OscarAnim_022=OscarAnim_022})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var ParticleStruct=(function(_super){__extends(ParticleStruct,_super);function ParticleStruct(){return _super.call(this)||this}ParticleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","particle"))};ParticleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_particle_11=this.getTransition("particle_11")};ParticleStruct.URL="ui://9l36y1kipx9z92";ParticleStruct.DependPackages=["Fx"];return ParticleStruct}(fairygui.GComponent));Fx.ParticleStruct=ParticleStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Particle=(function(_super){__extends(Particle,_super);function Particle(){return _super!==null&&_super.apply(this,arguments)||this}return Particle}(Fx.ParticleStruct));Fx.Particle=Particle})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Particle_01Struct=(function(_super){__extends(Particle_01Struct,_super);function Particle_01Struct(){return _super.call(this)||this}Particle_01Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","particle_01"))};Particle_01Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0_particle11333=this.getTransition("t0_particle11333")};Particle_01Struct.URL="ui://9l36y1kimhuwbr";Particle_01Struct.DependPackages=["Fx"];return Particle_01Struct}(fairygui.GComponent));Fx.Particle_01Struct=Particle_01Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Particle_01=(function(_super){__extends(Particle_01,_super);function Particle_01(){return _super!==null&&_super.apply(this,arguments)||this}return Particle_01}(Fx.Particle_01Struct));Fx.Particle_01=Particle_01})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Particle_02Struct=(function(_super){__extends(Particle_02Struct,_super);function Particle_02Struct(){return _super.call(this)||this}Particle_02Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","particle_02"))};Particle_02Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_pp_particle=this.getTransition("pp_particle")};Particle_02Struct.URL="ui://9l36y1kimhuwbx";Particle_02Struct.DependPackages=["Fx"];return Particle_02Struct}(fairygui.GComponent));Fx.Particle_02Struct=Particle_02Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Particle_02=(function(_super){__extends(Particle_02,_super);function Particle_02(){return _super!==null&&_super.apply(this,arguments)||this}return Particle_02}(Fx.Particle_02Struct));Fx.Particle_02=Particle_02})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Particle_02333Struct=(function(_super){__extends(Particle_02333Struct,_super);function Particle_02333Struct(){return _super.call(this)||this}Particle_02333Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","particle_02333"))};Particle_02333Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_pp_particle=this.getTransition("pp_particle")};Particle_02333Struct.URL="ui://9l36y1kifaz9dt";Particle_02333Struct.DependPackages=["Fx"];return Particle_02333Struct}(fairygui.GComponent));Fx.Particle_02333Struct=Particle_02333Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Particle_02333=(function(_super){__extends(Particle_02333,_super);function Particle_02333(){return _super!==null&&_super.apply(this,arguments)||this}return Particle_02333}(Fx.Particle_02333Struct));Fx.Particle_02333=Particle_02333})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Particle_03Struct=(function(_super){__extends(Particle_03Struct,_super);function Particle_03Struct(){return _super.call(this)||this}Particle_03Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","particle_03"))};Particle_03Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_pp_particle=this.getTransition("pp_particle")};Particle_03Struct.URL="ui://9l36y1kieb1rbz";Particle_03Struct.DependPackages=["Fx"];return Particle_03Struct}(fairygui.GComponent));Fx.Particle_03Struct=Particle_03Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Particle_03=(function(_super){__extends(Particle_03,_super);function Particle_03(){return _super!==null&&_super.apply(this,arguments)||this}return Particle_03}(Fx.Particle_03Struct));Fx.Particle_03=Particle_03})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Particle_04Struct=(function(_super){__extends(Particle_04Struct,_super);function Particle_04Struct(){return _super.call(this)||this}Particle_04Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","particle_04"))};Particle_04Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_0001_top=(this.getChild("0001_top"));this.m_t0_particle1233=this.getTransition("t0_particle1233")};Particle_04Struct.URL="ui://9l36y1kieb1rc0";Particle_04Struct.DependPackages=["Fx"];return Particle_04Struct}(fairygui.GComponent));Fx.Particle_04Struct=Particle_04Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Particle_04=(function(_super){__extends(Particle_04,_super);function Particle_04(){return _super!==null&&_super.apply(this,arguments)||this}return Particle_04}(Fx.Particle_04Struct));Fx.Particle_04=Particle_04})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Pro_dropStruct=(function(_super){__extends(Pro_dropStruct,_super);function Pro_dropStruct(){return _super.call(this)||this}Pro_dropStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","pro_drop"))};Pro_dropStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t1=this.getTransition("t1")};Pro_dropStruct.URL="ui://9l36y1kin57rgy";Pro_dropStruct.DependPackages=["Fx"];return Pro_dropStruct}(fairygui.GComponent));Fx.Pro_dropStruct=Pro_dropStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Pro_drop=(function(_super){__extends(Pro_drop,_super);function Pro_drop(){return _super!==null&&_super.apply(this,arguments)||this}return Pro_drop}(Fx.Pro_dropStruct));Fx.Pro_drop=Pro_drop})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Pro_drop33Struct=(function(_super){__extends(Pro_drop33Struct,_super);function Pro_drop33Struct(){return _super.call(this)||this}Pro_drop33Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","pro_drop33"))};Pro_drop33Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t1=this.getTransition("t1")};Pro_drop33Struct.URL="ui://9l36y1ki7jnc5tr";Pro_drop33Struct.DependPackages=["Fx"];return Pro_drop33Struct}(fairygui.GComponent));Fx.Pro_drop33Struct=Pro_drop33Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Pro_drop33=(function(_super){__extends(Pro_drop33,_super);function Pro_drop33(){return _super!==null&&_super.apply(this,arguments)||this}return Pro_drop33}(Fx.Pro_drop33Struct));Fx.Pro_drop33=Pro_drop33})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Smoke003Struct=(function(_super){__extends(Smoke003Struct,_super);function Smoke003Struct(){return _super.call(this)||this}Smoke003Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","smoke003"))};Smoke003Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Smoke003Struct.URL="ui://9l36y1kiweh5cg";Smoke003Struct.DependPackages=["Fx"];return Smoke003Struct}(fairygui.GComponent));Fx.Smoke003Struct=Smoke003Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Smoke003=(function(_super){__extends(Smoke003,_super);function Smoke003(){return _super!==null&&_super.apply(this,arguments)||this}return Smoke003}(Fx.Smoke003Struct));Fx.Smoke003=Smoke003})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Starboom_allneed_reviseStruct=(function(_super){__extends(Starboom_allneed_reviseStruct,_super);function Starboom_allneed_reviseStruct(){return _super.call(this)||this}Starboom_allneed_reviseStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","starboom_allneed_revise"))};Starboom_allneed_reviseStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_fireworks_266=(this.getChild("fireworks_266"));this.m_fireworks_n22=(this.getChild("fireworks_n22"));this.m_fireworks_n200=(this.getChild("fireworks_n200"));this.m_Effect_fireworks_n16=(this.getChild("Effect_fireworks_n16"));this.m_Effect_fireworks_n2=(this.getChild("Effect_fireworks_n2"));this.m_Effect_fireworks_n17=(this.getChild("Effect_fireworks_n17"));this.m_Effect_fireworks_n15=(this.getChild("Effect_fireworks_n15"));this.m_Effect_fireworks_n3=(this.getChild("Effect_fireworks_n3"));this.m_Effect_fireworks_n4=(this.getChild("Effect_fireworks_n4"));this.m_Effect_fireworks_n5=(this.getChild("Effect_fireworks_n5"));this.m_Effect_fireworks_n6=(this.getChild("Effect_fireworks_n6"));this.m_Effect_fireworks_n7=(this.getChild("Effect_fireworks_n7"));this.m_Effect_fireworks_n8=(this.getChild("Effect_fireworks_n8"));this.m_Effect_fireworks_n10=(this.getChild("Effect_fireworks_n10"));this.m_Effect_fireworks_n11=(this.getChild("Effect_fireworks_n11"));this.m_Effect_fireworks_n12=(this.getChild("Effect_fireworks_n12"));this.m_Effect_fireworks_n13=(this.getChild("Effect_fireworks_n13"));this.m_fireworks_233=(this.getChild("fireworks_233"));this.m_fireworks_n211=(this.getChild("fireworks_n211"));this.m_fireworks_n199=(this.getChild("fireworks_n199"));this.m_fireworks_n188=(this.getChild("fireworks_n188"));this.m_boom_allneed=this.getTransition("boom_allneed")};Starboom_allneed_reviseStruct.URL="ui://9l36y1kituvytd";Starboom_allneed_reviseStruct.DependPackages=["Fx"];return Starboom_allneed_reviseStruct}(fairygui.GComponent));Fx.Starboom_allneed_reviseStruct=Starboom_allneed_reviseStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Starboom_allneed_revise=(function(_super){__extends(Starboom_allneed_revise,_super);function Starboom_allneed_revise(){return _super!==null&&_super.apply(this,arguments)||this}return Starboom_allneed_revise}(Fx.Starboom_allneed_reviseStruct));Fx.Starboom_allneed_revise=Starboom_allneed_revise})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Starboom_blueStruct=(function(_super){__extends(Starboom_blueStruct,_super);function Starboom_blueStruct(){return _super.call(this)||this}Starboom_blueStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","starboom_blue"))};Starboom_blueStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0755=this.getTransition("t0755")};Starboom_blueStruct.URL="ui://9l36y1kic49im0";Starboom_blueStruct.DependPackages=["Fx"];return Starboom_blueStruct}(fairygui.GComponent));Fx.Starboom_blueStruct=Starboom_blueStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Starboom_blue=(function(_super){__extends(Starboom_blue,_super);function Starboom_blue(){return _super!==null&&_super.apply(this,arguments)||this}return Starboom_blue}(Fx.Starboom_blueStruct));Fx.Starboom_blue=Starboom_blue})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var StarflyStruct=(function(_super){__extends(StarflyStruct,_super);function StarflyStruct(){return _super.call(this)||this}StarflyStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","starfly"))};StarflyStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t1=this.getTransition("t1")};StarflyStruct.URL="ui://9l36y1kid3aj5k";StarflyStruct.DependPackages=["Fx"];return StarflyStruct}(fairygui.GComponent));Fx.StarflyStruct=StarflyStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Starfly=(function(_super){__extends(Starfly,_super);function Starfly(){return _super!==null&&_super.apply(this,arguments)||this}return Starfly}(Fx.StarflyStruct));Fx.Starfly=Starfly})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var StarshanshanStruct=(function(_super){__extends(StarshanshanStruct,_super);function StarshanshanStruct(){return _super.call(this)||this}StarshanshanStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","starshanshan"))};StarshanshanStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_boom02=this.getTransition("boom02")};StarshanshanStruct.URL="ui://9l36y1kis3306a";StarshanshanStruct.DependPackages=["Fx"];return StarshanshanStruct}(fairygui.GComponent));Fx.StarshanshanStruct=StarshanshanStruct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var Starshanshan=(function(_super){__extends(Starshanshan,_super);function Starshanshan(){return _super!==null&&_super.apply(this,arguments)||this}return Starshanshan}(Fx.StarshanshanStruct));Fx.Starshanshan=Starshanshan})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var TrailerStar1Struct=(function(_super){__extends(TrailerStar1Struct,_super);function TrailerStar1Struct(){return _super.call(this)||this}TrailerStar1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","TrailerStar1"))};TrailerStar1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};TrailerStar1Struct.URL="ui://9l36y1kihhqei1";TrailerStar1Struct.DependPackages=["Fx"];return TrailerStar1Struct}(fairygui.GComponent));Fx.TrailerStar1Struct=TrailerStar1Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var TrailerStar1=(function(_super){__extends(TrailerStar1,_super);function TrailerStar1(){return _super!==null&&_super.apply(this,arguments)||this}return TrailerStar1}(Fx.TrailerStar1Struct));Fx.TrailerStar1=TrailerStar1})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var TrailerStar2Struct=(function(_super){__extends(TrailerStar2Struct,_super);function TrailerStar2Struct(){return _super.call(this)||this}TrailerStar2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","TrailerStar2"))};TrailerStar2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};TrailerStar2Struct.URL="ui://9l36y1kihhqei2";TrailerStar2Struct.DependPackages=["Fx"];return TrailerStar2Struct}(fairygui.GComponent));Fx.TrailerStar2Struct=TrailerStar2Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var TrailerStar2=(function(_super){__extends(TrailerStar2,_super);function TrailerStar2(){return _super!==null&&_super.apply(this,arguments)||this}return TrailerStar2}(Fx.TrailerStar2Struct));Fx.TrailerStar2=TrailerStar2})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var TrailerStar3Struct=(function(_super){__extends(TrailerStar3Struct,_super);function TrailerStar3Struct(){return _super.call(this)||this}TrailerStar3Struct.createInstance=function(){return(fairygui.UIPackage.createObject("Fx","TrailerStar3"))};TrailerStar3Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};TrailerStar3Struct.URL="ui://9l36y1kihhqei3";TrailerStar3Struct.DependPackages=["Fx"];return TrailerStar3Struct}(fairygui.GComponent));Fx.TrailerStar3Struct=TrailerStar3Struct})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Fx;(function(Fx){var TrailerStar3=(function(_super){__extends(TrailerStar3,_super);function TrailerStar3(){return _super!==null&&_super.apply(this,arguments)||this}return TrailerStar3}(Fx.TrailerStar3Struct));Fx.TrailerStar3=TrailerStar3})(Fx=fgui.Fx||(fgui.Fx={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var ButtonCornerStruct=(function(_super){__extends(ButtonCornerStruct,_super);function ButtonCornerStruct(){return _super.call(this)||this}ButtonCornerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","ButtonCorner"))};ButtonCornerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};ButtonCornerStruct.URL="ui://ujw583ypfv0td";ButtonCornerStruct.DependPackages=["GM"];return ButtonCornerStruct}(fairygui.GButton));GM.ButtonCornerStruct=ButtonCornerStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var ButtonCorner=(function(_super){__extends(ButtonCorner,_super);function ButtonCorner(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonCorner}(GM.ButtonCornerStruct));GM.ButtonCorner=ButtonCorner})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var ButtonRectStruct=(function(_super){__extends(ButtonRectStruct,_super);function ButtonRectStruct(){return _super.call(this)||this}ButtonRectStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","ButtonRect"))};ButtonRectStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};ButtonRectStruct.URL="ui://ujw583ypc3i0h";ButtonRectStruct.DependPackages=["GM"];return ButtonRectStruct}(fairygui.GButton));GM.ButtonRectStruct=ButtonRectStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var ButtonRect=(function(_super){__extends(ButtonRect,_super);function ButtonRect(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonRect}(GM.ButtonRectStruct));GM.ButtonRect=ButtonRect})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var CheckboxStruct=(function(_super){__extends(CheckboxStruct,_super);function CheckboxStruct(){return _super.call(this)||this}CheckboxStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","Checkbox"))};CheckboxStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};CheckboxStruct.URL="ui://ujw583ypnb4ea";CheckboxStruct.DependPackages=["GM"];return CheckboxStruct}(fairygui.GButton));GM.CheckboxStruct=CheckboxStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var Checkbox=(function(_super){__extends(Checkbox,_super);function Checkbox(){return _super!==null&&_super.apply(this,arguments)||this}return Checkbox}(GM.CheckboxStruct));GM.Checkbox=Checkbox})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMAddItemStruct=(function(_super){__extends(GMAddItemStruct,_super);function GMAddItemStruct(){return _super.call(this)||this}GMAddItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMAddItem"))};GMAddItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_id=(this.getChild("id"));this.m_title=(this.getChild("title"));this.m_describe=(this.getChild("describe"));this.m_icon=(this.getChild("icon"));this.m_num=(this.getChild("num"));this.m_button=(this.getChild("button"));this.m_numberInput=(this.getChild("numberInput"))};GMAddItemStruct.URL="ui://ujw583ypfv0tc";GMAddItemStruct.DependPackages=["GM"];return GMAddItemStruct}(fairygui.GComponent));GM.GMAddItemStruct=GMAddItemStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMAddItem=(function(_super){__extends(GMAddItem,_super);function GMAddItem(){return _super!==null&&_super.apply(this,arguments)||this}GMAddItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button.onClick(this,this.onClickAddButton);this.m_num.onClick(this,this.onClickNum);this.m_numberInput.value=10000};GMAddItem.prototype.onClickNum=function(){this.m_numberInput.value=this.itemData.itemNum*-1};GMAddItem.prototype.onClickAddButton=function(){var _this=this;switch(this.itemData.itemId){case Proto.SE.EItemId.fans:Game.protosender.test.AddFans(this.m_numberInput.value);break;case 8:Game.protosender.test.AddExpect(this.m_numberInput.value);break;default:Game.protosender.test.AddItem(this.itemData.itemId,this.m_numberInput.value);break}setTimeout(function(){_this.refreshItemNum()},100)};GMAddItem.prototype.setItemData=function(itemData){this.itemData=itemData;this.m_id.text=itemData.itemId+"";this.m_title.text=itemData.itemName;this.m_describe.text=itemData.itemDes;this.m_num.text=itemData.itemNum+"";this.m_icon.url=itemData.itemIconUrl};GMAddItem.prototype.refreshItemNum=function(){if(this.itemData){this.m_num.text=this.itemData.itemNum+""}};GMAddItem.prototype.onTabShow=function(){this.refreshItemNum()};GMAddItem.prototype.onWindowShow=function(){this.refreshItemNum()};return GMAddItem}(GM.GMAddItemStruct));GM.GMAddItem=GMAddItem})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMAddPageStruct=(function(_super){__extends(GMAddPageStruct,_super);function GMAddPageStruct(){return _super.call(this)||this}GMAddPageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMAddPage"))};GMAddPageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_popupButton=(this.getChild("popupButton"));this.m_filterInput=(this.getChild("filterInput"));this.m_filterCheckbox=(this.getChild("filterCheckbox"));this.m_listTopButton=(this.getChild("listTopButton"));this.m_listBottomButton=(this.getChild("listBottomButton"))};GMAddPageStruct.URL="ui://ujw583ypfbyi9";GMAddPageStruct.DependPackages=["GM"];return GMAddPageStruct}(fairygui.GComponent));GM.GMAddPageStruct=GMAddPageStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMAddPage=(function(_super){__extends(GMAddPage,_super);function GMAddPage(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.listData=[];_this.filterData=[];_this.useListData=[];return _this}GMAddPage.prototype.onWindowInited=function(){this.popupMenu=fgui.GM.GMPopupMenu.createInstance();this.popupMenu.mainButton=this.m_popupButton;this.popupMenu.sOnSelect.add(this.onSelectePopupItem,this);this.popupMenu.setListData(Games.GMAddType.list);this.popupMenu.center();this.m_popupButton.onClick(this,this.onClickPopupButton);this.selectPopupItem(Games.GMAddType.Item);this.m_listTopButton.onClick(this,this.onClickListTopButton);this.m_listBottomButton.onClick(this,this.onClickListBottomButton);this.m_filterInput.m_title.on(laya.events.Event.INPUT,this,this.onFilterInput);this.m_filterCheckbox.onClick(this,this.onClickFilterCheckbox)};Object.defineProperty(GMAddPage.prototype,"isFilter",{get:function(){return this.m_filterCheckbox.selected},set:function(val){this.m_filterCheckbox.selected=val},enumerable:true,configurable:true});Object.defineProperty(GMAddPage.prototype,"isUseFilter",{get:function(){return this.isFilter&&isNullOrEmpty(this.m_filterInput.m_title.text.trim())},enumerable:true,configurable:true});GMAddPage.prototype.onClickFilterCheckbox=function(){var _this=this;setTimeout(function(){if(_this.isUseFilter){_this.onFilterInput()}else{_this.noFilter()}},100)};GMAddPage.prototype.onFilterInput=function(){if(!this.isFilter){return}var txt=this.m_filterInput.m_title.text.trim();if(isNullOrEmpty(txt)){this.noFilter();return}var mathList=[];if(txt.startsWith("id:")){txt=txt.replace("id:","");var arr=txt.split(/[, ;]/);for(var i=0;i<arr.length;i++){arr[i]=arr[i].trim()}var items=Game.config.item.getConfigList();for(var i=0;i<items.length;i++){for(var j=0;j<arr.length;j++){if(items[i].id.toString()==arr[j]){mathList.push(items[i]);break}}}}else{if(txt.startsWith("type:")){txt=txt.replace("type:","");var arr=txt.split(/[, ;]/);for(var i=0;i<arr.length;i++){arr[i]=arr[i].trim()}var items=Game.config.item.getConfigList();for(var i=0;i<items.length;i++){for(var j=0;j<arr.length;j++){if(items[i].type.toString()==arr[j]){mathList.push(items[i]);break}}}}else{var arr=txt.split(/[, ;]/);var items=Game.config.item.getConfigList();for(var i=0;i<items.length;i++){for(var j=0;j<arr.length;j++){if(items[i].name.indexOf(arr[j])!=-1||items[i].id.toString().indexOf(arr[j])!=-1){mathList.push(items[i]);break}}}}}this.setFilterData(mathList)};GMAddPage.prototype.noFilter=function(){this.setListData(this.listData)};GMAddPage.prototype.onClickPopupButton=function(){fairygui.GRoot.inst.showPopup(this.popupMenu,this.m_popupButton,true)};GMAddPage.prototype.onSelectePopupItem=function(index){console.log("onSelectePopupItem "+index);this.currentPopupIndex=index;this.setItemPopup()};GMAddPage.prototype.selectPopupItem=function(index){this.popupMenu.setSelect(index)};GMAddPage.prototype.onTabShow=function(){};GMAddPage.prototype.onTabHide=function(){};GMAddPage.prototype.onClickListTopButton=function(){this.m_list.scrollPane.scrollTop()};GMAddPage.prototype.onClickListBottomButton=function(){this.m_list.scrollPane.scrollBottom()};GMAddPage.prototype.getData=function(index){return this.useListData[index]};GMAddPage.prototype.setItemPopup=function(){var items=[];var itemTypes=Games.GMAddType.getItemTypes(this.currentPopupIndex);if(!itemTypes||itemTypes.length==0){items=Game.config.item.getConfigList()}else{items=(_a=Game.config.item).getConfigsByType.apply(_a,itemTypes)}this.setListData(items);var _a};GMAddPage.prototype.setListData=function(items){this.listData=items;this.refreshList(items)};GMAddPage.prototype.setFilterData=function(items){this.filterData=items;this.refreshList(items)};GMAddPage.prototype.refreshList=function(items){this.useListData=items;var list=this.m_list;list.setVirtual();list.setVirtualAndLoop();if(!list.itemRenderer){list.itemRenderer=Handler.create(this,this.renderListItem,null,false)}list.numItems=items.length};GMAddPage.prototype.renderListItem=function(index,item){var data=this.getData(index);var itemData=Game.moduleModel.item.getItem(data.id);item.setItemData(itemData)};return GMAddPage}(GM.GMAddPageStruct));GM.GMAddPage=GMAddPage})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMCmdItemStruct=(function(_super){__extends(GMCmdItemStruct,_super);function GMCmdItemStruct(){return _super.call(this)||this}GMCmdItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMCmdItem"))};GMCmdItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_name=(this.getChild("name"));this.m_button=(this.getChild("button"))};GMCmdItemStruct.URL="ui://ujw583ypket7n";GMCmdItemStruct.DependPackages=["GM"];return GMCmdItemStruct}(fairygui.GComponent));GM.GMCmdItemStruct=GMCmdItemStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMCmdItem=(function(_super){__extends(GMCmdItem,_super);function GMCmdItem(){return _super!==null&&_super.apply(this,arguments)||this}GMCmdItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button.onClick(this,this.onClickButton)};GMCmdItem.prototype.setItemData=function(itemData){this.itemData=itemData;this.m_title.text=itemData.datatxt;this.m_name.text=itemData.title};GMCmdItem.prototype.onClickButton=function(){try{var json=JSON.parse(this.m_title.text);this.itemData.data=json;this.itemData.datatxt=this.m_title.text}catch(error){console.error(error)}Games.GM.sendCmd(this.itemData.name,this.itemData,this.cmdPage.selectSubMenu!=Games.GMCmdSubMenuType.HISTORY)};return GMCmdItem}(GM.GMCmdItemStruct));GM.GMCmdItem=GMCmdItem})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMCmdPageStruct=(function(_super){__extends(GMCmdPageStruct,_super);function GMCmdPageStruct(){return _super.call(this)||this}GMCmdPageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMCmdPage"))};GMCmdPageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_subMenuBar=(this.getChild("subMenuBar"));this.m_input=(this.getChild("input"));this.m_sendButton=(this.getChild("sendButton"));this.m_clearButton=(this.getChild("clearButton"))};GMCmdPageStruct.URL="ui://ujw583ypket7k";GMCmdPageStruct.DependPackages=["GM"];return GMCmdPageStruct}(fairygui.GComponent));GM.GMCmdPageStruct=GMCmdPageStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMCmdPage=(function(_super){__extends(GMCmdPage,_super);function GMCmdPage(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dataList=[];return _this}GMCmdPage.prototype.onWindowInited=function(){this.m_subMenuBar.setListData(Games.GMCmdSubMenuType.list);this.m_subMenuBar.sOnSelect.add(this.onClickSubMenu,this);this.m_subMenuBar.select=Games.GMCmdSubMenuType.Server;this.m_sendButton.onClick(this,this.onClickSend);this.m_clearButton.onClick(this,this.onClickClear);Games.GM.historCmd.read();Laya.loader.load(Games.GM.serverCmdUrl,Handler.create(this,this.onLoadJson,[Games.GM.serverCmdUrl]));Laya.loader.load(Games.GM.clientCmdUrl,Handler.create(this,this.onLoadJson,[Games.GM.clientCmdUrl]))};Object.defineProperty(GMCmdPage.prototype,"inputTxt",{get:function(){return this.m_input.m_title.text},set:function(value){this.m_input.m_title.text=value},enumerable:true,configurable:true});Object.defineProperty(GMCmdPage.prototype,"selectSubMenu",{get:function(){return this.m_subMenuBar.select},enumerable:true,configurable:true});GMCmdPage.prototype.onLoadJson=function(url){var cmdList=Laya.loader.getRes(url);if(!cmdList){return}cmdList=isString(cmdList)?JSON.parse(cmdList):cmdList;switch(url){case Games.GM.serverCmdUrl:Games.GM.serverCmd.setList(cmdList,false);break;case Games.GM.clientCmdUrl:Games.GM.clientCmd.setList(cmdList,true);break}this.refreshList()};GMCmdPage.prototype.onClickSubMenu=function(menu){var _this=this;this.m_clearButton.visible=menu==Games.GMCmdSubMenuType.HISTORY;setTimeout(function(){_this.refreshList()},10)};GMCmdPage.prototype.onClickSend=function(){var isProto=false;var str=this.inputTxt;if(str.startsWith("eval")){eval(str.replace("eval",""))}var arr=this.inputTxt.split("\n");for(var i=0;i<arr.length;i++){var item=arr[i];if(item.indexOf(":")!=-1){var cmdName=item.substring(0,item.indexOf(":")).trim();var cmdData=item.substring(item.indexOf(":")+1,item.length);Games.GM.sendCmd(cmdName,cmdData,true);console.log(cmdName);console.log(cmdData);isProto=true}}this.m_subMenuBar.select=Games.GMCmdSubMenuType.HISTORY;if(!isProto){eval(str)}};GMCmdPage.prototype.onClickClear=function(){Games.GM.historCmd.clear();Games.GM.clientCmd.clearCache();Games.GM.serverCmd.clearCache();this.refreshList()};GMCmdPage.prototype.refreshList=function(){switch(this.selectSubMenu){case Games.GMCmdSubMenuType.Server:this.setList(Games.GM.serverCmd.list);break;case Games.GMCmdSubMenuType.Client:this.setList(Games.GM.clientCmd.list);break;case Games.GMCmdSubMenuType.HISTORY:this.setList(Games.GM.historCmd.list);break}};GMCmdPage.prototype.setList=function(items){this.dataList=items;var list=this.m_list;list.setVirtual();list.setVirtualAndLoop();if(!list.itemRenderer){list.itemRenderer=Handler.create(this,this.renderListItem,null,false)}list.numItems=items.length};GMCmdPage.prototype.renderListItem=function(index,item){var data=this.dataList[index];item.cmdPage=this;item.setItemData(data)};return GMCmdPage}(GM.GMCmdPageStruct));GM.GMCmdPage=GMCmdPage})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMDebugPageStruct=(function(_super){__extends(GMDebugPageStruct,_super);function GMDebugPageStruct(){return _super.call(this)||this}GMDebugPageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMDebugPage"))};GMDebugPageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_subMenuBar=(this.getChild("subMenuBar"));this.m_clearButton=(this.getChild("clearButton"));this.m_refreshButton=(this.getChild("refreshButton"))};GMDebugPageStruct.URL="ui://ujw583ypfbyi8";GMDebugPageStruct.DependPackages=["GM"];return GMDebugPageStruct}(fairygui.GComponent));GM.GMDebugPageStruct=GMDebugPageStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMDebugPage=(function(_super){__extends(GMDebugPage,_super);function GMDebugPage(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dataList=[];return _this}GMDebugPage.prototype.onWindowInited=function(){this.m_subMenuBar.setListData(Games.GMDeubgMenuType.list);this.m_subMenuBar.sOnSelect.add(this.onClickSubMenu,this);this.m_subMenuBar.select=Games.GMDeubgMenuType.list;this.m_clearButton.onClick(this,this.onClickClear);this.m_refreshButton.onClick(this,this.refreshList)};Object.defineProperty(GMDebugPage.prototype,"selectSubMenu",{get:function(){return this.m_subMenuBar.select},enumerable:true,configurable:true});GMDebugPage.prototype.onClickSubMenu=function(menu){var _this=this;setTimeout(function(){_this.refreshList()},10)};GMDebugPage.prototype.onClickClear=function(){GameDebug.clear();this.refreshList()};GMDebugPage.prototype.refreshList=function(){var menus=this.selectSubMenu;var items=GameDebug.getListByTypes(Games.GMDeubgMenuType.getLogTypes(menus));this.setList(items)};GMDebugPage.prototype.setList=function(items){this.dataList=items;var list=this.m_list;list.setVirtual();list.setVirtualAndLoop();if(!list.itemRenderer){list.itemRenderer=Handler.create(this,this.renderListItem,null,false)}list.numItems=items.length;if(list.numItems>0){list.scrollToView(list.numItems-1)}};GMDebugPage.prototype.renderListItem=function(index,item){var data=this.dataList[index];item.setData(data)};return GMDebugPage}(GM.GMDebugPageStruct));GM.GMDebugPage=GMDebugPage})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMDisplayTreePageStruct=(function(_super){__extends(GMDisplayTreePageStruct,_super);function GMDisplayTreePageStruct(){return _super.call(this)||this}GMDisplayTreePageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMDisplayTreePage"))};GMDisplayTreePageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_tree=(this.getChild("tree"));this.m_refreshButton=(this.getChild("refreshButton"));this.m_showSelectButton=(this.getChild("showSelectButton"));this.m_hideSelectButton=(this.getChild("hideSelectButton"));this.m_noSelectButton=(this.getChild("noSelectButton"));this.m_parentLayerButton=(this.getChild("parentLayerButton"));this.m_setLayerButton=(this.getChild("setLayerButton"))};GMDisplayTreePageStruct.URL="ui://ujw583ypx6hov";GMDisplayTreePageStruct.DependPackages=["GM"];return GMDisplayTreePageStruct}(fairygui.GComponent));GM.GMDisplayTreePageStruct=GMDisplayTreePageStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMDisplayTreePage=(function(_super){__extends(GMDisplayTreePage,_super);function GMDisplayTreePage(){return _super!==null&&_super.apply(this,arguments)||this}GMDisplayTreePage.prototype.onWindowInited=function(){this.m_refreshButton.onClick(this,this.onClickRefreshButton);this.m_showSelectButton.onClick(this,this.onClickShowSelectButton);this.m_hideSelectButton.onClick(this,this.onClickHideSelectButton);this.m_noSelectButton.onClick(this,this.onClickNoSelectButton);this.m_parentLayerButton.onClick(this,this.onClickParentLayerButton);this.m_setLayerButton.onClick(this,this.onClickSetLayerButton)};GMDisplayTreePage.prototype.onClickRefreshButton=function(){this.m_tree.refresh()};GMDisplayTreePage.prototype.onClickShowSelectButton=function(){};GMDisplayTreePage.prototype.onClickHideSelectButton=function(){};GMDisplayTreePage.prototype.onClickNoSelectButton=function(){};GMDisplayTreePage.prototype.onClickParentLayerButton=function(){};GMDisplayTreePage.prototype.onClickSetLayerButton=function(){};return GMDisplayTreePage}(GM.GMDisplayTreePageStruct));GM.GMDisplayTreePage=GMDisplayTreePage})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMLogItemStruct=(function(_super){__extends(GMLogItemStruct,_super);function GMLogItemStruct(){return _super.call(this)||this}GMLogItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMLogItem"))};GMLogItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};GMLogItemStruct.URL="ui://ujw583ypsy3ro";GMLogItemStruct.DependPackages=["GM"];return GMLogItemStruct}(fairygui.GLabel));GM.GMLogItemStruct=GMLogItemStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMLogItem=(function(_super){__extends(GMLogItem,_super);function GMLogItem(){return _super!==null&&_super.apply(this,arguments)||this}GMLogItem.prototype.setData=function(data){this.data=data;try{this.title=data.msg}catch(e){}switch(data.logType){case LogType.Log:this.m_title.color="#121212";break;case LogType.Warn:this.m_title.color="#FFFF00";break;case LogType.Error:this.m_title.color="#FF0000";break}};return GMLogItem}(GM.GMLogItemStruct));GM.GMLogItem=GMLogItem})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMMainStruct=(function(_super){__extends(GMMainStruct,_super);function GMMainStruct(){return _super.call(this)||this}GMMainStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMMain"))};GMMainStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_mainMenu=(this.getChild("mainMenu"));this.m_debugPage=(this.getChild("debugPage"));this.m_addPage=(this.getChild("addPage"));this.m_selectServerPage=(this.getChild("selectServerPage"));this.m_closeButton=(this.getChild("closeButton"));this.m_cmdPage=(this.getChild("cmdPage"));this.m_displayTreePage=(this.getChild("displayTreePage"));this.m_timeLoopPage=(this.getChild("timeLoopPage"));this.m_tickPage=(this.getChild("tickPage"))};GMMainStruct.URL="ui://ujw583yp9nrl0";GMMainStruct.DependPackages=["GM"];return GMMainStruct}(fairygui.GComponent));GM.GMMainStruct=GMMainStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMMain=(function(_super){__extends(GMMain,_super);function GMMain(){return _super!==null&&_super.apply(this,arguments)||this}GMMain.prototype.onWindowInited=function(){this.m_closeButton.onClick(this.moduleWindow,this.moduleWindow.onMenuClose)};return GMMain}(GM.GMMainStruct));GM.GMMain=GMMain})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMMenuBarStruct=(function(_super){__extends(GMMenuBarStruct,_super);function GMMenuBarStruct(){return _super.call(this)||this}GMMenuBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMMenuBar"))};GMMenuBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_menuBar=(this.getChild("menuBar"));this.m_menuList=(this.getChild("menuList"))};GMMenuBarStruct.URL="ui://ujw583ypwl2t1";GMMenuBarStruct.DependPackages=["GM"];return GMMenuBarStruct}(fairygui.GComponent));GM.GMMenuBarStruct=GMMenuBarStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMMenuBar=(function(_super){__extends(GMMenuBar,_super);function GMMenuBar(){return _super!==null&&_super.apply(this,arguments)||this}GMMenuBar.prototype.onWindowInited=function(){this.m_menuList.setVirtual();this.m_menuList.setVirtualAndLoop();this.m_menuList.itemRenderer=Handler.create(this,this.renderListItem,null,false);this.m_menuList.numItems=Games.GMMenuType.list.length;this.m_menuList.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem)};GMMenuBar.prototype.renderListItem=function(index,obj){obj.title=Games.GMMenuType.list[index]};GMMenuBar.prototype.onClickItem=function(item){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}this.moduleWindow.openTab(item.title)};GMMenuBar.prototype.setSelect=function(menu){var index=Games.GMMenuType.list.indexOf(menu);this.m_menuList.addSelection(index,true)};return GMMenuBar}(GM.GMMenuBarStruct));GM.GMMenuBar=GMMenuBar})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMPopupButtonStruct=(function(_super){__extends(GMPopupButtonStruct,_super);function GMPopupButtonStruct(){return _super.call(this)||this}GMPopupButtonStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMPopupButton"))};GMPopupButtonStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};GMPopupButtonStruct.URL="ui://ujw583ypm23g5";GMPopupButtonStruct.DependPackages=["GM"];return GMPopupButtonStruct}(fairygui.GButton));GM.GMPopupButtonStruct=GMPopupButtonStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMPopupButton=(function(_super){__extends(GMPopupButton,_super);function GMPopupButton(){return _super!==null&&_super.apply(this,arguments)||this}return GMPopupButton}(GM.GMPopupButtonStruct));GM.GMPopupButton=GMPopupButton})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMPopupMenuStruct=(function(_super){__extends(GMPopupMenuStruct,_super);function GMPopupMenuStruct(){return _super.call(this)||this}GMPopupMenuStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMPopupMenu"))};GMPopupMenuStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"))};GMPopupMenuStruct.URL="ui://ujw583ypm23g4";GMPopupMenuStruct.DependPackages=["GM"];return GMPopupMenuStruct}(fairygui.GComponent));GM.GMPopupMenuStruct=GMPopupMenuStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMPopupMenu=(function(_super){__extends(GMPopupMenu,_super);function GMPopupMenu(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.listData=[];_this.sOnSelect=new TypedSignal();return _this}GMPopupMenu.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem)};GMPopupMenu.prototype.setListData=function(listData){this.listData=listData;var list=this.m_list;list.removeChildrenToPool();for(var i=0;i<listData.length;i++){var item=list.addItemFromPool();item.title=listData[i]}list.resizeToFit()};GMPopupMenu.prototype.onClickItem=function(item){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}this.onselect(item.title);this.removeFromParent()};GMPopupMenu.prototype.onselect=function(value){this.sOnSelect.dispatch(value);if(this.mainButton){this.mainButton.title=value}};GMPopupMenu.prototype.setSelect=function(value){var index=this.listData.indexOf(value);this.m_list.addSelection(index,true);this.onselect(value)};return GMPopupMenu}(GM.GMPopupMenuStruct));GM.GMPopupMenu=GMPopupMenu})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMPopupMenu_itemStruct=(function(_super){__extends(GMPopupMenu_itemStruct,_super);function GMPopupMenu_itemStruct(){return _super.call(this)||this}GMPopupMenu_itemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMPopupMenu_item"))};GMPopupMenu_itemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_checked=this.getController("checked");this.m_title=(this.getChild("title"))};GMPopupMenu_itemStruct.URL="ui://ujw583ypm23g3";GMPopupMenu_itemStruct.DependPackages=["GM"];return GMPopupMenu_itemStruct}(fairygui.GButton));GM.GMPopupMenu_itemStruct=GMPopupMenu_itemStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMPopupMenu_item=(function(_super){__extends(GMPopupMenu_item,_super);function GMPopupMenu_item(){return _super!==null&&_super.apply(this,arguments)||this}return GMPopupMenu_item}(GM.GMPopupMenu_itemStruct));GM.GMPopupMenu_item=GMPopupMenu_item})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMSelectServerPageStruct=(function(_super){__extends(GMSelectServerPageStruct,_super);function GMSelectServerPageStruct(){return _super.call(this)||this}GMSelectServerPageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMSelectServerPage"))};GMSelectServerPageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"))};GMSelectServerPageStruct.URL="ui://ujw583ypket7j";GMSelectServerPageStruct.DependPackages=["GM"];return GMSelectServerPageStruct}(fairygui.GComponent));GM.GMSelectServerPageStruct=GMSelectServerPageStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMSelectServerPage=(function(_super){__extends(GMSelectServerPage,_super);function GMSelectServerPage(){return _super!==null&&_super.apply(this,arguments)||this}GMSelectServerPage.prototype.onWindowInited=function(){var _this=this;var list=this.m_list;list.setVirtual();list.setVirtualAndLoop();this.channel=Games.ChannelManager.getInstance();this.channel.requestServerList(null,null,function(){list.on(fairygui.Events.CLICK_ITEM,_this,_this.onClickItem);list.itemRenderer=Handler.create(_this,_this.renderListItem,null,false);list.numItems=_this.channel.serverList.list.length;if(_this.channel.serverIndex>=0){_this.m_list.selectedIndex=_this.channel.serverIndex}},function(){list.numItems=0;Game.system.alertText(Games.TEXT.ErorRequestServerList)})};GMSelectServerPage.prototype.onTabShow=function(){if(this.channel.serverIndex>=0){this.m_list.selectedIndex=this.channel.serverIndex}};GMSelectServerPage.prototype.renderListItem=function(index,item){var data=this.channel.serverList.list[index];item.title=data.name+"  "+data.ip+":"+data.port;item.serverItem=data};GMSelectServerPage.prototype.onClickItem=function(item){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}var data=item.serverItem;if(data){this.channel.serverName=data.name}};return GMSelectServerPage}(GM.GMSelectServerPageStruct));GM.GMSelectServerPage=GMSelectServerPage})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMSubMenuBarStruct=(function(_super){__extends(GMSubMenuBarStruct,_super);function GMSubMenuBarStruct(){return _super.call(this)||this}GMSubMenuBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMSubMenuBar"))};GMSubMenuBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_menuBar=(this.getChild("menuBar"));this.m_subMenu=(this.getChild("subMenu"))};GMSubMenuBarStruct.URL="ui://ujw583ypfbyi6";GMSubMenuBarStruct.DependPackages=["GM"];return GMSubMenuBarStruct}(fairygui.GComponent));GM.GMSubMenuBarStruct=GMSubMenuBarStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMSubMenuBar=(function(_super){__extends(GMSubMenuBar,_super);function GMSubMenuBar(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.sOnSelect=new TypedSignal();return _this}GMSubMenuBar.prototype.setListData=function(listData){this.listData=listData;var list=this.m_subMenu;list.setVirtual();list.setVirtualAndLoop();list.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem);list.itemRenderer=Handler.create(this,this.renderListItem,null,false);list.numItems=listData.length};Object.defineProperty(GMSubMenuBar.prototype,"select",{get:function(){var list=this.m_subMenu.getSelection();var menus=[];for(var i=0;i<list.length;i++){menus.push(this.listData[list[i]])}return menus},set:function(menus){this.m_subMenu.clearSelection();for(var i=0;i<this.listData.length;i++){if(menus.indexOf(this.listData[i])!=-1){this.m_subMenu.addSelection(i)}}this.sOnSelect.dispatch(menus)},enumerable:true,configurable:true});GMSubMenuBar.prototype.renderListItem=function(index,item){item.title=this.listData[index]};GMSubMenuBar.prototype.onClickItem=function(item){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}this.sOnSelect.dispatch(this.select)};return GMSubMenuBar}(GM.GMSubMenuBarStruct));GM.GMSubMenuBar=GMSubMenuBar})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMSubMenuRadioBarStruct=(function(_super){__extends(GMSubMenuRadioBarStruct,_super);function GMSubMenuRadioBarStruct(){return _super.call(this)||this}GMSubMenuRadioBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMSubMenuRadioBar"))};GMSubMenuRadioBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_menuBar=(this.getChild("menuBar"));this.m_subMenu=(this.getChild("subMenu"))};GMSubMenuRadioBarStruct.URL="ui://ujw583ypket7l";GMSubMenuRadioBarStruct.DependPackages=["GM"];return GMSubMenuRadioBarStruct}(fairygui.GComponent));GM.GMSubMenuRadioBarStruct=GMSubMenuRadioBarStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMSubMenuRadioBar=(function(_super){__extends(GMSubMenuRadioBar,_super);function GMSubMenuRadioBar(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.sOnSelect=new TypedSignal();return _this}GMSubMenuRadioBar.prototype.setListData=function(listData){this.listData=listData;var list=this.m_subMenu;list.setVirtual();list.setVirtualAndLoop();list.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem);list.itemRenderer=Handler.create(this,this.renderListItem,null,false);list.numItems=listData.length};Object.defineProperty(GMSubMenuRadioBar.prototype,"select",{get:function(){if(this.m_subMenu.selectedIndex>=0){return this.listData[this.m_subMenu.selectedIndex]}return null},set:function(menu){this.m_subMenu.selectedIndex=this.listData.indexOf(menu);this.sOnSelect.dispatch(menu)},enumerable:true,configurable:true});GMSubMenuRadioBar.prototype.renderListItem=function(index,item){item.title=this.listData[index]};GMSubMenuRadioBar.prototype.onClickItem=function(item){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}this.sOnSelect.dispatch(item.title)};return GMSubMenuRadioBar}(GM.GMSubMenuRadioBarStruct));GM.GMSubMenuRadioBar=GMSubMenuRadioBar})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMTickPageStruct=(function(_super){__extends(GMTickPageStruct,_super);function GMTickPageStruct(){return _super.call(this)||this}GMTickPageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMTickPage"))};GMTickPageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_refreshButton=(this.getChild("refreshButton"));this.m_clearButton=(this.getChild("clearButton"));this.m_sortCostTimeToalButton=(this.getChild("sortCostTimeToalButton"));this.m_sorteEvaluateButton=(this.getChild("sorteEvaluateButton"));this.m_sorteCallNumButton=(this.getChild("sorteCallNumButton"));this.m_sorteCostTimeButton=(this.getChild("sorteCostTimeButton"))};GMTickPageStruct.URL="ui://ujw583yp7h8s12";GMTickPageStruct.DependPackages=["GM"];return GMTickPageStruct}(fairygui.GComponent));GM.GMTickPageStruct=GMTickPageStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMTickPage=(function(_super){__extends(GMTickPage,_super);function GMTickPage(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dataList=[];_this.sortType=GM.GMTimeLoopSortType.EvaluateCost;return _this}GMTickPage.prototype.onWindowInited=function(){this.m_clearButton.onClick(this,this.onClickClearButton);this.m_refreshButton.onClick(this,this.onClickRefreshButton);this.m_sortCostTimeToalButton.onClick(this,this.onClickRefreshButton,[GM.GMTimeLoopSortType.CostTimeTotal]);this.m_sorteCostTimeButton.onClick(this,this.onClickRefreshButton,[GM.GMTimeLoopSortType.CostTime]);this.m_sorteCallNumButton.onClick(this,this.onClickRefreshButton,[GM.GMTimeLoopSortType.CallNum]);this.m_sorteEvaluateButton.onClick(this,this.onClickRefreshButton,[GM.GMTimeLoopSortType.EvaluateCost])};GMTickPage.prototype.onClickClearButton=function(){Games.DebugTimerLoopManager.clear()};GMTickPage.prototype.onClickRefreshButton=function(sortType){if(sortType){this.sortType=sortType}var list=Game.tick.list;switch(this.sortType){case GM.GMTimeLoopSortType.CostTimeTotal:list=list.sort(function(a,b){return a.debugCostTimeToal-b.debugCostTimeToal});break;case GM.GMTimeLoopSortType.CostTime:list=list.sort(function(a,b){return a.debugCostTime-b.debugCostTime});break;case GM.GMTimeLoopSortType.CallNum:list=list.sort(function(a,b){return a.debugCallNum-b.debugCallNum});break;case GM.GMTimeLoopSortType.EvaluateCost:list=list.sort(function(a,b){return a.debugEvaluateCost-b.debugEvaluateCost});break}this.setList(list)};GMTickPage.prototype.setList=function(items){this.dataList=items;var list=this.m_list;list.setVirtual();list.setVirtualAndLoop();if(!list.itemRenderer){list.itemRenderer=Handler.create(this,this.renderListItem,null,false)}list.numItems=items.length};GMTickPage.prototype.renderListItem=function(index,item){var data=this.dataList[index];item.setTickData(data)};return GMTickPage}(GM.GMTickPageStruct));GM.GMTickPage=GMTickPage})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMTimeLoopItemStruct=(function(_super){__extends(GMTimeLoopItemStruct,_super);function GMTimeLoopItemStruct(){return _super.call(this)||this}GMTimeLoopItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMTimeLoopItem"))};GMTimeLoopItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_visiable=(this.getChild("visiable"))};GMTimeLoopItemStruct.URL="ui://ujw583yp7h8s11";GMTimeLoopItemStruct.DependPackages=["GM"];return GMTimeLoopItemStruct}(fairygui.GComponent));GM.GMTimeLoopItemStruct=GMTimeLoopItemStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMTimeLoopItem=(function(_super){__extends(GMTimeLoopItem,_super);function GMTimeLoopItem(){return _super!==null&&_super.apply(this,arguments)||this}GMTimeLoopItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_visiable.onClick(this,this.onClickEnableButton)};GMTimeLoopItem.prototype.setItemData=function(data){this.data=data;this.m_visiable.selected=data.enable;this.m_title.text=data.toString()};GMTimeLoopItem.prototype.setTickData=function(data){this.tickData=data;this.m_visiable.selected=data.debugEnable;this.m_title.text=data.toString()};GMTimeLoopItem.prototype.onClickEnableButton=function(){if(this.data){this.data.enable=!this.data.enable}if(this.tickData){this.tickData.debugEnable=!this.tickData.debugEnable}};return GMTimeLoopItem}(GM.GMTimeLoopItemStruct));GM.GMTimeLoopItem=GMTimeLoopItem})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMTimeLoopPageStruct=(function(_super){__extends(GMTimeLoopPageStruct,_super);function GMTimeLoopPageStruct(){return _super.call(this)||this}GMTimeLoopPageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","GMTimeLoopPage"))};GMTimeLoopPageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_refreshButton=(this.getChild("refreshButton"));this.m_clearButton=(this.getChild("clearButton"));this.m_sortCostTimeToalButton=(this.getChild("sortCostTimeToalButton"));this.m_sorteEvaluateButton=(this.getChild("sorteEvaluateButton"));this.m_sorteCallNumButton=(this.getChild("sorteCallNumButton"));this.m_sorteCostTimeButton=(this.getChild("sorteCostTimeButton"))};GMTimeLoopPageStruct.URL="ui://ujw583yp7h8s10";GMTimeLoopPageStruct.DependPackages=["GM"];return GMTimeLoopPageStruct}(fairygui.GComponent));GM.GMTimeLoopPageStruct=GMTimeLoopPageStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var GMTimeLoopSortType;(function(GMTimeLoopSortType){GMTimeLoopSortType[GMTimeLoopSortType.CostTimeTotal=0]="CostTimeTotal";GMTimeLoopSortType[GMTimeLoopSortType.CostTime=1]="CostTime";GMTimeLoopSortType[GMTimeLoopSortType.CallNum=2]="CallNum";GMTimeLoopSortType[GMTimeLoopSortType.EvaluateCost=3]="EvaluateCost"})(GMTimeLoopSortType=GM.GMTimeLoopSortType||(GM.GMTimeLoopSortType={}));var GMTimeLoopPage=(function(_super){__extends(GMTimeLoopPage,_super);function GMTimeLoopPage(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dataList=[];_this.sortType=GMTimeLoopSortType.EvaluateCost;return _this}GMTimeLoopPage.prototype.onWindowInited=function(){this.m_clearButton.onClick(this,this.onClickClearButton);this.m_refreshButton.onClick(this,this.onClickRefreshButton);this.m_sortCostTimeToalButton.onClick(this,this.onClickRefreshButton,[GMTimeLoopSortType.CostTimeTotal]);this.m_sorteCostTimeButton.onClick(this,this.onClickRefreshButton,[GMTimeLoopSortType.CostTime]);this.m_sorteCallNumButton.onClick(this,this.onClickRefreshButton,[GMTimeLoopSortType.CallNum]);this.m_sorteEvaluateButton.onClick(this,this.onClickRefreshButton,[GMTimeLoopSortType.EvaluateCost])};GMTimeLoopPage.prototype.onClickClearButton=function(){Games.DebugTimerLoopManager.clear()};GMTimeLoopPage.prototype.onClickRefreshButton=function(sortType){if(sortType){this.sortType=sortType}var list=Games.DebugTimerLoopManager.Instance.dict.getValues();switch(this.sortType){case GMTimeLoopSortType.CostTimeTotal:list=list.sort(function(a,b){return a.costTimeToal-b.costTimeToal});break;case GMTimeLoopSortType.CostTime:list=list.sort(function(a,b){return a.costTime-b.costTime});break;case GMTimeLoopSortType.CallNum:list=list.sort(function(a,b){return a.callNum-b.callNum});break;case GMTimeLoopSortType.EvaluateCost:list=list.sort(function(a,b){return a.evaluateCost-b.evaluateCost});break}this.setList(list)};GMTimeLoopPage.prototype.setList=function(items){this.dataList=items;var list=this.m_list;list.setVirtual();list.setVirtualAndLoop();if(!list.itemRenderer){list.itemRenderer=Handler.create(this,this.renderListItem,null,false)}list.numItems=items.length};GMTimeLoopPage.prototype.renderListItem=function(index,item){var data=this.dataList[index];item.setItemData(data)};return GMTimeLoopPage}(GM.GMTimeLoopPageStruct));GM.GMTimeLoopPage=GMTimeLoopPage})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var NumberInputStruct=(function(_super){__extends(NumberInputStruct,_super);function NumberInputStruct(){return _super.call(this)||this}NumberInputStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","NumberInput"))};NumberInputStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_downButton=(this.getChild("downButton"));this.m_upButton=(this.getChild("upButton"))};NumberInputStruct.URL="ui://ujw583ypfv0tf";NumberInputStruct.DependPackages=["GM"];return NumberInputStruct}(fairygui.GComponent));GM.NumberInputStruct=NumberInputStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var NumberInput=(function(_super){__extends(NumberInput,_super);function NumberInput(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.downTimeoutHandler=-1;_this.downIntervalHandler=-1;_this.upTimeoutHandler=-1;_this.isDowning=false;return _this}NumberInput.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_upButton.onClick(this,this.onClickUpButton);this.m_downButton.onClick(this,this.onClickDownButton);this.m_upButton.on(laya.events.Event.MOUSE_DOWN,this,this.onMouseDownUpButton);this.m_downButton.on(laya.events.Event.MOUSE_DOWN,this,this.onMouseDownDownButton);this.m_upButton.on(laya.events.Event.MOUSE_UP,this,this.onMouseUP);this.m_downButton.on(laya.events.Event.MOUSE_UP,this,this.onMouseUP);this.m_upButton.on(laya.events.Event.MOUSE_OUT,this,this.onMouseUP);this.m_downButton.on(laya.events.Event.MOUSE_OUT,this,this.onMouseUP)};NumberInput.prototype.onClickUpButton=function(){if(!this.isDowning){this.value+=this.onceValue}this.isDowning=false};NumberInput.prototype.onClickDownButton=function(){if(!this.isDowning){this.value-=this.onceValue}this.isDowning=false};NumberInput.prototype.onMouseDownUpButton=function(){var _this=this;if(this.upTimeoutHandler!=-1){clearTimeout(this.upTimeoutHandler);this.upTimeoutHandler=-1}this.downTimeoutHandler=setTimeout(function(){_this.isDowning=true;_this.downIntervalHandler=setInterval(function(){_this.value+=_this.onceValue},10)},200)};NumberInput.prototype.onMouseDownDownButton=function(){var _this=this;if(this.upTimeoutHandler!=-1){clearTimeout(this.upTimeoutHandler);this.upTimeoutHandler=-1}this.downTimeoutHandler=setTimeout(function(){_this.isDowning=true;_this.downIntervalHandler=setInterval(function(){_this.value-=_this.onceValue},10)},200)};NumberInput.prototype.onMouseUP=function(){var _this=this;if(this.downTimeoutHandler!=-1){clearTimeout(this.downTimeoutHandler);this.downTimeoutHandler=-1}if(this.downIntervalHandler!=-1){clearInterval(this.downIntervalHandler);this.downIntervalHandler=-1}if(this.isDowning){this.upTimeoutHandler=setTimeout(function(){_this.isDowning=false},200)}};Object.defineProperty(NumberInput.prototype,"onceValue",{get:function(){var length=Math.abs(this.value).toString().length-1;var v=1;for(var i=1;i<length;i++){v*=10}return v},enumerable:true,configurable:true});Object.defineProperty(NumberInput.prototype,"value",{get:function(){if(isNullOrEmpty(this.m_title.text)){return 0}return toInt(this.m_title.text)},set:function(val){this.m_title.text=val.toString()},enumerable:true,configurable:true});return NumberInput}(GM.NumberInputStruct));GM.NumberInput=NumberInput})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var TextAreaStruct=(function(_super){__extends(TextAreaStruct,_super);function TextAreaStruct(){return _super.call(this)||this}TextAreaStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","TextArea"))};TextAreaStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};TextAreaStruct.URL="ui://ujw583ypket7m";TextAreaStruct.DependPackages=["GM"];return TextAreaStruct}(fairygui.GButton));GM.TextAreaStruct=TextAreaStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var TextArea=(function(_super){__extends(TextArea,_super);function TextArea(){return _super!==null&&_super.apply(this,arguments)||this}return TextArea}(GM.TextAreaStruct));GM.TextArea=TextArea})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var TextInputStruct=(function(_super){__extends(TextInputStruct,_super);function TextInputStruct(){return _super.call(this)||this}TextInputStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","TextInput"))};TextInputStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};TextInputStruct.URL="ui://ujw583ypfv0tb";TextInputStruct.DependPackages=["GM"];return TextInputStruct}(fairygui.GButton));GM.TextInputStruct=TextInputStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var TextInput=(function(_super){__extends(TextInput,_super);function TextInput(){return _super!==null&&_super.apply(this,arguments)||this}return TextInput}(GM.TextInputStruct));GM.TextInput=TextInput})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var TreeStruct=(function(_super){__extends(TreeStruct,_super);function TreeStruct(){return _super.call(this)||this}TreeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","Tree"))};TreeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};TreeStruct.URL="ui://ujw583ypx6hop";TreeStruct.DependPackages=["GM"];return TreeStruct}(fairygui.GComponent));GM.TreeStruct=TreeStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var Tree=(function(_super){__extends(Tree,_super);function Tree(){var _this=_super.call(this)||this;_this.layerLevelInitPaddingLeft=60;_this.layerLevelPaddingLeft=50;_this.itemPool=new fairygui.GObjectPool();return _this}Tree.prototype.refresh=function(){if(this.data){this.setDataRoot(this.data)}else{this.setDataRoot(fairygui.GRoot.inst)}};Tree.prototype.setDataRoot=function(dataRoot){this.data=dataRoot;var item;if(this.itemRoot){item=this.itemRoot}else{item=this.itemPool.getObject(GM.TreeItem.URL);item.treeParent=this;item.treeRoot=this;this.addChild(item)}item.setData(dataRoot);this.itemRoot=item;this.updateLayout()};Tree.prototype.updateLayout=function(){this.itemRoot.updateLayout()};return Tree}(GM.TreeStruct));GM.Tree=Tree})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var TreeItemStruct=(function(_super){__extends(TreeItemStruct,_super);function TreeItemStruct(){return _super.call(this)||this}TreeItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","TreeItem"))};TreeItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"));this.m_visiable=(this.getChild("visiable"));this.m_openClose=(this.getChild("openClose"));this.m_list=(this.getChild("list"))};TreeItemStruct.URL="ui://ujw583ypx6hot";TreeItemStruct.DependPackages=["GM"];return TreeItemStruct}(fairygui.GButton));GM.TreeItemStruct=TreeItemStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var TreeItem=(function(_super){__extends(TreeItem,_super);function TreeItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.layerLevel=0;return _this}TreeItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_visiable.onClick(this,this.onClickVisiableButton);this.m_openClose.onClick(this,this.onClickOpencloseButton)};TreeItem.prototype.onClickVisiableButton=function(){this.data.visible=!this.data.visible};TreeItem.prototype.onClickOpencloseButton=function(){this.m_list.visible=!this.m_list.visible;this.treeRoot.updateLayout()};TreeItem.prototype.setData=function(data,layerLevel){if(layerLevel===void 0){layerLevel=0}var otherText="";if(data instanceof fairygui.GTextField){otherText=data.font+" "+data.fontSize}this.data=data;this.m_title.text=data.name+"("+getClassName(data)+") w="+data.width+", h="+data.height+", sxy="+data.scaleX+" "+data.scaleY+" "+otherText;this.m_visiable.selected=data.visible;this.m_openClose.selected=true;this.m_list.visible=true;this.width=this.treeParent.width;this.m_title.x=this.treeRoot.layerLevelInitPaddingLeft+this.treeRoot.layerLevelPaddingLeft*layerLevel;this.m_title.width=this.width-this.m_title.x;this.m_list.width=this.treeParent.width;for(var i=this.m_list.numChildren-1;i>=0;i--){var item=this.m_list.getChildAt(i);item.removeFromParent();this.treeRoot.itemPool.returnObject(item)}this.m_openClose.visible=false;if(data instanceof fairygui.GComponent||data instanceof laya.display.Sprite){this.m_openClose.visible=true;if(data==Games.MenuLayer.gm){return}var container=data;if(data instanceof fairygui.GComponent){container=data.displayObject}for(var i=0;i<container.numChildren;i++){var display=container.getChildAt(i);if(display["$owner"]){display=display["$owner"]}var item=this.treeRoot.itemPool.getObject(TreeItem.URL);item.treeParent=this;item.treeRoot=this.treeRoot;item.y=i*item.sourceHeight;item.width=this.m_list.width;this.m_list.addChild(item);item.setData(display,layerLevel+1)}}};TreeItem.prototype.updateLayout=function(){var y=0;if(this.m_list.visible){for(var i=0;i<this.m_list.numChildren;i++){var item=this.m_list.getChildAt(i);item.updateLayout();item.y=y;y+=item.height}}this.m_list.height=y;this.height=this.sourceHeight+y};return TreeItem}(GM.TreeItemStruct));GM.TreeItem=TreeItem})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var TreeItemCheckboxStruct=(function(_super){__extends(TreeItemCheckboxStruct,_super);function TreeItemCheckboxStruct(){return _super.call(this)||this}TreeItemCheckboxStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","TreeItemCheckbox"))};TreeItemCheckboxStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};TreeItemCheckboxStruct.URL="ui://ujw583ypx6hou";TreeItemCheckboxStruct.DependPackages=["GM"];return TreeItemCheckboxStruct}(fairygui.GButton));GM.TreeItemCheckboxStruct=TreeItemCheckboxStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var TreeItemCheckbox=(function(_super){__extends(TreeItemCheckbox,_super);function TreeItemCheckbox(){return _super!==null&&_super.apply(this,arguments)||this}return TreeItemCheckbox}(GM.TreeItemCheckboxStruct));GM.TreeItemCheckbox=TreeItemCheckbox})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var TreeItemOpenCheckboxStruct=(function(_super){__extends(TreeItemOpenCheckboxStruct,_super);function TreeItemOpenCheckboxStruct(){return _super.call(this)||this}TreeItemOpenCheckboxStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","TreeItemOpenCheckbox"))};TreeItemOpenCheckboxStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_close=(this.getChild("close"));this.m_open=(this.getChild("open"))};TreeItemOpenCheckboxStruct.URL="ui://ujw583ypx6how";TreeItemOpenCheckboxStruct.DependPackages=["GM"];return TreeItemOpenCheckboxStruct}(fairygui.GButton));GM.TreeItemOpenCheckboxStruct=TreeItemOpenCheckboxStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var TreeItemOpenCheckbox=(function(_super){__extends(TreeItemOpenCheckbox,_super);function TreeItemOpenCheckbox(){return _super!==null&&_super.apply(this,arguments)||this}return TreeItemOpenCheckbox}(GM.TreeItemOpenCheckboxStruct));GM.TreeItemOpenCheckbox=TreeItemOpenCheckbox})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var TreeListStruct=(function(_super){__extends(TreeListStruct,_super);function TreeListStruct(){return _super.call(this)||this}TreeListStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GM","TreeList"))};TreeListStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};TreeListStruct.URL="ui://ujw583ypx6hoz";TreeListStruct.DependPackages=["GM"];return TreeListStruct}(fairygui.GComponent));GM.TreeListStruct=TreeListStruct})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GM;(function(GM){var TreeList=(function(_super){__extends(TreeList,_super);function TreeList(){return _super!==null&&_super.apply(this,arguments)||this}return TreeList}(GM.TreeListStruct));GM.TreeList=TreeList})(GM=fgui.GM||(fgui.GM={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GoldExchange;(function(GoldExchange){var GoldExchangePanelStruct=(function(_super){__extends(GoldExchangePanelStruct,_super);function GoldExchangePanelStruct(){return _super.call(this)||this}GoldExchangePanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GoldExchange","GoldExchangePanel"))};GoldExchangePanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_btn_visible=this.getController("c_btn_visible");this.m_remain=(this.getChild("remain"));this.m_exchangeItem=(this.getChild("exchangeItem"));this.m_targetItem=(this.getChild("targetItem"));this.m_oneBtn=(this.getChild("oneBtn"));this.m_mulBtn=(this.getChild("mulBtn"))};GoldExchangePanelStruct.URL="ui://4kwtb00phqf41";GoldExchangePanelStruct.DependPackages=["GoldExchange","Common"];return GoldExchangePanelStruct}(fairygui.GComponent));GoldExchange.GoldExchangePanelStruct=GoldExchangePanelStruct})(GoldExchange=fgui.GoldExchange||(fgui.GoldExchange={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GoldExchange;(function(GoldExchange){var GoldExchangePanel=(function(_super){__extends(GoldExchangePanel,_super);function GoldExchangePanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dtItem=new DTItemNum();_this.startPos=new Point();_this.endPos=new Point();_this.rewardItems=[];return _this}GoldExchangePanel.prototype.onWindowShow=function(){this.m_oneBtn.onClick(this,this.onOneClickBtn);this.m_mulBtn.onClick(this,this.onMulClickBtn);Game.protoOkEvent.add(ProtoEventKey.ItemData,this.updateItemHandler,this);Game.protoOkEvent.add(ProtoEventKey.CinemaBuild_goldExchange,this.onGoldExchangeHandler,this);this.updateView()};GoldExchangePanel.prototype.onWindowHide=function(){this.m_oneBtn.offClick(this,this.onOneClickBtn);this.m_mulBtn.offClick(this,this.onMulClickBtn);Game.protoOkEvent.remove(ProtoEventKey.ItemData,this.updateItemHandler,this);Game.protoOkEvent.remove(ProtoEventKey.CinemaBuild_goldExchange,this.onGoldExchangeHandler,this)};GoldExchangePanel.prototype.onGoldExchangeHandler=function(msg){if(msg.result===0){User.goldExchangeCount=msg.totalCount;this.startEffect(msg.count);Game.system.toastText(TEXT.GoldExchangeOk);this.updateView()}};GoldExchangePanel.prototype.updateItemHandler=function(){this.curCostItem=User.goldExchangeCost;this.m_exchangeItem.updateViewByDTNum(this.curCostItem);this.curRewardItem=User.goldExchangeReward;this.m_targetItem.updateViewByDTNum(this.curRewardItem);var enough=ItemHelper.checkItemEnough(this.curCostItem);if(enough){this.m_exchangeItem.m_title.color="#FFFFFF"}else{this.m_exchangeItem.m_title.color="#FF0000"}};GoldExchangePanel.prototype.updateView=function(){this.updateItemHandler();var total=User.goldExchangeTotal;var remain=User.goldExchangeRemain;this.curCostNum=Math.min(remain,10);this.m_remain.text=format(TEXT.GoldExchangeRemainNum,remain);this.m_oneBtn.text=TEXT.GoldExchangeOne;this.m_mulBtn.text=TEXT.GoldExchangeTen};GoldExchangePanel.prototype.onOneClickBtn=function(){if(this.curCostNum>0){this.sendToServer(1)}else{Game.system.toastFormatText(TEXT.GoldExchangeTimesNoEnough)}};GoldExchangePanel.prototype.onMulClickBtn=function(){if(this.curCostNum>0){this.sendToServer(this.curCostNum)}else{Game.system.toastFormatText(TEXT.GoldExchangeTimesNoEnough)}};GoldExchangePanel.prototype.sendToServer=function(num){var costNum=this.curCostItem.itemNum*num;var costId=this.curCostItem.itemId;var enough=ItemHelper.checkItemEnough2(costId,this.curCostItem.itemNum*num);if(enough){Game.protosender.CinemaBuild.goldExchange(num)}else{Game.system.openItemWay(costId,costNum)}};GoldExchangePanel.prototype.startEffect=function(num){var _this=this;if(num===void 0){num=1}this.startPos.x=this.m_targetItem.x;this.startPos.y=this.m_targetItem.y;var item;if(this.rewardItems.length<=0){item=fgui.Common.CommonItem.createInstance();item.hideBg()}else{item=this.rewardItems.pop();item.alpha=1}this.addChild(item);this.dtItem.itemId=this.curRewardItem.itemId;this.dtItem.itemNum=this.curRewardItem.itemNum*num;item.updateViewByDTNum(this.dtItem);item.setXY(this.startPos.x,this.startPos.y);Laya.Tween.to(item,{y:this.startPos.y-150,alpha:0.3},1500,Laya.Ease.quadOut,Handler.create(null,function(){item.removeFromParent();_this.rewardItems.push(item)}))};return GoldExchangePanel}(GoldExchange.GoldExchangePanelStruct));GoldExchange.GoldExchangePanel=GoldExchangePanel})(GoldExchange=fgui.GoldExchange||(fgui.GoldExchange={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GoldExchange;(function(GoldExchange){var GoldExchangeViewStruct=(function(_super){__extends(GoldExchangeViewStruct,_super);function GoldExchangeViewStruct(){return _super.call(this)||this}GoldExchangeViewStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GoldExchange","GoldExchangeView"))};GoldExchangeViewStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialogUI=(this.getChild("dialogUI"));this.m_panel=(this.getChild("panel"))};GoldExchangeViewStruct.URL="ui://4kwtb00phqf40";GoldExchangeViewStruct.DependPackages=["GoldExchange","Common"];return GoldExchangeViewStruct}(fairygui.GComponent));GoldExchange.GoldExchangeViewStruct=GoldExchangeViewStruct})(GoldExchange=fgui.GoldExchange||(fgui.GoldExchange={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GoldExchange;(function(GoldExchange){var GoldExchangeView=(function(_super){__extends(GoldExchangeView,_super);function GoldExchangeView(){return _super!==null&&_super.apply(this,arguments)||this}GoldExchangeView.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialogUI.text=TEXT.GoldExchangeTitle};GoldExchangeView.prototype.onWindowShow=function(){if(Game.moduleModel.guide.isGuideFinished(Games.GuideModel.goldExchangeStepId)==false){Game.moduleModel.guide.addFinishGuideId(Games.GuideModel.goldExchangeStepId)}};GoldExchangeView.prototype.onWindowHide=function(){};return GoldExchangeView}(GoldExchange.GoldExchangeViewStruct));GoldExchange.GoldExchangeView=GoldExchangeView})(GoldExchange=fgui.GoldExchange||(fgui.GoldExchange={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var AnimaContainerStruct=(function(_super){__extends(AnimaContainerStruct,_super);function AnimaContainerStruct(){return _super.call(this)||this}AnimaContainerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","AnimaContainer"))};AnimaContainerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_skipBtn=(this.getChild("skipBtn"))};AnimaContainerStruct.URL="ui://toebkrsrt6vt28";AnimaContainerStruct.DependPackages=["Guide"];return AnimaContainerStruct}(fairygui.GComponent));Guide.AnimaContainerStruct=AnimaContainerStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var AnimaContainer=(function(_super){__extends(AnimaContainer,_super);function AnimaContainer(){return _super!==null&&_super.apply(this,arguments)||this}return AnimaContainer}(Guide.AnimaContainerStruct));Guide.AnimaContainer=AnimaContainer})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var CarStruct=(function(_super){__extends(CarStruct,_super);function CarStruct(){return _super.call(this)||this}CarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","car"))};CarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1");this.m_t2=this.getTransition("t2")};CarStruct.URL="ui://toebkrsrilee24";CarStruct.DependPackages=["Guide"];return CarStruct}(fairygui.GComponent));Guide.CarStruct=CarStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var Car=(function(_super){__extends(Car,_super);function Car(){return _super!==null&&_super.apply(this,arguments)||this}return Car}(Guide.CarStruct));Guide.Car=Car})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideClickHandStruct=(function(_super){__extends(GuideClickHandStruct,_super);function GuideClickHandStruct(){return _super.call(this)||this}GuideClickHandStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","GuideClickHand"))};GuideClickHandStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_hand_dir=this.getController("c_hand_dir");this.m_c_circle_visible=this.getController("c_circle_visible");this.m_circle=(this.getChild("circle"));this.m_hand=(this.getChild("hand"));this.m_tcircle=this.getTransition("tcircle")};GuideClickHandStruct.URL="ui://toebkrsrhz3mp";GuideClickHandStruct.DependPackages=["Guide"];return GuideClickHandStruct}(fairygui.GComponent));Guide.GuideClickHandStruct=GuideClickHandStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideClickHand=(function(_super){__extends(GuideClickHand,_super);function GuideClickHand(){return _super!==null&&_super.apply(this,arguments)||this}GuideClickHand.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.touchable=false};GuideClickHand.prototype.dispose=function(){console.log("dispose 窗口被销毁");this.recyclingHand()};GuideClickHand.prototype.onWindowHide=function(){this.recyclingHand()};GuideClickHand.prototype.onWindowDestory=function(){this.recyclingHand();return true};GuideClickHand.prototype.recyclingHand=function(){this.removeFromParent()};return GuideClickHand}(Guide.GuideClickHandStruct));Guide.GuideClickHand=GuideClickHand})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideDialogStruct=(function(_super){__extends(GuideDialogStruct,_super);function GuideDialogStruct(){return _super.call(this)||this}GuideDialogStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","GuideDialog"))};GuideDialogStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dir=this.getController("dir");this.m_bg=(this.getChild("bg"));this.m_bgShadow=(this.getChild("bgShadow"));this.m_title=(this.getChild("title"));this.m_arrowRight=(this.getChild("arrowRight"));this.m_arrowLeft=(this.getChild("arrowLeft"))};GuideDialogStruct.URL="ui://toebkrsrhz3ms";GuideDialogStruct.DependPackages=["Guide","Common"];return GuideDialogStruct}(fairygui.GLabel));Guide.GuideDialogStruct=GuideDialogStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideDialog=(function(_super){__extends(GuideDialog,_super);function GuideDialog(){return _super!==null&&_super.apply(this,arguments)||this}return GuideDialog}(Guide.GuideDialogStruct));Guide.GuideDialog=GuideDialog})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideDialogMinPanelStruct=(function(_super){__extends(GuideDialogMinPanelStruct,_super);function GuideDialogMinPanelStruct(){return _super.call(this)||this}GuideDialogMinPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","GuideDialogMinPanel"))};GuideDialogMinPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialog=(this.getChild("dialog"));this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1")};GuideDialogMinPanelStruct.URL="ui://toebkrsrji9k1p";GuideDialogMinPanelStruct.DependPackages=["Guide"];return GuideDialogMinPanelStruct}(fairygui.GComponent));Guide.GuideDialogMinPanelStruct=GuideDialogMinPanelStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideDialogMinPanel=(function(_super){__extends(GuideDialogMinPanel,_super);function GuideDialogMinPanel(){return _super!==null&&_super.apply(this,arguments)||this}return GuideDialogMinPanel}(Guide.GuideDialogMinPanelStruct));Guide.GuideDialogMinPanel=GuideDialogMinPanel})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideDialogMsgPanelStruct=(function(_super){__extends(GuideDialogMsgPanelStruct,_super);function GuideDialogMsgPanelStruct(){return _super.call(this)||this}GuideDialogMsgPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","GuideDialogMsgPanel"))};GuideDialogMsgPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dir=this.getController("dir");this.m_bg=(this.getChild("bg"));this.m_bgShadow=(this.getChild("bgShadow"));this.m_title=(this.getChild("title"));this.m_arrowRight=(this.getChild("arrowRight"));this.m_arrowLeft=(this.getChild("arrowLeft"))};GuideDialogMsgPanelStruct.URL="ui://toebkrsr9wvb1o";GuideDialogMsgPanelStruct.DependPackages=["Guide","Common"];return GuideDialogMsgPanelStruct}(fairygui.GLabel));Guide.GuideDialogMsgPanelStruct=GuideDialogMsgPanelStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideDialogMsgPanel=(function(_super){__extends(GuideDialogMsgPanel,_super);function GuideDialogMsgPanel(){return _super!==null&&_super.apply(this,arguments)||this}return GuideDialogMsgPanel}(Guide.GuideDialogMsgPanelStruct));Guide.GuideDialogMsgPanel=GuideDialogMsgPanel})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideLeftDialogStruct=(function(_super){__extends(GuideLeftDialogStruct,_super);function GuideLeftDialogStruct(){return _super.call(this)||this}GuideLeftDialogStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","GuideLeftDialog"))};GuideLeftDialogStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_name=(this.getChild("name"));this.m_dialog=(this.getChild("dialog"));this.m_t0=this.getTransition("t0")};GuideLeftDialogStruct.URL="ui://toebkrsrgn0t1b";GuideLeftDialogStruct.DependPackages=["Guide","Building"];return GuideLeftDialogStruct}(fairygui.GComponent));Guide.GuideLeftDialogStruct=GuideLeftDialogStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideLeftDialog=(function(_super){__extends(GuideLeftDialog,_super);function GuideLeftDialog(){return _super!==null&&_super.apply(this,arguments)||this}return GuideLeftDialog}(Guide.GuideLeftDialogStruct));Guide.GuideLeftDialog=GuideLeftDialog})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideMinDialogStruct=(function(_super){__extends(GuideMinDialogStruct,_super);function GuideMinDialogStruct(){return _super.call(this)||this}GuideMinDialogStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","GuideMinDialog"))};GuideMinDialogStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};GuideMinDialogStruct.URL="ui://toebkrsrhz3mq";GuideMinDialogStruct.DependPackages=["Guide","Common"];return GuideMinDialogStruct}(fairygui.GButton));Guide.GuideMinDialogStruct=GuideMinDialogStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideMinDialog=(function(_super){__extends(GuideMinDialog,_super);function GuideMinDialog(){return _super!==null&&_super.apply(this,arguments)||this}return GuideMinDialog}(Guide.GuideMinDialogStruct));Guide.GuideMinDialog=GuideMinDialog})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideNpcIntroductionUIStruct=(function(_super){__extends(GuideNpcIntroductionUIStruct,_super);function GuideNpcIntroductionUIStruct(){return _super.call(this)||this}GuideNpcIntroductionUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","GuideNpcIntroductionUI"))};GuideNpcIntroductionUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_name=(this.getChild("name"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_desc=(this.getChild("desc"))};GuideNpcIntroductionUIStruct.URL="ui://toebkrsrs9dx1f";GuideNpcIntroductionUIStruct.DependPackages=["Guide","Common","PfSkin"];return GuideNpcIntroductionUIStruct}(fairygui.GComponent));Guide.GuideNpcIntroductionUIStruct=GuideNpcIntroductionUIStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideNpcIntroductionUI=(function(_super){__extends(GuideNpcIntroductionUI,_super);function GuideNpcIntroductionUI(){return _super!==null&&_super.apply(this,arguments)||this}return GuideNpcIntroductionUI}(Guide.GuideNpcIntroductionUIStruct));Guide.GuideNpcIntroductionUI=GuideNpcIntroductionUI})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideRightDialogStruct=(function(_super){__extends(GuideRightDialogStruct,_super);function GuideRightDialogStruct(){return _super.call(this)||this}GuideRightDialogStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","GuideRightDialog"))};GuideRightDialogStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_name=(this.getChild("name"));this.m_dialog=(this.getChild("dialog"));this.m_t0=this.getTransition("t0")};GuideRightDialogStruct.URL="ui://toebkrsrgn0t1c";GuideRightDialogStruct.DependPackages=["Guide","Building"];return GuideRightDialogStruct}(fairygui.GComponent));Guide.GuideRightDialogStruct=GuideRightDialogStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideRightDialog=(function(_super){__extends(GuideRightDialog,_super);function GuideRightDialog(){return _super!==null&&_super.apply(this,arguments)||this}return GuideRightDialog}(Guide.GuideRightDialogStruct));Guide.GuideRightDialog=GuideRightDialog})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideTalkItemStruct=(function(_super){__extends(GuideTalkItemStruct,_super);function GuideTalkItemStruct(){return _super.call(this)||this}GuideTalkItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","GuideTalkItem"))};GuideTalkItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dir=this.getController("dir");this.m_testlabel=(this.getChild("testlabel"));this.m_headl=(this.getChild("headl"));this.m_dialogl=(this.getChild("dialogl"));this.m_headr=(this.getChild("headr"));this.m_dialogr=(this.getChild("dialogr"))};GuideTalkItemStruct.URL="ui://toebkrsr9q7z1j";GuideTalkItemStruct.DependPackages=["Guide","WarMovie","Common"];return GuideTalkItemStruct}(fairygui.GComponent));Guide.GuideTalkItemStruct=GuideTalkItemStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideTalkItem=(function(_super){__extends(GuideTalkItem,_super);function GuideTalkItem(){return _super!==null&&_super.apply(this,arguments)||this}GuideTalkItem.prototype.updateView=function(config){switch(config.anchor){case Games.GuideAnchor.Left:this.m_dir.selectedIndex=0;this.m_headl.m_icon.icon=config.bodyIconUrl;this.m_dialogr.text=config.content;this.m_dialogl.text=config.content;break;case Games.GuideAnchor.Right:this.m_dir.selectedIndex=1;this.m_headr.m_icon.icon=config.bodyIconUrl;this.m_dialogr.text=config.content;this.m_dialogl.text=config.content;break;default:break}this.m_testlabel.visible=false;this.m_testlabel.text=config.content};return GuideTalkItem}(Guide.GuideTalkItemStruct));Guide.GuideTalkItem=GuideTalkItem})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideTaskItemStruct=(function(_super){__extends(GuideTaskItemStruct,_super);function GuideTaskItemStruct(){return _super.call(this)||this}GuideTaskItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","GuideTaskItem"))};GuideTaskItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_finished=this.getController("finished");this.m_title=(this.getChild("title"));this.m_right=(this.getChild("right"))};GuideTaskItemStruct.URL="ui://toebkrsrhz3m16";GuideTaskItemStruct.DependPackages=["Guide","Common"];return GuideTaskItemStruct}(fairygui.GLabel));Guide.GuideTaskItemStruct=GuideTaskItemStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideTaskItem=(function(_super){__extends(GuideTaskItem,_super);function GuideTaskItem(){return _super!==null&&_super.apply(this,arguments)||this}GuideTaskItem.prototype.updateView=function(task){this.m_finished.selectedIndex=task.isFinished?0:1;this.m_title.text=task.mainTaskDesc};return GuideTaskItem}(Guide.GuideTaskItemStruct));Guide.GuideTaskItem=GuideTaskItem})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideTaskRecordUIStruct=(function(_super){__extends(GuideTaskRecordUIStruct,_super);function GuideTaskRecordUIStruct(){return _super.call(this)||this}GuideTaskRecordUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","GuideTaskRecordUI"))};GuideTaskRecordUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_list=(this.getChild("list"));this.m_closeBtn=(this.getChild("closeBtn"))};GuideTaskRecordUIStruct.URL="ui://toebkrsrhz3m15";GuideTaskRecordUIStruct.DependPackages=["Guide","Common","System"];return GuideTaskRecordUIStruct}(fairygui.GComponent));Guide.GuideTaskRecordUIStruct=GuideTaskRecordUIStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideTaskRecordUI=(function(_super){__extends(GuideTaskRecordUI,_super);function GuideTaskRecordUI(){return _super!==null&&_super.apply(this,arguments)||this}GuideTaskRecordUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.setVirtual();this.m_list.itemRenderer=Handler.create(this,this.onUpdateItemRender,null,false)};GuideTaskRecordUI.prototype.onUpdateItemRender=function(index,item){if(item&&this.storyLists){item.updateView(this.storyLists[index])}};GuideTaskRecordUI.prototype.onWindowShow=function(){this.m_closeBtn.onClick(this,this.onClickCloseBtn)};GuideTaskRecordUI.prototype.onWindowHide=function(){this.m_closeBtn.offClick(this,this.onClickCloseBtn)};GuideTaskRecordUI.prototype.onClickCloseBtn=function(){this.hide()};GuideTaskRecordUI.prototype.show=function(){this.visible=true;this.storyLists=Game.moduleModel.guide.storyLists;this.m_list.numItems=this.storyLists.length};GuideTaskRecordUI.prototype.hide=function(){this.visible=false};return GuideTaskRecordUI}(Guide.GuideTaskRecordUIStruct));Guide.GuideTaskRecordUI=GuideTaskRecordUI})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideTaskUIStruct=(function(_super){__extends(GuideTaskUIStruct,_super);function GuideTaskUIStruct(){return _super.call(this)||this}GuideTaskUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","GuideTaskUI"))};GuideTaskUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_bg=(this.getChild("bg"));this.m_title=(this.getChild("title"));this.m_desc=(this.getChild("desc"));this.m_rewardlist=(this.getChild("rewardlist"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_recordsBtn=(this.getChild("recordsBtn"));this.m_goBtn=(this.getChild("goBtn"));this.m_getBtn=(this.getChild("getBtn"));this.m_taskDesc=(this.getChild("taskDesc"));this.m_recordPanel=(this.getChild("recordPanel"))};GuideTaskUIStruct.URL="ui://toebkrsrhz3mz";GuideTaskUIStruct.DependPackages=["Guide","Common","System"];return GuideTaskUIStruct}(fairygui.GComponent));Guide.GuideTaskUIStruct=GuideTaskUIStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideTaskUI=(function(_super){__extends(GuideTaskUI,_super);function GuideTaskUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isGettingReward=false;return _this}GuideTaskUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_rewardlist.itemRenderer=Handler.create(this,this.onUpdateItemRender,null,false);this.m_goBtn.text=TEXT.Go;this.m_getBtn.text=TEXT.Get;this.m_recordsBtn.text=TEXT.Log};GuideTaskUI.prototype.onUpdateItemRender=function(index,item){var itemData=this.mainTask.config.reward[index];item.updateViewByDTNum(itemData);item.PopupInfo=itemData.itemId};GuideTaskUI.prototype.updateView=function(){this.mainTask=Game.moduleModel.task.getCurrentMainTask();this.m_getBtn.visible=false;this.m_goBtn.visible=false;if(this.mainTask){this.m_taskDesc.updateView(this.mainTask);this.m_title.text=this.mainTask.mainConfig.content;this.m_rewardlist.numItems=this.mainTask.config.reward.length;if(this.mainTask.isFinished){this.m_getBtn.visible=true;this.m_desc.text=this.mainTask.mainConfig.cinfo}else{this.m_goBtn.visible=true;this.m_desc.text=this.mainTask.mainConfig.info}}};GuideTaskUI.prototype.onWindowHide=function(){this.m_closeBtn.offClick(this,this.onClickCloseBtn);this.m_getBtn.offClick(this,this.onClickGetBtn);this.m_goBtn.offClick(this,this.onClickGoBtn);this.m_recordsBtn.offClick(this,this.onClickRecordBtn);Game.protoOkEvent.remove(ProtoEventKey.task_reward,this.onTaskRewardHandler,this);clearTimeout(this.closeTimeHandler)};GuideTaskUI.prototype.onWindowShow=function(){this.m_closeBtn.onClick(this,this.onClickCloseBtn);this.m_getBtn.onClick(this,this.onClickGetBtn);this.m_goBtn.onClick(this,this.onClickGoBtn);this.m_recordsBtn.onClick(this,this.onClickRecordBtn);this.isGettingReward=false;Game.protoOkEvent.add(ProtoEventKey.task_reward,this.onTaskRewardHandler,this);this.updateView();this.m_recordPanel.hide()};GuideTaskUI.prototype.onClickCloseBtn=function(){this.moduleWindow.menuClose()};GuideTaskUI.prototype.onTaskRewardHandler=function(msg){this.onClickCloseBtn()};GuideTaskUI.prototype.onClickGetBtn=function(){if(this.isGettingReward==false){this.isGettingReward=true;Game.guide.endGuide();Game.protosender.task.reward(this.mainTask.uuid)}};GuideTaskUI.prototype.onClickGoBtn=function(){if(this.mainTask.mainConfig.guide_id>0){Game.guide.readyPlayGuide(this.mainTask.mainConfig.guide_id,false);this.onClickCloseBtn()}};GuideTaskUI.prototype.onClickRecordBtn=function(){this.m_recordPanel.show()};return GuideTaskUI}(Guide.GuideTaskUIStruct));Guide.GuideTaskUI=GuideTaskUI})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideUIStruct=(function(_super){__extends(GuideUIStruct,_super);function GuideUIStruct(){return _super.call(this)||this}GuideUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","GuideUI"))};GuideUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_visible=this.getController("visible");this.m_c_anima=this.getController("c_anima");this.m_bg=(this.getChild("bg"));this.m_container=(this.getChild("container"));this.m_hand=(this.getChild("hand"));this.m_dialog=(this.getChild("dialog"));this.m_right=(this.getChild("right"));this.m_left=(this.getChild("left"));this.m_npcIntroPanel=(this.getChild("npcIntroPanel"));this.m_haibao=(this.getChild("haibao"))};GuideUIStruct.URL="ui://toebkrsrgn0t1a";GuideUIStruct.DependPackages=["Guide","Common"];return GuideUIStruct}(fairygui.GComponent));Guide.GuideUIStruct=GuideUIStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var GuideDialogType=Games.GuideDialogType;var GuideUI=(function(_super){__extends(GuideUI,_super);function GuideUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.crossIndexs=[3,6,8];_this.crossIndex=-1;return _this}GuideUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.hideAll();this.hideHand();this.m_hand.m_c_circle_visible.selectedIndex=1};Object.defineProperty(GuideUI.prototype,"alphaMask",{set:function(value){},enumerable:true,configurable:true});GuideUI.prototype.recyclingHand=function(){this.m_hand.recyclingHand();this.hideHand()};GuideUI.prototype.hideAll=function(){this.m_visible.selectedIndex=GuideDialogType.Hide;this.recyclingHand()};GuideUI.prototype.showFinger=function(btn,config){this.clearBtnUpdatePosition();this.preListIndex=-1;this.targetBtn=btn;var fingerDirction=config.f_direction;var radius=config.radius;var showCircle=config.halo;this.guidesystemConfig=config;if(this.m_hand.displayObject.destroyed){this.m_hand=Guide.GuideClickHand.createInstance()}this.m_hand.visible=true;Game.event.dispatch(GameEventKey.GameEventKey_VisibleTaskArrowUI,false);this.m_hand.m_c_hand_dir.selectedIndex=fingerDirction;this.m_hand.m_hand.m_t0.play(null,-1);this.m_hand.m_tcircle.stop();var guidePathConfig=Game.config.guidePath.getConfig(config.path_id);this.pathConfig=guidePathConfig;if(guidePathConfig&&GuideHelp.getIsOpenMenuByMenuId(guidePathConfig.menuid)==false){return}if(showCircle){this.m_hand.m_c_circle_visible.selectedIndex=0;this.m_hand.m_tcircle.play(null,-1)}else{this.m_hand.m_c_circle_visible.selectedIndex=1;this.m_hand.m_tcircle.stop()}var x=0;var y=0;if(this.isForce){var globalPos=btn.localToGlobal(btn.width>>1,btn.height>>1);x=globalPos.x;y=globalPos.y;this.m_hand.setXY(x,y);this.addChild(this.m_hand)}else{var guidePathConfig_1=Game.config.guidePath.getConfig(config.path_id);if(guidePathConfig_1&&GuideHelp.getIsOpenMenuByMenuId(guidePathConfig_1.menuid)){this.fingerParent=GuideHelp.getGuideMenuWindow(guidePathConfig_1,config);var addToBtn=false;if(guidePathConfig_1.add_btn==1||this.fingerParent==null){this.fingerParent=btn;addToBtn=true}if(guidePathConfig_1.add_btn==2){this.preListIndex=this.getFristChildIndex(config)}if(this.fingerParent instanceof Games.UnitAgent){var unitScale=this.fingerParent.unit.unitData.scaleFactor;var scale=1/unitScale*0.8;this.m_hand.setScale(scale,scale);var dir=(this.fingerParent.direction==Games.DirtionType.Right)?1:-1;this.m_hand.skewY=(this.fingerParent.direction==Games.DirtionType.Right)?0:180;var bound=this.fingerParent.getBounds();var centerX=-(bound.width/4+dir*this.m_hand.width*scale/2);var centerY=-(bound.height)*scale-this.m_hand.width/2;this.m_hand.displayObject.pos(centerX,centerY);this.fingerParent.unit.unitView.addGuidUI(this.m_hand)}else{this.fingerParent.displayObject.addChild(this.m_hand.displayObject);this.m_hand.setScale(1,1);this.m_hand.skewY=0;this.m_hand.setXY(0,0);this.setHandPosition();Laya.timer.frameLoop(2,this,this.updatePosition,[guidePathConfig_1],true)}}}};GuideUI.prototype.updatePosition=function(guidePathConfig){if(GuideHelp.getIsOpenMenuByMenuId(guidePathConfig.menuid)){this.setHandPosition()}else{this.clearBtnUpdatePosition()}};GuideUI.prototype.clearBtnUpdatePosition=function(){Laya.timer.clear(this,this.updatePosition)};GuideUI.prototype.getFristChildIndex=function(systemConfig){var index=GuideHelp.getFristChildIndex(systemConfig);return index};GuideUI.prototype.setHandPosition=function(){if(this.targetBtn&&this.fingerParent){this.m_hand.visible=this.targetBtn.visible;var globalPos=this.targetBtn.localToGlobal(this.targetBtn.width>>1,this.targetBtn.height>>1);var x=globalPos.x;var y=globalPos.y;this.fingerParent.globalToLocal(x,y,globalPos);this.m_hand.setXY(globalPos.x,globalPos.y);if(this.pathConfig.add_btn==2&&this.preListIndex!=this.getFristChildIndex(this.guidesystemConfig)){this.clearBtnUpdatePosition();this.recyclingHand()}}};GuideUI.prototype.hideHand=function(){this.clearBtnUpdatePosition();this.m_hand.visible=false;this.m_hand.m_hand.m_t0.stop();this.m_hand.m_c_circle_visible.selectedIndex=1;this.m_hand.m_tcircle.stop();Game.event.dispatch(GameEventKey.GameEventKey_VisibleTaskArrowUI,true)};GuideUI.prototype.showDialog=function(msg,position){this.m_visible.selectedIndex=GuideDialogType.Dialog;this.m_dialog.visible=true;this.m_dialog.m_dialog.text=msg;this.m_dialog.setXY(position.x,position.y)};GuideUI.prototype.hideDialog=function(){this.m_dialog.visible=false};GuideUI.prototype.showLeftDialog=function(url,name,msg,caller,tweenComplete,complete){var _this=this;this.hideHand();this.caller=caller;this.complete=complete;this.m_visible.selectedIndex=GuideDialogType.Left;this.m_left.m_dialog.text="";this.m_left.m_name.text=name;this.m_left.m_icon.icon=url;this.m_left.m_t0.play(Handler.create(null,function(){if(tweenComplete){tweenComplete()}_this.startTypeWrite(_this.m_left.m_dialog.m_title,msg)}))};GuideUI.prototype.showRightDialog=function(url,name,msg,caller,tweenComplete,complete){var _this=this;this.hideHand();this.caller=caller;this.complete=complete;this.m_visible.selectedIndex=GuideDialogType.Right;this.m_right.m_dialog.m_title.text="";this.m_right.m_name.text=name;this.m_right.m_icon.icon=url;this.m_right.m_t0.play(Handler.create(null,function(){if(tweenComplete){tweenComplete()}_this.startTypeWrite(_this.m_right.m_dialog.m_title,msg)}))};GuideUI.prototype.showNpcUI=function(config,caller,complete){if(caller===void 0){caller=null}if(complete===void 0){complete=null}var url=config.bodyIconUrl;var desc=config.ui_content;this.hideHand();this.caller=caller;this.complete=complete;this.m_visible.selectedIndex=GuideDialogType.Npc;this.m_npcIntroPanel.m_desc.text=desc;this.m_npcIntroPanel.m_name.text=config.name;this.m_npcIntroPanel.m_icon.icon=url;this.m_npcIntroPanel.m_closeBtn.onClick(this,this.onClickCloseBtn)};GuideUI.prototype.showHaiBao=function(msg,msg2,caller,complete){if(caller===void 0){caller=null}if(complete===void 0){complete=null}Game.sound.playSound(SoundKey.MM11_NewsPaperTop);this.alphaMask=0.5;this.caller=caller;this.complete=complete;this.m_visible.selectedIndex=GuideDialogType.HaiBao;this.m_haibao.m_icon.icon=Game.config.avatar.getConfig(contentFormatCustomId("{name}")).bodyIconUrl;this.m_haibao.m_title.text=msg;this.m_haibao.m_title2.text=msg2;this.m_haibao.onClick(this,this.onClickHaibaoCloseBtn)};GuideUI.prototype.onClickHaibaoCloseBtn=function(){this.m_haibao.offClick(this,this.onClickHaibaoCloseBtn);this.doComplete()};GuideUI.prototype.onClickCloseBtn=function(){this.m_npcIntroPanel.m_closeBtn.offClick(this,this.onClickCloseBtn);this.doComplete()};GuideUI.prototype.startTypeWrite=function(target,msg){var _this=this;if(this.typeWriteData==null){this.typeWriteData=Game.typeWrite.createTypeWrite()}this.typeWriteData.startTypeWrite(50,msg,target,function(){_this.doComplete()})};GuideUI.prototype.doComplete=function(){if(this.complete){if(this.caller){this.complete.apply(this.caller)}else{this.complete()}}};GuideUI.prototype.setForce=function(value){this.isForce=value};GuideUI.prototype.completeTypeWrite=function(){if(this.typeWriteData){this.typeWriteData.completeTypeWrite()}};GuideUI.prototype.clearTypeWrite=function(){if(this.typeWriteData){this.typeWriteData.stopTypeWrite()}};GuideUI.prototype.directComplete=function(){if(this.typeWriteData){this.typeWriteData.completeTypeWrite()}};GuideUI.prototype.playStartCar=function(){var _this=this;this.anima.m_c_anima.selectedIndex=9;this.m_bg.visible=true;this.anima.m_anima9.m_t0.setHook("speak",Handler.create(null,function(){_this.anima.m_anima9.m_c_visible_bg.selectedIndex=0;Game.story.triggerPlayStoryByType(Games.StoryTriggerType.Create,0,null,false,true)}));Game.guide.isPlayCar=true;Game.event.dispatch(GameEventKey.GameEventKey_VisibleMainUI,false);Game.sound.playSound(SoundKey.MM36_CarAcross);this.anima.m_anima9.m_t0.play(Handler.create(null,function(){Game.guide.isPlayCar=false;_this.m_c_anima.selectedIndex=0;_this.anima.removeFromParent();_this.anima.dispose();_this.anima=null;_this.unLoadAnimation();Game.event.dispatch(GameEventKey.GameEventKey_VisibleMainUI,true)}),1)};GuideUI.prototype.playOpenAnima=function(){var _this=this;this.alphaMask=0;this.hideAll();this.crossIndex=-1;this.m_c_anima.selectedIndex=1;this.m_container.m_skipBtn.visible=false;this.loadAnimation(function(){if(_this.anima==null){_this.anima=fgui.OpenAnima.OpenAnima.createInstance()}_this.m_container.addChildAt(_this.anima,0);_this.m_container.m_skipBtn.onClick(_this,_this.onClickNextBtn);_this.anima.addRelation(_this.m_container,fairygui.RelationType.Center_Center);_this.anima.setXY(0,0);var index=1;_this.nextAnima(index)})};GuideUI.prototype.onClickNextBtn=function(){if(this.curTrans){this.curTrans.stop()}Game.sound.stopAllSound();this.m_container.m_skipBtn.visible=false;if(this.index>=8){this.returnToHome()}else{this.index=this.crossIndexs[this.crossIndex+1];this.nextAnima(this.index)}};GuideUI.prototype.returnToHome=function(){Game.sound.musicVolume=1;this.m_container.m_skipBtn.visible=false;Game.sound.stopSound(this.sounds[this.crossIndex+1]);clearTimeout(this.showSkilBtnHandler);Game.guide.openHome()};GuideUI.prototype.playNextAnima=function(){console.log("动画",this.index,"播放完毕");if(this.index>=8){this.returnToHome()}else{this.index++;this.nextAnima(this.index)}};GuideUI.prototype.nextAnima=function(index){var _this=this;console.log("正在播放动画",index);this.index=index;clearTimeout(this.showSkilBtnHandler);this.anima.m_c_anima.selectedIndex=index;var com=this.anima.getChild("anima"+index);this.curTrans=com.getTransition("t0");if(this.crossIndexs.indexOf(index)>=0){this.m_container.m_skipBtn.visible=false;this.crossIndex=this.crossIndexs.indexOf(index);var com1=this.anima.getChild("anima"+index+"_1");var trans1=com1.getTransition("t0");trans1.setHook("end",Handler.create(null,function(){_this.showSkilBtnHandler=setTimeout(function(){_this.m_container.m_skipBtn.visible=true},1000)}));trans1.play(Handler.create(null,function(){console.log("过场动画",index,"播放完毕");_this.showSkilBtnHandler=setTimeout(function(){_this.m_container.m_skipBtn.visible=true},1000)}),1);console.log("播放过场音效");Game.sound.playMusic(SoundKey.MM50_FilmChangge);setTimeout(function(){_this.playMusic(_this.crossIndex+1)},1000)}if(this.curTrans){this.curTrans.play(Handler.create(null,function(){_this.playNextAnima()}),1);if(index==1){this.playMusic(0);this.showSkilBtnHandler=setTimeout(function(){_this.m_container.m_skipBtn.visible=true},1000)}}else{console.log("t0f======================================================",index)}};GuideUI.prototype.playMusic=function(index){if(this.sounds==null){if(User.info.sex==Proto.SE.EUserSex.boy){this.sounds=[SoundKey.MM46_FilmMale01,SoundKey.MM47_FilmMale02,SoundKey.MM48_FilmMale03,SoundKey.MM49_FilmMale04]}else{this.sounds=[SoundKey.MM42_FilmFemale01,SoundKey.MM43_FilmFemale02,SoundKey.MM44_FilmFemale03,SoundKey.MM45_FilmFemale04]}}Game.sound.playMusic(this.sounds[index],1)};GuideUI.prototype.loadAnimation=function(callback){GlobalModalWaiting.show(0,0);Game.asset.loadFguiByPackagename(Games.GuiPackageNames.OpenAnima,null,function(){callback&&callback();GlobalModalWaiting.hide()})};GuideUI.prototype.unLoadAnimation=function(){Game.asset.unloadFgui(Games.GuiPackageNames.OpenAnima)};return GuideUI}(Guide.GuideUIStruct));Guide.GuideUI=GuideUI})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var HandStruct=(function(_super){__extends(HandStruct,_super);function HandStruct(){return _super.call(this)||this}HandStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","Hand"))};HandStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};HandStruct.URL="ui://toebkrsrs9dx1e";HandStruct.DependPackages=["Guide"];return HandStruct}(fairygui.GComponent));Guide.HandStruct=HandStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var Hand=(function(_super){__extends(Hand,_super);function Hand(){return _super!==null&&_super.apply(this,arguments)||this}return Hand}(Guide.HandStruct));Guide.Hand=Hand})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var RecordBtnStruct=(function(_super){__extends(RecordBtnStruct,_super);function RecordBtnStruct(){return _super.call(this)||this}RecordBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","RecordBtn"))};RecordBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};RecordBtnStruct.URL="ui://toebkrsr7vaw1k";RecordBtnStruct.DependPackages=["Guide"];return RecordBtnStruct}(fairygui.GButton));Guide.RecordBtnStruct=RecordBtnStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var RecordBtn=(function(_super){__extends(RecordBtn,_super);function RecordBtn(){return _super!==null&&_super.apply(this,arguments)||this}return RecordBtn}(Guide.RecordBtnStruct));Guide.RecordBtn=RecordBtn})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var SkipBtnStruct=(function(_super){__extends(SkipBtnStruct,_super);function SkipBtnStruct(){return _super.call(this)||this}SkipBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","SkipBtn"))};SkipBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};SkipBtnStruct.URL="ui://toebkrsrboch2e";SkipBtnStruct.DependPackages=["Guide"];return SkipBtnStruct}(fairygui.GButton));Guide.SkipBtnStruct=SkipBtnStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var SkipBtn=(function(_super){__extends(SkipBtn,_super);function SkipBtn(){return _super!==null&&_super.apply(this,arguments)||this}return SkipBtn}(Guide.SkipBtnStruct));Guide.SkipBtn=SkipBtn})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var TextStruct=(function(_super){__extends(TextStruct,_super);function TextStruct(){return _super.call(this)||this}TextStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","Text"))};TextStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};TextStruct.URL="ui://toebkrsrfcz71r";TextStruct.DependPackages=["Guide"];return TextStruct}(fairygui.GLabel));Guide.TextStruct=TextStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var Text=(function(_super){__extends(Text,_super);function Text(){return _super!==null&&_super.apply(this,arguments)||this}return Text}(Guide.TextStruct));Guide.Text=Text})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var WarNewspaperHeadlinesStruct=(function(_super){__extends(WarNewspaperHeadlinesStruct,_super);function WarNewspaperHeadlinesStruct(){return _super.call(this)||this}WarNewspaperHeadlinesStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","WarNewspaperHeadlines"))};WarNewspaperHeadlinesStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_title2=(this.getChild("title2"))};WarNewspaperHeadlinesStruct.URL="ui://toebkrsr7vaw1l";WarNewspaperHeadlinesStruct.DependPackages=["Guide"];return WarNewspaperHeadlinesStruct}(fairygui.GComponent));Guide.WarNewspaperHeadlinesStruct=WarNewspaperHeadlinesStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var WarNewspaperHeadlines=(function(_super){__extends(WarNewspaperHeadlines,_super);function WarNewspaperHeadlines(){return _super!==null&&_super.apply(this,arguments)||this}return WarNewspaperHeadlines}(Guide.WarNewspaperHeadlinesStruct));Guide.WarNewspaperHeadlines=WarNewspaperHeadlines})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var ZhuIconStruct=(function(_super){__extends(ZhuIconStruct,_super);function ZhuIconStruct(){return _super.call(this)||this}ZhuIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Guide","ZhuIcon"))};ZhuIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};ZhuIconStruct.URL="ui://toebkrsrji9k1q";ZhuIconStruct.DependPackages=["Guide","Common"];return ZhuIconStruct}(fairygui.GLabel));Guide.ZhuIconStruct=ZhuIconStruct})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Guide;(function(Guide){var ZhuIcon=(function(_super){__extends(ZhuIcon,_super);function ZhuIcon(){return _super!==null&&_super.apply(this,arguments)||this}return ZhuIcon}(Guide.ZhuIconStruct));Guide.ZhuIcon=ZhuIcon})(Guide=fgui.Guide||(fgui.Guide={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GuideComplete;(function(GuideComplete){var CompletePanelStruct=(function(_super){__extends(CompletePanelStruct,_super);function CompletePanelStruct(){return _super.call(this)||this}CompletePanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GuideComplete","CompletePanel"))};CompletePanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_progressLabel=(this.getChild("progressLabel"));this.m_dialogPanel=(this.getChild("dialogPanel"));this.m_getBtn=(this.getChild("getBtn"))};CompletePanelStruct.URL="ui://pzh67t5bdu0d3";CompletePanelStruct.DependPackages=["GuideComplete","Common"];return CompletePanelStruct}(fairygui.GComponent));GuideComplete.CompletePanelStruct=CompletePanelStruct})(GuideComplete=fgui.GuideComplete||(fgui.GuideComplete={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GuideComplete;(function(GuideComplete){var CompletePanel=(function(_super){__extends(CompletePanel,_super);function CompletePanel(){return _super!==null&&_super.apply(this,arguments)||this}CompletePanel.prototype.onWindowShow=function(){this.m_getBtn.onClick(this,this.onClickGetBtn);this.m_dialogPanel.m_closeBtn.onClick(this,this.onClickCloseBtn);this.visible=true;this.updateView()};CompletePanel.prototype.onClickCloseBtn=function(){this.moduleWindow.menuClose()};CompletePanel.prototype.onWindowHide=function(){this.m_getBtn.offClick(this,this.onClickGetBtn)};CompletePanel.prototype.onClickGetBtn=function(){Game.protosender.BeginnerGuide.GuideEndReward();this.onClickCloseBtn()};CompletePanel.prototype.updateView=function(){var remain=Game.moduleModel.task.remainMainTaskCount;var count=Game.moduleModel.task.allMainTaskCount;var remainTxt="";if(remain>0){this.m_getBtn.enabled=false;this.m_getBtn.grayed=true;remainTxt="当前进度：[color=#e02f2b]{0}[/color]/{1}"}else{this.m_getBtn.enabled=true;this.m_getBtn.grayed=false;remainTxt="当前进度：[color=#57ff36]{0}[/color]/{1}"}this.m_getBtn.text=TEXT.GuideCompleteGetBtnTitle;this.m_progressLabel.text=format(remainTxt,count-remain,count);this.m_dialogPanel.m_title.text=TEXT.GuideCompleteRewardTitle;var id=Game.moduleModel.task.guideCompleteRewardID;var actorConfig=Game.config.actor.getConfig(id);if(actorConfig){this.m_icon.icon=ImageConfig.getUrl(GlobalConfig.getValue4(GlobalKey.maintask_complete_image))}};return CompletePanel}(GuideComplete.CompletePanelStruct));GuideComplete.CompletePanel=CompletePanel})(GuideComplete=fgui.GuideComplete||(fgui.GuideComplete={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GuideComplete;(function(GuideComplete){var GuideCompleteUIStruct=(function(_super){__extends(GuideCompleteUIStruct,_super);function GuideCompleteUIStruct(){return _super.call(this)||this}GuideCompleteUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("GuideComplete","GuideCompleteUI"))};GuideCompleteUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_panel=(this.getChild("panel"))};GuideCompleteUIStruct.URL="ui://pzh67t5bdu0d0";GuideCompleteUIStruct.DependPackages=["GuideComplete","Common"];return GuideCompleteUIStruct}(fairygui.GComponent));GuideComplete.GuideCompleteUIStruct=GuideCompleteUIStruct})(GuideComplete=fgui.GuideComplete||(fgui.GuideComplete={}))})(fgui||(fgui={}));var fgui;(function(fgui){var GuideComplete;(function(GuideComplete){var GuideCompleteUI=(function(_super){__extends(GuideCompleteUI,_super);function GuideCompleteUI(){return _super!==null&&_super.apply(this,arguments)||this}GuideCompleteUI.prototype.onWindowShow=function(){};GuideCompleteUI.prototype.onWindowHide=function(){};return GuideCompleteUI}(GuideComplete.GuideCompleteUIStruct));GuideComplete.GuideCompleteUI=GuideCompleteUI})(GuideComplete=fgui.GuideComplete||(fgui.GuideComplete={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LangEn;(function(LangEn){var SkipBtnStruct=(function(_super){__extends(SkipBtnStruct,_super);function SkipBtnStruct(){return _super.call(this)||this}SkipBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("LangEn","SkipBtn"))};SkipBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};SkipBtnStruct.URL="ui://8xeoljnbboch5";SkipBtnStruct.DependPackages=["LangEn"];return SkipBtnStruct}(fairygui.GButton));LangEn.SkipBtnStruct=SkipBtnStruct})(LangEn=fgui.LangEn||(fgui.LangEn={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LangEn;(function(LangEn){var SkipBtn=(function(_super){__extends(SkipBtn,_super);function SkipBtn(){return _super!==null&&_super.apply(this,arguments)||this}return SkipBtn}(LangEn.SkipBtnStruct));LangEn.SkipBtn=SkipBtn})(LangEn=fgui.LangEn||(fgui.LangEn={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LangZhCn;(function(LangZhCn){var SkipBtnStruct=(function(_super){__extends(SkipBtnStruct,_super);function SkipBtnStruct(){return _super.call(this)||this}SkipBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("LangZhCn","SkipBtn"))};SkipBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};SkipBtnStruct.URL="ui://8okuue74boch3";SkipBtnStruct.DependPackages=["LangZhCn","LangEn"];return SkipBtnStruct}(fairygui.GButton));LangZhCn.SkipBtnStruct=SkipBtnStruct})(LangZhCn=fgui.LangZhCn||(fgui.LangZhCn={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LangZhCn;(function(LangZhCn){var SkipBtn=(function(_super){__extends(SkipBtn,_super);function SkipBtn(){return _super!==null&&_super.apply(this,arguments)||this}return SkipBtn}(LangZhCn.SkipBtnStruct));LangZhCn.SkipBtn=SkipBtn})(LangZhCn=fgui.LangZhCn||(fgui.LangZhCn={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LevelPackage;(function(LevelPackage){var Component1Struct=(function(_super){__extends(Component1Struct,_super);function Component1Struct(){return _super.call(this)||this}Component1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("LevelPackage","Component1"))};Component1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_starList=(this.getChild("starList"));this.m_title=(this.getChild("title"))};Component1Struct.URL="ui://7w6h9vntndr0o";Component1Struct.DependPackages=["LevelPackage"];return Component1Struct}(fairygui.GComponent));LevelPackage.Component1Struct=Component1Struct})(LevelPackage=fgui.LevelPackage||(fgui.LevelPackage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LevelPackage;(function(LevelPackage){var Component1=(function(_super){__extends(Component1,_super);function Component1(){return _super!==null&&_super.apply(this,arguments)||this}Component1.prototype.setItemNumDataForData=function(data){this.m_icon.url=data.itemIconUrl;this.m_title.text=formatNumberUnit(data.itemNum);this.m_starList.numItems=data.itemStar};return Component1}(LevelPackage.Component1Struct));LevelPackage.Component1=Component1})(LevelPackage=fgui.LevelPackage||(fgui.LevelPackage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LevelPackage;(function(LevelPackage){var CupGiftMainStruct=(function(_super){__extends(CupGiftMainStruct,_super);function CupGiftMainStruct(){return _super.call(this)||this}CupGiftMainStruct.createInstance=function(){return(fairygui.UIPackage.createObject("LevelPackage","CupGiftMain"))};CupGiftMainStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_pic=(this.getChild("pic"));this.m_title=(this.getChild("title"));this.m_delayTime=(this.getChild("delayTime"));this.m_dialogPanel=(this.getChild("dialogPanel"));this.m_okBtn=(this.getChild("okBtn"))};CupGiftMainStruct.URL="ui://7w6h9vntmpdx1";CupGiftMainStruct.DependPackages=["LevelPackage","Common","WarMovie"];return CupGiftMainStruct}(fairygui.GComponent));LevelPackage.CupGiftMainStruct=CupGiftMainStruct})(LevelPackage=fgui.LevelPackage||(fgui.LevelPackage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LevelPackage;(function(LevelPackage){var CupGiftMain=(function(_super){__extends(CupGiftMain,_super);function CupGiftMain(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.canGet=false;return _this}CupGiftMain.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialogPanel.m_closeBtn.onClick(this,this.onClickCloseBtn);this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_title.text=TEXT.systemTip};CupGiftMain.prototype.onClickCloseBtn=function(){this.moduleWindow.menuBack()};CupGiftMain.prototype.onClickOkBtn=function(){if(this.canGet){Game.protosender.smallTarget.CupGift()}else{Game.system.toastText(TEXT.CantGetReward)}};CupGiftMain.prototype.onWindowShow=function(){this.setData();Game.moduleModel.targetPackage.sGetCupGiftSignal.add(this.sGetLevelGiftSignal,this);Game.moduleModel.targetPackage.sCupSignalUpdate.add(this.sCupSignalUpdate,this)};CupGiftMain.prototype.onWindowHide=function(){Game.moduleModel.targetPackage.sGetCupGiftSignal.remove(this.sGetLevelGiftSignal,this);Game.moduleModel.targetPackage.sCupSignalUpdate.remove(this.sCupSignalUpdate,this)};CupGiftMain.prototype.setData=function(){this.conf=Game.moduleModel.targetPackage.getCupConfig();this.m_pic.icon=ImageConfig.getUrl(this.conf.image);this.canGet=Game.moduleModel.targetPackage.cupGiftData.process>=this.conf.target_num;this.m_okBtn.grayed=!this.canGet};CupGiftMain.prototype.sGetLevelGiftSignal=function(giftId){var _this=this;var rewardConf=Game.config.cupPackage.getConfig(giftId);Game.system.getItemText(rewardConf.reward,function(){_this.onClickCloseBtn()},false)};CupGiftMain.prototype.sCupSignalUpdate=function(str){this.m_delayTime.text=str};return CupGiftMain}(LevelPackage.CupGiftMainStruct));LevelPackage.CupGiftMain=CupGiftMain})(LevelPackage=fgui.LevelPackage||(fgui.LevelPackage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LevelPackage;(function(LevelPackage){var LevelPackageMainStruct=(function(_super){__extends(LevelPackageMainStruct,_super);function LevelPackageMainStruct(){return _super.call(this)||this}LevelPackageMainStruct.createInstance=function(){return(fairygui.UIPackage.createObject("LevelPackage","LevelPackageMain"))};LevelPackageMainStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_isOver=this.getController("isOver");this.m_pic=(this.getChild("pic"));this.m_rewardList=(this.getChild("rewardList"));this.m_title=(this.getChild("title"));this.m_overTitle=(this.getChild("overTitle"));this.m_overTitle2=(this.getChild("overTitle2"));this.m_dialogPanel=(this.getChild("dialogPanel"));this.m_tip1=(this.getChild("tip1"));this.m_tip2=(this.getChild("tip2"));this.m_okBtn=(this.getChild("okBtn"))};LevelPackageMainStruct.URL="ui://7w6h9vntndr0l";LevelPackageMainStruct.DependPackages=["LevelPackage","Common","WarMovie"];return LevelPackageMainStruct}(fairygui.GComponent));LevelPackage.LevelPackageMainStruct=LevelPackageMainStruct})(LevelPackage=fgui.LevelPackage||(fgui.LevelPackage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LevelPackage;(function(LevelPackage){var LevelPackageMain=(function(_super){__extends(LevelPackageMain,_super);function LevelPackageMain(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.canGet=false;return _this}LevelPackageMain.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialogPanel.m_closeBtn.onClick(this,this.onClickCloseBtn);this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_title.text=TEXT.systemTip;this.m_rewardList.itemRenderer=Handler.create(this,this.targetItem,null,false);this.m_rewardList.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem)};LevelPackageMain.prototype.onClickCloseBtn=function(){this.moduleWindow.menuBack()};LevelPackageMain.prototype.onClickOkBtn=function(){if(this.canGet){Game.protosender.smallTarget.LevGift()}else{Game.system.toastText(TEXT.CantGetReward)}};LevelPackageMain.prototype.onWindowShow=function(){this.setData();Game.moduleModel.targetPackage.sGetLevelGiftSignal.add(this.sGetLevelGiftSignal,this)};LevelPackageMain.prototype.onWindowHide=function(){Game.moduleModel.targetPackage.sGetLevelGiftSignal.remove(this.sGetLevelGiftSignal,this)};LevelPackageMain.prototype.setData=function(){this.conf=Game.moduleModel.targetPackage.getTargetConfig();this.m_tip1.m_title.text=format(TEXT.GiftTipTitle,this.conf.player_level);this.m_rewardList.numItems=this.conf.reward.length;if(this.conf.next_id===0){this.m_isOver.setSelectedIndex(1)}else{var nextConf=Game.config.levelGiftPackage.getConfig(this.conf.next_id);this.m_tip2.m_title.text=format(TEXT.NextRewardTip,nextConf.player_level);this.m_isOver.setSelectedIndex(0)}this.m_pic.icon=ImageConfig.getUrl(this.conf.image);this.canGet=User.info.level>=this.conf.player_level;this.m_okBtn.grayed=!this.canGet};LevelPackageMain.prototype.targetItem=function(index,obj){var item=obj;item.setItemNumDataForData(this.conf.reward[index])};LevelPackageMain.prototype.onClickItem=function(obj){var index=this.m_rewardList.getChildIndex(obj);var realIndex=this.m_rewardList.childIndexToItemIndex(index);Game.system.showItemInfo(obj,this.conf.reward[realIndex].itemId)};LevelPackageMain.prototype.sGetLevelGiftSignal=function(giftId){var _this=this;var rewardConf=Game.config.levelGiftPackage.getConfig(giftId);Game.system.getItemText(rewardConf.reward,function(){_this.onClickCloseBtn()},false)};return LevelPackageMain}(LevelPackage.LevelPackageMainStruct));LevelPackage.LevelPackageMain=LevelPackageMain})(LevelPackage=fgui.LevelPackage||(fgui.LevelPackage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LevelPackage;(function(LevelPackage){var TipStruct=(function(_super){__extends(TipStruct,_super);function TipStruct(){return _super.call(this)||this}TipStruct.createInstance=function(){return(fairygui.UIPackage.createObject("LevelPackage","Tip"))};TipStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};TipStruct.URL="ui://7w6h9vntn939p";TipStruct.DependPackages=["LevelPackage"];return TipStruct}(fairygui.GComponent));LevelPackage.TipStruct=TipStruct})(LevelPackage=fgui.LevelPackage||(fgui.LevelPackage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var LevelPackage;(function(LevelPackage){var Tip=(function(_super){__extends(Tip,_super);function Tip(){return _super!==null&&_super.apply(this,arguments)||this}return Tip}(LevelPackage.TipStruct));LevelPackage.Tip=Tip})(LevelPackage=fgui.LevelPackage||(fgui.LevelPackage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var AccountComboBoxStruct=(function(_super){__extends(AccountComboBoxStruct,_super);function AccountComboBoxStruct(){return _super.call(this)||this}AccountComboBoxStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","AccountComboBox"))};AccountComboBoxStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_button=(this.getChild("button"))};AccountComboBoxStruct.URL="ui://7znsj5i6dl322a";AccountComboBoxStruct.DependPackages=["Login"];return AccountComboBoxStruct}(fairygui.GComboBox));Login.AccountComboBoxStruct=AccountComboBoxStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var AccountComboBox=(function(_super){__extends(AccountComboBox,_super);function AccountComboBox(){return _super!==null&&_super.apply(this,arguments)||this}return AccountComboBox}(Login.AccountComboBoxStruct));Login.AccountComboBox=AccountComboBox})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var AccountInputStruct=(function(_super){__extends(AccountInputStruct,_super);function AccountInputStruct(){return _super.call(this)||this}AccountInputStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","accountInput"))};AccountInputStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_txt_account=(this.getChild("txt_account"));this.m_accountComboBox=(this.getChild("accountComboBox"));this.m_button=(this.getChild("button"))};AccountInputStruct.URL="ui://7znsj5i6cpc91k";AccountInputStruct.DependPackages=["Login"];return AccountInputStruct}(fairygui.GComponent));Login.AccountInputStruct=AccountInputStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var AccountInput=(function(_super){__extends(AccountInput,_super);function AccountInput(){return _super!==null&&_super.apply(this,arguments)||this}return AccountInput}(Login.AccountInputStruct));Login.AccountInput=AccountInput})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var AgreementStruct=(function(_super){__extends(AgreementStruct,_super);function AgreementStruct(){return _super.call(this)||this}AgreementStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","Agreement"))};AgreementStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_text=(this.getChild("text"));this.m_btn_closeAgreement=(this.getChild("btn_closeAgreement"))};AgreementStruct.URL="ui://7znsj5i6cpc91p";AgreementStruct.DependPackages=["Login"];return AgreementStruct}(fairygui.GComponent));Login.AgreementStruct=AgreementStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Agreement=(function(_super){__extends(Agreement,_super);function Agreement(){return _super!==null&&_super.apply(this,arguments)||this}Agreement.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btn_closeAgreement.onClick(this,this.onClickBack)};Agreement.prototype.onClickBack=function(){this.moduleWindow.backTab()};return Agreement}(Login.AgreementStruct));Login.Agreement=Agreement})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_accountlistStruct=(function(_super){__extends(Btn_accountlistStruct,_super);function Btn_accountlistStruct(){return _super.call(this)||this}Btn_accountlistStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_accountlist"))};Btn_accountlistStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_accountlistStruct.URL="ui://7znsj5i6eiknl";Btn_accountlistStruct.DependPackages=["Login"];return Btn_accountlistStruct}(fairygui.GButton));Login.Btn_accountlistStruct=Btn_accountlistStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_accountlist=(function(_super){__extends(Btn_accountlist,_super);function Btn_accountlist(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_accountlist}(Login.Btn_accountlistStruct));Login.Btn_accountlist=Btn_accountlist})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_accoutsecStruct=(function(_super){__extends(Btn_accoutsecStruct,_super);function Btn_accoutsecStruct(){return _super.call(this)||this}Btn_accoutsecStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_accoutsec"))};Btn_accoutsecStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_accoutsecStruct.URL="ui://7znsj5i6eikno";Btn_accoutsecStruct.DependPackages=["Login"];return Btn_accoutsecStruct}(fairygui.GButton));Login.Btn_accoutsecStruct=Btn_accoutsecStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_accoutsec=(function(_super){__extends(Btn_accoutsec,_super);function Btn_accoutsec(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_accoutsec}(Login.Btn_accoutsecStruct));Login.Btn_accoutsec=Btn_accoutsec})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_backStruct=(function(_super){__extends(Btn_backStruct,_super);function Btn_backStruct(){return _super.call(this)||this}Btn_backStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_back"))};Btn_backStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_backStruct.URL="ui://7znsj5i68zgr1g";Btn_backStruct.DependPackages=["Login"];return Btn_backStruct}(fairygui.GButton));Login.Btn_backStruct=Btn_backStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_back=(function(_super){__extends(Btn_back,_super);function Btn_back(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_back}(Login.Btn_backStruct));Login.Btn_back=Btn_back})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_closeAgreementStruct=(function(_super){__extends(Btn_closeAgreementStruct,_super);function Btn_closeAgreementStruct(){return _super.call(this)||this}Btn_closeAgreementStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_closeAgreement"))};Btn_closeAgreementStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_closeAgreementStruct.URL="ui://7znsj5i68zgr1h";Btn_closeAgreementStruct.DependPackages=["Login"];return Btn_closeAgreementStruct}(fairygui.GButton));Login.Btn_closeAgreementStruct=Btn_closeAgreementStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_closeAgreement=(function(_super){__extends(Btn_closeAgreement,_super);function Btn_closeAgreement(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_closeAgreement}(Login.Btn_closeAgreementStruct));Login.Btn_closeAgreement=Btn_closeAgreement})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_forgotStruct=(function(_super){__extends(Btn_forgotStruct,_super);function Btn_forgotStruct(){return _super.call(this)||this}Btn_forgotStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_forgot"))};Btn_forgotStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_Title=(this.getChild("Title"))};Btn_forgotStruct.URL="ui://7znsj5i6eiknn";Btn_forgotStruct.DependPackages=["Login"];return Btn_forgotStruct}(fairygui.GButton));Login.Btn_forgotStruct=Btn_forgotStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_forgot=(function(_super){__extends(Btn_forgot,_super);function Btn_forgot(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_forgot}(Login.Btn_forgotStruct));Login.Btn_forgot=Btn_forgot})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_guestStruct=(function(_super){__extends(Btn_guestStruct,_super);function Btn_guestStruct(){return _super.call(this)||this}Btn_guestStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_guest"))};Btn_guestStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_guestStruct.URL="ui://7znsj5i6eiknk";Btn_guestStruct.DependPackages=["Login"];return Btn_guestStruct}(fairygui.GButton));Login.Btn_guestStruct=Btn_guestStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_guest=(function(_super){__extends(Btn_guest,_super);function Btn_guest(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_guest}(Login.Btn_guestStruct));Login.Btn_guest=Btn_guest})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_guestloginStruct=(function(_super){__extends(Btn_guestloginStruct,_super);function Btn_guestloginStruct(){return _super.call(this)||this}Btn_guestloginStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_guestlogin"))};Btn_guestloginStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_guestloginStruct.URL="ui://7znsj5i68zgr1i";Btn_guestloginStruct.DependPackages=["Login"];return Btn_guestloginStruct}(fairygui.GButton));Login.Btn_guestloginStruct=Btn_guestloginStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_guestlogin=(function(_super){__extends(Btn_guestlogin,_super);function Btn_guestlogin(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_guestlogin}(Login.Btn_guestloginStruct));Login.Btn_guestlogin=Btn_guestlogin})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_linkaccountStruct=(function(_super){__extends(Btn_linkaccountStruct,_super);function Btn_linkaccountStruct(){return _super.call(this)||this}Btn_linkaccountStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_linkaccount"))};Btn_linkaccountStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_linkaccountStruct.URL="ui://7znsj5i68zgr1j";Btn_linkaccountStruct.DependPackages=["Login","System"];return Btn_linkaccountStruct}(fairygui.GButton));Login.Btn_linkaccountStruct=Btn_linkaccountStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_linkaccount=(function(_super){__extends(Btn_linkaccount,_super);function Btn_linkaccount(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_linkaccount}(Login.Btn_linkaccountStruct));Login.Btn_linkaccount=Btn_linkaccount})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_loginStruct=(function(_super){__extends(Btn_loginStruct,_super);function Btn_loginStruct(){return _super.call(this)||this}Btn_loginStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_login"))};Btn_loginStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};Btn_loginStruct.URL="ui://7znsj5i6eikni";Btn_loginStruct.DependPackages=["Login","System"];return Btn_loginStruct}(fairygui.GButton));Login.Btn_loginStruct=Btn_loginStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_login=(function(_super){__extends(Btn_login,_super);function Btn_login(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_login}(Login.Btn_loginStruct));Login.Btn_login=Btn_login})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_nextStruct=(function(_super){__extends(Btn_nextStruct,_super);function Btn_nextStruct(){return _super.call(this)||this}Btn_nextStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_next"))};Btn_nextStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};Btn_nextStruct.URL="ui://7znsj5i6cpc91y";Btn_nextStruct.DependPackages=["Login","System"];return Btn_nextStruct}(fairygui.GButton));Login.Btn_nextStruct=Btn_nextStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_next=(function(_super){__extends(Btn_next,_super);function Btn_next(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_next}(Login.Btn_nextStruct));Login.Btn_next=Btn_next})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_onRegisterStruct=(function(_super){__extends(Btn_onRegisterStruct,_super);function Btn_onRegisterStruct(){return _super.call(this)||this}Btn_onRegisterStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_onRegister"))};Btn_onRegisterStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_onRegisterStruct.URL="ui://7znsj5i68zgr1e";Btn_onRegisterStruct.DependPackages=["Login","System"];return Btn_onRegisterStruct}(fairygui.GButton));Login.Btn_onRegisterStruct=Btn_onRegisterStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_onRegister=(function(_super){__extends(Btn_onRegister,_super);function Btn_onRegister(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_onRegister}(Login.Btn_onRegisterStruct));Login.Btn_onRegister=Btn_onRegister})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_pwdeyeStruct=(function(_super){__extends(Btn_pwdeyeStruct,_super);function Btn_pwdeyeStruct(){return _super.call(this)||this}Btn_pwdeyeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_pwdeye"))};Btn_pwdeyeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_pwdeyeStruct.URL="ui://7znsj5i6eiknm";Btn_pwdeyeStruct.DependPackages=["Login"];return Btn_pwdeyeStruct}(fairygui.GButton));Login.Btn_pwdeyeStruct=Btn_pwdeyeStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_pwdeye=(function(_super){__extends(Btn_pwdeye,_super);function Btn_pwdeye(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_pwdeye}(Login.Btn_pwdeyeStruct));Login.Btn_pwdeye=Btn_pwdeye})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_registerStruct=(function(_super){__extends(Btn_registerStruct,_super);function Btn_registerStruct(){return _super.call(this)||this}Btn_registerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_register"))};Btn_registerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_registerStruct.URL="ui://7znsj5i6eiknj";Btn_registerStruct.DependPackages=["Login","System"];return Btn_registerStruct}(fairygui.GButton));Login.Btn_registerStruct=Btn_registerStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_register=(function(_super){__extends(Btn_register,_super);function Btn_register(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_register}(Login.Btn_registerStruct));Login.Btn_register=Btn_register})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_userAgreementStruct=(function(_super){__extends(Btn_userAgreementStruct,_super);function Btn_userAgreementStruct(){return _super.call(this)||this}Btn_userAgreementStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","btn_userAgreement"))};Btn_userAgreementStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};Btn_userAgreementStruct.URL="ui://7znsj5i68zgr1f";Btn_userAgreementStruct.DependPackages=["Login"];return Btn_userAgreementStruct}(fairygui.GButton));Login.Btn_userAgreementStruct=Btn_userAgreementStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Btn_userAgreement=(function(_super){__extends(Btn_userAgreement,_super);function Btn_userAgreement(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_userAgreement}(Login.Btn_userAgreementStruct));Login.Btn_userAgreement=Btn_userAgreement})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var CommonTapeStruct=(function(_super){__extends(CommonTapeStruct,_super);function CommonTapeStruct(){return _super.call(this)||this}CommonTapeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","CommonTape"))};CommonTapeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t1=this.getTransition("t1")};CommonTapeStruct.URL="ui://7znsj5i6wrr65o";CommonTapeStruct.DependPackages=["Login"];return CommonTapeStruct}(fairygui.GComponent));Login.CommonTapeStruct=CommonTapeStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var CommonTape=(function(_super){__extends(CommonTape,_super);function CommonTape(){return _super!==null&&_super.apply(this,arguments)||this}return CommonTape}(Login.CommonTapeStruct));Login.CommonTape=CommonTape})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var CreatRoleStruct=(function(_super){__extends(CreatRoleStruct,_super);function CreatRoleStruct(){return _super.call(this)||this}CreatRoleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","CreatRole"))};CreatRoleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_roleSelect=this.getController("roleSelect");this.m_sex=(this.getChild("sex"));this.m_title_sex=(this.getChild("title_sex"));this.m_sexTip=(this.getChild("sexTip"));this.m_nameInput=(this.getChild("nameInput"));this.m_btn_next=(this.getChild("btn_next"));this.m_randomButton=(this.getChild("randomButton"));this.m_initialActor=(this.getChild("initialActor"))};CreatRoleStruct.URL="ui://7znsj5i6cpc91r";CreatRoleStruct.DependPackages=["Login","Fx"];return CreatRoleStruct}(fairygui.GComponent));Login.CreatRoleStruct=CreatRoleStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var CreatRole=(function(_super){__extends(CreatRole,_super);function CreatRole(){return _super!==null&&_super.apply(this,arguments)||this}CreatRole.prototype.onWindowInited=function(){this.m_sex.on(fairygui.Events.CLICK_ITEM,this,this.onSelectSex);this.m_nameInput.m_txt_account.promptText=Games.TEXT.TipEnterRoleName;this.m_nameInput.m_txt_account.on(laya.events.Event.INPUT,this,this.onInputName);this.m_sexTip.text=Games.TEXT.SexTip;this.m_randomButton.onClick(this,this.onClickRandomName);this.m_btn_next.onClick(this,this.onClickNext)};CreatRole.prototype.onWindowShow=function(){this.checkPage()};CreatRole.prototype.checkPage=function(){if(this.sex!=-1){if(isNullOrEmpty(this.rolename)){this.m_roleSelect.selectedIndex=1}else{this.m_roleSelect.selectedIndex=2}}else{this.m_roleSelect.selectedIndex=0;if(Login.InitialActor){this.m_sexTip.visible=false}}};CreatRole.prototype.onSelectSex=function(){this.checkPage()};CreatRole.prototype.onInputName=function(){this.checkPage()};CreatRole.prototype.onClickRandomName=function(){this.rolename=getRandomRoleName();this.checkPage()};Object.defineProperty(CreatRole.prototype,"rolename",{get:function(){return this.m_nameInput.m_txt_account.text.trim()},set:function(value){this.m_nameInput.m_txt_account.text=value},enumerable:true,configurable:true});Object.defineProperty(CreatRole.prototype,"sex",{get:function(){switch(this.m_sex.selectedIndex){case 0:return Proto.SE.EUserSex.boy;case 1:return Proto.SE.EUserSex.girl}return -1},set:function(value){switch(value){case Proto.SE.EUserSex.boy:this.m_sex.selectedIndex=0;break;case Proto.SE.EUserSex.girl:this.m_sex.selectedIndex=1;break}},enumerable:true,configurable:true});CreatRole.prototype.onClickNext=function(){if(!validateRoleName(this.rolename)){return false}Game.protosender.GameData.InitGameData(this.rolename,this.sex)};return CreatRole}(Login.CreatRoleStruct));Login.CreatRole=CreatRole})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var InitialActorStruct=(function(_super){__extends(InitialActorStruct,_super);function InitialActorStruct(){return _super.call(this)||this}InitialActorStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","InitialActor"))};InitialActorStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_des=(this.getChild("des"));this.m_actorGroup=(this.getChild("actorGroup"));this.m_btn_next=(this.getChild("btn_next"))};InitialActorStruct.URL="ui://7znsj5i6oh1c2z";InitialActorStruct.DependPackages=["Login","Fx"];return InitialActorStruct}(fairygui.GComponent));Login.InitialActorStruct=InitialActorStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var InitialActor=(function(_super){__extends(InitialActor,_super);function InitialActor(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.selectIndex=-1;_this.actorItems=[];return _this}InitialActor.prototype.onWindowInited=function(){var bgUrl=["card_as","card_eu","card_na"];console.log(this.packageItem.owner.name);this.m_btn_next.onClick(this,this.onClickNext);var index=1;for(var i=0;i<this.m_actorGroup.numChildren;i++){var item=this.m_actorGroup.getChildAt(i);if(item.name.startsWith("actorItem")){var actorId=Game.config.initialActor.getConfig(index).actor_id;var bgIndex=Mathf.clamp(index-1,0,bgUrl.length);item.m_bg.url="ui://"+this.packageItem.owner.name+"/"+bgUrl[bgIndex];item.icon=Game.config.actor.getConfig(actorId).avatarConfig.bodyIconUrl;item.onClick(this,this.onClickActorItem,[index]);index++;this.actorItems.push(item)}}this.m_btn_next.visible=false};InitialActor.prototype.onClickActorItem=function(index){for(var i=0;i<this.actorItems.length;i++){if(i!=index-1){this.actorItems[i].selected=false}}this.selectIndex=index;this.m_btn_next.visible=true};InitialActor.prototype.onClickNext=function(){Game.protosender.GameData.GetInitActor(this.selectIndex)};return InitialActor}(Login.InitialActorStruct));Login.InitialActor=InitialActor})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var InitialActorGroupStruct=(function(_super){__extends(InitialActorGroupStruct,_super);function InitialActorGroupStruct(){return _super.call(this)||this}InitialActorGroupStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","InitialActorGroup"))};InitialActorGroupStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_actorItem0=(this.getChild("actorItem0"));this.m_actorItem2=(this.getChild("actorItem2"));this.m_actorItem3=(this.getChild("actorItem3"))};InitialActorGroupStruct.URL="ui://7znsj5i6oh1c35";InitialActorGroupStruct.DependPackages=["Login"];return InitialActorGroupStruct}(fairygui.GComponent));Login.InitialActorGroupStruct=InitialActorGroupStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var InitialActorGroup=(function(_super){__extends(InitialActorGroup,_super);function InitialActorGroup(){return _super!==null&&_super.apply(this,arguments)||this}return InitialActorGroup}(Login.InitialActorGroupStruct));Login.InitialActorGroup=InitialActorGroup})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var InitialActorItemStruct=(function(_super){__extends(InitialActorItemStruct,_super);function InitialActorItemStruct(){return _super.call(this)||this}InitialActorItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","InitialActorItem"))};InitialActorItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_bg=(this.getChild("bg"));this.m_icon=(this.getChild("icon"))};InitialActorItemStruct.URL="ui://7znsj5i6oh1c33";InitialActorItemStruct.DependPackages=["Login"];return InitialActorItemStruct}(fairygui.GButton));Login.InitialActorItemStruct=InitialActorItemStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var InitialActorItem=(function(_super){__extends(InitialActorItem,_super);function InitialActorItem(){return _super!==null&&_super.apply(this,arguments)||this}return InitialActorItem}(Login.InitialActorItemStruct));Login.InitialActorItem=InitialActorItem})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var LoginStruct=(function(_super){__extends(LoginStruct,_super);function LoginStruct(){return _super.call(this)||this}LoginStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","Login"))};LoginStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_accountInput=(this.getChild("accountInput"));this.m_passwordInput=(this.getChild("passwordInput"));this.m_btn_forgot=(this.getChild("btn_forgot"));this.m_btn_security=(this.getChild("btn_security"));this.m_btn_login=(this.getChild("btn_login"));this.m_btn_register=(this.getChild("btn_register"));this.m_btn_guest=(this.getChild("btn_guest"))};LoginStruct.URL="ui://7znsj5i6cpc91m";LoginStruct.DependPackages=["Login"];return LoginStruct}(fairygui.GComponent));Login.LoginStruct=LoginStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login_1){var Login=(function(_super){__extends(Login,_super);function Login(){return _super!==null&&_super.apply(this,arguments)||this}Login.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btn_login.onClick(this,this.onClickLogin);this.m_btn_register.onClick(this,this.onClickRegister);this.m_btn_guest.onClick(this,this.onClickGuest);this.popupMenu=Login_1.PopupMenu.createInstance();this.popupMenu.mainButton=this.m_accountInput.m_button;this.popupMenu.sOnSelect.add(this.onSelectePopupItem,this);this.popupMenu.center();this.m_accountInput.m_button.onClick(this,this.onClickPopupButton)};Login.prototype.onWindowShow=function(){this.popupMenu.setListData(Game.localStorage.useraccountList)};Login.prototype.onClickPopupButton=function(){fairygui.GRoot.inst.showPopup(this.popupMenu,this.m_accountInput,true)};Login.prototype.onSelectePopupItem=function(data){this.account=data.username;this.password=data.password};Object.defineProperty(Login.prototype,"account",{get:function(){return this.m_accountInput.m_txt_account.text.trim()},set:function(value){this.m_accountInput.m_txt_account.text=value},enumerable:true,configurable:true});Object.defineProperty(Login.prototype,"password",{get:function(){return this.m_passwordInput.m_txt_password.text},set:function(value){this.m_passwordInput.m_txt_password.text=value},enumerable:true,configurable:true});Login.prototype.onClickLogin=function(){Game.protosender.account.Auth(this.account,this.password)};Login.prototype.onClickRegister=function(){this.moduleWindow.conent.m_register.isFromGuest=false;this.moduleWindow.openTab(Games.LoginTabType.Register)};Login.prototype.onClickGuest=function(){if(Game.localStorage.isGameGuest){this.moduleWindow.openTab(Games.LoginTabType.LoginGuest)}else{Game.protosender.account.GuestAuth()}};Login.prototype.onTabShow=function(){if(isNullOrEmpty(this.account)){this.account=Game.localStorage.username}if(isNullOrEmpty(this.password)){this.password=Game.localStorage.password}};Login.prototype.onTabHide=function(){};return Login}(Login_1.LoginStruct));Login_1.Login=Login})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var LoginGuestStruct=(function(_super){__extends(LoginGuestStruct,_super);function LoginGuestStruct(){return _super.call(this)||this}LoginGuestStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","LoginGuest"))};LoginGuestStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_g_guestlogin=(this.getChild("g_guestlogin"));this.m_btn_guestlogin=(this.getChild("btn_guestlogin"));this.m_btn_linkaccount=(this.getChild("btn_linkaccount"));this.m_btn_back=(this.getChild("btn_back"))};LoginGuestStruct.URL="ui://7znsj5i6w5tk27";LoginGuestStruct.DependPackages=["Login"];return LoginGuestStruct}(fairygui.GComponent));Login.LoginGuestStruct=LoginGuestStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var LoginGuest=(function(_super){__extends(LoginGuest,_super);function LoginGuest(){return _super!==null&&_super.apply(this,arguments)||this}LoginGuest.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btn_guestlogin.onClick(this,this.onClickLogin);this.m_btn_linkaccount.onClick(this,this.onClickRegister);this.m_btn_back.onClick(this,this.onClickBack)};LoginGuest.prototype.onClickLogin=function(){Game.protosender.account.GuestAuth()};LoginGuest.prototype.onClickRegister=function(){this.moduleWindow.conent.m_register.isFromGuest=true;this.moduleWindow.openTab(Games.LoginTabType.Register)};LoginGuest.prototype.onClickBack=function(){this.moduleWindow.backTab()};return LoginGuest}(Login.LoginGuestStruct));Login.LoginGuest=LoginGuest})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var LoginWindowUIStruct=(function(_super){__extends(LoginWindowUIStruct,_super);function LoginWindowUIStruct(){return _super.call(this)||this}LoginWindowUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","LoginWindowUI"))};LoginWindowUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_screenBG=(this.getChild("screenBG"));this.m_conent=(this.getChild("conent"))};LoginWindowUIStruct.URL="ui://7znsj5i6vkfj3y";LoginWindowUIStruct.DependPackages=["Login","System","Fx"];return LoginWindowUIStruct}(fairygui.GComponent));Login.LoginWindowUIStruct=LoginWindowUIStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var LoginWindowUI=(function(_super){__extends(LoginWindowUI,_super);function LoginWindowUI(){return _super!==null&&_super.apply(this,arguments)||this}return LoginWindowUI}(Login.LoginWindowUIStruct));Login.LoginWindowUI=LoginWindowUI})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var MainStruct=(function(_super){__extends(MainStruct,_super);function MainStruct(){return _super.call(this)||this}MainStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","Main"))};MainStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_login=(this.getChild("login"));this.m_register=(this.getChild("register"));this.m_login_guest=(this.getChild("login_guest"));this.m_agreement=(this.getChild("agreement"));this.m_version=(this.getChild("version"));this.m_test=(this.getChild("test"))};MainStruct.URL="ui://7znsj5i6eiknh";MainStruct.DependPackages=["Login","Fx"];return MainStruct}(fairygui.GComponent));Login.MainStruct=MainStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Main=(function(_super){__extends(Main,_super);function Main(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.whenSelfVisiableCallWindowShowAndHide=true;return _this}Main.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_login.m_btn_forgot.visible=false;this.m_login.m_btn_security.visible=false};Main.prototype.onWindowShow=function(){this.m_version.m_txt_gamever.text="GameVersion:"+GameVersions.Manager.Instance.localAppVersionData.toString();this.m_version.m_txt_resVer.text="ResVersion:"+GameVersions.Manager.Instance.localResVersionData.toString()};Main.prototype.onWindowHide=function(){};return Main}(Login.MainStruct));Login.Main=Main})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var NameInputStruct=(function(_super){__extends(NameInputStruct,_super);function NameInputStruct(){return _super.call(this)||this}NameInputStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","nameInput"))};NameInputStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_txt_account=(this.getChild("txt_account"))};NameInputStruct.URL="ui://7znsj5i6w5tk26";NameInputStruct.DependPackages=["Login"];return NameInputStruct}(fairygui.GComponent));Login.NameInputStruct=NameInputStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var NameInput=(function(_super){__extends(NameInput,_super);function NameInput(){return _super!==null&&_super.apply(this,arguments)||this}return NameInput}(Login.NameInputStruct));Login.NameInput=NameInput})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var NewArtistBgStruct=(function(_super){__extends(NewArtistBgStruct,_super);function NewArtistBgStruct(){return _super.call(this)||this}NewArtistBgStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","NewArtistBg"))};NewArtistBgStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};NewArtistBgStruct.URL="ui://7znsj5i6wrr65s";NewArtistBgStruct.DependPackages=["Login"];return NewArtistBgStruct}(fairygui.GComponent));Login.NewArtistBgStruct=NewArtistBgStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var NewArtistBg=(function(_super){__extends(NewArtistBg,_super);function NewArtistBg(){return _super!==null&&_super.apply(this,arguments)||this}return NewArtistBg}(Login.NewArtistBgStruct));Login.NewArtistBg=NewArtistBg})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var NewArtistItemStruct=(function(_super){__extends(NewArtistItemStruct,_super);function NewArtistItemStruct(){return _super.call(this)||this}NewArtistItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","NewArtistItem"))};NewArtistItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};NewArtistItemStruct.URL="ui://7znsj5i6wrr65r";NewArtistItemStruct.DependPackages=["Login"];return NewArtistItemStruct}(fairygui.GComponent));Login.NewArtistItemStruct=NewArtistItemStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var NewArtistItem=(function(_super){__extends(NewArtistItem,_super);function NewArtistItem(){return _super!==null&&_super.apply(this,arguments)||this}return NewArtistItem}(Login.NewArtistItemStruct));Login.NewArtistItem=NewArtistItem})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var PasswordInputStruct=(function(_super){__extends(PasswordInputStruct,_super);function PasswordInputStruct(){return _super.call(this)||this}PasswordInputStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","passwordInput"))};PasswordInputStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_txt_password=(this.getChild("txt_password"));this.m_btn_pwdeye=(this.getChild("btn_pwdeye"))};PasswordInputStruct.URL="ui://7znsj5i6cpc91l";PasswordInputStruct.DependPackages=["Login"];return PasswordInputStruct}(fairygui.GComponent));Login.PasswordInputStruct=PasswordInputStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var PasswordInput=(function(_super){__extends(PasswordInput,_super);function PasswordInput(){return _super!==null&&_super.apply(this,arguments)||this}PasswordInput.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btn_pwdeye.visible=false;this.m_btn_pwdeye.onClick(this,this.onClickEye);if(this.m_txt_password&&isNullOrEmpty(this.m_txt_password.promptText)){this.m_txt_password.promptText="Passworld"}};PasswordInput.prototype.onClickEye=function(){this.m_txt_password.password=!this.m_txt_password.password;this.m_txt_password.text=this.m_txt_password.text};return PasswordInput}(Login.PasswordInputStruct));Login.PasswordInput=PasswordInput})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var PopupMenuStruct=(function(_super){__extends(PopupMenuStruct,_super);function PopupMenuStruct(){return _super.call(this)||this}PopupMenuStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","PopupMenu"))};PopupMenuStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"))};PopupMenuStruct.URL="ui://7znsj5i6l8d850";PopupMenuStruct.DependPackages=["Login"];return PopupMenuStruct}(fairygui.GComponent));Login.PopupMenuStruct=PopupMenuStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var PopupMenu=(function(_super){__extends(PopupMenu,_super);function PopupMenu(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.listData=[];_this.sOnSelect=new TypedSignal();return _this}PopupMenu.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem)};PopupMenu.prototype.setListData=function(listData){this.listData=listData;var list=this.m_list;list.removeChildrenToPool();for(var i=0;i<listData.length;i++){var item=list.addItemFromPool();item.data=listData[i];item.title=listData[i].username}};PopupMenu.prototype.onClickItem=function(item){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}this.onselect(item.data);this.removeFromParent()};PopupMenu.prototype.onselect=function(value){this.sOnSelect.dispatch(value);if(this.mainButton){this.mainButton.title=value.username}};PopupMenu.prototype.setSelect=function(value){var index=this.listData.indexOf(value);this.m_list.addSelection(index,true);this.onselect(value)};return PopupMenu}(Login.PopupMenuStruct));Login.PopupMenu=PopupMenu})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var PopupMenu_itemStruct=(function(_super){__extends(PopupMenu_itemStruct,_super);function PopupMenu_itemStruct(){return _super.call(this)||this}PopupMenu_itemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","PopupMenu_item"))};PopupMenu_itemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_checked=this.getController("checked");this.m_title=(this.getChild("title"))};PopupMenu_itemStruct.URL="ui://7znsj5i6l8d851";PopupMenu_itemStruct.DependPackages=["Login"];return PopupMenu_itemStruct}(fairygui.GButton));Login.PopupMenu_itemStruct=PopupMenu_itemStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var PopupMenu_item=(function(_super){__extends(PopupMenu_item,_super);function PopupMenu_item(){return _super!==null&&_super.apply(this,arguments)||this}return PopupMenu_item}(Login.PopupMenu_itemStruct));Login.PopupMenu_item=PopupMenu_item})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var RandomButtonStruct=(function(_super){__extends(RandomButtonStruct,_super);function RandomButtonStruct(){return _super.call(this)||this}RandomButtonStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","RandomButton"))};RandomButtonStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};RandomButtonStruct.URL="ui://7znsj5i6oh1c2y";RandomButtonStruct.DependPackages=["Login"];return RandomButtonStruct}(fairygui.GButton));Login.RandomButtonStruct=RandomButtonStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var RandomButton=(function(_super){__extends(RandomButton,_super);function RandomButton(){return _super!==null&&_super.apply(this,arguments)||this}return RandomButton}(Login.RandomButtonStruct));Login.RandomButton=RandomButton})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var RegisterStruct=(function(_super){__extends(RegisterStruct,_super);function RegisterStruct(){return _super.call(this)||this}RegisterStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","Register"))};RegisterStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_accountInput=(this.getChild("accountInput"));this.m_passwordInput=(this.getChild("passwordInput"));this.m_btn_onRegister=(this.getChild("btn_onRegister"));this.m_lb_agreement=(this.getChild("lb_agreement"));this.m_btn_registerback=(this.getChild("btn_registerback"))};RegisterStruct.URL="ui://7znsj5i6cpc91n";RegisterStruct.DependPackages=["Login"];return RegisterStruct}(fairygui.GComponent));Login.RegisterStruct=RegisterStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Register=(function(_super){__extends(Register,_super);function Register(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isFromGuest=false;return _this}Register.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btn_registerback.onClick(this,this.onClickBack);this.m_btn_onRegister.onClick(this,this.onClickRegister);this.m_lb_agreement.onClick(this,this.onClickAgreement);this.m_accountInput.m_button.visible=false};Object.defineProperty(Register.prototype,"account",{get:function(){return this.m_accountInput.m_txt_account.text},set:function(value){this.m_accountInput.m_txt_account.text=value},enumerable:true,configurable:true});Object.defineProperty(Register.prototype,"password",{get:function(){return this.m_passwordInput.m_txt_password.text},set:function(value){this.m_passwordInput.m_txt_password.text=value},enumerable:true,configurable:true});Register.prototype.onClickBack=function(){this.moduleWindow.backTab()};Register.prototype.onClickRegister=function(){if(!this.isFromGuest){Game.protosender.account.Auth(this.account,this.password,true);Game.localStorage.isGuest=false}else{Game.protosender.account.GuestBind(this.account,this.password)}};Register.prototype.onClickAgreement=function(){this.moduleWindow.openTab(Games.LoginTabType.Agreement)};return Register}(Login.RegisterStruct));Login.Register=Register})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var SexItemFemaleStruct=(function(_super){__extends(SexItemFemaleStruct,_super);function SexItemFemaleStruct(){return _super.call(this)||this}SexItemFemaleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","SexItemFemale"))};SexItemFemaleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};SexItemFemaleStruct.URL="ui://7znsj5i6oh1c2w";SexItemFemaleStruct.DependPackages=["Login"];return SexItemFemaleStruct}(fairygui.GButton));Login.SexItemFemaleStruct=SexItemFemaleStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var SexItemFemale=(function(_super){__extends(SexItemFemale,_super);function SexItemFemale(){return _super!==null&&_super.apply(this,arguments)||this}return SexItemFemale}(Login.SexItemFemaleStruct));Login.SexItemFemale=SexItemFemale})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var SexItemMaleStruct=(function(_super){__extends(SexItemMaleStruct,_super);function SexItemMaleStruct(){return _super.call(this)||this}SexItemMaleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","SexItemMale"))};SexItemMaleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};SexItemMaleStruct.URL="ui://7znsj5i6oh1c2v";SexItemMaleStruct.DependPackages=["Login"];return SexItemMaleStruct}(fairygui.GButton));Login.SexItemMaleStruct=SexItemMaleStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var SexItemMale=(function(_super){__extends(SexItemMale,_super);function SexItemMale(){return _super!==null&&_super.apply(this,arguments)||this}return SexItemMale}(Login.SexItemMaleStruct));Login.SexItemMale=SexItemMale})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var TestStaticsStruct=(function(_super){__extends(TestStaticsStruct,_super);function TestStaticsStruct(){return _super.call(this)||this}TestStaticsStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","TestStatics"))};TestStaticsStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_test_Registation=(this.getChild("test_Registation"));this.m_test_Login=(this.getChild("test_Login"));this.m_test_Level=(this.getChild("test_Level"));this.m_test_Guide=(this.getChild("test_Guide"));this.m_test_Purchase=(this.getChild("test_Purchase"))};TestStaticsStruct.URL="ui://7znsj5i6j20d5e";TestStaticsStruct.DependPackages=["Login"];return TestStaticsStruct}(fairygui.GComponent));Login.TestStaticsStruct=TestStaticsStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var TestStatics=(function(_super){__extends(TestStatics,_super);function TestStatics(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.test_level=1;return _this}TestStatics.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.test()};TestStatics.prototype.test=function(){};return TestStatics}(Login.TestStaticsStruct));Login.TestStatics=TestStatics})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var VersionStruct=(function(_super){__extends(VersionStruct,_super);function VersionStruct(){return _super.call(this)||this}VersionStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Login","Version"))};VersionStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_txt_resVer=(this.getChild("txt_resVer"));this.m_txt_gamever=(this.getChild("txt_gamever"))};VersionStruct.URL="ui://7znsj5i6cpc91q";VersionStruct.DependPackages=["Login"];return VersionStruct}(fairygui.GComponent));Login.VersionStruct=VersionStruct})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Login;(function(Login){var Version=(function(_super){__extends(Version,_super);function Version(){return _super!==null&&_super.apply(this,arguments)||this}return Version}(Login.VersionStruct));Login.Version=Version})(Login=fgui.Login||(fgui.Login={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var BottomMenuPanelStruct=(function(_super){__extends(BottomMenuPanelStruct,_super);function BottomMenuPanelStruct(){return _super.call(this)||this}BottomMenuPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","BottomMenuPanel"))};BottomMenuPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};BottomMenuPanelStruct.URL="ui://7ecreso0cxvgx5o";BottomMenuPanelStruct.DependPackages=["MainUI"];return BottomMenuPanelStruct}(fairygui.GComponent));MainUI.BottomMenuPanelStruct=BottomMenuPanelStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var BottomMenuPanel=(function(_super){__extends(BottomMenuPanel,_super);function BottomMenuPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._menuButtons=[];_this._menuButtonDict=new Dictionary();_this.buttonWidth=77;_this.buttonHeight=77;_this.grapX=20;_this.grapY=10;_this.offsetX=10;_this.offsetY=10;_this.columnMax=6;return _this}BottomMenuPanel.prototype.onWindowShow=function(){};BottomMenuPanel.prototype.onWindowHide=function(){};BottomMenuPanel.prototype.init=function(barType){this._barType=barType;this.initMenuButton();this.refreshMenuButton();Game.event.add(GameEventKey.GameEventKey_UnlockChange,this.unlockMenuHanlder,this)};BottomMenuPanel.prototype.addMenuCtrl=function(id){var ctrl=new MainUI.MenuButtonCtl(id,this);this._menuButtons.push(ctrl);this._menuButtonDict.add(id,ctrl);Game.moduleModel.func.addMenu(id,ctrl);return ctrl};BottomMenuPanel.prototype.unlockMenuHanlder=function(id){var unlockConfig=Game.config.unlock.getConfig(id);if(unlockConfig.group==this._barType){this.refreshMenuButton(id)}};BottomMenuPanel.prototype.getButtonCtrl=function(id){return this._menuButtonDict.getValue(id)};BottomMenuPanel.prototype.getUnlockConfigs=function(){return Game.config.unlock.getBarMenus(this._barType)};BottomMenuPanel.prototype.initMenuButton=function(){var list=this.getUnlockConfigs();if(list){for(var i=0;i<list.length;i++){var unlockConfig=list[i];if(unlockConfig){this.addMenuCtrl(unlockConfig.id)}}}};BottomMenuPanel.prototype.refreshMenuButton=function(unlockId){if(unlockId===void 0){unlockId=0}var list=this._menuButtons;var pos=0;var _loop_1=function(i){var ctrl=list[i];if(ctrl.isUnlock){var button=ctrl.button;this_1.calButtonPos(ctrl,pos);if(unlockId>0){Laya.Tween.to(button,{x:ctrl.x,y:ctrl.y},ctrl.moveDuration,Laya.Ease.linearIn,Handler.create(null,function(){ctrl.refreshUnlock()}))}else{ctrl.refreshUnlock();button.x=ctrl.x;button.y=ctrl.y}if(ctrl.isUnlock&&ctrl.menuId>MenuId.SubMenuButtonBegin&&ctrl.subMenu==null){var submenu=MainUI.Submenu.createInstance();submenu.setButton(ctrl,MainUI.SubmenuType.bottom);ctrl.subMenu=submenu;Game.moduleModel.func.addSubMenu(ctrl.menuId,submenu)}pos++}else{ctrl.refreshUnlock()}};var this_1=this;for(var i=0;i<list.length;i++){_loop_1(i)}};BottomMenuPanel.prototype.calButtonPos=function(ctrl,index){var endX=0;var endY=0;switch(this._barType){case Games.MenuPositionType.Bottom_Left:endX=this.width-this.offsetX-this.buttonWidth-(this.offsetX*2+this.buttonWidth)*index;endY=0;break;case Games.MenuPositionType.Bottom_Right:endX=index*(this.grapX+this.buttonWidth)+this.offsetX;endY=0;break;case Games.MenuPositionType.Bottom_Middle:endX=0;endY=0;break;case Games.MenuPositionType.Right_Top_Group:endX=-20;endY=index*(this.grapX+this.buttonHeight+40)+this.offsetY;break;default:endX=this.width-this.offsetX-this.buttonWidth-(this.offsetX*2+this.buttonWidth)*index;endY=0;break}ctrl.setPos(endX,endY)};return BottomMenuPanel}(MainUI.BottomMenuPanelStruct));MainUI.BottomMenuPanel=BottomMenuPanel})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var ButtonTimeStruct=(function(_super){__extends(ButtonTimeStruct,_super);function ButtonTimeStruct(){return _super.call(this)||this}ButtonTimeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","ButtonTime"))};ButtonTimeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_time=(this.getChild("time"))};ButtonTimeStruct.URL="ui://7ecreso0m6h3x4k";ButtonTimeStruct.DependPackages=["MainUI"];return ButtonTimeStruct}(fairygui.GComponent));MainUI.ButtonTimeStruct=ButtonTimeStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var ButtonTime=(function(_super){__extends(ButtonTime,_super);function ButtonTime(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonTime}(MainUI.ButtonTimeStruct));MainUI.ButtonTime=ButtonTime})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var ButtonTime2Struct=(function(_super){__extends(ButtonTime2Struct,_super);function ButtonTime2Struct(){return _super.call(this)||this}ButtonTime2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","ButtonTime2"))};ButtonTime2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_time=(this.getChild("time"))};ButtonTime2Struct.URL="ui://7ecreso0be5ax5w";ButtonTime2Struct.DependPackages=["MainUI"];return ButtonTime2Struct}(fairygui.GComponent));MainUI.ButtonTime2Struct=ButtonTime2Struct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var ButtonTime2=(function(_super){__extends(ButtonTime2,_super);function ButtonTime2(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonTime2}(MainUI.ButtonTime2Struct));MainUI.ButtonTime2=ButtonTime2})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var CooperationAddStruct=(function(_super){__extends(CooperationAddStruct,_super);function CooperationAddStruct(){return _super.call(this)||this}CooperationAddStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","cooperationAdd"))};CooperationAddStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};CooperationAddStruct.URL="ui://7ecreso0uwsg2f";CooperationAddStruct.DependPackages=["MainUI"];return CooperationAddStruct}(fairygui.GButton));MainUI.CooperationAddStruct=CooperationAddStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var CooperationAdd=(function(_super){__extends(CooperationAdd,_super);function CooperationAdd(){return _super!==null&&_super.apply(this,arguments)||this}return CooperationAdd}(MainUI.CooperationAddStruct));MainUI.CooperationAdd=CooperationAdd})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var CooperationForMainUIStruct=(function(_super){__extends(CooperationForMainUIStruct,_super);function CooperationForMainUIStruct(){return _super.call(this)||this}CooperationForMainUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","cooperationForMainUI"))};CooperationForMainUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_have=this.getController("have");this.m_iconBtn1=(this.getChild("iconBtn1"));this.m_iconBtn2=(this.getChild("iconBtn2"));this.m_iconBtn3=(this.getChild("iconBtn3"));this.m_iconBtn4=(this.getChild("iconBtn4"));this.m_add=(this.getChild("add"));this.m_icon=(this.getChild("icon"))};CooperationForMainUIStruct.URL="ui://7ecreso0g8fc29";CooperationForMainUIStruct.DependPackages=["MainUI","Common"];return CooperationForMainUIStruct}(fairygui.GComponent));MainUI.CooperationForMainUIStruct=CooperationForMainUIStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var CooperationForMainUI=(function(_super){__extends(CooperationForMainUI,_super);function CooperationForMainUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.autoCloseTimeout=0;return _this}CooperationForMainUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_add.onClick(this,this.onClickAddBtn);this.m_icon.onClick(this,this.onClickIconBtn);this.m_iconBtn1.onClick(this,this.onClickMissBtn);this.m_iconBtn2.onClick(this,this.onClickOrderBtn);this.m_iconBtn3.onClick(this,this.onClickDollarBtn);this.m_iconBtn4.onClick(this,this.onClickCoinsBtn);for(var i=0;i<this.numChildren;i++){var item=this.getChildAt(i);if(item.name.startsWith("iconBtn")){var button=item;var menuButtonData=void 0;if(!isNullOrEmpty(button.data)){menuButtonData=JSON.parse(button.data)}else{menuButtonData={menuId:0}}var menuConfig=Game.config.menu.getConfig(menuButtonData.menuId);if(menuConfig){button.text=menuConfig.name;if(!isNullOrEmpty(menuConfig.iconUrl)){button.icon=menuConfig.iconUrl}}}}};CooperationForMainUI.prototype.onClickMissBtn=function(){Game.menu.open(MenuId.Cooperation)};CooperationForMainUI.prototype.onClickOrderBtn=function(){if(Game.moduleModel.order.getCooperationOrderList().length>0){Game.menu.open(MenuId.Order,true)}else{Game.system.toastMsg(MsgKey.cooperative_order_no)}};CooperationForMainUI.prototype.onClickDollarBtn=function(){var valNum=(User.info.level/4+1)*User.info.level*80+420;var val=formatNumberUnit(valNum,1);Game.system.confirmMsg(MsgKey.cooperated_send,[val,Game.config.item.getConfig(EItemId.dollar).name],TEXT.CooperationGiveRewardDollar,this,function(){if(Game.moduleModel.item.getItemNum(EItemId.dollar)<valNum){Game.system.openItemWay(EItemId.dollar,valNum)}else{Game.moduleModel.cooperation.sendGiveReward(EItemId.dollar)}},function(){},TEXT.ButtonOk,TEXT.ButtonCannel,false)};CooperationForMainUI.prototype.onClickCoinsBtn=function(){var valNum=(User.info.level/4+1)*User.info.level*60+440;var val=formatNumberUnit(valNum,1);Game.system.confirmMsg(MsgKey.cooperated_send,[val,Game.config.item.getConfig(EItemId.gold).name],TEXT.CooperationGiveRewardGold,this,function(){if(Game.moduleModel.item.getItemNum(EItemId.gold)<valNum){Game.system.openItemWay(EItemId.gold,valNum)}else{Game.moduleModel.cooperation.sendGiveReward(EItemId.gold)}},function(){},TEXT.ButtonOk,TEXT.ButtonCannel,false)};CooperationForMainUI.prototype.onClickAddBtn=function(){if(this.m_have.selectedIndex===0){Game.menu.open(MenuId.Cooperation)}};CooperationForMainUI.prototype.onClickIconBtn=function(){if(this.m_have.selectedIndex===1){this.m_have.setSelectedIndex(2)}else{if(this.m_have.selectedIndex===2){this.m_have.setSelectedIndex(1)}}};CooperationForMainUI.prototype.setData=function(){var _this=this;if(!this.visible){this.visible=true}if(Game.moduleModel.cooperation.havePartner){if(Game.moduleModel.cooperation.partnerInfData&&Game.moduleModel.cooperation.partnerInfData!==null){if(this.m_have.selectedIndex===0){this.m_have.setSelectedIndex(1);this.m_icon.m_icon.icon=Game.config.headPortrait.GetPlayerIconUrl(Game.moduleModel.cooperation.partnerInfData.portrait,Game.moduleModel.cooperation.partnerInfData.sex)}}else{if(this.autoCloseTimeout===0){this.searchPartner();this.autoCloseTimeout=setTimeout(function(){_this.searchPartner()},500)}}}else{if(this.m_have.selectedIndex!==0){this.m_have.setSelectedIndex(0)}}};CooperationForMainUI.prototype.searchPartner=function(){if(Game.moduleModel.cooperation.partnerInfData&&Game.moduleModel.cooperation.partnerInfData!==null){clearTimeout(this.autoCloseTimeout);this.autoCloseTimeout=0}else{if(Game.moduleModel.cooperation.cooperData&&Game.moduleModel.cooperation.cooperData!==null&&Game.moduleModel.cooperation.cooperData.friendEntityId.length>0){Game.moduleModel.cooperation.sendGetOtherInf(parseInt(Game.moduleModel.cooperation.cooperData.friendEntityId))}}};CooperationForMainUI.prototype.refreshRed=function(){this.m_iconBtn2.m_c_red_visible.selectedIndex=Game.moduleModel.order.cooperateRedNum>0?1:0};return CooperationForMainUI}(MainUI.CooperationForMainUIStruct));MainUI.CooperationForMainUI=CooperationForMainUI})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var ExpectProgress1Struct=(function(_super){__extends(ExpectProgress1Struct,_super);function ExpectProgress1Struct(){return _super.call(this)||this}ExpectProgress1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","ExpectProgress1"))};ExpectProgress1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Progress=this.getController("Progress");this.m_bar=(this.getChild("bar"));this.m_bar2=(this.getChild("bar2"));this.m_bar3=(this.getChild("bar3"));this.m_top1=(this.getChild("top1"));this.m_top2=(this.getChild("top2"));this.m_top3=(this.getChild("top3"));this.m_title=(this.getChild("title"))};ExpectProgress1Struct.URL="ui://7ecreso0qz7hx4n";ExpectProgress1Struct.DependPackages=["MainUI","System","Common"];return ExpectProgress1Struct}(fairygui.GProgressBar));MainUI.ExpectProgress1Struct=ExpectProgress1Struct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var ExpectProgress1=(function(_super){__extends(ExpectProgress1,_super);function ExpectProgress1(){return _super!==null&&_super.apply(this,arguments)||this}return ExpectProgress1}(MainUI.ExpectProgress1Struct));MainUI.ExpectProgress1=ExpectProgress1})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var FxArrowStruct=(function(_super){__extends(FxArrowStruct,_super);function FxArrowStruct(){return _super.call(this)||this}FxArrowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","FxArrow"))};FxArrowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_arrow1=(this.getChild("arrow1"));this.m_t0=this.getTransition("t0")};FxArrowStruct.URL="ui://7ecreso0r1gox59";FxArrowStruct.DependPackages=["MainUI","Common"];return FxArrowStruct}(fairygui.GComponent));MainUI.FxArrowStruct=FxArrowStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var FxArrow=(function(_super){__extends(FxArrow,_super);function FxArrow(){return _super!==null&&_super.apply(this,arguments)||this}return FxArrow}(MainUI.FxArrowStruct));MainUI.FxArrow=FxArrow})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var GuideFinishItemStruct=(function(_super){__extends(GuideFinishItemStruct,_super);function GuideFinishItemStruct(){return _super.call(this)||this}GuideFinishItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","GuideFinishItem"))};GuideFinishItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_arrow1=(this.getChild("arrow1"))};GuideFinishItemStruct.URL="ui://7ecreso0gn0tx56";GuideFinishItemStruct.DependPackages=["MainUI","Common"];return GuideFinishItemStruct}(fairygui.GButton));MainUI.GuideFinishItemStruct=GuideFinishItemStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var GuideFinishItem=(function(_super){__extends(GuideFinishItem,_super);function GuideFinishItem(){return _super!==null&&_super.apply(this,arguments)||this}return GuideFinishItem}(MainUI.GuideFinishItemStruct));MainUI.GuideFinishItem=GuideFinishItem})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var GuideTaskDialogStruct=(function(_super){__extends(GuideTaskDialogStruct,_super);function GuideTaskDialogStruct(){return _super.call(this)||this}GuideTaskDialogStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","GuideTaskDialog"))};GuideTaskDialogStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_role=(this.getChild("role"));this.m_dialog=(this.getChild("dialog"));this.m_roleGetReward=(this.getChild("roleGetReward"))};GuideTaskDialogStruct.URL="ui://7ecreso0gn0tx4z";GuideTaskDialogStruct.DependPackages=["MainUI"];return GuideTaskDialogStruct}(fairygui.GComponent));MainUI.GuideTaskDialogStruct=GuideTaskDialogStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var GuideTaskDialog=(function(_super){__extends(GuideTaskDialog,_super);function GuideTaskDialog(){return _super!==null&&_super.apply(this,arguments)||this}GuideTaskDialog.prototype.showHideTaskArrow=function(isShow){this.m_role.m_arrow2.visible=isShow;this.m_roleGetReward.m_arrow1.visible=isShow;if(isShow){this.m_role.m_arrow2.m_t0.play(null,-1);this.m_roleGetReward.m_arrow1.m_t0.play(null,-1)}};return GuideTaskDialog}(MainUI.GuideTaskDialogStruct));MainUI.GuideTaskDialog=GuideTaskDialog})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var GuideTaskRoleStruct=(function(_super){__extends(GuideTaskRoleStruct,_super);function GuideTaskRoleStruct(){return _super.call(this)||this}GuideTaskRoleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","GuideTaskRole"))};GuideTaskRoleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_arrow2=(this.getChild("arrow2"))};GuideTaskRoleStruct.URL="ui://7ecreso0gn0tx50";GuideTaskRoleStruct.DependPackages=["MainUI","Common"];return GuideTaskRoleStruct}(fairygui.GButton));MainUI.GuideTaskRoleStruct=GuideTaskRoleStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var GuideTaskRole=(function(_super){__extends(GuideTaskRole,_super);function GuideTaskRole(){return _super!==null&&_super.apply(this,arguments)||this}return GuideTaskRole}(MainUI.GuideTaskRoleStruct));MainUI.GuideTaskRole=GuideTaskRole})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var IconBtnStruct=(function(_super){__extends(IconBtnStruct,_super);function IconBtnStruct(){return _super.call(this)||this}IconBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","iconBtn"))};IconBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_red_visible=this.getController("c_red_visible");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_red=(this.getChild("red"))};IconBtnStruct.URL="ui://7ecreso0g8fc2a";IconBtnStruct.DependPackages=["MainUI","Common"];return IconBtnStruct}(fairygui.GButton));MainUI.IconBtnStruct=IconBtnStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var IconBtn=(function(_super){__extends(IconBtn,_super);function IconBtn(){return _super!==null&&_super.apply(this,arguments)||this}return IconBtn}(MainUI.IconBtnStruct));MainUI.IconBtn=IconBtn})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var LeftBottomMenuBarStruct=(function(_super){__extends(LeftBottomMenuBarStruct,_super);function LeftBottomMenuBarStruct(){return _super.call(this)||this}LeftBottomMenuBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","LeftBottomMenuBar"))};LeftBottomMenuBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_continue0=(this.getChild("continue0"));this.m_continue1=(this.getChild("continue1"));this.m_continue2=(this.getChild("continue2"));this.m_continue3=(this.getChild("continue3"));this.m_continue4=(this.getChild("continue4"))};LeftBottomMenuBarStruct.URL="ui://7ecreso0lftxx5l";LeftBottomMenuBarStruct.DependPackages=["MainUI"];return LeftBottomMenuBarStruct}(fairygui.GComponent));MainUI.LeftBottomMenuBarStruct=LeftBottomMenuBarStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var LeftBottomMenuBar=(function(_super){__extends(LeftBottomMenuBar,_super);function LeftBottomMenuBar(){return _super!==null&&_super.apply(this,arguments)||this}return LeftBottomMenuBar}(MainUI.LeftBottomMenuBarStruct));MainUI.LeftBottomMenuBar=LeftBottomMenuBar})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var MainMenuBarStruct=(function(_super){__extends(MainMenuBarStruct,_super);function MainMenuBarStruct(){return _super.call(this)||this}MainMenuBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","MainMenuBar"))};MainMenuBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_left=(this.getChild("left"));this.m_right=(this.getChild("right"));this.m_center=(this.getChild("center"))};MainMenuBarStruct.URL="ui://7ecreso0npx5x3n";MainMenuBarStruct.DependPackages=["MainUI"];return MainMenuBarStruct}(fairygui.GComponent));MainUI.MainMenuBarStruct=MainMenuBarStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var MainMenuBar=(function(_super){__extends(MainMenuBar,_super);function MainMenuBar(){return _super!==null&&_super.apply(this,arguments)||this}MainMenuBar.prototype.onWindowInited=function(){this.initCenterMenu();this.initLeftMenu();this.initRightMenu()};MainMenuBar.prototype.initCenterMenu=function(){this.m_center.init(Games.MenuPositionType.Bottom_Middle)};MainMenuBar.prototype.initLeftMenu=function(){this.m_left.init(Games.MenuPositionType.Bottom_Left)};MainMenuBar.prototype.initRightMenu=function(){this.m_right.init(Games.MenuPositionType.Bottom_Right)};MainMenuBar.prototype.refreshMenuButton=function(){this.m_center.refreshMenuButton();this.m_left.refreshMenuButton();this.m_right.refreshMenuButton()};return MainMenuBar}(MainUI.MainMenuBarStruct));MainUI.MainMenuBar=MainMenuBar})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var MainUIStruct=(function(_super){__extends(MainUIStruct,_super);function MainUIStruct(){return _super.call(this)||this}MainUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","MainUI"))};MainUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_visible_visitui=this.getController("c_visible_visitui");this.m_builder=(this.getChild("builder"));this.m_topInfoBar=(this.getChild("topInfoBar"));this.m_rightBottomMenuBar=(this.getChild("rightBottomMenuBar"));this.m_mainMenuBar=(this.getChild("mainMenuBar"));this.m_goalPanel=(this.getChild("goalPanel"));this.m_warTip=(this.getChild("warTip"));this.m_leftBottomMenuBar=(this.getChild("leftBottomMenuBar"));this.m_filmSmallBtn=(this.getChild("filmSmallBtn"));this.m_expect=(this.getChild("expect"));this.m_cooperation=(this.getChild("cooperation"));this.m_visitUI=(this.getChild("visitUI"));this.m_taskPanel=(this.getChild("taskPanel"))};MainUIStruct.URL="ui://7ecreso0rbh3x44";MainUIStruct.DependPackages=["MainUI","Building","Common","System"];return MainUIStruct}(fairygui.GComponent));MainUI.MainUIStruct=MainUIStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI_1){var MainUI=(function(_super){__extends(MainUI,_super);function MainUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.menuDict=new Dictionary();_this.groupMenuPanelDict=new Dictionary();_this.groupMenuPanelList=[];_this.leftGroupsIDs=[101,102];_this.smallBtnVisable=false;_this.filmContinueList=new Array();_this.cooperationVisable=false;return _this}MainUI.prototype.constructFromXML=function(xml){var _this=this;_super.prototype.constructFromXML.call(this,xml);this.m_warTip.onClick(this,function(){_this.m_warTip.visible=false});this.createMenuGroup();this.filmContinueList=[this.m_leftBottomMenuBar.m_continue0,this.m_leftBottomMenuBar.m_continue1,this.m_leftBottomMenuBar.m_continue2,this.m_leftBottomMenuBar.m_continue3,this.m_leftBottomMenuBar.m_continue4]};MainUI.prototype.createMenuGroup=function(){var menuPanel;for(var index=0;index<this.leftGroupsIDs.length;index++){var element=this.leftGroupsIDs[index];menuPanel=MainUI_1.BottomMenuPanel.createInstance();this.groupMenuPanelDict.add(element,menuPanel);this.addChild(menuPanel);menuPanel.x=this.width-menuPanel.width;menuPanel.y=190+(menuPanel.height+10)*index;menuPanel.addRelation(this,fairygui.RelationType.Right_Right);menuPanel.addRelation(this,fairygui.RelationType.Top_Top);this.groupMenuPanelList.push(menuPanel)}if(menuPanel){this.m_visitUI.y=menuPanel.y+menuPanel.height+30}};MainUI.prototype.getMenu=function(menuId){return Game.moduleModel.func.getMenuCtrlByMenuId(menuId)};MainUI.prototype.getSubmenu=function(subbarId){return Game.moduleModel.func.getSubmenu(subbarId)};MainUI.prototype.getSubmenuIsOpened=function(subbarId){return Game.moduleModel.func.getSubmenuIsOpened(subbarId)};MainUI.prototype.onWindowInited=function(){this.m_taskPanel.visible=false;for(var index=0;index<this.groupMenuPanelList.length;index++){var element=this.groupMenuPanelList[index];element.init(this.leftGroupsIDs[index])}Games.PopupManage.getInstance().checkPopupMenu();this.m_goalPanel.init(Games.MenuPositionType.Right_Top_Group)};MainUI.prototype.onWindowResize=function(){console.log("mainUI -- onWindowResize()");Game.stageManager.homeSceneSet.onWindowResize()};MainUI.prototype.closeSubmenus=function(){Game.moduleModel.func.closeSubmenus()};MainUI.prototype.setRed=function(menuId){var menuCtl=this.getMenu(menuId);if(menuCtl){menuCtl.setRed()}};MainUI.prototype.showVisitUI=function(data){this.m_visitUI.show(data)};MainUI.prototype.hideVisitUI=function(){this.m_visitUI.hide()};MainUI.prototype.refreshRed=function(){var list=Game.moduleModel.func.getMenuList();for(var i=0;i<list.length;i++){var item=list[i];this.setRed(item.menuId)}if(this.cooperationVisable){this.m_cooperation.refreshRed()}this.m_topInfoBar.onRefreshRed()};MainUI.prototype.initUnlock=function(){this.m_mainMenuBar.refreshMenuButton();for(var index=0;index<this.groupMenuPanelList.length;index++){var element=this.groupMenuPanelList[index];element.refreshMenuButton()}this.refreshRed()};MainUI.prototype.onWindowShow=function(){var _this=this;setTimeout(function(){_this.refreshRed()},100);this.onCreateFilmSmall();this.onCreateFilmContinue();this.updateVisitView();this.updateTaskView();this.warTimeTip();Game.protoOkEvent.add(ProtoEventKey.ManageVisitData,this.updateVisitView,this);Game.protoOkEvent.add(ProtoEventKey.TaskData,this.updateTaskView,this);Game.event.add(GameEventKey.GameEventKey_UpdateVisitActor,this.updateVisitView,this);Game.event.add(GameEventKey.PopupPanel,this.onPopupPanel,this);Game.event.add(GameEventKey.GameEventKey_ClientUpdateMainTask,this.updateTaskView,this);Game.event.add(GameEventKey.GameEventKey_TimeLimitRemind,this.warTimeTip,this);Game.event.add(GameEventKey.GameEventKey_VisibleMainUI,this.showHideMainUI,this);Game.event.add(GameEventKey.GameEventKey_VisibleTaskArrowUI,this.showHideTaskArrow,this);Game.event.add(GameEventKey.GameEventKey_UnlockInit,this.unlockInitHandler,this);this.m_taskPanel.m_role.onClick(this,this.onClickTaskRole);this.m_taskPanel.m_roleGetReward.onClick(this,this.onClickTaskReward);if(Game.guide.isPlayCar){this.showHideMainUI(false)}};MainUI.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.ManageVisitData,this.updateVisitView,this);Game.protoOkEvent.remove(ProtoEventKey.TaskData,this.updateTaskView,this);Game.event.remove(GameEventKey.GameEventKey_UpdateVisitActor,this.updateVisitView,this);Game.event.remove(GameEventKey.PopupPanel,this.onPopupPanel,this);Game.event.remove(GameEventKey.GameEventKey_ClientUpdateMainTask,this.updateTaskView,this);Game.event.remove(GameEventKey.GameEventKey_TimeLimitRemind,this.warTimeTip,this);Game.event.remove(GameEventKey.GameEventKey_VisibleMainUI,this.showHideMainUI,this);Game.event.remove(GameEventKey.GameEventKey_VisibleTaskArrowUI,this.showHideTaskArrow,this);Game.event.remove(GameEventKey.GameEventKey_UnlockInit,this.unlockInitHandler,this);this.m_taskPanel.m_role.offClick(this,this.onClickTaskRole);this.m_taskPanel.m_roleGetReward.offClick(this,this.onClickTaskReward)};MainUI.prototype.unlockInitHandler=function(){this.initUnlock()};MainUI.prototype.showHideTaskArrow=function(isShow){this.m_taskPanel.showHideTaskArrow(isShow)};MainUI.prototype.showHideMainUI=function(isShow){this.m_mainMenuBar.visible=isShow;this.m_rightBottomMenuBar.visible=isShow;this.m_topInfoBar.visible=isShow;for(var index=0;index<this.groupMenuPanelList.length;index++){var element=this.groupMenuPanelList[index];element.visible=isShow}if(isShow==false){this.m_builder.m_BuildList.scrollPane.scrollBottom()}this.m_expect.showHidePanel(isShow)};MainUI.prototype.updateTaskView=function(){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask&&Game.moduleModel.guide.isFinishFirst){if(mainTask.isFinished){this.m_taskPanel.m_c1.selectedIndex=0;this.m_taskPanel.m_roleGetReward.text=Games.TEXT.TaskGetReward}else{this.m_taskPanel.m_c1.selectedIndex=1;this.m_taskPanel.m_dialog.m_title.text=mainTask.mainConfig.name}this.m_taskPanel.visible=true}else{this.m_taskPanel.visible=false}};MainUI.prototype.onClickTaskRole=function(){Game.menu.open(MenuId.MainTask)};MainUI.prototype.onClickTaskReward=function(){Game.menu.open(MenuId.MainTask)};MainUI.prototype.onPopupPanel=function(){this.closeSubmenus()};MainUI.prototype.warTimeTip=function(){var isShow=false;if(User.isNineToFifty){this.m_warTip.m_title.m_title.text=TEXT.NineToFiftyTip;isShow=true}if(User.isNineToFiftyFive){this.m_warTip.m_title.m_title.text=TEXT.NineToFiftyFiveTip;isShow=true}if(User.isTenTime){isShow=false}if(this.m_warTip.visible!==isShow){this.m_warTip.visible=isShow}};MainUI.prototype.updateVisitView=function(){var visitData=Game.moduleModel.visit.getVisitData();if(visitData&&visitData.isWaiting){Game.event.dispatch(GameEventKey.GameEventKey_StartReception);this.showVisitUI(visitData)}else{this.hideVisitUI()}};MainUI.prototype.onCreateFilmSmall=function(){if(Game.moduleModel.warData.moveData&&Game.moduleModel.warData.moveData!==null&&Game.moduleModel.warData.moveData.state===EMovieState.result){Game.moduleModel.warData.refrushFilmingStatus();if(!Game.moduleModel.warData.clientHideFilmOverResult){this.smallBtnVisable=true;this.m_filmSmallBtn.setShow()}else{if(this.smallBtnVisable){this.smallBtnVisable=false;this.m_filmSmallBtn.setHide()}}}else{if(this.smallBtnVisable){this.smallBtnVisable=false;this.m_filmSmallBtn.setHide()}}};MainUI.prototype.onCreateFilmContinue=function(){if(Game.moduleModel.warData.endIncomeList){for(var i=0;i<this.filmContinueList.length;i++){if(Game.moduleModel.warData.endIncomeList.length>i){if(!this.filmContinueList[i].visible){this.filmContinueList[i].visible=true}this.filmContinueList[i].setData(i)}else{if(this.filmContinueList[i].visible){this.filmContinueList[i].visible=false}}}}};MainUI.prototype.onCreateExpect=function(){this.m_expect.showHidePanel(true);this.m_expect.setData()};MainUI.prototype.onCreateCooperation=function(){if(Games.MenuValidateUnlock.getInstance().validate(MenuId.Cooperation)){this.m_cooperation.setData();this.cooperationVisable=true}};MainUI.prototype.cooperationBtn=function(index){if(this.cooperationVisable){return this.m_cooperation.getChild("m_iconBtn"+(index+1))}return null};MainUI.prototype.getMainTaskBtn=function(index){if(this.m_taskPanel.visible){if(index=1){return this.m_taskPanel.m_role}return this.m_taskPanel.m_roleGetReward}return null};return MainUI}(MainUI_1.MainUIStruct));MainUI_1.MainUI=MainUI;var MenuRedType;(function(MenuRedType){MenuRedType[MenuRedType.None=0]="None";MenuRedType[MenuRedType.New=1]="New";MenuRedType[MenuRedType.Red=2]="Red"})(MenuRedType=MainUI_1.MenuRedType||(MainUI_1.MenuRedType={}));var MenuButtonCtl=(function(){function MenuButtonCtl(unlockId,content,isClick){if(isClick===void 0){isClick=true}this.globalPos=new Point();this._buttonDict=new Dictionary();this._buttonList=[];this.userStaticDic=new Dictionary();this.content=content;this.setUnlockConfig(unlockId);if(this.button.m_red){this.button.m_c_visible_new.selectedIndex=MenuRedType.None}if(this.button.m_lock){this.button.m_lock.visible=false}isClick&&this.addClick()}Object.defineProperty(MenuButtonCtl.prototype,"subGroupId",{get:function(){var id;switch(this.menuId){case Games.MenuBarType.SumBar_Manage:id=11;break;case Games.MenuBarType.SumBar_Run:id=10;break;case Games.MenuBarType.SumBar_Social:id=12;break;case Games.MenuBarType.SumBar_Cooperation:break;default:break}return id},enumerable:true,configurable:true});Object.defineProperty(MenuButtonCtl.prototype,"moveDuration",{get:function(){return 600},enumerable:true,configurable:true});Object.defineProperty(MenuButtonCtl.prototype,"menuId",{get:function(){return this.unlockConfig.menuId},enumerable:true,configurable:true});Object.defineProperty(MenuButtonCtl.prototype,"isTimeButton",{get:function(){var iconType=this.unlockConfig.icon_type;return iconType==Games.ButtonType.Button_Time||iconType==Games.ButtonType.Button_GoalTime},enumerable:true,configurable:true});MenuButtonCtl.prototype.setPos=function(x,y){this.x=x;this.y=y};MenuButtonCtl.prototype.getGlobalPos=function(){if(this.menuConfig.barType>MenuId.SubMenuButtonBegin){var ctrl=Game.moduleModel.func.getMenuCtrlByMenuId(this.menuConfig.barType);return Game.moduleModel.func.getMenuCtrlByMenuId(this.menuConfig.barType).getGlobalPos()}else{this.button.parent.localToGlobal(this.x,this.y,this.globalPos)}return this.globalPos};Object.defineProperty(MenuButtonCtl.prototype,"unlockScale",{get:function(){var scale=1;switch(this.unlockConfig.icon_type){case Games.ButtonType.Button_Main:scale=1.5;break;case Games.ButtonType.Button_Normal:scale=2;break;case Games.ButtonType.Button_Time:scale=2;break;case Games.ButtonType.Button_Goal:case Games.ButtonType.Button_GoalTime:scale=2;break;default:break}return scale},enumerable:true,configurable:true});MenuButtonCtl.prototype.getButton=function(iconType){return this._buttonDict.getValue(iconType)};MenuButtonCtl.prototype.createButton=function(){this.hideButton();var iconType=this.unlockConfig.icon_type;var btn=this.getButton(iconType);switch(iconType){case Games.ButtonType.Button_Main:if(btn==null){this.button=MainUI_1.MenuBMainButton.createInstance();this._buttonDict.add(iconType,this.button);this._buttonList.push(this.button)}else{this.button=btn}break;case Games.ButtonType.Button_Normal:if(btn==null){this.button=MainUI_1.MenuBButton.createInstance();this._buttonDict.add(iconType,this.button);this._buttonList.push(this.button)}else{this.button=btn}break;case Games.ButtonType.Button_Time:if(btn==null){this.button=MainUI_1.TimeMenuButton.createInstance();this.button.m_visiableTitle.selectedIndex=1;this._buttonDict.add(iconType,this.button);this._buttonList.push(this.button)}else{this.button=btn}break;case Games.ButtonType.Button_Goal:case Games.ButtonType.Button_GoalTime:if(btn==null){this.button=MainUI_1.TimeMenuGoalButton.createInstance();this._buttonDict.add(this.unlockConfig.icon_type,this.button);this._buttonList.push(this.button)}else{this.button=btn}this.button.m_c_visible_time.selectedIndex=iconType==Games.ButtonType.Button_GoalTime?0:1;break;default:break}this.content.addChild(this.button)};MenuButtonCtl.prototype.startTick=function(){if(this.isTimeButton){Games.TickMenuManager.getInstance.addTick(this.menuId);Games.TickMenuManager.getInstance.addButton(this.menuId,this.button)}};MenuButtonCtl.prototype.stopTick=function(){Games.TickMenuManager.getInstance.stopTick(this.menuId)};MenuButtonCtl.prototype.stopTimeButton=function(){Games.TickMenuManager.getInstance.removeButton(this.menuId,this.button)};MenuButtonCtl.prototype.hideButton=function(){this.stopTimeButton();if(this.button){this.button.removeFromParent()}};MenuButtonCtl.prototype.addClick=function(){this.button.onClick(this,this.onClickButton)};MenuButtonCtl.prototype.removeClick=function(){this.button.offClick(this,this.onClickButton)};MenuButtonCtl.prototype.setMenuConfig=function(config){this.menuConfig=config};MenuButtonCtl.prototype.setUnlockConfig=function(unlockId){this.unlockConfig=Game.config.unlock.getConfig(unlockId);if(this.unlockConfig){this.createButton();this.setMenuConfig(this.unlockConfig.menuConfig);this.button.m_title.text=this.unlockConfig.name;var itemId=this.unlockConfig.item_id;if(itemId>0){var itemConfig=Game.config.item.getConfig(itemId);if(itemConfig){var star=itemConfig.star;var btn=this.button;btn.m_c_visible_star.selectedIndex=star>0?1:0;btn.m_starlist.numItems=itemConfig.itemStarNum;if(itemConfig.type==EItemCategory.contract){btn.m_touxiang.m_icon.icon=this.unlockConfig.iconUrl}else{btn.m_icon.url=this.unlockConfig.iconUrl}}}else{this.button.m_icon.url=this.unlockConfig.iconUrl}this.refreshProgress()}};MenuButtonCtl.prototype.refreshProgress=function(){if(this.isUnlock&&this.unlockConfig.icon_type==Games.ButtonType.Button_Goal){var goalBtn=this.button;var goalData=this.unlockConfig.progressGoal;if(goalData){goalBtn.m_goal.text=goalData.progressString;goalBtn.m_c_color.setSelectedIndex(goalData.status)}else{goalBtn.m_goal.text=""}}};MenuButtonCtl.prototype.onClickButton=function(){if(this.menuConfig.openMenu()){Game.moduleModel.func.clearNewFlag(this.menuId);this.setRed();Game.moduleModel.func.closeSubmenus()}};MenuButtonCtl.prototype.setRed=function(){if(!this.button.m_red){return}var isNew=Games.MenuValidateNew.getInstance().validate(this.menuId);if(isNew){this.button.m_c_visible_new.selectedIndex=MenuRedType.New}else{var val=Games.MenuValidateRed.getInstance().validate(this.menuId);if(isNumber(val)){this.button.m_red.m_num.text=val.toString();this.button.m_c_visible_new.selectedIndex=val>0?MenuRedType.Red:MenuRedType.None}else{this.button.m_red.m_num.text="";this.button.m_c_visible_new.selectedIndex=val?MenuRedType.Red:MenuRedType.None}}this.refreshProgress()};Object.defineProperty(MenuButtonCtl.prototype,"isUnlock",{get:function(){if(this.unlockConfig==null){return false}return this.unlockConfig.isUnlock},enumerable:true,configurable:true});Object.defineProperty(MenuButtonCtl.prototype,"isVisible",{get:function(){return this.button.visible},enumerable:true,configurable:true});Object.defineProperty(MenuButtonCtl.prototype,"isLockVisible",{get:function(){var visible=this.isUnlock||this.unlockConfig.lockvisible;return visible},enumerable:true,configurable:true});MenuButtonCtl.prototype.hideRedPoint=function(){this.button.m_red.visible=false};MenuButtonCtl.prototype.refreshUnlock=function(){this.button.visible=this.isLockVisible;if(!this.button.visible||!this.button.parent){return}if(this.button.m_lock){this.button.m_lock.visible=!this.isUnlock}if(this.isUnlock){this.startTick();this.setRed();FguiHelper.clearFilters(this.button.m_icon);FguiHelper.clearFilters(this.button.m_title);if(!this.userStaticDic.hasKey(this.menuId)){this.userStaticDic.add(this.menuId,this.menuId);Games.Static.Instance.onUserorbit("sys",this.menuId.toString(),"unlock")}}else{this.stopTick();FguiHelper.halfStaturation(this.button.m_icon);FguiHelper.halfStaturation(this.button.m_title)}};return MenuButtonCtl}());MainUI_1.MenuButtonCtl=MenuButtonCtl})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var MenuBButtonStruct=(function(_super){__extends(MenuBButtonStruct,_super);function MenuBButtonStruct(){return _super.call(this)||this}MenuBButtonStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","MenuBButton"))};MenuBButtonStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_c_visible_new=this.getController("c_visible_new");this.m_icon=(this.getChild("icon"));this.m_lock=(this.getChild("lock"));this.m_title=(this.getChild("title"));this.m_red=(this.getChild("red"))};MenuBButtonStruct.URL="ui://7ecreso0rbh3x4a";MenuBButtonStruct.DependPackages=["MainUI","Common"];return MenuBButtonStruct}(fairygui.GButton));MainUI.MenuBButtonStruct=MenuBButtonStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var MenuBButton=(function(_super){__extends(MenuBButton,_super);function MenuBButton(){return _super!==null&&_super.apply(this,arguments)||this}return MenuBButton}(MainUI.MenuBButtonStruct));MainUI.MenuBButton=MenuBButton})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var MenuBMainButtonStruct=(function(_super){__extends(MenuBMainButtonStruct,_super);function MenuBMainButtonStruct(){return _super.call(this)||this}MenuBMainButtonStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","MenuBMainButton"))};MenuBMainButtonStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_c_visible_new=this.getController("c_visible_new");this.m_icon=(this.getChild("icon"));this.m_lock=(this.getChild("lock"));this.m_title=(this.getChild("title"));this.m_red=(this.getChild("red"))};MenuBMainButtonStruct.URL="ui://7ecreso0ua2b2q";MenuBMainButtonStruct.DependPackages=["MainUI","Common"];return MenuBMainButtonStruct}(fairygui.GButton));MainUI.MenuBMainButtonStruct=MenuBMainButtonStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var MenuBMainButton=(function(_super){__extends(MenuBMainButton,_super);function MenuBMainButton(){return _super!==null&&_super.apply(this,arguments)||this}return MenuBMainButton}(MainUI.MenuBMainButtonStruct));MainUI.MenuBMainButton=MenuBMainButton})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var MenuRButtonStruct=(function(_super){__extends(MenuRButtonStruct,_super);function MenuRButtonStruct(){return _super.call(this)||this}MenuRButtonStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","MenuRButton"))};MenuRButtonStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_lock=(this.getChild("lock"));this.m_title=(this.getChild("title"));this.m_red=(this.getChild("red"))};MenuRButtonStruct.URL="ui://7ecreso0ua2b2w";MenuRButtonStruct.DependPackages=["MainUI","Common"];return MenuRButtonStruct}(fairygui.GButton));MainUI.MenuRButtonStruct=MenuRButtonStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var MenuRButton=(function(_super){__extends(MenuRButton,_super);function MenuRButton(){return _super!==null&&_super.apply(this,arguments)||this}return MenuRButton}(MainUI.MenuRButtonStruct));MainUI.MenuRButton=MenuRButton})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var MenuSubButtonStruct=(function(_super){__extends(MenuSubButtonStruct,_super);function MenuSubButtonStruct(){return _super.call(this)||this}MenuSubButtonStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","MenuSubButton"))};MenuSubButtonStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_lock=(this.getChild("lock"));this.m_title=(this.getChild("title"));this.m_red=(this.getChild("red"))};MenuSubButtonStruct.URL="ui://7ecreso0m6h3x4g";MenuSubButtonStruct.DependPackages=["MainUI","Common"];return MenuSubButtonStruct}(fairygui.GButton));MainUI.MenuSubButtonStruct=MenuSubButtonStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var MenuSubButton=(function(_super){__extends(MenuSubButton,_super);function MenuSubButton(){return _super!==null&&_super.apply(this,arguments)||this}return MenuSubButton}(MainUI.MenuSubButtonStruct));MainUI.MenuSubButton=MenuSubButton})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var RedStruct=(function(_super){__extends(RedStruct,_super);function RedStruct(){return _super.call(this)||this}RedStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","Red"))};RedStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_num=(this.getChild("num"))};RedStruct.URL="ui://7ecreso011k5x37";RedStruct.DependPackages=["MainUI","Common"];return RedStruct}(fairygui.GComponent));MainUI.RedStruct=RedStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var Red=(function(_super){__extends(Red,_super);function Red(){return _super!==null&&_super.apply(this,arguments)||this}return Red}(MainUI.RedStruct));MainUI.Red=Red})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var RightBottomMenuBarStruct=(function(_super){__extends(RightBottomMenuBarStruct,_super);function RightBottomMenuBarStruct(){return _super.call(this)||this}RightBottomMenuBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","RightBottomMenuBar"))};RightBottomMenuBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_setting=(this.getChild("setting"))};RightBottomMenuBarStruct.URL="ui://7ecreso0npx5x3o";RightBottomMenuBarStruct.DependPackages=["MainUI"];return RightBottomMenuBarStruct}(fairygui.GComponent));MainUI.RightBottomMenuBarStruct=RightBottomMenuBarStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var RightBottomMenuBar=(function(_super){__extends(RightBottomMenuBar,_super);function RightBottomMenuBar(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.menuButtons=[];return _this}RightBottomMenuBar.prototype.onWindowInited=function(){};RightBottomMenuBar.prototype.layoutButtom=function(){var y=0;for(var i=0;i<this.menuButtons.length;i++){var ctl=this.menuButtons[i];if(!ctl.button.visible){continue}ctl.button.y=y;y+=ctl.button.height}};RightBottomMenuBar.prototype.onRefreshUnlock=function(){for(var _i=0,_a=this.menuButtons;_i<_a.length;_i++){var item=_a[_i]}this.layoutButtom()};return RightBottomMenuBar}(MainUI.RightBottomMenuBarStruct));MainUI.RightBottomMenuBar=RightBottomMenuBar})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var RightMiddleMenuBarStruct=(function(_super){__extends(RightMiddleMenuBarStruct,_super);function RightMiddleMenuBarStruct(){return _super.call(this)||this}RightMiddleMenuBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","RightMiddleMenuBar"))};RightMiddleMenuBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_awards=(this.getChild("awards"));this.m_goal=(this.getChild("goal"))};RightMiddleMenuBarStruct.URL="ui://7ecreso0tf2bx4l";RightMiddleMenuBarStruct.DependPackages=["MainUI"];return RightMiddleMenuBarStruct}(fairygui.GComponent));MainUI.RightMiddleMenuBarStruct=RightMiddleMenuBarStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var RightMiddleMenuBar=(function(_super){__extends(RightMiddleMenuBar,_super);function RightMiddleMenuBar(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.menuButtons=[];return _this}RightMiddleMenuBar.prototype.onWindowInited=function(){};RightMiddleMenuBar.prototype.onRefreshUnlock=function(){for(var _i=0,_a=this.menuButtons;_i<_a.length;_i++){var item=_a[_i]}};RightMiddleMenuBar.prototype.onClickAwards=function(){};RightMiddleMenuBar.prototype.onClickGoal=function(){};RightMiddleMenuBar.prototype.OnGetOscarDataUpdate=function(){console.log("更新奥斯卡数据");this.UpdateTick()};RightMiddleMenuBar.prototype.UpdateTick=function(){console.log("刷新奥斯卡倒计时");this.tickOscar.Restart();if(!Game.moduleModel.oscar.IsFinishOscar){this.m_awards.m_buttonTime.text="";if(Game.moduleModel.oscar.isUnLockOscar){Game.menu.open(MenuId.Awards,Games.OscarSubEnum.OscarShow)}}};RightMiddleMenuBar.prototype.UpdateOscarTime=function(time){if(Game.moduleModel.oscar.OscarCD<=1){this.OnOscarFinish();return}if(Game.moduleModel.oscar.lastOscarDataTime<Game.moduleModel.oscar.LastOscarTime){Game.protosender.rank.GetOscarData();return}var strTime=TimeHelper.TimeFormat(Game.moduleModel.oscar.OscarCD);this.m_awards.m_buttonTime.m_time.text=strTime};RightMiddleMenuBar.prototype.OnOscarFinish=function(){console.log("奥斯卡倒计时结束");this.tickOscar.Stop();this.m_awards.m_buttonTime.text="";setTimeout(function(){Game.protosender.rank.GetOscarData()},1000)};return RightMiddleMenuBar}(MainUI.RightMiddleMenuBarStruct));MainUI.RightMiddleMenuBar=RightMiddleMenuBar})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var RightTopMenuBarStruct=(function(_super){__extends(RightTopMenuBarStruct,_super);function RightTopMenuBarStruct(){return _super.call(this)||this}RightTopMenuBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","RightTopMenuBar"))};RightTopMenuBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_menuList=(this.getChild("menuList"))};RightTopMenuBarStruct.URL="ui://7ecreso0hltlx4b";RightTopMenuBarStruct.DependPackages=["MainUI"];return RightTopMenuBarStruct}(fairygui.GComponent));MainUI.RightTopMenuBarStruct=RightTopMenuBarStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var RightTopMenuBar=(function(_super){__extends(RightTopMenuBar,_super);function RightTopMenuBar(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.menuButtons=[];return _this}RightTopMenuBar.prototype.onWindowInited=function(){};RightTopMenuBar.prototype.layoutButtom=function(){var y=0;var x=110;var c=0;var r=0;var index=0;for(var i=0;i<this.menuButtons.length;i++){var ctl=this.menuButtons[i];if(!ctl.button.visible){continue}r=index%4;c=Math.floor(index/4);x=this.width-90*(c+1);if(r==0){y=0}ctl.button.x=x;ctl.button.y=y;y+=ctl.button.height;index++}};RightTopMenuBar.prototype.onRefreshUnlock=function(){for(var _i=0,_a=this.menuButtons;_i<_a.length;_i++){var item=_a[_i]}this.layoutButtom()};return RightTopMenuBar}(MainUI.RightTopMenuBarStruct));MainUI.RightTopMenuBar=RightTopMenuBar})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var RightTopMenuPanelStruct=(function(_super){__extends(RightTopMenuPanelStruct,_super);function RightTopMenuPanelStruct(){return _super.call(this)||this}RightTopMenuPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","RightTopMenuPanel"))};RightTopMenuPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};RightTopMenuPanelStruct.URL="ui://7ecreso0zh0zx5l";RightTopMenuPanelStruct.DependPackages=["MainUI"];return RightTopMenuPanelStruct}(fairygui.GComponent));MainUI.RightTopMenuPanelStruct=RightTopMenuPanelStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var RightTopMenuPanel=(function(_super){__extends(RightTopMenuPanel,_super);function RightTopMenuPanel(){return _super!==null&&_super.apply(this,arguments)||this}return RightTopMenuPanel}(MainUI.RightTopMenuPanelStruct));MainUI.RightTopMenuPanel=RightTopMenuPanel})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var SubmenuStruct=(function(_super){__extends(SubmenuStruct,_super);function SubmenuStruct(){return _super.call(this)||this}SubmenuStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","Submenu"))};SubmenuStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_arrow=this.getController("arrow");this.m_arrowBottom=(this.getChild("arrowBottom"));this.m_arrowTop=(this.getChild("arrowTop"));this.m_arrowLeft=(this.getChild("arrowLeft"));this.m_arrowRight=(this.getChild("arrowRight"));this.m_container=(this.getChild("container"))};SubmenuStruct.URL="ui://7ecreso0m6h3x4c";SubmenuStruct.DependPackages=["MainUI"];return SubmenuStruct}(fairygui.GComponent));MainUI.SubmenuStruct=SubmenuStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var Point=laya.maths.Point;var fgui;(function(fgui){var MainUI;(function(MainUI){var SubmenuType;(function(SubmenuType){SubmenuType[SubmenuType.bottom=0]="bottom";SubmenuType[SubmenuType.top=1]="top";SubmenuType[SubmenuType.left=2]="left";SubmenuType[SubmenuType.right=3]="right"})(SubmenuType=MainUI.SubmenuType||(MainUI.SubmenuType={}));var Submenu=(function(_super){__extends(Submenu,_super);function Submenu(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.menuButtons=[];return _this}Submenu.prototype.setButton=function(ctrl,type){this.buttonCtrl=ctrl;this.type=type;this.m_arrow.selectedIndex=type;var list=Game.config.unlock.getBarMenus(ctrl.subGroupId);for(var i=0;i<list.length;i++){var unlockConfig=list[i];if(unlockConfig){var button=MainUI.MenuSubButton.createInstance();var id=unlockConfig.id;var ctrl_1=new MainUI.MenuButtonCtl(id,this);this.menuButtons.push(ctrl_1);Game.moduleModel.func.addMenu(id,ctrl_1)}}switch(type){case SubmenuType.bottom:this.arrow=this.m_arrowBottom;break}this.refreshLayout();this.buttonCtrl.button.onClick(this,this.onClickButton)};Submenu.prototype.onClickButton=function(){Games.MenuLayer.home.showPopup(this,this.buttonCtrl.button);if(this.parent){this.refreshLayout()}};Submenu.prototype.refreshLayout=function(){switch(this.type){case SubmenuType.bottom:this.layoutBottom();break}};Submenu.prototype.layoutBottom=function(){var stageWidth=fairygui.GRoot.inst.width;var widthMax=750;var paddingH=45;var paddingV=45;var columnMax=6;var buttonWidth=90;var buttonHeight=90;var width=widthMax-paddingH*2;var gapH=(width-columnMax*buttonWidth)/(columnMax-2);var gapV=20;var index=0;var c=0;var r=0;var cmax=1;var rmax=1;for(var i=0;i<this.menuButtons.length;i++){var ctrl=this.menuButtons[i];ctrl.refreshUnlock();var button=ctrl.button;if(!ctrl.isLockVisible){continue}c=index%columnMax;r=Math.floor(index/columnMax);cmax=Math.max(c,cmax);rmax=Math.max(r,rmax);button.x=paddingH+c*(buttonWidth+gapH);button.y=paddingV+r*(buttonHeight+gapV);index++}c=index%columnMax;r=Math.floor(index/columnMax);cmax=Math.max(c,cmax);rmax=Math.max(r,rmax);this.width=paddingH*2+cmax*(buttonWidth+gapH)-gapH;this.height=paddingV*2+rmax*buttonHeight+(rmax-1)*gapV;var buttonCenterX=this.buttonCtrl.getGlobalPos().x+this.buttonCtrl.button.width*0.5;var x=buttonCenterX-this.width*0.5;x=Math.max(x,-15);x=Math.min(x,stageWidth-this.width-15);this.x=x;this.arrow.x=buttonCenterX-this.x-15};Submenu.prototype.onRefreshUnlock=function(){this.refreshLayout()};return Submenu}(MainUI.SubmenuStruct));MainUI.Submenu=Submenu})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var SubMenuBgArrowStruct=(function(_super){__extends(SubMenuBgArrowStruct,_super);function SubMenuBgArrowStruct(){return _super.call(this)||this}SubMenuBgArrowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","SubMenuBgArrow"))};SubMenuBgArrowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_arrow=this.getController("arrow");this.m_arrowDown=(this.getChild("arrowDown"));this.m_arrowTop=(this.getChild("arrowTop"));this.m_arrowLeft=(this.getChild("arrowLeft"));this.m_arrowRight=(this.getChild("arrowRight"))};SubMenuBgArrowStruct.URL="ui://7ecreso0m6h3x4d";SubMenuBgArrowStruct.DependPackages=["MainUI"];return SubMenuBgArrowStruct}(fairygui.GComponent));MainUI.SubMenuBgArrowStruct=SubMenuBgArrowStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var SubMenuBgArrow=(function(_super){__extends(SubMenuBgArrow,_super);function SubMenuBgArrow(){return _super!==null&&_super.apply(this,arguments)||this}return SubMenuBgArrow}(MainUI.SubMenuBgArrowStruct));MainUI.SubMenuBgArrow=SubMenuBgArrow})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TaskDialogMsgPanelStruct=(function(_super){__extends(TaskDialogMsgPanelStruct,_super);function TaskDialogMsgPanelStruct(){return _super.call(this)||this}TaskDialogMsgPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","TaskDialogMsgPanel"))};TaskDialogMsgPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_dir=this.getController("c_dir");this.m_talkBg=(this.getChild("talkBg"));this.m_title=(this.getChild("title"))};TaskDialogMsgPanelStruct.URL="ui://7ecreso0olpux5f";TaskDialogMsgPanelStruct.DependPackages=["MainUI","Common"];return TaskDialogMsgPanelStruct}(fairygui.GComponent));MainUI.TaskDialogMsgPanelStruct=TaskDialogMsgPanelStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TaskDialogMsgPanel=(function(_super){__extends(TaskDialogMsgPanel,_super);function TaskDialogMsgPanel(){return _super!==null&&_super.apply(this,arguments)||this}TaskDialogMsgPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};return TaskDialogMsgPanel}(MainUI.TaskDialogMsgPanelStruct));MainUI.TaskDialogMsgPanel=TaskDialogMsgPanel})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TimeMenuButtonStruct=(function(_super){__extends(TimeMenuButtonStruct,_super);function TimeMenuButtonStruct(){return _super.call(this)||this}TimeMenuButtonStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","TimeMenuButton"))};TimeMenuButtonStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_visiableTitle=this.getController("visiableTitle");this.m_c_visible_new=this.getController("c_visible_new");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_lock=(this.getChild("lock"));this.m_buttonTime=(this.getChild("buttonTime"));this.m_red=(this.getChild("red"))};TimeMenuButtonStruct.URL="ui://7ecreso0m6h3x4j";TimeMenuButtonStruct.DependPackages=["MainUI","Common"];return TimeMenuButtonStruct}(fairygui.GButton));MainUI.TimeMenuButtonStruct=TimeMenuButtonStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TimeMenuButton=(function(_super){__extends(TimeMenuButton,_super);function TimeMenuButton(){return _super!==null&&_super.apply(this,arguments)||this}return TimeMenuButton}(MainUI.TimeMenuButtonStruct));MainUI.TimeMenuButton=TimeMenuButton})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TimeMenuGoalButtonStruct=(function(_super){__extends(TimeMenuGoalButtonStruct,_super);function TimeMenuGoalButtonStruct(){return _super.call(this)||this}TimeMenuGoalButtonStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","TimeMenuGoalButton"))};TimeMenuGoalButtonStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_c_color=this.getController("c_color");this.m_c_visible_time=this.getController("c_visible_time");this.m_c_visible_new=this.getController("c_visible_new");this.m_c_visible_star=this.getController("c_visible_star");this.m_c_visible_touxiang=this.getController("c_visible_touxiang");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_lock=(this.getChild("lock"));this.m_goal=(this.getChild("goal"));this.m_starlist=(this.getChild("starlist"));this.m_touxiang=(this.getChild("touxiang"));this.m_red=(this.getChild("red"));this.m_buttonTime=(this.getChild("buttonTime"))};TimeMenuGoalButtonStruct.URL="ui://7ecreso0uayyx5p";TimeMenuGoalButtonStruct.DependPackages=["MainUI","Common"];return TimeMenuGoalButtonStruct}(fairygui.GButton));MainUI.TimeMenuGoalButtonStruct=TimeMenuGoalButtonStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TimeMenuGoalButton=(function(_super){__extends(TimeMenuGoalButton,_super);function TimeMenuGoalButton(){return _super!==null&&_super.apply(this,arguments)||this}return TimeMenuGoalButton}(MainUI.TimeMenuGoalButtonStruct));MainUI.TimeMenuGoalButton=TimeMenuGoalButton})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopHeadIconStruct=(function(_super){__extends(TopHeadIconStruct,_super);function TopHeadIconStruct(){return _super.call(this)||this}TopHeadIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","TopHeadIcon"))};TopHeadIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"))};TopHeadIconStruct.URL="ui://7ecreso0ua2b34";TopHeadIconStruct.DependPackages=["MainUI"];return TopHeadIconStruct}(fairygui.GButton));MainUI.TopHeadIconStruct=TopHeadIconStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopHeadIcon=(function(_super){__extends(TopHeadIcon,_super);function TopHeadIcon(){return _super!==null&&_super.apply(this,arguments)||this}return TopHeadIcon}(MainUI.TopHeadIconStruct));MainUI.TopHeadIcon=TopHeadIcon})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopHeadIconMaskStruct=(function(_super){__extends(TopHeadIconMaskStruct,_super);function TopHeadIconMaskStruct(){return _super.call(this)||this}TopHeadIconMaskStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","TopHeadIconMask"))};TopHeadIconMaskStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};TopHeadIconMaskStruct.URL="ui://7ecreso0pazr2g";TopHeadIconMaskStruct.DependPackages=["MainUI"];return TopHeadIconMaskStruct}(fairygui.GButton));MainUI.TopHeadIconMaskStruct=TopHeadIconMaskStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopHeadIconMask=(function(_super){__extends(TopHeadIconMask,_super);function TopHeadIconMask(){return _super!==null&&_super.apply(this,arguments)||this}return TopHeadIconMask}(MainUI.TopHeadIconMaskStruct));MainUI.TopHeadIconMask=TopHeadIconMask})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopHeadInfoStruct=(function(_super){__extends(TopHeadInfoStruct,_super);function TopHeadInfoStruct(){return _super.call(this)||this}TopHeadInfoStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","TopHeadInfo"))};TopHeadInfoStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_vip=(this.getChild("vip"));this.m_level=(this.getChild("level"));this.m_headIcon=(this.getChild("headIcon"));this.m_expBar=(this.getChild("expBar"))};TopHeadInfoStruct.URL="ui://7ecreso0f2qvx3r";TopHeadInfoStruct.DependPackages=["MainUI"];return TopHeadInfoStruct}(fairygui.GComponent));MainUI.TopHeadInfoStruct=TopHeadInfoStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopHeadInfo=(function(_super){__extends(TopHeadInfo,_super);function TopHeadInfo(){return _super!==null&&_super.apply(this,arguments)||this}return TopHeadInfo}(MainUI.TopHeadInfoStruct));MainUI.TopHeadInfo=TopHeadInfo})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopMainBarStruct=(function(_super){__extends(TopMainBarStruct,_super);function TopMainBarStruct(){return _super.call(this)||this}TopMainBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","TopMainBar"))};TopMainBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_headInfo=(this.getChild("headInfo"));this.m_street=(this.getChild("street"));this.m_server=(this.getChild("server"));this.m_moneyBar=(this.getChild("moneyBar"))};TopMainBarStruct.URL="ui://7ecreso0rbh3x45";TopMainBarStruct.DependPackages=["MainUI","Common"];return TopMainBarStruct}(fairygui.GComponent));MainUI.TopMainBarStruct=TopMainBarStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopMainBar=(function(_super){__extends(TopMainBar,_super);function TopMainBar(){return _super!==null&&_super.apply(this,arguments)||this}TopMainBar.prototype.onWindowInited=function(){this.m_headInfo.m_headIcon.onClick(this,this.onClickHeadIcon);this.m_street.onClick(this,this.onClickStreet);this.m_server.onClick(this,this.onClickRank)};TopMainBar.prototype.onWindowShow=function(){this.refreshData();Game.protoOkEvent.add(ProtoEventKey.GameInfo,this.refreshData,this);Game.protoOkEvent.add(ProtoEventKey.rank_GetSelfList,this.OnRankSelfListResponse,this);Game.protoOkEvent.add(ProtoEventKey.GameData_RenameGameData,this.onServerRename,this)};TopMainBar.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.GameInfo,this.refreshData,this);Game.protoOkEvent.remove(ProtoEventKey.rank_GetSelfList,this.OnRankSelfListResponse,this);Game.protoOkEvent.remove(ProtoEventKey.GameData_RenameGameData,this.onServerRename,this)};TopMainBar.prototype.onClickHeadIcon=function(){Game.menu.open(MenuId.PlayerInfo)};TopMainBar.prototype.showBuildScene=function(){if(this.buildScene===undefined){this.buildScene=Games.BuildScene.creat()}var roomInfo=Game.moduleModel.building.getRoomByType(Games.RoomType.Finance);this.buildScene.onBuildComplete(roomInfo);this.buildScene.setSceneSizeForState();this.buildScene.tryLoadBuildTexture();var roomAvatarList=Game.moduleModel.building.getRoomAvatarList(Games.RoomType.Finance);for(var i=0;i<roomAvatarList.length;i++){this.buildScene.setRoomAvatar(roomAvatarList[i])}Laya.stage.addChild(this.buildScene.mainView.displayObject);this.buildScene.mainView.displayObject.y=Laya.stage.height-this.buildScene.roomHeight};TopMainBar.prototype.destroyScene=function(){if(this.buildScene){this.buildScene.dispose();this.buildScene=undefined}};TopMainBar.prototype.onClickRank=function(){Game.menu.open(MenuId.Rank)};TopMainBar.prototype.onClickStreet=function(){Game.menu.open(MenuId.Street)};TopMainBar.prototype.OnRankSelfListResponse=function(){this.m_server.m_serverName.text=Game.moduleModel.rank.ServerName;this.m_server.m_serverRank.text=Games.TEXT.RankText.format(Game.moduleModel.rank.SelfServerRank);this.m_street.m_streetId.text=Game.moduleModel.street.GetStreetNameTips(Game.moduleModel.street.streetCurrentId);this.m_street.m_streetRank.text=Games.TEXT.RankText.format(Game.moduleModel.rank.SelfGroupRank);this.m_street.m_blockIcon.url=Game.config.blockLevel.getBlockIconUrl(User.info.stall)};TopMainBar.prototype.onServerRename=function(){this.m_street.m_roleName.text=User.info.name};TopMainBar.prototype.refreshData=function(){this.m_headInfo.m_headIcon.icon=User.headIconUrl;this.m_headInfo.m_expBar.max=User.upgradeFans;this.m_headInfo.m_expBar.value=User.info.fans;this.m_headInfo.m_vip.text="Star "+User.info.vipLevel;this.m_headInfo.m_level.text=format(TEXT.LVDot,User.info.level);this.m_street.m_roleName.text=User.info.name;this.OnRankSelfListResponse();this.refreshRankUnlock()};TopMainBar.prototype.refreshRankUnlock=function(){if(Games.MenuValidateOpening.getInstance().validate(MenuId.Rank)&&Games.MenuValidateUnlock.getInstance().validate(MenuId.Rank)){this.m_server.visible=true}else{this.m_server.visible=false}};TopMainBar.prototype.onRefreshUnlock=function(){this.refreshRankUnlock()};TopMainBar.prototype.onRefreshRed=function(){this.m_street.m_red.visible=Game.moduleModel.street.RedNum;this.m_server.m_red.visible=Game.moduleModel.rank.RedNum};return TopMainBar}(MainUI.TopMainBarStruct));MainUI.TopMainBar=TopMainBar})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopMoneyItemStruct=(function(_super){__extends(TopMoneyItemStruct,_super);function TopMoneyItemStruct(){return _super.call(this)||this}TopMoneyItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","TopMoneyItem"))};TopMoneyItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_addButtonVisiable=this.getController("addButtonVisiable");this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"));this.m_addButton=(this.getChild("addButton"))};TopMoneyItemStruct.URL="ui://7ecreso0rbh3x48";TopMoneyItemStruct.DependPackages=["MainUI","Common"];return TopMoneyItemStruct}(fairygui.GLabel));MainUI.TopMoneyItemStruct=TopMoneyItemStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopMoneyItem=(function(_super){__extends(TopMoneyItem,_super);function TopMoneyItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._itemId=-1;return _this}Object.defineProperty(TopMoneyItem.prototype,"itemId",{get:function(){if(this._itemId==-1){if(!isNullOrEmpty(this.data)){var info=JSON.parse(this.data);this._itemId=info.itemId}}return this._itemId},set:function(val){this._itemId=val},enumerable:true,configurable:true});TopMoneyItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_addButton.onClick(this,this.onClickAdd)};TopMoneyItem.prototype.onClickAdd=function(){};TopMoneyItem.prototype.refreshData=function(){if(this.itemId!=-1){this.m_title.text=Game.moduleModel.item.getItemNumTxt(this.itemId)}};return TopMoneyItem}(MainUI.TopMoneyItemStruct));MainUI.TopMoneyItem=TopMoneyItem})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopMoneyMainBarStruct=(function(_super){__extends(TopMoneyMainBarStruct,_super);function TopMoneyMainBarStruct(){return _super.call(this)||this}TopMoneyMainBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","TopMoneyMainBar"))};TopMoneyMainBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_gold=(this.getChild("gold"));this.m_diamond=(this.getChild("diamond"))};TopMoneyMainBarStruct.URL="ui://7ecreso0f2qvx3s";TopMoneyMainBarStruct.DependPackages=["MainUI","Common"];return TopMoneyMainBarStruct}(fairygui.GComponent));MainUI.TopMoneyMainBarStruct=TopMoneyMainBarStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopMoneyMainBar=(function(_super){__extends(TopMoneyMainBar,_super);function TopMoneyMainBar(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.itemList=[];return _this}TopMoneyMainBar.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);for(var i=0;i<this.numChildren;i++){var item=(this.getChildAt(i));if(item instanceof MainUI.TopMoneyItem){this.itemList.push(item)}}};TopMoneyMainBar.prototype.onWindowShow=function(){this.refreshData();Game.protoOkEvent.add(ProtoEventKey.ItemData,this.refreshData,this)};TopMoneyMainBar.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.ItemData,this.refreshData,this)};TopMoneyMainBar.prototype.refreshData=function(){for(var i=0;i<this.itemList.length;i++){this.itemList[i].refreshData()}};return TopMoneyMainBar}(MainUI.TopMoneyMainBarStruct));MainUI.TopMoneyMainBar=TopMoneyMainBar})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopServerStruct=(function(_super){__extends(TopServerStruct,_super);function TopServerStruct(){return _super.call(this)||this}TopServerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","TopServer"))};TopServerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_serverName=(this.getChild("serverName"));this.m_serverRank=(this.getChild("serverRank"));this.m_red=(this.getChild("red"))};TopServerStruct.URL="ui://7ecreso0rbh3x47";TopServerStruct.DependPackages=["MainUI","Common"];return TopServerStruct}(fairygui.GButton));MainUI.TopServerStruct=TopServerStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopServer=(function(_super){__extends(TopServer,_super);function TopServer(){return _super!==null&&_super.apply(this,arguments)||this}return TopServer}(MainUI.TopServerStruct));MainUI.TopServer=TopServer})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopStreetStruct=(function(_super){__extends(TopStreetStruct,_super);function TopStreetStruct(){return _super.call(this)||this}TopStreetStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","TopStreet"))};TopStreetStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_blockIcon=(this.getChild("blockIcon"));this.m_streetId=(this.getChild("streetId"));this.m_roleName=(this.getChild("roleName"));this.m_streetRank=(this.getChild("streetRank"));this.m_red=(this.getChild("red"))};TopStreetStruct.URL="ui://7ecreso0rbh3x46";TopStreetStruct.DependPackages=["MainUI"];return TopStreetStruct}(fairygui.GButton));MainUI.TopStreetStruct=TopStreetStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var TopStreet=(function(_super){__extends(TopStreet,_super);function TopStreet(){return _super!==null&&_super.apply(this,arguments)||this}return TopStreet}(MainUI.TopStreetStruct));MainUI.TopStreet=TopStreet})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var VisitMainTopUIStruct=(function(_super){__extends(VisitMainTopUIStruct,_super);function VisitMainTopUIStruct(){return _super.call(this)||this}VisitMainTopUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","VisitMainTopUI"))};VisitMainTopUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_name=(this.getChild("name"));this.m_checklabel=(this.getChild("checklabel"));this.m_time=(this.getChild("time"));this.m_checkbox=(this.getChild("checkbox"))};VisitMainTopUIStruct.URL="ui://7ecreso0tpm8x5e";VisitMainTopUIStruct.DependPackages=["MainUI","Common"];return VisitMainTopUIStruct}(fairygui.GComponent));MainUI.VisitMainTopUIStruct=VisitMainTopUIStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var VisitMainTopUI=(function(_super){__extends(VisitMainTopUI,_super);function VisitMainTopUI(){return _super!==null&&_super.apply(this,arguments)||this}VisitMainTopUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.VisitFansWantMeet;this.visible=false};VisitMainTopUI.prototype.show=function(data){if(data.actorId>0){this.visitData=data;if(this.visible==false){this.visible=true;this.onWindowShow()}if(Game.moduleModel.secretary.isTempSecretary){var remainTimes=Game.moduleModel.secretary.autoVisitNum;if(remainTimes<=0){Game.moduleModel.secretary.isAutoVisit=false}}if(this.avatar==null){var aInfo=Games.AvatarInfo.creatByAvatarId(data.actorId);this.avatar=Game.creator.creatEUnit(aInfo);var bounds=this.avatar.getBounds();this.avatar.pos((this.width)*0.5,bounds.height+80);this.avatar.showOn(this);this.avatar.direction=Games.DirtionType.Left;this.avatar.on(Laya.Event.CLICK,this,this.onClickIcon);this.avatar.openShadow()}var actorData=Game.moduleModel.actor.getActor(data.actorId);if(actorData){this.m_name.text=Game.moduleModel.actor.getActor(data.actorId).name;this.m_checklabel.text=Games.TEXT.VisitAutoReceive;Laya.timer.loop(1000,this,this.onUpdateTime,null,true);this.m_checkbox.selected=Game.moduleModel.secretary.isAutoVisit;this.onUpdateTime()}}else{this.hide()}};VisitMainTopUI.prototype.clearTime=function(){Laya.timer.clear(this,this.onUpdateTime)};VisitMainTopUI.prototype.onUpdateTime=function(){var nowTime=Game.time.serverSeconds;var nextTime=this.visitData.leaveTime;var duration=Math.max(0,nextTime-nowTime);if(duration>0){this.m_time.text=TimeHelper.TimeFormat3(duration)}else{this.hide()}};VisitMainTopUI.prototype.onClickCheckBox=function(){if(this.m_checkbox.selected){if(Game.moduleModel.secretary.autoVisitNum>0){Game.moduleModel.secretary.isAutoVisit=this.m_checkbox.selected;Game.menu.close(MenuId.Fans);Games.AvatarManager.autoActorToReception(this.visitData.actorId)}else{if(Game.moduleModel.secretary.isTempSecretary){Game.system.confirmText(Game.config.msg.getTxtFormat(MsgKey.secretary_experience,Game.config.msg.getTxt(MsgKey.secretary_auto2)),TEXT.SecretaryForeverAgent,null,function(){Game.menu.open(MenuId.Weal,1)},null,Game.config.msg.getTxt(MsgKey.go_to_hire),TEXT.ButtonCannel,false)}else{Game.system.confirmText(Game.config.msg.getTxtFormat(MsgKey.secretary_not_owned,Game.config.msg.getTxt(MsgKey.secretary_auto2)),TEXT.SecretaryForeverAgent,null,function(){Game.menu.open(MenuId.Weal,1)},null,Game.config.msg.getTxt(MsgKey.go_to_hire),TEXT.ButtonCannel,false)}this.m_checkbox.selected=false;Game.moduleModel.secretary.isAutoVisit=this.m_checkbox.selected}}else{Game.moduleModel.secretary.isAutoVisit=this.m_checkbox.selected}};VisitMainTopUI.prototype.onWindowShow=function(){this.m_checkbox.onClick(this,this.onClickCheckBox)};VisitMainTopUI.prototype.onWindowHide=function(){this.m_checkbox.offClick(this,this.onClickCheckBox)};VisitMainTopUI.prototype.onClickIcon=function(){Game.system.toastText(Game.config.msg.getTxt(MsgKey.visit_point))};VisitMainTopUI.prototype.hide=function(){this.clearTime();if(this.visible){this.visible=false;this.onWindowHide()}if(this.avatar){this.avatar.off(Laya.Event.CLICK,this,this.onClickIcon);this.avatar.dispose();this.avatar=null}};return VisitMainTopUI}(MainUI.VisitMainTopUIStruct));MainUI.VisitMainTopUI=VisitMainTopUI})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var WarExpectStruct=(function(_super){__extends(WarExpectStruct,_super);function WarExpectStruct(){return _super.call(this)||this}WarExpectStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","WarExpect"))};WarExpectStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_control=this.getController("control");this.m_tip1=(this.getChild("tip1"));this.m_tip2=(this.getChild("tip2"));this.m_expectProgress=(this.getChild("expectProgress"));this.m_t0=this.getTransition("t0")};WarExpectStruct.URL="ui://7ecreso0qz7hx4r";WarExpectStruct.DependPackages=["MainUI","System","Common"];return WarExpectStruct}(fairygui.GComponent));MainUI.WarExpectStruct=WarExpectStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var WarExpect=(function(_super){__extends(WarExpect,_super);function WarExpect(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.showHide=false;return _this}WarExpect.prototype.showHidePanel=function(showHide){if(showHide===void 0){showHide=true}this.showHide=showHide;this.visible=this.showHide;if(this.visible){this.onWindowShow()}else{this.onWindowHide()}};WarExpect.prototype.onWindowShow=function(){if(this.visible){this.m_t0.play(null,-1)}};WarExpect.prototype.onWindowHide=function(){this.m_t0.stop()};WarExpect.prototype.setData=function(showHide){if(showHide===void 0){showHide=true}if(this.showHide){var expectVal=User.info.expected;var movieExpect=Game.config.movieExpect.getConfigWithExpect(expectVal);var indexOf=0;switch(movieExpect.id){case 1:case 2:indexOf=1;break;case 3:case 4:indexOf=2;break;default:indexOf=0;break}this.m_control.setSelectedIndex(indexOf);this.m_expectProgress.m_Progress.setSelectedIndex(indexOf);var max=movieExpect.expect_req_max;if(max<0){max=expectVal+10}this.m_expectProgress.max=max;this.m_expectProgress.value=expectVal;if(movieExpect.expect_req_max<0){this.m_expectProgress.m_title.text=expectVal.toFixed(0)}this.m_tip1.text=movieExpect.name}};return WarExpect}(MainUI.WarExpectStruct));MainUI.WarExpect=WarExpect})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var WarFilmContinueStruct=(function(_super){__extends(WarFilmContinueStruct,_super);function WarFilmContinueStruct(){return _super.call(this)||this}WarFilmContinueStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","WarFilmContinue"))};WarFilmContinueStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_filmIcon=(this.getChild("filmIcon"));this.m_t0=this.getTransition("t0")};WarFilmContinueStruct.URL="ui://7ecreso0gbg3x3x";WarFilmContinueStruct.DependPackages=["MainUI","Common"];return WarFilmContinueStruct}(fairygui.GButton));MainUI.WarFilmContinueStruct=WarFilmContinueStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var WarFilmContinue=(function(_super){__extends(WarFilmContinue,_super);function WarFilmContinue(){return _super!==null&&_super.apply(this,arguments)||this}WarFilmContinue.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickBtn)};WarFilmContinue.prototype.onClickBtn=function(){Game.moduleModel.task.seeMovieRewardNum=1;Game.menu.open(MenuId.WarContinue,[this.incomeData])};WarFilmContinue.prototype.setData=function(indexOf){this.incomeData=Game.moduleModel.warData.endIncomeList[indexOf];var moveStory=Game.config.story.getConfig(this.incomeData.moveData.movieId);this.m_filmIcon.icon=Game.config.avatar.getConfig(moveStory.poster_name).iconUrl;if(this.incomeData.remainingTime<=0){this.m_t0.stop()}else{this.m_t0.play(null,-1)}};return WarFilmContinue}(MainUI.WarFilmContinueStruct));MainUI.WarFilmContinue=WarFilmContinue})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var WarFilmSmallsStruct=(function(_super){__extends(WarFilmSmallsStruct,_super);function WarFilmSmallsStruct(){return _super.call(this)||this}WarFilmSmallsStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","WarFilmSmalls"))};WarFilmSmallsStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_filmName=(this.getChild("filmName"));this.m_dayLeft=(this.getChild("dayLeft"));this.m_total=(this.getChild("total"));this.m_addVal=(this.getChild("addVal"));this.m_progressList=(this.getChild("progressList"));this.m_t0=this.getTransition("t0")};WarFilmSmallsStruct.URL="ui://7ecreso0mjkfx3t";WarFilmSmallsStruct.DependPackages=["MainUI","Common"];return WarFilmSmallsStruct}(fairygui.GButton));MainUI.WarFilmSmallsStruct=WarFilmSmallsStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var WarFilmSmalls=(function(_super){__extends(WarFilmSmalls,_super);function WarFilmSmalls(){return _super!==null&&_super.apply(this,arguments)||this}WarFilmSmalls.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_progressList.itemRenderer=Laya.Handler.create(this,this.initItem,null,false);this.onClick(this,this.onClickBtn)};WarFilmSmalls.prototype.onClickBtn=function(){if(this.curTween&&this.curTween!==null){this.curTween.complete()}this.setHide();Game.menu.open(MenuId.War)};WarFilmSmalls.prototype.setHide=function(){if(this.visible){this.clearData();Game.event.remove(GameEventKey.GameEventKey_UpdateFilmingStatus,this.updateData,this);this.visible=false}};WarFilmSmalls.prototype.setShow=function(){this.setData();this.visible=true;this.updateData();Game.event.add(GameEventKey.GameEventKey_UpdateFilmingStatus,this.updateData,this)};WarFilmSmalls.prototype.onWindowHide=function(){};WarFilmSmalls.prototype.setData=function(){this.dayLeftTip=Game.config.msg.getConfig(MsgKey.movie_remaining_days).notice;var moveData=Game.moduleModel.warData.moveData;this.m_filmName.text=moveData.name};WarFilmSmalls.prototype.clearData=function(){this.m_filmName.text="";this.m_total.text="";this.m_addVal.text="";this.m_dayLeft.text="";this.m_progressList.numItems=0};WarFilmSmalls.prototype.initItem=function(index,obj){var item=obj;item.max=Game.moduleModel.warData.filmingMaxCur;if(index+1===Game.moduleModel.warData.filmingCurDay){item.value=0;if(this.curTween&&this.curTween!==null){this.curTween.complete()}this.curTween=laya.utils.Tween.to(item,{value:Game.moduleModel.warData.moveData.runDays[index]},Game.moduleModel.warData.movieHistogramTime,Laya.Ease.linearIn)}else{item.value=Game.moduleModel.warData.moveData.runDays[index]}};WarFilmSmalls.prototype.updateData=function(){if(Game.moduleModel.warData.filmingCurDay>0&&Game.moduleModel.warData.filmingCurDay<=Game.moduleModel.warData.filmingMaxDay){this.m_total.text=formatNumberUnit(Game.moduleModel.warData.filmingTotal);this.m_addVal.text=format("+{0}",formatNumberUnit(Game.moduleModel.warData.moveData.runDays[Game.moduleModel.warData.filmingCurDay-1]));var lastDay=Game.moduleModel.warData.filmingMaxDay-Game.moduleModel.warData.filmingCurDay;this.m_dayLeft.text=format(this.dayLeftTip,lastDay);this.m_progressList.numItems=Game.moduleModel.warData.filmingCurDay;this.m_progressList.scrollToView(Game.moduleModel.warData.filmingCurDay-1)}else{if(Game.moduleModel.warData.filmingCurDay===Game.moduleModel.warData.filmingMaxDay+1){this.setHide()}}};return WarFilmSmalls}(MainUI.WarFilmSmallsStruct));MainUI.WarFilmSmalls=WarFilmSmalls})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var WarShangyingProgressBar2Struct=(function(_super){__extends(WarShangyingProgressBar2Struct,_super);function WarShangyingProgressBar2Struct(){return _super.call(this)||this}WarShangyingProgressBar2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","WarShangyingProgressBar2"))};WarShangyingProgressBar2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar_v=(this.getChild("bar_v"))};WarShangyingProgressBar2Struct.URL="ui://7ecreso0ma97x3u";WarShangyingProgressBar2Struct.DependPackages=["MainUI","Common"];return WarShangyingProgressBar2Struct}(fairygui.GProgressBar));MainUI.WarShangyingProgressBar2Struct=WarShangyingProgressBar2Struct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var WarShangyingProgressBar2=(function(_super){__extends(WarShangyingProgressBar2,_super);function WarShangyingProgressBar2(){return _super!==null&&_super.apply(this,arguments)||this}return WarShangyingProgressBar2}(MainUI.WarShangyingProgressBar2Struct));MainUI.WarShangyingProgressBar2=WarShangyingProgressBar2})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var WarTipTopUIStruct=(function(_super){__extends(WarTipTopUIStruct,_super);function WarTipTopUIStruct(){return _super.call(this)||this}WarTipTopUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","WarTipTopUI"))};WarTipTopUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};WarTipTopUIStruct.URL="ui://7ecreso0sucvx5j";WarTipTopUIStruct.DependPackages=["MainUI"];return WarTipTopUIStruct}(fairygui.GButton));MainUI.WarTipTopUIStruct=WarTipTopUIStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var WarTipTopUI=(function(_super){__extends(WarTipTopUI,_super);function WarTipTopUI(){return _super!==null&&_super.apply(this,arguments)||this}return WarTipTopUI}(MainUI.WarTipTopUIStruct));MainUI.WarTipTopUI=WarTipTopUI})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var ZhuIconStruct=(function(_super){__extends(ZhuIconStruct,_super);function ZhuIconStruct(){return _super.call(this)||this}ZhuIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("MainUI","ZhuIcon"))};ZhuIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};ZhuIconStruct.URL="ui://7ecreso0sucvx5k";ZhuIconStruct.DependPackages=["MainUI","Common"];return ZhuIconStruct}(fairygui.GLabel));MainUI.ZhuIconStruct=ZhuIconStruct})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var MainUI;(function(MainUI){var ZhuIcon=(function(_super){__extends(ZhuIcon,_super);function ZhuIcon(){return _super!==null&&_super.apply(this,arguments)||this}return ZhuIcon}(MainUI.ZhuIconStruct));MainUI.ZhuIcon=ZhuIcon})(MainUI=fgui.MainUI||(fgui.MainUI={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var BusinessLoadingPanelStruct=(function(_super){__extends(BusinessLoadingPanelStruct,_super);function BusinessLoadingPanelStruct(){return _super.call(this)||this}BusinessLoadingPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","BusinessLoadingPanel"))};BusinessLoadingPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_progress=(this.getChild("progress"))};BusinessLoadingPanelStruct.URL="ui://y3jchkngtpm80";BusinessLoadingPanelStruct.DependPackages=["Manage","WarMovie"];return BusinessLoadingPanelStruct}(fairygui.GComponent));Manage.BusinessLoadingPanelStruct=BusinessLoadingPanelStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var BusinessLoadingPanel=(function(_super){__extends(BusinessLoadingPanel,_super);function BusinessLoadingPanel(){return _super!==null&&_super.apply(this,arguments)||this}BusinessLoadingPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=Games.TEXT.BusinessReadNewMsg};return BusinessLoadingPanel}(Manage.BusinessLoadingPanelStruct));Manage.BusinessLoadingPanel=BusinessLoadingPanel})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var BusinessMsgPanelStruct=(function(_super){__extends(BusinessMsgPanelStruct,_super);function BusinessMsgPanelStruct(){return _super.call(this)||this}BusinessMsgPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","BusinessMsgPanel"))};BusinessMsgPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_read=this.getController("read");this.m_company=(this.getChild("company"));this.m_content=(this.getChild("content"));this.m_get=(this.getChild("get"));this.m_reward=(this.getChild("reward"));this.m_t0=this.getTransition("t0")};BusinessMsgPanelStruct.URL="ui://y3jchkngtpm81";BusinessMsgPanelStruct.DependPackages=["Manage","Common"];return BusinessMsgPanelStruct}(fairygui.GComponent));Manage.BusinessMsgPanelStruct=BusinessMsgPanelStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var BusinessMsgPanel=(function(_super){__extends(BusinessMsgPanel,_super);function BusinessMsgPanel(){return _super!==null&&_super.apply(this,arguments)||this}BusinessMsgPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_reward.itemRenderer=Handler.create(this,this.updateRewardItemRender,null,false);this.m_get.text=TEXT.BusinessGet};BusinessMsgPanel.prototype.updateRewardItemRender=function(index,item){var dtItem=this.rewards[index];item.PopupInfo=dtItem.itemId;item.updateViewByDTNum(dtItem)};BusinessMsgPanel.prototype.updateView=function(data){this.rewards=data.resultRewards;this.m_reward.numItems=this.rewards.length};return BusinessMsgPanel}(Manage.BusinessMsgPanelStruct));Manage.BusinessMsgPanel=BusinessMsgPanel})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var BusinessUIStruct=(function(_super){__extends(BusinessUIStruct,_super);function BusinessUIStruct(){return _super.call(this)||this}BusinessUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","BusinessUI"))};BusinessUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_name=(this.getChild("name"));this.m_title=(this.getChild("title"));this.m_remain=(this.getChild("remain"));this.m_tip=(this.getChild("tip"));this.m_auto=(this.getChild("auto"));this.m_commonDialog=(this.getChild("commonDialog"));this.m_checkbox=(this.getChild("checkbox"));this.m_nextBtn=(this.getChild("nextBtn"));this.m_contentPanel=(this.getChild("contentPanel"));this.m_bar=(this.getChild("bar"));this.m_head=(this.getChild("head"))};BusinessUIStruct.URL="ui://y3jchkngtpm82";BusinessUIStruct.DependPackages=["Manage","PfSkin","Common","WarMovie"];return BusinessUIStruct}(fairygui.GComponent));Manage.BusinessUIStruct=BusinessUIStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var BusinessUI=(function(_super){__extends(BusinessUI,_super);function BusinessUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.LevelChatReplace="{level}";_this.FansChatReplace="{fans}";return _this}BusinessUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.chats=[this.LevelChatReplace,this.FansChatReplace];this.m_nextBtn.text=Games.TEXT.BusinessNextPage;this.m_nextBtn.visible=false;this.m_tip.text=Games.TEXT.HaveAgentCanAutoRead;this.m_auto.text=Games.TEXT.AutoRead};BusinessUI.prototype.updateView=function(){this.clearTimerLoop();this.businessData=Game.moduleModel.business.getBusinessData();this.m_contentPanel.m_read.selectedIndex=0;this.m_c1.selectedIndex=0;if(this.businessData){this.m_remain.text=format(Games.TEXT.BusinessRemainRead,this.businessData.nextBusinessNum,this.businessData.lineLimit);if(this.businessData.nextBusinessNum>0){if(Game.moduleModel.secretary.isTempSecretary){var remainTimes=Game.moduleModel.secretary.autoBusinessReadNum;if(remainTimes<=0){this.m_tip.text=Games.TEXT.HaveAgentCanAutoRead}else{this.m_tip.text=format(TEXT.SecretaryRemainAutoReadNum,remainTimes)}}else{this.m_tip.text=Games.TEXT.HaveAgentCanAutoRead}this.m_checkbox.selected=Game.moduleModel.secretary.isAutoRead;var config=this.businessData.config;if(config){this.m_head.m_icon.icon=Game.config.avatar.getConfig(config.icon).iconUrl;this.m_contentPanel.updateView(this.businessData);this.m_name.text=format(Games.TEXT.BusinessSendName,config.from);this.m_title.text=config.name;this.m_contentPanel.m_company.text=User.info.name;this.charIndex=0;var desc=config.description;var value=0;var num=0;for(var index=0;index<this.chats.length;index++){var element=this.chats[index];switch(element){case this.FansChatReplace:num=this.userCurExp;break;case this.LevelChatReplace:num=User.info.level;break;default:break}value=num-Math.floor(num*Random.range(0,0.2));value=Math.max(1,value);desc=desc.replace(element,value+"")}this.content=desc;this.curContent="";this.m_contentPanel.m_content.text="";this.startTypeWrite()}}else{this.onClickCloseBtn()}}};Object.defineProperty(BusinessUI.prototype,"userCurExp",{get:function(){var prevExp=0;for(var i=0;i<User.info.level;i++){var cfg=Game.config.playerLevel.getConfig(i);if(cfg!=null){prevExp+=cfg.fans}}return prevExp+User.info.fans},enumerable:true,configurable:true});BusinessUI.prototype.startTypeWrite=function(){var speed=Game.moduleModel.secretary.isAutoRead?20:100;this.isTyping=true;Laya.timer.loop(speed,this,this.showChatByTime);this.showChatByTime()};BusinessUI.prototype.clearTimerLoop=function(){Laya.timer.clear(this,this.showChatByTime)};BusinessUI.prototype.charByTimeComplete=function(){var _this=this;this.clearTimerLoop();this.isTyping=false;this.m_contentPanel.m_content.text=this.content;this.m_contentPanel.m_read.selectedIndex=1;this.m_contentPanel.m_t0.play(Handler.create(null,function(){if(Game.moduleModel.secretary.isAutoRead){_this.onClickNextBtn()}else{_this.m_nextBtn.visible=true}}))};BusinessUI.prototype.showChatByTime=function(){if(this.charIndex>=this.content.length){this.charByTimeComplete()}else{this.curContent+=this.content.charAt(this.charIndex);this.m_contentPanel.m_content.text=this.curContent;this.charIndex++}};BusinessUI.prototype.onClickCloseBtn=function(){this.moduleWindow.menuClose()};BusinessUI.prototype.onClickNextBtn=function(){this.m_nextBtn.visible=false;Game.moduleModel.business.rewardId=this.businessData.id;Game.protosender.manageBusiness.GetReward()};BusinessUI.prototype.onGetRewardBack=function(){var _this=this;if(Game.moduleModel.business.rewardId>0){var config=Game.config.business.getConfig(Game.moduleModel.business.rewardId);if(config){Games.Static.Instance.onUserorbit("official",config.id.toString(),"end");var otherItem=new DTItemNum();otherItem.itemId=EItemId.expect;otherItem.itemNum=config.expect;var items_1=config.reward.concat();items_1.push(otherItem);var isAuto_1=Game.moduleModel.secretary.isAutoRead;Game.system.getItemText(items_1,function(){Game.system.playEffects(items_1);if(Game.moduleModel.business.getBusinessData().isMaxDaily){Game.system.toastMsg(MsgKey.business_down)}else{if(Game.moduleModel.business.getBusinessData().nextBusinessNum>0){if(_this.m_checkbox.selected&&Game.moduleModel.secretary.isTempSecretary&&Game.moduleModel.secretary.autoBusinessReadNum<=0){Game.moduleModel.secretary.isAutoRead=false;Game.system.confirmText(Game.config.msg.getTxtFormat(MsgKey.secretary_experience,Game.config.msg.getTxt(MsgKey.secretary_auto3)),TEXT.SecretaryForeverAgent,null,function(){Game.menu.open(MenuId.Weal,1)},null,Game.config.msg.getTxt(MsgKey.go_to_hire),TEXT.ButtonCannel,false)}_this.m_c1.selectedIndex=1;_this.m_bar.m_progress.value=0;var speed=isAuto_1?200:3000;Laya.Tween.to(_this.m_bar.m_progress,{value:100},speed,Laya.Ease.linearIn,Handler.create(null,function(){_this.updateView()}))}else{_this.onClickCloseBtn()}}},isAuto_1)}Game.moduleModel.business.rewardId=0}};BusinessUI.prototype.onWindowShow=function(){this.m_nextBtn.onClick(this,this.onClickNextBtn);this.m_checkbox.onClick(this,this.onClickCheckBoxBtn);fairygui.GRoot.inst.onClick(this,this.onClickStage);Game.protoOkEvent.add(ProtoEventKey.manageBusiness_GetReward,this.onGetRewardBack,this);this.updateView()};BusinessUI.prototype.onClickStage=function(){if(Game.moduleModel.secretary.isAutoRead&&this.isTyping){this.charByTimeComplete()}};BusinessUI.prototype.onWindowHide=function(){this.m_nextBtn.offClick(this,this.onClickNextBtn);this.m_checkbox.offClick(this,this.onClickCheckBoxBtn);fairygui.GRoot.inst.offClick(this,this.onClickStage);this.clearTimerLoop();Laya.Tween.clearAll(this.m_bar.m_progress);this.m_nextBtn.visible=false;Game.protoOkEvent.remove(ProtoEventKey.manageBusiness_GetReward,this.onGetRewardBack,this)};BusinessUI.prototype.onClickCheckBoxBtn=function(){if(this.m_checkbox.selected){this.setAutoRead()}else{Game.moduleModel.secretary.isAutoRead=this.m_checkbox.selected}};BusinessUI.prototype.setAutoRead=function(){if(Game.moduleModel.secretary.autoBusinessReadNum>0){Game.moduleModel.secretary.isAutoRead=this.m_checkbox.selected}else{if(Game.moduleModel.secretary.isTempSecretary){Game.system.confirmText(Game.config.msg.getTxtFormat(MsgKey.secretary_experience,Game.config.msg.getTxt(MsgKey.secretary_auto3)),TEXT.SecretaryForeverAgent,null,function(){Game.menu.open(MenuId.Weal,1)},null,Game.config.msg.getTxt(MsgKey.go_to_hire),TEXT.ButtonCannel,false)}else{Game.system.confirmText(Game.config.msg.getTxtFormat(MsgKey.secretary_not_owned,Game.config.msg.getTxt(MsgKey.secretary_auto3)),TEXT.SecretaryForeverAgent,null,function(){Game.menu.open(MenuId.Weal,1)},null,Game.config.msg.getTxt(MsgKey.go_to_hire),TEXT.ButtonCannel,false)}this.m_checkbox.selected=false}};return BusinessUI}(Manage.BusinessUIStruct));Manage.BusinessUI=BusinessUI})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var DeleteBtnStruct=(function(_super){__extends(DeleteBtnStruct,_super);function DeleteBtnStruct(){return _super.call(this)||this}DeleteBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","DeleteBtn"))};DeleteBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};DeleteBtnStruct.URL="ui://y3jchkngtpm8p";DeleteBtnStruct.DependPackages=["Manage","Common"];return DeleteBtnStruct}(fairygui.GButton));Manage.DeleteBtnStruct=DeleteBtnStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var DeleteBtn=(function(_super){__extends(DeleteBtn,_super);function DeleteBtn(){return _super!==null&&_super.apply(this,arguments)||this}return DeleteBtn}(Manage.DeleteBtnStruct));Manage.DeleteBtn=DeleteBtn})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var ManagerOrderNeedItemStruct=(function(_super){__extends(ManagerOrderNeedItemStruct,_super);function ManagerOrderNeedItemStruct(){return _super.call(this)||this}ManagerOrderNeedItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","ManagerOrderNeedItem"))};ManagerOrderNeedItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_complete=this.getController("complete");this.m_canComplete=this.getController("canComplete");this.m_lv=(this.getChild("lv"));this.m_icon=(this.getChild("icon"));this.m_head=(this.getChild("head"));this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1")};ManagerOrderNeedItemStruct.URL="ui://y3jchkngo7tr2r";ManagerOrderNeedItemStruct.DependPackages=["Manage","Common"];return ManagerOrderNeedItemStruct}(fairygui.GButton));Manage.ManagerOrderNeedItemStruct=ManagerOrderNeedItemStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var ManagerOrderNeedItem=(function(_super){__extends(ManagerOrderNeedItem,_super);function ManagerOrderNeedItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isClick=false;_this.clickHandler=0;return _this}ManagerOrderNeedItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickItem)};ManagerOrderNeedItem.prototype.onClickItem=function(){var _this=this;if(this.isClick){return}else{this.isClick=true;this.clickHandler=setTimeout(function(){_this.isClick=false},500)}if(this.isPut){Game.system.toastText(TEXT.OrderTheBoxHasPut)}else{if(this.isCooperation&&this.orderData.isCooperationOrder){Game.system.toastMsg(MsgKey.cooperative_order_repeat)}else{if(this.curItemNum>=this.maxItemNum){var item_1=Game.moduleModel.item.getItem(this.dtItem.itemId);if(item_1){if(this.isCooperation){Game.system.confirmMsg(MsgKey.order_give,[this.maxItemNum,this.dtItem.itemName,this.curItemNum],TEXT.OrderCooperationComfirmTitle,null,function(){Game.protosender.manageOrder.PutItem(_this.orderData.uuid,_this.orderData.entityId,item_1.itemId,1,true,true)})}else{Game.protosender.manageOrder.PutItem(this.orderData.uuid,0,item_1.itemId,0,false,false)}}}else{Game.system.openItemWay(this.dtItem.itemId,this.maxItemNum)}}}};ManagerOrderNeedItem.prototype.updateView=function(data,dtItem,isCooperation){var _this=this;this.isClick=false;clearTimeout(this.clickHandler);this.dtItem=dtItem;this.orderData=data;this.isCooperation=isCooperation;var cur=Game.moduleModel.item.getItemNum(dtItem.itemId);var max=dtItem.itemNum;this.m_lv.text=format("{0}/{1}",cur,max);this.curItemNum=cur;this.maxItemNum=max;this.isPut=data.isPut(dtItem.itemId);if(this.isPut){this.m_canComplete.selectedIndex=0;var orderItem=this.orderData.getOrderItem(dtItem.itemId);this.m_lv.text=max+"";this.m_lv.color="#50e38a";if(orderItem.portrait==-1){if(this.uuid==this.orderData.uuid&&this.prePut==false&&this.isPut==true){this.m_t0.play(Handler.create(null,function(){_this.m_complete.selectedIndex=1}),1)}else{this.m_t0.stop();this.m_complete.selectedIndex=1}}else{this.m_complete.selectedIndex=2;this.m_head.m_icon.icon=Game.config.headPortrait.GetPlayerIconUrl(orderItem.portrait,Game.moduleModel.cooperation.partnerInfData.sex)}}else{this.m_icon.icon=Game.config.item.getConfig(dtItem.itemId).iconUrl;this.m_t0.stop();this.m_t1.play();this.m_complete.selectedIndex=0;if(cur>=max){this.m_lv.color="#50e38a";this.m_canComplete.selectedIndex=1}else{this.m_lv.color="#FF7676";this.m_canComplete.selectedIndex=0}}this.uuid=data.uuid;this.prePut=this.isPut};return ManagerOrderNeedItem}(Manage.ManagerOrderNeedItemStruct));Manage.ManagerOrderNeedItem=ManagerOrderNeedItem})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var ManagerOrderNeedPanelStruct=(function(_super){__extends(ManagerOrderNeedPanelStruct,_super);function ManagerOrderNeedPanelStruct(){return _super.call(this)||this}ManagerOrderNeedPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","ManagerOrderNeedPanel"))};ManagerOrderNeedPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_cooperation=this.getController("c_cooperation");this.m_title=(this.getChild("title"));this.m_orderLabel=(this.getChild("orderLabel"));this.m_needlist=(this.getChild("needlist"));this.m_completeLabel=(this.getChild("completeLabel"));this.m_rewardList=(this.getChild("rewardList"));this.m_deleteBtn=(this.getChild("deleteBtn"));this.m_okBtn=(this.getChild("okBtn"))};ManagerOrderNeedPanelStruct.URL="ui://y3jchkngtpm8o";ManagerOrderNeedPanelStruct.DependPackages=["Manage","Common"];return ManagerOrderNeedPanelStruct}(fairygui.GComponent));Manage.ManagerOrderNeedPanelStruct=ManagerOrderNeedPanelStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var ManagerOrderNeedPanel=(function(_super){__extends(ManagerOrderNeedPanel,_super);function ManagerOrderNeedPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.preOpTime=0;return _this}ManagerOrderNeedPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.OrderNeedTitle;this.m_orderLabel.text=TEXT.OrderNeed;this.m_completeLabel.text=TEXT.OrderCompleteReward;this.m_needlist.itemRenderer=Handler.create(this,this.updateNeedItemRender,null,false);this.m_rewardList.itemRenderer=Handler.create(this,this.updateRwardItemRender,null,false);this.m_okBtn.text=TEXT.Complete};ManagerOrderNeedPanel.prototype.onWindowHide=function(){this.m_deleteBtn.offClick(this,this.onClickDeleteBtn);this.m_okBtn.offClick(this,this.onClickOkBtn)};ManagerOrderNeedPanel.prototype.onWindowShow=function(){this.m_deleteBtn.onClick(this,this.onClickDeleteBtn);this.m_okBtn.onClick(this,this.onClickOkBtn)};ManagerOrderNeedPanel.prototype.enableOp=function(){if(Game.time.localTime-this.preOpTime<1000){return false}this.preOpTime=Game.time.localTime;return true};ManagerOrderNeedPanel.prototype.onClickOkBtn=function(){if(this.orderData.isAllComplete){if(!this.enableOp()){return}Game.protosender.manageOrder.FinishOrder(this.orderData.uuid)}else{Game.system.toastText(Game.config.msg.getConfig(MsgKey.order_fail).notice)}};ManagerOrderNeedPanel.prototype.onClickDeleteBtn=function(){var _this=this;if(!this.enableOp()){return}Game.system.confirmText(TEXT.OrderSureDeleteOrder,TEXT.OrderRefuseOrder,null,function(){Game.protosender.manageOrder.DelOrder(_this.orderData.uuid);_this.enableOp()})};ManagerOrderNeedPanel.prototype.updateNeedItemRender=function(index,item){var item1=item;item1.updateView(this.orderData,this.config.need[index],this.isCooperation)};ManagerOrderNeedPanel.prototype.updateRwardItemRender=function(index,item){item.updateViewByDTNum(this.orderData.rewardItems[index])};ManagerOrderNeedPanel.prototype.updateView=function(data,isCooperation){this.orderData=data;this.config=data.config;this.isCooperation=isCooperation;this.m_needlist.numItems=this.config.need.length;if(this.isCooperation==false){this.m_rewardList.numItems=this.orderData.rewardItems.length}};ManagerOrderNeedPanel.prototype.guideBoxItem=function(index){if(index<this.m_needlist.numItems){for(var j=0;j<this.config.need.length;j++){var element=this.config.need[j];if(this.orderData.isPut(element.itemId)==false){return this.m_needlist.getChildAt(j)}}}return null};return ManagerOrderNeedPanel}(Manage.ManagerOrderNeedPanelStruct));Manage.ManagerOrderNeedPanel=ManagerOrderNeedPanel})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var ManagerOrderUIStruct=(function(_super){__extends(ManagerOrderUIStruct,_super);function ManagerOrderUIStruct(){return _super.call(this)||this}ManagerOrderUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","ManagerOrderUI"))};ManagerOrderUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_c_haveorder=this.getController("c_haveorder");this.m_c_cooperation=this.getController("c_cooperation");this.m_orderGroup=(this.getChild("orderGroup"));this.m_noneOrder=(this.getChild("noneOrder"));this.m_newOrderWay=(this.getChild("newOrderWay"));this.m_noneGroup=(this.getChild("noneGroup"));this.m_sortOrder=(this.getChild("sortOrder"));this.m_cooperator=(this.getChild("cooperator"));this.m_cooperatorName=(this.getChild("cooperatorName"));this.m_needPanel=(this.getChild("needPanel"));this.m_order1=(this.getChild("order1"));this.m_order2=(this.getChild("order2"));this.m_order5=(this.getChild("order5"));this.m_order8=(this.getChild("order8"));this.m_order3=(this.getChild("order3"));this.m_order4=(this.getChild("order4"));this.m_order6=(this.getChild("order6"));this.m_order9=(this.getChild("order9"));this.m_order7=(this.getChild("order7"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_progressTotalBar=(this.getChild("progressTotalBar"));this.m_head=(this.getChild("head"));this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1")};ManagerOrderUIStruct.URL="ui://y3jchkngtpm8u";ManagerOrderUIStruct.DependPackages=["Manage","Common"];return ManagerOrderUIStruct}(fairygui.GComponent));Manage.ManagerOrderUIStruct=ManagerOrderUIStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var ManagerOrderUI=(function(_super){__extends(ManagerOrderUI,_super);function ManagerOrderUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.delayUpdateTimeOutHandler=0;return _this}ManagerOrderUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_noneOrder.text=TEXT.OrderNoneOrder;this.m_newOrderWay.text=TEXT.OrderNewOrderWay;this.orderItemList=[];for(var index=0;index<Game.moduleModel.order.maxOrderMaking;index++){var orderItem=(this.getChild("order"+(index+1)));this.orderItemList.push(orderItem);orderItem.visible=false;orderItem.onClick(this,this.onClickOrderItem,[index])}this.m_cooperator.text=TEXT.OrderCooperation};ManagerOrderUI.prototype.onClickOrderItem=function(select){var item=this.orderItemList[select];var data=item.orderData;if(data&&data.deleteFlag||item.isRemove){return}this.currentSelectUUid=data.uuid;this.currentSelect=select;this.updateNeedPanel()};ManagerOrderUI.prototype.updateNeedPanel=function(){var select;for(var index=0;index<this.orderItemList.length;index++){var element=this.orderItemList[index];if(index==this.currentSelect){select=element;element.m_c3.selectedIndex=1}else{element.m_c3.selectedIndex=0}}var data;if(this.currentSelect>=0){this.m_needPanel.visible=true;this.moduleWindow.openTab(Games.OrderPanelType.NeedPanel);if(isNullOrEmpty(this.currentSelectUUid)){data=this.getOrderDataByPos(this.currentSelect+1)}else{data=Game.moduleModel.order.getOrderDataByUUid(this.currentSelectUUid)}Game.moduleModel.order.curData=data;if(data==null||data.deleteFlag){this.currentSelect=-1;this.currentSelectUUid="";Game.moduleModel.order.curData=null;this.updateNeedPanel()}else{this.currentSelectUUid=data.uuid;this.m_needPanel.updateView(data,this.isCooperation)}}else{this.currentSelectUUid="";Game.moduleModel.order.curData=null;this.m_needPanel.visible=false;this.moduleWindow.openTab(Games.OrderPanelType.NonePanel)}};ManagerOrderUI.prototype.updateDelayView=function(){var _this=this;if(this.delayUpdateTimeOutHandler>0){clearTimeout(this.delayUpdateTimeOutHandler)}this.delayUpdateTimeOutHandler=setTimeout(function(){_this.updateViewNow()},500)};ManagerOrderUI.prototype.updateViewNow=function(){this.updateOrderView();this.updateNeedPanel()};ManagerOrderUI.prototype.getOrderDataByPos=function(pos){for(var index=0;index<this.orderDataList.length;index++){var element=this.orderDataList[index];if(element.position==pos){return element}}return null};ManagerOrderUI.prototype.updateOrderView=function(){var startIndex=0;if(this.isCooperation){this.orderDataList=Game.moduleModel.order.getCooperationOrderList()}else{this.orderDataList=Game.moduleModel.order.getCurrrentOrderList()}for(var index=0;index<this.orderItemList.length;index++){var item=this.orderItemList[index];var data=this.getOrderDataByPos(index+1);item.updateView(data)}this.m_sortOrder.text=format(TEXT.OrderSortOrder,Game.moduleModel.order.sortOrderMaking);if(this.orderDataList.length>0){this.m_c_haveorder.selectedIndex=0}else{if(this.isCooperation){this.onClickCloseBtn()}this.m_c_haveorder.selectedIndex=1}};ManagerOrderUI.prototype.onWindowHide=function(){if(this.isCooperation){Game.event.remove(GameEventKey.GameEventKey_UpdateCoopreationOrderView,this.updateDelayView,this)}else{Game.event.remove(GameEventKey.GameEventKey_UpdateOrderView,this.updateDelayView,this)}Game.protoOkEvent.remove(ProtoEventKey.ItemData,this.updateDelayView,this);Game.protoOkEvent.remove(ProtoEventKey.ManageOrderData,this.updateDelayView,this);this.m_closeBtn.offClick(this,this.onClickCloseBtn);this.clearFlags();Game.moduleModel.order.curData=null};ManagerOrderUI.prototype.onWindowShow=function(){this.isCooperation=false;if(this.moduleWindow.menuParameter.args&&this.moduleWindow.menuParameter.args.length>0){this.isCooperation=this.moduleWindow.menuParameter.args[0]}if(this.isCooperation){this.m_progressTotalBar.visible=false;this.m_needPanel.m_c_cooperation.selectedIndex=1;this.m_c_cooperation.selectedIndex=1;this.m_head.m_icon.icon=Game.config.headPortrait.GetPlayerIconUrl(Game.moduleModel.cooperation.partnerInfData.portrait,Game.moduleModel.cooperation.partnerInfData.sex);this.m_cooperatorName.text=Game.moduleModel.cooperation.partnerInfData.name;Game.event.add(GameEventKey.GameEventKey_UpdateCoopreationOrderView,this.updateDelayView,this)}else{this.m_progressTotalBar.visible=true;this.m_needPanel.m_c_cooperation.selectedIndex=0;this.m_c_cooperation.selectedIndex=0;Game.event.add(GameEventKey.GameEventKey_UpdateOrderView,this.updateDelayView,this);this.m_progressTotalBar.setProgressId(EProgressBoxId.manageOrder,this.onClickBox);this.currentSelect=-1}Game.protoOkEvent.add(ProtoEventKey.ItemData,this.updateDelayView,this);this.m_closeBtn.onClick(this,this.onClickCloseBtn);this.updateViewNow();Game.protoOkEvent.add(ProtoEventKey.ManageOrderData,this.updateDelayView,this)};ManagerOrderUI.prototype.onClickBox=function(index,needOrderNum,isCollect){if(isCollect==false){Game.system.toastText(Game.config.msg.getTxtFormat(MsgKey.order_complete,needOrderNum))}};ManagerOrderUI.prototype.clearFlags=function(){for(var index=0;index<this.orderItemList.length;index++){var element=this.orderItemList[index];element.clearTime();element.clearFlag()}this.currentSelectUUid="";this.currentSelect=-1};ManagerOrderUI.prototype.onClickCloseBtn=function(){this.moduleWindow.menuClose()};ManagerOrderUI.prototype.guideSelectOrder=function(){var orderDataList=Game.moduleModel.order.getCurrrentOrderList();for(var index=0;index<orderDataList.length;index++){var element=orderDataList[index];if(element.isAllComplete){return this.orderItemList[element.position-1]}}for(var index=0;index<orderDataList.length;index++){var element=orderDataList[index];if(element.isCanPut){return this.orderItemList[element.position-1]}}if(orderDataList.length>0){return this.orderItemList[orderDataList[0].position-1]}return null};ManagerOrderUI.prototype.guideBoxItem=function(index){return this.m_needPanel.guideBoxItem(index-1)};return ManagerOrderUI}(Manage.ManagerOrderUIStruct));Manage.ManagerOrderUI=ManagerOrderUI})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingAskPricePanelStruct=(function(_super){__extends(MeetingAskPricePanelStruct,_super);function MeetingAskPricePanelStruct(){return _super.call(this)||this}MeetingAskPricePanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","MeetingAskPricePanel"))};MeetingAskPricePanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_tip=(this.getChild("tip"));this.m_title=(this.getChild("title"));this.m_remainTimes=(this.getChild("remainTimes"));this.m_remainTimesTitle=(this.getChild("remainTimesTitle"));this.m_pay1Btn=(this.getChild("pay1Btn"));this.m_pay2Btn=(this.getChild("pay2Btn"));this.m_refuse=(this.getChild("refuse"));this.m_dialog=(this.getChild("dialog"));this.m_okBtn=(this.getChild("okBtn"));this.m_head=(this.getChild("head"))};MeetingAskPricePanelStruct.URL="ui://y3jchkngtpm81l";MeetingAskPricePanelStruct.DependPackages=["Manage","Common"];return MeetingAskPricePanelStruct}(fairygui.GComponent));Manage.MeetingAskPricePanelStruct=MeetingAskPricePanelStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingAskPricePanel=(function(_super){__extends(MeetingAskPricePanel,_super);function MeetingAskPricePanel(){return _super!==null&&_super.apply(this,arguments)||this}MeetingAskPricePanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_pay1Btn.text=Games.TEXT.MeetingMantianYaojia;this.m_pay2Btn.text=Games.TEXT.MeetingTaojiahuanjia;this.m_pay1Btn.m_number.text="+200%";this.m_pay2Btn.m_number.text="+50%";this.m_title.text=TEXT.MeetingInMeeting;this.m_tip.text=TEXT.MeetingNeedAddPiece;this.m_remainTimesTitle.text=Game.config.msg.getTxt(MsgKey.left_times);this.m_refuse.text=Games.TEXT.MeetingHuijue;this.m_okBtn.text=Games.TEXT.MeetingChengjiao;this.m_pay1Btn.onClick(this,this.onClickPay1Btn);this.m_pay2Btn.onClick(this,this.onClickPay2Btn);this.m_refuse.onClick(this,this.onClickRefuseBtn);this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_okBtn.text=Games.TEXT.MeetingChengjiao};MeetingAskPricePanel.prototype.onWindowHide=function(){console.log("hide")};MeetingAskPricePanel.prototype.onWindowShow=function(){console.log("show")};MeetingAskPricePanel.prototype.onClickPay1Btn=function(){Game.moduleModel.meeting.isDouble=true;this.moduleView.showGamePanel();Game.event.dispatch(GameEventKey.GameEventKey_MeetingStep,2);Game.protosender.manageMeeting.Markup(1)};MeetingAskPricePanel.prototype.onClickPay2Btn=function(){Game.moduleModel.meeting.isDouble=false;this.moduleView.showGamePanel();Game.event.dispatch(GameEventKey.GameEventKey_MeetingStep,1);Game.protosender.manageMeeting.Markup(2)};MeetingAskPricePanel.prototype.onClickRefuseBtn=function(){var data=Game.moduleModel.meeting.getMeetingData();if(data){Games.Static.Instance.onUserorbit("meeting",data.pireceIntoDaDianForMaidian(0),"end")}Game.protosender.manageMeeting.GetReward(MeetingRewardType.Refuse)};MeetingAskPricePanel.prototype.onClickOkBtn=function(){var _this=this;Game.system.openAwardsAlert([this.meetingData.costMoney],Games.TEXT.MeetingChengjiaoSure,function(){var enough=ItemHelper.checkItemEnough(_this.meetingData.costMoney);if(enough){Game.moduleModel.meeting.rewardItems=_this.meetingData.resultRewards;var data=Game.moduleModel.meeting.getMeetingData();if(data){Games.Static.Instance.onUserorbit("meeting",data.pireceIntoDaDianForMaidian(1),"end")}Game.protosender.manageMeeting.GetReward(MeetingRewardType.Receive)}else{Game.system.openItemWay(_this.meetingData.costMoney.itemId,_this.meetingData.costMoney.itemNum)}})};MeetingAskPricePanel.prototype.updateItemRender=function(index,item){var item1=item;item1.updateViewByDTNum(this.meetingData.rewards[index])};MeetingAskPricePanel.prototype.updateView=function(){this.m_dialog.m_title.text=Game.moduleModel.meeting.companyGoal;var meetingData=Game.moduleModel.meeting.getMeetingData();this.meetingData=meetingData;this.m_dialog.updateView(meetingData);if(meetingData){var cost=meetingData.costMoney;this.m_okBtn.m_number.text=formatNumberUnit(cost.itemNum);this.m_okBtn.m_icon.icon=Game.config.item.getConfig(cost.itemId).iconUrl;this.m_remainTimes.text=format("{0}/{1}",meetingData.nextMeetingNum,this.meetingData.lineLimit)}var avatarConfig=Game.config.avatar.getConfig(Game.moduleModel.meeting.companyDelegateAvatarId);if(avatarConfig){this.m_head.m_icon.icon=avatarConfig.iconUrl}};return MeetingAskPricePanel}(Manage.MeetingAskPricePanelStruct));Manage.MeetingAskPricePanel=MeetingAskPricePanel})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingDialogRewardPanelStruct=(function(_super){__extends(MeetingDialogRewardPanelStruct,_super);function MeetingDialogRewardPanelStruct(){return _super.call(this)||this}MeetingDialogRewardPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","MeetingDialogRewardPanel"))};MeetingDialogRewardPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_talkBg=(this.getChild("talkBg"));this.m_title=(this.getChild("title"));this.m_name=(this.getChild("name"));this.m_list=(this.getChild("list"))};MeetingDialogRewardPanelStruct.URL="ui://y3jchkngtpm82b";MeetingDialogRewardPanelStruct.DependPackages=["Manage","Common"];return MeetingDialogRewardPanelStruct}(fairygui.GLabel));Manage.MeetingDialogRewardPanelStruct=MeetingDialogRewardPanelStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingDialogRewardPanel=(function(_super){__extends(MeetingDialogRewardPanel,_super);function MeetingDialogRewardPanel(){return _super!==null&&_super.apply(this,arguments)||this}MeetingDialogRewardPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.itemRenderer=Handler.create(this,this.updateItemRender,null,false)};MeetingDialogRewardPanel.prototype.updateItemRender=function(index,item){item.updateViewByDTNum(this.meetingData.rewards[index])};MeetingDialogRewardPanel.prototype.updateView=function(meetingData){this.meetingData=meetingData;this.m_title.text=Game.moduleModel.meeting.companyGoal;this.m_name.text=Games.TEXT.MeetingRewardTitle;if(meetingData.id>0){this.m_list.numItems=meetingData.rewards.length}};return MeetingDialogRewardPanel}(Manage.MeetingDialogRewardPanelStruct));Manage.MeetingDialogRewardPanel=MeetingDialogRewardPanel})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingGameItemStruct=(function(_super){__extends(MeetingGameItemStruct,_super);function MeetingGameItemStruct(){return _super.call(this)||this}MeetingGameItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","MeetingGameItem"))};MeetingGameItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dice=this.getController("dice")};MeetingGameItemStruct.URL="ui://y3jchkngtpm81u";MeetingGameItemStruct.DependPackages=["Manage","Common"];return MeetingGameItemStruct}(fairygui.GComponent));Manage.MeetingGameItemStruct=MeetingGameItemStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingGameItem=(function(_super){__extends(MeetingGameItem,_super);function MeetingGameItem(){return _super!==null&&_super.apply(this,arguments)||this}return MeetingGameItem}(Manage.MeetingGameItemStruct));Manage.MeetingGameItem=MeetingGameItem})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingGamePanelStruct=(function(_super){__extends(MeetingGamePanelStruct,_super);function MeetingGamePanelStruct(){return _super.call(this)||this}MeetingGamePanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","MeetingGamePanel"))};MeetingGamePanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_other=(this.getChild("other"));this.m_minelist=(this.getChild("minelist"));this.m_stopBtn=(this.getChild("stopBtn"));this.m_head=(this.getChild("head"));this.m_target=(this.getChild("target"))};MeetingGamePanelStruct.URL="ui://y3jchkngtpm821";MeetingGamePanelStruct.DependPackages=["Manage","Common"];return MeetingGamePanelStruct}(fairygui.GComponent));Manage.MeetingGamePanelStruct=MeetingGamePanelStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingGamePanel=(function(_super){__extends(MeetingGamePanel,_super);function MeetingGamePanel(){return _super!==null&&_super.apply(this,arguments)||this}MeetingGamePanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_minelist.setVirtualAndLoop();this.m_stopBtn.text=Games.TEXT.MeetingGameStop;this.m_stopBtn.onClick(this,this.onClickStopBtn);this.m_title.text=TEXT.MeetingInMeeting;this.m_minelist.itemRenderer=Handler.create(this,this.updateItemRender,null,false)};MeetingGamePanel.prototype.updateItemRender=function(index,item){var item1=item;item1.m_dice.selectedIndex=this.random[index]};MeetingGamePanel.prototype.onClickStopBtn=function(){var _this=this;if(this.isResult==false){this.isResult=true;this.clearScroll();var preIndex=this.mineResult-1;var lastIndex=this.mineResult+1;if(preIndex<0){preIndex=preIndex+6}if(lastIndex>5){lastIndex=0}this.random=[preIndex,this.mineResult,lastIndex];this.m_minelist.scrollPane.setPosY(20);this.m_minelist.numItems=this.random.length;setTimeout(function(){_this.moduleView.m_c_result_effect.selectedIndex=1;_this.moduleView.m_resultEffectPanel.m_c_result.selectedIndex=_this.resultIndex;if(_this.effect){Game.sound.playSound(SoundKey.MM09_GoldReward);_this.effect.play(Handler.create(null,function(){_this.moduleView.m_c_result_effect.selectedIndex=0;_this.moduleView.showResultPanel()}),1)}},1500)}};MeetingGamePanel.prototype.updateView=function(){var avatarConfig=Game.config.avatar.getConfig(Game.moduleModel.meeting.companyDelegateAvatarId);if(avatarConfig){this.m_head.m_icon.icon=avatarConfig.iconUrl}this.isResult=false;this.m_target.visible=false};MeetingGamePanel.prototype.startRandom=function(){this.m_minelist.scrollPane.scrollTop();this.random=[0,1,2,3,4,5];this.speed=8;if(Game.moduleModel.meeting.isDouble){this.speed=10}this.m_minelist.numItems=this.random.length;Laya.timer.loop(1,this,this.updateScroll)};MeetingGamePanel.prototype.updateScroll=function(){this.m_minelist.scrollPane.setPosY(this.m_minelist.scrollPane.posY+this.speed)};MeetingGamePanel.prototype.updateResult=function(result){this.moduleView.m_c_result_effect.selectedIndex=0;this.m_target.visible=true;var gameConfig=Game.config.meetingGame.getConfig(result);if(gameConfig){switch(gameConfig.result){case MeetingResultType.Win:this.otherResult=Random.rangeBoth(0,4);this.mineResult=this.otherResult+1;this.resultIndex=0;this.effect=this.moduleView.m_resultEffectPanel.m_winEffect.m_t2;break;case MeetingResultType.Draw:this.otherResult=Random.rangeBoth(0,5);this.mineResult=this.otherResult;this.resultIndex=2;this.effect=this.moduleView.m_resultEffectPanel.m_deuceEffect.m_t0;break;case MeetingResultType.FailHalf:this.otherResult=Random.rangeBoth(1,5);this.mineResult=this.otherResult-1;this.resultIndex=3;this.effect=this.moduleView.m_resultEffectPanel.m_loseEffect.m_t222;break;case MeetingResultType.FailAll:this.otherResult=Random.rangeBoth(1,5);this.mineResult=this.otherResult-1;this.resultIndex=1;this.effect=this.moduleView.m_resultEffectPanel.m_loseEffect.m_t222;break;default:break}this.rollTimes=0;Laya.timer.loop(50,this,this.updataOtherRoll)}this.startRandom()};MeetingGamePanel.prototype.updataOtherRoll=function(){if(this.rollTimes>5){Laya.timer.clear(this,this.updataOtherRoll);this.m_target.m_dice.selectedIndex=this.otherResult}else{this.rollTimes++;this.m_target.m_dice.selectedIndex=Random.rangeBoth(0,5)}};MeetingGamePanel.prototype.onRandom=function(){};MeetingGamePanel.prototype.clearScroll=function(){Laya.timer.clear(this,this.updateScroll)};return MeetingGamePanel}(Manage.MeetingGamePanelStruct));Manage.MeetingGamePanel=MeetingGamePanel})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingResultDialogPanelStruct=(function(_super){__extends(MeetingResultDialogPanelStruct,_super);function MeetingResultDialogPanelStruct(){return _super.call(this)||this}MeetingResultDialogPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","MeetingResultDialogPanel"))};MeetingResultDialogPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_talkBg=(this.getChild("talkBg"));this.m_title=(this.getChild("title"))};MeetingResultDialogPanelStruct.URL="ui://y3jchkngw1sr2m";MeetingResultDialogPanelStruct.DependPackages=["Manage","Common"];return MeetingResultDialogPanelStruct}(fairygui.GLabel));Manage.MeetingResultDialogPanelStruct=MeetingResultDialogPanelStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingResultDialogPanel=(function(_super){__extends(MeetingResultDialogPanel,_super);function MeetingResultDialogPanel(){return _super!==null&&_super.apply(this,arguments)||this}return MeetingResultDialogPanel}(Manage.MeetingResultDialogPanelStruct));Manage.MeetingResultDialogPanel=MeetingResultDialogPanel})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingResultEffectStruct=(function(_super){__extends(MeetingResultEffectStruct,_super);function MeetingResultEffectStruct(){return _super.call(this)||this}MeetingResultEffectStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","MeetingResultEffect"))};MeetingResultEffectStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_result=this.getController("c_result");this.m_loseEffect=(this.getChild("loseEffect"));this.m_winEffect=(this.getChild("winEffect"));this.m_deuceEffect=(this.getChild("deuceEffect"))};MeetingResultEffectStruct.URL="ui://y3jchkngw1sr2n";MeetingResultEffectStruct.DependPackages=["Manage","Fx"];return MeetingResultEffectStruct}(fairygui.GComponent));Manage.MeetingResultEffectStruct=MeetingResultEffectStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingResultEffect=(function(_super){__extends(MeetingResultEffect,_super);function MeetingResultEffect(){return _super!==null&&_super.apply(this,arguments)||this}return MeetingResultEffect}(Manage.MeetingResultEffectStruct));Manage.MeetingResultEffect=MeetingResultEffect})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingResultPanelStruct=(function(_super){__extends(MeetingResultPanelStruct,_super);function MeetingResultPanelStruct(){return _super.call(this)||this}MeetingResultPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","MeetingResultPanel"))};MeetingResultPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_result=this.getController("c_result");this.m_title=(this.getChild("title"));this.m_paylist=(this.getChild("paylist"));this.m_paytitle=(this.getChild("paytitle"));this.m_dialog=(this.getChild("dialog"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_head=(this.getChild("head"));this.m_okBtn=(this.getChild("okBtn"));this.m_refuse=(this.getChild("refuse"))};MeetingResultPanelStruct.URL="ui://y3jchkngtpm823";MeetingResultPanelStruct.DependPackages=["Manage","Common"];return MeetingResultPanelStruct}(fairygui.GComponent));Manage.MeetingResultPanelStruct=MeetingResultPanelStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingResultPanel=(function(_super){__extends(MeetingResultPanel,_super);function MeetingResultPanel(){return _super!==null&&_super.apply(this,arguments)||this}MeetingResultPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_refuse.onClick(this,this.onClickRefuseBtn);this.m_closeBtn.onClick(this,this.onClickCloseBtn);this.m_closeBtn.text=TEXT.ButtonOk;this.m_refuse.text=Games.TEXT.MeetingHuijue;this.m_title.text=TEXT.MeetingInMeeting;this.m_paylist.itemRenderer=Handler.create(this,this.updateItemRender,null,false)};MeetingResultPanel.prototype.onClickCloseBtn=function(){this.onClickRefuseBtn()};MeetingResultPanel.prototype.updateItemRender=function(index,item){var item1=item;item1.updateViewByDTNum(this.meetingData.resultRewards[index])};MeetingResultPanel.prototype.onClickOkBtn=function(){var _this=this;Game.system.openAwardsAlert([this.meetingData.costMoney],Games.TEXT.MeetingChengjiaoSure,function(){var enough=ItemHelper.checkItemEnough(_this.meetingData.costMoney);if(enough){Game.moduleModel.meeting.rewardItems=Game.moduleModel.meeting.getMeetingData().resultRewards;var data=Game.moduleModel.meeting.getMeetingData();if(data){Games.Static.Instance.onUserorbit("meeting",data.pireceIntoDaDianForMaidian(1),"end")}Game.protosender.manageMeeting.GetReward(MeetingRewardType.Receive)}else{Game.system.openItemWay(_this.meetingData.costMoney.itemId,_this.meetingData.costMoney.itemNum)}})};MeetingResultPanel.prototype.onClickRefuseBtn=function(){var data=Game.moduleModel.meeting.getMeetingData();if(data){Games.Static.Instance.onUserorbit("meeting",data.pireceIntoDaDianForMaidian(0),"end")}Game.protosender.manageMeeting.GetReward(MeetingRewardType.Refuse)};MeetingResultPanel.prototype.updateView=function(){var avatarConfig=Game.config.avatar.getConfig(Game.moduleModel.meeting.companyDelegateAvatarId);if(avatarConfig){this.m_head.m_icon.icon=avatarConfig.iconUrl}var meetingData=Game.moduleModel.meeting.getMeetingData();this.m_okBtn.text=Games.TEXT.MeetingChengjiao;this.m_okBtn.m_number.visible=true;this.m_okBtn.m_icon.visible=true;this.meetingData=meetingData;if(meetingData){var cost=meetingData.costMoney;this.m_okBtn.m_number.text=formatNumberUnit(cost.itemNum);this.m_okBtn.m_icon.icon=Game.config.item.getConfig(cost.itemId).iconUrl;var config=Game.config.meetingGame.getConfig(meetingData.randResult);this.result=config.result;switch(this.result){case MeetingResultType.Win:this.m_c_result.selectedIndex=1;this.m_dialog.m_title.text=Game.config.msg.getTxt(MsgKey.meeting_win);break;case MeetingResultType.Draw:this.m_c_result.selectedIndex=1;this.m_dialog.m_title.text=Game.config.msg.getTxt(MsgKey.meeting_fair);break;case MeetingResultType.FailAll:this.m_c_result.selectedIndex=0;this.m_dialog.m_title.text=Game.config.msg.getTxt(MsgKey.meeting_lose1);break;case MeetingResultType.FailHalf:this.m_c_result.selectedIndex=1;this.m_dialog.m_title.text=Game.config.msg.getTxt(MsgKey.meeting_lose2);break;default:break}var step=this.result==MeetingResultType.FailAll?4:3;Game.event.dispatch(GameEventKey.GameEventKey_MeetingStep,step);this.m_title.text=config.name;this.m_paylist.numItems=meetingData.resultRewards.length}};return MeetingResultPanel}(Manage.MeetingResultPanelStruct));Manage.MeetingResultPanel=MeetingResultPanel})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingUIStruct=(function(_super){__extends(MeetingUIStruct,_super);function MeetingUIStruct(){return _super.call(this)||this}MeetingUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","MeetingUI"))};MeetingUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_c_result_effect=this.getController("c_result_effect");this.m_roomContainer=(this.getChild("roomContainer"));this.m_commonTitle=(this.getChild("commonTitle"));this.m_startMeeting=(this.getChild("startMeeting"));this.m_askPrice=(this.getChild("askPrice"));this.m_gamePanel=(this.getChild("gamePanel"));this.m_resultPanel=(this.getChild("resultPanel"));this.m_resultEffectPanel=(this.getChild("resultEffectPanel"))};MeetingUIStruct.URL="ui://y3jchkngtpm824";MeetingUIStruct.DependPackages=["Manage","PfSkin","Common","Fx","Building"];return MeetingUIStruct}(fairygui.GComponent));Manage.MeetingUIStruct=MeetingUIStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MeetingUI=(function(_super){__extends(MeetingUI,_super);function MeetingUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.buildIndex=-1;return _this}MeetingUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_startMeeting.moduleView=this;this.m_gamePanel.moduleView=this;this.m_resultPanel.moduleView=this;this.m_askPrice.moduleView=this};MeetingUI.prototype.onWindowHide=function(){this.m_c1.selectedIndex=MeetingPanelType.None;Game.event.dispatch(GameEventKey.GameEventKey_EnabledScrollMain,true,Games.RoomType.Meeting);Game.protoOkEvent.remove(ProtoEventKey.manageMeeting_Markup,this.onMarkUpHandler,this);this.hideBuildRoom()};MeetingUI.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.manageMeeting_Markup,this.onMarkUpHandler,this);Game.event.dispatch(GameEventKey.GameEventKey_ScrollMainRoom,[Games.RoomType.Meeting]);Game.event.dispatch(GameEventKey.GameEventKey_EnabledScrollMain,false,Games.RoomType.Meeting);this.m_c_result_effect.selectedIndex=0;this.updateView();this.m_commonTitle.m_btn_close.visible=false;this.m_commonTitle.m_title.text=TEXT.MettingTitle;this.showBuildRoom()};MeetingUI.prototype.showBuildRoom=function(){this.buildRoom=Games.AvatarManager.context.getRoomByType(Games.RoomType.Meeting);if(this.buildRoom!=null){this.buildRoom.onRoomInScreen();this.buildRoom.setRoomFrameVisible(false);this.buildIndex=Games.AvatarManager.context.getRoomIndexByType(Games.RoomType.Meeting);this.buildRoom.setXY(0,20);this.buildRoom.setScale(1.1,1.1);this.m_roomContainer.addChild(this.buildRoom.mainView);var scale=ScreenSetting.screenWidth/this.buildRoom.mainView.sourceWidth;this.buildRoom.setScale(scale,1.1)}};MeetingUI.prototype.hideBuildRoom=function(){if(this.buildRoom){this.buildRoom.setXY(0,0);this.buildRoom.setScale(1,1);this.buildRoom.setRoomFrameVisible(true);Games.AvatarManager.context.addRoomAt(this.buildRoom,this.buildIndex)}};MeetingUI.prototype.onMarkUpHandler=function(msg){this.updateResult(this.meetingData.randResult)};MeetingUI.prototype.updateResult=function(result){this.m_gamePanel.updateResult(result)};MeetingUI.prototype.showTargetUI=function(type){if(type===void 0){type=MeetingPanelType.None}this.m_c1.selectedIndex=type;switch(type){case MeetingPanelType.Start:this.m_startMeeting.updateView();break;case MeetingPanelType.Result:this.m_resultPanel.updateView();break;case MeetingPanelType.Game:this.m_gamePanel.updateView();break;case MeetingPanelType.AskPirce:this.m_askPrice.updateView();Game.event.dispatch(GameEventKey.GameEventKey_MeetingStep,0);break;default:break}};MeetingUI.prototype.showResultPanel=function(){this.showTargetUI(MeetingPanelType.Result)};MeetingUI.prototype.showAskPricePanel=function(){this.showTargetUI(MeetingPanelType.AskPirce)};MeetingUI.prototype.showGamePanel=function(){this.showTargetUI(MeetingPanelType.Game)};MeetingUI.prototype.updateView=function(){var meetingData=Game.moduleModel.meeting.getMeetingData();if(meetingData){if(this.moduleWindow.menuParameter.args.length>0){this.showTargetUI(this.moduleWindow.menuParameter.args[0])}else{this.showTargetUI(MeetingPanelType.Start)}}this.meetingData=meetingData};return MeetingUI}(Manage.MeetingUIStruct));Manage.MeetingUI=MeetingUI})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MettingStartPanelStruct=(function(_super){__extends(MettingStartPanelStruct,_super);function MettingStartPanelStruct(){return _super.call(this)||this}MettingStartPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","MettingStartPanel"))};MettingStartPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_next=(this.getChild("next"));this.m_okBtn=(this.getChild("okBtn"));this.m_cancleBtn=(this.getChild("cancleBtn"));this.m_dialog=(this.getChild("dialog"))};MettingStartPanelStruct.URL="ui://y3jchkngtpm826";MettingStartPanelStruct.DependPackages=["Manage","Common"];return MettingStartPanelStruct}(fairygui.GComponent));Manage.MettingStartPanelStruct=MettingStartPanelStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var MettingStartPanel=(function(_super){__extends(MettingStartPanel,_super);function MettingStartPanel(){return _super!==null&&_super.apply(this,arguments)||this}MettingStartPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_okBtn.text=Games.TEXT.MeetingStartOkBtnText;this.m_cancleBtn.text=Games.TEXT.MeetingStartCancelBtnText;this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_cancleBtn.onClick(this,this.onClickCancleBtn);this.m_icon.icon=Game.config.avatar.getConfig(9991).bodyIconUrl};MettingStartPanel.prototype.updateView=function(){this.meetingData=Game.moduleModel.meeting.getMeetingData();if(this.meetingData){var nextNum=this.meetingData.nextMeetingNum;this.m_next.text=format(Games.TEXT.MeetingNextNum,nextNum,this.meetingData.lineLimit);if(this.meetingData.randResult>0){this.m_dialog.m_title.text=Game.config.msg.getTxtFormat(MsgKey.meeting_midtime,Game.moduleModel.meeting.meetingCompanyName);this.m_cancleBtn.visible=false}else{this.m_dialog.m_title.text=Game.config.msg.getTxtFormat(MsgKey.meeting_wait,Game.moduleModel.meeting.meetingCompanyName);this.m_cancleBtn.visible=true}}};MettingStartPanel.prototype.onClickOkBtn=function(){if(this.meetingData.randResult>0){this.moduleView.showResultPanel()}else{this.moduleView.showAskPricePanel()}};MettingStartPanel.prototype.onClickCancleBtn=function(){this.moduleView.moduleWindow.menuClose()};return MettingStartPanel}(Manage.MettingStartPanelStruct));Manage.MettingStartPanel=MettingStartPanel})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var OrderBoxStruct=(function(_super){__extends(OrderBoxStruct,_super);function OrderBoxStruct(){return _super.call(this)||this}OrderBoxStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","OrderBox"))};OrderBoxStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_title=(this.getChild("title"));this.m_t1=this.getTransition("t1")};OrderBoxStruct.URL="ui://y3jchkngtpm815";OrderBoxStruct.DependPackages=["Manage","Common"];return OrderBoxStruct}(fairygui.GButton));Manage.OrderBoxStruct=OrderBoxStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var OrderBox=(function(_super){__extends(OrderBox,_super);function OrderBox(){return _super!==null&&_super.apply(this,arguments)||this}return OrderBox}(Manage.OrderBoxStruct));Manage.OrderBox=OrderBox})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var OrderHeadItemStruct=(function(_super){__extends(OrderHeadItemStruct,_super);function OrderHeadItemStruct(){return _super.call(this)||this}OrderHeadItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","OrderHeadItem"))};OrderHeadItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};OrderHeadItemStruct.URL="ui://y3jchkngtpm818";OrderHeadItemStruct.DependPackages=["Manage","Common"];return OrderHeadItemStruct}(fairygui.GComponent));Manage.OrderHeadItemStruct=OrderHeadItemStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var OrderHeadItem=(function(_super){__extends(OrderHeadItem,_super);function OrderHeadItem(){return _super!==null&&_super.apply(this,arguments)||this}return OrderHeadItem}(Manage.OrderHeadItemStruct));Manage.OrderHeadItem=OrderHeadItem})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var OrderTargetItemStruct=(function(_super){__extends(OrderTargetItemStruct,_super);function OrderTargetItemStruct(){return _super.call(this)||this}OrderTargetItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","OrderTargetItem"))};OrderTargetItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_c2=this.getController("c2");this.m_c3=this.getController("c3");this.m_c4=this.getController("c4");this.m_time=(this.getChild("time"));this.m_gou=(this.getChild("gou"));this.m_headIcon=(this.getChild("headIcon"))};OrderTargetItemStruct.URL="ui://y3jchkngtpm811";OrderTargetItemStruct.DependPackages=["Manage","Common"];return OrderTargetItemStruct}(fairygui.GButton));Manage.OrderTargetItemStruct=OrderTargetItemStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var OrderTargetItem=(function(_super){__extends(OrderTargetItem,_super);function OrderTargetItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.preOrderUUid="";_this.preOrderUserId=0;_this.duration=0;return _this}OrderTargetItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};OrderTargetItem.prototype.updateView=function(data){this.orderData=data;this.clearTime();this.isRemove=false;if(this.orderData){this.m_c2.selectedIndex=1;if(this.preOrderUserId!=this.orderData.entityId){this.preOrderUUid=""}if(this.orderData.deleteFlag){this.m_c1.selectedIndex=1;this.m_c2.selectedIndex=0;this.m_c4.selectedIndex=0;this.duration=Game.time.getSubSecondsAfter(this.orderData.delTime)}else{this.m_headIcon.m_icon.icon=Game.config.avatar.getConfig(this.orderData.config.icon).iconUrl;var isFirst=isNullOrEmpty(this.preOrderUUid);if(this.preOrderUUid!=this.orderData.uuid&&isFirst==false){this.m_c1.selectedIndex=1;this.m_c2.selectedIndex=0;this.m_c4.selectedIndex=0;this.duration=2;this.isRemove=true}else{if(this.orderData.isCooperation){if(this.orderData.isCooperationOrder){this.m_c2.selectedIndex=1}else{this.m_c2.selectedIndex=0}}else{if(this.orderData.isAllComplete){this.m_c2.selectedIndex=1}else{if(this.orderData.isCanPut){this.m_c2.selectedIndex=1}else{this.m_c2.selectedIndex=0}}}this.m_c1.selectedIndex=this.orderData.config.quality;this.m_c4.selectedIndex=1;this.duration=Game.time.getSubSecondsAfter(this.orderData.expiredTime)}}if(this.duration>0){Laya.timer.loop(1000,this,this.updateTime,null,false);this.visible=true;this.preOrderUUid=this.orderData.uuid;this.preOrderUserId=this.orderData.entityId}else{this.preOrderUUid="";this.visible=false;this.duration=0}this.updateTimeView(this.duration)}else{this.preOrderUUid="";this.visible=false}};OrderTargetItem.prototype.updateTime=function(){if(this.duration>0){this.duration--;this.updateTimeView(this.duration)}else{if(this.orderData.deleteFlag){this.preOrderUUid="";this.visible=false;this.clearTime()}else{this.updateView(this.orderData)}}};OrderTargetItem.prototype.updateTimeView=function(duration){this.m_time.text=Games.TimeHelper.TimeFormat3(duration)};OrderTargetItem.prototype.clearTime=function(){Laya.timer.clear(this,this.updateTime)};OrderTargetItem.prototype.clearFlag=function(){this.preOrderUUid="";this.clearTime()};return OrderTargetItem}(Manage.OrderTargetItemStruct));Manage.OrderTargetItem=OrderTargetItem})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var VisitDialogPanelStruct=(function(_super){__extends(VisitDialogPanelStruct,_super);function VisitDialogPanelStruct(){return _super.call(this)||this}VisitDialogPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","VisitDialogPanel"))};VisitDialogPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_talkBg=(this.getChild("talkBg"));this.m_title=(this.getChild("title"));this.m_name=(this.getChild("name"))};VisitDialogPanelStruct.URL="ui://y3jchkngtpm8d";VisitDialogPanelStruct.DependPackages=["Manage","Common"];return VisitDialogPanelStruct}(fairygui.GLabel));Manage.VisitDialogPanelStruct=VisitDialogPanelStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var VisitDialogPanel=(function(_super){__extends(VisitDialogPanel,_super);function VisitDialogPanel(){return _super!==null&&_super.apply(this,arguments)||this}return VisitDialogPanel}(Manage.VisitDialogPanelStruct));Manage.VisitDialogPanel=VisitDialogPanel})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var VisitUIStruct=(function(_super){__extends(VisitUIStruct,_super);function VisitUIStruct(){return _super.call(this)||this}VisitUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Manage","VisitUI"))};VisitUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_nextFans=(this.getChild("nextFans"));this.m_icon=(this.getChild("icon"));this.m_okBtn=(this.getChild("okBtn"));this.m_dialog=(this.getChild("dialog"))};VisitUIStruct.URL="ui://y3jchkngtpm83";VisitUIStruct.DependPackages=["Manage","Common"];return VisitUIStruct}(fairygui.GComponent));Manage.VisitUIStruct=VisitUIStruct})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Manage;(function(Manage){var VisitUI=(function(_super){__extends(VisitUI,_super);function VisitUI(){return _super!==null&&_super.apply(this,arguments)||this}VisitUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_okBtn.text=Games.TEXT.VisitStartBtnOk};VisitUI.prototype.onWindowHide=function(){this.m_okBtn.offClick(this,this.onClickOkBtn);Game.protoOkEvent.remove(ProtoEventKey.ManageVisitData,this.updateView,this);Game.protoOkEvent.remove(ProtoEventKey.manageVisit_GetReward,this.closeMenuWindow,this);Game.event.remove(GameEventKey.GameEventKey_UpdateVisitActor,this.updateVisitView,this);Game.event.dispatch(GameEventKey.GameEventKey_EnabledScrollMain,true);this.m_dialog.visible=false};VisitUI.prototype.onWindowShow=function(){this.m_okBtn.onClick(this,this.onClickOkBtn);Game.protoOkEvent.add(ProtoEventKey.ManageVisitData,this.updateView,this);Game.protoOkEvent.add(ProtoEventKey.manageVisit_GetReward,this.closeMenuWindow,this);Game.event.add(GameEventKey.GameEventKey_UpdateVisitActor,this.updateVisitView,this);Game.event.dispatch(GameEventKey.GameEventKey_ScrollMainRoom,[Games.RoomType.Reception]);Game.event.dispatch(GameEventKey.GameEventKey_EnabledScrollMain,false);this.updateView()};VisitUI.prototype.closeMenuWindow=function(){this.onClickOkBtn()};VisitUI.prototype.updateView=function(){var visitData=Game.moduleModel.visit.getVisitData();if(visitData){var nextFans=visitData.nextFansNum;this.m_nextFans.text=format(Games.TEXT.VisitNextFansNum,nextFans,visitData.lineLimit);if(visitData.actorId>0&&visitData.isWaiting){this.m_dialog.visible=true;this.m_dialog.m_title.text=Games.TEXT.VisitFansTomeetActor;var actorData=Game.moduleModel.actor.getActor(visitData.actorId);if(actorData){this.m_dialog.m_name.text=actorData.name}}else{this.m_dialog.visible=false}this.m_icon.icon=Game.config.avatar.getConfig(Game.moduleModel.secretary.secretaryAvatarId).bodyIconUrl}};VisitUI.prototype.updateVisitView=function(){this.onClickOkBtn()};VisitUI.prototype.onClickOkBtn=function(){this.moduleWindow.menuClose()};return VisitUI}(Manage.VisitUIStruct));Manage.VisitUI=VisitUI})(Manage=fgui.Manage||(fgui.Manage={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var ActorPropertStruct=(function(_super){__extends(ActorPropertStruct,_super);function ActorPropertStruct(){return _super.call(this)||this}ActorPropertStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","ActorPropert"))};ActorPropertStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_hasIcon=this.getController("hasIcon");this.m_color=this.getController("color");this.m_value=(this.getChild("value"));this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"))};ActorPropertStruct.URL="ui://p7g5z54adm31dv";ActorPropertStruct.DependPackages=["Market","Common"];return ActorPropertStruct}(fairygui.GLabel));Market.ActorPropertStruct=ActorPropertStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var ActorPropert=(function(_super){__extends(ActorPropert,_super);function ActorPropert(){return _super!==null&&_super.apply(this,arguments)||this}return ActorPropert}(Market.ActorPropertStruct));Market.ActorPropert=ActorPropert})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnAddActerStruct=(function(_super){__extends(BtnAddActerStruct,_super);function BtnAddActerStruct(){return _super.call(this)||this}BtnAddActerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","BtnAddActer"))};BtnAddActerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_state=this.getController("state");this.m_icon=(this.getChild("icon"))};BtnAddActerStruct.URL="ui://p7g5z54adm31bh";BtnAddActerStruct.DependPackages=["Market","Common"];return BtnAddActerStruct}(fairygui.GButton));Market.BtnAddActerStruct=BtnAddActerStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnAddActer=(function(_super){__extends(BtnAddActer,_super);function BtnAddActer(){return _super!==null&&_super.apply(this,arguments)||this}return BtnAddActer}(Market.BtnAddActerStruct));Market.BtnAddActer=BtnAddActer})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnAddActer_BlueStruct=(function(_super){__extends(BtnAddActer_BlueStruct,_super);function BtnAddActer_BlueStruct(){return _super.call(this)||this}BtnAddActer_BlueStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","BtnAddActer_Blue"))};BtnAddActer_BlueStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_state=this.getController("state");this.m_icon=(this.getChild("icon"))};BtnAddActer_BlueStruct.URL="ui://p7g5z54adm31az";BtnAddActer_BlueStruct.DependPackages=["Market","Common"];return BtnAddActer_BlueStruct}(fairygui.GButton));Market.BtnAddActer_BlueStruct=BtnAddActer_BlueStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnAddActer_Blue=(function(_super){__extends(BtnAddActer_Blue,_super);function BtnAddActer_Blue(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(BtnAddActer_Blue.prototype,"State",{set:function(value){this.m_state.setSelectedIndex(value)},enumerable:true,configurable:true});Object.defineProperty(BtnAddActer_Blue.prototype,"Icon",{set:function(url){this.m_icon.m_icon.url=url},enumerable:true,configurable:true});return BtnAddActer_Blue}(Market.BtnAddActer_BlueStruct));Market.BtnAddActer_Blue=BtnAddActer_Blue})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnCityStruct=(function(_super){__extends(BtnCityStruct,_super);function BtnCityStruct(){return _super.call(this)||this}BtnCityStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","BtnCity"))};BtnCityStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=this.getController("state");this.m_isHome=this.getController("isHome");this.m_button=this.getController("button");this.m_title=(this.getChild("title"));this.m_num=(this.getChild("num"));this.m_red=(this.getChild("red"))};BtnCityStruct.URL="ui://p7g5z54adm31f1";BtnCityStruct.DependPackages=["Market","MainUI","WarMovie","Common"];return BtnCityStruct}(fairygui.GButton));Market.BtnCityStruct=BtnCityStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnCity=(function(_super){__extends(BtnCity,_super);function BtnCity(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(BtnCity.prototype,"Red",{set:function(isShow){this.m_red.visible=isShow;this.m_red.m_num.text=""},enumerable:true,configurable:true});return BtnCity}(Market.BtnCityStruct));Market.BtnCity=BtnCity})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnCityPointStruct=(function(_super){__extends(BtnCityPointStruct,_super);function BtnCityPointStruct(){return _super.call(this)||this}BtnCityPointStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","BtnCityPoint"))};BtnCityPointStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=this.getController("state");this.m_title=(this.getChild("title"));this.m_progress=(this.getChild("progress"));this.m_btn=(this.getChild("btn"));this.m_tranOccupy=this.getTransition("tranOccupy")};BtnCityPointStruct.URL="ui://p7g5z54adm31b7";BtnCityPointStruct.DependPackages=["Market","Common"];return BtnCityPointStruct}(fairygui.GLabel));Market.BtnCityPointStruct=BtnCityPointStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnCityPoint=(function(_super){__extends(BtnCityPoint,_super);function BtnCityPoint(){return _super!==null&&_super.apply(this,arguments)||this}return BtnCityPoint}(Market.BtnCityPointStruct));Market.BtnCityPoint=BtnCityPoint})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnLeftStruct=(function(_super){__extends(BtnLeftStruct,_super);function BtnLeftStruct(){return _super.call(this)||this}BtnLeftStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","btnLeft"))};BtnLeftStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};BtnLeftStruct.URL="ui://p7g5z54acp1cfm";BtnLeftStruct.DependPackages=["Market"];return BtnLeftStruct}(fairygui.GButton));Market.BtnLeftStruct=BtnLeftStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnLeft=(function(_super){__extends(BtnLeft,_super);function BtnLeft(){return _super!==null&&_super.apply(this,arguments)||this}return BtnLeft}(Market.BtnLeftStruct));Market.BtnLeft=BtnLeft})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnRightStruct=(function(_super){__extends(BtnRightStruct,_super);function BtnRightStruct(){return _super.call(this)||this}BtnRightStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","btnRight"))};BtnRightStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};BtnRightStruct.URL="ui://p7g5z54acp1cfl";BtnRightStruct.DependPackages=["Market"];return BtnRightStruct}(fairygui.GButton));Market.BtnRightStruct=BtnRightStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnRight=(function(_super){__extends(BtnRight,_super);function BtnRight(){return _super!==null&&_super.apply(this,arguments)||this}return BtnRight}(Market.BtnRightStruct));Market.BtnRight=BtnRight})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnRoadShowStruct=(function(_super){__extends(BtnRoadShowStruct,_super);function BtnRoadShowStruct(){return _super.call(this)||this}BtnRoadShowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","btnRoadShow"))};BtnRoadShowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=this.getController("state");this.m_labCost=(this.getChild("labCost"));this.m_t0=this.getTransition("t0")};BtnRoadShowStruct.URL="ui://p7g5z54adm319x";BtnRoadShowStruct.DependPackages=["Market","Common"];return BtnRoadShowStruct}(fairygui.GButton));Market.BtnRoadShowStruct=BtnRoadShowStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var BtnRoadShow=(function(_super){__extends(BtnRoadShow,_super);function BtnRoadShow(){return _super!==null&&_super.apply(this,arguments)||this}return BtnRoadShow}(Market.BtnRoadShowStruct));Market.BtnRoadShow=BtnRoadShow})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var ButtonPublicityCostStruct=(function(_super){__extends(ButtonPublicityCostStruct,_super);function ButtonPublicityCostStruct(){return _super.call(this)||this}ButtonPublicityCostStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","ButtonPublicityCost"))};ButtonPublicityCostStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"));this.m_cost=(this.getChild("cost"));this.m_assetLoader=(this.getChild("assetLoader"));this.m_t0=this.getTransition("t0")};ButtonPublicityCostStruct.URL="ui://p7g5z54ahjkwfp";ButtonPublicityCostStruct.DependPackages=["Market","Common"];return ButtonPublicityCostStruct}(fairygui.GButton));Market.ButtonPublicityCostStruct=ButtonPublicityCostStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var ButtonPublicityCost=(function(_super){__extends(ButtonPublicityCost,_super);function ButtonPublicityCost(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonPublicityCost}(Market.ButtonPublicityCostStruct));Market.ButtonPublicityCost=ButtonPublicityCost})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var CountryItemStruct=(function(_super){__extends(CountryItemStruct,_super);function CountryItemStruct(){return _super.call(this)||this}CountryItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","CountryItem"))};CountryItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_isHome=this.getController("isHome");this.m_imgHome=(this.getChild("imgHome"));this.m_txtName=(this.getChild("txtName"));this.m_txtProgress=(this.getChild("txtProgress"));this.m_imgCountryIcon=(this.getChild("imgCountryIcon"))};CountryItemStruct.URL="ui://p7g5z54adm31fc";CountryItemStruct.DependPackages=["Market","WarMovie","Common"];return CountryItemStruct}(fairygui.GButton));Market.CountryItemStruct=CountryItemStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var CountryItem=(function(_super){__extends(CountryItem,_super);function CountryItem(){return _super!==null&&_super.apply(this,arguments)||this}return CountryItem}(Market.CountryItemStruct));Market.CountryItem=CountryItem})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketCityInfoPanelStruct=(function(_super){__extends(MarketCityInfoPanelStruct,_super);function MarketCityInfoPanelStruct(){return _super.call(this)||this}MarketCityInfoPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","MarketCityInfoPanel"))};MarketCityInfoPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_isHome=this.getController("isHome");this.m_cityName=(this.getChild("cityName"));this.m_listAssetSpeed=(this.getChild("listAssetSpeed"));this.m_listActor=(this.getChild("listActor"));this.m_listReward=(this.getChild("listReward"));this.m_listAsset=(this.getChild("listAsset"));this.m_tweenIcon=(this.getChild("tweenIcon"));this.m_marquee=(this.getChild("marquee"));this.m_btnGet=(this.getChild("btnGet"));this.m_red=(this.getChild("red"));this.m_trAddAsset=this.getTransition("trAddAsset")};MarketCityInfoPanelStruct.URL="ui://p7g5z54adm319m";MarketCityInfoPanelStruct.DependPackages=["Market","Fx","Common","MainUI"];return MarketCityInfoPanelStruct}(fairygui.GComponent));Market.MarketCityInfoPanelStruct=MarketCityInfoPanelStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketCityInfoPanel=(function(_super){__extends(MarketCityInfoPanel,_super);function MarketCityInfoPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.NAME_ITEMDISPATCH="DispatchItem";return _this}MarketCityInfoPanel.prototype.onWindowInited=function(){this.m_btnGet.onClick(this,this.OnBtnGetclick);this.tick=Game.tick.AddTick(5,-1,Handler.create(this,this.UpdateAddAsset,null,false),null);this.InitDispatch();this.InitAssetSpeed();this.InitAssets();this.InitRewards()};MarketCityInfoPanel.prototype.onWindowDestory=function(){Game.tick.ClearTick(this.tick);this.m_btnGet.onClick(null,null)};MarketCityInfoPanel.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.city_GetReward,this.OnGetRewardResponse,this);Game.protoOkEvent.add(ProtoEventKey.city_SetAmbassador,this.OnsSetAmbassador,this)};MarketCityInfoPanel.prototype.onWindowHide=function(){this.m_marquee.Hide();this.HideHome();Game.protoOkEvent.remove(ProtoEventKey.city_GetReward,this.OnGetRewardResponse,this);Game.protoOkEvent.remove(ProtoEventKey.city_SetAmbassador,this.OnsSetAmbassador,this)};MarketCityInfoPanel.prototype.Open=function(cityId){var _this=this;this.cityId=cityId;this.UpdateView();setTimeout(function(){_this.m_marquee.AddNewContent()},3000)};MarketCityInfoPanel.prototype.UpdateView=function(){this.cityData=Game.moduleModel.market.GetCity(this.cityId);this.m_isHome.setSelectedIndex(this.cityData.isHome?1:0);this.dispatchList=this.cityData.isHome?Game.moduleModel.market.GetAmbassador():null;this.m_listActor.numItems=5;this.cityRewardList=Game.moduleModel.market.GetCityReward(this.cityData.id);this.m_listReward.numItems=this.cityRewardList.length;this.m_cityName.text=this.cityData.num+"."+this.cityData.name;this.m_isHome.setSelectedIndex(this.cityData.isHome?1:0);if(this.cityData.isHome){this.m_listAssetSpeed.numItems=2;this.m_listAsset.numItems=2;this.SetRed(Game.moduleModel.market.RedNum);this.m_btnGet.enabled=Game.time.getSubSecondsPre(Game.moduleModel.market.Info.lastDropTimestamp)>=1;var msg=Games.TEXT.MarketMaxAsset.format(Game.moduleModel.market.GoldLimitTime.toFixed(1));this.ShowHome();this.m_marquee.UpdateView([msg,msg],20)}else{this.m_listAssetSpeed.numItems=0;this.m_listAsset.numItems=0;this.SetRed(false);this.HideHome();this.m_btnGet.enabled=false}};MarketCityInfoPanel.prototype.SetRed=function(isShow){this.m_red.visible=isShow;this.m_red.m_num.text=""};MarketCityInfoPanel.prototype.UpdateAddAsset=function(){if(this.cityData&&this.cityData.isHome){this.m_btnGet.enabled=Game.time.getSubSecondsPre(Game.moduleModel.market.Info.lastDropTimestamp)>=1;if(Game.moduleModel.market.GetCurGold()+Game.moduleModel.market.GetCityGoldSpeed()*5>=Game.moduleModel.market.GoldLimit){this.UpdateAsset();return}this.AddAssetAnim()}};MarketCityInfoPanel.prototype.AddAssetAnim=function(){var _this=this;var startPos;var endPos;var startItem;var endItem;startPos=new Point(this.width/2,this.height/2-100);endItem=this.m_listAsset.getChildAt(0);endPos=this.m_listAsset.localToGlobal(endItem.x,endItem.y);endPos=this.globalToLocal(endPos.x,endPos.y);endPos.x=endPos.x+50;FguiHelper.startTrailSingle(2,startPos,endPos,1000,this);endItem=this.m_listAsset.getChildAt(1);endPos=this.m_listAsset.localToGlobal(endItem.x,endItem.y);endPos=this.globalToLocal(endPos.x,endPos.y);endPos.x=endPos.x+50;FguiHelper.startTrailSingle(5,startPos,endPos,1000,this);setTimeout(function(){_this.UpdateAsset()},1000)};MarketCityInfoPanel.prototype.UpdateAsset=function(){if(this.cityData.isHome){this.m_listAsset.numItems=2}else{this.m_listAsset.numItems=0}};MarketCityInfoPanel.prototype.InitDispatch=function(){this.m_listActor.itemRenderer=Handler.create(this,this.RenderDispatchList,null,false);this.m_listActor.on(fairygui.Events.CLICK_ITEM,this,this.OnDispatchClick)};MarketCityInfoPanel.prototype.RenderDispatchList=function(index,obj){var item=obj;item.name=this.NAME_ITEMDISPATCH+index;if(this.cityData==null){return}item.setPivot(0.5,0.5);if(index==4){if(!Game.moduleModel.market.IsUnlockFiveActor){item.m_state.setSelectedIndex(0);return}}if(this.dispatchList==null){item.m_state.setSelectedIndex(1);return}var id=this.dispatchList[index];if(id==null||id==0){item.m_state.setSelectedIndex(1);return}var data=Game.config.actor.getConfig(id);item.m_state.setSelectedIndex(2);item.icon=Game.moduleModel.market.GetActorIcon(id)};MarketCityInfoPanel.prototype.OnDispatchClick=function(obj){var _this=this;var item=obj;if(item.m_state.selectedIndex==0){Game.system.toastFormatText(Games.TEXT.MarketHomeActorLock,Game.moduleModel.street.CityEnvoyMaxStreet);return}if(this.cityData.isHome==false){Game.system.confirmText(Games.TEXT.MarketChangeHomeContent,Games.TEXT.MarketChangeHomeTitle,this,function(){_this.OnDispatch(item)});return}this.OnDispatch(item)};MarketCityInfoPanel.prototype.OnDispatch=function(item){var _this=this;var itemIndex=parseInt(item.name.substr(this.NAME_ITEMDISPATCH.length));var demandList=Game.moduleModel.market.GetCityDemand(this.cityData.id,itemIndex);var dispatch=this.cityData.isHome?Game.moduleModel.market.GetAmbassador():[];this.moduleWindow.openSubwindowByIndex(Games.MarketSubEnum.SelectActor,true,function(actor,tweenRect){_this.OnSelect(itemIndex,actor,tweenRect)},demandList,dispatch,Games.TEXT.MarketSelectActorForCity.format(this.cityData.numName))};MarketCityInfoPanel.prototype.InitAssetSpeed=function(){this.m_listAssetSpeed.itemRenderer=Handler.create(this,this.RenderAssetSpeedList,null,false)};MarketCityInfoPanel.prototype.RenderAssetSpeedList=function(index,obj){var item=obj;item.setPivot(0.5,0.5);var speed=0;if(index==0){speed=Math.floor(Game.moduleModel.market.GetCityGoldSpeed()*3600);item.icon=Game.moduleModel.item.getItem(2).itemIconUrl}else{speed=Math.floor(Game.moduleModel.market.GetCityFansSpeed()*3600);item.icon=Game.moduleModel.item.getItem(5).itemIconUrl}var formatStr="[color=#e3b121]{0}[/color][color=#488fc1]/{1}[/color]";item.title=formatStr.format(formatNumberUnit(speed),Games.TEXT.Hour)};MarketCityInfoPanel.prototype.InitAssets=function(){var list=this.m_listAsset;list.itemRenderer=Handler.create(this,this.RenderAssetList,null,false)};MarketCityInfoPanel.prototype.RenderAssetList=function(index,obj){var item=obj;item.setPivot(0.5,0.5);var count=0;var limit=0;var valueTxt="";if(index==0){item.m_icon.url=Game.moduleModel.item.getItem(2).itemIconUrl;count=Game.moduleModel.market.GetCurGold();limit=Game.moduleModel.market.GoldLimit;if(count>=limit){count=limit;valueTxt=formatArrayNumberUnit("[color=#e02f2b]{0}[/color][color=#e3f8ff]/{1}[/color]",count,limit)}else{valueTxt=formatArrayNumberUnit("[color=#e3b121]{0}[/color][color=#e3f8ff]/{1}[/color]",count,limit)}}else{item.m_icon.url=Game.moduleModel.item.getItem(5).itemIconUrl;count=Game.moduleModel.market.GetCurFans();limit=Game.moduleModel.market.FansLimit;if(count>=limit){count=limit;valueTxt=formatArrayNumberUnit("[color=#e02f2b]{0}[/color][color=#e3f8ff]/{1}[/color]",count,limit)}else{valueTxt=formatArrayNumberUnit("[color=#e3b121]{0}[/color][color=#e3f8ff]/{1}[/color]",count,limit)}}item.title=valueTxt};MarketCityInfoPanel.prototype.InitRewards=function(){var list=this.m_listReward;list.itemRenderer=Handler.create(this,this.RenderRewardList,null,false);list.on(fairygui.Events.CLICK_ITEM,this,this.OnRewardItemClick)};MarketCityInfoPanel.prototype.RenderRewardList=function(index,obj){var viewItem=obj;var itemId=this.cityRewardList[index];viewItem.name=index.toString();viewItem.icon=Game.config.item.getItemIcon(itemId);viewItem.m_num.text="";viewItem.starNum=Game.config.item.getStarNum(itemId);if(this.cityData.isHome){viewItem.m_isLock.setSelectedIndex(Game.moduleModel.market.GetAmbassadorNum()>index?0:1)}else{viewItem.m_isLock.setSelectedIndex(1)}};MarketCityInfoPanel.prototype.OnRewardItemClick=function(obj){var index=parseInt(obj.name);if(index==null){return}var itemId=this.cityRewardList[index];if(itemId==null){return}if(this.cityData.isHome&&Game.moduleModel.market.GetAmbassadorNum()>index){Game.system.showItemInfo(obj,itemId)}else{var title=Games.TEXT.MarketItemLockTitle;var tip=Games.TEXT.MarketItemLockTip.format(index+1);Game.system.showItemLockTip(obj,tip,title)}};MarketCityInfoPanel.prototype.OnBtnGetclick=function(){if(this.cityData.isHome){Game.protosender.city.GetReward("",this.cityData.id)}};MarketCityInfoPanel.prototype.OnGetRewardResponse=function(resData){var rewardList=resData.dropout;this.OnGetReward(rewardList);this.UpdateView();this.m_listAsset.numItems=2};MarketCityInfoPanel.prototype.AddRewardAnim=function(){var startPos;var endPos;var startItem;var endItem;startItem=this.m_listAsset.getChildAt(0);startPos=this.m_listAsset.localToGlobal(startItem.x,startItem.y);startPos.x=startPos.x+50;endPos=new Point(200,50);FguiHelper.startTrail(2,startPos,endPos,1000,Games.MenuLayer.dialog);startItem=this.m_listAsset.getChildAt(1);startPos=this.m_listAsset.localToGlobal(startItem.x,startItem.y);startPos.x=startPos.x+50;endPos=this.localToGlobal(this.width/2,this.height/2-100);FguiHelper.startTrail(5,startPos,endPos,1000,Games.MenuLayer.dialog)};MarketCityInfoPanel.prototype.OnGetReward=function(rewardList){var addFans=0;for(var index=0;index<rewardList.length;index++){var reward=rewardList[index];if(reward.itemId==5){addFans=reward.amount}}if(addFans>0){this.AddRewardAnim();Game.system.addFansText(addFans,null,Games.TEXT.MarketAddFansTip,3)}};MarketCityInfoPanel.prototype.OnSelect=function(index,actor,tweenRect){if(actor==null){return}this.animSelectActorStruct={index:index,actor:actor,tweenRect:tweenRect};Game.moduleModel.market.SendSetAmbassador("",this.cityData.id,index,actor)};MarketCityInfoPanel.prototype.OnsSetAmbassador=function(resData){var _this=this;var rewardList=resData.dropout;this.OnGetReward(rewardList);setTimeout(function(){_this.m_marquee.AddNewContent()},3000);if(this.animSelectActorStruct){var itemIndex=this.animSelectActorStruct.index;var tweenRect=this.animSelectActorStruct.tweenRect;var actorId_1=this.animSelectActorStruct.actor;var item_1=this.m_listActor.getChildAt(itemIndex);item_1.m_state.setSelectedIndex(1);var icon=item_1.m_icon;var fromRect=this.globalToLocalRect(tweenRect.x,tweenRect.y,tweenRect.width,tweenRect.height);var iconGlobalRect=item_1.localToGlobalRect(icon.x,icon.y,icon.width,icon.height);var toRect=this.globalToLocalRect(iconGlobalRect.x,iconGlobalRect.y,iconGlobalRect.width,iconGlobalRect.height);this.m_tweenIcon.visible=true;this.m_tweenIcon.m_icon.url=Game.moduleModel.market.GetActorIcon(actorId_1);DoTween.TweenRect(this.m_tweenIcon,fromRect,toRect,300,null,Handler.create(this,function(){item_1.m_state.setSelectedIndex(2);_this.m_tweenIcon.visible=false;Game.system.playSkillEffect(actorId_1,Games.SkillTriggerType.city_get_gold_time);Game.system.playSkillEffect(actorId_1,Games.SkillTriggerType.get_gold_speed)}))}this.animSelectActorStruct=null};MarketCityInfoPanel.prototype.ShowHome=function(){if(this.cityData.isHome){this.m_marquee.Show();this.tick.Continue()}else{this.HideHome()}};MarketCityInfoPanel.prototype.HideHome=function(){this.m_marquee.Hide();this.tick.Stop()};return MarketCityInfoPanel}(Market.MarketCityInfoPanelStruct));Market.MarketCityInfoPanel=MarketCityInfoPanel})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketCompleteStruct=(function(_super){__extends(MarketCompleteStruct,_super);function MarketCompleteStruct(){return _super.call(this)||this}MarketCompleteStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","MarketComplete"))};MarketCompleteStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};MarketCompleteStruct.URL="ui://p7g5z54ae70xft";MarketCompleteStruct.DependPackages=["Market","Fx","Common"];return MarketCompleteStruct}(fairygui.GComponent));Market.MarketCompleteStruct=MarketCompleteStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketComplete=(function(_super){__extends(MarketComplete,_super);function MarketComplete(){return _super!==null&&_super.apply(this,arguments)||this}return MarketComplete}(Market.MarketCompleteStruct));Market.MarketComplete=MarketComplete})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketCountryListPanelStruct=(function(_super){__extends(MarketCountryListPanelStruct,_super);function MarketCountryListPanelStruct(){return _super.call(this)||this}MarketCountryListPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","MarketCountryListPanel"))};MarketCountryListPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_listCountry=(this.getChild("listCountry"));this.m_title=(this.getChild("title"));this.m_btnShow=(this.getChild("btnShow"));this.m_btnClose=(this.getChild("btnClose"))};MarketCountryListPanelStruct.URL="ui://p7g5z54adm319s";MarketCountryListPanelStruct.DependPackages=["Market","Common"];return MarketCountryListPanelStruct}(fairygui.GComponent));Market.MarketCountryListPanelStruct=MarketCountryListPanelStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketCountryListPanel=(function(_super){__extends(MarketCountryListPanel,_super);function MarketCountryListPanel(){return _super!==null&&_super.apply(this,arguments)||this}MarketCountryListPanel.prototype.onWindowInited=function(){this.m_btnClose.onClick(this.moduleWindow,this.moduleWindow.closeSelf);this.m_btnShow.onClick(this,this.OnBtnShowClick);this.m_listCountry.setVirtual();this.m_listCountry.itemRenderer=Handler.create(this,this.RenderListItem,null,false)};MarketCountryListPanel.prototype.onWindowDestory=function(){this.m_btnClose.onClick(null,null);this.m_btnShow.onClick(null,null)};MarketCountryListPanel.prototype.onWindowShow=function(){this.UpdateView()};MarketCountryListPanel.prototype.onWindowHide=function(){};MarketCountryListPanel.prototype.UpdateView=function(){this.countryList=Game.moduleModel.market.GetCountryList();this.m_listCountry.numItems=this.countryList.length};MarketCountryListPanel.prototype.OnBtnShowClick=function(){var mainWindow=this.moduleWindow.mainWindow;var selectIndex=this.m_listCountry.selectedIndex;if(selectIndex==null||selectIndex<0){mainWindow.conent.OnSelectCountry(null)}else{var data=this.countryList[selectIndex];mainWindow.conent.OnSelectCountry(data.id)}this.moduleWindow.closeSelf()};MarketCountryListPanel.prototype.RenderListItem=function(index,obj){var item=obj;var data=this.countryList[index];item.m_txtName.text=data.cfg.number+". "+data.name;item.m_isHome.setSelectedIndex(data.isHome?1:0);var progress=Game.moduleModel.market.GetCountryProgress(data.id);item.m_txtProgress.text=Games.TEXT.MarketOccupe.format(progress,Game.config.country.getConfig(data.id).city_num);item.m_imgCountryIcon.url=data.flagUrl};return MarketCountryListPanel}(Market.MarketCountryListPanelStruct));Market.MarketCountryListPanel=MarketCountryListPanel})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketMainPanelStruct=(function(_super){__extends(MarketMainPanelStruct,_super);function MarketMainPanelStruct(){return _super.call(this)||this}MarketMainPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","MarketMainPanel"))};MarketMainPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_txtCountry=(this.getChild("txtCountry"));this.m_occupyPanel=(this.getChild("occupyPanel"));this.m_cityInfoPanel=(this.getChild("cityInfoPanel"));this.m_btnCountry=(this.getChild("btnCountry"));this.m_topAsset=(this.getChild("topAsset"));this.m_btnLeft=(this.getChild("btnLeft"));this.m_btnRight=(this.getChild("btnRight"))};MarketMainPanelStruct.URL="ui://p7g5z54adm319t";MarketMainPanelStruct.DependPackages=["Market","Common","Fx","MainUI"];return MarketMainPanelStruct}(fairygui.GComponent));Market.MarketMainPanelStruct=MarketMainPanelStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketMainPanel=(function(_super){__extends(MarketMainPanel,_super);function MarketMainPanel(){return _super!==null&&_super.apply(this,arguments)||this}MarketMainPanel.prototype.onWindowInited=function(){this.m_topAsset.InitView(this,this.OnCloseClick,[2,3]);this.m_topAsset.m_Bg.setSelectedIndex(1);this.m_btnCountry.onClick(this,this.ShowCountryList);this.m_btnLeft.onClick(this,this.OnBtnLeftClick);this.m_btnRight.onClick(this,this.OnBtnRightClick);this.InitCityList()};MarketMainPanel.prototype.onWindowDestory=function(){this.m_topAsset.onWindowDestory();this.m_btnCountry.onClick(null,null)};MarketMainPanel.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.city_HoldCity,this.OnOccupyFinish,this);Game.protoOkEvent.add(ProtoEventKey.ItemData,this.m_topAsset.updateAsset,this.m_topAsset);Game.protoOkEvent.add(ProtoEventKey.city_Propaganda,this.OnPublicityFinish,this);Game.protoOkEvent.add(ProtoEventKey.CityData,this.OnCityDataUpdate,this);this.Open()};MarketMainPanel.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.city_HoldCity,this.OnOccupyFinish,this);Game.protoOkEvent.remove(ProtoEventKey.ItemData,this.m_topAsset.updateAsset,this.m_topAsset);Game.protoOkEvent.remove(ProtoEventKey.city_Propaganda,this.OnPublicityFinish,this);Game.protoOkEvent.remove(ProtoEventKey.CityData,this.OnCityDataUpdate,this)};MarketMainPanel.prototype.Open=function(){if(this.countryId==null&&Game.moduleModel.market.RedNum){this.countryId=Game.moduleModel.market.GetHomeCountryId();var homeCity=Game.moduleModel.market.GetHomeCity();if(homeCity!=null){this.selectIndex=homeCity.index}}this.UpdateView()};MarketMainPanel.prototype.UpdateView=function(){this.m_topAsset.updateAsset();if((this.countryId==null||this.countryId==0)){this.countryId=Game.moduleModel.market.GetLastCountryId()}this.m_btnLeft.enabled=Game.moduleModel.market.GetPreUnlockCountryId(this.countryId)!=null;this.m_btnRight.enabled=Game.moduleModel.market.GetNextUnlockCountryId(this.countryId)!=null;this.cityDatas=Game.moduleModel.market.GetCityList(this.countryId);if(this.selectIndex==null||this.selectIndex>this.cityDatas.length||this.selectIndex<0){if(this.countryId==Game.moduleModel.market.GetLastCountryId()){this.selectIndex=this.cityDatas.length-2}else{if(this.countryId==Game.moduleModel.market.GetHomeCountryId()){var homeCity=Game.moduleModel.market.GetHomeCity();this.selectIndex=homeCity.index}else{this.selectIndex=this.cityDatas.length-1}}}var cfg=Game.config.country.getConfig(this.countryId);var countryProgress=Game.moduleModel.market.GetCountryProgress(this.countryId);this.m_txtCountry.text=cfg.number+". "+cfg.name+" "+(countryProgress<cfg.city_num?countryProgress+1:countryProgress)+"/"+cfg.city_num;this.m_list.numItems=this.cityDatas.length;this.m_list.refreshVirtualList();this.m_list.selectedIndex=this.selectIndex;this.m_list.scrollToView(this.selectIndex);this.ShowCity()};MarketMainPanel.prototype.InitCityList=function(){this.m_list.setVirtual();this.m_list.itemRenderer=Handler.create(this,this.RenderCityListItem,null,false);this.m_list.on(fairygui.Events.CLICK_ITEM,this,this.OnCityItemClick);this.m_list.numItems=0};MarketMainPanel.prototype.OnCloseClick=function(){this.countryId=null;this.selectIndex=null;this.moduleWindow.menuClose()};MarketMainPanel.prototype.OnBtnLeftClick=function(){this.OnSelectCountry(Game.moduleModel.market.GetPreUnlockCountryId(this.countryId))};MarketMainPanel.prototype.OnBtnRightClick=function(){this.OnSelectCountry(Game.moduleModel.market.GetNextUnlockCountryId(this.countryId))};MarketMainPanel.prototype.OnDestory=function(){};MarketMainPanel.prototype.OnCityItemClick=function(obj){this.selectIndex=this.m_list.selectedIndex;this.ShowCity()};MarketMainPanel.prototype.RenderCityListItem=function(index,obj){var item=obj;var data=this.cityDatas[index];item.setPivot(0.5,0.5);item.title=data.name;item.m_num.text=data.cfg.city_num.toString();item.m_state.setSelectedIndex(data.state==Games.CityStateEnum.Lock?0:1);item.enabled=data.state!=Games.CityStateEnum.Lock;item.m_isHome.setSelectedIndex(data.isHome?1:0);if(data.isHome){item.Red=Game.moduleModel.market.RedNum}else{item.Red=false}};MarketMainPanel.prototype.ShowCity=function(){var index=this.selectIndex;if(index==null||index<0){return}var data=this.cityDatas[index];if(data.state==Games.CityStateEnum.Lock){return}if(data.state==Games.CityStateEnum.hasOccupy){this.ShowCityInfo()}else{this.ShowOccupyPanel()}};MarketMainPanel.prototype.ShowOccupyPanel=function(){this.moduleWindow.openTab(Games.MarketTabEnum.Occupy);this.m_occupyPanel.UpdateView()};MarketMainPanel.prototype.ShowCityInfo=function(){this.moduleWindow.openTab(Games.MarketTabEnum.CityInfo);var data=this.cityDatas[this.m_list.selectedIndex];this.m_cityInfoPanel.Open(data.id)};MarketMainPanel.prototype.OnPublicityFinish=function(){this.UpdateView()};MarketMainPanel.prototype.OnCityDataUpdate=function(){this.UpdateView()};MarketMainPanel.prototype.OnOccupyFinish=function(){var city=Game.moduleModel.market.GetMaxCity();if(city){Game.system.getItemText(city.holdReward,function(){Game.moduleModel.func.checkHoldCity()})}this.UpdateView()};MarketMainPanel.prototype.OnSelectCountry=function(countryId){if(countryId!=null&&countryId!=this.countryId){this.countryId=countryId;this.selectIndex=-1}this.UpdateView()};MarketMainPanel.prototype.ShowCountryList=function(){this.moduleWindow.openSubwindowByIndex(Games.MarketSubEnum.CountryList,true)};Object.defineProperty(MarketMainPanel.prototype,"CurrentCity",{get:function(){return this.cityDatas[this.m_list.selectedIndex]},enumerable:true,configurable:true});return MarketMainPanel}(Market.MarketMainPanelStruct));Market.MarketMainPanel=MarketMainPanel})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketOccupyPanelStruct=(function(_super){__extends(MarketOccupyPanelStruct,_super);function MarketOccupyPanelStruct(){return _super.call(this)||this}MarketOccupyPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","MarketOccupyPanel"))};MarketOccupyPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=this.getController("state");this.m_mapCityPoint=(this.getChild("mapCityPoint"));this.m_country=(this.getChild("country"));this.m_cityName=(this.getChild("cityName"));this.m_listReward=(this.getChild("listReward"));this.m_tipCity=(this.getChild("tipCity"));this.m_progress=(this.getChild("progress"));this.m_btnRoadShow=(this.getChild("btnRoadShow"));this.m_btnZhanling=(this.getChild("btnZhanling"));this.m_labAniCost=(this.getChild("labAniCost"));this.m_t1=this.getTransition("t1");this.m_tCostMove=this.getTransition("tCostMove")};MarketOccupyPanelStruct.URL="ui://p7g5z54adm319u";MarketOccupyPanelStruct.DependPackages=["Market","Common"];return MarketOccupyPanelStruct}(fairygui.GComponent));Market.MarketOccupyPanelStruct=MarketOccupyPanelStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketOccupyPanel=(function(_super){__extends(MarketOccupyPanel,_super);function MarketOccupyPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.ItemPointList=[];_this.NAME_BTNCITYPOINT="BtnCityPoint";_this.CityPointPool=new fairygui.GObjectPool();return _this}MarketOccupyPanel.prototype.onWindowInited=function(){this.m_btnRoadShow.onClick(this,this.OnBtnRoadShowClick);this.m_btnZhanling.onClick(this,this.OnBtnOccupyClick);this.m_listReward.itemRenderer=new Handler(this,this.RenderRewardItem,null,false)};MarketOccupyPanel.prototype.onWindowDestory=function(){this.m_btnRoadShow.onClick(null,null);this.m_btnZhanling.onClick(null,null)};MarketOccupyPanel.prototype.onWindowShow=function(){this.UpdateView()};MarketOccupyPanel.prototype.onWindowHide=function(){};MarketOccupyPanel.prototype.UpdateView=function(){this.cityData=Game.moduleModel.market.GetLastCity();this.pointDatas=Game.moduleModel.market.GetStreetList();this.rewardList=Game.config.city.getConfig(this.cityData.id).hold_reward;var numItems=this.ItemPointList.length;this.m_tipCity.text=Games.TEXT.MarketCityTip;for(var index=0;index<this.pointDatas.length;index++){var item=this.ItemPointList[index];if(item==undefined){item=this.CityPointPool.getObject(fgui.Market.BtnCityPoint.URL);item.name=this.NAME_BTNCITYPOINT+index;this.addChild(item);item.setPivot(0.5,1);item.m_btn.onClick(this,this.OnItemClick);this.ItemPointList[index]=item}var data=this.pointDatas[index];var maxX=this.m_mapCityPoint.width;var maxY=this.m_mapCityPoint.height;var x=data.pos.x*maxX;var y=data.pos.y*maxY;item.setXY(x,y);item.title=data.name;if(data.state==Games.StreetStateEnum.NotOccupy){item.m_state.setSelectedIndex(0)}else{if(data.state==Games.StreetStateEnum.InOccupy){item.m_progress.value=data.progress;item.m_state.setSelectedIndex(1);item.m_tranOccupy.play()}else{if(data.state==Games.StreetStateEnum.HasOccupy){item.m_state.setSelectedIndex(2)}else{}}}item.visible=true}for(var index=this.pointDatas.length;index<numItems;index++){var item=this.ItemPointList[index];this.removeChild(item);this.CityPointPool.returnObject(item)}this.ItemPointList.splice(this.pointDatas.length);if(this.cityData.state==Games.CityStateEnum.InOccupy){this.m_state.setSelectedIndex(0)}else{if(this.cityData.state==Games.CityStateEnum.FinishPublicity){this.m_btnRoadShow.enabled=true;this.m_state.setSelectedIndex(1);this.m_btnRoadShow.m_state.setSelectedIndex(0)}else{if(this.cityData.state==Games.CityStateEnum.FinishRoadShow){this.m_state.setSelectedIndex(2);this.m_btnRoadShow.m_state.setSelectedIndex(1)}else{this.m_state.setSelectedIndex(0)}}}var cost=Game.moduleModel.market.GetRoadShowCost();this.m_btnRoadShow.m_labCost.icon=Game.config.item.getItemIcon(3);this.m_btnRoadShow.m_labCost.title=formatNumberUnit(cost,cost>1000?1:0);this.m_labAniCost.icon=Game.config.item.getItemIcon(3);this.m_labAniCost.title=formatNumberUnit(cost,cost>1000?1:0);this.m_labAniCost.visible=false;this.m_listReward.numItems=this.rewardList.length;this.m_cityName.text=this.cityData.name+Games.TEXT.MarketShare;this.m_progress.value=Game.moduleModel.market.GetCityProgress();this.m_country.url=Game.moduleModel.market.GetCountry(this.cityData.country).flagUrl;this.m_btnRoadShow.enabled=true};MarketOccupyPanel.prototype.RenderRewardItem=function(index,obj){var item=obj;var data=this.rewardList[index];item.setPivot(0.5,0.5);item.icon=Game.moduleModel.item.getItem(data.itemId).itemIconUrl;item.m_num.text=formatNumberUnit(data.itemNum,data.itemNum>1000?1:0);item.m_star.starNum=data.itemStar;item.PopupInfo=data.itemId};MarketOccupyPanel.prototype.OnItemClick=function(evt){var index=Number(fairygui.GObject.cast(evt.currentTarget).name.substr(12));var data=this.pointDatas[index];if(data.state==Games.StreetStateEnum.InOccupy){this.moduleWindow.openSubwindowByIndex(Games.MarketSubEnum.Publicity,false,data)}};MarketOccupyPanel.prototype.OnBtnRoadShowClick=function(){if(this.cityData.state==Games.CityStateEnum.FinishPublicity){var cost=Game.moduleModel.market.GetRoadShowCost();if(Game.moduleModel.item.hasItemNum(3,cost)){this.m_btnRoadShow.enabled=false;this.OnsRoadshow()}else{Game.system.openItemWay(3,cost)}}};MarketOccupyPanel.prototype.OnsRoadshow=function(){var _this=this;this.m_btnRoadShow.m_state.setSelectedIndex(2);this.m_tCostMove.play(new Handler(this,function(){_this.moduleWindow.openSubwindowByIndex(Games.MarketSubEnum.RoadShow)}))};MarketOccupyPanel.prototype.OnBtnOccupyClick=function(){Game.protosender.city.HoldCity()};Object.defineProperty(MarketOccupyPanel.prototype,"CurrentStreetBtn",{get:function(){var currentStreet=Game.moduleModel.market.GetLastStreet();for(var index=0;index<this.pointDatas.length;index++){var pointData=this.pointDatas[index];if(pointData.id==currentStreet.id){return this.ItemPointList[index]}}},enumerable:true,configurable:true});MarketOccupyPanel.prototype.guideGetCityPointBtn=function(){for(var index=0;index<this.pointDatas.length;index++){var data=this.pointDatas[index];if(data.state==Games.StreetStateEnum.InOccupy){return this.ItemPointList[index]}}};return MarketOccupyPanel}(Market.MarketOccupyPanelStruct));Market.MarketOccupyPanel=MarketOccupyPanel})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketPublicityAnimStruct=(function(_super){__extends(MarketPublicityAnimStruct,_super);function MarketPublicityAnimStruct(){return _super.call(this)||this}MarketPublicityAnimStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","MarketPublicityAnim"))};MarketPublicityAnimStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_AnimBg=(this.getChild("AnimBg"));this.m_t0=this.getTransition("t0")};MarketPublicityAnimStruct.URL="ui://p7g5z54anu0ufr";MarketPublicityAnimStruct.DependPackages=["Market","Common"];return MarketPublicityAnimStruct}(fairygui.GComponent));Market.MarketPublicityAnimStruct=MarketPublicityAnimStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketPublicityAnim=(function(_super){__extends(MarketPublicityAnim,_super);function MarketPublicityAnim(){return _super!==null&&_super.apply(this,arguments)||this}return MarketPublicityAnim}(Market.MarketPublicityAnimStruct));Market.MarketPublicityAnim=MarketPublicityAnim})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketPublicityPanelStruct=(function(_super){__extends(MarketPublicityPanelStruct,_super);function MarketPublicityPanelStruct(){return _super.call(this)||this}MarketPublicityPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","MarketPublicityPanel"))};MarketPublicityPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_active=this.getController("active");this.m_name=(this.getChild("name"));this.m_actorDemand=(this.getChild("actorDemand"));this.m_auto=(this.getChild("auto"));this.m_tip=(this.getChild("tip"));this.m_listReward=(this.getChild("listReward"));this.m_topAsset=(this.getChild("topAsset"));this.m_btnAddActor=(this.getChild("btnAddActor"));this.m_demand=(this.getChild("demand"));this.m_progress=(this.getChild("progress"));this.m_btnPublicity=(this.getChild("btnPublicity"));this.m_tabSelfmotion=(this.getChild("tabSelfmotion"));this.m_tweenIcon=(this.getChild("tweenIcon"));this.m_frame=(this.getChild("frame"));this.m_btnFinish=(this.getChild("btnFinish"));this.m_t0=this.getTransition("t0");this.m_soundGoldReward=this.getTransition("soundGoldReward")};MarketPublicityPanelStruct.URL="ui://p7g5z54adm319z";MarketPublicityPanelStruct.DependPackages=["Market","Common","PfSkin","Fx"];return MarketPublicityPanelStruct}(fairygui.GComponent));Market.MarketPublicityPanelStruct=MarketPublicityPanelStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketPublicityPanel=(function(_super){__extends(MarketPublicityPanel,_super);function MarketPublicityPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isShow=false;_this.publicRewards=[];return _this}MarketPublicityPanel.prototype.onWindowInited=function(){this.m_topAsset.InitView(this,this.OnCloseClick,[3]);this.m_btnAddActor.onClick(this,this.OnBtnAddActorClick);this.m_btnPublicity.onClick(this,this.OnBtnPublicityClick);this.m_btnFinish.onClick(this,this.OnPublicityFinish);this.m_tabSelfmotion.onClick(this,this.OnTabSelfmotionChangState);this.m_listReward.itemRenderer=new Handler(this,this.RenderRewardsItem,null,false)};MarketPublicityPanel.prototype.onWindowDestory=function(){this.m_topAsset.onWindowDestory();this.m_btnAddActor.onClick(null,null);this.m_btnPublicity.onClick(null,null);this.m_btnFinish.onClick(null,null);this.m_tabSelfmotion.onClick(null,null)};MarketPublicityPanel.prototype.onWindowShow=function(){this.isShow=true;Game.sound.playMusic(SoundKey.MM_BGM_Propaganda,0);Game.protoOkEvent.add(ProtoEventKey.city_Propaganda,this.OnsPropaganda,this);Game.protoOkEvent.add(ProtoEventKey.city_SetPropagandaActor,this.OnsSetPropagandaActor,this);Game.protoOkEvent.add(ProtoEventKey.ItemData,this.m_topAsset.updateAsset,this.m_topAsset);this.UnlockButton();this.UpdateView();this.m_topAsset.updateAsset()};MarketPublicityPanel.prototype.onWindowHide=function(){this.isShow=false;Game.sound.stopMusic();Game.sound.playMusic(SoundKey.MM_BGM_Cinema);Game.protoOkEvent.remove(ProtoEventKey.city_Propaganda,this.OnsPropaganda,this);Game.protoOkEvent.remove(ProtoEventKey.city_SetPropagandaActor,this.OnsSetPropagandaActor,this);Game.protoOkEvent.remove(ProtoEventKey.ItemData,this.m_topAsset.updateAsset,this.m_topAsset)};MarketPublicityPanel.prototype.UpdateView=function(){this.pointData=Game.moduleModel.market.GetLastStreet();this.rewardList=this.pointData.reward;this.m_listReward.numItems=this.rewardList.length;this.selectActor=Game.moduleModel.market.Info.propagandaActor;this.m_progress.value=this.pointData.progress;this.m_active.setSelectedIndex(0);this.m_demand.text=Game.moduleModel.market.GetPublicityDemandText();this.m_actorDemand.text=Game.moduleModel.market.GetStreetDemandText();this.m_name.text=this.pointData.numName;this.m_btnPublicity.m_cost.text=formatNumberUnit(this.pointData.cfg.publicize_cost);this.m_btnPublicity.m_assetLoader.url=Game.config.item.getItemIcon(3);if(this.selectActor!=null&&this.selectActor!=0){this.m_btnAddActor.State=1;this.m_btnAddActor.Icon=Game.moduleModel.market.GetActorIcon(this.selectActor)}else{this.m_btnAddActor.State=0}if(Game.moduleModel.secretary.isTempSecretary){var remainTimes=Game.moduleModel.secretary.autoPublicizeNum;if(remainTimes<=0){Game.moduleModel.secretary.isAutoPublicize=false;this.m_tip.text=Games.TEXT.HaveAgentCanAutoPublicize}else{this.m_tip.text=format(TEXT.SecretaryRemainAutoPublicizeNum,remainTimes)}}else{this.m_tip.text=Games.TEXT.HaveAgentCanAutoRead}this.m_tabSelfmotion.selected=Game.moduleModel.secretary.isAutoPublicize};MarketPublicityPanel.prototype.OnTabSelfmotionChangState=function(){if(Game.guide.isGuideUI(this.m_tabSelfmotion)){Game.menu.open(MenuId.Weal,1);return}if(this.m_tabSelfmotion.selected){if(Game.moduleModel.secretary.autoPublicizeNum>0){Game.moduleModel.secretary.isAutoPublicize=this.m_tabSelfmotion.selected}else{if(Game.moduleModel.secretary.isTempSecretary){Game.system.confirmText(Game.config.msg.getTxtFormat(MsgKey.secretary_experience,Game.config.msg.getTxt(MsgKey.secretary_auto1)),TEXT.SecretaryForeverAgent,null,function(){Game.menu.open(MenuId.Weal,1)},null,Game.config.msg.getTxt(MsgKey.go_to_hire),TEXT.ButtonCannel,false)}else{Game.system.confirmText(Game.config.msg.getTxtFormat(MsgKey.secretary_not_owned,Game.config.msg.getTxt(MsgKey.secretary_auto1)),TEXT.SecretaryForeverAgent,null,function(){Game.menu.open(MenuId.Weal,1)},null,Game.config.msg.getTxt(MsgKey.go_to_hire),TEXT.ButtonCannel,false)}this.m_tabSelfmotion.selected=false}}else{Game.moduleModel.secretary.isAutoPublicize=this.m_tabSelfmotion.selected}};MarketPublicityPanel.prototype.RenderRewardsItem=function(index,obj){var data=this.rewardList[index];var item=obj;item.icon=Game.moduleModel.item.getItem(data.itemId).itemIconUrl;item.m_num.text=data.itemNumTxt;item.m_star.starNum=data.itemStar;item.PopupInfo=data.itemId};MarketPublicityPanel.prototype.OnCloseClick=function(){this.isShow=false;this.moduleWindow.backToMainWindow()};MarketPublicityPanel.prototype.OnBtnAddActorClick=function(){var _this=this;var demandList=Game.moduleModel.market.GetStreetDemand();var dispatch=Game.moduleModel.market.GetPropagandaActor();var dispatchList=dispatch==0?[]:[dispatch];var mainWindow=(this.moduleWindow.mainWindow);mainWindow.openSubwindowByIndex(Games.MarketSubEnum.SelectActor,false,function(actor,tweenRect){_this.OnActorSelect(actor,tweenRect)},demandList,dispatchList,Games.TEXT.MarketSelectActor.format(this.pointData.numName))};MarketPublicityPanel.prototype.OnActorSelect=function(actor,tweenRect){if(actor==null){return}this.animSelectActorStruct={actor:actor,tweenRect:tweenRect};Game.protosender.city.SetPropagandaActor("",this.pointData.city,this.pointData.id,actor)};MarketPublicityPanel.prototype.OnsSetPropagandaActor=function(msg){this.UpdateView();this.PlaySelectAnim()};MarketPublicityPanel.prototype.PlaySelectAnim=function(){var _this=this;var actor=this.animSelectActorStruct.actor;var tweenRect=this.animSelectActorStruct.tweenRect;var mIcon=this.m_btnAddActor.m_icon;var fromRect=this.globalToLocalRect(tweenRect.x,tweenRect.y,tweenRect.width,tweenRect.height);var iconGlobalRect=this.m_btnAddActor.localToGlobalRect(mIcon.x,mIcon.y,mIcon.width,mIcon.height);var toRect=this.globalToLocalRect(iconGlobalRect.x,iconGlobalRect.y,mIcon.width,iconGlobalRect.height);mIcon.visible=false;this.m_tweenIcon.visible=true;this.m_tweenIcon.m_icon.url=Game.moduleModel.market.GetActorIcon(actor);DoTween.TweenRect(this.m_tweenIcon,fromRect,toRect,300,null,Handler.create(this,function(){mIcon.visible=true;_this.m_tweenIcon.visible=false}))};MarketPublicityPanel.prototype.OnBtnPublicityClick=function(){this.PublicityOnce()};MarketPublicityPanel.prototype.PublicityOnce=function(){if(this.isShow==false){return}var cost=this.pointData.cfg.publicize_cost;if(Game.moduleModel.item.hasItemNum(3,cost)){this.m_btnPublicity.m_t0.play();this.LockButton();this.publicRewards=Game.moduleModel.market.GetPublicRewards(this.pointData);Game.protosender.city.Propaganda("",this.pointData.city,this.pointData.id)}else{this.UnlockButton();Game.system.openItemWay(3,cost)}};MarketPublicityPanel.prototype.OnsPropaganda=function(msg){if(Game.moduleModel.market.Info.lastArea==this.pointData.id&&Game.moduleModel.market.Info.lastAreaProgress<100){this.UpdateView()}else{this.m_progress.value=100;Games.Static.Instance.onUserorbit("market",User.info.stall+"&"+this.pointData.city+"&"+this.pointData.id,"publicity")}this.m_t0.play(Handler.create(this,this.OnPublicityTransFinish))};MarketPublicityPanel.prototype.OnPublicityTransFinish=function(){var _this=this;Game.system.getRewardText(this.publicRewards,Games.TEXT.MarketReward,this.m_tabSelfmotion.selected?0.3:0);if(Game.moduleModel.market.Info.lastArea!=this.pointData.id||Game.moduleModel.market.Info.lastAreaProgress==100){this.ShowFinishView();this.UnlockButton()}else{var isAuto=Game.moduleModel.secretary.isAutoPublicize;if(this.m_tabSelfmotion.selected){setTimeout(function(){_this.PublicityOnce()},500)}else{this.UnlockButton();if(this.m_tabSelfmotion.selected&&Game.moduleModel.secretary.isTempSecretary){Game.system.confirmText(Game.config.msg.getTxtFormat(MsgKey.secretary_experience,Game.config.msg.getTxt(MsgKey.secretary_auto1)),TEXT.SecretaryForeverAgent,null,function(){Game.menu.open(MenuId.Weal,1)},null,Game.config.msg.getTxt(MsgKey.go_to_hire),TEXT.ButtonCannel,false)}}}};MarketPublicityPanel.prototype.LockButton=function(){this.m_btnAddActor.enabled=false;this.m_btnPublicity.enabled=false;this.m_tabSelfmotion.enabled=false};MarketPublicityPanel.prototype.UnlockButton=function(){this.m_btnAddActor.enabled=true;this.m_btnPublicity.enabled=true;this.m_tabSelfmotion.enabled=true};MarketPublicityPanel.prototype.ShowFinishView=function(){this.m_active.setSelectedIndex(1)};MarketPublicityPanel.prototype.OnPublicityFinish=function(){Game.story.triggerPlayStoryByType(Games.StoryTriggerType.FinishStreet);this.OnCloseClick()};return MarketPublicityPanel}(Market.MarketPublicityPanelStruct));Market.MarketPublicityPanel=MarketPublicityPanel})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketRoadShowPanelStruct=(function(_super){__extends(MarketRoadShowPanelStruct,_super);function MarketRoadShowPanelStruct(){return _super.call(this)||this}MarketRoadShowPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","MarketRoadShowPanel"))};MarketRoadShowPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=this.getController("state");this.m_listActor=(this.getChild("listActor"));this.m_aniAixin_red=(this.getChild("aniAixin_red"));this.m_roadshowContainer=(this.getChild("roadshowContainer"));this.m_progress=(this.getChild("progress"));this.m_btnSkip=(this.getChild("btnSkip"));this.m_fxAixin=(this.getChild("fxAixin"));this.m_btnFinish=(this.getChild("btnFinish"));this.m_soundSuccess=this.getTransition("soundSuccess");this.m_soundFail=this.getTransition("soundFail")};MarketRoadShowPanelStruct.URL="ui://p7g5z54adm31a6";MarketRoadShowPanelStruct.DependPackages=["Market","PfSkin","Common","Fx"];return MarketRoadShowPanelStruct}(fairygui.GComponent));Market.MarketRoadShowPanelStruct=MarketRoadShowPanelStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketRoadShowPanel=(function(_super){__extends(MarketRoadShowPanel,_super);function MarketRoadShowPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.debug=false;return _this}MarketRoadShowPanel.prototype.onWindowInited=function(){this.m_btnSkip.onClick(this,this.OnBtnSkipClick);this.m_btnFinish.onClick(this,this.OnBtnFinishClick)};MarketRoadShowPanel.prototype.onWindowDestory=function(){this.m_btnSkip.onClick(null,null);this.m_btnFinish.onClick(null,null)};MarketRoadShowPanel.prototype.onWindowShow=function(){Game.sound.playMusic(SoundKey.MM_BGM_RoadShow,0);this.m_fxAixin.visible=false;this.m_btnSkip.visible=false;this.OpenView()};MarketRoadShowPanel.prototype.onWindowHide=function(){Game.sound.stopMusic();Game.sound.playMusic(SoundKey.MM_BGM_Cinema)};MarketRoadShowPanel.prototype.OpenView=function(){this.m_listActor.itemRenderer=new Handler(this,this.RenderActorItem,null,false);this.m_state.setSelectedIndex(0);this.cityData=Game.moduleModel.market.GetLastCity();Game.protosender.city.Roadshow("",this.cityData.id,0);this.actorList=Game.moduleModel.market.GetActorList();this.m_listActor.numItems=this.actorList.length;this.m_listActor.scrollToView(this.m_listActor.numItems-1);this.show_need=Game.config.city.getConfig(this.cityData.id).show_need;this.m_progress.max=this.show_need;this.m_progress.value=0;this.StartAnim()};MarketRoadShowPanel.prototype.StartAnim=function(){var _this=this;Game.stageManager.roadshow.isActive=true;this.roadShowAnimPanel=Game.stageManager.roadshow.mainScene.mainView;this.roadShowAnimPanel.showFor(this.m_roadshowContainer,this);setTimeout(function(){_this.m_fxAixin.visible=true;_this.m_btnSkip.visible=true},10000)};MarketRoadShowPanel.prototype.OnAnimFinish=function(){this.OnFinish()};MarketRoadShowPanel.prototype.currentActorData=function(){return this.actorList[this.m_listActor.numItems-1]};MarketRoadShowPanel.prototype.curActorPopularValue=function(actor){return actor.art+actor.plot+actor.perform+actor.spectacle+actor.entertainment};MarketRoadShowPanel.prototype.UpdateProgress=function(actor){this.m_listActor.numItems=this.m_listActor.numItems-1;var total=actor.art+actor.plot+actor.perform+actor.spectacle+actor.entertainment;total=this.m_progress.value+total;if(total>=this.show_need){total=this.show_need}this.m_progress.value=total;if(this.m_progress.value==this.show_need){this.m_fxAixin.visible=false;return true}var num=this.m_listActor.numItems;if(num==0){return true}return false};MarketRoadShowPanel.prototype.RenderActorItem=function(index,obj){var data=this.actorList[index];obj.Render(data)};MarketRoadShowPanel.prototype.OnFinish=function(){if(Game.moduleModel.market.Info.roadShowFlag){this.OnSuccess()}else{this.OnFail()}};MarketRoadShowPanel.prototype.OnSuccess=function(){this.m_state.setSelectedIndex(1)};MarketRoadShowPanel.prototype.OnFail=function(){this.m_state.setSelectedIndex(2)};MarketRoadShowPanel.prototype.OnBtnSkipClick=function(){if(this.roadShowAnimPanel){this.m_fxAixin.visible=false;this.roadShowAnimPanel.dispose();this.roadShowAnimPanel=null}this.OnAnimFinish()};MarketRoadShowPanel.prototype.OnBtnFinishClick=function(){Game.story.triggerPlayStoryByType(Games.StoryTriggerType.FinishRoadShow);this.moduleWindow.backPreWindow()};return MarketRoadShowPanel}(Market.MarketRoadShowPanelStruct));Market.MarketRoadShowPanel=MarketRoadShowPanel})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketRoadShowSuccessStruct=(function(_super){__extends(MarketRoadShowSuccessStruct,_super);function MarketRoadShowSuccessStruct(){return _super.call(this)||this}MarketRoadShowSuccessStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","MarketRoadShowSuccess"))};MarketRoadShowSuccessStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};MarketRoadShowSuccessStruct.URL="ui://p7g5z54apuatfd";MarketRoadShowSuccessStruct.DependPackages=["Market","Fx","Common"];return MarketRoadShowSuccessStruct}(fairygui.GComponent));Market.MarketRoadShowSuccessStruct=MarketRoadShowSuccessStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketRoadShowSuccess=(function(_super){__extends(MarketRoadShowSuccess,_super);function MarketRoadShowSuccess(){return _super!==null&&_super.apply(this,arguments)||this}return MarketRoadShowSuccess}(Market.MarketRoadShowSuccessStruct));Market.MarketRoadShowSuccess=MarketRoadShowSuccess})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketSelectActorItemStruct=(function(_super){__extends(MarketSelectActorItemStruct,_super);function MarketSelectActorItemStruct(){return _super.call(this)||this}MarketSelectActorItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","MarketSelectActorItem"))};MarketSelectActorItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=this.getController("state");this.m_button=this.getController("button");this.m_selectType=this.getController("selectType");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_labDemand1=(this.getChild("labDemand1"));this.m_labDemand2=(this.getChild("labDemand2"));this.m_btnSelect=(this.getChild("btnSelect"));this.m_btnPromotion=(this.getChild("btnPromotion"));this.m_talkBox=(this.getChild("talkBox"));this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1")};MarketSelectActorItemStruct.URL="ui://p7g5z54adm31ed";MarketSelectActorItemStruct.DependPackages=["Market","Common","WarMovie"];return MarketSelectActorItemStruct}(fairygui.GButton));Market.MarketSelectActorItemStruct=MarketSelectActorItemStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketSelectActorItem=(function(_super){__extends(MarketSelectActorItem,_super);function MarketSelectActorItem(){return _super!==null&&_super.apply(this,arguments)||this}MarketSelectActorItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnPromotion.onClick(this,this.OnBtnPromotionClick)};MarketSelectActorItem.prototype.UpdateView=function(actorData,demandList,dispatchList){this.actorData=actorData;this.demandList=demandList;this.dispatchList=dispatchList;this.title=actorData.name;this.m_state.setSelectedIndex(this.IsDispatch(actorData.id)?1:0);var demand=this.demandList[0];var actDemand=Game.moduleModel.market.GetActorRequire(actorData.id);if(demand!=null){this.m_labDemand1.visible=true;this.m_labDemand1.title=Game.moduleModel.market.GetDemandTypeName(demand.type)+":";this.m_labDemand1.m_value.text=Game.moduleModel.market.GetActorDemandValueText(demand,actDemand[demand.type]);this.m_labDemand1.m_color.setSelectedIndex(Game.moduleModel.market.IsDemandConform(demand,actDemand[demand.type])?1:0);this.m_labDemand1.m_hasIcon.setSelectedIndex(0)}else{this.m_labDemand1.visible=false}demand=this.demandList[1];if(demand!=null){this.m_labDemand2.visible=true;this.m_labDemand2.title=Game.moduleModel.market.GetDemandTypeName(demand.type)+":";this.m_labDemand2.m_value.text=Game.moduleModel.market.GetActorDemandValueText(demand,actDemand[demand.type]);this.m_labDemand2.m_color.setSelectedIndex(Game.moduleModel.market.IsDemandConform(demand,actDemand[demand.type])?1:0);this.m_labDemand1.m_hasIcon.setSelectedIndex(0)}else{this.m_labDemand2.visible=false}this.m_icon.url=Game.moduleModel.market.GetActorIcon(actorData.id);this.UpdateState()};MarketSelectActorItem.prototype.UpdateState=function(){var actDemand=Game.moduleModel.market.GetActorRequire(this.actorData.id);var isFinish=true;var selectType=0;for(var index=0;index<this.demandList.length;index++){var demand=this.demandList[index];if(!Game.moduleModel.market.IsDemandConform(demand,actDemand[demand.type])){switch(demand.type){case Games.ActorRequireEnum.age:this.m_talkBox.title=Game.config.msg.getTxt(MsgKey.market_envoy_wrong3);selectType=1;break;case Games.ActorRequireEnum.Continents:this.m_talkBox.title=Game.config.msg.getTxt(MsgKey.market_envoy_wrong1);selectType=1;break;case Games.ActorRequireEnum.type:this.m_talkBox.title=Game.config.msg.getTxt(MsgKey.market_envoy_wrong2);selectType=1;break;case Games.ActorRequireEnum.sex:this.m_talkBox.title=Game.config.msg.getTxt(MsgKey.market_envoy_wrong5);selectType=1;break;default:break}isFinish=false}}this.m_selectType.setSelectedIndex(selectType);return isFinish};MarketSelectActorItem.prototype.onselect=function(){var actDemand=Game.moduleModel.market.GetActorRequire(this.actorData.id);for(var index=0;index<this.demandList.length;index++){var demand=this.demandList[index];if(!Game.moduleModel.market.IsDemandConform(demand,actDemand[demand.type])){return false}}return true};MarketSelectActorItem.prototype.OnBtnPromotionClick=function(){Game.menu.open(MenuId.ArtistDetail,this.actorData.id)};MarketSelectActorItem.prototype.IsDispatch=function(id){for(var index=0;index<this.dispatchList.length;index++){var dispatch=this.dispatchList[index];if(dispatch==id){return true}}return false};return MarketSelectActorItem}(Market.MarketSelectActorItemStruct));Market.MarketSelectActorItem=MarketSelectActorItem})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketSelectActorPanelStruct=(function(_super){__extends(MarketSelectActorPanelStruct,_super);function MarketSelectActorPanelStruct(){return _super.call(this)||this}MarketSelectActorPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Market","MarketSelectActorPanel"))};MarketSelectActorPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_txtTip=(this.getChild("txtTip"));this.m_txtTip2=(this.getChild("txtTip2"));this.m_list=(this.getChild("list"));this.m_btnClose=(this.getChild("btnClose"))};MarketSelectActorPanelStruct.URL="ui://p7g5z54adm31af";MarketSelectActorPanelStruct.DependPackages=["Market","Common"];return MarketSelectActorPanelStruct}(fairygui.GComponent));Market.MarketSelectActorPanelStruct=MarketSelectActorPanelStruct})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Market;(function(Market){var MarketSelectActorPanel=(function(_super){__extends(MarketSelectActorPanel,_super);function MarketSelectActorPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dispatchList=[];_this.NAME_ITEM="MarketActorItem";_this.lastSelect=-1;return _this}MarketSelectActorPanel.prototype.onWindowInited=function(){this.m_btnClose.onClick(this,this.OnCloseClick);this.m_list.setVirtual();this.m_list.itemRenderer=Handler.create(this,this.RenderListItem,null,false);this.m_list.on(fairygui.Events.CLICK_ITEM,this,this.OnSelect)};MarketSelectActorPanel.prototype.onWindowDestory=function(){this.m_btnClose.onClick(null,null);this.m_list.itemRenderer=null};MarketSelectActorPanel.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.ActorData,this.UpdateActors,this);this.UpdateView()};MarketSelectActorPanel.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.ActorData,this.UpdateActors,this)};MarketSelectActorPanel.prototype.UpdateView=function(){var args=this.moduleWindow.menuParameter.args;this.onSelect=args[0];this.demandList=args[1];this.dispatchList=args[2];this.m_txtTip.text=args[3];this.m_txtTip2.text=Game.moduleModel.market.GetDemandListText(this.demandList);this.lastSelect=-1;this.m_list.selectNone();this.m_list.refreshVirtualList();this.UpdateList()};MarketSelectActorPanel.prototype.UpdateList=function(){var _this=this;this.actorList=Game.moduleModel.market.GetActorList().concat().sort(function(a,b){return _this.sort(a,b,_this.demandList)});this.m_list.numItems=this.actorList.length};MarketSelectActorPanel.prototype.sort=function(a,b,demandList){if(this.demandList==null){return}var demand=this.demandList[0];if(demand==null){return}switch(demand.type){case Games.ActorRequireEnum.age:case Games.ActorRequireEnum.Continents:case Games.ActorRequireEnum.type:case Games.ActorRequireEnum.sex:return b.level-a.level;default:break}var aDemand=Game.moduleModel.market.GetActorRequire(a.id);var bDemand=Game.moduleModel.market.GetActorRequire(b.id);var aValue=aDemand[demand.type];var bValue=bDemand[demand.type];return bValue-aValue};MarketSelectActorPanel.prototype.UpdateActors=function(){if(this.visible){this.UpdateList();if(this.m_list.selectedIndex>=0){var item=this.m_list.getVisibleChild(this.NAME_ITEM+this.m_list.selectedIndex);if(item.UpdateState()){this.lastSelect=-1}}}};MarketSelectActorPanel.prototype.OnSelect=function(obj){var item=obj;var itemIndex=Number(item.name.substr(this.NAME_ITEM.length));if(this.lastSelect==itemIndex){return}var data=this.actorList[itemIndex];if(item.onselect()){var rect=item.localToGlobalRect(item.m_icon.x+item.m_icon.width/2,item.m_icon.y,item.m_icon.width+item.m_icon.height/2,item.m_icon.height);this.moduleWindow.backPreWindow();this.onSelect(data.id,rect)}this.lastSelect=itemIndex};MarketSelectActorPanel.prototype.RenderListItem=function(index,obj){var item=obj;var actorData=this.actorList[index];item.name=this.NAME_ITEM+index;item.setPivot(0.5,0.5);item.UpdateView(actorData,this.demandList,this.dispatchList)};MarketSelectActorPanel.prototype.OnCloseClick=function(){this.moduleWindow.backPreWindow();this.onSelect()};MarketSelectActorPanel.prototype.Show=function(){this.visible=true};MarketSelectActorPanel.prototype.Hide=function(){this.visible=false};return MarketSelectActorPanel}(Market.MarketSelectActorPanelStruct));Market.MarketSelectActorPanel=MarketSelectActorPanel})(Market=fgui.Market||(fgui.Market={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Mission;(function(Mission){var CommonProgressBarStruct=(function(_super){__extends(CommonProgressBarStruct,_super);function CommonProgressBarStruct(){return _super.call(this)||this}CommonProgressBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Mission","CommonProgressBar"))};CommonProgressBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_title=(this.getChild("title"))};CommonProgressBarStruct.URL="ui://33rn3ccx7wlga";CommonProgressBarStruct.DependPackages=["Mission"];return CommonProgressBarStruct}(fairygui.GProgressBar));Mission.CommonProgressBarStruct=CommonProgressBarStruct})(Mission=fgui.Mission||(fgui.Mission={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Mission;(function(Mission){var CommonProgressBar=(function(_super){__extends(CommonProgressBar,_super);function CommonProgressBar(){return _super!==null&&_super.apply(this,arguments)||this}return CommonProgressBar}(Mission.CommonProgressBarStruct));Mission.CommonProgressBar=CommonProgressBar})(Mission=fgui.Mission||(fgui.Mission={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Mission;(function(Mission){var MissionItemStruct=(function(_super){__extends(MissionItemStruct,_super);function MissionItemStruct(){return _super.call(this)||this}MissionItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Mission","MissionItem"))};MissionItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state_controler=this.getController("state_controler");this.m_name=(this.getChild("name"));this.m_stateText=(this.getChild("stateText"));this.m_state=(this.getChild("state"));this.m_gotImg=(this.getChild("gotImg"));this.m_barFinishBg=(this.getChild("barFinishBg"));this.m_buttonGet=(this.getChild("buttonGet"));this.m_buttonGo=(this.getChild("buttonGo"));this.m_progressBar=(this.getChild("progressBar"));this.m_reward=(this.getChild("reward"))};MissionItemStruct.URL="ui://33rn3ccxj3a35";MissionItemStruct.DependPackages=["Mission","Common","WarMovie"];return MissionItemStruct}(fairygui.GComponent));Mission.MissionItemStruct=MissionItemStruct})(Mission=fgui.Mission||(fgui.Mission={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Mission;(function(Mission){var MissionItem=(function(_super){__extends(MissionItem,_super);function MissionItem(){return _super!==null&&_super.apply(this,arguments)||this}MissionItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_buttonGet.onClick(this,this.onClickGetButton);this.m_buttonGo.onClick(this,this.onClickGoButton)};MissionItem.prototype.onClickGetButton=function(){Game.protosender.task.reward(this.data.protoData.uuid)};MissionItem.prototype.onClickGoButton=function(){Game.menu.close(MenuId.Mission);if(this.data.config.guide>0){Game.guide.readyPlayGuide(this.data.config.guide,true)}};MissionItem.prototype.setData=function(data){this.data=data;this.m_name.text=data.config.name;this.m_progressBar.max=data.config.goal;this.m_progressBar.value=data.protoData.progress;this.m_stateText.text=Games.TEXT.StateText;this.m_state.text=data.config.Complete.toString();this.refreshReward();this.m_gotImg.visible=false;this.m_barFinishBg.visible=false;switch(data.protoData.state){case EAchievementState.rewarded:this.m_state_controler.selectedIndex=2;break;case EAchievementState.finished:this.m_state_controler.selectedIndex=1;break;default:this.m_state_controler.selectedIndex=0;break}};MissionItem.prototype.refreshReward=function(){if(this.data.config.reward&&this.data.config.reward.length>0){var data=this.data.config.reward[0];this.m_reward.setItemNumData(data)}};return MissionItem}(Mission.MissionItemStruct));Mission.MissionItem=MissionItem})(Mission=fgui.Mission||(fgui.Mission={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Mission;(function(Mission){var MissionMainPanelStruct=(function(_super){__extends(MissionMainPanelStruct,_super);function MissionMainPanelStruct(){return _super.call(this)||this}MissionMainPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Mission","MissionMainPanel"))};MissionMainPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_list=(this.getChild("list"));this.m_tipMsg=(this.getChild("tipMsg"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_progressTotalBar=(this.getChild("progressTotalBar"))};MissionMainPanelStruct.URL="ui://33rn3ccxj3a30";MissionMainPanelStruct.DependPackages=["Mission","Common","WarMovie"];return MissionMainPanelStruct}(fairygui.GComponent));Mission.MissionMainPanelStruct=MissionMainPanelStruct})(Mission=fgui.Mission||(fgui.Mission={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Mission;(function(Mission){var MissionMainPanel=(function(_super){__extends(MissionMainPanel,_super);function MissionMainPanel(){return _super!==null&&_super.apply(this,arguments)||this}MissionMainPanel.prototype.onWindowInited=function(){this.m_title.text=Games.TEXT.TaskArrangement;this.m_progressTotalBar.setProgressId(EProgressBoxId.dailyTask);this.m_closeBtn.onClick(this,this.oncloseBtn)};MissionMainPanel.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.TaskData,this.refreshData,this);this.m_tipMsg.text=Game.config.msg.getTxt(MsgKey.task_bottom);this.refreshData()};MissionMainPanel.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.TaskData,this.refreshData,this)};MissionMainPanel.prototype.refreshData=function(){this.refreshList(Game.moduleModel.mission.getUnlockList())};MissionMainPanel.prototype.refreshList=function(items){this.listData=items;var list=this.m_list;list.setVirtual();list.setVirtualAndLoop();if(!list.itemRenderer){list.itemRenderer=Handler.create(this,this.renderListItem,null,false)}list.numItems=items.length};MissionMainPanel.prototype.renderListItem=function(index,item){var data=this.listData[index];item.setData(data)};MissionMainPanel.prototype.oncloseBtn=function(){this.moduleWindow.menuClose()};return MissionMainPanel}(Mission.MissionMainPanelStruct));Mission.MissionMainPanel=MissionMainPanel})(Mission=fgui.Mission||(fgui.Mission={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Mission;(function(Mission){var MissionRewardStruct=(function(_super){__extends(MissionRewardStruct,_super);function MissionRewardStruct(){return _super.call(this)||this}MissionRewardStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Mission","MissionReward"))};MissionRewardStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_progress=this.getController("c_progress");this.m_c_state=this.getController("c_state");this.m_iconBg=(this.getChild("iconBg"));this.m_icon=(this.getChild("icon"));this.m_iconGet=(this.getChild("iconGet"));this.m_title=(this.getChild("title"));this.m_twinkle=this.getTransition("twinkle")};MissionRewardStruct.URL="ui://33rn3ccxpmz6c";MissionRewardStruct.DependPackages=["Mission","Common"];return MissionRewardStruct}(fairygui.GButton));Mission.MissionRewardStruct=MissionRewardStruct})(Mission=fgui.Mission||(fgui.Mission={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Mission;(function(Mission){var MissionReward=(function(_super){__extends(MissionReward,_super);function MissionReward(){return _super!==null&&_super.apply(this,arguments)||this}MissionReward.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickBoxItem);this.tip=fgui.Common.TipReward.createInstance()};MissionReward.prototype.setData=function(index,config,progressData){this.index=index;this.config=config;this.progressData=progressData;this.needOrderNum=config.completion-progressData.progress;this.enableGet=progressData.progress>=config.completion;this.isGet=progressData.isGet(index-1);this.title=config.completion.toString();this.m_twinkle.stop();var url="";var iconIndex=index>=2?index-1:1;if(!this.isGet){if(this.enableGet){url=format("icon_reward_lv{0}_2",iconIndex);this.m_twinkle.play(null,-1)}else{url=format("icon_reward_lv{0}_1",iconIndex)}}else{url=format("icon_reward_lv{0}_3",iconIndex)}this.m_icon.icon=fairygui.UIPackage.getItemURL(Games.GuiPackageNames.Common,url)};MissionReward.prototype.onClickBoxItem=function(){if(this.enableGet){Game.protosender.progressBox.GetReward(this.progressData.uuid,this.index)}if(!this.isGet&&!this.enableGet){if(this.config){this.showRewardUI(this.config.reward)}}};MissionReward.prototype.showRewardUI=function(items){this.tip.setItems(items);this.tip.showPopup(this)};return MissionReward}(Mission.MissionRewardStruct));Mission.MissionReward=MissionReward})(Mission=fgui.Mission||(fgui.Mission={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Mission;(function(Mission){var ProgressMissionStruct=(function(_super){__extends(ProgressMissionStruct,_super);function ProgressMissionStruct(){return _super.call(this)||this}ProgressMissionStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Mission","ProgressMission"))};ProgressMissionStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_list=(this.getChild("list"));this.m_bar=(this.getChild("bar"))};ProgressMissionStruct.URL="ui://33rn3ccxpmz6b";ProgressMissionStruct.DependPackages=["Mission","Common","Cooperation"];return ProgressMissionStruct}(fairygui.GComponent));Mission.ProgressMissionStruct=ProgressMissionStruct})(Mission=fgui.Mission||(fgui.Mission={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Mission;(function(Mission){var ProgressMission=(function(_super){__extends(ProgressMission,_super);function ProgressMission(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.configs=[];return _this}ProgressMission.prototype.updateBarPanel=function(){};Object.defineProperty(ProgressMission.prototype,"value",{get:function(){return this.m_bar.value},set:function(curProgress){this.m_title.text=curProgress.toString();var progressNums=[];for(var index=0;index<this.configs.length;index++){var element=this.configs[index];progressNums.push(element.completion)}var preMaxValue=0;var max=0;var value=0;var num=progressNums.length;var total=progressNums[num-1];var eachParagragh=total/progressNums.length;for(var index=0;index<num;index++){var prog=progressNums[index];if(curProgress<=prog){max=total/((eachParagragh*(index+1))/prog);var diff=prog-preMaxValue;var va=max*(eachParagragh/total);value=max*(eachParagragh*index/total)+va/diff*(curProgress-preMaxValue);break}preMaxValue=prog}this.m_bar.max=max;this.m_bar.value=value},enumerable:true,configurable:true});Object.defineProperty(ProgressMission.prototype,"max",{get:function(){return this.m_bar.max},set:function(value){this.m_bar.max=value},enumerable:true,configurable:true});ProgressMission.prototype.setProgressId=function(progressId){this.progressId=progressId;this.progressData=Game.moduleModel.progressBox.getProgressBoxData(progressId);this.configs=Game.config.complete.getCompleteList(progressId);this.max=this.configs[this.configs.length-1].completion;this.value=this.progressData.progress;var list=this.m_list;list.setVirtual();list.setVirtualAndLoop();if(!list.itemRenderer){list.itemRenderer=Handler.create(this,this.renderListItem,null,false)}list.numItems=this.configs.length};ProgressMission.prototype.renderListItem=function(index,item){var config=this.configs[index];item.setData(index+1,config,this.progressData)};ProgressMission.prototype.updateView=function(){if(this.progressData){this.setProgressId(this.progressId)}};ProgressMission.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.ManageOrderData,this.updateView,this);Game.protoOkEvent.remove(ProtoEventKey.ProgressBoxData,this.updateView,this)};ProgressMission.prototype.onWindowShow=function(){this.updateView();Game.protoOkEvent.add(ProtoEventKey.ManageOrderData,this.updateView,this);Game.protoOkEvent.add(ProtoEventKey.ProgressBoxData,this.updateView,this)};return ProgressMission}(Mission.ProgressMissionStruct));Mission.ProgressMission=ProgressMission})(Mission=fgui.Mission||(fgui.Mission={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Notice;(function(Notice){var PublicNoticePanelStruct=(function(_super){__extends(PublicNoticePanelStruct,_super);function PublicNoticePanelStruct(){return _super.call(this)||this}PublicNoticePanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Notice","PublicNoticePanel"))};PublicNoticePanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_labContent=(this.getChild("labContent"));this.m_checkBox=(this.getChild("checkBox"));this.m_btnClose=(this.getChild("btnClose"))};PublicNoticePanelStruct.URL="ui://jh3pqd7de77b0";PublicNoticePanelStruct.DependPackages=["Notice","Common","PfSkin"];return PublicNoticePanelStruct}(fairygui.GComponent));Notice.PublicNoticePanelStruct=PublicNoticePanelStruct})(Notice=fgui.Notice||(fgui.Notice={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Notice;(function(Notice){var PublicNoticePanel=(function(_super){__extends(PublicNoticePanel,_super);function PublicNoticePanel(){return _super!==null&&_super.apply(this,arguments)||this}PublicNoticePanel.prototype.onWindowInited=function(){this.m_checkBox.onClick(this,this.onClickCheckBox);this.m_btnClose.onClick(this.moduleWindow,this.moduleWindow.menuClose)};PublicNoticePanel.prototype.onClickCheckBox=function(){Game.localStorage.isNoticTodayNoOpen=this.m_checkBox.selected};PublicNoticePanel.prototype.onWindowShow=function(){this.m_checkBox.selected=Game.localStorage.isNoticTodayNoOpen;var data=Game.channel.serverNoticData;if(data){this.m_labContent.text=data.content}};PublicNoticePanel.prototype.onWindowHide=function(){};return PublicNoticePanel}(Notice.PublicNoticePanelStruct));Notice.PublicNoticePanel=PublicNoticePanel})(Notice=fgui.Notice||(fgui.Notice={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima1_1Struct=(function(_super){__extends(Anima1_1Struct,_super);function Anima1_1Struct(){return _super.call(this)||this}Anima1_1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","Anima1_1"))};Anima1_1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialog=(this.getChild("dialog"));this.m_t0=this.getTransition("t0")};Anima1_1Struct.URL="ui://oyge7e0tboch1";Anima1_1Struct.DependPackages=["OpenAnima"];return Anima1_1Struct}(fairygui.GComponent));OpenAnima.Anima1_1Struct=Anima1_1Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima1_1=(function(_super){__extends(Anima1_1,_super);function Anima1_1(){return _super!==null&&_super.apply(this,arguments)||this}Anima1_1.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialog.text=format(Game.config.speak.getConfig(10001).speak,User.info.name)};return Anima1_1}(OpenAnima.Anima1_1Struct));OpenAnima.Anima1_1=Anima1_1})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima1_2Struct=(function(_super){__extends(Anima1_2Struct,_super);function Anima1_2Struct(){return _super.call(this)||this}Anima1_2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","Anima1_2"))};Anima1_2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_player=(this.getChild("player"));this.m_dialog=(this.getChild("dialog"));this.m_t0=this.getTransition("t0")};Anima1_2Struct.URL="ui://oyge7e0tbochp";Anima1_2Struct.DependPackages=["OpenAnima"];return Anima1_2Struct}(fairygui.GComponent));OpenAnima.Anima1_2Struct=Anima1_2Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima1_2=(function(_super){__extends(Anima1_2,_super);function Anima1_2(){return _super!==null&&_super.apply(this,arguments)||this}Anima1_2.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);if(User.info.sex==Proto.SE.EUserSex.boy){this.m_player.m_player.m_sex.selectedIndex=1}else{this.m_player.m_player.m_sex.selectedIndex=0}this.m_dialog.text=Game.config.speak.getConfig(10002).speak};return Anima1_2}(OpenAnima.Anima1_2Struct));OpenAnima.Anima1_2=Anima1_2})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima2_1Struct=(function(_super){__extends(Anima2_1Struct,_super);function Anima2_1Struct(){return _super.call(this)||this}Anima2_1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","Anima2_1"))};Anima2_1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_player=(this.getChild("player"));this.m_t0=this.getTransition("t0")};Anima2_1Struct.URL="ui://oyge7e0tboch15";Anima2_1Struct.DependPackages=["OpenAnima"];return Anima2_1Struct}(fairygui.GComponent));OpenAnima.Anima2_1Struct=Anima2_1Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima2_1=(function(_super){__extends(Anima2_1,_super);function Anima2_1(){return _super!==null&&_super.apply(this,arguments)||this}Anima2_1.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);if(User.info.sex==Proto.SE.EUserSex.boy){this.m_player.m_player.m_sex.selectedIndex=1}else{this.m_player.m_player.m_sex.selectedIndex=0}};return Anima2_1}(OpenAnima.Anima2_1Struct));OpenAnima.Anima2_1=Anima2_1})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima2_2Struct=(function(_super){__extends(Anima2_2Struct,_super);function Anima2_2Struct(){return _super.call(this)||this}Anima2_2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","Anima2_2"))};Anima2_2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_hand=(this.getChild("hand"));this.m_player=(this.getChild("player"));this.m_t0=this.getTransition("t0")};Anima2_2Struct.URL="ui://oyge7e0tboch1d";Anima2_2Struct.DependPackages=["OpenAnima"];return Anima2_2Struct}(fairygui.GComponent));OpenAnima.Anima2_2Struct=Anima2_2Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima2_2=(function(_super){__extends(Anima2_2,_super);function Anima2_2(){return _super!==null&&_super.apply(this,arguments)||this}Anima2_2.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);if(User.info.sex==Proto.SE.EUserSex.boy){this.m_player.m_hand.m_hand_kaimen.selectedIndex=1;this.m_hand.m_hand_kaixiang.selectedIndex=1}else{this.m_player.m_hand.m_hand_kaimen.selectedIndex=0;this.m_hand.m_hand_kaixiang.selectedIndex=0}};return Anima2_2}(OpenAnima.Anima2_2Struct));OpenAnima.Anima2_2=Anima2_2})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima2_3Struct=(function(_super){__extends(Anima2_3Struct,_super);function Anima2_3Struct(){return _super.call(this)||this}Anima2_3Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","Anima2_3"))};Anima2_3Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_label1=(this.getChild("label1"));this.m_label2=(this.getChild("label2"));this.m_label3=(this.getChild("label3"));this.m_player=(this.getChild("player"));this.m_t0=this.getTransition("t0")};Anima2_3Struct.URL="ui://oyge7e0tboch20";Anima2_3Struct.DependPackages=["OpenAnima"];return Anima2_3Struct}(fairygui.GComponent));OpenAnima.Anima2_3Struct=Anima2_3Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima2_3=(function(_super){__extends(Anima2_3,_super);function Anima2_3(){return _super!==null&&_super.apply(this,arguments)||this}Anima2_3.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);if(User.info.sex==Proto.SE.EUserSex.boy){this.m_player.m_hand.m_hand_kanxin.selectedIndex=1}else{this.m_player.m_hand.m_hand_kanxin.selectedIndex=0}this.m_label1.text=Game.config.speak.getConfig(10005).speak;this.m_label2.text=Game.config.speak.getConfig(10006).speak;this.m_label3.text=Game.config.speak.getConfig(10007).speak};return Anima2_3}(OpenAnima.Anima2_3Struct));OpenAnima.Anima2_3=Anima2_3})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima3_1Struct=(function(_super){__extends(Anima3_1Struct,_super);function Anima3_1Struct(){return _super.call(this)||this}Anima3_1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","Anima3_1"))};Anima3_1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_player=(this.getChild("player"));this.m_dialog2=(this.getChild("dialog2"));this.m_dialog1=(this.getChild("dialog1"));this.m_t0=this.getTransition("t0")};Anima3_1Struct.URL="ui://oyge7e0ts7oa2s";Anima3_1Struct.DependPackages=["OpenAnima"];return Anima3_1Struct}(fairygui.GComponent));OpenAnima.Anima3_1Struct=Anima3_1Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima3_1=(function(_super){__extends(Anima3_1,_super);function Anima3_1(){return _super!==null&&_super.apply(this,arguments)||this}Anima3_1.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);if(User.info.sex==Proto.SE.EUserSex.boy){this.m_player.m_player.m_sex.selectedIndex=1}else{this.m_player.m_player.m_sex.selectedIndex=0}this.m_dialog1.text=Game.config.speak.getConfig(10009).speak;this.m_dialog2.text=Game.config.speak.getConfig(10010).speak};return Anima3_1}(OpenAnima.Anima3_1Struct));OpenAnima.Anima3_1=Anima3_1})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima3_2Struct=(function(_super){__extends(Anima3_2Struct,_super);function Anima3_2Struct(){return _super.call(this)||this}Anima3_2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","Anima3_2"))};Anima3_2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_player=(this.getChild("player"));this.m_dialog1=(this.getChild("dialog1"));this.m_dialog2=(this.getChild("dialog2"));this.m_dialog3=(this.getChild("dialog3"));this.m_dialog4=(this.getChild("dialog4"));this.m_t0=this.getTransition("t0")};Anima3_2Struct.URL="ui://oyge7e0ts7oa2t";Anima3_2Struct.DependPackages=["OpenAnima"];return Anima3_2Struct}(fairygui.GComponent));OpenAnima.Anima3_2Struct=Anima3_2Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima3_2=(function(_super){__extends(Anima3_2,_super);function Anima3_2(){return _super!==null&&_super.apply(this,arguments)||this}Anima3_2.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);if(User.info.sex==Proto.SE.EUserSex.boy){this.m_player.m_player.m_sex.selectedIndex=1}else{this.m_player.m_player.m_sex.selectedIndex=0}this.m_dialog1.text=Game.config.speak.getConfig(10011).speak;this.m_dialog2.text=Game.config.speak.getConfig(10012).speak;this.m_dialog3.text=Game.config.speak.getConfig(10013).speak;this.m_dialog4.text=Game.config.speak.getConfig(10014).speak};return Anima3_2}(OpenAnima.Anima3_2Struct));OpenAnima.Anima3_2=Anima3_2})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima4_1Struct=(function(_super){__extends(Anima4_1Struct,_super);function Anima4_1Struct(){return _super.call(this)||this}Anima4_1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","Anima4_1"))};Anima4_1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialog1=(this.getChild("dialog1"));this.m_dialog2=(this.getChild("dialog2"));this.m_dialog3=(this.getChild("dialog3"));this.m_dialog4=(this.getChild("dialog4"));this.m_player=(this.getChild("player"));this.m_t0=this.getTransition("t0")};Anima4_1Struct.URL="ui://oyge7e0tboch2c";Anima4_1Struct.DependPackages=["OpenAnima"];return Anima4_1Struct}(fairygui.GComponent));OpenAnima.Anima4_1Struct=Anima4_1Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Anima4_1=(function(_super){__extends(Anima4_1,_super);function Anima4_1(){return _super!==null&&_super.apply(this,arguments)||this}Anima4_1.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);if(User.info.sex==Proto.SE.EUserSex.boy){this.m_player.m_sex.selectedIndex=1}else{this.m_player.m_sex.selectedIndex=0}this.m_dialog1.text=Game.config.speak.getConfig(10016).speak;this.m_dialog2.text=Game.config.speak.getConfig(10017).speak;this.m_dialog3.text=Game.config.speak.getConfig(10018).speak;this.m_dialog4.text=Game.config.speak.getConfig(10019).speak};return Anima4_1}(OpenAnima.Anima4_1Struct));OpenAnima.Anima4_1=Anima4_1})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var CarAnimaStruct=(function(_super){__extends(CarAnimaStruct,_super);function CarAnimaStruct(){return _super.call(this)||this}CarAnimaStruct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","CarAnima"))};CarAnimaStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_visible_bg=this.getController("c_visible_bg");this.m_bg=(this.getChild("bg"));this.m_car=(this.getChild("car"));this.m_t0=this.getTransition("t0")};CarAnimaStruct.URL="ui://oyge7e0tboch2o";CarAnimaStruct.DependPackages=["OpenAnima","Fx","Guide"];return CarAnimaStruct}(fairygui.GComponent));OpenAnima.CarAnimaStruct=CarAnimaStruct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var CarAnima=(function(_super){__extends(CarAnima,_super);function CarAnima(){return _super!==null&&_super.apply(this,arguments)||this}return CarAnima}(OpenAnima.CarAnimaStruct));OpenAnima.CarAnima=CarAnima})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var CrossAnima1Struct=(function(_super){__extends(CrossAnima1Struct,_super);function CrossAnima1Struct(){return _super.call(this)||this}CrossAnima1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","CrossAnima1"))};CrossAnima1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialog=(this.getChild("dialog"));this.m_t0=this.getTransition("t0")};CrossAnima1Struct.URL="ui://oyge7e0tboch1c";CrossAnima1Struct.DependPackages=["OpenAnima"];return CrossAnima1Struct}(fairygui.GComponent));OpenAnima.CrossAnima1Struct=CrossAnima1Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var CrossAnima1=(function(_super){__extends(CrossAnima1,_super);function CrossAnima1(){return _super!==null&&_super.apply(this,arguments)||this}CrossAnima1.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialog.text=Game.config.speak.getConfig(10003).speak};return CrossAnima1}(OpenAnima.CrossAnima1Struct));OpenAnima.CrossAnima1=CrossAnima1})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var CrossAnima2Struct=(function(_super){__extends(CrossAnima2Struct,_super);function CrossAnima2Struct(){return _super.call(this)||this}CrossAnima2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","CrossAnima2"))};CrossAnima2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialog=(this.getChild("dialog"));this.m_t0=this.getTransition("t0")};CrossAnima2Struct.URL="ui://oyge7e0tboch2a";CrossAnima2Struct.DependPackages=["OpenAnima"];return CrossAnima2Struct}(fairygui.GComponent));OpenAnima.CrossAnima2Struct=CrossAnima2Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var CrossAnima2=(function(_super){__extends(CrossAnima2,_super);function CrossAnima2(){return _super!==null&&_super.apply(this,arguments)||this}CrossAnima2.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialog.text=Game.config.speak.getConfig(10008).speak};return CrossAnima2}(OpenAnima.CrossAnima2Struct));OpenAnima.CrossAnima2=CrossAnima2})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var CrossAnima3Struct=(function(_super){__extends(CrossAnima3Struct,_super);function CrossAnima3Struct(){return _super.call(this)||this}CrossAnima3Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","CrossAnima3"))};CrossAnima3Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialog=(this.getChild("dialog"));this.m_t0=this.getTransition("t0")};CrossAnima3Struct.URL="ui://oyge7e0tboch2n";CrossAnima3Struct.DependPackages=["OpenAnima"];return CrossAnima3Struct}(fairygui.GComponent));OpenAnima.CrossAnima3Struct=CrossAnima3Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var CrossAnima3=(function(_super){__extends(CrossAnima3,_super);function CrossAnima3(){return _super!==null&&_super.apply(this,arguments)||this}CrossAnima3.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialog.text=Game.config.speak.getConfig(10015).speak};return CrossAnima3}(OpenAnima.CrossAnima3Struct));OpenAnima.CrossAnima3=CrossAnima3})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Effect_xuanzhuanlight01Struct=(function(_super){__extends(Effect_xuanzhuanlight01Struct,_super);function Effect_xuanzhuanlight01Struct(){return _super.call(this)||this}Effect_xuanzhuanlight01Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","Effect_xuanzhuanlight01"))};Effect_xuanzhuanlight01Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t12=this.getTransition("t12")};Effect_xuanzhuanlight01Struct.URL="ui://oyge7e0tboch2g";Effect_xuanzhuanlight01Struct.DependPackages=["OpenAnima"];return Effect_xuanzhuanlight01Struct}(fairygui.GComponent));OpenAnima.Effect_xuanzhuanlight01Struct=Effect_xuanzhuanlight01Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Effect_xuanzhuanlight01=(function(_super){__extends(Effect_xuanzhuanlight01,_super);function Effect_xuanzhuanlight01(){return _super!==null&&_super.apply(this,arguments)||this}return Effect_xuanzhuanlight01}(OpenAnima.Effect_xuanzhuanlight01Struct));OpenAnima.Effect_xuanzhuanlight01=Effect_xuanzhuanlight01})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Hand_kaimenStruct=(function(_super){__extends(Hand_kaimenStruct,_super);function Hand_kaimenStruct(){return _super.call(this)||this}Hand_kaimenStruct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","hand_kaimen"))};Hand_kaimenStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_hand_kaimen=this.getController("hand_kaimen")};Hand_kaimenStruct.URL="ui://oyge7e0tboch1q";Hand_kaimenStruct.DependPackages=["OpenAnima"];return Hand_kaimenStruct}(fairygui.GComponent));OpenAnima.Hand_kaimenStruct=Hand_kaimenStruct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Hand_kaimen=(function(_super){__extends(Hand_kaimen,_super);function Hand_kaimen(){return _super!==null&&_super.apply(this,arguments)||this}return Hand_kaimen}(OpenAnima.Hand_kaimenStruct));OpenAnima.Hand_kaimen=Hand_kaimen})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Hand_kaixiangStruct=(function(_super){__extends(Hand_kaixiangStruct,_super);function Hand_kaixiangStruct(){return _super.call(this)||this}Hand_kaixiangStruct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","hand_kaixiang"))};Hand_kaixiangStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_hand_kaixiang=this.getController("hand_kaixiang")};Hand_kaixiangStruct.URL="ui://oyge7e0tboch1l";Hand_kaixiangStruct.DependPackages=["OpenAnima"];return Hand_kaixiangStruct}(fairygui.GComponent));OpenAnima.Hand_kaixiangStruct=Hand_kaixiangStruct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Hand_kaixiang=(function(_super){__extends(Hand_kaixiang,_super);function Hand_kaixiang(){return _super!==null&&_super.apply(this,arguments)||this}return Hand_kaixiang}(OpenAnima.Hand_kaixiangStruct));OpenAnima.Hand_kaixiang=Hand_kaixiang})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Hand_kanxinStruct=(function(_super){__extends(Hand_kanxinStruct,_super);function Hand_kanxinStruct(){return _super.call(this)||this}Hand_kanxinStruct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","hand_kanxin"))};Hand_kanxinStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_hand_kanxin=this.getController("hand_kanxin")};Hand_kanxinStruct.URL="ui://oyge7e0tboch23";Hand_kanxinStruct.DependPackages=["OpenAnima"];return Hand_kanxinStruct}(fairygui.GComponent));OpenAnima.Hand_kanxinStruct=Hand_kanxinStruct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Hand_kanxin=(function(_super){__extends(Hand_kanxin,_super);function Hand_kanxin(){return _super!==null&&_super.apply(this,arguments)||this}return Hand_kanxin}(OpenAnima.Hand_kanxinStruct));OpenAnima.Hand_kanxin=Hand_kanxin})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Jingtou1Struct=(function(_super){__extends(Jingtou1Struct,_super);function Jingtou1Struct(){return _super.call(this)||this}Jingtou1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","jingtou1"))};Jingtou1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Jingtou1Struct.URL="ui://oyge7e0tboch2";Jingtou1Struct.DependPackages=["OpenAnima"];return Jingtou1Struct}(fairygui.GComponent));OpenAnima.Jingtou1Struct=Jingtou1Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Jingtou1=(function(_super){__extends(Jingtou1,_super);function Jingtou1(){return _super!==null&&_super.apply(this,arguments)||this}return Jingtou1}(OpenAnima.Jingtou1Struct));OpenAnima.Jingtou1=Jingtou1})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Jingtou2Struct=(function(_super){__extends(Jingtou2Struct,_super);function Jingtou2Struct(){return _super.call(this)||this}Jingtou2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","jingtou2"))};Jingtou2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_player=(this.getChild("player"));this.m_t0=this.getTransition("t0")};Jingtou2Struct.URL="ui://oyge7e0tbochq";Jingtou2Struct.DependPackages=["OpenAnima"];return Jingtou2Struct}(fairygui.GComponent));OpenAnima.Jingtou2Struct=Jingtou2Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Jingtou2=(function(_super){__extends(Jingtou2,_super);function Jingtou2(){return _super!==null&&_super.apply(this,arguments)||this}return Jingtou2}(OpenAnima.Jingtou2Struct));OpenAnima.Jingtou2=Jingtou2})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Jingtou3Struct=(function(_super){__extends(Jingtou3Struct,_super);function Jingtou3Struct(){return _super.call(this)||this}Jingtou3Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","jingtou3"))};Jingtou3Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_player=(this.getChild("player"))};Jingtou3Struct.URL="ui://oyge7e0tboch16";Jingtou3Struct.DependPackages=["OpenAnima"];return Jingtou3Struct}(fairygui.GComponent));OpenAnima.Jingtou3Struct=Jingtou3Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Jingtou3=(function(_super){__extends(Jingtou3,_super);function Jingtou3(){return _super!==null&&_super.apply(this,arguments)||this}return Jingtou3}(OpenAnima.Jingtou3Struct));OpenAnima.Jingtou3=Jingtou3})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Jingtou5Struct=(function(_super){__extends(Jingtou5Struct,_super);function Jingtou5Struct(){return _super.call(this)||this}Jingtou5Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","jingtou5"))};Jingtou5Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_hand=(this.getChild("hand"));this.m_t0=this.getTransition("t0")};Jingtou5Struct.URL="ui://oyge7e0tboch21";Jingtou5Struct.DependPackages=["OpenAnima"];return Jingtou5Struct}(fairygui.GComponent));OpenAnima.Jingtou5Struct=Jingtou5Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Jingtou5=(function(_super){__extends(Jingtou5,_super);function Jingtou5(){return _super!==null&&_super.apply(this,arguments)||this}return Jingtou5}(OpenAnima.Jingtou5Struct));OpenAnima.Jingtou5=Jingtou5})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Jingtou7Struct=(function(_super){__extends(Jingtou7Struct,_super);function Jingtou7Struct(){return _super.call(this)||this}Jingtou7Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","jingtou7"))};Jingtou7Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_player=(this.getChild("player"));this.m_t0=this.getTransition("t0")};Jingtou7Struct.URL="ui://oyge7e0tboch28";Jingtou7Struct.DependPackages=["OpenAnima"];return Jingtou7Struct}(fairygui.GComponent));OpenAnima.Jingtou7Struct=Jingtou7Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Jingtou7=(function(_super){__extends(Jingtou7,_super);function Jingtou7(){return _super!==null&&_super.apply(this,arguments)||this}return Jingtou7}(OpenAnima.Jingtou7Struct));OpenAnima.Jingtou7=Jingtou7})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var MenStruct=(function(_super){__extends(MenStruct,_super);function MenStruct(){return _super.call(this)||this}MenStruct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","men"))};MenStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_hand=(this.getChild("hand"))};MenStruct.URL="ui://oyge7e0tboch1o";MenStruct.DependPackages=["OpenAnima"];return MenStruct}(fairygui.GComponent));OpenAnima.MenStruct=MenStruct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Men=(function(_super){__extends(Men,_super);function Men(){return _super!==null&&_super.apply(this,arguments)||this}return Men}(OpenAnima.MenStruct));OpenAnima.Men=Men})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var OpenAnimaStruct=(function(_super){__extends(OpenAnimaStruct,_super);function OpenAnimaStruct(){return _super.call(this)||this}OpenAnimaStruct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","OpenAnima"))};OpenAnimaStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_anima=this.getController("c_anima");this.m_anima1=(this.getChild("anima1"));this.m_anima2=(this.getChild("anima2"));this.m_anima3=(this.getChild("anima3"));this.m_anima3_1=(this.getChild("anima3_1"));this.m_anima4=(this.getChild("anima4"));this.m_anima5=(this.getChild("anima5"));this.m_anima6=(this.getChild("anima6"));this.m_anima6_1=(this.getChild("anima6_1"));this.m_anima7=(this.getChild("anima7"));this.m_anima8=(this.getChild("anima8"));this.m_anima8_1=(this.getChild("anima8_1"));this.m_anima9=(this.getChild("anima9"))};OpenAnimaStruct.URL="ui://oyge7e0tboch0";OpenAnimaStruct.DependPackages=["OpenAnima","Fx"];return OpenAnimaStruct}(fairygui.GComponent));OpenAnima.OpenAnimaStruct=OpenAnimaStruct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima_1){var OpenAnima=(function(_super){__extends(OpenAnima,_super);function OpenAnima(){return _super!==null&&_super.apply(this,arguments)||this}return OpenAnima}(OpenAnima_1.OpenAnimaStruct));OpenAnima_1.OpenAnima=OpenAnima})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var PlayerStruct=(function(_super){__extends(PlayerStruct,_super);function PlayerStruct(){return _super.call(this)||this}PlayerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","Player"))};PlayerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_sex=this.getController("sex")};PlayerStruct.URL="ui://oyge7e0tbochr";PlayerStruct.DependPackages=["OpenAnima"];return PlayerStruct}(fairygui.GComponent));OpenAnima.PlayerStruct=PlayerStruct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Player=(function(_super){__extends(Player,_super);function Player(){return _super!==null&&_super.apply(this,arguments)||this}return Player}(OpenAnima.PlayerStruct));OpenAnima.Player=Player})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Player2Struct=(function(_super){__extends(Player2Struct,_super);function Player2Struct(){return _super.call(this)||this}Player2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","player2"))};Player2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_sex=this.getController("sex")};Player2Struct.URL="ui://oyge7e0tboch18";Player2Struct.DependPackages=["OpenAnima"];return Player2Struct}(fairygui.GComponent));OpenAnima.Player2Struct=Player2Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Player2=(function(_super){__extends(Player2,_super);function Player2(){return _super!==null&&_super.apply(this,arguments)||this}return Player2}(OpenAnima.Player2Struct));OpenAnima.Player2=Player2})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Player3Struct=(function(_super){__extends(Player3Struct,_super);function Player3Struct(){return _super.call(this)||this}Player3Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","player3"))};Player3Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_sex=this.getController("sex");this.m_t0=this.getTransition("t0")};Player3Struct.URL="ui://oyge7e0tboch2d";Player3Struct.DependPackages=["OpenAnima"];return Player3Struct}(fairygui.GComponent));OpenAnima.Player3Struct=Player3Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Player3=(function(_super){__extends(Player3,_super);function Player3(){return _super!==null&&_super.apply(this,arguments)||this}return Player3}(OpenAnima.Player3Struct));OpenAnima.Player3=Player3})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Player_ManStruct=(function(_super){__extends(Player_ManStruct,_super);function Player_ManStruct(){return _super.call(this)||this}Player_ManStruct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","Player_Man"))};Player_ManStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Player_ManStruct.URL="ui://oyge7e0tbochs";Player_ManStruct.DependPackages=["OpenAnima"];return Player_ManStruct}(fairygui.GComponent));OpenAnima.Player_ManStruct=Player_ManStruct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Player_Man=(function(_super){__extends(Player_Man,_super);function Player_Man(){return _super!==null&&_super.apply(this,arguments)||this}return Player_Man}(OpenAnima.Player_ManStruct));OpenAnima.Player_Man=Player_Man})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Player_man_handStruct=(function(_super){__extends(Player_man_handStruct,_super);function Player_man_handStruct(){return _super.call(this)||this}Player_man_handStruct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","player_man_hand"))};Player_man_handStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Player_man_handStruct.URL="ui://oyge7e0tbochu";Player_man_handStruct.DependPackages=["OpenAnima"];return Player_man_handStruct}(fairygui.GComponent));OpenAnima.Player_man_handStruct=Player_man_handStruct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Player_man_hand=(function(_super){__extends(Player_man_hand,_super);function Player_man_hand(){return _super!==null&&_super.apply(this,arguments)||this}return Player_man_hand}(OpenAnima.Player_man_handStruct));OpenAnima.Player_man_hand=Player_man_hand})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Player_WomenStruct=(function(_super){__extends(Player_WomenStruct,_super);function Player_WomenStruct(){return _super.call(this)||this}Player_WomenStruct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","Player_Women"))};Player_WomenStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t2=this.getTransition("t2")};Player_WomenStruct.URL="ui://oyge7e0tbochx";Player_WomenStruct.DependPackages=["OpenAnima"];return Player_WomenStruct}(fairygui.GComponent));OpenAnima.Player_WomenStruct=Player_WomenStruct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Player_Women=(function(_super){__extends(Player_Women,_super);function Player_Women(){return _super!==null&&_super.apply(this,arguments)||this}return Player_Women}(OpenAnima.Player_WomenStruct));OpenAnima.Player_Women=Player_Women})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Player_women_handStruct=(function(_super){__extends(Player_women_handStruct,_super);function Player_women_handStruct(){return _super.call(this)||this}Player_women_handStruct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","player_women_hand"))};Player_women_handStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};Player_women_handStruct.URL="ui://oyge7e0tbochz";Player_women_handStruct.DependPackages=["OpenAnima"];return Player_women_handStruct}(fairygui.GComponent));OpenAnima.Player_women_handStruct=Player_women_handStruct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Player_women_hand=(function(_super){__extends(Player_women_hand,_super);function Player_women_hand(){return _super!==null&&_super.apply(this,arguments)||this}return Player_women_hand}(OpenAnima.Player_women_handStruct));OpenAnima.Player_women_hand=Player_women_hand})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var TalkBoxStruct=(function(_super){__extends(TalkBoxStruct,_super);function TalkBoxStruct(){return _super.call(this)||this}TalkBoxStruct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","TalkBox"))};TalkBoxStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_position_arrow=this.getController("c_position_arrow");this.m_title=(this.getChild("title"))};TalkBoxStruct.URL="ui://oyge7e0tbochl";TalkBoxStruct.DependPackages=["OpenAnima"];return TalkBoxStruct}(fairygui.GLabel));OpenAnima.TalkBoxStruct=TalkBoxStruct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var TalkBox=(function(_super){__extends(TalkBox,_super);function TalkBox(){return _super!==null&&_super.apply(this,arguments)||this}return TalkBox}(OpenAnima.TalkBoxStruct));OpenAnima.TalkBox=TalkBox})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var TalkBox2Struct=(function(_super){__extends(TalkBox2Struct,_super);function TalkBox2Struct(){return _super.call(this)||this}TalkBox2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","TalkBox2"))};TalkBox2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_position_arrow=this.getController("c_position_arrow");this.m_title=(this.getChild("title"))};TalkBox2Struct.URL="ui://oyge7e0tboch2q";TalkBox2Struct.DependPackages=["OpenAnima"];return TalkBox2Struct}(fairygui.GLabel));OpenAnima.TalkBox2Struct=TalkBox2Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var TalkBox2=(function(_super){__extends(TalkBox2,_super);function TalkBox2(){return _super!==null&&_super.apply(this,arguments)||this}return TalkBox2}(OpenAnima.TalkBox2Struct));OpenAnima.TalkBox2=TalkBox2})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Xunhuan_lightStruct=(function(_super){__extends(Xunhuan_lightStruct,_super);function Xunhuan_lightStruct(){return _super.call(this)||this}Xunhuan_lightStruct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","xunhuan_light"))};Xunhuan_lightStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t05=this.getTransition("t05")};Xunhuan_lightStruct.URL="ui://oyge7e0tboch1i";Xunhuan_lightStruct.DependPackages=["OpenAnima"];return Xunhuan_lightStruct}(fairygui.GComponent));OpenAnima.Xunhuan_lightStruct=Xunhuan_lightStruct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Xunhuan_light=(function(_super){__extends(Xunhuan_light,_super);function Xunhuan_light(){return _super!==null&&_super.apply(this,arguments)||this}return Xunhuan_light}(OpenAnima.Xunhuan_lightStruct));OpenAnima.Xunhuan_light=Xunhuan_light})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Xunhuan_light002Struct=(function(_super){__extends(Xunhuan_light002Struct,_super);function Xunhuan_light002Struct(){return _super.call(this)||this}Xunhuan_light002Struct.createInstance=function(){return(fairygui.UIPackage.createObject("OpenAnima","xunhuan_light002"))};Xunhuan_light002Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t2=this.getTransition("t2")};Xunhuan_light002Struct.URL="ui://oyge7e0tboch1w";Xunhuan_light002Struct.DependPackages=["OpenAnima"];return Xunhuan_light002Struct}(fairygui.GComponent));OpenAnima.Xunhuan_light002Struct=Xunhuan_light002Struct})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var OpenAnima;(function(OpenAnima){var Xunhuan_light002=(function(_super){__extends(Xunhuan_light002,_super);function Xunhuan_light002(){return _super!==null&&_super.apply(this,arguments)||this}return Xunhuan_light002}(OpenAnima.Xunhuan_light002Struct));OpenAnima.Xunhuan_light002=Xunhuan_light002})(OpenAnima=fgui.OpenAnima||(fgui.OpenAnima={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var AwardsInfoItemtsStruct=(function(_super){__extends(AwardsInfoItemtsStruct,_super);function AwardsInfoItemtsStruct(){return _super.call(this)||this}AwardsInfoItemtsStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Oscar","AwardsInfoItem.ts"))};AwardsInfoItemtsStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_isSpecial=this.getController("isSpecial");this.m_title=(this.getChild("title"));this.m_time=(this.getChild("time"))};AwardsInfoItemtsStruct.URL="ui://spuqgpclyyljt";AwardsInfoItemtsStruct.DependPackages=["Oscar"];return AwardsInfoItemtsStruct}(fairygui.GButton));Oscar.AwardsInfoItemtsStruct=AwardsInfoItemtsStruct})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var AwardsInfoItemts=(function(_super){__extends(AwardsInfoItemts,_super);function AwardsInfoItemts(){return _super!==null&&_super.apply(this,arguments)||this}AwardsInfoItemts.prototype.Render=function(dailyEvent){this.dailyEvent=dailyEvent;this.m_title.text=this.dailyEvent.Name;this.m_time.text=this.dailyEvent.Time;this.m_isSpecial.setSelectedIndex(0)};return AwardsInfoItemts}(Oscar.AwardsInfoItemtsStruct));Oscar.AwardsInfoItemts=AwardsInfoItemts})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var AwardsTitleStruct=(function(_super){__extends(AwardsTitleStruct,_super);function AwardsTitleStruct(){return _super.call(this)||this}AwardsTitleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Oscar","AwardsTitle"))};AwardsTitleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_seletCup=this.getController("seletCup");this.m_ImgTitle=(this.getChild("ImgTitle"))};AwardsTitleStruct.URL="ui://spuqgpclenjf16";AwardsTitleStruct.DependPackages=["Oscar"];return AwardsTitleStruct}(fairygui.GComponent));Oscar.AwardsTitleStruct=AwardsTitleStruct})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var AwardsTitle=(function(_super){__extends(AwardsTitle,_super);function AwardsTitle(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(AwardsTitle.prototype,"Title",{set:function(type){switch(type){case Games.OscarAwardsType.Man:this.m_seletCup.setSelectedIndex(0);break;case Games.OscarAwardsType.Woman:this.m_seletCup.setSelectedIndex(1);break;case Games.OscarAwardsType.Art:this.m_seletCup.setSelectedIndex(2);break;case Games.OscarAwardsType.Perform:this.m_seletCup.setSelectedIndex(3);break;case Games.OscarAwardsType.PublicPraise:this.m_seletCup.setSelectedIndex(4);break;default:this.m_seletCup.setSelectedIndex(5);break}},enumerable:true,configurable:true});return AwardsTitle}(Oscar.AwardsTitleStruct));Oscar.AwardsTitle=AwardsTitle})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var BtnLeftStruct=(function(_super){__extends(BtnLeftStruct,_super);function BtnLeftStruct(){return _super.call(this)||this}BtnLeftStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Oscar","btnLeft"))};BtnLeftStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};BtnLeftStruct.URL="ui://spuqgpcln3vm1x";BtnLeftStruct.DependPackages=["Oscar"];return BtnLeftStruct}(fairygui.GButton));Oscar.BtnLeftStruct=BtnLeftStruct})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var BtnLeft=(function(_super){__extends(BtnLeft,_super);function BtnLeft(){return _super!==null&&_super.apply(this,arguments)||this}return BtnLeft}(Oscar.BtnLeftStruct));Oscar.BtnLeft=BtnLeft})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var BtnRightStruct=(function(_super){__extends(BtnRightStruct,_super);function BtnRightStruct(){return _super.call(this)||this}BtnRightStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Oscar","btnRight"))};BtnRightStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};BtnRightStruct.URL="ui://spuqgpcln3vm1y";BtnRightStruct.DependPackages=["Oscar"];return BtnRightStruct}(fairygui.GButton));Oscar.BtnRightStruct=BtnRightStruct})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var BtnRight=(function(_super){__extends(BtnRight,_super);function BtnRight(){return _super!==null&&_super.apply(this,arguments)||this}return BtnRight}(Oscar.BtnRightStruct));Oscar.BtnRight=BtnRight})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarAwardsListPanelStruct=(function(_super){__extends(OscarAwardsListPanelStruct,_super);function OscarAwardsListPanelStruct(){return _super.call(this)||this}OscarAwardsListPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Oscar","OscarAwardsListPanel"))};OscarAwardsListPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_checkDay=(this.getChild("checkDay"));this.m_btnClose=(this.getChild("btnClose"))};OscarAwardsListPanelStruct.URL="ui://spuqgpclyylj0";OscarAwardsListPanelStruct.DependPackages=["Oscar","Common"];return OscarAwardsListPanelStruct}(fairygui.GComponent));Oscar.OscarAwardsListPanelStruct=OscarAwardsListPanelStruct})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarAwardsListPanel=(function(_super){__extends(OscarAwardsListPanel,_super);function OscarAwardsListPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dailyEventList=[];return _this}OscarAwardsListPanel.prototype.onWindowInited=function(){this.m_checkDay.SetHandler(this,this.OnDayChange);this.m_btnClose.onClick(this,this.OnCloseClick);this.m_list.itemRenderer=new Handler(this,this.RenderItem,null,false);this.m_list.setVirtual();this.m_list.on(fairygui.Events.CLICK_ITEM,this,this.OnItemClick)};OscarAwardsListPanel.prototype.onWindowOpen=function(arg){var oscType=arg;switch(oscType){case Games.OscarSubEnum.OscarReward:console.log("OscarReward");this.moduleWindow.openSubwindowByIndex(Games.OscarSubEnum.OscarReward,false);break;case Games.OscarSubEnum.OscarShow:console.log("OscarShow");this.moduleWindow.openSubwindowByIndex(Games.OscarSubEnum.OscarShow,false);break;default:this.m_checkDay.selected=false;this.UpdateView();break}};OscarAwardsListPanel.prototype.UpdateView=function(){if(this.m_checkDay.selected){this.m_checkDay.title=Games.TEXT.Today;this.dailyEventList=Game.moduleModel.oscar.OscarDailyEventList}else{this.m_checkDay.title=Games.TEXT.Yestoday;this.dailyEventList=Game.moduleModel.oscar.OscarYesterdayEventList}this.m_list.numItems=this.dailyEventList.length};OscarAwardsListPanel.prototype.RenderItem=function(index,obj){var data=this.dailyEventList[index];obj.Render(data)};OscarAwardsListPanel.prototype.OnItemClick=function(obj){var data=obj.dailyEvent;if(data.hasData&&data.type==Games.DailyEventType.Awards){this.moduleWindow.openSubwindowByIndex(Games.OscarSubEnum.OscarShow,false)}};OscarAwardsListPanel.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.DailyEvent,this.UpdateView,this)};OscarAwardsListPanel.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.DailyEvent,this.UpdateView,this)};OscarAwardsListPanel.prototype.OnCloseClick=function(){this.moduleWindow.menuClose()};OscarAwardsListPanel.prototype.OnDayChange=function(){this.UpdateView()};return OscarAwardsListPanel}(Oscar.OscarAwardsListPanelStruct));Oscar.OscarAwardsListPanel=OscarAwardsListPanel})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarCandidateItemStruct=(function(_super){__extends(OscarCandidateItemStruct,_super);function OscarCandidateItemStruct(){return _super.call(this)||this}OscarCandidateItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Oscar","OscarCandidateItem"))};OscarCandidateItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_showLight=this.getController("showLight");this.m_icon=(this.getChild("icon"));this.m_name=(this.getChild("name"));this.m_title=(this.getChild("title"))};OscarCandidateItemStruct.URL="ui://spuqgpclyyljv";OscarCandidateItemStruct.DependPackages=["Oscar","Common"];return OscarCandidateItemStruct}(fairygui.GButton));Oscar.OscarCandidateItemStruct=OscarCandidateItemStruct})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarCandidateItem=(function(_super){__extends(OscarCandidateItem,_super);function OscarCandidateItem(){return _super!==null&&_super.apply(this,arguments)||this}OscarCandidateItem.prototype.Render=function(data,type){if(data==null){return}switch(type){case Games.OscarAwardsType.Art:case Games.OscarAwardsType.Perform:case Games.OscarAwardsType.PublicPraise:this.icon=Game.config.story.GetPoster(data.id);break;case Games.OscarAwardsType.Man:case Games.OscarAwardsType.Woman:this.icon=Game.config.actor.GetBodyIconUrl(data.id);break;default:break}this.title="";this.m_name.text=""};return OscarCandidateItem}(Oscar.OscarCandidateItemStruct));Oscar.OscarCandidateItem=OscarCandidateItem})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarCupItemStruct=(function(_super){__extends(OscarCupItemStruct,_super);function OscarCupItemStruct(){return _super.call(this)||this}OscarCupItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Oscar","OscarCupItem"))};OscarCupItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};OscarCupItemStruct.URL="ui://spuqgpclenjf10";OscarCupItemStruct.DependPackages=["Oscar"];return OscarCupItemStruct}(fairygui.GButton));Oscar.OscarCupItemStruct=OscarCupItemStruct})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarCupItem=(function(_super){__extends(OscarCupItem,_super);function OscarCupItem(){return _super!==null&&_super.apply(this,arguments)||this}return OscarCupItem}(Oscar.OscarCupItemStruct));Oscar.OscarCupItem=OscarCupItem})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarDailyCheckboxStruct=(function(_super){__extends(OscarDailyCheckboxStruct,_super);function OscarDailyCheckboxStruct(){return _super.call(this)||this}OscarDailyCheckboxStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Oscar","OscarDailyCheckbox"))};OscarDailyCheckboxStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=this.getController("state");this.m_title=(this.getChild("title"));this.m_btnLeft=(this.getChild("btnLeft"));this.m_btnRight=(this.getChild("btnRight"))};OscarDailyCheckboxStruct.URL="ui://spuqgpclyyljb";OscarDailyCheckboxStruct.DependPackages=["Oscar"];return OscarDailyCheckboxStruct}(fairygui.GLabel));Oscar.OscarDailyCheckboxStruct=OscarDailyCheckboxStruct})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarDailyCheckbox=(function(_super){__extends(OscarDailyCheckbox,_super);function OscarDailyCheckbox(){return _super!==null&&_super.apply(this,arguments)||this}OscarDailyCheckbox.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnLeft.onClick(this,this.OnLeftClick);this.m_btnRight.onClick(this,this.OnRightClick)};OscarDailyCheckbox.prototype.SetHandler=function(caller,func){this.changehandler=Handler.create(caller,func,null,false)};Object.defineProperty(OscarDailyCheckbox.prototype,"selected",{get:function(){return this.m_state.selectedIndex==1},set:function(isSelect){this.m_state.setSelectedIndex(isSelect?1:0)},enumerable:true,configurable:true});OscarDailyCheckbox.prototype.OnLeftClick=function(){this.selected=false;this.CallChangeHandler()};OscarDailyCheckbox.prototype.OnRightClick=function(){this.selected=true;this.CallChangeHandler()};OscarDailyCheckbox.prototype.CallChangeHandler=function(){if(this.changehandler){this.changehandler.run()}};return OscarDailyCheckbox}(Oscar.OscarDailyCheckboxStruct));Oscar.OscarDailyCheckbox=OscarDailyCheckbox})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarRewardItemStruct=(function(_super){__extends(OscarRewardItemStruct,_super);function OscarRewardItemStruct(){return _super.call(this)||this}OscarRewardItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Oscar","OscarRewardItem"))};OscarRewardItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_rewardState=this.getController("rewardState");this.m_isNew=this.getController("isNew");this.m_name=(this.getChild("name"));this.m_title=(this.getChild("title"));this.m_info=(this.getChild("info"));this.m_tip=(this.getChild("tip"));this.m_list=(this.getChild("list"));this.m_btnReward=(this.getChild("btnReward"))};OscarRewardItemStruct.URL="ui://spuqgpclyyljr";OscarRewardItemStruct.DependPackages=["Oscar","Common","WarMovie"];return OscarRewardItemStruct}(fairygui.GComponent));Oscar.OscarRewardItemStruct=OscarRewardItemStruct})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarRewardItem=(function(_super){__extends(OscarRewardItem,_super);function OscarRewardItem(){return _super!==null&&_super.apply(this,arguments)||this}OscarRewardItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.itemRenderer=new Handler(this,this.RenderItem,null,false);this.m_btnReward.onClick(this,this.OnRewardClick)};OscarRewardItem.prototype.Render=function(oscarRewardData){this.oscarRewardData=oscarRewardData;this.m_name.text=this.oscarRewardData.name;var title=this.oscarRewardData.title;this.m_title.text=title;this.m_info.text=this.oscarRewardData.info;this.m_isNew.setSelectedIndex(this.oscarRewardData.IsHistoryBest?1:0);if(this.oscarRewardData.canReward){this.m_list.numItems=this.oscarRewardData.RewardList.length;if(this.oscarRewardData.hasGetReward){this.m_rewardState.setSelectedIndex(2)}else{this.m_rewardState.setSelectedIndex(1)}}else{this.m_rewardState.setSelectedIndex(0);this.m_tip.text=this.oscarRewardData.tip}};OscarRewardItem.prototype.RenderItem=function(index,obj){var data=this.oscarRewardData.RewardList[index];obj.m_num.text=data.itemNumTxt;obj.icon=data.itemIconUrl;obj.m_star.starNum=data.itemStar;obj.PopupInfo=data.itemId};OscarRewardItem.prototype.OnRewardClick=function(){Game.protosender.rank.GetOscarReward(this.oscarRewardData.type)};return OscarRewardItem}(Oscar.OscarRewardItemStruct));Oscar.OscarRewardItem=OscarRewardItem})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarRewardPanelStruct=(function(_super){__extends(OscarRewardPanelStruct,_super);function OscarRewardPanelStruct(){return _super.call(this)||this}OscarRewardPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Oscar","OscarRewardPanel"))};OscarRewardPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_list=(this.getChild("list"));this.m_btnConfirm=(this.getChild("btnConfirm"))};OscarRewardPanelStruct.URL="ui://spuqgpclyylj1";OscarRewardPanelStruct.DependPackages=["Oscar","Common"];return OscarRewardPanelStruct}(fairygui.GComponent));Oscar.OscarRewardPanelStruct=OscarRewardPanelStruct})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarRewardPanel=(function(_super){__extends(OscarRewardPanel,_super);function OscarRewardPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.listData=[];return _this}OscarRewardPanel.prototype.onWindowInited=function(){this.m_btnConfirm.onClick(this,this.OnConfirm);this.m_list.itemRenderer=new Handler(this,this.RenderItem,null,false);this.m_list.setVirtual()};OscarRewardPanel.prototype.onWindowOpen=function(arg){this.UpdateView()};OscarRewardPanel.prototype.UpdateView=function(){this.listData=Game.moduleModel.oscar.OscarRewardList;this.m_list.numItems=this.listData.length;this.m_btnConfirm.visible=Game.moduleModel.oscar.IsFinishReward};OscarRewardPanel.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.rank_GetOscarReward,this.UpdateView,this);Game.protoOkEvent.add(ProtoEventKey.rank_GetOscarData,this.UpdateView,this);Game.protoOkEvent.add(ProtoEventKey.RankListData,this.UpdateView,this)};OscarRewardPanel.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.rank_GetOscarReward,this.UpdateView,this);Game.protoOkEvent.remove(ProtoEventKey.rank_GetOscarData,this.UpdateView,this);Game.protoOkEvent.remove(ProtoEventKey.RankListData,this.UpdateView,this)};OscarRewardPanel.prototype.RenderItem=function(index,obj){var data=this.listData[index];obj.Render(data)};OscarRewardPanel.prototype.OnConfirm=function(){this.OnCloseClick()};OscarRewardPanel.prototype.OnCloseClick=function(){Game.event.dispatch(GameEventKey.PopupPanel);this.moduleWindow.closeSelf();var mainWindow=this.moduleWindow.mainWindow;mainWindow.conent.UpdateView()};return OscarRewardPanel}(Oscar.OscarRewardPanelStruct));Oscar.OscarRewardPanel=OscarRewardPanel})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarShowFrontViewStruct=(function(_super){__extends(OscarShowFrontViewStruct,_super);function OscarShowFrontViewStruct(){return _super.call(this)||this}OscarShowFrontViewStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Oscar","OscarShowFrontView"))};OscarShowFrontViewStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_seletCup=this.getController("seletCup");this.m_buttonState=this.getController("buttonState");this.m_listOscarCup=(this.getChild("listOscarCup"));this.m_title=(this.getChild("title"));this.m_name=(this.getChild("name"));this.m_btnLeft=(this.getChild("btnLeft"));this.m_btnRight=(this.getChild("btnRight"));this.m_awardsTitle=(this.getChild("awardsTitle"));this.m_btnCongra=(this.getChild("btnCongra"));this.m_btnReward=(this.getChild("btnReward"))};OscarShowFrontViewStruct.URL="ui://spuqgpclenjfz";OscarShowFrontViewStruct.DependPackages=["Oscar","Common"];return OscarShowFrontViewStruct}(fairygui.GComponent));Oscar.OscarShowFrontViewStruct=OscarShowFrontViewStruct})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarShowFrontView=(function(_super){__extends(OscarShowFrontView,_super);function OscarShowFrontView(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.selectIndex=0;_this.finishIndex=-1;_this.currentIndex=0;return _this}OscarShowFrontView.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_listOscarCup.itemRenderer=new Handler(this,this.RenderItem,null,false);this.m_btnCongra.onClick(this,this.OnBtnCongraClick);this.m_btnReward.onClick(this,this.OnBtnRewardClick);this.m_btnRight.onClick(this,this.OnBtnRightClick);this.m_btnLeft.onClick(this,this.OnBtnLeftClick)};OscarShowFrontView.prototype.Show=function(){this.selectIndex=0;this.finishIndex=-1;this.currentIndex=0;this.UpdateView()};OscarShowFrontView.prototype.Hide=function(){};OscarShowFrontView.prototype.Next=function(index){if(index<0){index=0}if(index>4){index=4}this.currentIndex=index;this.Selected=this.currentIndex;this.finishIndex=this.currentIndex-1};OscarShowFrontView.prototype.Finish=function(){this.finishIndex=this.selectIndex;this.UpdateInfo()};OscarShowFrontView.prototype.UpdateView=function(){this.oscarAwardsList=Game.moduleModel.oscar.OscarAwardsList;this.m_listOscarCup.numItems=this.oscarAwardsList.length;if(this.selectIndex==null){this.Selected=0}else{this.UpdateInfo()}};Object.defineProperty(OscarShowFrontView.prototype,"Selected",{set:function(index){if(index>4){index=4}if(index<0){index=0}this.selectIndex=index;this.UpdateListSelect();this.UpdateInfo()},enumerable:true,configurable:true});OscarShowFrontView.prototype.UpdateListSelect=function(){this.m_listOscarCup.selectedIndex=this.selectIndex;for(var index=0;index<this.m_listOscarCup.numChildren;index++){var item=this.m_listOscarCup.getChildAt(index);item.enabled=this.currentIndex>=index}};OscarShowFrontView.prototype.UpdateInfo=function(){var data=this.oscarAwardsList[this.selectIndex];this.m_seletCup.setSelectedIndex(this.selectIndex);this.m_btnLeft.enabled=this.selectIndex>0;this.m_btnRight.enabled=this.selectIndex<this.currentIndex;if(this.selectIndex>this.finishIndex){this.m_title.text="???";this.m_name.text="";this.ButtonState=0}else{if(data&&data.winner){this.m_title.text=data.winner.name;this.m_name.text=data.winner.playerName;if(data.winner.userId==User.account.userId){this.ButtonState=2}else{this.ButtonState=1}}else{this.m_title.text="";this.m_name.text="";this.ButtonState=0}}};Object.defineProperty(OscarShowFrontView.prototype,"ButtonState",{set:function(state){var data=this.oscarAwardsList[this.selectIndex];switch(state){case 0:this.m_buttonState.setSelectedIndex(0);break;case 1:this.m_buttonState.setSelectedIndex(1);this.m_btnCongra.enabled=!Game.moduleModel.oscar.HasGetReward(data.type);break;case 2:this.m_buttonState.setSelectedIndex(2);this.m_btnReward.enabled=!Game.moduleModel.oscar.HasGetReward(data.type);break;default:break}},enumerable:true,configurable:true});OscarShowFrontView.prototype.RenderItem=function(index,obj){};OscarShowFrontView.prototype.OnBtnCongraClick=function(){var data=this.oscarAwardsList[this.selectIndex];Game.protosender.rank.GetOscarReward(data.type)};OscarShowFrontView.prototype.OnBtnRewardClick=function(){var data=this.oscarAwardsList[this.selectIndex];Game.protosender.rank.GetOscarReward(data.type)};OscarShowFrontView.prototype.OnBtnRightClick=function(){if(this.selectIndex>=this.currentIndex){return}this.Selected=this.selectIndex+1};OscarShowFrontView.prototype.OnBtnLeftClick=function(){if(this.selectIndex<=0){return}this.Selected=this.selectIndex-1};return OscarShowFrontView}(Oscar.OscarShowFrontViewStruct));Oscar.OscarShowFrontView=OscarShowFrontView})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarShowPanelStruct=(function(_super){__extends(OscarShowPanelStruct,_super);function OscarShowPanelStruct(){return _super.call(this)||this}OscarShowPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Oscar","OscarShowPanel"))};OscarShowPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_isFinish=this.getController("isFinish");this.m_listCandidate=(this.getChild("listCandidate"));this.m_txtTime=(this.getChild("txtTime"));this.m_title=(this.getChild("title"));this.m_animContainer=(this.getChild("animContainer"));this.m_winnerItem=(this.getChild("winnerItem"));this.m_danmu=(this.getChild("danmu"));this.m_frontView=(this.getChild("frontView"));this.m_input=(this.getChild("input"));this.m_btnSend=(this.getChild("btnSend"));this.m_btnNext=(this.getChild("btnNext"));this.m_btnClose=(this.getChild("btnClose"));this.m_showWinner=(this.getChild("showWinner"));this.m_aniWinner=this.getTransition("aniWinner")};OscarShowPanelStruct.URL="ui://spuqgpclyylj2";OscarShowPanelStruct.DependPackages=["Oscar","PfSkin","Common","Fx"];return OscarShowPanelStruct}(fairygui.GComponent));Oscar.OscarShowPanelStruct=OscarShowPanelStruct})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarShowPanel=(function(_super){__extends(OscarShowPanel,_super);function OscarShowPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.currentAwards=-1;_this.midCandidateIndex=2;_this.delayCandidateShow=500;_this.currentCandidate=2;_this.lastNextTime=0;return _this}OscarShowPanel.prototype.onWindowInited=function(){this.m_btnNext.onClick(this,this.OnNextClick);this.m_btnSend.onClick(this,this.OnSendClick);this.m_btnClose.onClick(this,this.OnCloseClick);this.m_listCandidate.itemRenderer=new Handler(this,this.RenderCandidateItem,null,false);this.m_animContainer.m_oscarCard.asCom.addChild(this.m_listCandidate);this.m_listCandidate.setPivot(0,0);this.m_animContainer.m_oscarCard.asCom.addChild(this.m_winnerItem);this.m_winnerItem.setPivot(0.5,0.5);this.m_showWinner.visible=false};OscarShowPanel.prototype.onWindowOpen=function(arg){this.currentAwards=-1;this.UpdateView();this.m_isFinish.setSelectedIndex(0);this.m_btnNext.visible=false;this.m_input.text="";Game.protosender.Danmu.get(Game.moduleModel.rank.LastStreetId,0);if(this.oscarAnim==null){this.oscarAnim=Game.stageManager.oscar.mainScene.mainView;Game.stageManager.oscar.isActive=true;this.oscarAnim.showFor(this.m_animContainer.m_oscarAvatar.asCom,this)}else{this.m_btnNext.visible=true;this.oscarAnim.reStartShow()}};OscarShowPanel.prototype.UpdateView=function(){this.oscarAwardsList=Game.moduleModel.oscar.OscarAwardsList;this.m_txtTime.text=Games.TEXT.OscarTitle.format(Game.moduleModel.street.currentStreetData.Name,Game.moduleModel.oscar.LastOscarDay);this.m_frontView.UpdateView()};OscarShowPanel.prototype.StartOscar=function(){var _this=this;Game.story.triggerPlayStoryByType(Games.StoryTriggerType.OpenOscar,1,Handler.create(null,function(){_this.currentAwards=-1;_this.NextPrize()}),true)};OscarShowPanel.prototype.ShowNextPrizeUI=function(){this.m_btnNext.visible=true};OscarShowPanel.prototype.NextPrize=function(){this.HideCandidate();this.currentAwards++;this.UpdateView();if(this.oscarAwardsList.length<=(this.currentAwards)){this.OnFinish();return}var awardsData=this.oscarAwardsList[this.currentAwards];if(awardsData){this.StartPrize(awardsData)}else{console.log("奥斯卡奖项数据为空，ID："+this.currentAwards);this.OnFinish()}};OscarShowPanel.prototype.StartPrize=function(awards){var danmuList=Game.moduleModel.oscar.GetDanmu(this.currentAwards+1);this.m_danmu.AddDanmuList(danmuList);this.AniStartPrize(awards);this.m_frontView.Next(this.currentAwards);if(awards.listCandidate==null||awards.listCandidate.length==0){return}this.m_listCandidate.numItems=awards.listCandidate.length;this.currentCandidate=Math.ceil((awards.listCandidate.length-1)/2);this.midCandidateIndex=Math.ceil((awards.listCandidate.length-1)/2);Laya.timer.loop(this.delayCandidateShow,this,this.LoopShowCandidate)};OscarShowPanel.prototype.LoopShowCandidate=function(){if(this.currentCandidate>=this.m_listCandidate.numChildren||this.currentCandidate<0){Laya.timer.clear(this,this.LoopShowCandidate);return}var obj=this.m_listCandidate.getChildAt(this.currentCandidate);if(obj==null){Laya.timer.clear(this,this.LoopShowCandidate);return}obj.setScale(0,0);var ss=1;Laya.Tween.to(obj,{scaleX:ss,scaleY:ss},this.delayCandidateShow);var d=this.midCandidateIndex-this.currentCandidate;if(d<=0){this.currentCandidate=this.midCandidateIndex+d-1}else{this.currentCandidate=this.midCandidateIndex+d}};OscarShowPanel.prototype.OnPrizeSelect=function(){Laya.timer.loop(100,this,this.LoopSelectCandidateItem)};OscarShowPanel.prototype.LoopSelectCandidateItem=function(){Game.sound.playSound(SoundKey.MM10_AwardSwitching);var select=this.m_listCandidate.selectedIndex+1;if(select>=this.m_listCandidate.numItems){this.m_listCandidate.selectNone();Laya.timer.clear(this,this.LoopSelectCandidateItem);this.ShowWinner();return}this.m_listCandidate.selectedIndex=select};OscarShowPanel.prototype.OnPrize=function(){var oscarData=this.oscarAwardsList[this.currentAwards];var prizeIndex=oscarData.winnerIndex;this.RenderCandidateItem(oscarData.winnerIndex,this.m_winnerItem);this.m_winnerItem.visible=true;this.m_winnerItem.y=384;this.m_winnerItem.setScale(1.8,1.8);this.m_showWinner.Hide();Laya.Tween.to(this.m_winnerItem,{y:61,scaleX:1.2,scaleY:1.2},this.delayCandidateShow);var cnt=this.m_listCandidate.numChildren;for(var i=0;i<cnt;i++){var obj=this.m_listCandidate.getChildAt(i);Laya.Tween.to(obj,{scaleX:0,scaleY:0},this.delayCandidateShow)}};OscarShowPanel.prototype.ShowWinner=function(){var _this=this;if(this.oscarAwardsList.length<=this.currentAwards){this.OnFinish();return}var oscarData=this.oscarAwardsList[this.currentAwards];var prizeIndex=oscarData.winnerIndex;var winner=oscarData.winner;if(winner==null){return}this.AniWinner(winner);this.m_frontView.Finish();this.m_showWinner.Open(oscarData);setTimeout(function(){_this.OnPrize()},1000)};OscarShowPanel.prototype.HideCandidate=function(){Laya.timer.clear(this,this.LoopShowCandidate);var cnt=this.m_listCandidate.numChildren;for(var i=0;i<cnt;i++){var obj=this.m_listCandidate.getChildAt(i);obj.setScale(0,0);Laya.Tween.to(obj,{scaleX:0,scaleY:0},this.delayCandidateShow)}this.m_winnerItem.visible=false};OscarShowPanel.prototype.FinishPrize=function(){this.m_frontView.Finish();this.NextPrize()};OscarShowPanel.prototype.OnFinish=function(){this.m_btnNext.visible=false;this.AniFinish();this.HideCandidate();this.m_danmu.Hide()};OscarShowPanel.prototype.RenderCandidateItem=function(index,obj){obj.setPivot(0.5,0.5);obj.setScale(0,0);var awardsData=this.oscarAwardsList[this.currentAwards];var data=awardsData.listCandidate[index];obj.Render(data,awardsData.type)};OscarShowPanel.prototype.OnNextClick=function(){if(Game.time.serverSeconds-this.lastNextTime>=2){this.lastNextTime=Game.time.serverSeconds;this.FinishPrize()}};OscarShowPanel.prototype.OnSendClick=function(){var msg=this.m_input.text;if(validateDanmu(msg,4,100)){msg=msg+(this.currentAwards+1);Game.protosender.Danmu.set(Game.moduleModel.rank.LastStreetId,msg)}};OscarShowPanel.prototype.OnCloseClick=function(){if(this.oscarAnim){Game.stageManager.oscar.isActive=false;this.oscarAnim.dispose();this.oscarAnim=null}this.moduleWindow.mainWindow.menuClose()};OscarShowPanel.prototype.onWindowShow=function(){Game.sound.playMusic(SoundKey.MM_BGM_Award);this.m_danmu.Show();this.m_frontView.Show();Game.protoOkEvent.add(ProtoEventKey.Danmu_get,this.OnDanmuGet,this);Game.protoOkEvent.add(ProtoEventKey.Danmu_set,this.OnDanmuSend,this);Game.protoOkEvent.add(ProtoEventKey.rank_GetOscarReward,this.OnGetReward,this)};OscarShowPanel.prototype.onWindowHide=function(){Game.sound.playMusic(SoundKey.MM_BGM_Cinema);this.m_danmu.Hide();this.m_frontView.Hide();if(this.oscarAnim){this.oscarAnim.dispose();this.oscarAnim=null}Game.protoOkEvent.remove(ProtoEventKey.Danmu_get,this.OnDanmuGet,this);Game.protoOkEvent.remove(ProtoEventKey.Danmu_set,this.OnDanmuSend,this);Game.protoOkEvent.remove(ProtoEventKey.rank_GetOscarReward,this.OnGetReward,this)};OscarShowPanel.prototype.OnDanmuGet=function(){var danmuList=Game.moduleModel.oscar.GetDanmu(this.currentAwards+1);this.m_danmu.AddDanmuList(danmuList)};OscarShowPanel.prototype.OnDanmuSend=function(){var _this=this;var msg=this.m_input.text;var danmu=Games.DanmuData.Create(msg,this.currentAwards+1);this.m_danmu.AddDanmu(danmu);this.m_input.text="";this.m_btnSend.enabled=false;setTimeout(function(){_this.m_btnSend.enabled=true},5*1000)};OscarShowPanel.prototype.OnGetReward=function(){this.UpdateView()};OscarShowPanel.prototype.AniStartPrize=function(arg){this.oscarAnim.startTurnShow(arg)};OscarShowPanel.prototype.AniWinner=function(arg){this.oscarAnim.setWinner(arg)};OscarShowPanel.prototype.AniFinish=function(){this.oscarAnim.endAllPrize()};OscarShowPanel.prototype.AniStart=function(){this.StartOscar()};OscarShowPanel.prototype.AniSelectCandidtate=function(){this.OnPrizeSelect()};OscarShowPanel.prototype.AniFinishPrize=function(){this.FinishPrize()};OscarShowPanel.prototype.showOscarReward=function(){this.oscarAnim.endShow();this.m_isFinish.setSelectedIndex(1);Game.story.triggerPlayStoryByType(Games.StoryTriggerType.OpenOscar,2);this.moduleWindow.mainWindow.openSubwindowByIndex(Games.OscarSubEnum.OscarReward,true)};return OscarShowPanel}(Oscar.OscarShowPanelStruct));Oscar.OscarShowPanel=OscarShowPanel})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarShowWinnerStruct=(function(_super){__extends(OscarShowWinnerStruct,_super);function OscarShowWinnerStruct(){return _super.call(this)||this}OscarShowWinnerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Oscar","OscarShowWinner"))};OscarShowWinnerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_name=(this.getChild("name"));this.m_title=(this.getChild("title"));this.m_candidate=(this.getChild("candidate"));this.m_awardsTitle=(this.getChild("awardsTitle"))};OscarShowWinnerStruct.URL="ui://spuqgpclyylju";OscarShowWinnerStruct.DependPackages=["Oscar","Fx"];return OscarShowWinnerStruct}(fairygui.GComponent));Oscar.OscarShowWinnerStruct=OscarShowWinnerStruct})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Oscar;(function(Oscar){var OscarShowWinner=(function(_super){__extends(OscarShowWinner,_super);function OscarShowWinner(){return _super!==null&&_super.apply(this,arguments)||this}OscarShowWinner.prototype.Open=function(data){Game.sound.playSound(SoundKey.MM35_AwardResults);this.visible=true;this.m_awardsTitle.Title=data.type;this.m_candidate.Render(data.winner,data.type);this.m_title.text=data.winner.name;this.m_name.text=data.winner.playerName};OscarShowWinner.prototype.Hide=function(){this.visible=false};return OscarShowWinner}(Oscar.OscarShowWinnerStruct));Oscar.OscarShowWinner=OscarShowWinner})(Oscar=fgui.Oscar||(fgui.Oscar={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ActionContainerStruct=(function(_super){__extends(ActionContainerStruct,_super);function ActionContainerStruct(){return _super.call(this)||this}ActionContainerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ActionContainer"))};ActionContainerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};ActionContainerStruct.URL="ui://s33x8418gjpxt24j";ActionContainerStruct.DependPackages=["PfSkin"];return ActionContainerStruct}(fairygui.GComponent));PfSkin.ActionContainerStruct=ActionContainerStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ActionContainer=(function(_super){__extends(ActionContainer,_super);function ActionContainer(){return _super!==null&&_super.apply(this,arguments)||this}return ActionContainer}(PfSkin.ActionContainerStruct));PfSkin.ActionContainer=ActionContainer})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ActorDetailUIStruct=(function(_super){__extends(ActorDetailUIStruct,_super);function ActorDetailUIStruct(){return _super.call(this)||this}ActorDetailUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ActorDetailUI"))};ActorDetailUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_aName=(this.getChild("aName"));this.m_starlist=(this.getChild("starlist"));this.m_sex=(this.getChild("sex"));this.m_contory=(this.getChild("contory"));this.m_biaoqian1=(this.getChild("biaoqian1"));this.m_biaoqian2=(this.getChild("biaoqian2"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_content=(this.getChild("content"))};ActorDetailUIStruct.URL="ui://s33x8418jazc1kz";ActorDetailUIStruct.DependPackages=["PfSkin","Common"];return ActorDetailUIStruct}(fairygui.GComponent));PfSkin.ActorDetailUIStruct=ActorDetailUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ActorDetailUI=(function(_super){__extends(ActorDetailUI,_super);function ActorDetailUI(){return _super!==null&&_super.apply(this,arguments)||this}ActorDetailUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};ActorDetailUI.prototype.updateView=function(id){var _this=this;this.config=Game.config.actor.getConfig(id);if(Game.moduleModel.actor.hasActor(id)){this.m_aName.text=Game.moduleModel.actor.getActor(id).name}else{this.m_aName.text=this.config.name}this.m_starlist.itemRenderer=Handler.create(this,function(index,item){item.icon=_this.config.starUrl},null,false);this.m_starlist.numItems=this.config.starNum;this.m_icon.url=Game.config.avatar.getConfig(this.config.avatar).bodyIconUrl;this.m_sex.url=Game.config.avatar.getConfig(Game.config.property.getConfig(this.config.sex).icon).iconUrl;this.m_contory.url=Game.config.avatar.getConfig(Game.config.property.getConfig(this.config.country).icon).iconUrl;this.m_biaoqian1.icon=Game.config.property.getConfig(this.config.age_type).iconUrl;this.m_biaoqian2.icon=Game.config.property.getConfig(this.config.show_type).iconUrl;this.m_content.text=this.config.tips};return ActorDetailUI}(PfSkin.ActorDetailUIStruct));PfSkin.ActorDetailUI=ActorDetailUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ActorExperciseItemStruct=(function(_super){__extends(ActorExperciseItemStruct,_super);function ActorExperciseItemStruct(){return _super.call(this)||this}ActorExperciseItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ActorExperciseItem"))};ActorExperciseItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=this.getController("state");this.m_button=this.getController("button");this.m_selectType=this.getController("selectType");this.m_icon=(this.getChild("icon"));this.m_starList=(this.getChild("starList"));this.m_title=(this.getChild("title"));this.m_skillExp=(this.getChild("skillExp"));this.m_btnSelect=(this.getChild("btnSelect"))};ActorExperciseItemStruct.URL="ui://s33x8418rn1rt1vx";ActorExperciseItemStruct.DependPackages=["PfSkin","Common"];return ActorExperciseItemStruct}(fairygui.GButton));PfSkin.ActorExperciseItemStruct=ActorExperciseItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ActorExperciseItem=(function(_super){__extends(ActorExperciseItem,_super);function ActorExperciseItem(){return _super!==null&&_super.apply(this,arguments)||this}ActorExperciseItem.prototype.setInfo=function(data){this.data=data;this.m_title.text=data.name;this.m_skillExp.text=format(TEXT.ActorSkillExp,data.skillExp);this.m_btnSelect.m_title.text=TEXT.ButtonSelect;this.m_starList.removeChildrenToPool();for(var i=0;i<data.star;i++){var star=this.m_starList.addItemFromPool();this.m_starList.addChild(star)}this.m_icon.url=Game.config.avatar.getConfig(data.config.avatar).bodyIconUrl};return ActorExperciseItem}(PfSkin.ActorExperciseItemStruct));PfSkin.ActorExperciseItem=ActorExperciseItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ActorExperciseSelectPanelStruct=(function(_super){__extends(ActorExperciseSelectPanelStruct,_super);function ActorExperciseSelectPanelStruct(){return _super.call(this)||this}ActorExperciseSelectPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ActorExperciseSelectPanel"))};ActorExperciseSelectPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_list=(this.getChild("list"));this.m_btnClose=(this.getChild("btnClose"))};ActorExperciseSelectPanelStruct.URL="ui://s33x8418rn1rt1vu";ActorExperciseSelectPanelStruct.DependPackages=["PfSkin","Common","System"];return ActorExperciseSelectPanelStruct}(fairygui.GComponent));PfSkin.ActorExperciseSelectPanelStruct=ActorExperciseSelectPanelStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ActorExperciseSelectPanel=(function(_super){__extends(ActorExperciseSelectPanel,_super);function ActorExperciseSelectPanel(){return _super!==null&&_super.apply(this,arguments)||this}ActorExperciseSelectPanel.prototype.showForParent=function(lineUuid,parent){this.lineUuid=lineUuid;if(parent==null){parent=Games.MenuLayer.module}parent.addChild(this);this.setSize(fairygui.GRoot.inst.width,fairygui.GRoot.inst.height);this.addRelation(parent,fairygui.RelationType.Size);this.actorList=Game.moduleModel.actor.getActors();this.m_title.text=TEXT.ProduceActorTitle;this.m_btnClose.onClick(this,this.onClose);this.setListContent();Game.protoOkEvent.add(ProtoEventKey.Actor_ActorExerciseStart,this.callBackActorExerciseStart,this)};ActorExperciseSelectPanel.prototype.onClose=function(){Game.protoOkEvent.remove(ProtoEventKey.Actor_ActorExerciseStart,this.callBackActorExerciseStart,this);this.selectItem=null;this.actorList.length=0;this.removeFromParent()};ActorExperciseSelectPanel.prototype.callBackActorExerciseStart=function(proto){this.onClose()};ActorExperciseSelectPanel.prototype.setListContent=function(){var _this=this;this.m_list.removeChildrenToPool();var i=-1;this.actorList=this.actorList.filter(function(value,index,array){return !_this.isExperciseActor(value.uuid)});for(var _i=0,_a=this.actorList;_i<_a.length;_i++){var actor=_a[_i];i++;var item=this.m_list.addItemFromPool();item.setInfo(actor);item.name=i.toString();item.m_btnSelect.onClick(this,this.onAvatarSelected,[item]);this.m_list.addChild(item)}};ActorExperciseSelectPanel.prototype.isExperciseActor=function(actorUuid){var actorExperciseData=Game.moduleModel.actor.getActorExerciseDataByActorUuid(actorUuid);return(actorExperciseData!=null&&actorExperciseData.uuid!="")};ActorExperciseSelectPanel.prototype.onAvatarSelected=function(e){this.selectItem=e;if(!Games.AvatarManager.isActorExerciseOnLimit(e.data.id)){var actorUuid=Game.moduleModel.actor.getActor(e.data.id).uuid;Game.protosender.Actor.ActorExerciseStart(actorUuid,this.lineUuid)}};return ActorExperciseSelectPanel}(PfSkin.ActorExperciseSelectPanelStruct));PfSkin.ActorExperciseSelectPanel=ActorExperciseSelectPanel})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var AnimContainerStruct=(function(_super){__extends(AnimContainerStruct,_super);function AnimContainerStruct(){return _super.call(this)||this}AnimContainerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","AnimContainer"))};AnimContainerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_oscarBg=(this.getChild("oscarBg"));this.m_oscarCard=(this.getChild("oscarCard"));this.m_oscarAvatar=(this.getChild("oscarAvatar"))};AnimContainerStruct.URL="ui://s33x8418h1e3t1wk";AnimContainerStruct.DependPackages=["PfSkin"];return AnimContainerStruct}(fairygui.GComponent));PfSkin.AnimContainerStruct=AnimContainerStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var AnimContainer=(function(_super){__extends(AnimContainer,_super);function AnimContainer(){return _super!==null&&_super.apply(this,arguments)||this}return AnimContainer}(PfSkin.AnimContainerStruct));PfSkin.AnimContainer=AnimContainer})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistBtnStruct=(function(_super){__extends(ArtistBtnStruct,_super);function ArtistBtnStruct(){return _super.call(this)||this}ArtistBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistBtn"))};ArtistBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};ArtistBtnStruct.URL="ui://s33x8418yru4t219";ArtistBtnStruct.DependPackages=["PfSkin","Common"];return ArtistBtnStruct}(fairygui.GButton));PfSkin.ArtistBtnStruct=ArtistBtnStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistBtn=(function(_super){__extends(ArtistBtn,_super);function ArtistBtn(){return _super!==null&&_super.apply(this,arguments)||this}return ArtistBtn}(PfSkin.ArtistBtnStruct));PfSkin.ArtistBtn=ArtistBtn})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistExperciseRoomStruct=(function(_super){__extends(ArtistExperciseRoomStruct,_super);function ArtistExperciseRoomStruct(){return _super.call(this)||this}ArtistExperciseRoomStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistExperciseRoom"))};ArtistExperciseRoomStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};ArtistExperciseRoomStruct.URL="ui://s33x8418rn1rt1vt";ArtistExperciseRoomStruct.DependPackages=["PfSkin"];return ArtistExperciseRoomStruct}(fairygui.GComponent));PfSkin.ArtistExperciseRoomStruct=ArtistExperciseRoomStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistExperciseRoom=(function(_super){__extends(ArtistExperciseRoom,_super);function ArtistExperciseRoom(){return _super!==null&&_super.apply(this,arguments)||this}return ArtistExperciseRoom}(PfSkin.ArtistExperciseRoomStruct));PfSkin.ArtistExperciseRoom=ArtistExperciseRoom})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistFindPanelStruct=(function(_super){__extends(ArtistFindPanelStruct,_super);function ArtistFindPanelStruct(){return _super.call(this)||this}ArtistFindPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistFindPanel"))};ArtistFindPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_visible_dialog=this.getController("c_visible_dialog");this.m_state=this.getController("state");this.m_gold=(this.getChild("gold"));this.m_time=(this.getChild("time"));this.m_remianTime=(this.getChild("remianTime"));this.m_tremianTime=(this.getChild("tremianTime"));this.m_leaveTip=(this.getChild("leaveTip"));this.m_speedBtn=(this.getChild("speedBtn"));this.m_findBtn=(this.getChild("findBtn"));this.m_artistEffect=(this.getChild("artistEffect"));this.m_dialog1=(this.getChild("dialog1"));this.m_dialog2=(this.getChild("dialog2"));this.m_dialog3=(this.getChild("dialog3"))};ArtistFindPanelStruct.URL="ui://s33x8418tqflt269";ArtistFindPanelStruct.DependPackages=["PfSkin","Common","WarMovie","Fx","System"];return ArtistFindPanelStruct}(fairygui.GComponent));PfSkin.ArtistFindPanelStruct=ArtistFindPanelStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistFindPanel=(function(_super){__extends(ArtistFindPanel,_super);function ArtistFindPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dialogNumbers=[];_this.dialogPanels=[];_this.dialogNumPanels=[];return _this}ArtistFindPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_findBtn.m_red.visible=false;this.dialogPanels=[this.m_dialog1,this.m_dialog2,this.m_dialog3]};ArtistFindPanel.prototype.clearTime=function(){Laya.timer.clear(this,this.onUpdateTime);Laya.timer.clear(this,this.onUpdateClearTime)};ArtistFindPanel.prototype.updateView=function(){this.checkTime();this.startDialog();this.updateGoldView()};ArtistFindPanel.prototype.initDialog=function(){this.dialogNumbers=[100101,100102,100103,100104,100105,100106,100107,100108]};ArtistFindPanel.prototype.initDialogNum=function(){this.dialogNumPanels=[0,1,2]};ArtistFindPanel.prototype.updateButtonView=function(){if(this.resetTimes>0){}};ArtistFindPanel.prototype.onTabHide=function(){this.clearTime();clearTimeout(this.dialogInterval);this.m_findBtn.offClick(this,this.onClickFindBtn);User.sGameInfoUpdate.remove(this.onUpdateGameInfoHandler,this);Game.moduleModel.actor.sUpdateActorInfo.remove(this.onUpdateActorHandler,this)};ArtistFindPanel.prototype.onTabShow=function(){this.m_findBtn.onClick(this,this.onClickFindBtn);User.sGameInfoUpdate.add(this.onUpdateGameInfoHandler,this);Game.moduleModel.actor.sUpdateActorInfo.add(this.onUpdateActorHandler,this);this.m_findBtn.text=Games.TEXT.ScountActor;var itemCost=GlobalConfig.getValue1(GlobalKey.KEY_1001_TanChaXiaoHao);this.m_findBtn.m_icon.icon=Game.config.item.getConfig(itemCost[0]).iconUrl;this.m_findBtn.m_number.text=itemCost[1]+"";this.m_artistEffect.m_t0.play(null,-1)};ArtistFindPanel.prototype.onUpdateActorHandler=function(){this.updateView()};ArtistFindPanel.prototype.onUpdateGameInfoHandler=function(){if(Game.moduleModel.actor.noseActorIsWaiting&&User.info.noseIntoActorList.length>0){Game.menu.open(MenuId.ArtistScoutResult)}else{this.updateView()}};ArtistFindPanel.prototype.startDialog=function(){var _this=this;if(this.dialogNumbers.length<=0){this.initDialog()}if(this.dialogNumPanels.length<=0){this.initDialogNum()}clearTimeout(this.dialogInterval);var index=Math.floor(this.dialogNumbers.length*Math.random());var dialogId=this.dialogNumbers[index];this.dialogNumbers.splice(index,1);var pos=Math.floor(this.dialogNumPanels.length*Math.random());index=this.dialogNumPanels[pos];var dialog=this.dialogPanels[index];this.dialogNumPanels.splice(pos,1);this.m_c_visible_dialog.selectedIndex=index+1;var config=Game.config.speak.getConfig(dialogId);if(config){dialog.m_title.text=config.speak;this.dialogInterval=setTimeout(function(){_this.startDialog()},3000)}else{}};ArtistFindPanel.prototype.updateGoldView=function(){this.m_gold.text=formatNumberUnit(Game.moduleModel.item.getItemNum(EItemId.gold))};ArtistFindPanel.prototype.updateRemainTime=function(remain){this.m_remianTime.text=Games.TEXT.TalentTimes;this.m_tremianTime.text=format("{0}/{1}",remain,GlobalConfig.getValue(GlobalKey.KEY_1013_XingTanCiShu))};ArtistFindPanel.prototype.checkTime=function(){this.clearTime();if(Game.moduleModel.actor.isMaxNose){this.showNoseLeave()}else{var nowTimes=Game.time.serverSeconds;var resetTimes=User.info.noseIntoTime+Game.moduleModel.actor.noseCdReset;this.resetTimes=Math.max(0,resetTimes-nowTimes);if(this.resetTimes>0){this.startTimeHandler()}else{this.showCanNose()}}};ArtistFindPanel.prototype.startTimeHandler=function(){this.m_findBtn.text=Games.TEXT.ScountActor;this.m_state.setSelectedIndex(1);this.m_speedBtn.onClick(this,this.onClickFindBtn);this.updateRemainTime(0);Laya.timer.loop(1000,this,this.onUpdateTime,null,true,true);this.updateTimeView()};ArtistFindPanel.prototype.showCanNose=function(){this.updateRemainTime(1);this.m_time.visible=false;this.m_leaveTip.visible=false;this.m_state.setSelectedIndex(0)};ArtistFindPanel.prototype.showNoseLeave=function(){this.updateRemainTime(0);this.m_time.visible=false;this.m_speedBtn.visible=false;this.m_leaveTip.visible=true;this.m_state.setSelectedIndex(0);var currSecond=Game.time.serverSeconds;this.clearTimes=0;var nextSecond=User.info.resetNoseIntoTime;if(currSecond<nextSecond){this.clearTimes=nextSecond-currSecond;Laya.timer.loop(1000,this,this.onUpdateClearTime,null,true,true)}this.updateLeaveTimeView()};ArtistFindPanel.prototype.stopTimeHandler=function(){this.updateRemainTime(1);this.m_findBtn.text=Games.TEXT.ScountActor;this.m_findBtn.m_number.text=formatNumberUnit(GlobalConfig.getValue1(GlobalKey.KEY_1001_TanChaXiaoHao)[1]);this.m_time.visible=false;this.m_leaveTip.visible=false;this.m_state.setSelectedIndex(0)};ArtistFindPanel.prototype.onUpdateTime=function(){if(this.resetTimes>=0){this.resetTimes--;if(this.resetTimes<0){this.resetTimes=0;this.checkTime()}}this.updateTimeView()};ArtistFindPanel.prototype.onUpdateClearTime=function(){if(this.clearTimes>=0){this.clearTimes--;if(this.clearTimes<0){this.clearTimes=0;this.checkTime()}}this.updateLeaveTimeView()};ArtistFindPanel.prototype.updateTimeView=function(){this.m_time.text=format(Games.TEXT.AfterToScountActor,Games.TimeHelper.TimeFormat2(this.resetTimes));this.m_speedBtn.m_title.text=Games.TimeHelper.TimeFormat(this.resetTimes)};ArtistFindPanel.prototype.updateLeaveTimeView=function(){this.m_leaveTip.text=format(Games.TEXT.AfterToClearNoseTimes,Games.TimeHelper.TimeFormat2(this.clearTimes))};ArtistFindPanel.prototype.onClickFindBtn=function(){var self=this;function noseActor(){var cost=GlobalConfig.getValue1(GlobalKey.KEY_1001_TanChaXiaoHao);var enough=Games.ItemHelper.checkItemEnough3(cost);if(enough){Game.protosender.Actor.noseInfoActor(self.resetTimes>0)}else{Game.system.openItemWay(cost[0],cost[1])}}if(Game.moduleModel.actor.actorIsMax){Game.moduleModel.actor.toMaxActor()}else{if(this.resetTimes>0||Game.moduleModel.actor.isMaxNose){Game.system.openGoOtherFunc(Games.OtherFunctionType.ActorStarCard,Games.TEXT.TitleTip,TEXT.SystemGoOtherFunction_Desc_2,function(){var cost=GlobalConfig.getValue1(GlobalKey.KEY_1008_JiangZhiTanCha__PinHeShuLiang);var enough=Games.ItemHelper.checkItemEnough3(cost);if(enough){noseActor()}else{Game.system.openItemWay(cost[0],cost[1])}})}else{noseActor()}}};return ArtistFindPanel}(PfSkin.ArtistFindPanelStruct));PfSkin.ArtistFindPanel=ArtistFindPanel})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistForzenItemStruct=(function(_super){__extends(ArtistForzenItemStruct,_super);function ArtistForzenItemStruct(){return _super.call(this)||this}ArtistForzenItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistForzenItem"))};ArtistForzenItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_country=(this.getChild("country"));this.m_sex=(this.getChild("sex"));this.m_show=(this.getChild("show"));this.m_age=(this.getChild("age"));this.m_starlist=(this.getChild("starlist"));this.m_name=(this.getChild("name"));this.m_level=(this.getChild("level"));this.m_attrLabel1=(this.getChild("attrLabel1"));this.m_attrIcon1=(this.getChild("attrIcon1"));this.m_attrLabel2=(this.getChild("attrLabel2"));this.m_attrIcon2=(this.getChild("attrIcon2"));this.m_attrLabel3=(this.getChild("attrLabel3"));this.m_attrIcon3=(this.getChild("attrIcon3"));this.m_attrLabel4=(this.getChild("attrLabel4"));this.m_attrIcon4=(this.getChild("attrIcon4"));this.m_icon=(this.getChild("icon"));this.m_aliveBtn2=(this.getChild("aliveBtn2"))};ArtistForzenItemStruct.URL="ui://s33x8418jazc1lz";ArtistForzenItemStruct.DependPackages=["PfSkin","Common"];return ArtistForzenItemStruct}(fairygui.GComponent));PfSkin.ArtistForzenItemStruct=ArtistForzenItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistForzenItem=(function(_super){__extends(ArtistForzenItem,_super);function ArtistForzenItem(){return _super!==null&&_super.apply(this,arguments)||this}ArtistForzenItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_aliveBtn2.onClick(this,this.onClickAliveBtn);this.attrLabels=[this.m_attrLabel1,this.m_attrLabel2,this.m_attrLabel3,this.m_attrLabel4];this.attrIcons=[this.m_attrIcon1,this.m_attrIcon2,this.m_attrIcon3,this.m_attrIcon4]};ArtistForzenItem.prototype.onClickAliveBtn=function(){var _this=this;if(Game.moduleModel.actor.actorIsMax){Game.moduleModel.actor.toMaxActor()}else{var itemId=this.actorData.config.enable_cost.itemId;var itemNum=this.actorData.config.enable_cost.itemNum;Game.system.confirmBuyText(Games.TEXT.AliveAcotr,[itemId,itemNum],null,function(){Game.protosender.Actor.hideActor(_this.actorData.uuid,false)})}};ArtistForzenItem.prototype.updateView=function(data){this.actorData=data;this.m_name.text=data.name;this.m_level.text=format(Games.TEXT.Lv,data.level);this.m_name.text=data.name;this.m_starlist.itemRenderer=Handler.create(this,function(index,item){item.icon=data.config.starUrl},null,false);this.m_starlist.numItems=data.star;this.m_icon.icon=Game.config.avatar.getConfig(data.config.avatar).bodyIconUrl;this.m_country.icon=Game.config.avatar.getConfig(Game.config.property.getConfig(data.config.country).icon).iconUrl;this.m_sex.icon=Game.config.avatar.getConfig(Game.config.property.getConfig(data.config.sex).icon).iconUrl;this.m_aliveBtn2.m_num.text=formatNumberUnit(data.config.enable_cost.itemNum);this.m_age.icon=Game.config.avatar.getConfig(Game.config.property.getConfig(data.config.age_type).icon).iconUrl;this.m_show.icon=Game.config.avatar.getConfig(Game.config.property.getConfig(data.config.show_type).icon).iconUrl;this.m_aliveBtn2.m_icon.url=Game.config.avatar.getConfig(Game.config.item.getConfig(data.config.enable_cost.itemId).icon).iconUrl;this.m_aliveBtn2.m_title.text=Games.TEXT.RelieveArtist;var props=data.getProps();for(var index=0;index<props.length;index++){var id=props[index];var config=Game.config.property.getConfig(id);var field=config.field;var value=data[field];this.attrLabels[index].text=formatNumberUnit(value);this.attrIcons[index].icon=Game.config.avatar.getConfig(config.icon).iconUrl}};return ArtistForzenItem}(PfSkin.ArtistForzenItemStruct));PfSkin.ArtistForzenItem=ArtistForzenItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistForzenUIStruct=(function(_super){__extends(ArtistForzenUIStruct,_super);function ArtistForzenUIStruct(){return _super.call(this)||this}ArtistForzenUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistForzenUI"))};ArtistForzenUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_artlist=(this.getChild("artlist"));this.m_canLabel=(this.getChild("canLabel"));this.m_noTip=(this.getChild("noTip"));this.m_xuecang=(this.getChild("xuecang"));this.m_artName=(this.getChild("artName"));this.m_descLabel=(this.getChild("descLabel"));this.m_closeBtn=(this.getChild("closeBtn"))};ArtistForzenUIStruct.URL="ui://s33x8418jazc1l7";ArtistForzenUIStruct.DependPackages=["PfSkin","Common","WarMovie"];return ArtistForzenUIStruct}(fairygui.GComponent));PfSkin.ArtistForzenUIStruct=ArtistForzenUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistForzenUI=(function(_super){__extends(ArtistForzenUI,_super);function ArtistForzenUI(){return _super!==null&&_super.apply(this,arguments)||this}ArtistForzenUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_artlist.setVirtual();this.m_artlist.itemRenderer=Handler.create(this,this.onUpdateItem,null,false);this.m_noTip.text=Games.TEXT.NoForzen};ArtistForzenUI.prototype.updateView=function(){this.actors=Game.moduleModel.actor.getHideActors();this.m_artlist.numItems=this.actors.length;if(this.actors.length<=0){this.m_noTip.visible=true}else{this.m_noTip.visible=false}this.m_canLabel.text=format(Games.TEXT.CanHideActorNums,this.actors.length,User.info.maxHideActor);this.m_artName.text=Games.TEXT.HideActor;this.m_descLabel.text=Games.TEXT.HideActorDesc};ArtistForzenUI.prototype.onUpdateItem=function(index,item){var gItem=item;gItem.updateView(this.actors[index])};return ArtistForzenUI}(PfSkin.ArtistForzenUIStruct));PfSkin.ArtistForzenUI=ArtistForzenUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistGetUIStruct=(function(_super){__extends(ArtistGetUIStruct,_super);function ArtistGetUIStruct(){return _super.call(this)||this}ArtistGetUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistGetUI"))};ArtistGetUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_starList=(this.getChild("starList"));this.m_name=(this.getChild("name"));this.m_tipMsg=(this.getChild("tipMsg"));this.m_clickclose=(this.getChild("clickclose"));this.m_effect=(this.getChild("effect"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_shareBtn=(this.getChild("shareBtn"))};ArtistGetUIStruct.URL="ui://s33x8418eb3n1oa";ArtistGetUIStruct.DependPackages=["PfSkin","Fx","Common"];return ArtistGetUIStruct}(fairygui.GComponent));PfSkin.ArtistGetUIStruct=ArtistGetUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistGetUI=(function(_super){__extends(ArtistGetUI,_super);function ArtistGetUI(){return _super!==null&&_super.apply(this,arguments)||this}ArtistGetUI.prototype.updateView=function(data){this.actorData=data;this.m_icon.icon=data.config.avatarConfig.bodyIconUrl;this.m_name.text=data.name;this.m_shareBtn.visible=false;this.m_tipMsg.text=Games.TEXT.ClickAnyWhereToClose;this.m_starList.itemRenderer=Handler.create(this,function(index,item){item.icon=data.config.starUrl},null,false);this.m_starList.numItems=data.config.starNum};ArtistGetUI.prototype.onClickCloseBtn=function(){this.moduleWindow.menuClose();Game.story.triggerPlayStoryByType(Games.StoryTriggerType.SelectActor)};ArtistGetUI.prototype.onClickShareBtn=function(){Game.menu.open(MenuId.ArtistShare,this.actorData)};ArtistGetUI.prototype.onWindowShow=function(){this.m_closeBtn.onClick(this,this.onClickCloseBtn);this.m_shareBtn.onClick(this,this.onClickShareBtn);this.m_clickclose.onClick(this,this.onClickCloseBtn);Game.sound.playSound(SoundKey.MM13_GetArtist)};ArtistGetUI.prototype.onWindowHide=function(){this.m_closeBtn.offClick(this,this.onClickCloseBtn);this.m_shareBtn.offClick(this,this.onClickShareBtn)};return ArtistGetUI}(PfSkin.ArtistGetUIStruct));PfSkin.ArtistGetUI=ArtistGetUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistIconStruct=(function(_super){__extends(ArtistIconStruct,_super);function ArtistIconStruct(){return _super.call(this)||this}ArtistIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistIcon"))};ArtistIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};ArtistIconStruct.URL="ui://s33x84189wvbt25w";ArtistIconStruct.DependPackages=["PfSkin","Common"];return ArtistIconStruct}(fairygui.GLabel));PfSkin.ArtistIconStruct=ArtistIconStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistIcon=(function(_super){__extends(ArtistIcon,_super);function ArtistIcon(){return _super!==null&&_super.apply(this,arguments)||this}return ArtistIcon}(PfSkin.ArtistIconStruct));PfSkin.ArtistIcon=ArtistIcon})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistIcon150Struct=(function(_super){__extends(ArtistIcon150Struct,_super);function ArtistIcon150Struct(){return _super.call(this)||this}ArtistIcon150Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistIcon150"))};ArtistIcon150Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};ArtistIcon150Struct.URL="ui://s33x84189wvbt25x";ArtistIcon150Struct.DependPackages=["PfSkin","Common","Activity"];return ArtistIcon150Struct}(fairygui.GLabel));PfSkin.ArtistIcon150Struct=ArtistIcon150Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistIcon150=(function(_super){__extends(ArtistIcon150,_super);function ArtistIcon150(){return _super!==null&&_super.apply(this,arguments)||this}return ArtistIcon150}(PfSkin.ArtistIcon150Struct));PfSkin.ArtistIcon150=ArtistIcon150})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistItemViewStruct=(function(_super){__extends(ArtistItemViewStruct,_super);function ArtistItemViewStruct(){return _super.call(this)||this}ArtistItemViewStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistItemView"))};ArtistItemViewStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_head=(this.getChild("head"));this.m_starList=(this.getChild("starList"));this.m_label=(this.getChild("label"));this.m_contory=(this.getChild("contory"));this.m_level=(this.getChild("level"));this.m_icon=(this.getChild("icon"));this.m_detailBtn=(this.getChild("detailBtn"));this.m_attr1=(this.getChild("attr1"));this.m_attr2=(this.getChild("attr2"));this.m_attr3=(this.getChild("attr3"));this.m_attr4=(this.getChild("attr4"))};ArtistItemViewStruct.URL="ui://s33x8418jazc1m0";ArtistItemViewStruct.DependPackages=["PfSkin","Common"];return ArtistItemViewStruct}(fairygui.GComponent));PfSkin.ArtistItemViewStruct=ArtistItemViewStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistItemView=(function(_super){__extends(ArtistItemView,_super);function ArtistItemView(){return _super!==null&&_super.apply(this,arguments)||this}ArtistItemView.prototype.updateView=function(data){this.actorData=data;this.m_label.text=data.name;this.m_level.text=format(Games.TEXT.Lv,data.level);this.m_starList.itemRenderer=Handler.create(this,function(index,item){item.icon=data.config.starUrl},null,false);this.m_starList.numItems=data.star;this.m_icon.m_icon.icon=Game.config.avatar.getConfig(data.config.avatar).bodyIconUrl;this.m_contory.url=Game.config.avatar.getConfig(Game.config.property.getConfig(data.config.country).icon).iconUrl;var props=data.getProps();for(var index=0;index<props.length;index++){var id=props[index];this.attrs[index].updateView(data,id)}};ArtistItemView.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.attrs=[this.m_attr1,this.m_attr2,this.m_attr3,this.m_attr4]};return ArtistItemView}(PfSkin.ArtistItemViewStruct));PfSkin.ArtistItemView=ArtistItemView})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistListPanelStruct=(function(_super){__extends(ArtistListPanelStruct,_super);function ArtistListPanelStruct(){return _super.call(this)||this}ArtistListPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistListPanel"))};ArtistListPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_name1=(this.getChild("name1"));this.m_name2=(this.getChild("name2"));this.m_canScount=(this.getChild("canScount"));this.m_canScountTitle=(this.getChild("canScountTitle"));this.m_listPanel=(this.getChild("listPanel"));this.m_xingtanBtn=(this.getChild("xingtanBtn"));this.m_frozenBtn=(this.getChild("frozenBtn"));this.m_add=(this.getChild("add"))};ArtistListPanelStruct.URL="ui://s33x8418tqflt26a";ArtistListPanelStruct.DependPackages=["PfSkin","Common","System"];return ArtistListPanelStruct}(fairygui.GComponent));PfSkin.ArtistListPanelStruct=ArtistListPanelStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistListPanel=(function(_super){__extends(ArtistListPanel,_super);function ArtistListPanel(){return _super!==null&&_super.apply(this,arguments)||this}ArtistListPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.setVirtual();this.m_list.setVirtualAndLoop();this.m_list.itemRenderer=Handler.create(this,this.onUpdateItemList,null,false);this.m_list.scrollItemToViewOnClick=false;this.m_xingtanBtn.m_red.visible=false;this.m_name1.text=Games.TEXT.TalentText;this.m_name2.text=Games.TEXT.HiddenText};ArtistListPanel.prototype.onUpdateItemList=function(index,obj){var item=obj;item.updateView(this.actors[index])};ArtistListPanel.prototype.onWindowHide=function(){this.m_frozenBtn.offClick(this,this.onClickFrozenBtn);this.m_xingtanBtn.offClick(this,this.onClickXingTanBtn);this.m_add.offClick(this,this.onClickAddBtn);this.m_list.off(fairygui.Events.CLICK_ITEM,this,this.onClickArtistItem);Game.event.remove(ProtoEventKey.ActorData,this.updateView,this);Game.event.remove(ProtoEventKey.Actor_HideActor,this.updateView,this);User.sGameInfoUpdate.remove(this.updateView,this);Game.moduleModel.actor.sUpdateActorInfo.remove(this.updateView,this)};ArtistListPanel.prototype.onWindowShow=function(){this.m_frozenBtn.onClick(this,this.onClickFrozenBtn);this.m_xingtanBtn.onClick(this,this.onClickXingTanBtn);this.m_add.onClick(this,this.onClickAddBtn);this.m_list.on(fairygui.Events.CLICK_ITEM,this,this.onClickArtistItem);Game.event.add(ProtoEventKey.ActorData,this.updateView,this);Game.event.add(ProtoEventKey.Actor_HideActor,this.updateView,this);User.sGameInfoUpdate.add(this.updateView,this);Game.moduleModel.actor.sUpdateActorInfo.add(this.updateView,this)};ArtistListPanel.prototype.onClickArtistItem=function(itemObject){var index=this.m_list.getChildIndex(itemObject);var realIndex=this.m_list.childIndexToItemIndex(index);Game.sound.playSound(SoundKey.MM01_Button);Game.menu.open(MenuId.ArtistDetail,itemObject.actorData.id)};ArtistListPanel.prototype.onClickAddBtn=function(){Game.system.confirmBuyText(Games.TEXT.AlertTextBuyActor,GlobalConfig.getValue1(GlobalKey.KEY_1009_ZuanDanZengJia__ShuLiangXiaoHao),null,function(){Game.protosender.Actor.addActorSlot()})};ArtistListPanel.prototype.onClickFrozenBtn=function(){Game.menu.open(MenuId.ArtistFrozen)};ArtistListPanel.prototype.onClickXingTanBtn=function(){if(Game.moduleModel.actor.noseActorIsWaiting&&User.info.noseIntoActorList.length>0){Game.menu.open(MenuId.ArtistScoutResult)}else{this.moduleWindow.conent.showFindPanel()}};ArtistListPanel.prototype.updateView=function(){this.actors=Game.moduleModel.actor.getActors();this.m_canScountTitle.text=TEXT.CanScountActor;this.m_canScount.text=format("{0}/{1}",this.actors.length,User.info.maxActor);this.m_list.numItems=this.actors.length;this.m_xingtanBtn.m_red.visible=Game.moduleModel.actor.isCanNoseActor};ArtistListPanel.prototype.selectActor=function(lv){for(var index=0;index<this.actors.length;index++){var data=this.actors[index];if(data.level<lv&&index<this.m_list.numItems){var real=this.m_list.itemIndexToChildIndex(index);this.m_list.scrollToView(index);return this.m_list.getChildAt(real)}}return null};return ArtistListPanel}(PfSkin.ArtistListPanelStruct));PfSkin.ArtistListPanel=ArtistListPanel})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistScoutResultItemStruct=(function(_super){__extends(ArtistScoutResultItemStruct,_super);function ArtistScoutResultItemStruct(){return _super.call(this)||this}ArtistScoutResultItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistScoutResultItem"))};ArtistScoutResultItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_need=(this.getChild("need"));this.m_already=(this.getChild("already"));this.m_tAlready=(this.getChild("tAlready"));this.m_detailBtn=(this.getChild("detailBtn"));this.m_goBtn=(this.getChild("goBtn"));this.m_giftBtn=(this.getChild("giftBtn"))};ArtistScoutResultItemStruct.URL="ui://s33x8418jazc1m1";ArtistScoutResultItemStruct.DependPackages=["PfSkin","Common"];return ArtistScoutResultItemStruct}(fairygui.GComponent));PfSkin.ArtistScoutResultItemStruct=ArtistScoutResultItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistScoutResultItem=(function(_super){__extends(ArtistScoutResultItem,_super);function ArtistScoutResultItem(){return _super!==null&&_super.apply(this,arguments)||this}ArtistScoutResultItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_detailBtn.onClick(this,this.onClickDetailBtn);this.m_goBtn.onClick(this,this.onClickBuyBtn);this.m_giftBtn.onClick(this,this.onClickGiftBtn);this.m_icon.onClick(this,this.onClickDetailBtn);this.m_goBtn.title=Games.TEXT.NoseActor;this.m_giftBtn.m_red.visible=false};ArtistScoutResultItem.prototype.onClickBuyBtn=function(){var _this=this;if(Game.moduleModel.actor.isRecruiting){return}if(Game.moduleModel.actor.actorIsMax&&Game.moduleModel.actor.hasActor(this.config.id)==false){Game.moduleModel.actor.toMaxActor()}else{var cost=[this.config.cost.itemId,this.config.cost.itemNum];var TipMsgs=(Game.moduleModel.actor.hasActor(this.config.id)==true)?Games.TEXT.SecondBuyArtistMsg:Games.TEXT.AlertNoseActor;Game.system.confirmBuyText(TipMsgs,cost,null,function(){var enough=Games.ItemHelper.checkItemEnough3(cost);if(enough){Game.moduleModel.actor.isRecruiting=true;Game.protosender.Actor.recruitActor(_this.config.id)}else{Game.system.openItemWay(_this.config.cost.itemId,_this.config.cost.itemNum)}})}};ArtistScoutResultItem.prototype.onClickDetailBtn=function(){Game.sound.playSound(SoundKey.MM01_Button);Game.menu.open(MenuId.ActorDetail,this.config.id)};ArtistScoutResultItem.prototype.onClickGiftBtn=function(){if(this.rewardUI==null){this.rewardUI=fgui.Common.TipReward.createInstance()}this.rewardUI.setItems(this.config.recruit_reward);this.rewardUI.showPopup(this.m_giftBtn)};ArtistScoutResultItem.prototype.updateView=function(id){var _this=this;this.config=Game.config.actor.getConfig(id);if(this.config){this.m_detailBtn.m_name.text=this.config.name;this.m_detailBtn.m_starList.itemRenderer=Handler.create(this,function(index,item){item.icon=_this.config.starUrl},null,false);this.m_detailBtn.m_starList.numItems=this.config.starNum;this.m_need.text=formatNumberUnit(this.config.cost.itemNum);this.m_icon.icon=Game.config.avatar.getConfig(this.config.avatar).bodyIconUrl}if(Game.moduleModel.actor.hasActor(id)){this.m_giftBtn.visible=true;this.m_already.visible=true;this.m_tAlready.visible=true;this.m_detailBtn.m_name.text=Game.moduleModel.actor.getActor(id).name}else{this.m_giftBtn.visible=false;this.m_already.visible=false;this.m_tAlready.visible=false}};return ArtistScoutResultItem}(PfSkin.ArtistScoutResultItemStruct));PfSkin.ArtistScoutResultItem=ArtistScoutResultItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistScoutResultUIStruct=(function(_super){__extends(ArtistScoutResultUIStruct,_super);function ArtistScoutResultUIStruct(){return _super.call(this)||this}ArtistScoutResultUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistScoutResultUI"))};ArtistScoutResultUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_visible_effect=this.getController("c_visible_effect");this.m_dianzan=(this.getChild("dianzan"));this.m_zuanshi=(this.getChild("zuanshi"));this.m_xingtan=(this.getChild("xingtan"));this.m_leaveLabel=(this.getChild("leaveLabel"));this.m_list=(this.getChild("list"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_resetBtn=(this.getChild("resetBtn"));this.m_speedBtn=(this.getChild("speedBtn"));this.m_effect=(this.getChild("effect"))};ArtistScoutResultUIStruct.URL="ui://s33x8418jazc1l9";ArtistScoutResultUIStruct.DependPackages=["PfSkin","Common","WarMovie","Fx","System"];return ArtistScoutResultUIStruct}(fairygui.GComponent));PfSkin.ArtistScoutResultUIStruct=ArtistScoutResultUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistScoutResultUI=(function(_super){__extends(ArtistScoutResultUI,_super);function ArtistScoutResultUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isPlayed=false;return _this}ArtistScoutResultUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_resetBtn.text=Games.TEXT.ResetNose;this.m_list.itemRenderer=Handler.create(this,this.onUpdateItem,null,false);this.m_resetBtn.onClick(this,this.onClickResetBtn);this.m_speedBtn.onClick(this,this.onClickSpeedBtn);this.m_c_visible_effect.selectedIndex=0};ArtistScoutResultUI.prototype.onWindowShow=function(){this.isPlayed=false;this.updateView()};ArtistScoutResultUI.prototype.onClickResetBtn=function(){var _this=this;if(Game.moduleModel.actor.actorIsMax){Game.moduleModel.actor.toMaxActor()}else{if(Game.moduleModel.actor.isMaxNose){Game.system.openGoOtherFunc(Games.OtherFunctionType.ActorStarCard,Games.TEXT.TitleTip,TEXT.SystemGoOtherFunction_Desc_2,function(){Game.moduleModel.actor.normalNoseActor(true)})}else{Game.system.confirmText(Games.TEXT.SureResetActors,null,null,function(){_this.costToNoseActor(function(){Game.protosender.Actor.noseInfoActor(false)})})}}};ArtistScoutResultUI.prototype.costToNoseActor=function(callBack){var cost=GlobalConfig.getValue1(GlobalKey.KEY_1001_TanChaXiaoHao);var enough=Games.ItemHelper.checkItemEnough3(cost);if(enough){this.isPlayed=false;if(callBack){callBack()}}else{Game.system.openItemWay(cost[0],cost[1])}};ArtistScoutResultUI.prototype.onClickSpeedBtn=function(){var _this=this;if(Game.moduleModel.actor.actorIsMax){Game.moduleModel.actor.toMaxActor()}else{Game.system.openGoOtherFunc(Games.OtherFunctionType.ActorStarCard,Games.TEXT.TitleTip,TEXT.SystemGoOtherFunction_Desc_2,function(){var cost=GlobalConfig.getValue1(GlobalKey.KEY_1008_JiangZhiTanCha__PinHeShuLiang);if(Games.ItemHelper.checkItemEnough3(cost)){_this.costToNoseActor(function(){Game.protosender.Actor.noseInfoActor(true)})}else{Game.system.openItemWay(cost[0],cost[1])}})}};ArtistScoutResultUI.prototype.playEffect=function(){var _this=this;this.m_c_visible_effect.selectedIndex=1;Game.sound.playSound(SoundKey.MM17_FoundArtist);this.m_effect.m_t0.play(Handler.create(null,function(){_this.m_c_visible_effect.selectedIndex=0}))};ArtistScoutResultUI.prototype.updateView=function(){Game.moduleModel.actor.isRecruiting=false;if(this.isPlayed==false){this.playEffect();this.isPlayed=true}this.scoutActors=User.info.noseIntoActorList;this.m_list.numItems=this.scoutActors.length;this.m_dianzan.text=formatNumberUnit(Game.moduleModel.item.getItemNum(EItemId.praise));this.m_zuanshi.text=formatNumberUnit(Game.moduleModel.item.getItemNum(EItemId.diamond));this.m_xingtan.text=formatNumberUnit(Game.moduleModel.item.getItemNum(EItemId.talent));this.startTime()};ArtistScoutResultUI.prototype.onUpdateItem=function(index,item){var rItem=item;rItem.updateView(this.scoutActors[index])};ArtistScoutResultUI.prototype.startTime=function(){var nowTimes=Game.time.serverSeconds;this.resetTimes=0;var resetTimes=User.info.noseIntoTime+Game.moduleModel.actor.noseCdReset;if(resetTimes>nowTimes){this.resetTimes=resetTimes-nowTimes}this.leaveTimes=0;var leaveTimes=User.info.noseIntoActorEffectTime;if(leaveTimes>nowTimes){this.leaveTimes=leaveTimes-nowTimes}this.clearTime();if(this.leaveTimes>0||this.resetTimes>0){Laya.timer.loop(1000,this,this.onUpdateTime,null,true,true)}this.updateTimeView()};ArtistScoutResultUI.prototype.onUpdateTime=function(){if(this.resetTimes>0){this.resetTimes--;if(this.resetTimes<0){this.resetTimes=0}}if(this.leaveTimes>0){this.leaveTimes--;if(this.leaveTimes<=0){this.leaveTimes=0;this.moduleWindow.onClickCloseBtn()}}this.updateTimeView()};ArtistScoutResultUI.prototype.updateTimeView=function(){if(this.resetTimes>0){this.m_speedBtn.text=Games.TimeHelper.TimeFormat(this.resetTimes);this.m_speedBtn.visible=true;this.m_resetBtn.visible=false}else{this.m_speedBtn.visible=false;this.m_resetBtn.visible=true}if(this.leaveTimes>0){this.m_leaveLabel.text=Games.TEXT.ActorWillLeave1+Games.TimeHelper.TimeFormat2(this.leaveTimes)}};ArtistScoutResultUI.prototype.onWindowHide=function(){this.clearTime()};ArtistScoutResultUI.prototype.clearTime=function(){Laya.timer.clear(this,this.onUpdateTime)};return ArtistScoutResultUI}(PfSkin.ArtistScoutResultUIStruct));PfSkin.ArtistScoutResultUI=ArtistScoutResultUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistScoutSuccessUIStruct=(function(_super){__extends(ArtistScoutSuccessUIStruct,_super);function ArtistScoutSuccessUIStruct(){return _super.call(this)||this}ArtistScoutSuccessUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistScoutSuccessUI"))};ArtistScoutSuccessUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_visible=this.getController("c_visible");this.m_icon=(this.getChild("icon"));this.m_starList=(this.getChild("starList"));this.m_firstGroup=(this.getChild("firstGroup"));this.m_rewardList=(this.getChild("rewardList"));this.m_secGroup=(this.getChild("secGroup"));this.m_name=(this.getChild("name"));this.m_desc1=(this.getChild("desc1"));this.m_desc2=(this.getChild("desc2"));this.m_confirmBtn=(this.getChild("confirmBtn"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_content=(this.getChild("content"));this.m_randomBtn=(this.getChild("randomBtn"))};ArtistScoutSuccessUIStruct.URL="ui://s33x8418jazc1la";ArtistScoutSuccessUIStruct.DependPackages=["PfSkin","Fx","Common"];return ArtistScoutSuccessUIStruct}(fairygui.GComponent));PfSkin.ArtistScoutSuccessUIStruct=ArtistScoutSuccessUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistScoutSuccessUI=(function(_super){__extends(ArtistScoutSuccessUI,_super);function ArtistScoutSuccessUI(){return _super!==null&&_super.apply(this,arguments)||this}ArtistScoutSuccessUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_confirmBtn.onClick(this,this.onClickConfirmBtn);this.m_randomBtn.onClick(this,this.onClickRandomBtn);this.m_content.m_title.promptText=format(Games.TEXT.Input4toNumChar,18);this.m_content.m_title.input.maxChars=18;this.m_rewardList.itemRenderer=Handler.create(this,this.updateRewardItemHandler,null,false);this.m_closeBtn.visible=false};ArtistScoutSuccessUI.prototype.updateRewardItemHandler=function(index,item){item.updateViewByDTNum(this.actorData.config.recruit_reward[index]);item.PopupInfo=this.actorData.config.recruit_reward[index].itemId};ArtistScoutSuccessUI.prototype.showFirstGroup=function(){this.getRandomNames();var promptText=format(Games.TEXT.RenameForActor,(this.actorData.config.sex==1101?Games.TEXT.She:Games.TEXT.He));this.m_content.m_title.promptText=promptText;this.m_content.m_title.text="";this.m_desc1.text=Games.TEXT.NoseSuccess;this.m_desc2.text=Games.TEXT.NewActorJoin;this.m_confirmBtn.text=Games.TEXT.Rename;this.m_c_visible.selectedIndex=0};ArtistScoutSuccessUI.prototype.showSecondGroup=function(){this.m_confirmBtn.text=Games.TEXT.Sure;this.m_c_visible.selectedIndex=1;this.m_rewardList.numItems=this.actorData.config.recruit_reward.length;this.m_desc2.text=Games.TEXT.SameActorJoin;this.m_desc1.text=Games.TEXT.ActorRecoverToDealAsset};ArtistScoutSuccessUI.prototype.updateView=function(data,isSecond){var _this=this;if(isSecond===void 0){isSecond=false}this.actorData=data;this.isSecond=isSecond;this.m_starList.itemRenderer=Handler.create(this,function(index,item){item.icon=_this.actorData.config.starUrl},null,false);this.m_starList.numItems=this.actorData.star;this.m_icon.icon=Game.config.avatar.getConfig(this.actorData.config.avatar).bodyIconUrl;if(isSecond){this.m_name.text=this.actorData.name;this.showSecondGroup()}else{this.m_name.text=this.actorData.config.name;this.showFirstGroup()}Game.sound.playSound(SoundKey.MM12_RecruitArtist)};ArtistScoutSuccessUI.prototype.closeMenu=function(){if(this.isSecond==false){Game.menu.open(MenuId.ArtistGet,this.actorData)}Game.menu.close(MenuId.ArtistScoutSuccess)};ArtistScoutSuccessUI.prototype.onWindowHide=function(){if(Game.moduleModel.actor.getAllActorLen()==1){Game.guide.finishInitActor()}};ArtistScoutSuccessUI.prototype.changeName=function(name){this.actorData.name=name;Game.protosender.Actor.actorChangeName(this.actorData.uuid,name);this.closeMenu()};ArtistScoutSuccessUI.prototype.onClickConfirmBtn=function(){var _this=this;if(this.isSecond){this.closeMenu()}else{if(this.m_content.text!=""){if(validateOtherName(this.m_content.text)){this.changeName(this.m_content.text)}}else{Game.system.confirmText(Games.TEXT.SureUseDefaultName,null,null,function(){_this.changeName(_this.actorData.config.name)})}}};ArtistScoutSuccessUI.prototype.onClickRandomBtn=function(){this.m_content.m_title.text=this.curRandomNames[this.randomIndex];this.randomIndex++;if(this.randomIndex>=this.curRandomNames.length){this.randomIndex=0}};ArtistScoutSuccessUI.prototype.getRandomNames=function(){this.curRandomNames=Game.config.gameRandomName.getConfig(this.actorData.config.random_name).names;this.randomIndex=Math.floor(this.curRandomNames.length*Math.random())};return ArtistScoutSuccessUI}(PfSkin.ArtistScoutSuccessUIStruct));PfSkin.ArtistScoutSuccessUI=ArtistScoutSuccessUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistShareUIStruct=(function(_super){__extends(ArtistShareUIStruct,_super);function ArtistShareUIStruct(){return _super.call(this)||this}ArtistShareUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistShareUI"))};ArtistShareUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_name=(this.getChild("name"));this.m_signActor=(this.getChild("signActor"));this.m_share=(this.getChild("share"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_shareBtn=(this.getChild("shareBtn"))};ArtistShareUIStruct.URL="ui://s33x8418eb3n1o9";ArtistShareUIStruct.DependPackages=["PfSkin","Common","Fx"];return ArtistShareUIStruct}(fairygui.GComponent));PfSkin.ArtistShareUIStruct=ArtistShareUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistShareUI=(function(_super){__extends(ArtistShareUI,_super);function ArtistShareUI(){return _super!==null&&_super.apply(this,arguments)||this}ArtistShareUI.prototype.updateView=function(data){this.m_icon.icon=data.config.avatarConfig.bodyIconUrl;this.m_name.text=data.name;this.m_shareBtn.visible=false};ArtistShareUI.prototype.onWindowShow=function(){this.m_shareBtn.onClick(this,this.onClickShareBtn);this.m_closeBtn.onClick(this,this.onClickCloseBtn)};ArtistShareUI.prototype.onWindowHide=function(){this.m_shareBtn.offClick(this,this.onClickShareBtn);this.m_closeBtn.offClick(this,this.onClickCloseBtn)};ArtistShareUI.prototype.onClickShareBtn=function(){};ArtistShareUI.prototype.onClickCloseBtn=function(){this.moduleWindow.menuClose()};return ArtistShareUI}(PfSkin.ArtistShareUIStruct));PfSkin.ArtistShareUI=ArtistShareUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistTabBtnStruct=(function(_super){__extends(ArtistTabBtnStruct,_super);function ArtistTabBtnStruct(){return _super.call(this)||this}ArtistTabBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistTabBtn"))};ArtistTabBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"));this.m_red=(this.getChild("red"))};ArtistTabBtnStruct.URL="ui://s33x8418jazc1m3";ArtistTabBtnStruct.DependPackages=["PfSkin","Common"];return ArtistTabBtnStruct}(fairygui.GButton));PfSkin.ArtistTabBtnStruct=ArtistTabBtnStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistTabBtn=(function(_super){__extends(ArtistTabBtn,_super);function ArtistTabBtn(){return _super!==null&&_super.apply(this,arguments)||this}return ArtistTabBtn}(PfSkin.ArtistTabBtnStruct));PfSkin.ArtistTabBtn=ArtistTabBtn})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistTrainAttrUpItemStruct=(function(_super){__extends(ArtistTrainAttrUpItemStruct,_super);function ArtistTrainAttrUpItemStruct(){return _super.call(this)||this}ArtistTrainAttrUpItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistTrainAttrUpItem"))};ArtistTrainAttrUpItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};ArtistTrainAttrUpItemStruct.URL="ui://s33x8418jazc1m5";ArtistTrainAttrUpItemStruct.DependPackages=["PfSkin"];return ArtistTrainAttrUpItemStruct}(fairygui.GButton));PfSkin.ArtistTrainAttrUpItemStruct=ArtistTrainAttrUpItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistTrainAttrUpItem=(function(_super){__extends(ArtistTrainAttrUpItem,_super);function ArtistTrainAttrUpItem(){return _super!==null&&_super.apply(this,arguments)||this}return ArtistTrainAttrUpItem}(PfSkin.ArtistTrainAttrUpItemStruct));PfSkin.ArtistTrainAttrUpItem=ArtistTrainAttrUpItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistTrainItem1Struct=(function(_super){__extends(ArtistTrainItem1Struct,_super);function ArtistTrainItem1Struct(){return _super.call(this)||this}ArtistTrainItem1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistTrainItem1"))};ArtistTrainItem1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_starList=(this.getChild("starList"));this.m_name=(this.getChild("name"));this.m_level=(this.getChild("level"));this.m_expBar=(this.getChild("expBar"))};ArtistTrainItem1Struct.URL="ui://s33x8418jazc1m6";ArtistTrainItem1Struct.DependPackages=["PfSkin","Common"];return ArtistTrainItem1Struct}(fairygui.GButton));PfSkin.ArtistTrainItem1Struct=ArtistTrainItem1Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistTrainItem1=(function(_super){__extends(ArtistTrainItem1,_super);function ArtistTrainItem1(){return _super!==null&&_super.apply(this,arguments)||this}ArtistTrainItem1.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};ArtistTrainItem1.prototype.updateView=function(data){this.m_starList.itemRenderer=Handler.create(this,function(index,item){item.icon=data.config.starUrl},null,false);this.m_starList.numItems=data.star;this.m_level.text=Games.TEXT.Level+data.level;this.m_expBar.visible=false;this.m_name.text=data.name;this.m_icon.icon=Game.config.avatar.getConfig(data.config.avatar).bodyIconUrl};return ArtistTrainItem1}(PfSkin.ArtistTrainItem1Struct));PfSkin.ArtistTrainItem1=ArtistTrainItem1})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistTrainItem2Struct=(function(_super){__extends(ArtistTrainItem2Struct,_super);function ArtistTrainItem2Struct(){return _super.call(this)||this}ArtistTrainItem2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistTrainItem2"))};ArtistTrainItem2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_desc=(this.getChild("desc"));this.m_attrList=(this.getChild("attrList"));this.m_unlockGroup=(this.getChild("unlockGroup"));this.m_lockGroup=(this.getChild("lockGroup"));this.m_upgradeBtn=(this.getChild("upgradeBtn"))};ArtistTrainItem2Struct.URL="ui://s33x8418jazc1m7";ArtistTrainItem2Struct.DependPackages=["PfSkin"];return ArtistTrainItem2Struct}(fairygui.GComponent));PfSkin.ArtistTrainItem2Struct=ArtistTrainItem2Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistTrainItem2=(function(_super){__extends(ArtistTrainItem2,_super);function ArtistTrainItem2(){return _super!==null&&_super.apply(this,arguments)||this}ArtistTrainItem2.prototype.updateView=function(data,index,isMax){if(isMax===void 0){isMax=false}this.actorData=data;this.isMax=isMax;this.type=index+1;this.trainData=this.actorData.getNextTrainDataByType(index);this.m_desc.text=Games.TEXT.GetRandomTrainAttr;this.m_desc.visible=false;this.m_title.text=this.trainData.name;this.m_attrList.numItems=this.trainData.property.length;this.m_upgradeBtn.m_goldIcon.icon=Game.config.item.getConfig(this.trainData.cost[0].itemId).iconUrl;this.m_upgradeBtn.m_cardIcon.icon=Game.config.item.getConfig(this.trainData.cost[1].itemId).iconUrl;this.m_upgradeBtn.m_gold.text=formatNumberUnit(data.upgradeTrainCostGoldNum(this.type))+"";this.m_upgradeBtn.m_page.text=formatNumberUnit(this.trainData.cost[1].itemNum)};ArtistTrainItem2.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_lockGroup.visible=false;this.m_attrList.itemRenderer=Handler.create(this,this.onUpdateAttrItem,null,false);this.m_upgradeBtn.onClick(this,this.onClickUpdateBtn)};ArtistTrainItem2.prototype.onClickUpdateBtn=function(){if(User.info.daysCultivateCount<User.trainNumCount){if(this.actorData.cultivateCount<this.actorData.cultivateCountLimit){this.checkItemEnough()}else{Game.system.toastText(Games.TEXT.ActorTrainMax)}}else{Game.system.toastText(Games.TEXT.CompanyTodayTrainMax)}};ArtistTrainItem2.prototype.checkItemEnough=function(){if(this.isMax){var enough=Games.ItemHelper.checkItemEnough(this.trainData.diamondsCost);if(enough){this.upgrade()}else{Game.system.openItemWay(this.trainData.diamondsCost.itemId,this.trainData.diamondsCost.itemNum)}}else{this.upgrade()}};ArtistTrainItem2.prototype.upgrade=function(){var goldCost=new DTItemNum();goldCost.itemId=this.trainData.cost[0].itemId;goldCost.itemNum=this.actorData.upgradeTrainCostGoldNum(this.type);var cost=[goldCost,this.trainData.cost[1]];var enough=Games.ItemHelper.checkItemsEnough(cost);if(enough){Game.protosender.Actor.actorTrain(this.actorData.uuid,this.type,this.isMax);Games.Static.Instance.onUserorbit("star",this.actorData.id.toString(),"foster");Games.Static.Instance.onUseGold("starFoster",this.trainData.diamondsCost.itemNum,"")}else{var notEnoughItem=Games.ItemHelper.getItemNotEnough(cost);Game.system.openItemWay(notEnoughItem.itemId,notEnoughItem.itemNum)}};ArtistTrainItem2.prototype.onUpdateAttrItem=function(index,item){var item1=item;var dtRandom=this.trainData.property_interval[index];var min=dtRandom[0];var max=dtRandom[1];if(this.isMax){item1.title=format("+ {0} ~ {1}",max,max)}else{item1.title=format("+ {0} ~ {1}",min,max)}var propConfig=Game.config.property.getConfig(this.trainData.property[index]);item1.icon=Game.config.avatar.getConfig(propConfig.icon).iconUrl};return ArtistTrainItem2}(PfSkin.ArtistTrainItem2Struct));PfSkin.ArtistTrainItem2=ArtistTrainItem2})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistTrainResultUIStruct=(function(_super){__extends(ArtistTrainResultUIStruct,_super);function ArtistTrainResultUIStruct(){return _super.call(this)||this}ArtistTrainResultUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistTrainResultUI"))};ArtistTrainResultUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_visible=this.getController("c_visible");this.m_c_action=this.getController("c_action");this.m_list=(this.getChild("list"));this.m_checktip1=(this.getChild("checktip1"));this.m_checktip2=(this.getChild("checktip2"));this.m_d1=(this.getChild("d1"));this.m_bedGroup=(this.getChild("bedGroup"));this.m_d2=(this.getChild("d2"));this.m_normalGroup=(this.getChild("normalGroup"));this.m_d3=(this.getChild("d3"));this.m_goodGroup=(this.getChild("goodGroup"));this.m_d4=(this.getChild("d4"));this.m_prefectGroup=(this.getChild("prefectGroup"));this.m_group=(this.getChild("group"));this.m_title=(this.getChild("title"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_okBtn=(this.getChild("okBtn"));this.m_vipCheckBox=(this.getChild("vipCheckBox"));this.m_container=(this.getChild("container"));this.m_effect1=(this.getChild("effect1"));this.m_effect2=(this.getChild("effect2"));this.m_effect3=(this.getChild("effect3"));this.m_effect4=(this.getChild("effect4"))};ArtistTrainResultUIStruct.URL="ui://s33x8418jazc1ld";ArtistTrainResultUIStruct.DependPackages=["PfSkin","Common","Fx"];return ArtistTrainResultUIStruct}(fairygui.GComponent));PfSkin.ArtistTrainResultUIStruct=ArtistTrainResultUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistTrainResultUI=(function(_super){__extends(ArtistTrainResultUI,_super);function ArtistTrainResultUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.pos=new Point();_this.pingjia=0;return _this}ArtistTrainResultUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.itemRenderer=Handler.create(this,this.onUpdateItem,null,false);this.m_checktip1.text=Games.TEXT.TrainCompleteRightNow;this.m_checktip2.text=Games.TEXT.HaveAgentCanComplete;this.m_okBtn.text=Games.TEXT.Sure};ArtistTrainResultUI.prototype.onWindowHide=function(){this.m_okBtn.offClick(this,this.onClickOkBtn);this.m_closeBtn.offClick(this,this.onClickCloseBtn);this.m_vipCheckBox.offClick(this,this.onChangedState);if(this.avatar){this.avatar.dispose();this.avatar=null}};ArtistTrainResultUI.prototype.onWindowShow=function(){this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_closeBtn.onClick(this,this.onClickCloseBtn);this.m_vipCheckBox.onClick(this,this.onChangedState);this.m_d1.visible=this.m_d2.visible=this.m_d3.visible=this.m_d4.visible=false};ArtistTrainResultUI.prototype.onChangedState=function(){if(this.m_vipCheckBox.selected){this.setAutoTrain()}else{Game.moduleModel.secretary.isAutoActorTrain=this.m_vipCheckBox.selected}};ArtistTrainResultUI.prototype.setAutoTrain=function(){if(Game.moduleModel.secretary.isForever){Game.moduleModel.secretary.isAutoActorTrain=this.m_vipCheckBox.selected}else{Game.system.confirmText(Game.config.msg.getTxtFormat(MsgKey.secretary_not_owned,Game.config.msg.getTxt(MsgKey.secretary_auto3)),TEXT.SecretaryForeverAgent,null,function(){Game.menu.open(MenuId.Weal,1)},null,Game.config.msg.getTxt(MsgKey.go_to_hire),TEXT.ButtonCannel,false);this.m_vipCheckBox.selected=false}};ArtistTrainResultUI.prototype.onClickCloseBtn=function(){this.moduleWindow.menuClose()};ArtistTrainResultUI.prototype.onClickOkBtn=function(){this.moduleWindow.menuClose()};ArtistTrainResultUI.prototype.onUpdateItem=function(index,item){var item1=item;item1.updateView(this.actorData,this.attrchangeInfo[index])};ArtistTrainResultUI.prototype.updateView=function(arg){var uuid=arg[0];var attrChangeInfo=arg[1];this.attrchangeInfo=attrChangeInfo;var trainType=arg[2];if(this.attrChangeDic==null){this.attrChangeDic=new Dictionary()}this.attrChangeDic.clear();var curMax=0;for(var index=0;index<attrChangeInfo.length;index++){var element=attrChangeInfo[index];curMax+=element.value;this.attrChangeDic.add(element.attrId,element.value)}this.trainType=trainType;this.m_vipCheckBox.selected=Game.moduleModel.secretary.isAutoActorTrain;this.actorData=Game.moduleModel.actor.getActorByUUid(uuid);this.m_list.numItems=attrChangeInfo.length;if(this.actorData){var attrAdds=[];for(var index=0;index<attrChangeInfo.length;index++){var element=attrChangeInfo[index];var dtItem=new DTItemNum();dtItem.itemId=element.attrId;dtItem.itemNum=element.value;attrAdds.push(dtItem)}Games.Static.Instance.onResourceoutput(attrAdds,"star&Pro&"+this.actorData.id,format("{0}&{1}&{2}&{3}&{4}",this.actorData.spectacle,this.actorData.perform,this.actorData.plot,this.actorData.art,this.actorData.entertainment));Game.system.playSkillEffect(this.actorData.id,Games.SkillTriggerType.upgrade_gold_cost);var trainData=this.actorData.getTrainDataByType(trainType);var max=0;for(var index=0;index<trainData.property.length;index++){var prop=trainData.property[index];for(var j=0;j<attrChangeInfo.length;j++){var element=attrChangeInfo[j];if(element.attrId==prop){max+=trainData.property_interval[index][1]}}}this.m_title.text=trainData.scene_name;var aInfo=Games.AvatarInfo.creatByAvatarId(this.actorData.id);this.avatar=Game.creator.creatEUnit(aInfo);this.avatar.showOn(this.m_container);var bounds=this.avatar.getBounds();this.avatar.pos((this.m_container.width)*0.5,bounds.height);this.avatar.setScale(0.4);this.avatar.openShadow();if(trainData){this.avatar.playAction(trainData.action)}this.m_c_action.selectedIndex=trainData.action==1017?1:0;var precent=Math.floor(curMax/max*100);if(precent>=0&&precent<=25){this.pingjia=1}else{if(precent>25&&precent<=50){this.pingjia=2}else{if(precent>50&&precent<=75){this.pingjia=3}else{if(precent>75&&precent<=100){this.pingjia=4}}}}}this.checkVipShow()};ArtistTrainResultUI.prototype.checkVipShow=function(){Laya.timer.clear(this,this.showAll);var isAtOnceShow=Game.moduleModel.secretary.isAutoActorTrain;var delay=0;switch(this.trainType){case 1:delay=GlobalConfig.getValue(GlobalKey.KEY_1027_YiRenPeiYang__ShiJianHaoMiao);this.effect1=this.m_effect1.m_t0;break;case 2:delay=GlobalConfig.getValue(GlobalKey.KEY_1028_YiRenPeiYang__ShiJianHaoMiao);this.effect1=this.m_effect2.m_t0;break;case 3:delay=GlobalConfig.getValue(GlobalKey.KEY_1029_YiRenPeiYang__ShiJianHaoMiao);this.effect1=this.m_effect3.m_t0;break;case 4:delay=GlobalConfig.getValue(GlobalKey.KEY_1030_YiRenPeiYang__ShiJianHaoMiao);this.effect1=this.m_effect4.m_t0;break}if(isAtOnceShow){this.isShowAll=true}else{this.isShowAll=false;Laya.timer.once(delay,this,this.showAll)}};ArtistTrainResultUI.prototype.showAll=function(){this.isShowAll=true};Object.defineProperty(ArtistTrainResultUI.prototype,"isShowAll",{set:function(value){this.m_group.visible=value;this.m_list.visible=value;this.m_okBtn.visible=value;this.m_closeBtn.visible=value;if(value){this.m_c_visible.selectedIndex=this.pingjia;this.effect1.play(null,1);Game.sound.playSound(SoundKey.MM34_CultrueArtist)}},enumerable:true,configurable:true});return ArtistTrainResultUI}(PfSkin.ArtistTrainResultUIStruct));PfSkin.ArtistTrainResultUI=ArtistTrainResultUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistTrainUIStruct=(function(_super){__extends(ArtistTrainUIStruct,_super);function ArtistTrainUIStruct(){return _super.call(this)||this}ArtistTrainUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistTrainUI"))};ArtistTrainUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_companyTrainTimes=(this.getChild("companyTrainTimes"));this.m_companyTimes=(this.getChild("companyTimes"));this.m_list=(this.getChild("list"));this.m_costTrain=(this.getChild("costTrain"));this.m_superTrainIcon=(this.getChild("superTrainIcon"));this.m_superTrainCost=(this.getChild("superTrainCost"));this.m_trainToGetMax=(this.getChild("trainToGetMax"));this.m_actorList=(this.getChild("actorList"));this.m_desc=(this.getChild("desc"));this.m_artistTrainTimes=(this.getChild("artistTrainTimes"));this.m_trainTimes=(this.getChild("trainTimes"));this.m_cardIcon=(this.getChild("cardIcon"));this.m_cardNum=(this.getChild("cardNum"));this.m_attrIcon1=(this.getChild("attrIcon1"));this.m_attrIcon2=(this.getChild("attrIcon2"));this.m_attrIcon3=(this.getChild("attrIcon3"));this.m_attrIcon4=(this.getChild("attrIcon4"));this.m_attrLabel1=(this.getChild("attrLabel1"));this.m_attrLabel2=(this.getChild("attrLabel2"));this.m_attrLabel3=(this.getChild("attrLabel3"));this.m_attrLabel4=(this.getChild("attrLabel4"));this.m_bgCom=(this.getChild("bgCom"));this.m_checkbox=(this.getChild("checkbox"));this.m_gold=(this.getChild("gold"));this.m_diamand=(this.getChild("diamand"))};ArtistTrainUIStruct.URL="ui://s33x8418jazc1le";ArtistTrainUIStruct.DependPackages=["PfSkin","Common"];return ArtistTrainUIStruct}(fairygui.GComponent));PfSkin.ArtistTrainUIStruct=ArtistTrainUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistTrainUI=(function(_super){__extends(ArtistTrainUI,_super);function ArtistTrainUI(){return _super!==null&&_super.apply(this,arguments)||this}ArtistTrainUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.attrLabels=[this.m_attrLabel1,this.m_attrLabel2,this.m_attrLabel3,this.m_attrLabel4];this.attrIcons=[this.m_attrIcon1,this.m_attrIcon2,this.m_attrIcon3,this.m_attrIcon4];this.m_list.itemRenderer=Handler.create(this,this.onUpdateItem,null,false);this.m_actorList.itemRenderer=Handler.create(this,this.onUpdateActorItem,null,false);this.m_actorList.on(fairygui.Events.CLICK_ITEM,this,this.onClickActorItem);this.m_checkbox.on(fairygui.Events.STATE_CHANGED,this,this.onChangedState);this.m_costTrain.text=Games.TEXT.DiamondTrain;this.m_trainToGetMax.text=Games.TEXT.DiamondMustBeMax;this.m_actorList.setVirtual();this.m_list.setVirtual()};ArtistTrainUI.prototype.onChangedState=function(){this.m_list.refreshVirtualList()};ArtistTrainUI.prototype.onClickActorItem=function(item){var index=this.m_actorList.getChildIndex(item);var realIndex=this.m_actorList.childIndexToItemIndex(index);this.currentActor=this.actors[realIndex];this.refreshView()};ArtistTrainUI.prototype.refreshView=function(){this.m_list.numItems=4;var props=this.currentActor.getProps();for(var index=0;index<props.length;index++){var id=props[index];var config=Game.config.property.getConfig(id);var field=config.field;var value=this.currentActor[field];this.attrIcons[index].icon=Game.config.avatar.getConfig(config.icon).iconUrl;this.attrLabels[index].text=value}this.m_artistTrainTimes.text=Games.TEXT.ActorCanUseTrain;this.m_trainTimes.text=format("{0}/{1}",this.currentActor.cultivateCount,this.currentActor.cultivateCountLimit);var dtItem=this.currentActor.getNextTrainDataByType(1).diamondsCost;this.m_superTrainCost.text=dtItem.itemNum+"";this.m_superTrainIcon.icon=dtItem.itemIconUrl;this.updateCompany();this.updateCard();this.m_desc.text=Games.TEXT.GetRandomTrainAttr};ArtistTrainUI.prototype.updateCompany=function(){this.m_companyTrainTimes.text=Games.TEXT.CompanyTodayTrain;this.m_companyTimes.text=format("{0}/{1}",User.info.daysCultivateCount,User.trainNumCount)};ArtistTrainUI.prototype.updateCard=function(){this.m_cardIcon.icon=Game.config.item.getConfig(5004).iconUrl;this.m_cardNum.text=formatNumberUnit(Game.moduleModel.item.getItemNum(5004));this.m_gold.setItemId(EItemId.gold);this.m_diamand.setItemId(EItemId.diamond)};ArtistTrainUI.prototype.onUpdateItem=function(index,item){var item2=item;item2.updateView(this.currentActor,index,this.m_checkbox.selected)};ArtistTrainUI.prototype.onUpdateActorItem=function(index,item){var item2=item;item2.updateView(this.actors[index])};ArtistTrainUI.prototype.updateView=function(id){this.selectedIndex=0;this.actors=Game.moduleModel.actor.getActors();if(id!=null){var actorData=Game.moduleModel.actor.getActor(id);this.selectedIndex=this.actors.indexOf(actorData)}this.m_actorList.numItems=this.actors.length;this.m_actorList.addSelection(this.selectedIndex,true);this.currentActor=this.actors[this.selectedIndex];this.refreshView()};ArtistTrainUI.prototype.onWindowShow=function(){console.log("show");Game.protoOkEvent.add(ProtoEventKey.ActorData,this.updateActorInfo,this);Game.protoOkEvent.add(ProtoEventKey.ItemData,this.updateItemInfo,this);Game.protoOkEvent.add(ProtoEventKey.GameInfo,this.updateCompany,this)};ArtistTrainUI.prototype.updateActorInfo=function(){this.refreshView()};ArtistTrainUI.prototype.updateItemInfo=function(){this.updateCard()};ArtistTrainUI.prototype.onWindowHide=function(){console.log("hide");Game.protoOkEvent.remove(ProtoEventKey.ActorData,this.updateActorInfo,this);Game.protoOkEvent.remove(ProtoEventKey.ItemData,this.updateItemInfo,this);Game.protoOkEvent.remove(ProtoEventKey.GameInfo,this.updateCompany,this)};return ArtistTrainUI}(PfSkin.ArtistTrainUIStruct));PfSkin.ArtistTrainUI=ArtistTrainUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistUIStruct=(function(_super){__extends(ArtistUIStruct,_super);function ArtistUIStruct(){return _super.call(this)||this}ArtistUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtistUI"))};ArtistUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_roomContainer=(this.getChild("roomContainer"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_listPanel=(this.getChild("listPanel"));this.m_findPanel=(this.getChild("findPanel"))};ArtistUIStruct.URL="ui://s33x8418jazc1lf";ArtistUIStruct.DependPackages=["PfSkin","Common","WarMovie","Fx","Building"];return ArtistUIStruct}(fairygui.GComponent));PfSkin.ArtistUIStruct=ArtistUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtistUI=(function(_super){__extends(ArtistUI,_super);function ArtistUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.buildIndex=-1;return _this}ArtistUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};ArtistUI.prototype.onClickCloseBtn=function(){if(this.moduleWindow.menuParameter.openIndex==Games.ArtistListSubType.FindPanel){this.showListPanel()}else{this.moduleWindow.menuClose()}};ArtistUI.prototype.onWindowHide=function(){this.m_closeBtn.offClick(this,this.onClickCloseBtn);this.hideBuildRoom()};ArtistUI.prototype.onWindowShow=function(){this.m_closeBtn.onClick(this,this.onClickCloseBtn);this.showBuildRoom()};ArtistUI.prototype.onOpenTab=function(tabIndex){switch(tabIndex){case Games.ArtistListSubType.FindPanel:if(Game.moduleModel.actor.isHaveNoseActor==false){this.m_findPanel.updateView()}else{this.moduleWindow.openTab(Games.ArtistListSubType.ListPanel)}break;case Games.ArtistListSubType.ListPanel:this.m_listPanel.updateView();break;default:break}};ArtistUI.prototype.showFindPanel=function(){this.moduleWindow.openTab(Games.ArtistListSubType.FindPanel)};ArtistUI.prototype.showListPanel=function(){this.moduleWindow.openTab(Games.ArtistListSubType.ListPanel)};ArtistUI.prototype.showBuildRoom=function(){this.buildRoom=Games.AvatarManager.context.getRoomByType(Games.RoomType.Actor);if(this.buildRoom!=null){this.buildRoom.onRoomInScreen();this.buildRoom.setRoomFrameVisible(false);this.buildIndex=Games.AvatarManager.context.getRoomIndexByType(Games.RoomType.Actor);this.buildRoom.mainView.setXY(-20,-4);this.buildRoom.mainView.setScale(1.05,1.05);this.m_roomContainer.addChild(this.buildRoom.mainView);var scale=ScreenSetting.screenWidth/this.buildRoom.mainView.sourceWidth;this.buildRoom.setScale(scale*1.05,1.05)}};ArtistUI.prototype.hideBuildRoom=function(){if(this.buildRoom){this.buildRoom.setXY(0,0);this.buildRoom.setScale(1,1);this.buildRoom.setRoomFrameVisible(true);Games.AvatarManager.context.addRoomAt(this.buildRoom,this.buildIndex)}};ArtistUI.prototype.selectActor=function(lv){return this.m_listPanel.selectActor(lv)};return ArtistUI}(PfSkin.ArtistUIStruct));PfSkin.ArtistUI=ArtistUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtListExerciseItemStruct=(function(_super){__extends(ArtListExerciseItemStruct,_super);function ArtListExerciseItemStruct(){return _super.call(this)||this}ArtListExerciseItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtListExerciseItem"))};ArtListExerciseItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_noneActorBg=(this.getChild("noneActorBg"));this.m_onActorBg=(this.getChild("onActorBg"));this.m_timeText=(this.getChild("timeText"));this.m_desc=(this.getChild("desc"));this.m_costText=(this.getChild("costText"));this.m_assetIcon=(this.getChild("assetIcon"));this.m_onExpercise=(this.getChild("onExpercise"));this.m_t1=(this.getChild("t1"));this.m_tkey=(this.getChild("tkey"));this.m_tvalue=(this.getChild("tvalue"));this.m_completeExpercise=(this.getChild("completeExpercise"));this.m_noneActorDesc=(this.getChild("noneActorDesc"));this.m_iconLoader=(this.getChild("iconLoader"));this.m_bar=(this.getChild("bar"));this.m_quickBtn=(this.getChild("quickBtn"));this.m_iconBtn=(this.getChild("iconBtn"))};ArtListExerciseItemStruct.URL="ui://s33x8418rn1rt1vp";ArtListExerciseItemStruct.DependPackages=["PfSkin","Common","System"];return ArtListExerciseItemStruct}(fairygui.GComponent));PfSkin.ArtListExerciseItemStruct=ArtListExerciseItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtListExerciseItem=(function(_super){__extends(ArtListExerciseItem,_super);function ArtListExerciseItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.uuid="";_this.totalTime=0;_this.cutDownTime=0;_this.quickExperciseCost=0;_this.isClickQuick=false;return _this}ArtListExerciseItem.prototype.setInfo=function(uuid,info){this.uuid=uuid;this.info=info;this.totalTime=Game.config.global.getConfig(GlobalKey.Actor_Train_Time).value*60-MathDesign.calcActorExperciseDerateTime()*60;this.m_iconBtn.onClick(this,this.onActorExercise);this.m_quickBtn.onClick(this,this.onQuickExercise);this.m_quickBtn.m_title.text=TEXT.ActorExperciseExpedite;this.m_completeExpercise.visible=false;this.m_onActorBg.visible=false;this.m_noneActorBg.visible=false;this.isClickQuick=false;if(info.uuid==""){this.m_noneActorBg.visible=true;this.m_iconBtn.visible=true;this.stopTimeCutdown();this.m_onExpercise.visible=false;this.m_timeText.text="";this.m_noneActorDesc.text=TEXT.ActorExperciserStart;this.m_iconLoader.url=""}else{var actorId=0;var actorData=Game.moduleModel.actor.getActorByUUid(info.uuid);if(actorData){actorId=actorData.id}this.actorCfg=Game.config.actor.getConfig(actorId);if(this.actorCfg){this.m_iconLoader.url=this.actorCfg.avatarConfig.bodyIconUrl}this.m_onActorBg.visible=true;this.m_iconBtn.visible=false;this.m_onExpercise.visible=true;this.m_desc.text=TEXT.ActorExperciserOn;this.m_noneActorDesc.text="";this.m_assetIcon.url=Game.config.item.getConfig(Games.AssetType.Diamond).iconUrl;this.startTimeCutdown()}};ArtListExerciseItem.prototype.dispose=function(){this.stopTimeCutdown()};Object.defineProperty(ArtListExerciseItem.prototype,"complete",{get:function(){return this.info&&this.info.isComplete},enumerable:true,configurable:true});ArtListExerciseItem.prototype.startTimeCutdown=function(){this.cutDownTime=this.totalTime-Game.time.getSubSecondsPre(this.info.startTime);if(this.cutDownTime<=0){this.setExperciseComplete()}else{this.onTimeCutDown();Laya.timer.loop(1000,this,this.onTimeCutDown,null,true,true)}};ArtListExerciseItem.prototype.stopTimeCutdown=function(){Laya.timer.clear(this,this.onTimeCutDown)};ArtListExerciseItem.prototype.onTimeCutDown=function(){this.cutDownTime--;if(this.cutDownTime>=0){this.quickExperciseCost=this.getQuickExperciseCost(this.cutDownTime);this.updateQuickExperciseCost(this.cutDownTime);this.m_timeText.text=TimeHelper.TimeFormat(this.cutDownTime);this.m_bar.value=Math.round((this.totalTime-this.cutDownTime)*100/this.totalTime)}else{this.setExperciseComplete()}};ArtListExerciseItem.prototype.getQuickExperciseCost=function(leftTime){return Math.round(leftTime/60/5)};ArtListExerciseItem.prototype.updateQuickExperciseCost=function(leftTime){var cost=this.getQuickExperciseCost(leftTime);this.m_costText.text=cost.toString();if(cost==0){this.m_quickBtn.visible=false}};ArtListExerciseItem.prototype.onActorExercise=function(){console.log("onActorExercise");var selectActorPanel=PfSkin.ActorExperciseSelectPanel.createInstance();selectActorPanel.showForParent(this.uuid)};ArtListExerciseItem.prototype.onQuickExercise=function(){var _this=this;console.log("onQuickExercise");var cost=new DTItemNum();cost.itemId=Games.AssetType.Diamond;cost.itemNum=this.getQuickExperciseCost(this.cutDownTime);if(!this.isClickQuick){Game.system.confirmTextIcon([cost],TEXT.NoticeTitle,TEXT.ActorExperciseQuick,function(){if(!ItemHelper.checkItemEnough(cost)){Game.system.openItemWay(cost.itemId,cost.itemNum);return}_this.isClickQuick=true;Game.protosender.Actor.ActorExerciseReward(_this.uuid,true)})}};ArtListExerciseItem.prototype.setExperciseComplete=function(){this.stopTimeCutdown();this.m_t1.text=TEXT.ActorExperciceCompleteDesc;this.m_tkey.text=TEXT.ActorExperciceKey;var expVal=Game.config.global.getConfig(GlobalKey.Actor_Train_Exp).value;this.m_tvalue.text=MathDesign.calcActorExperciseExp().toString();this.m_completeExpercise.visible=true;this.m_onExpercise.visible=false;Game.moduleModel.actor.setActorExerciseStaus(this.info.seatUuid,true);this.m_bar.value=100};return ArtListExerciseItem}(PfSkin.ArtListExerciseItemStruct));PfSkin.ArtListExerciseItem=ArtListExerciseItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtListExerciseUIStruct=(function(_super){__extends(ArtListExerciseUIStruct,_super);function ArtListExerciseUIStruct(){return _super.call(this)||this}ArtListExerciseUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ArtListExerciseUI"))};ArtListExerciseUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_listItem=(this.getChild("listItem"));this.m_effectText=(this.getChild("effectText"));this.m_levelText=(this.getChild("levelText"));this.m_slotText=(this.getChild("slotText"));this.m_roomContainer=(this.getChild("roomContainer"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_addSlotBtn=(this.getChild("addSlotBtn"))};ArtListExerciseUIStruct.URL="ui://s33x8418rn1rt1vr";ArtListExerciseUIStruct.DependPackages=["PfSkin","Common","Building","System"];return ArtListExerciseUIStruct}(fairygui.GComponent));PfSkin.ArtListExerciseUIStruct=ArtListExerciseUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ArtListExerciseUI=(function(_super){__extends(ArtListExerciseUI,_super);function ArtListExerciseUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.buildIndex=-1;return _this}ArtListExerciseUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_closeBtn.onClick(this,this.onClosePanel);this.m_addSlotBtn.onClick(this,this.onAddSlotClick)};ArtListExerciseUI.prototype.onWindowShow=function(){this.showActorRoom();var roomLevel=Game.moduleModel.building.getRoomLevel(Games.RoomType.Training);this.m_levelText.text=format(Game.config.msg.getTxtFormat(MsgKey.train_title_level,roomLevel));this.m_effectText.text=format(Game.config.msg.getTxtFormat(MsgKey.train_title_tips,MathDesign.calcActorExperciseExp()));this.updateListView();this.m_listItem.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem);Game.protoOkEvent.add(ProtoEventKey.Actor_ActorExerciseStart,this.callBackActorExerciseStart,this);Game.protoOkEvent.add(ProtoEventKey.Actor_ActorExerciseAdd,this.callBackActorExerciseAdd,this);Game.protoOkEvent.add(ProtoEventKey.Actor_ActorExerciseReward,this.callBackActorExerciseReward,this)};ArtListExerciseUI.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.Actor_ActorExerciseStart,this.callBackActorExerciseStart,this);Game.protoOkEvent.remove(ProtoEventKey.Actor_ActorExerciseAdd,this.callBackActorExerciseAdd,this);Game.protoOkEvent.remove(ProtoEventKey.Actor_ActorExerciseReward,this.callBackActorExerciseReward,this);this.m_listItem.off(fairygui.Events.CLICK_ITEM,this,this.onClickItem);this.hideActorRoom()};ArtListExerciseUI.prototype.onClosePanel=function(){Game.menu.close(MenuId.ArtListExercise)};ArtListExerciseUI.prototype.callBackActorExerciseStart=function(proto){this.updateListView();Game.event.dispatch(GameEventKey.GameEventKey_ActorExperciseStart,proto.aId)};ArtListExerciseUI.prototype.callBackActorExerciseReward=function(proto){this.updateListView();Game.event.dispatch(GameEventKey.GameEventKey_ActorExperciseEnd,proto.aId,proto.eId)};ArtListExerciseUI.prototype.callBackActorExerciseAdd=function(proto){this.updateListView()};ArtListExerciseUI.prototype.onClickItem=function(item){if(item.complete){Game.moduleModel.actor.setActorExerciseStaus(item.uuid,true);Game.protosender.Actor.ActorExerciseReward(item.uuid,false)}};ArtListExerciseUI.prototype.updateListView=function(){var actorExerciseDataList=Game.moduleModel.actor.getExperciseDataList();actorExerciseDataList.sort(function(a,b){return a.seatIndex-b.seatIndex});this.m_listItem.removeChildrenToPool();for(var i=0;i<actorExerciseDataList.length;i++){var actorExerciseData=actorExerciseDataList[i];var exerciseItem=this.m_listItem.addItemFromPool();exerciseItem.setInfo(actorExerciseData.seatUuid,actorExerciseData);this.m_listItem.addChild(exerciseItem)}this.m_slotText.text=Game.config.msg.getTxtFormat(MsgKey.train_area_tips,Game.moduleModel.actor.onExperciseCount,actorExerciseDataList.length)};ArtListExerciseUI.prototype.onAddSlotClick=function(){console.log("onAddSlotClick");var slotCount=Game.moduleModel.actor.getActorExerciseDataKeys().length;var slotCostList=Game.config.global.getConfig(GlobalKey.Training_Area_Price).value2;if(slotCount>=slotCostList.length+1){Game.system.toastText(TEXT.ActorExperciseMaxLine);return}Game.system.confirmTextIcon(this.getSoltCost(),TEXT.NoticeTitle,TEXT.ActorExperciseUnlock,function(){var currentCost=slotCostList[slotCount-1];if(ItemHelper.checkItemEnough2(currentCost.v1,currentCost.v2)){Game.protosender.Actor.ActorExerciseAdd()}else{Game.system.openItemWay(currentCost.v1,currentCost.v2)}})};ArtListExerciseUI.prototype.getSoltCost=function(){var result=new DTItemNum();var priceList=Game.config.global.getConfig(GlobalKey.Training_Area_Price).value2;var currentSoltCount=Game.moduleModel.actor.getExperciseDataList().length;var minIndex=Math.min(currentSoltCount,priceList.length);minIndex=Math.max(0,minIndex-1);var price=priceList[minIndex];if(price){result.itemId=price.v1;result.itemNum=price.v2}return[result]};ArtListExerciseUI.prototype.showActorRoom=function(){this.buildRoom=Games.AvatarManager.context.getRoomByType(Games.RoomType.Training);if(this.buildRoom!=null){this.buildRoom.onRoomInScreen();this.buildRoom.setRoomFrameVisible(false);this.buildRoom.setXY(-20,-15);this.buildRoom.setScale(1.05,1.05);this.buildIndex=Games.AvatarManager.context.getRoomIndexByType(Games.RoomType.Training);this.m_roomContainer.addChild(this.buildRoom.mainView);var scale=ScreenSetting.screenWidth/this.buildRoom.mainView.sourceWidth;this.buildRoom.setScale(scale*1.05,1.05)}};ArtListExerciseUI.prototype.hideActorRoom=function(){if(this.buildRoom){this.buildRoom.setXY(0,0);this.buildRoom.setScale(1,1);this.buildRoom.setRoomFrameVisible(true);Games.AvatarManager.context.addRoomAt(this.buildRoom,this.buildIndex);this.buildRoom.mainView.removeRelation(this.m_roomContainer,fairygui.RelationType.Size)}};return ArtListExerciseUI}(PfSkin.ArtListExerciseUIStruct));PfSkin.ArtListExerciseUI=ArtListExerciseUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var BtnBigAddStruct=(function(_super){__extends(BtnBigAddStruct,_super);function BtnBigAddStruct(){return _super.call(this)||this}BtnBigAddStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","BtnBigAdd"))};BtnBigAddStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};BtnBigAddStruct.URL="ui://s33x8418itjot1xd";BtnBigAddStruct.DependPackages=["PfSkin","Common"];return BtnBigAddStruct}(fairygui.GButton));PfSkin.BtnBigAddStruct=BtnBigAddStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var BtnBigAdd=(function(_super){__extends(BtnBigAdd,_super);function BtnBigAdd(){return _super!==null&&_super.apply(this,arguments)||this}return BtnBigAdd}(PfSkin.BtnBigAddStruct));PfSkin.BtnBigAdd=BtnBigAdd})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var BtnShopTabStruct=(function(_super){__extends(BtnShopTabStruct,_super);function BtnShopTabStruct(){return _super.call(this)||this}BtnShopTabStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","btnShopTab"))};BtnShopTabStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_grayed=this.getController("grayed");this.m_title=(this.getChild("title"));this.m_red=(this.getChild("red"))};BtnShopTabStruct.URL="ui://s33x8418ap5a1uw";BtnShopTabStruct.DependPackages=["PfSkin","MainUI"];return BtnShopTabStruct}(fairygui.GButton));PfSkin.BtnShopTabStruct=BtnShopTabStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var BtnShopTab=(function(_super){__extends(BtnShopTab,_super);function BtnShopTab(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(BtnShopTab.prototype,"Red",{set:function(num){this.m_red.m_num.text=num.toString();this.m_red.visible=num>0},enumerable:true,configurable:true});return BtnShopTab}(PfSkin.BtnShopTabStruct));PfSkin.BtnShopTab=BtnShopTab})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var CheckBoxStruct=(function(_super){__extends(CheckBoxStruct,_super);function CheckBoxStruct(){return _super.call(this)||this}CheckBoxStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","CheckBox"))};CheckBoxStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};CheckBoxStruct.URL="ui://s33x8418n2px1n5";CheckBoxStruct.DependPackages=["PfSkin","Common"];return CheckBoxStruct}(fairygui.GButton));PfSkin.CheckBoxStruct=CheckBoxStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var CheckBox=(function(_super){__extends(CheckBox,_super);function CheckBox(){return _super!==null&&_super.apply(this,arguments)||this}return CheckBox}(PfSkin.CheckBoxStruct));PfSkin.CheckBox=CheckBox})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var CheckMarkStruct=(function(_super){__extends(CheckMarkStruct,_super);function CheckMarkStruct(){return _super.call(this)||this}CheckMarkStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","CheckMark"))};CheckMarkStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1")};CheckMarkStruct.URL="ui://s33x8418eb3n1o0";CheckMarkStruct.DependPackages=["PfSkin","Common"];return CheckMarkStruct}(fairygui.GComponent));PfSkin.CheckMarkStruct=CheckMarkStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var CheckMark=(function(_super){__extends(CheckMark,_super);function CheckMark(){return _super!==null&&_super.apply(this,arguments)||this}return CheckMark}(PfSkin.CheckMarkStruct));PfSkin.CheckMark=CheckMark})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var CommonBtnStruct=(function(_super){__extends(CommonBtnStruct,_super);function CommonBtnStruct(){return _super.call(this)||this}CommonBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","CommonBtn"))};CommonBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_red=(this.getChild("red"))};CommonBtnStruct.URL="ui://s33x8418jazc1mc";CommonBtnStruct.DependPackages=["PfSkin"];return CommonBtnStruct}(fairygui.GButton));PfSkin.CommonBtnStruct=CommonBtnStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var CommonBtn=(function(_super){__extends(CommonBtn,_super);function CommonBtn(){return _super!==null&&_super.apply(this,arguments)||this}return CommonBtn}(PfSkin.CommonBtnStruct));PfSkin.CommonBtn=CommonBtn})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var CommonDialogUIStruct=(function(_super){__extends(CommonDialogUIStruct,_super);function CommonDialogUIStruct(){return _super.call(this)||this}CommonDialogUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","CommonDialogUI"))};CommonDialogUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_closeBtn=(this.getChild("closeBtn"))};CommonDialogUIStruct.URL="ui://s33x8418jazc1me";CommonDialogUIStruct.DependPackages=["PfSkin","Common"];return CommonDialogUIStruct}(fairygui.GComponent));PfSkin.CommonDialogUIStruct=CommonDialogUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var CommonDialogUI=(function(_super){__extends(CommonDialogUI,_super);function CommonDialogUI(){return _super!==null&&_super.apply(this,arguments)||this}return CommonDialogUI}(PfSkin.CommonDialogUIStruct));PfSkin.CommonDialogUI=CommonDialogUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var EmptyBtnStruct=(function(_super){__extends(EmptyBtnStruct,_super);function EmptyBtnStruct(){return _super.call(this)||this}EmptyBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","EmptyBtn"))};EmptyBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};EmptyBtnStruct.URL="ui://s33x8418lq441uj";EmptyBtnStruct.DependPackages=["PfSkin"];return EmptyBtnStruct}(fairygui.GButton));PfSkin.EmptyBtnStruct=EmptyBtnStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var EmptyBtn=(function(_super){__extends(EmptyBtn,_super);function EmptyBtn(){return _super!==null&&_super.apply(this,arguments)||this}return EmptyBtn}(PfSkin.EmptyBtnStruct));PfSkin.EmptyBtn=EmptyBtn})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var GoodsIconStruct=(function(_super){__extends(GoodsIconStruct,_super);function GoodsIconStruct(){return _super.call(this)||this}GoodsIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","GoodsIcon"))};GoodsIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_itemType=this.getController("itemType");this.m_labItem=(this.getChild("labItem"));this.m_pactIcon=(this.getChild("pactIcon"))};GoodsIconStruct.URL="ui://s33x8418l5idt26z";GoodsIconStruct.DependPackages=["PfSkin","Common"];return GoodsIconStruct}(fairygui.GComponent));PfSkin.GoodsIconStruct=GoodsIconStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var GoodsIcon=(function(_super){__extends(GoodsIcon,_super);function GoodsIcon(){return _super!==null&&_super.apply(this,arguments)||this}GoodsIcon.prototype.RenderItem=function(data){if(data==null){return}this.itemDate=Games.ItemData.Create(data.itemId,data.itemNum);if(this.itemDate.itemType==7){this.m_itemType.setSelectedIndex(1);this.m_pactIcon.Render(this.itemDate)}else{this.m_itemType.setSelectedIndex(0);this.m_labItem.RenderItem(this.itemDate)}};return GoodsIcon}(PfSkin.GoodsIconStruct));PfSkin.GoodsIcon=GoodsIcon})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var GoodsLineStruct=(function(_super){__extends(GoodsLineStruct,_super);function GoodsLineStruct(){return _super.call(this)||this}GoodsLineStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","GoodsLine"))};GoodsLineStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_Goods1=(this.getChild("Goods1"));this.m_Goods2=(this.getChild("Goods2"));this.m_Goods3=(this.getChild("Goods3"))};GoodsLineStruct.URL="ui://s33x8418kl6dt21p";GoodsLineStruct.DependPackages=["PfSkin","Common"];return GoodsLineStruct}(fairygui.GComponent));PfSkin.GoodsLineStruct=GoodsLineStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var GoodsLine=(function(_super){__extends(GoodsLine,_super);function GoodsLine(){return _super!==null&&_super.apply(this,arguments)||this}GoodsLine.prototype.RenderItem=function(data,buyHandler){this.goodsLine=data;this.buyHandler=buyHandler;if(this.goodsLine&&this.goodsLine.length>0){if(this.goodsLine[0]){this.m_Goods1.visible=true;this.m_Goods1.RenderItem(this.goodsLine[0]);this.m_Goods1.buyHandler=this.buyHandler}else{this.m_Goods1.visible=false}if(this.goodsLine[1]){this.m_Goods2.visible=true;this.m_Goods2.RenderItem(this.goodsLine[1]);this.m_Goods2.buyHandler=this.buyHandler}else{this.m_Goods2.visible=false}if(this.goodsLine[2]){this.m_Goods3.visible=true;this.m_Goods3.RenderItem(this.goodsLine[2]);this.m_Goods3.buyHandler=this.buyHandler}else{this.m_Goods3.visible=false}}};return GoodsLine}(PfSkin.GoodsLineStruct));PfSkin.GoodsLine=GoodsLine})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var GroupItemRewardDialogStruct=(function(_super){__extends(GroupItemRewardDialogStruct,_super);function GroupItemRewardDialogStruct(){return _super.call(this)||this}GroupItemRewardDialogStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","GroupItemRewardDialog"))};GroupItemRewardDialogStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"))};GroupItemRewardDialogStruct.URL="ui://s33x8418eb3n1o2";GroupItemRewardDialogStruct.DependPackages=["PfSkin","Common"];return GroupItemRewardDialogStruct}(fairygui.GComponent));PfSkin.GroupItemRewardDialogStruct=GroupItemRewardDialogStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var GroupItemRewardDialog=(function(_super){__extends(GroupItemRewardDialog,_super);function GroupItemRewardDialog(){return _super!==null&&_super.apply(this,arguments)||this}GroupItemRewardDialog.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.itemRenderer=Handler.create(this,this.updateItemRender,null,false)};GroupItemRewardDialog.prototype.updateItemRender=function(index,item){item.icon=Game.config.item.getConfig(this.items[index].itemId).iconUrl;item.text=this.items[index].itemNum+""};GroupItemRewardDialog.prototype.updateView=function(items){this.items=items;this.m_list.numItems=items.length;var line=items.length;this.m_list.viewWidth=(this.m_list.columnGap+75)*line};return GroupItemRewardDialog}(PfSkin.GroupItemRewardDialogStruct));PfSkin.GroupItemRewardDialog=GroupItemRewardDialog})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LabCostStruct=(function(_super){__extends(LabCostStruct,_super);function LabCostStruct(){return _super.call(this)||this}LabCostStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","LabCost"))};LabCostStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_number=(this.getChild("number"))};LabCostStruct.URL="ui://s33x8418gkgst1yl";LabCostStruct.DependPackages=["PfSkin","Common"];return LabCostStruct}(fairygui.GComponent));PfSkin.LabCostStruct=LabCostStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LabCost=(function(_super){__extends(LabCost,_super);function LabCost(){return _super!==null&&_super.apply(this,arguments)||this}return LabCost}(PfSkin.LabCostStruct));PfSkin.LabCost=LabCost})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LabCost2Struct=(function(_super){__extends(LabCost2Struct,_super);function LabCost2Struct(){return _super.call(this)||this}LabCost2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","LabCost2"))};LabCost2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_number=(this.getChild("number"))};LabCost2Struct.URL="ui://s33x8418kl6dt21o";LabCost2Struct.DependPackages=["PfSkin","Common"];return LabCost2Struct}(fairygui.GLabel));PfSkin.LabCost2Struct=LabCost2Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LabCost2=(function(_super){__extends(LabCost2,_super);function LabCost2(){return _super!==null&&_super.apply(this,arguments)||this}return LabCost2}(PfSkin.LabCost2Struct));PfSkin.LabCost2=LabCost2})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LabItem_bigStruct=(function(_super){__extends(LabItem_bigStruct,_super);function LabItem_bigStruct(){return _super.call(this)||this}LabItem_bigStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","LabItem_big"))};LabItem_bigStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_trColor=this.getController("trColor");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_star=(this.getChild("star"))};LabItem_bigStruct.URL="ui://s33x8418ap5a1v0";LabItem_bigStruct.DependPackages=["PfSkin","Common"];return LabItem_bigStruct}(fairygui.GButton));PfSkin.LabItem_bigStruct=LabItem_bigStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LabItem_big=(function(_super){__extends(LabItem_big,_super);function LabItem_big(){return _super!==null&&_super.apply(this,arguments)||this}LabItem_big.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.OnClick)};LabItem_big.prototype.OnClick=function(){if(this.itemData!=null){Game.system.showItemInfo(this,this.itemData.itemId)}};LabItem_big.prototype.RenderItem=function(data){if(data==null){return}if(data.itemIconUrl){this.itemData=data}else{this.itemData=Games.ItemData.Create(data.itemId,data.itemNum)}this.title=this.itemData.itemNumTxt;this.icon=this.itemData.itemIconUrl;this.m_star.starNum=this.itemData.itemStar};Object.defineProperty(LabItem_big.prototype,"ItemId",{set:function(itemId){this.m_icon.url=Game.config.item.getItemIcon(itemId);this.m_star.starNum=Game.config.item.getStarNum(itemId)},enumerable:true,configurable:true});return LabItem_big}(PfSkin.LabItem_bigStruct));PfSkin.LabItem_big=LabItem_big})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LeftTimeBtnStruct=(function(_super){__extends(LeftTimeBtnStruct,_super);function LeftTimeBtnStruct(){return _super.call(this)||this}LeftTimeBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","LeftTimeBtn"))};LeftTimeBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"));this.m_costIcon=(this.getChild("costIcon"));this.m_title2=(this.getChild("title2"))};LeftTimeBtnStruct.URL="ui://s33x8418aqgxt1x0";LeftTimeBtnStruct.DependPackages=["PfSkin","Common"];return LeftTimeBtnStruct}(fairygui.GButton));PfSkin.LeftTimeBtnStruct=LeftTimeBtnStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LeftTimeBtn=(function(_super){__extends(LeftTimeBtn,_super);function LeftTimeBtn(){return _super!==null&&_super.apply(this,arguments)||this}return LeftTimeBtn}(PfSkin.LeftTimeBtnStruct));PfSkin.LeftTimeBtn=LeftTimeBtn})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LineTextStruct=(function(_super){__extends(LineTextStruct,_super);function LineTextStruct(){return _super.call(this)||this}LineTextStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","LineText"))};LineTextStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};LineTextStruct.URL="ui://s33x8418jazc1mh";LineTextStruct.DependPackages=["PfSkin"];return LineTextStruct}(fairygui.GButton));PfSkin.LineTextStruct=LineTextStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LineText=(function(_super){__extends(LineText,_super);function LineText(){return _super!==null&&_super.apply(this,arguments)||this}return LineText}(PfSkin.LineTextStruct));PfSkin.LineText=LineText})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LyChair1Struct=(function(_super){__extends(LyChair1Struct,_super);function LyChair1Struct(){return _super.call(this)||this}LyChair1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","LyChair1"))};LyChair1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};LyChair1Struct.URL="ui://s33x8418sm6tt1vk";LyChair1Struct.DependPackages=["PfSkin"];return LyChair1Struct}(fairygui.GComponent));PfSkin.LyChair1Struct=LyChair1Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LyChair1=(function(_super){__extends(LyChair1,_super);function LyChair1(){return _super!==null&&_super.apply(this,arguments)||this}return LyChair1}(PfSkin.LyChair1Struct));PfSkin.LyChair1=LyChair1})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LyChair2Struct=(function(_super){__extends(LyChair2Struct,_super);function LyChair2Struct(){return _super.call(this)||this}LyChair2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","LyChair2"))};LyChair2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};LyChair2Struct.URL="ui://s33x8418sm6tt1vl";LyChair2Struct.DependPackages=["PfSkin"];return LyChair2Struct}(fairygui.GComponent));PfSkin.LyChair2Struct=LyChair2Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LyChair2=(function(_super){__extends(LyChair2,_super);function LyChair2(){return _super!==null&&_super.apply(this,arguments)||this}return LyChair2}(PfSkin.LyChair2Struct));PfSkin.LyChair2=LyChair2})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LyChair3Struct=(function(_super){__extends(LyChair3Struct,_super);function LyChair3Struct(){return _super.call(this)||this}LyChair3Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","LyChair3"))};LyChair3Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};LyChair3Struct.URL="ui://s33x8418sm6tt1vm";LyChair3Struct.DependPackages=["PfSkin"];return LyChair3Struct}(fairygui.GComponent));PfSkin.LyChair3Struct=LyChair3Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LyChair3=(function(_super){__extends(LyChair3,_super);function LyChair3(){return _super!==null&&_super.apply(this,arguments)||this}return LyChair3}(PfSkin.LyChair3Struct));PfSkin.LyChair3=LyChair3})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LyChair4Struct=(function(_super){__extends(LyChair4Struct,_super);function LyChair4Struct(){return _super.call(this)||this}LyChair4Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","LyChair4"))};LyChair4Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};LyChair4Struct.URL="ui://s33x8418sm6tt1vn";LyChair4Struct.DependPackages=["PfSkin"];return LyChair4Struct}(fairygui.GComponent));PfSkin.LyChair4Struct=LyChair4Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LyChair4=(function(_super){__extends(LyChair4,_super);function LyChair4(){return _super!==null&&_super.apply(this,arguments)||this}return LyChair4}(PfSkin.LyChair4Struct));PfSkin.LyChair4=LyChair4})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LyContainerStruct=(function(_super){__extends(LyContainerStruct,_super);function LyContainerStruct(){return _super.call(this)||this}LyContainerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","LyContainer"))};LyContainerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};LyContainerStruct.URL="ui://s33x8418sm6tt1vo";LyContainerStruct.DependPackages=["PfSkin"];return LyContainerStruct}(fairygui.GComponent));PfSkin.LyContainerStruct=LyContainerStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LyContainer=(function(_super){__extends(LyContainer,_super);function LyContainer(){return _super!==null&&_super.apply(this,arguments)||this}return LyContainer}(PfSkin.LyContainerStruct));PfSkin.LyContainer=LyContainer})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var LyShowStruct=(function(_super){__extends(LyShowStruct,_super);function LyShowStruct(){return _super.call(this)||this}LyShowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","LyShow"))};LyShowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_ChairGroup1=(this.getChild("ChairGroup1"));this.m_ChairGroup2=(this.getChild("ChairGroup2"));this.m_ChairGroup3=(this.getChild("ChairGroup3"));this.m_ChairGroup4=(this.getChild("ChairGroup4"));this.m_voice=(this.getChild("voice"));this.m_avatarContainner=(this.getChild("avatarContainner"))};LyShowStruct.URL="ui://s33x8418sm6tt1vd";LyShowStruct.DependPackages=["PfSkin","Fx"];return LyShowStruct}(fairygui.GComponent));PfSkin.LyShowStruct=LyShowStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var PerformType=Games.PerformType;var AvatarManager=Games.AvatarManager;var LyShow=(function(_super){__extends(LyShow,_super);function LyShow(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.chairList=[];_this.avatarList=[];_this.speekerId=0;_this.isSpeekerBeginTalk=true;_this.currActorName="";_this.isRoadShowSuccess=false;_this._isRoadShowEnd=false;return _this}LyShow.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.setScale(0.67,0.67);this.setPivot(0.5,0.5)};LyShow.prototype.showFor=function(parent,context){this.context=context;this.initAudience();parent.addChild(this);AvatarManager.sBehaviorFinish.add(this.onAvatarBehaviorFinish,this);AvatarManager.sEventFinish.add(this.onAvatarEventFinish,this);this.addRelation(parent,fairygui.RelationType.Center_Center);this.addRelation(parent,fairygui.RelationType.Middle_Middle);this.startShow()};LyShow.prototype.startShow=function(){var _this=this;this.tween=Laya.Tween.to(this,{scaleX:0.8,scaleY:0.8},1500,Laya.Ease.linearIn,Handler.create(null,function(){if(!_this.speeker){_this.creatSpeeker();_this.curActorData=_this.context.currentActorData();_this.currActorName=Game.config.actor.getConfig(_this.curActorData.id).name}}),0,true,true)};LyShow.prototype.endShow=function(){this.context.OnAnimFinish();this.dispose()};LyShow.prototype.dispose=function(){AvatarManager.sBehaviorFinish.remove(this.onAvatarBehaviorFinish,this);AvatarManager.sEventFinish.remove(this.onAvatarEventFinish,this);if(this.tween!=null){Laya.Tween.clear(this.tween);this.tween=null}if(this.speeker){this.speeker.endEvent(false);this.speeker.dispose();this.speeker=null}if(this.curActor&&!this.curActor.isDisposed){this.curActor.endEvent(false);this.curActor.dispose();this.curActor=null}this.avatarList.forEach(function(value,index,array){value.dispose()});this.avatarList.length=0;this.context=null;this.removeFromParent();Game.stageManager.roadshow.isActive=false};LyShow.prototype.addUnit=function(unit){this.mainScene&&this.mainScene.addUnit(unit)};LyShow.prototype.removeUnit=function(unit){this.mainScene&&this.mainScene.removeUnit(unit.unit.uid)};Object.defineProperty(LyShow.prototype,"isRoadShowEnd",{get:function(){return this._isRoadShowEnd},set:function(value){if(value){this.isRoadShowSuccess=Game.moduleModel.market.Info.roadShowFlag}this._isRoadShowEnd=value},enumerable:true,configurable:true});LyShow.prototype.setTalkParams=function(events){for(var _i=0,events_1=events;_i<events_1.length;_i++){var event_1=events_1[_i];var argName="";switch(event_1.evtId){case 7102:event_1.setTalkParams(User.info.name,this.currActorName);break;case 7105:var popularvalue=this.context.curActorPopularValue(this.curActorData);event_1.setTalkParams(this.currActorName,popularvalue);break;case 7108:case 7109:argName=Game.moduleModel.market.GetLastCity().name;event_1.setTalkParams(argName);break;case 7113:switch(event_1.actionInfo.talkActionId){case 7105:case 7107:case 7109:case 7110:case 7112:argName=Game.moduleModel.market.GetLastCity().name;break;case 7106:argName=User.info.name;break;case 7108:argName=this.currActorName;break}event_1.setTalkParams(argName);break}}};LyShow.prototype.onAvatarEventFinish=function(data){if(data.performType==PerformType.RoadShow){if(data.eventId==7102||data.eventId==7103||data.eventId==7113){this.cheer()}}};LyShow.prototype.onAvatarBehaviorFinish=function(data){if(data.performType==PerformType.RoadShow){if(data.avatarId==0){}else{if(data.avatarId==this.speekerId){this.speeker.direction=Games.DirtionType.Right;if(this.speeker.x>this.width/2){this.speeker.direction=Games.DirtionType.Left}if(!this.isRoadShowEnd){this.curActorData=this.context.currentActorData();this.creatActor(this.curActorData.id)}else{this.endShow()}}else{var actorData=Game.moduleModel.actor.getActor(data.avatarId);this.isRoadShowEnd=this.context.UpdateProgress(actorData);if(this.curActor!=null){this.curActor.dispose()}if(!this.isRoadShowEnd){this.speeker.executeActionEvents(this.getSpeekerEventSummary(),PerformType.RoadShow)}else{if(this.isRoadShowSuccess){this.speeker.executeActionEvents(this.getSpeekerEventSucc(),PerformType.RoadShow)}else{this.speeker.executeActionEvents(this.getSpeekerEventFail(),PerformType.RoadShow)}}}}}};LyShow.prototype.creatSpeeker=function(npcId){if(npcId===void 0){npcId=201}this.speekerId=npcId;var aInfo=Games.AvatarInfo.creatByNpcId(npcId);aInfo.idleName="zhanli3";this.speeker=Game.creator.creatEUnit(aInfo);this.speeker.setScale(0.35);var bounds=this.speeker.getBounds();this.speeker.pos(this.speeker.unitModel.boundWidth,this.speeker.unitModel.boundHeight);this.speeker.showOn(this.m_avatarContainner);this.speeker.enterTo(-100,this.m_avatarContainner.height/2+210);this.speeker.executeActionEvents(this.getSpeekerEventBegin(),PerformType.RoadShow);this.speeker.openShadow();this.isSpeekerBeginTalk=true;this.addUnit(this.speeker)};LyShow.prototype.creatActor=function(actorId){var aInfo=Games.AvatarInfo.creatByAvatarId(actorId);this.curActor=Game.creator.creatEUnit(aInfo);this.curActor.setScale(0.35);this.curActor.pos(this.curActor.unitModel.boundWidth,this.curActor.unitModel.boundHeight);this.curActor.showOn(this.m_avatarContainner);this.curActor.enterTo(-100,this.m_avatarContainner.height/2+210);this.curActor.openShadow();this.curActor.executeActionEvents(this.getActorEvent(),PerformType.RoadShow);this.addUnit(this.curActor)};LyShow.prototype.creatAudience=function(index){var aInfo=new Games.AvatarInfo();aInfo.type=Games.AvatarType.Npc;aInfo.idleName="audience_idle";aInfo.texturePath=Res.getAudienceSkin();aInfo.skeletonPath=Res.getAudienceSK();var audience=Game.creator.creatEUnit(aInfo);var scale=0.3;var offsetX=20;var offsetY=60;if(index<=5){scale=0.3}else{if(index<=10){scale=0.45}else{scale=0.5}}audience.setScale(scale);var bounds=audience.getBounds();audience.pos(audience.unitModel.boundWidth+offsetX,audience.unitModel.boundHeight+offsetY);var chairCom=this.chairList[index];audience.showOn(chairCom,0);this.addUnit(audience);this.avatarList.push(audience)};LyShow.prototype.initAudience=function(){this.chairList.length=0;var chairGroup1=this.m_ChairGroup1.asList;chairGroup1.touchable=false;for(var i=0;i<chairGroup1.numItems;i++){var chair=chairGroup1.getChildAt(i).asCom;this.chairList.push(chair)}var chairGroup2=this.m_ChairGroup2.asList;chairGroup2.touchable=false;for(var i=0;i<chairGroup2.numItems;i++){var chair=chairGroup2.getChildAt(i).asCom;this.chairList.push(chair)}var chairGroup3=this.m_ChairGroup3.asList;chairGroup3.touchable=false;for(var i=0;i<chairGroup3.numItems;i++){var chair=chairGroup3.getChildAt(i).asCom;this.chairList.push(chair)}this.avatarList.length=0;for(var i=0;i<this.chairList.length;i++){this.creatAudience(i)}};LyShow.prototype.getRDEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.RoadShow&&value.data%10==4});var index=Random.range(0,playActList.length);return playActList[index].eventList};LyShow.prototype.getCheerEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.RoadShow&&value.data%10==7});var index=Random.range(0,playActList.length);return playActList[index].eventList};LyShow.prototype.getSpeekerEventBegin=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.RoadShow&&value.data%10==1});var index=Random.range(0,playActList.length);var events=playActList[index].eventList;this.setTalkParams(events);return events};LyShow.prototype.getActorEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.RoadShow&&value.data%10==3});var index=Random.range(0,playActList.length);var events=playActList[index].eventList;this.setTalkParams(events);return events};LyShow.prototype.getSpeekerEventSummary=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.RoadShow&&(value.data%10==2)});var index=Random.range(0,playActList.length);var events=playActList[index].eventList;this.setTalkParams(events);return events};LyShow.prototype.getSpeekerEventSucc=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.RoadShow&&value.data%10==5});var index=Random.range(0,playActList.length);var events=playActList[index].eventList;this.setTalkParams(events);return events};LyShow.prototype.getSpeekerEventFail=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.RoadShow&&value.data%10==6});var index=Random.range(0,playActList.length);var events=playActList[index].eventList;this.setTalkParams(events);return events};LyShow.prototype.getAvatar=function(avatarUid){return this.avatarList.findOne(function(value){return value.unitModel.info.uid==avatarUid})};LyShow.prototype.cheer=function(){var _this=this;console.log("Audience->cheer");this.avatarList.forEach(function(value,index,array){value.endEvent(false);value.executeActionEvents(_this.getCheerEvent(),PerformType.RoadShow)})};return LyShow}(PfSkin.LyShowStruct));PfSkin.LyShow=LyShow})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var MailContentPanelStruct=(function(_super){__extends(MailContentPanelStruct,_super);function MailContentPanelStruct(){return _super.call(this)||this}MailContentPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","MailContentPanel"))};MailContentPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_reward=this.getController("reward");this.m_closeBtn=(this.getChild("closeBtn"));this.m_time=(this.getChild("time"));this.m_listReward=(this.getChild("listReward"));this.m_tipHasReward=(this.getChild("tipHasReward"));this.m_title=(this.getChild("title"));this.m_Msg1=(this.getChild("Msg1"));this.m_Msg2=(this.getChild("Msg2"));this.m_content=(this.getChild("content"));this.m_btnDelect=(this.getChild("btnDelect"));this.m_btnReward=(this.getChild("btnReward"));this.m_btnClose=(this.getChild("btnClose"))};MailContentPanelStruct.URL="ui://s33x8418klss1uh";MailContentPanelStruct.DependPackages=["PfSkin","Common"];return MailContentPanelStruct}(fairygui.GComponent));PfSkin.MailContentPanelStruct=MailContentPanelStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var MailContentPanel=(function(_super){__extends(MailContentPanel,_super);function MailContentPanel(){return _super!==null&&_super.apply(this,arguments)||this}MailContentPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnClose.onClick(this,this.OnCloseClick);this.m_btnDelect.onClick(this,this.OnBtnDelectClick);this.m_btnReward.onClick(this,this.OnBtnRewardClick);this.m_listReward.itemRenderer=new Handler(this,this.RenderRewardItem,null,false)};MailContentPanel.prototype.onWindowInited=function(){};MailContentPanel.prototype.OnWindowOpen=function(uuid){this.moduleMain=this.moduleWindow.mainWindow;this.uuid=uuid;if(this.uuid){this.UpdateView()}};MailContentPanel.prototype.UpdateView=function(){this.m_Msg1.text=Games.TEXT.ToReader;this.m_Msg2.text=Games.TEXT.ReawrdMsg;if(this.uuid){this.mailData=Game.moduleModel.mail.GetMail(this.uuid);if(this.mailData){this.m_title.text=this.mailData.title;this.m_content.title=this.mailData.content;this.m_time.text=Games.TimeHelper.DateTimeFormat2(this.mailData.createTime);var rewardList=this.mailData.itemList;this.m_listReward.numItems=rewardList.length;if(rewardList.length==0){this.m_reward.setSelectedIndex(0)}else{if(this.mailData.IsRewardGot){this.m_reward.setSelectedIndex(1)}else{this.m_reward.setSelectedIndex(2)}}}}};MailContentPanel.prototype.RenderRewardItem=function(index,item){var data=this.mailData.itemList[index];var reward=Game.moduleModel.item.CreateItem(data.itemId,data.amount);item.icon=reward.itemIconUrl;item.title=reward.itemNumTxt;item.m_star.starNum=reward.itemStar;item.PopupInfo=reward.itemId};MailContentPanel.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.Mail_MailDelete,this.OnMailDeleteResponse,this);Game.protoOkEvent.add(ProtoEventKey.Mail_MailGetReward,this.OnMailGetRewardResponse,this);Game.protoOkEvent.add(ProtoEventKey.Mail_MailRead,this.OnMailReadResponse,this);this.UpdateView()};MailContentPanel.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.Mail_MailDelete,this.OnMailDeleteResponse,this);Game.protoOkEvent.remove(ProtoEventKey.Mail_MailGetReward,this.OnMailGetRewardResponse,this);Game.protoOkEvent.remove(ProtoEventKey.Mail_MailRead,this.OnMailReadResponse,this)};MailContentPanel.prototype.OnMailDeleteResponse=function(){this.moduleWindow.closeSelf()};MailContentPanel.prototype.OnMailGetRewardResponse=function(){this.UpdateView()};MailContentPanel.prototype.OnMailReadResponse=function(){};MailContentPanel.prototype.OnCloseClick=function(){this.moduleWindow.closeSelf()};MailContentPanel.prototype.OnBtnDelectClick=function(){Game.moduleModel.mail.DeleteMail(this.uuid)};MailContentPanel.prototype.OnBtnRewardClick=function(){if(Game.moduleModel.mail.RewardMail(this.uuid)){this.rewardList=[];for(var _i=0,_a=this.mailData.itemList;_i<_a.length;_i++){var item=_a[_i];var reward=new DTItemNum();reward.itemId=item.itemId;reward.itemNum=item.amount;this.rewardList.push(reward)}}};return MailContentPanel}(PfSkin.MailContentPanelStruct));PfSkin.MailContentPanel=MailContentPanel})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var MailItemStruct=(function(_super){__extends(MailItemStruct,_super);function MailItemStruct(){return _super.call(this)||this}MailItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","MailItem"))};MailItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_read=this.getController("read");this.m_title=(this.getChild("title"));this.m_time=(this.getChild("time"));this.m_reward=(this.getChild("reward"))};MailItemStruct.URL="ui://s33x8418klss1uf";MailItemStruct.DependPackages=["PfSkin","Common"];return MailItemStruct}(fairygui.GButton));PfSkin.MailItemStruct=MailItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var MailItem=(function(_super){__extends(MailItem,_super);function MailItem(){return _super!==null&&_super.apply(this,arguments)||this}MailItem.prototype.RenderItem=function(data){this.mailData=data;this.m_read.setSelectedIndex(this.mailData.IsNew?0:1);this.title=this.mailData.title;this.m_time.text=Games.TimeHelper.DateTimeFormat2(this.mailData.createTime);if(this.mailData.itemList.length>0&&!this.mailData.IsRewardGot){this.m_reward.visible=true;var item=Game.moduleModel.item.CreateItem(this.mailData.itemList[0].itemId,this.mailData.itemList[0].amount);this.m_reward.icon=item.itemIconUrl;this.m_reward.title=item.itemNumTxt;this.m_reward.m_star.starNum=item.itemStar}else{this.m_reward.visible=false}};MailItem.prototype.OnSelect=function(){if(this.mailData.isNew){Game.moduleModel.mail.ReadMail(this.mailData.uuid)}};return MailItem}(PfSkin.MailItemStruct));PfSkin.MailItem=MailItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var MailMainPanelStruct=(function(_super){__extends(MailMainPanelStruct,_super);function MailMainPanelStruct(){return _super.call(this)||this}MailMainPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","MailMainPanel"))};MailMainPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_tip=(this.getChild("tip"));this.m_NoMail=(this.getChild("NoMail"));this.m_viewPanel=(this.getChild("viewPanel"));this.m_btnReward=(this.getChild("btnReward"));this.m_btnDelect=(this.getChild("btnDelect"))};MailMainPanelStruct.URL="ui://s33x8418klss1ud";MailMainPanelStruct.DependPackages=["PfSkin","Common"];return MailMainPanelStruct}(fairygui.GComponent));PfSkin.MailMainPanelStruct=MailMainPanelStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var MailMainPanel=(function(_super){__extends(MailMainPanel,_super);function MailMainPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.doAllDelect=false;_this.doAllReward=false;return _this}MailMainPanel.prototype.onWindowInited=function(){this.m_viewPanel.InitView(this,this.OnCloseClick);this.m_btnDelect.onClick(this,this.OnBtnDelectClick);this.m_btnReward.onClick(this,this.OnBtnRewardClick);this.m_list.itemRenderer=new Handler(this,this.RenderMailItem,null,false);this.m_list.on(fairygui.Events.CLICK_ITEM,this,this.OnMailItemSelect)};MailMainPanel.prototype.onWindowOpen=function(){var arg=[];for(var _i=0;_i<arguments.length;_i++){arg[_i]=arguments[_i]}this.UpdateView()};MailMainPanel.prototype.UpdateView=function(){this.m_viewPanel.m_title.text=Games.TEXT.MailTitle;this.m_btnDelect.m_title.text=Games.TEXT.DeleteRead;this.mailList=Game.moduleModel.mail.GetMailList();this.m_list.numItems=this.mailList.length;this.m_NoMail.visible=this.mailList.length==0};MailMainPanel.prototype.RenderMailItem=function(index,item){var data=this.mailList[index];item.setScale(1,1);item.RenderItem(data)};MailMainPanel.prototype.OnMailItemSelect=function(item){item.OnSelect();this.moduleWindow.openSubwindowByIndex("mailContent",true,item.mailData.uuid)};MailMainPanel.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.Mail_MailRead,this.UpdateView,this);Game.protoOkEvent.add(ProtoEventKey.Mail_MailDelete,this.OnMailDelectResponse,this);Game.protoOkEvent.add(ProtoEventKey.Mail_MailDeleteMany,this.OnMailDelectResponse,this);Game.protoOkEvent.add(ProtoEventKey.Mail_MailGetReward,this.OnMailRewardResponse,this);Game.protoOkEvent.add(ProtoEventKey.Mail_MailGetRewardMany,this.OnMailRewardResponse,this);this.UpdateView()};MailMainPanel.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.MailData,this.OnMailDataResponse,this)};MailMainPanel.prototype.OnMailDataResponse=function(){this.UpdateView()};MailMainPanel.prototype.OnMailRewardResponse=function(){this.UpdateView()};MailMainPanel.prototype.OnMailDelectResponse=function(){var delectTime=200;var list=Game.moduleModel.mail.lastDelectMail;for(var index=0;index<list.length;index++){var uuid=list[index];var itemIndex=this.mailList.findIndex(function(value){return value.uuid==uuid});if(itemIndex>=0){this.ShowDelectMailAnim(itemIndex,delectTime)}}Laya.timer.once(2*delectTime,this,this.UpdateView)};MailMainPanel.prototype.OnCloseClick=function(){this.moduleWindow.menuClose()};MailMainPanel.prototype.OnBtnDelectClick=function(){Game.moduleModel.mail.DeleteAll()};MailMainPanel.prototype.OnBtnRewardClick=function(){Game.moduleModel.mail.RewardAll()};MailMainPanel.prototype.ShowDelectMailAnim=function(index,time){var item=this.m_list.getChildAt(index);if(item){Laya.Tween.to(item,{scaleY:0},time)}};return MailMainPanel}(PfSkin.MailMainPanelStruct));PfSkin.MailMainPanel=MailMainPanel})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var MailRewardItemStruct=(function(_super){__extends(MailRewardItemStruct,_super);function MailRewardItemStruct(){return _super.call(this)||this}MailRewardItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","MailRewardItem"))};MailRewardItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_star=(this.getChild("star"))};MailRewardItemStruct.URL="ui://s33x8418pmz6t25s";MailRewardItemStruct.DependPackages=["PfSkin","Common"];return MailRewardItemStruct}(fairygui.GButton));PfSkin.MailRewardItemStruct=MailRewardItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var MailRewardItem=(function(_super){__extends(MailRewardItem,_super);function MailRewardItem(){return _super!==null&&_super.apply(this,arguments)||this}return MailRewardItem}(PfSkin.MailRewardItemStruct));PfSkin.MailRewardItem=MailRewardItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var MailViewPanelStruct=(function(_super){__extends(MailViewPanelStruct,_super);function MailViewPanelStruct(){return _super.call(this)||this}MailViewPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","MailViewPanel"))};MailViewPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_btnClose=(this.getChild("btnClose"))};MailViewPanelStruct.URL="ui://s33x8418pmz6t25r";MailViewPanelStruct.DependPackages=["PfSkin","Common"];return MailViewPanelStruct}(fairygui.GLabel));PfSkin.MailViewPanelStruct=MailViewPanelStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var MailViewPanel=(function(_super){__extends(MailViewPanel,_super);function MailViewPanel(){return _super!==null&&_super.apply(this,arguments)||this}MailViewPanel.prototype.InitView=function(thisObj,closeHandler,assetList){if(assetList==null){assetList=[]}this.m_btnClose.onClick(thisObj,closeHandler);this.assetList=assetList};return MailViewPanel}(PfSkin.MailViewPanelStruct));PfSkin.MailViewPanel=MailViewPanel})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ModalUIStruct=(function(_super){__extends(ModalUIStruct,_super);function ModalUIStruct(){return _super.call(this)||this}ModalUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ModalUI"))};ModalUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};ModalUIStruct.URL="ui://s33x8418jazc1li";ModalUIStruct.DependPackages=["PfSkin"];return ModalUIStruct}(fairygui.GComponent));PfSkin.ModalUIStruct=ModalUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ModalUI=(function(_super){__extends(ModalUI,_super);function ModalUI(){return _super!==null&&_super.apply(this,arguments)||this}return ModalUI}(PfSkin.ModalUIStruct));PfSkin.ModalUI=ModalUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var NewArtistBgStruct=(function(_super){__extends(NewArtistBgStruct,_super);function NewArtistBgStruct(){return _super.call(this)||this}NewArtistBgStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","NewArtistBg"))};NewArtistBgStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};NewArtistBgStruct.URL="ui://s33x8418wgdot21e";NewArtistBgStruct.DependPackages=["PfSkin","Common"];return NewArtistBgStruct}(fairygui.GComponent));PfSkin.NewArtistBgStruct=NewArtistBgStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var NewArtistBg=(function(_super){__extends(NewArtistBg,_super);function NewArtistBg(){return _super!==null&&_super.apply(this,arguments)||this}return NewArtistBg}(PfSkin.NewArtistBgStruct));PfSkin.NewArtistBg=NewArtistBg})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var NewArtistItemStruct=(function(_super){__extends(NewArtistItemStruct,_super);function NewArtistItemStruct(){return _super.call(this)||this}NewArtistItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","NewArtistItem"))};NewArtistItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};NewArtistItemStruct.URL="ui://s33x8418wgdot21d";NewArtistItemStruct.DependPackages=["PfSkin"];return NewArtistItemStruct}(fairygui.GComponent));PfSkin.NewArtistItemStruct=NewArtistItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var NewArtistItem=(function(_super){__extends(NewArtistItem,_super);function NewArtistItem(){return _super!==null&&_super.apply(this,arguments)||this}return NewArtistItem}(PfSkin.NewArtistItemStruct));PfSkin.NewArtistItem=NewArtistItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var OscarAnimStruct=(function(_super){__extends(OscarAnimStruct,_super);function OscarAnimStruct(){return _super.call(this)||this}OscarAnimStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","OscarAnim"))};OscarAnimStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_ChairGroup1=(this.getChild("ChairGroup1"));this.m_ChairGroup2=(this.getChild("ChairGroup2"));this.m_ChairGroup3=(this.getChild("ChairGroup3"));this.m_ChairGroup4=(this.getChild("ChairGroup4"));this.m_OscarAnim_022=(this.getChild("OscarAnim_022"));this.m_actorContainner=(this.getChild("actorContainner"));this.m_speekerContainner=(this.getChild("speekerContainner"))};OscarAnimStruct.URL="ui://s33x8418iacmt1w5";OscarAnimStruct.DependPackages=["PfSkin","Fx"];return OscarAnimStruct}(fairygui.GComponent));PfSkin.OscarAnimStruct=OscarAnimStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var PerformType=Games.PerformType;var AvatarManager=Games.AvatarManager;var DialogManager=Games.DialogManager;var OscarAwardsType=Games.OscarAwardsType;var OscarAnim=(function(_super){__extends(OscarAnim,_super);function OscarAnim(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.chairList=[];_this.avatarList=[];_this.winnerOrignalPos=0;_this.stageActorList=[];_this.enterIndex=-1;_this.bornOffset=150;_this.actorEnterNum=0;_this.actorLeaveNum=0;_this.speakerFinishIndex=0;_this.actorIndex=-1;_this.actorIdList=[];_this.oscarEnd=false;_this.isSpeekerReady=false;_this.isinitEvent=false;return _this}OscarAnim.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.setScale(0.67,0.67);this.setPivot(0.5,0.5)};OscarAnim.prototype.showFor=function(parent,context){this.context=context;this.initAudience();parent.addChild(this);AvatarManager.sEventFinish.add(this.onAvatarEventFinish,this);DialogManager.sDialogFinish.add(this.onDialogFinish,this);DialogManager.sDialogEvent.add(this.onDialogEventFinish,this);this.isinitEvent=true;this.addRelation(parent,fairygui.RelationType.Center_Center);this.addRelation(parent,fairygui.RelationType.Middle_Middle);this.startShow()};OscarAnim.prototype.reStartShow=function(){var _this=this;if(this.stageActorList.length>0){this.endTurnShowImmediately()}if(this.speekerA){this.speekerA.endEvent(false);this.speekerA.dispose()}if(this.speekerB){this.speekerB.endEvent(false);this.speekerB.dispose()}setTimeout(function(){if(!_this.isinitEvent){AvatarManager.sEventFinish.add(_this.onAvatarEventFinish,_this);DialogManager.sDialogFinish.add(_this.onDialogFinish,_this);DialogManager.sDialogEvent.add(_this.onDialogEventFinish,_this);_this.isinitEvent=true}_this.setScale(0.67,0.67);_this.setPivot(0.5,0.5);_this.startShow()},500)};OscarAnim.prototype.startShow=function(){var _this=this;this.tween=Laya.Tween.to(this,{scaleX:0.8,scaleY:0.8},1500,Laya.Ease.linearIn,Handler.create(null,function(){_this.oscarEnd=false;_this.creatSpeeker();_this.context.m_animContainer.m_oscarBg.asCom.addChild(_this.getChildAt(0));_this.context.m_animContainer.m_oscarBg.setPivot(0.5,0.5);_this.context.m_animContainer.m_oscarBg.setScale(0.8,0.8);_this.context.AniStart()}),0,true,true)};OscarAnim.prototype.startTurnShow=function(arg){this.curPrizeData=arg;if(this.stageActorList.length>0){this.endTurnShowImmediately()}this.initActorList();this.creatStageActorList();if(this.isSpeekerReady){if(this.curPrizeData.listCandidate.length==0){this.startSpeekerDialog(this.getSpeekerNoWinnerEvent())}else{this.startSpeekerDialog(this.getSpeekerBeginEvent())}}};OscarAnim.prototype.endTurnShow=function(){console.log("endTurnShow");this.actorIndex=-1;this.winnerActor=null;this.actorLeaveNum=0;this.actorEnterNum=0;this.speakerFinishIndex=0;this.enterIndex=-1;this.stageActorList.length=0;this.stopSpeekerDialog();this.context.AniFinishPrize()};OscarAnim.prototype.endAllPrize=function(){console.log("endAllPrize");this.startSpeekerDialog(this.getSpeekerAllPrizeEndEvent())};OscarAnim.prototype.endShow=function(){if(!this.oscarEnd){console.log("endShow");this.oscarEnd=true;this.speekerA.stand();this.speekerB.stand();this.__dispose()}};OscarAnim.prototype.__dispose=function(){AvatarManager.sEventFinish.remove(this.onAvatarEventFinish,this);DialogManager.sDialogFinish.remove(this.onDialogFinish,this);DialogManager.sDialogEvent.remove(this.onDialogEventFinish,this);this.isinitEvent=false;Laya.timer.clear(this,this.onTimeActorEnter);if(this.tween!=null){Laya.Tween.clear(this.tween);this.tween=null}this.stopSpeekerDialog();for(var _i=0,_a=this.stageActorList;_i<_a.length;_i++){var actor=_a[_i];actor.dispose()}this.stageActorList.length=0};OscarAnim.prototype.dispose=function(){this.__dispose();for(var _i=0,_a=this.avatarList;_i<_a.length;_i++){var unit=_a[_i];unit.dispose()}this.avatarList.length=0;this.context=null};OscarAnim.prototype.actorLeaveStage=function(){var _this=this;if(this.oscarEnd){return}for(var i=this.stageActorList.length-1;i>=0;i--){var actor=this.stageActorList[i];var dx=this.width+100;actor.moveTo(dx,false,Handler.create(this,function(target,idx){_this.actorLeaveNum++;if(target&&!target.unit.isDisposed){console.log("@endTurn : "+target.unitModel.info.config.id);_this.removeUnit(target);_this.stageActorList.splice(idx,1);if(_this.isAllActorLeave){_this.endTurnShow()}}},[actor,i]))}};OscarAnim.prototype.endTurnShowImmediately=function(){this.actorIndex=-1;this.winnerActor=null;this.actorLeaveNum=0;this.actorEnterNum=0;this.speakerFinishIndex=0;this.stopSpeekerDialog();this.enterIndex=-1;for(var i=this.stageActorList.length-1;i>=0;i--){var actor=this.stageActorList[i];console.log("@@endTurnImmediately : "+actor.unitModel.info.config.id);this.removeUnit(actor)}this.stageActorList.length=0};Object.defineProperty(OscarAnim.prototype,"isAllActorLeave",{get:function(){return this.actorLeaveNum>=this.stageActorList.length},enumerable:true,configurable:true});Object.defineProperty(OscarAnim.prototype,"isAllActorEnter",{get:function(){return this.actorEnterNum>=this.stageActorList.length},enumerable:true,configurable:true});OscarAnim.prototype.setWinner=function(arg){console.log("setWinner arg="+arg);this.winnerData=arg;var winnerIndex=this.curPrizeData.winnerIndex;var winnerId=this.actorIdList[winnerIndex];this.winnerActor=this.stageActorList.findOne(function(value){return value.unitModel.info.id==winnerId});if(this.winnerActor==null){this.winnerActor=this.stageActorList[0]}if(this.winnerActor.unit){this.winnerActor.setChildIndex(this.winnerActor.unit.parent.numChildren-1);this.winnerOrignalPos=this.winnerActor.x;this.winnerActor.executeActionEvents(this.getWinnerActorEvent(),PerformType.Oscar)}this.startSpeekerDialog(this.getSpeekerWinnerEvent())};OscarAnim.prototype.onAvatarEventFinish=function(data){var _this=this;if(this.oscarEnd){return}if(data.performType==PerformType.Oscar){switch(data.eventId){case 6001:break;case 6002:this.isSpeekerReady=true;if(!this.oscarEnd){this.context.ShowNextPrizeUI();if(this.curPrizeData){if(this.curPrizeData.listCandidate.length==0){this.startSpeekerDialog(this.getSpeekerNoWinnerEvent())}else{this.startSpeekerDialog(this.getSpeekerBeginEvent())}}}break;case 6019:break;case 6020:this.winnerActor.moveTo(this.winnerOrignalPos,false,Handler.create(this,function(){_this.actorLeaveStage()},null,true));break}}};OscarAnim.prototype.startSpeekerDialog=function(dialogs){if(!this.oscarEnd){if(this.speekerA&&this.speekerB){this.stopSpeekerDialog();this.dialog=DialogManager.startDialog(this.speekerA,this.speekerB,dialogs,PerformType.Oscar)}}};OscarAnim.prototype.stopSpeekerDialog=function(){if(this.dialog){this.dialog.endEvent(false);this.dialog=null}};OscarAnim.prototype.setTalkParams=function(events){for(var _i=0,events_1=events;_i<events_1.length;_i++){var event_1=events_1[_i];var argName="";switch(event_1.evtId){case 6003:argName=this.curPrizeData.name;event_1.setTalkParams(argName);break;case 6005:case 6006:case 6007:case 6009:case 6010:if(this.curPrizeData.listCandidate.length>0){this.actorIndex++;var minIndex=Math.min(this.actorIndex,this.curPrizeData.listCandidate.length-1);argName=this.curPrizeData.listCandidate[minIndex].name}event_1.setTalkParams(argName);break;case 6011:case 6012:if(this.curPrizeData.listCandidate.length>0){var rdIndex=Random.range(0,this.curPrizeData.listCandidate.length);argName=this.curPrizeData.listCandidate[rdIndex].name}event_1.setTalkParams(argName);break;case 6015:case 6017:argName=this.winnerData?this.winnerData.name:"this.winnerData undefine";if(!argName){argName="name is undefine"}event_1.setTalkParams(argName);break;case 6021:argName=this.curPrizeData.name;event_1.setTalkParams(argName);break}}};OscarAnim.prototype.onDialogFinish=function(performType){};OscarAnim.prototype.onDialogEventFinish=function(data){if(data.performType==Games.PerformType.Oscar){console.log("onDialogEventFinish "+data.eventId);switch(data.eventId){case 6003:this.onActorTimeEnterStage();break;case 6014:this.context.AniSelectCandidtate();break;case 6015:this.startSpeekerDialog(this.getSpeekerCongratulationEvent());break;case 6018:this.winnerActor.executeActionEvents(this.getWinnerActorTalkEvent(),PerformType.Oscar);break;case 6022:this.endTurnShow();break;case 6024:this.context.showOscarReward();break}}};OscarAnim.prototype.getSpeekerAEnterEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.Oscar&&value.data%10==1});var events=playActList[0].eventList;return events};OscarAnim.prototype.getSpeekerBEnterEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.Oscar&&value.data%10==2});var events=playActList[0].eventList;return events};OscarAnim.prototype.getSpeekerBeginEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.Oscar&&value.data%10==3});var events=playActList[0].eventList;this.setTalkParams(events);return events};OscarAnim.prototype.getSpeekerSelectWinnerEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.Oscar&&value.data%10==5});var events=playActList[0].eventList;this.setTalkParams(events);return events};OscarAnim.prototype.getSpeekerWinnerEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.Oscar&&value.data%10==6});var events=playActList[0].eventList;this.setTalkParams(events);return events};OscarAnim.prototype.getSpeekerCongratulationEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.Oscar&&value.data%10==7});var events=playActList[0].eventList;this.setTalkParams(events);return events};OscarAnim.prototype.getSpeekerNoWinnerEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.Oscar&&value.data%100==10});if(playActList.length==0){console.error("\u56FA\u5B9A\u8868\u6F14\u8868 \u6CA1\u6709\u67E5\u627E\u5230\u5BF9\u5E94\u7684\u6570\u636E\uFF0C OscarAnim.getSpeekerNoWinnerEvent(),  Game.config.playAct type="+PerformType.Oscar);return[]}var events=playActList[0].eventList;this.setTalkParams(events);return events};OscarAnim.prototype.getSpeekerAllPrizeEndEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.Oscar&&value.data%100==11});var events=playActList[0].eventList;this.setTalkParams(events);return events};OscarAnim.prototype.getWinnerActorEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.Oscar&&value.data%10==8});var events=playActList[0].eventList;this.setTalkParams(events);return events};OscarAnim.prototype.getWinnerActorTalkEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.Oscar&&value.data%10==9});var events=playActList[0].eventList;this.setTalkParams(events);return events};OscarAnim.prototype.creatAudience=function(index){var aInfo=new Games.AvatarInfo();aInfo.type=Games.AvatarType.Npc;aInfo.idleName="audience_idle";aInfo.texturePath=Res.getAudienceSkin();aInfo.skeletonPath=Res.getAudienceSK();var cUnit=Game.creator.creatEUnit(aInfo);var scale=0.3;var offsetX=20;var offsetY=60;if(index<=5){scale=0.3}else{if(index<=10){scale=0.4}else{scale=0.5}}cUnit.setScale(scale);cUnit.pos(cUnit.unitModel.boundWidth+offsetX,cUnit.unitModel.boundHeight+offsetY);var chairCom=this.chairList[index];cUnit.showOn(chairCom,0);this.addUnit(cUnit);this.avatarList.push(cUnit)};OscarAnim.prototype.addUnit=function(unit){if(this.mainScene){this.mainScene.addUnit(unit)}};OscarAnim.prototype.removeUnit=function(unit){this.mainScene&&this.mainScene.removeUnit(unit.unit.uid)};OscarAnim.prototype.initAudience=function(){this.chairList.length=0;var chairGroup1=this.m_ChairGroup1.asList;chairGroup1.touchable=false;for(var i=0;i<chairGroup1.numItems;i++){var chair=chairGroup1.getChildAt(i).asCom;this.chairList.push(chair)}var chairGroup2=this.m_ChairGroup2.asList;chairGroup2.touchable=false;for(var i=0;i<chairGroup2.numItems;i++){var chair=chairGroup2.getChildAt(i).asCom;this.chairList.push(chair)}var chairGroup3=this.m_ChairGroup3.asList;chairGroup3.touchable=false;for(var i=0;i<chairGroup3.numItems;i++){var chair=chairGroup3.getChildAt(i).asCom;this.chairList.push(chair)}this.avatarList.length=0;for(var i=0;i<this.chairList.length;i++){this.creatAudience(i)}};OscarAnim.prototype.creatSpeeker=function(npcId){if(npcId===void 0){npcId=201}var speekerIdA=201;var speekerIdB=202;var aInfoA=Games.AvatarInfo.creatByNpcId(speekerIdA);var aInfoB=Games.AvatarInfo.creatByNpcId(speekerIdB);aInfoA.idleName="zhanli3";aInfoB.idleName="zhanli3";this.speekerA=Game.creator.creatEUnit(aInfoA);this.speekerA.setScale(0.35);var bounds=this.speekerA.getBounds();this.speekerA.pos(bounds.width,bounds.height);this.speekerA.showOn(this.m_speekerContainner);this.addUnit(this.speekerA);this.avatarList.push(this.speekerA);this.speekerA.enterTo(-this.bornOffset,this.m_speekerContainner.height/2-20);this.speekerA.executeActionEvents(this.getSpeekerAEnterEvent(),PerformType.Oscar);this.speekerB=Game.creator.creatEUnit(aInfoB);this.speekerB.setScale(0.35);bounds=this.speekerB.getBounds();this.speekerB.pos(bounds.width,bounds.height);this.speekerB.showOn(this.m_speekerContainner);this.addUnit(this.speekerB);this.avatarList.push(this.speekerB);this.speekerB.enterTo(this.width+this.bornOffset,this.m_speekerContainner.height/2-20);this.speekerB.executeActionEvents(this.getSpeekerBEnterEvent(),PerformType.Oscar)};OscarAnim.prototype.initActorList=function(){this.actorIdList.length=0;for(var i=0;i<this.curPrizeData.listCandidate.length;i++){if(this.curPrizeData.type==OscarAwardsType.Man||this.curPrizeData.type==OscarAwardsType.Woman){this.actorIdList.push(this.curPrizeData.listCandidate[i].id)}else{var actors=Game.config.actor.getConfigList();actors=actors.filter(function(value,index,array){return value.id!=9998&&value.id!=9999});this.actorIdList.push(actors[Random.range(0,actors.length)].id)}}};OscarAnim.prototype.creatStageActorList=function(){for(var i=0;i<this.actorIdList.length;i++){var actorId=this.actorIdList[i];var aInfo=Games.AvatarInfo.creatByAvatarId(actorId);var actor=Game.creator.creatEUnit(aInfo);actor.setScale(0.3);actor.showOn(this.m_actorContainner);this.addUnit(actor);this.stageActorList.push(actor);actor.enterTo(-this.bornOffset,this.m_actorContainner.height/2-110,Games.DirtionType.Right)}};OscarAnim.prototype.onActorTimeEnterStage=function(){Laya.timer.loop(1500,this,this.onTimeActorEnter,null,true,true)};OscarAnim.prototype.onTimeActorEnter=function(){var _this=this;this.enterIndex++;if(this.enterIndex>this.stageActorList.length-1){Laya.timer.clear(this,this.onTimeActorEnter);return}var stageLeftOffset=30;var gap=(this.width-stageLeftOffset)/4;var actor=this.stageActorList[this.enterIndex];var leftPos=(this.width-(this.stageActorList.length-1)*gap)*0.5;var targetPos=leftPos+this.enterIndex*gap;actor.moveTo(targetPos,false,Handler.create(this,function(){_this.actorEnterNum++;if(_this.isAllActorEnter){_this.startSpeekerDialog(_this.getSpeekerSelectWinnerEvent())}},null,true))};return OscarAnim}(PfSkin.OscarAnimStruct));PfSkin.OscarAnim=OscarAnim})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var OscarChair1Struct=(function(_super){__extends(OscarChair1Struct,_super);function OscarChair1Struct(){return _super.call(this)||this}OscarChair1Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","OscarChair1"))};OscarChair1Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};OscarChair1Struct.URL="ui://s33x8418iacmt1wd";OscarChair1Struct.DependPackages=["PfSkin"];return OscarChair1Struct}(fairygui.GComponent));PfSkin.OscarChair1Struct=OscarChair1Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var OscarChair1=(function(_super){__extends(OscarChair1,_super);function OscarChair1(){return _super!==null&&_super.apply(this,arguments)||this}return OscarChair1}(PfSkin.OscarChair1Struct));PfSkin.OscarChair1=OscarChair1})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var OscarChair2Struct=(function(_super){__extends(OscarChair2Struct,_super);function OscarChair2Struct(){return _super.call(this)||this}OscarChair2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","OscarChair2"))};OscarChair2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};OscarChair2Struct.URL="ui://s33x8418iacmt1we";OscarChair2Struct.DependPackages=["PfSkin"];return OscarChair2Struct}(fairygui.GComponent));PfSkin.OscarChair2Struct=OscarChair2Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var OscarChair2=(function(_super){__extends(OscarChair2,_super);function OscarChair2(){return _super!==null&&_super.apply(this,arguments)||this}return OscarChair2}(PfSkin.OscarChair2Struct));PfSkin.OscarChair2=OscarChair2})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var OscarChair3Struct=(function(_super){__extends(OscarChair3Struct,_super);function OscarChair3Struct(){return _super.call(this)||this}OscarChair3Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","OscarChair3"))};OscarChair3Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};OscarChair3Struct.URL="ui://s33x8418iacmt1wf";OscarChair3Struct.DependPackages=["PfSkin"];return OscarChair3Struct}(fairygui.GComponent));PfSkin.OscarChair3Struct=OscarChair3Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var OscarChair3=(function(_super){__extends(OscarChair3,_super);function OscarChair3(){return _super!==null&&_super.apply(this,arguments)||this}return OscarChair3}(PfSkin.OscarChair3Struct));PfSkin.OscarChair3=OscarChair3})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var OscarChair4Struct=(function(_super){__extends(OscarChair4Struct,_super);function OscarChair4Struct(){return _super.call(this)||this}OscarChair4Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","OscarChair4"))};OscarChair4Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};OscarChair4Struct.URL="ui://s33x8418iacmt1wh";OscarChair4Struct.DependPackages=["PfSkin"];return OscarChair4Struct}(fairygui.GComponent));PfSkin.OscarChair4Struct=OscarChair4Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var OscarChair4=(function(_super){__extends(OscarChair4,_super);function OscarChair4(){return _super!==null&&_super.apply(this,arguments)||this}return OscarChair4}(PfSkin.OscarChair4Struct));PfSkin.OscarChair4=OscarChair4})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var OscarContainerStruct=(function(_super){__extends(OscarContainerStruct,_super);function OscarContainerStruct(){return _super.call(this)||this}OscarContainerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","OscarContainer"))};OscarContainerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};OscarContainerStruct.URL="ui://s33x8418iacmt1wj";OscarContainerStruct.DependPackages=["PfSkin"];return OscarContainerStruct}(fairygui.GComponent));PfSkin.OscarContainerStruct=OscarContainerStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var OscarContainer=(function(_super){__extends(OscarContainer,_super);function OscarContainer(){return _super!==null&&_super.apply(this,arguments)||this}return OscarContainer}(PfSkin.OscarContainerStruct));PfSkin.OscarContainer=OscarContainer})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var OscarPanelStruct=(function(_super){__extends(OscarPanelStruct,_super);function OscarPanelStruct(){return _super.call(this)||this}OscarPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","OscarPanel"))};OscarPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};OscarPanelStruct.URL="ui://s33x8418p9t7t1wz";OscarPanelStruct.DependPackages=["PfSkin"];return OscarPanelStruct}(fairygui.GComponent));PfSkin.OscarPanelStruct=OscarPanelStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var OscarPanel=(function(_super){__extends(OscarPanel,_super);function OscarPanel(){return _super!==null&&_super.apply(this,arguments)||this}return OscarPanel}(PfSkin.OscarPanelStruct));PfSkin.OscarPanel=OscarPanel})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ProgressBarYellowStruct=(function(_super){__extends(ProgressBarYellowStruct,_super);function ProgressBarYellowStruct(){return _super.call(this)||this}ProgressBarYellowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ProgressBarYellow"))};ProgressBarYellowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_title=(this.getChild("title"))};ProgressBarYellowStruct.URL="ui://s33x8418jazc1mn";ProgressBarYellowStruct.DependPackages=["PfSkin","Common"];return ProgressBarYellowStruct}(fairygui.GProgressBar));PfSkin.ProgressBarYellowStruct=ProgressBarYellowStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ProgressBarYellow=(function(_super){__extends(ProgressBarYellow,_super);function ProgressBarYellow(){return _super!==null&&_super.apply(this,arguments)||this}return ProgressBarYellow}(PfSkin.ProgressBarYellowStruct));PfSkin.ProgressBarYellow=ProgressBarYellow})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RandomBtnStruct=(function(_super){__extends(RandomBtnStruct,_super);function RandomBtnStruct(){return _super.call(this)||this}RandomBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","RandomBtn"))};RandomBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};RandomBtnStruct.URL="ui://s33x8418tag2t26x";RandomBtnStruct.DependPackages=["PfSkin"];return RandomBtnStruct}(fairygui.GButton));PfSkin.RandomBtnStruct=RandomBtnStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RandomBtn=(function(_super){__extends(RandomBtn,_super);function RandomBtn(){return _super!==null&&_super.apply(this,arguments)||this}return RandomBtn}(PfSkin.RandomBtnStruct));PfSkin.RandomBtn=RandomBtn})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RechargeMainPanelStruct=(function(_super){__extends(RechargeMainPanelStruct,_super);function RechargeMainPanelStruct(){return _super.call(this)||this}RechargeMainPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","RechargeMainPanel"))};RechargeMainPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_listRechargeItem=(this.getChild("listRechargeItem"));this.m_title=(this.getChild("title"));this.m_btnClose=(this.getChild("btnClose"));this.m_marquee=(this.getChild("marquee"))};RechargeMainPanelStruct.URL="ui://s33x8418ap5a1ux";RechargeMainPanelStruct.DependPackages=["PfSkin","Common"];return RechargeMainPanelStruct}(fairygui.GComponent));PfSkin.RechargeMainPanelStruct=RechargeMainPanelStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RechargeMainPanel=(function(_super){__extends(RechargeMainPanel,_super);function RechargeMainPanel(){return _super!==null&&_super.apply(this,arguments)||this}RechargeMainPanel.prototype.onWindowInited=function(){this.m_listRechargeItem.itemRenderer=new Handler(this,this.RenderItem,null,false)};RechargeMainPanel.prototype.onWindowDestory=function(){};RechargeMainPanel.prototype.onWindowOpen=function(){var arg=[];for(var _i=0;_i<arguments.length;_i++){arg[_i]=arguments[_i]}this.UpdateView()};RechargeMainPanel.prototype.UpdateView=function(){this.rechargeList=Game.moduleModel.recharge.rechargeList;this.m_listRechargeItem.numItems=this.rechargeList.length;this.m_title.text=Games.TEXT.RechargeTitle};RechargeMainPanel.prototype.RenderItem=function(index,item){var data=this.rechargeList[index];item.RenderItem(data)};RechargeMainPanel.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.SecretaryData,this.UpdateView,this);this.UpdateView();this.m_btnClose.onClick(this,this.OnCloseClick);this.m_marquee.Show()};RechargeMainPanel.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.SecretaryData,this.UpdateView,this);this.m_marquee.Hide()};RechargeMainPanel.prototype.OnCloseClick=function(){this.moduleWindow.menuClose()};return RechargeMainPanel}(PfSkin.RechargeMainPanelStruct));PfSkin.RechargeMainPanel=RechargeMainPanel})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RedStruct=(function(_super){__extends(RedStruct,_super);function RedStruct(){return _super.call(this)||this}RedStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","Red"))};RedStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_num=(this.getChild("num"))};RedStruct.URL="ui://s33x8418jazc1mo";RedStruct.DependPackages=["PfSkin","Common"];return RedStruct}(fairygui.GComponent));PfSkin.RedStruct=RedStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var Red=(function(_super){__extends(Red,_super);function Red(){return _super!==null&&_super.apply(this,arguments)||this}Red.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_num.visible=false};return Red}(PfSkin.RedStruct));PfSkin.Red=Red})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RenameInputStruct=(function(_super){__extends(RenameInputStruct,_super);function RenameInputStruct(){return _super.call(this)||this}RenameInputStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","RenameInput"))};RenameInputStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};RenameInputStruct.URL="ui://s33x8418bw70t272";RenameInputStruct.DependPackages=["PfSkin","Common"];return RenameInputStruct}(fairygui.GLabel));PfSkin.RenameInputStruct=RenameInputStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RenameInput=(function(_super){__extends(RenameInput,_super);function RenameInput(){return _super!==null&&_super.apply(this,arguments)||this}return RenameInput}(PfSkin.RenameInputStruct));PfSkin.RenameInput=RenameInput})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RenameUIStruct=(function(_super){__extends(RenameUIStruct,_super);function RenameUIStruct(){return _super.call(this)||this}RenameUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","RenameUI"))};RenameUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_tip=(this.getChild("tip"));this.m_close=(this.getChild("close"));this.m_okBtn=(this.getChild("okBtn"));this.m_noCostBtn=(this.getChild("noCostBtn"));this.m_content=(this.getChild("content"));this.m_randomBtn=(this.getChild("randomBtn"))};RenameUIStruct.URL="ui://s33x8418r9e2t274";RenameUIStruct.DependPackages=["PfSkin","Common"];return RenameUIStruct}(fairygui.GComponent));PfSkin.RenameUIStruct=RenameUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RenameUI=(function(_super){__extends(RenameUI,_super);function RenameUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.focusTimeHandler=0;return _this}RenameUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_noCostBtn.onClick(this,this.onClickNoCostBtn);this.m_randomBtn.onClick(this,this.onClickRandomBtn);this.m_close.onClick(this,this.onClickCloseBtn);this.m_okBtn.visible=false;this.m_noCostBtn.visible=false};RenameUI.prototype.open=function(dialogMsg,caller,okFunc,closeFunc,okBtnTxt,defaultTxt,promptText,maxLen,url,cost,isClickButtonAutoClose,randomNames){var _this=this;if(isClickButtonAutoClose===void 0){isClickButtonAutoClose=true}if(isNullOrEmpty(okBtnTxt)){okBtnTxt=Games.TEXT.Rename}this.m_tip.text=dialogMsg;this.m_okBtn.text=okBtnTxt;this.m_content.m_title.input.maxChars=maxLen;this.charMaxLength=maxLen;this.m_content.m_title.input.restrict="a-zA-Z0-9\u4e00-\u9fa5 ";this.m_content.text=defaultTxt;if(maxLen>0){promptText=format(promptText,maxLen)}this.m_content.m_title.promptText=promptText;this.focusTimeHandler=setTimeout(function(){if(_this&&_this.m_content&&_this.m_content.m_title){_this.m_content.m_title.input.focus=true}},1000);this.okFunc=okFunc;this.closeFunc=closeFunc;this.isClickButtonAutoClose=isClickButtonAutoClose;this.cost=cost;this.caller=caller;this.randomNames=randomNames;this.m_content.m_title.input.promptColor="0x417295";if(isNullOrEmpty(url)){url=Game.config.avatar.GetBodyIconUrl(9991)}this.m_icon.icon=url;if(randomNames&&randomNames.length>0){this.getRandomNames()}if(cost&&cost.length>0){this.m_okBtn.icon=Game.config.avatar.getConfig(Game.config.item.getConfig(cost[0]).icon).iconUrl;this.m_okBtn.m_number.text=formatNumberUnit(cost[1]);this.m_okBtn.visible=true;this.m_noCostBtn.visible=false}else{this.m_okBtn.visible=false;this.m_noCostBtn.visible=true}Game.event.add(GameEventKey.GameFrame_OpenMenu,this.onOpenMenu,this);Games.MenuLayer.module.addChild(this);setScreenSize(this);centerScreen(this)};RenameUI.prototype.onClickCloseBtn=function(){if(this.closeFunc){this.closeFunc()}this.close()};RenameUI.prototype.onClickOkBtn=function(){if(validateOtherName(this.m_content.text,this.charMaxLength)){var enough=Games.ItemHelper.checkItemEnough3(this.cost);if(enough){this.onClickNoCostBtn()}else{Game.system.openItemWay(this.cost[0],this.cost[1])}}};RenameUI.prototype.onClickNoCostBtn=function(){if(this.isClickButtonAutoClose){this.close()}if(this.okFunc){if(this.caller){this.okFunc.apply(this.caller,this.m_content.text)}else{this.okFunc(this.m_content.text)}}};RenameUI.prototype.onOpenMenu=function(menuId){this.close()};RenameUI.prototype.close=function(){Game.event.remove(GameEventKey.GameFrame_OpenMenu,this.onOpenMenu,this);clearTimeout(this.focusTimeHandler);this.removeFromParent()};RenameUI.prototype.onClickRandomBtn=function(){this.m_content.text=this.randomNames[this.randomIndex];this.randomIndex++;if(this.randomIndex>=this.randomNames.length){this.randomIndex=0}};RenameUI.prototype.getRandomNames=function(){this.randomIndex=Math.floor(this.randomNames.length*Math.random())};return RenameUI}(PfSkin.RenameUIStruct));PfSkin.RenameUI=RenameUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ResultItemBtnStruct=(function(_super){__extends(ResultItemBtnStruct,_super);function ResultItemBtnStruct(){return _super.call(this)||this}ResultItemBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ResultItemBtn"))};ResultItemBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_starList=(this.getChild("starList"));this.m_name=(this.getChild("name"))};ResultItemBtnStruct.URL="ui://s33x8418mrkf1np";ResultItemBtnStruct.DependPackages=["PfSkin","Common"];return ResultItemBtnStruct}(fairygui.GButton));PfSkin.ResultItemBtnStruct=ResultItemBtnStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ResultItemBtn=(function(_super){__extends(ResultItemBtn,_super);function ResultItemBtn(){return _super!==null&&_super.apply(this,arguments)||this}return ResultItemBtn}(PfSkin.ResultItemBtnStruct));PfSkin.ResultItemBtn=ResultItemBtn})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RewardCellViewStruct=(function(_super){__extends(RewardCellViewStruct,_super);function RewardCellViewStruct(){return _super.call(this)||this}RewardCellViewStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","RewardCellView"))};RewardCellViewStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};RewardCellViewStruct.URL="ui://s33x8418jazc1mg";RewardCellViewStruct.DependPackages=["PfSkin"];return RewardCellViewStruct}(fairygui.GLabel));PfSkin.RewardCellViewStruct=RewardCellViewStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RewardCellView=(function(_super){__extends(RewardCellView,_super);function RewardCellView(){return _super!==null&&_super.apply(this,arguments)||this}return RewardCellView}(PfSkin.RewardCellViewStruct));PfSkin.RewardCellView=RewardCellView})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RoadShowContainerStruct=(function(_super){__extends(RoadShowContainerStruct,_super);function RoadShowContainerStruct(){return _super.call(this)||this}RoadShowContainerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","RoadShowContainer"))};RoadShowContainerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};RoadShowContainerStruct.URL="ui://s33x8418iacmt1w4";RoadShowContainerStruct.DependPackages=["PfSkin"];return RoadShowContainerStruct}(fairygui.GComponent));PfSkin.RoadShowContainerStruct=RoadShowContainerStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RoadShowContainer=(function(_super){__extends(RoadShowContainer,_super);function RoadShowContainer(){return _super!==null&&_super.apply(this,arguments)||this}return RoadShowContainer}(PfSkin.RoadShowContainerStruct));PfSkin.RoadShowContainer=RoadShowContainer})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RoomDisplayContainerStruct=(function(_super){__extends(RoomDisplayContainerStruct,_super);function RoomDisplayContainerStruct(){return _super.call(this)||this}RoomDisplayContainerStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","RoomDisplayContainer"))};RoomDisplayContainerStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};RoomDisplayContainerStruct.URL="ui://s33x8418w2u61wa";RoomDisplayContainerStruct.DependPackages=["PfSkin"];return RoomDisplayContainerStruct}(fairygui.GComponent));PfSkin.RoomDisplayContainerStruct=RoomDisplayContainerStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var RoomDisplayContainer=(function(_super){__extends(RoomDisplayContainer,_super);function RoomDisplayContainer(){return _super!==null&&_super.apply(this,arguments)||this}return RoomDisplayContainer}(PfSkin.RoomDisplayContainerStruct));PfSkin.RoomDisplayContainer=RoomDisplayContainer})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ScoutInputStruct=(function(_super){__extends(ScoutInputStruct,_super);function ScoutInputStruct(){return _super.call(this)||this}ScoutInputStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ScoutInput"))};ScoutInputStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_nameGroup=(this.getChild("nameGroup"));this.m_title=(this.getChild("title"))};ScoutInputStruct.URL="ui://s33x8418bw70t273";ScoutInputStruct.DependPackages=["PfSkin","Common"];return ScoutInputStruct}(fairygui.GLabel));PfSkin.ScoutInputStruct=ScoutInputStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ScoutInput=(function(_super){__extends(ScoutInput,_super);function ScoutInput(){return _super!==null&&_super.apply(this,arguments)||this}return ScoutInput}(PfSkin.ScoutInputStruct));PfSkin.ScoutInput=ScoutInput})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ShareBtnStruct=(function(_super){__extends(ShareBtnStruct,_super);function ShareBtnStruct(){return _super.call(this)||this}ShareBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","shareBtn"))};ShareBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};ShareBtnStruct.URL="ui://s33x8418dk94t21g";ShareBtnStruct.DependPackages=["PfSkin","Fx","WarMovie","Common"];return ShareBtnStruct}(fairygui.GButton));PfSkin.ShareBtnStruct=ShareBtnStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ShareBtn=(function(_super){__extends(ShareBtn,_super);function ShareBtn(){return _super!==null&&_super.apply(this,arguments)||this}return ShareBtn}(PfSkin.ShareBtnStruct));PfSkin.ShareBtn=ShareBtn})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ShopGoodsItemStruct=(function(_super){__extends(ShopGoodsItemStruct,_super);function ShopGoodsItemStruct(){return _super.call(this)||this}ShopGoodsItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ShopGoodsItem"))};ShopGoodsItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_type=this.getController("type");this.m_listGive=(this.getChild("listGive"));this.m_title=(this.getChild("title"));this.m_labBuy=(this.getChild("labBuy"))};ShopGoodsItemStruct.URL="ui://s33x8418ap5a1v1";ShopGoodsItemStruct.DependPackages=["PfSkin","Common"];return ShopGoodsItemStruct}(fairygui.GLabel));PfSkin.ShopGoodsItemStruct=ShopGoodsItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ShopGoodsItem=(function(_super){__extends(ShopGoodsItem,_super);function ShopGoodsItem(){return _super!==null&&_super.apply(this,arguments)||this}ShopGoodsItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_listGive.itemRenderer=new Handler(this,this.RenderListItem,null,false)};ShopGoodsItem.prototype.RenderItem=function(data){if(data instanceof Array){this.itemList=data;this.m_listGive.numItems=this.itemList.length}else{this.itemData=data;this.m_labBuy.RenderItem(this.itemData)}};ShopGoodsItem.prototype.RenderListItem=function(index,item){var data=this.itemList[index];item.RenderItem(data)};return ShopGoodsItem}(PfSkin.ShopGoodsItemStruct));PfSkin.ShopGoodsItem=ShopGoodsItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ShopItemStruct=(function(_super){__extends(ShopItemStruct,_super);function ShopItemStruct(){return _super.call(this)||this}ShopItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ShopItem"))};ShopItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_hasPeriodTime=this.getController("hasPeriodTime");this.m_hasSallUp=this.getController("hasSallUp");this.m_itemType=this.getController("itemType");this.m_name=(this.getChild("name"));this.m_tip=(this.getChild("tip"));this.m_timeCanBuy=(this.getChild("timeCanBuy"));this.m_timeCanBuyTitle=(this.getChild("timeCanBuyTitle"));this.m_timeAfterBuy=(this.getChild("timeAfterBuy"));this.m_tiptitle=(this.getChild("tiptitle"));this.m_goodsIcon=(this.getChild("goodsIcon"));this.m_btnSelect=(this.getChild("btnSelect"));this.m_labCost=(this.getChild("labCost"))};ShopItemStruct.URL="ui://s33x8418ap5a1us";ShopItemStruct.DependPackages=["PfSkin","Common"];return ShopItemStruct}(fairygui.GLabel));PfSkin.ShopItemStruct=ShopItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ShopItem=(function(_super){__extends(ShopItem,_super);function ShopItem(){return _super!==null&&_super.apply(this,arguments)||this}ShopItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnSelect.onClick(this,this.OnSelect);this.m_btnSelect.title=null};ShopItem.prototype.RenderItem=function(data){this.goodsData=data;if(data&&data.Config){this.m_tip.text=data.saleNums.toString();this.m_tiptitle.text=data.LimitString;this.m_name.text=data.Config.name;if(data.Items&&data.Items[0]){var item=data.Items[0];this.m_goodsIcon.RenderItem(item)}if(data.Config.cost){var cost=data.Config.cost;this.m_labCost.m_number.text=cost.itemNumTxt;this.m_labCost.m_icon.url=Games.ItemData.GetIconUrl(cost.itemId)}this.UpdateAfterTime();Laya.timer.loop(1000,this,this.UpdateAfterTime);this.m_hasSallUp.setSelectedIndex(this.goodsData.saleNums==0?1:0);if(this.m_hasSallUp[1]){this.m_goodsIcon.grayed=true}else{this.m_goodsIcon.grayed=false}}};ShopItem.prototype.UpdateAfterTime=function(){if(this.goodsData.isAfterTime){if(this.goodsData.Config.hasPeriodTime&&(!this.goodsData.isPeriodTime)){this.m_hasPeriodTime.setSelectedIndex(1)}else{this.m_hasPeriodTime.setSelectedIndex(0)}}else{this.m_hasPeriodTime.setSelectedIndex(2);this.m_timeAfterBuy.text=Game.config.msg.getTxtFormat(MsgKey.purchase_delay,this.goodsData.afterTimeTxt)}};ShopItem.prototype.OnSelect=function(){if(this.goodsData&&this.goodsData.Config){if(this.goodsData.saleNums>0){if(!this.goodsData.isAfterTime){Game.system.toastMsg(MsgKey.purchase_delay_msg,TimeHelper.TimeFormat(this.goodsData.Config.delay));return}if(!this.goodsData.isPeriodTime){Game.system.toastMsg(MsgKey.shop_period,this.goodsData.Config.period);return}var cost=this.goodsData.Config.cost;if(Game.moduleModel.item.hasItemNum(cost.itemId,cost.itemNum)){if(this.buyHandler){console.log(this.x,this.y,this.width,this.height);this.buyHandler.runWith([this.goodsData.Items,this.localToGlobal(this.m_btnSelect.x+this.m_btnSelect.width/2,this.m_btnSelect.y+this.m_btnSelect.height/2)])}Game.protosender.mall.buy(this.goodsData.id,1,cost.itemId);Games.Static.Instance.onUseGold(this.goodsData.id.toString(),cost.itemNum,"shopBuy&")}else{Game.system.openItemWay(cost.itemId,cost.itemNum)}}}};return ShopItem}(PfSkin.ShopItemStruct));PfSkin.ShopItem=ShopItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ShopMainPanelStruct=(function(_super){__extends(ShopMainPanelStruct,_super);function ShopMainPanelStruct(){return _super.call(this)||this}ShopMainPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ShopMainPanel"))};ShopMainPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_tab=this.getController("tab");this.m_listSingleItem=(this.getChild("listSingleItem"));this.m_listSpecialItem=(this.getChild("listSpecialItem"));this.m_listTab=(this.getChild("listTab"));this.m_listAsset=(this.getChild("listAsset"));this.m_btnClose=(this.getChild("btnClose"))};ShopMainPanelStruct.URL="ui://s33x8418ap5a1uq";ShopMainPanelStruct.DependPackages=["PfSkin","Common"];return ShopMainPanelStruct}(fairygui.GComponent));PfSkin.ShopMainPanelStruct=ShopMainPanelStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ShopMainPanel=(function(_super){__extends(ShopMainPanel,_super);function ShopMainPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.assetTypes=[1,6];return _this}ShopMainPanel.prototype.onWindowInited=function(){this.m_listAsset.itemRenderer=new Handler(this,this.RenderAsset,null,false);this.m_btnClose.onClick(this,this.OnCloseClick);this.m_listTab.itemRenderer=new Handler(this,this.RenderTab,null,false);this.m_listTab.on(fairygui.Events.CLICK_ITEM,this,this.OnTabSelect);this.m_listSingleItem.itemRenderer=new Handler(this,this.RenderSignalItem,null,false);this.m_listSpecialItem.itemRenderer=new Handler(this,this.RenderSpecialItem,null,false)};ShopMainPanel.prototype.onWindowOpen=function(){var arg=[];for(var _i=0;_i<arguments.length;_i++){arg[_i]=arguments[_i]}Game.localStorage.lastOpenShopSingleTime=Game.time.serverMilliseconds;this.shopType=1;this.m_listTab.selectedIndex=0};ShopMainPanel.prototype.UpdateView=function(){this.GoodsList=Game.moduleModel.shop.GetGoodsByShopType(this.shopType);switch(this.shopType){case 1:this.m_listSingleItem.numItems=Math.ceil(this.GoodsList.length/3);break;case 2:this.m_listSpecialItem.numItems=this.GoodsList.length;break;case 3:break;default:break}this.m_listTab.numItems=2};ShopMainPanel.prototype.UpdateAsset=function(){this.m_listAsset.numItems=this.assetTypes.length};ShopMainPanel.prototype.RenderAsset=function(index,item){var id=this.assetTypes[index];item.setItemId(id)};ShopMainPanel.prototype.RenderTab=function(index,item){item.Red=Game.moduleModel.shop.GetRedNumByType(index+1)};ShopMainPanel.prototype.OnTabSelect=function(item){switch(this.m_listTab.selectedIndex){case 0:Game.localStorage.lastOpenShopSingleTime=Game.time.serverMilliseconds;this.shopType=1;break;case 1:Game.localStorage.lastOpenShopSpecialTime=Game.time.serverMilliseconds;this.shopType=2;break;case 2:this.shopType=3;break;default:break}this.UpdateView()};ShopMainPanel.prototype.RenderSignalItem=function(index,item){var goodsLine=this.GoodsList.slice(index*3,index*3+3);var handler=new Handler(this,this.OnBuy,null,false);item.RenderItem(goodsLine,handler)};ShopMainPanel.prototype.OnBuy=function(items,pos){this.buyItems=items;this.buyPos=pos};ShopMainPanel.prototype.RenderSpecialItem=function(index,item){var goods=this.GoodsList[index];item.RenderItem(goods);item.buyHandler=new Handler(this,this.OnBuy,null,false)};ShopMainPanel.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.mall_buy,this.OnMallBuyResponse,this);Game.protoOkEvent.add(ProtoEventKey.MallItemLimitData,this.UpdateView,this);Game.protoOkEvent.add(ProtoEventKey.ItemData,this.UpdateAsset,this);Game.event.add(GameEventKey.GameEventKey_TimeLimitRemind,this.GameEventKey_TimeLimitRemind,this);this.UpdateAsset();this.UpdateView()};ShopMainPanel.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.mall_buy,this.OnMallBuyResponse,this);Game.protoOkEvent.remove(ProtoEventKey.MallItemLimitData,this.UpdateView,this);Game.protoOkEvent.remove(ProtoEventKey.ItemData,this.UpdateAsset,this);Game.event.remove(GameEventKey.GameEventKey_TimeLimitRemind,this.GameEventKey_TimeLimitRemind,this)};ShopMainPanel.prototype.GameEventKey_TimeLimitRemind=function(timeLimit){switch(timeLimit){case Games.TimeLimitType.Zero:if(User.isTenTime){Game.moduleModel.shop.ClearGoodsLimit();this.UpdateView()}break}};ShopMainPanel.prototype.OnCloseClick=function(){this.moduleWindow.menuClose()};ShopMainPanel.prototype.OnMallBuyResponse=function(){if(this.buyItems){Game.system.showAssetFx(Games.ItemData.BinningItemList(this.buyItems),this,this.buyPos)}this.UpdateView()};return ShopMainPanel}(PfSkin.ShopMainPanelStruct));PfSkin.ShopMainPanel=ShopMainPanel})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ShopRechargeItemStruct=(function(_super){__extends(ShopRechargeItemStruct,_super);function ShopRechargeItemStruct(){return _super.call(this)||this}ShopRechargeItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ShopRechargeItem"))};ShopRechargeItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_isFirstDouble=this.getController("isFirstDouble");this.m_txtTip=(this.getChild("txtTip"));this.m_imgTipFirst=(this.getChild("imgTipFirst"));this.m_buyGoods=(this.getChild("buyGoods"));this.m_giveGoods=(this.getChild("giveGoods"));this.m_btnSelect=(this.getChild("btnSelect"))};ShopRechargeItemStruct.URL="ui://s33x8418ap5a1uz";ShopRechargeItemStruct.DependPackages=["PfSkin","Common"];return ShopRechargeItemStruct}(fairygui.GComponent));PfSkin.ShopRechargeItemStruct=ShopRechargeItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ShopRechargeItem=(function(_super){__extends(ShopRechargeItem,_super);function ShopRechargeItem(){return _super!==null&&_super.apply(this,arguments)||this}ShopRechargeItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnSelect.onClick(this,this.OnSelect)};ShopRechargeItem.prototype.RenderItem=function(data){this.data=data;var buyGoods=this.data.item;var giveGoods=this.data.gift;this.m_txtTip.text=Games.TEXT.ShopAvailable.format(this.data.term);if(buyGoods){this.m_buyGoods.visible=true;this.m_buyGoods.RenderItem(buyGoods);this.m_buyGoods.title=this.data.name}else{this.m_buyGoods.visible=false}if(giveGoods&&giveGoods.length>0){this.m_giveGoods.visible=true;this.m_giveGoods.RenderItem(giveGoods);this.m_giveGoods.title=Games.TEXT.ShopGive}else{this.m_giveGoods.visible=false}this.m_btnSelect.title=this.data.rechangeDesc;if(this.data.limit.itemId==3){this.m_btnSelect.enabled=!Game.moduleModel.secretary.isForever}};ShopRechargeItem.prototype.OnSelect=function(){Game.protosender.pay.StartOrder(this.data.id,1)};return ShopRechargeItem}(PfSkin.ShopRechargeItemStruct));PfSkin.ShopRechargeItem=ShopRechargeItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ShopSpecialItemStruct=(function(_super){__extends(ShopSpecialItemStruct,_super);function ShopSpecialItemStruct(){return _super.call(this)||this}ShopSpecialItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","ShopSpecialItem"))};ShopSpecialItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_hasPeriodTime=this.getController("hasPeriodTime");this.m_hasSallUp=this.getController("hasSallUp");this.m_name=(this.getChild("name"));this.m_listItem=(this.getChild("listItem"));this.m_timeCanBuyTitle=(this.getChild("timeCanBuyTitle"));this.m_timeCanBuy=(this.getChild("timeCanBuy"));this.m_timeAfterBuy=(this.getChild("timeAfterBuy"));this.m_tipTitle=(this.getChild("tipTitle"));this.m_tip=(this.getChild("tip"));this.m_btnSelect=(this.getChild("btnSelect"));this.m_labCost=(this.getChild("labCost"))};ShopSpecialItemStruct.URL="ui://s33x8418ap5a1uv";ShopSpecialItemStruct.DependPackages=["PfSkin","Common"];return ShopSpecialItemStruct}(fairygui.GComponent));PfSkin.ShopSpecialItemStruct=ShopSpecialItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var ShopSpecialItem=(function(_super){__extends(ShopSpecialItem,_super);function ShopSpecialItem(){return _super!==null&&_super.apply(this,arguments)||this}ShopSpecialItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnSelect.onClick(this,this.OnSelect);this.m_listItem.itemRenderer=new Handler(this,this.RenderGoodsItem,null,false)};ShopSpecialItem.prototype.RenderItem=function(data){this.goodsData=data;if(this.goodsData&&this.goodsData.Config){this.m_name.text=data.Config.name;this.m_btnSelect.title=null;this.m_tip.text=data.saleNums.toString();this.m_tipTitle.text=data.LimitString;var cost=data.Config.cost;this.m_labCost.m_number.text=cost.itemNumTxt;this.m_labCost.icon=Games.ItemData.GetIconUrl(cost.itemId);var itemList=data.Items;this.m_listItem.numItems=itemList.length;this.m_hasSallUp.setSelectedIndex(this.goodsData.saleNums==0?1:0);this.UpdateAfterTime();Laya.timer.loop(1000,this,this.UpdateAfterTime)}};ShopSpecialItem.prototype.UpdateAfterTime=function(){if(this.goodsData.isAfterTime){if(this.goodsData.Config.hasPeriodTime&&(!this.goodsData.isPeriodTime)){this.m_hasPeriodTime.setSelectedIndex(1)}else{this.m_hasPeriodTime.setSelectedIndex(0)}}else{this.m_hasPeriodTime.setSelectedIndex(2);this.m_timeAfterBuy.text=Game.config.msg.getTxtFormat(MsgKey.purchase_delay,this.goodsData.afterTimeTxt)}};ShopSpecialItem.prototype.RenderGoodsItem=function(index,item){if(this.goodsData&&this.goodsData.Config){var itemList=this.goodsData.Items;if(itemList){var itemData=itemList[index];item.RenderItem(itemData)}}};ShopSpecialItem.prototype.OnSelect=function(){if(this.goodsData&&this.goodsData.Config){if(this.goodsData.saleNums>0){if(!this.goodsData.isAfterTime){Game.system.toastMsg(MsgKey.purchase_delay_msg);return}if(!this.goodsData.isPeriodTime){Game.system.toastMsg(MsgKey.shop_period,this.goodsData.Config.period);return}var cost=this.goodsData.Config.cost;if(Game.moduleModel.item.hasItemNum(cost.itemId,cost.itemNum)){if(this.buyHandler){console.log(this.x,this.y,this.width,this.height);var pos=this.parent.localToGlobal(this.x+this.width/2,this.y+this.height/2);console.log(pos.x,pos.y);console.log(this.parent.x,this.parent.y);this.buyHandler.runWith([this.goodsData.Items,this.localToGlobal(this.m_btnSelect.x+this.m_btnSelect.width/2,this.m_btnSelect.y+this.m_btnSelect.height/2)])}Game.protosender.mall.buy(this.goodsData.id,1,cost.itemId);Games.Static.Instance.onUseGold(this.goodsData.id.toString(),cost.itemNum,"shopBuy&")}else{Game.system.openItemWay(cost.itemId,cost.itemNum)}}}};return ShopSpecialItem}(PfSkin.ShopSpecialItemStruct));PfSkin.ShopSpecialItem=ShopSpecialItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var SpeedBtnStruct=(function(_super){__extends(SpeedBtnStruct,_super);function SpeedBtnStruct(){return _super.call(this)||this}SpeedBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","SpeedBtn"))};SpeedBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_title2=(this.getChild("title2"));this.m_costIcon=(this.getChild("costIcon"));this.m_title=(this.getChild("title"))};SpeedBtnStruct.URL="ui://s33x8418jazc1mt";SpeedBtnStruct.DependPackages=["PfSkin","Common"];return SpeedBtnStruct}(fairygui.GButton));PfSkin.SpeedBtnStruct=SpeedBtnStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var SpeedBtn=(function(_super){__extends(SpeedBtn,_super);function SpeedBtn(){return _super!==null&&_super.apply(this,arguments)||this}return SpeedBtn}(PfSkin.SpeedBtnStruct));PfSkin.SpeedBtn=SpeedBtn})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryAchevementItemStruct=(function(_super){__extends(StoryAchevementItemStruct,_super);function StoryAchevementItemStruct(){return _super.call(this)||this}StoryAchevementItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryAchevementItem"))};StoryAchevementItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c_color=this.getController("c_color");this.m_desc=(this.getChild("desc"));this.m_progress=(this.getChild("progress"));this.m_list=(this.getChild("list"));this.m_okBtn=(this.getChild("okBtn"))};StoryAchevementItemStruct.URL="ui://s33x8418eb3n1o4";StoryAchevementItemStruct.DependPackages=["PfSkin","Common","WarMovie"];return StoryAchevementItemStruct}(fairygui.GComponent));PfSkin.StoryAchevementItemStruct=StoryAchevementItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryAchevementItem=(function(_super){__extends(StoryAchevementItem,_super);function StoryAchevementItem(){return _super!==null&&_super.apply(this,arguments)||this}StoryAchevementItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_okBtn.text=TEXT.StoryGetReward;this.m_list.itemRenderer=Handler.create(this,this.updateRewardItem,null,false)};StoryAchevementItem.prototype.updateRewardItem=function(index,item){var dtItem=this.config.reward[index];var itemConfig=Game.config.item.getConfig(dtItem.itemId);item.icon=itemConfig.iconUrl;item.text=dtItem.itemNum+"";item.sound=""};StoryAchevementItem.prototype.onClickOkBtn=function(){Game.protosender.task.reward(this.taskData.uuid)};StoryAchevementItem.prototype.updateView=function(data){this.taskData=data;this.config=data.config;this.m_desc.text=format(this.config.name,this.config.goal);this.m_progress.text=format("({0}/{1})",data.progress,this.config.goal);this.m_list.numItems=this.config.reward.length;if(data.isFinished){this.m_okBtn.touchable=true;this.m_okBtn.grayed=false;this.m_c_color.selectedIndex=1}else{this.m_okBtn.touchable=false;this.m_okBtn.grayed=true;this.m_c_color.selectedIndex=0}};return StoryAchevementItem}(PfSkin.StoryAchevementItemStruct));PfSkin.StoryAchevementItem=StoryAchevementItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryAchevementTargetItemStruct=(function(_super){__extends(StoryAchevementTargetItemStruct,_super);function StoryAchevementTargetItemStruct(){return _super.call(this)||this}StoryAchevementTargetItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryAchevementTargetItem"))};StoryAchevementTargetItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_gou=(this.getChild("gou"))};StoryAchevementTargetItemStruct.URL="ui://s33x8418eb3n1o5";StoryAchevementTargetItemStruct.DependPackages=["PfSkin","Common"];return StoryAchevementTargetItemStruct}(fairygui.GLabel));PfSkin.StoryAchevementTargetItemStruct=StoryAchevementTargetItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryAchevementTargetItem=(function(_super){__extends(StoryAchevementTargetItem,_super);function StoryAchevementTargetItem(){return _super!==null&&_super.apply(this,arguments)||this}StoryAchevementTargetItem.prototype.updateView=function(str,data){this.text=format(str,data.progress);if(data.status==EStoryModule.finish){this.m_gou.grayed=false}else{this.m_gou.grayed=true}};return StoryAchevementTargetItem}(PfSkin.StoryAchevementTargetItemStruct));PfSkin.StoryAchevementTargetItem=StoryAchevementTargetItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryAchevementTargetUIStruct=(function(_super){__extends(StoryAchevementTargetUIStruct,_super);function StoryAchevementTargetUIStruct(){return _super.call(this)||this}StoryAchevementTargetUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryAchevementTargetUI"))};StoryAchevementTargetUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_close=(this.getChild("close"));this.m_title=(this.getChild("title"));this.m_desc=(this.getChild("desc"));this.m_list=(this.getChild("list"))};StoryAchevementTargetUIStruct.URL="ui://s33x8418eb3n1o6";StoryAchevementTargetUIStruct.DependPackages=["PfSkin","Common"];return StoryAchevementTargetUIStruct}(fairygui.GComponent));PfSkin.StoryAchevementTargetUIStruct=StoryAchevementTargetUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryAchevementTargetUI=(function(_super){__extends(StoryAchevementTargetUI,_super);function StoryAchevementTargetUI(){return _super!==null&&_super.apply(this,arguments)||this}StoryAchevementTargetUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.targetTips=[Games.TEXT.StoryAchieveTarget1,Games.TEXT.StoryAchieveTarget2,Games.TEXT.StoryAchieveTarget3];this.m_desc.text=TEXT.StoryAchievementDesc;this.m_title.text=TEXT.StoryAchievementTitle;this.m_list.itemRenderer=Handler.create(this,this.onUpdateItemRender,null,false)};StoryAchevementTargetUI.prototype.onUpdateItemRender=function(index,item){var item1=item;item1.updateView(this.targetTips[index],this.storyProgress[index])};StoryAchevementTargetUI.prototype.updateView=function(data){this.storyProgress=data.storyProgressInfo;this.m_list.numItems=data.storyProgressInfo.length};return StoryAchevementTargetUI}(PfSkin.StoryAchevementTargetUIStruct));PfSkin.StoryAchevementTargetUI=StoryAchevementTargetUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryAchevementUIStruct=(function(_super){__extends(StoryAchevementUIStruct,_super);function StoryAchevementUIStruct(){return _super.call(this)||this}StoryAchevementUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryAchevementUI"))};StoryAchevementUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_closeBtn=(this.getChild("closeBtn"))};StoryAchevementUIStruct.URL="ui://s33x8418eb3n1o3";StoryAchevementUIStruct.DependPackages=["PfSkin","Common"];return StoryAchevementUIStruct}(fairygui.GComponent));PfSkin.StoryAchevementUIStruct=StoryAchevementUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryAchevementUI=(function(_super){__extends(StoryAchevementUI,_super);function StoryAchevementUI(){return _super!==null&&_super.apply(this,arguments)||this}StoryAchevementUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.itemRenderer=Handler.create(this,this.onUpdateItemRender,null,false);this.m_list.setVirtual()};StoryAchevementUI.prototype.updateView=function(){setScreenSize(this);this.storyTaskList=Game.moduleModel.task.getCurrentStoryTask();this.m_list.numItems=this.storyTaskList.length};StoryAchevementUI.prototype.onUpdateItemRender=function(index,item){var item1=item;item1.updateView(this.storyTaskList[index])};return StoryAchevementUI}(PfSkin.StoryAchevementUIStruct));PfSkin.StoryAchevementUI=StoryAchevementUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryAchieveItemViewStruct=(function(_super){__extends(StoryAchieveItemViewStruct,_super);function StoryAchieveItemViewStruct(){return _super.call(this)||this}StoryAchieveItemViewStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryAchieveItemView"))};StoryAchieveItemViewStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};StoryAchieveItemViewStruct.URL="ui://s33x8418aqgxt1x1";StoryAchieveItemViewStruct.DependPackages=["PfSkin","Common","Building"];return StoryAchieveItemViewStruct}(fairygui.GButton));PfSkin.StoryAchieveItemViewStruct=StoryAchieveItemViewStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryAchieveItemView=(function(_super){__extends(StoryAchieveItemView,_super);function StoryAchieveItemView(){return _super!==null&&_super.apply(this,arguments)||this}return StoryAchieveItemView}(PfSkin.StoryAchieveItemViewStruct));PfSkin.StoryAchieveItemView=StoryAchieveItemView})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryFindUIStruct=(function(_super){__extends(StoryFindUIStruct,_super);function StoryFindUIStruct(){return _super.call(this)||this}StoryFindUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryFindUI"))};StoryFindUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_itemOrStory=this.getController("itemOrStory");this.m_storyItem=(this.getChild("storyItem"));this.m_item=(this.getChild("item"));this.m_t0=this.getTransition("t0")};StoryFindUIStruct.URL="ui://s33x8418o7xit21j";StoryFindUIStruct.DependPackages=["PfSkin","WarMovie","Fx","Common"];return StoryFindUIStruct}(fairygui.GComponent));PfSkin.StoryFindUIStruct=StoryFindUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryFindUI=(function(_super){__extends(StoryFindUI,_super);function StoryFindUI(){return _super!==null&&_super.apply(this,arguments)||this}StoryFindUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickClose)};StoryFindUI.prototype.onClickClose=function(){if(this.isClickClose){if(this.callBackFunc){this.callBackFunc();this.callBackFunc=null}this.visible=false}};StoryFindUI.prototype.hide=function(){this.isClickClose=false;this.visible=false};StoryFindUI.prototype.showStory=function(id,callBack){if(callBack===void 0){callBack=null}this.callBackFunc=callBack;this.visible=true;this.isClickClose=false;this.m_itemOrStory.selectedIndex=1;var cfg=Game.config.story.getConfig(id);if(cfg){this.m_storyItem.m_filmStar.m_starList.numItems=cfg.starNumber;this.m_storyItem.text=cfg.filmName;this.m_storyItem.icon=Game.config.avatar.getConfig(cfg.poster_name).iconUrl}this.m_t0.setHook("playStar",Handler.create(null,function(){Game.sound.playSound(SoundKey.MM13_GetArtist)}));this.m_t0.play(Handler.create(this,this.canClickClose),1)};StoryFindUI.prototype.showItem=function(id,num){this.m_itemOrStory.selectedIndex=0;this.visible=true;this.isClickClose=false;var cfg=Game.config.item.getConfig(id);if(cfg){this.m_item.icon=cfg.iconUrl}this.m_item.text=formatNumberUnit(num);this.m_t0.setHook("playStar",Handler.create(null,function(){Game.sound.playSound(SoundKey.MM09_GoldReward)}));this.m_t0.play(Handler.create(this,this.canClickClose),1)};StoryFindUI.prototype.canClickClose=function(){this.isClickClose=true};return StoryFindUI}(PfSkin.StoryFindUIStruct));PfSkin.StoryFindUI=StoryFindUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryGroupItemStruct=(function(_super){__extends(StoryGroupItemStruct,_super);function StoryGroupItemStruct(){return _super.call(this)||this}StoryGroupItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryGroupItem"))};StoryGroupItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_name=(this.getChild("name"));this.m_list=(this.getChild("list"));this.m_completeC=(this.getChild("completeC"));this.m_progress=(this.getChild("progress"));this.m_desc=(this.getChild("desc"));this.m_rewardItem=(this.getChild("rewardItem"));this.m_rewardDialog=(this.getChild("rewardDialog"));this.m_t0=this.getTransition("t0")};StoryGroupItemStruct.URL="ui://s33x8418eb3n1nz";StoryGroupItemStruct.DependPackages=["PfSkin","Common"];return StoryGroupItemStruct}(fairygui.GLabel));PfSkin.StoryGroupItemStruct=StoryGroupItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryGroupItem=(function(_super){__extends(StoryGroupItem,_super);function StoryGroupItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isShowReward=false;return _this}StoryGroupItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_rewardItem.m_name.text=Games.TEXT.StoryCollect;this.m_rewardItem.onClick(this,this.onClickRewardItem);this.m_list.itemRenderer=Handler.create(this,this.onUpdateItemRender,null,false)};StoryGroupItem.prototype.showReward=function(){var _this=this;if(this.isShowReward==false){this.isShowReward=true;this.m_rewardDialog.visible=true;this.m_t0.play(Handler.create(null,function(){_this.isShowReward=false;_this.m_rewardDialog.visible=false}))}};StoryGroupItem.prototype.onClickRewardItem=function(){if(this.hasRewardCanGet){Game.protosender.story.getReward(this.config.id)}else{this.showReward()}};StoryGroupItem.prototype.onUpdateItemRender=function(index,item){var item1=item;item1.updateView(this.config.scripts[index],this.storylibUI)};StoryGroupItem.prototype.unlockStory=function(id,callback){for(var index=0;index<this.config.scripts.length;index++){var element=this.config.scripts[index];if(element==id){var item=this.m_list.getChildAt(index);if(item){item.unlockStory(callback)}}}};StoryGroupItem.prototype.updateView=function(suitData,p){this.storylibUI=p;this.config=suitData.config;this.m_list.numItems=this.config.scripts.length;this.m_name.text=this.config.name;this.m_rewardDialog.visible=false;var cur=0;var max=this.config.scripts.length*3;this.hasRewardCanGet=false;if(suitData){cur=suitData.progress2;if(suitData.isHasRewardCanGet){this.hasRewardCanGet=true}}if(cur>=max){this.m_c1.selectedIndex=1}else{this.m_c1.selectedIndex=0}this.suitData=suitData;this.m_progress.text=format("{0}/{1}",cur,max);if(this.hasRewardCanGet){this.m_rewardItem.playEffect()}else{if(suitData.status==EStoryModule.hadGet){this.m_rewardItem.getEffect()}else{this.m_rewardItem.stopEffect()}}var str=Games.TEXT.StoryDesc1;var str1="";for(var index=0;index<this.config.addition_scene.length;index++){var element=this.config.addition_scene[index];var s="";if(index!=0){s=","}s+=format(Games.TEXT.StoryDesc2,Game.config.property.getConfig(element.storyeffect).name,element.rate);str1+=s}str=format(str,str1);this.m_desc.text=str;this.m_rewardDialog.updateView(this.config.rewards)};return StoryGroupItem}(PfSkin.StoryGroupItemStruct));PfSkin.StoryGroupItem=StoryGroupItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryGroupRewardItemStruct=(function(_super){__extends(StoryGroupRewardItemStruct,_super);function StoryGroupRewardItemStruct(){return _super.call(this)||this}StoryGroupRewardItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryGroupRewardItem"))};StoryGroupRewardItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_name=(this.getChild("name"));this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1")};StoryGroupRewardItemStruct.URL="ui://s33x8418eb3n1ny";StoryGroupRewardItemStruct.DependPackages=["PfSkin","Common"];return StoryGroupRewardItemStruct}(fairygui.GButton));PfSkin.StoryGroupRewardItemStruct=StoryGroupRewardItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryGroupRewardItem=(function(_super){__extends(StoryGroupRewardItem,_super);function StoryGroupRewardItem(){return _super!==null&&_super.apply(this,arguments)||this}StoryGroupRewardItem.prototype.playEffect=function(){this.m_t0.stop();this.m_t1.play(null,-1);this.m_c1.selectedIndex=0};StoryGroupRewardItem.prototype.stopEffect=function(){this.m_t0.play(null,1);this.m_t1.stop();this.m_c1.selectedIndex=0};StoryGroupRewardItem.prototype.getEffect=function(){this.m_c1.selectedIndex=1};return StoryGroupRewardItem}(PfSkin.StoryGroupRewardItemStruct));PfSkin.StoryGroupRewardItem=StoryGroupRewardItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryInfoItemStruct=(function(_super){__extends(StoryInfoItemStruct,_super);function StoryInfoItemStruct(){return _super.call(this)||this}StoryInfoItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryInfoItem"))};StoryInfoItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_name=(this.getChild("name"));this.m_desc=(this.getChild("desc"));this.m_tagLabel=(this.getChild("tagLabel"));this.m_tagGroup=(this.getChild("tagGroup"));this.m_head=(this.getChild("head"))};StoryInfoItemStruct.URL="ui://s33x8418eb3n1o8";StoryInfoItemStruct.DependPackages=["PfSkin","Common"];return StoryInfoItemStruct}(fairygui.GComponent));PfSkin.StoryInfoItemStruct=StoryInfoItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryInfoItem=(function(_super){__extends(StoryInfoItem,_super);function StoryInfoItem(){return _super!==null&&_super.apply(this,arguments)||this}StoryInfoItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_tagGroup.visible=false;this.m_head.onClick(this,this.onClickHandler)};StoryInfoItem.prototype.onClickHandler=function(){Game.system.playerInfo(this.playerData.userId)};StoryInfoItem.prototype.updateView=function(data){this.playerData=data;this.m_name.text=data.name;this.m_desc.text=data.message;var headPortrait=data.portrait;if(headPortrait==0){if(data.sex==1101||data.sex==2002){headPortrait=1001}else{headPortrait=1101}}this.m_head.icon=Game.config.avatar.getConfig(Game.config.headPortrait.getConfig(headPortrait).icon).iconUrl};return StoryInfoItem}(PfSkin.StoryInfoItemStruct));PfSkin.StoryInfoItem=StoryInfoItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryInfoUIStruct=(function(_super){__extends(StoryInfoUIStruct,_super);function StoryInfoUIStruct(){return _super.call(this)||this}StoryInfoUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryInfoUI"))};StoryInfoUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_tip2=(this.getChild("tip2"));this.m_list=(this.getChild("list"));this.m_none=(this.getChild("none"));this.m_filmName=(this.getChild("filmName"));this.m_filmTypeList=(this.getChild("filmTypeList"));this.m_inputBG=(this.getChild("inputBG"));this.m_input=(this.getChild("input"));this.m_totalList=(this.getChild("totalList"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_desc=(this.getChild("desc"));this.m_filmIcon=(this.getChild("filmIcon"));this.m_sendBtn=(this.getChild("sendBtn"))};StoryInfoUIStruct.URL="ui://s33x8418eb3n1o7";StoryInfoUIStruct.DependPackages=["PfSkin","Common","WarMovie"];return StoryInfoUIStruct}(fairygui.GComponent));PfSkin.StoryInfoUIStruct=StoryInfoUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryInfoUI=(function(_super){__extends(StoryInfoUI,_super);function StoryInfoUI(){return _super!==null&&_super.apply(this,arguments)||this}StoryInfoUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_sendBtn.text=TEXT.SendMsg;this.m_input.promptText=TEXT.StoryInputPromptText;this.m_input.input.maxChars=50;this.m_filmTypeList.itemRenderer=Laya.Handler.create(this,this.initTagsItem,null,false);this.m_list.itemRenderer=Handler.create(this,this.updateMessageBoard,null,false);this.m_totalList.itemRenderer=Handler.create(this,this.updateTotalNum,null,false)};StoryInfoUI.prototype.updateMessageBoard=function(index,obj){var item=obj;item.updateView(this.msgs[index])};StoryInfoUI.prototype.initTagsItem=function(index,obj){var item=obj;if(index===0){item.m_title.text=this.storyData.config.filmType;item.m_typeLabel.setSelectedIndex(1)}else{item.m_title.text=this.storyData.config.filmTags[index-1];item.m_typeLabel.setSelectedIndex(0)}};StoryInfoUI.prototype.updateTotalNum=function(index,obj){var item=obj;item.setData(this.curTotalNum[index])};StoryInfoUI.prototype.updateView=function(storyId){this.storyId=storyId;this.m_input.text="";this.storyData=Game.moduleModel.story.getStoryData(storyId);if(this.storyData){this.m_filmName.text=this.storyData.config.filmName;this.m_filmIcon.setData(this.storyData.config);this.m_desc.text=this.storyData.config.filmDes.toString();this.m_filmIcon.icon=Game.config.avatar.getConfig(this.storyData.config.poster_name).iconUrl;this.m_tip2.text=Games.TEXT.ZuiGaoPiaoFang;this.curTotalNum=formatNumberUnit(this.storyData.maxScore,1).toString().split("");this.m_totalList.numItems=this.curTotalNum.length;this.m_filmTypeList.numItems=this.storyData.config.filmTags.length+1;this.m_list.numItems=0;this.setMessage()}};StoryInfoUI.prototype.updateMsgBoard=function(msg){if(msg){this.msgs=msg.message;this.m_list.numItems=this.msgs.length}else{this.m_list.numItems=0}this.m_list.scrollPane.scrollBottom();if(this.m_list.numItems>0){this.m_none.visible=false}else{this.m_none.visible=true}};StoryInfoUI.prototype.onClickCloseBtn=function(){this.moduleWindow.menuClose()};StoryInfoUI.prototype.onClickSendBtn=function(){if(validateSendMsgBoard(this.m_input.text)){Game.protosender.story.setMessage(this.storyData.config.id,this.m_input.text);this.m_input.text=""}};StoryInfoUI.prototype.onWindowHide=function(){this.m_closeBtn.offClick(this,this.onClickCloseBtn);this.m_sendBtn.offClick(this,this.onClickSendBtn);Game.protoOkEvent.remove(ProtoEventKey.story_GetMessage,this.updateMsgBoard,this);Game.protoOkEvent.remove(ProtoEventKey.story_SetMessage,this.setMessage,this)};StoryInfoUI.prototype.onWindowShow=function(){this.m_closeBtn.onClick(this,this.onClickCloseBtn);this.m_sendBtn.onClick(this,this.onClickSendBtn);Game.protoOkEvent.add(ProtoEventKey.story_GetMessage,this.updateMsgBoard,this);Game.protoOkEvent.add(ProtoEventKey.story_SetMessage,this.setMessage,this);var id=this.moduleWindow.menuParameter.args[0];this.updateView(id)};StoryInfoUI.prototype.setMessage=function(){Game.protosender.story.getMessage(this.storyData.config.id)};return StoryInfoUI}(PfSkin.StoryInfoUIStruct));PfSkin.StoryInfoUI=StoryInfoUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryItemStruct=(function(_super){__extends(StoryItemStruct,_super);function StoryItemStruct(){return _super.call(this)||this}StoryItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryItem"))};StoryItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_story_enable=this.getController("story_enable");this.m_c_visible_effect=this.getController("c_visible_effect");this.m_bg=(this.getChild("bg"));this.m_finishBg=(this.getChild("finishBg"));this.m_icon=(this.getChild("icon"));this.m_gouGroup=(this.getChild("gouGroup"));this.m_starList=(this.getChild("starList"));this.m_mark1=(this.getChild("mark1"));this.m_mark2=(this.getChild("mark2"));this.m_mark3=(this.getChild("mark3"));this.m_infoBtn=(this.getChild("infoBtn"));this.m_achieveBtn=(this.getChild("achieveBtn"));this.m_mask=(this.getChild("mask"));this.m_effect=(this.getChild("effect"))};StoryItemStruct.URL="ui://s33x8418eb3n1o1";StoryItemStruct.DependPackages=["PfSkin","Fx","Common"];return StoryItemStruct}(fairygui.GComponent));PfSkin.StoryItemStruct=StoryItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryItem=(function(_super){__extends(StoryItem,_super);function StoryItem(){return _super!==null&&_super.apply(this,arguments)||this}StoryItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_infoBtn.onClick(this,this.onClickInfoBtn);this.m_achieveBtn.onClick(this,this.onClickAchieveBtn)};StoryItem.prototype.updateView=function(storyId,storylibUI){var _this=this;this.storylibUI=storylibUI;this.config=Game.config.story.getConfig(storyId);this.storyData=Game.moduleModel.story.getStoryData(storyId);this.m_icon.icon=Game.config.avatar.getConfig(this.config.poster_name).iconUrl;var starNum=Game.config.story.getConfig(storyId).starNumber;this.m_starList.numItems=starNum;var has=Game.moduleModel.story.hasStoryData(this.config.id);var isGold=true;if(this.storyData&&this.storyData.storyProgressInfo.length>0){for(var index=0;index<this.storyData.storyProgressInfo.length;index++){var element=this.storyData.storyProgressInfo[index];this["m_mark"+(index+1)].m_c1.selectedIndex=element.status==EStoryModule.finish?1:0;if(element.status!=EStoryModule.finish){isGold=false}}}else{isGold=false;this.m_mark1.m_c1.selectedIndex=0;this.m_mark2.m_c1.selectedIndex=0;this.m_mark3.m_c1.selectedIndex=0}if(this.storyData&&this.storyData.isUnlock){this.unlockStory(function(){_this.storyData.isUnlock=false;_this.updateView(storyId,_this.storylibUI)})}else{if(has){if(isGold){this.m_story_enable.selectedIndex=2}else{this.m_story_enable.selectedIndex=1}}else{this.m_story_enable.selectedIndex=0}}};StoryItem.prototype.onClickInfoBtn=function(){if(Game.moduleModel.story.hasStoryData(this.config.id)){Game.menu.open(MenuId.StoryInfo,this.config.id)}};StoryItem.prototype.onClickAchieveBtn=function(){if(this.storyData){this.storylibUI.showAchieve(this.storyData)}};StoryItem.prototype.unlockStory=function(callback){var _this=this;this.m_c_visible_effect.selectedIndex=1;this.m_effect.m_t0.play(Handler.create(null,function(){_this.m_c_visible_effect.selectedIndex=0;callback&&callback()}))};return StoryItem}(PfSkin.StoryItemStruct));PfSkin.StoryItem=StoryItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryItemMaskStruct=(function(_super){__extends(StoryItemMaskStruct,_super);function StoryItemMaskStruct(){return _super.call(this)||this}StoryItemMaskStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryItemMask"))};StoryItemMaskStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_mask=(this.getChild("mask"))};StoryItemMaskStruct.URL="ui://s33x8418lq441uk";StoryItemMaskStruct.DependPackages=["PfSkin","Common"];return StoryItemMaskStruct}(fairygui.GComponent));PfSkin.StoryItemMaskStruct=StoryItemMaskStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryItemMask=(function(_super){__extends(StoryItemMask,_super);function StoryItemMask(){return _super!==null&&_super.apply(this,arguments)||this}return StoryItemMask}(PfSkin.StoryItemMaskStruct));PfSkin.StoryItemMask=StoryItemMask})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryItemStarStruct=(function(_super){__extends(StoryItemStarStruct,_super);function StoryItemStarStruct(){return _super.call(this)||this}StoryItemStarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryItemStar"))};StoryItemStarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};StoryItemStarStruct.URL="ui://s33x8418dvryt264";StoryItemStarStruct.DependPackages=["PfSkin"];return StoryItemStarStruct}(fairygui.GComponent));PfSkin.StoryItemStarStruct=StoryItemStarStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryItemStar=(function(_super){__extends(StoryItemStar,_super);function StoryItemStar(){return _super!==null&&_super.apply(this,arguments)||this}return StoryItemStar}(PfSkin.StoryItemStarStruct));PfSkin.StoryItemStar=StoryItemStar})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryLibraryUIStruct=(function(_super){__extends(StoryLibraryUIStruct,_super);function StoryLibraryUIStruct(){return _super.call(this)||this}StoryLibraryUIStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryLibraryUI"))};StoryLibraryUIStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_name=(this.getChild("name"));this.m_souluotimes=(this.getChild("souluotimes"));this.m_times=(this.getChild("times"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_achieveBtn=(this.getChild("achieveBtn"));this.m_gold=(this.getChild("gold"));this.m_souBtn=(this.getChild("souBtn"));this.m_speed=(this.getChild("speed"));this.m_achevementUI=(this.getChild("achevementUI"));this.m_achevementTargetUI=(this.getChild("achevementTargetUI"));this.m_diamand=(this.getChild("diamand"));this.m_findResultUI=(this.getChild("findResultUI"))};StoryLibraryUIStruct.URL="ui://s33x8418eb3n1nx";StoryLibraryUIStruct.DependPackages=["PfSkin","Common","WarMovie","Fx"];return StoryLibraryUIStruct}(fairygui.GComponent));PfSkin.StoryLibraryUIStruct=StoryLibraryUIStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryLibraryUI=(function(_super){__extends(StoryLibraryUI,_super);function StoryLibraryUI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isFinding=false;return _this}StoryLibraryUI.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list.setVirtual();this.m_list.scrollItemToViewOnClick=false;this.m_achevementUI.visible=false;this.m_achevementTargetUI.visible=false;this.m_name.text=Games.TEXT.StoryTitle;this.m_achevementUI.moduleWindow=this;this.m_findResultUI.visible=false;this.resetCost=GlobalConfig.getValue2(GlobalKey.story_stack_cd_stage_cost)[0];var url=Game.config.item.getConfig(this.resetCost.v1).iconUrl;this.m_speed.m_costIcon.icon=url;this.m_achieveBtn.m_red.visible=false};StoryLibraryUI.prototype.updateSearchCost=function(){this.souCost=Game.config.blockLevel.getConfig(User.info.stall).storysearchcost;var url=Game.config.item.getConfig(this.souCost.itemId).iconUrl;this.m_souBtn.m_icon.icon=url;this.m_souBtn.text=Games.TEXT.StorySou;this.m_souBtn.m_number.text=this.souCost.itemNum+"";this.m_gold.m_showBg.setSelectedIndex(1);this.m_gold.setItemId(this.souCost.itemId);this.m_diamand.setItemId(EItemId.diamond);this.m_diamand.m_showBg.setSelectedIndex(1);this.resetTime=0;var preTime=User.info.lastTimeFindStory;var nowTime=Game.time.serverSeconds;var cd=GlobalConfig.getValue(GlobalKey.story_stack_cd);var nextTime=preTime+cd;if(nowTime<nextTime){this.resetTime=Math.min(cd,nextTime-nowTime)}this.m_souBtn.grayed=Game.moduleModel.story.isFindMax;this.m_speed.grayed=Game.moduleModel.story.isClearCdUnlock==false;Laya.timer.clear(this,this.updateTime);if(this.resetTime>0){Laya.timer.loop(1000,this,this.updateTime)}this.updateTimeView()};StoryLibraryUI.prototype.onClickSpeed=function(){if(Game.moduleModel.story.isClearCdUnlock==false){Game.system.toastMsg(MsgKey.block_level_less)}else{if(this.resetTime>0){var enough=Games.ItemHelper.checkItemEnough2(this.resetCost.v1,this.costNum);if(enough){Game.protosender.story.cleanFindStory();Games.Static.Instance.onUseGold("script&clearCD",this.costNum,"")}else{Game.system.openItemWay(this.resetCost.v1,this.costNum)}}}};StoryLibraryUI.prototype.onClickSouBtn=function(){if(Game.moduleModel.story.isFindMax){Game.system.toastText(Games.TEXT.StoryRemainNotEnough)}else{var enough=Games.ItemHelper.checkItemEnough(this.souCost);if(enough){Game.protosender.story.findStory()}else{Game.system.openItemWay(this.souCost.itemId,this.souCost.itemNum)}}};StoryLibraryUI.prototype.updateView=function(){this.updateSearchCost();this.m_souluotimes.text=Games.TEXT.StoryFindTime;this.m_times.text=format("{0}/{1}",User.info.findStoryTime,GlobalConfig.getValue(GlobalKey.story_stack_daily_times));this.suits=Game.moduleModel.story.getStorySuitList();this.m_list.numItems=this.suits.length};StoryLibraryUI.prototype.updateTime=function(){this.resetTime--;if(this.resetTime<0){this.resetTime=0}this.updateTimeView()};Object.defineProperty(StoryLibraryUI.prototype,"costNum",{get:function(){var lv=Math.ceil(this.resetTime/GlobalConfig.getValue(GlobalKey.story_stack_cd_stage_length));var costnum=this.resetCost.v2*lv;return costnum},enumerable:true,configurable:true});StoryLibraryUI.prototype.updateAchieveView=function(){this.updateAchieveRedPoint();this.m_achevementUI.updateView()};StoryLibraryUI.prototype.updateAchieveRedPoint=function(){this.m_achieveBtn.m_red.visible=Game.moduleModel.task.isRedStoryAchievement};StoryLibraryUI.prototype.updateTimeView=function(){if(Game.moduleModel.story.isFindMax||this.resetTime<=0){this.m_speed.visible=false;this.m_souBtn.visible=true;var enough=Games.ItemHelper.checkItemEnough(this.souCost);this.m_souBtn.m_red.visible=enough&&(Game.moduleModel.story.isFindMax==false)}else{this.m_speed.text=Games.TimeHelper.TimeFormat(this.resetTime);this.m_speed.m_title2.text=this.costNum+"";this.m_speed.visible=true;this.m_souBtn.visible=false}};StoryLibraryUI.prototype.onWindowHide=function(){this.m_closeBtn.offClick(this,this.onClickCloseBtn);this.m_achieveBtn.offClick(this,this.onClickAchieveBtn);this.m_achevementUI.m_closeBtn.offClick(this,this.onClickAchieveCloseBtn);this.m_achevementTargetUI.m_close.offClick(this,this.hideAchieve);this.m_speed.offClick(this,this.onClickSpeed);this.m_souBtn.offClick(this,this.onClickSouBtn);Laya.timer.clear(this,this.updateTime);this.m_findResultUI.hide();Game.protoOkEvent.remove(ProtoEventKey.story_getReward,this.updateView,this);Game.protoOkEvent.remove(ProtoEventKey.TaskData,this.updateAchieveView,this);Game.protoOkEvent.remove(ProtoEventKey.story_cleanFindStory,this.updateView,this);Game.protoOkEvent.remove(ProtoEventKey.story_findStory,this.findStoryHandler,this);Game.protoOkEvent.remove(ProtoEventKey.ItemData,this.updateView,this);this.m_list.off(fairygui.Events.SCROLL_END,this,this.scrollEnd);Game.event.remove(GameEventKey.GameEventKey_ResetFindStoryTime,this.updateView,this)};StoryLibraryUI.prototype.onWindowShow=function(){this.m_closeBtn.onClick(this,this.onClickCloseBtn);this.m_achevementUI.m_closeBtn.onClick(this,this.onClickAchieveCloseBtn);this.m_achieveBtn.onClick(this,this.onClickAchieveBtn);this.m_achevementTargetUI.m_close.onClick(this,this.hideAchieve);this.m_list.itemRenderer=Handler.create(this,this.updateItemRenderer,null,false);this.m_speed.onClick(this,this.onClickSpeed);this.m_souBtn.onClick(this,this.onClickSouBtn);Game.protoOkEvent.add(ProtoEventKey.story_getReward,this.updateView,this);Game.protoOkEvent.add(ProtoEventKey.story_cleanFindStory,this.updateView,this);Game.protoOkEvent.add(ProtoEventKey.story_findStory,this.findStoryHandler,this);Game.protoOkEvent.add(ProtoEventKey.TaskData,this.updateAchieveView,this);Game.protoOkEvent.add(ProtoEventKey.ItemData,this.updateView,this);this.m_list.on(fairygui.Events.SCROLL_END,this,this.scrollEnd);this.findId=0;this.m_list.touchable=true;Game.event.add(GameEventKey.GameEventKey_ResetFindStoryTime,this.updateView,this);this.updateAchieveRedPoint();this.updateView()};StoryLibraryUI.prototype.scrollEnd=function(){if(this.findId>0){this.findId=0;this.updateView()}this.m_list.touchable=true};StoryLibraryUI.prototype.updateStoryDataHander=function(){this.updateView()};StoryLibraryUI.prototype.scrollToStory=function(id){for(var index=0;index<this.suits.length;index++){var element=this.suits[index];var storyConfig=Game.config.story.getConfig(id);if(storyConfig&&storyConfig.stack_sort==element.id){this.m_list.scrollPane.snapToItem=true;this.m_list.touchable=false;this.m_list.scrollToView(index,true);break}}};StoryLibraryUI.prototype.findStoryHandler=function(msg){var _this=this;if(msg.type==1){Games.Static.Instance.onUserorbit("script","scriptFind","find");this.findId=msg.id;var data=Game.moduleModel.story.getStoryData(msg.id);if(data){data.isUnlock=true}this.m_findResultUI.showStory(msg.id,function(){_this.updateView();_this.scrollToStory(msg.id)})}else{this.m_list.touchable=true;this.m_findResultUI.showItem(msg.id,msg.num)}};StoryLibraryUI.prototype.onClickAchieveCloseBtn=function(){this.m_achevementUI.visible=false};StoryLibraryUI.prototype.onClickAchieveBtn=function(){this.m_achevementUI.visible=true;this.updateAchieveView()};StoryLibraryUI.prototype.onClickCloseBtn=function(){this.moduleWindow.menuClose()};StoryLibraryUI.prototype.showAchieve=function(data){this.m_achevementTargetUI.visible=true;this.m_achevementTargetUI.updateView(data)};StoryLibraryUI.prototype.hideAchieve=function(){this.m_achevementTargetUI.visible=false};StoryLibraryUI.prototype.updateItemRenderer=function(index,item){var item1=item;item1.updateView(this.suits[index],this)};return StoryLibraryUI}(PfSkin.StoryLibraryUIStruct));PfSkin.StoryLibraryUI=StoryLibraryUI})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryTypeItemStruct=(function(_super){__extends(StoryTypeItemStruct,_super);function StoryTypeItemStruct(){return _super.call(this)||this}StoryTypeItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","StoryTypeItem"))};StoryTypeItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=this.getController("bg");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};StoryTypeItemStruct.URL="ui://s33x8418dk94t21f";StoryTypeItemStruct.DependPackages=["PfSkin","Common"];return StoryTypeItemStruct}(fairygui.GLabel));PfSkin.StoryTypeItemStruct=StoryTypeItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var StoryTypeItem=(function(_super){__extends(StoryTypeItem,_super);function StoryTypeItem(){return _super!==null&&_super.apply(this,arguments)||this}return StoryTypeItem}(PfSkin.StoryTypeItemStruct));PfSkin.StoryTypeItem=StoryTypeItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var TextStruct=(function(_super){__extends(TextStruct,_super);function TextStruct(){return _super.call(this)||this}TextStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","Text"))};TextStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};TextStruct.URL="ui://s33x8418jazc1mv";TextStruct.DependPackages=["PfSkin"];return TextStruct}(fairygui.GLabel));PfSkin.TextStruct=TextStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var Text=(function(_super){__extends(Text,_super);function Text(){return _super!==null&&_super.apply(this,arguments)||this}return Text}(PfSkin.TextStruct));PfSkin.Text=Text})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var TextScrollStruct=(function(_super){__extends(TextScrollStruct,_super);function TextScrollStruct(){return _super.call(this)||this}TextScrollStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","TextScroll"))};TextScrollStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};TextScrollStruct.URL="ui://s33x8418klss1ui";TextScrollStruct.DependPackages=["PfSkin"];return TextScrollStruct}(fairygui.GLabel));PfSkin.TextScrollStruct=TextScrollStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var TextScroll=(function(_super){__extends(TextScroll,_super);function TextScroll(){return _super!==null&&_super.apply(this,arguments)||this}return TextScroll}(PfSkin.TextScrollStruct));PfSkin.TextScroll=TextScroll})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var TrainResultItemStruct=(function(_super){__extends(TrainResultItemStruct,_super);function TrainResultItemStruct(){return _super.call(this)||this}TrainResultItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","TrainResultItem"))};TrainResultItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_cur=(this.getChild("cur"));this.m_next=(this.getChild("next"));this.m_add=(this.getChild("add"))};TrainResultItemStruct.URL="ui://s33x8418jazc1mw";TrainResultItemStruct.DependPackages=["PfSkin"];return TrainResultItemStruct}(fairygui.GLabel));PfSkin.TrainResultItemStruct=TrainResultItemStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var TrainResultItem=(function(_super){__extends(TrainResultItem,_super);function TrainResultItem(){return _super!==null&&_super.apply(this,arguments)||this}TrainResultItem.prototype.updateView=function(data,attr){var config=Game.config.property.getConfig(attr.attrId);var next=data[config.field];var curr=next-attr.value;this.m_add.text="(+"+attr.value+")";this.m_cur.text=curr+"";this.m_next.text=next+"";this.icon=Game.config.avatar.getConfig(config.icon).iconUrl};return TrainResultItem}(PfSkin.TrainResultItemStruct));PfSkin.TrainResultItem=TrainResultItem})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var WarBtnStruct=(function(_super){__extends(WarBtnStruct,_super);function WarBtnStruct(){return _super.call(this)||this}WarBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","WarBtn"))};WarBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};WarBtnStruct.URL="ui://s33x84186ve81ga";WarBtnStruct.DependPackages=["PfSkin"];return WarBtnStruct}(fairygui.GButton));PfSkin.WarBtnStruct=WarBtnStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var WarBtn=(function(_super){__extends(WarBtn,_super);function WarBtn(){return _super!==null&&_super.apply(this,arguments)||this}return WarBtn}(PfSkin.WarBtnStruct));PfSkin.WarBtn=WarBtn})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var WarFilmLabelStruct=(function(_super){__extends(WarFilmLabelStruct,_super);function WarFilmLabelStruct(){return _super.call(this)||this}WarFilmLabelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","WarFilmLabel"))};WarFilmLabelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};WarFilmLabelStruct.URL="ui://s33x8418znuj1f8";WarFilmLabelStruct.DependPackages=["PfSkin"];return WarFilmLabelStruct}(fairygui.GLabel));PfSkin.WarFilmLabelStruct=WarFilmLabelStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var WarFilmLabel=(function(_super){__extends(WarFilmLabel,_super);function WarFilmLabel(){return _super!==null&&_super.apply(this,arguments)||this}return WarFilmLabel}(PfSkin.WarFilmLabelStruct));PfSkin.WarFilmLabel=WarFilmLabel})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var YellowBtn2Struct=(function(_super){__extends(YellowBtn2Struct,_super);function YellowBtn2Struct(){return _super.call(this)||this}YellowBtn2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","YellowBtn2"))};YellowBtn2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_goldIcon=(this.getChild("goldIcon"));this.m_gold=(this.getChild("gold"));this.m_cardIcon=(this.getChild("cardIcon"));this.m_page=(this.getChild("page"))};YellowBtn2Struct.URL="ui://s33x8418jazc1my";YellowBtn2Struct.DependPackages=["PfSkin","ArtistDetail","Common"];return YellowBtn2Struct}(fairygui.GButton));PfSkin.YellowBtn2Struct=YellowBtn2Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var YellowBtn2=(function(_super){__extends(YellowBtn2,_super);function YellowBtn2(){return _super!==null&&_super.apply(this,arguments)||this}return YellowBtn2}(PfSkin.YellowBtn2Struct));PfSkin.YellowBtn2=YellowBtn2})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var YellowBtn5Struct=(function(_super){__extends(YellowBtn5Struct,_super);function YellowBtn5Struct(){return _super.call(this)||this}YellowBtn5Struct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","YellowBtn5"))};YellowBtn5Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"));this.m_number=(this.getChild("number"));this.m_red=(this.getChild("red"))};YellowBtn5Struct.URL="ui://s33x8418jazc1n1";YellowBtn5Struct.DependPackages=["PfSkin","Common"];return YellowBtn5Struct}(fairygui.GButton));PfSkin.YellowBtn5Struct=YellowBtn5Struct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var YellowBtn5=(function(_super){__extends(YellowBtn5,_super);function YellowBtn5(){return _super!==null&&_super.apply(this,arguments)||this}return YellowBtn5}(PfSkin.YellowBtn5Struct));PfSkin.YellowBtn5=YellowBtn5})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var AssetItemStruct=(function(_super){__extends(AssetItemStruct,_super);function AssetItemStruct(){return _super.call(this)||this}AssetItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","AssetItem"))};AssetItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_assetIcon=(this.getChild("assetIcon"))};AssetItemStruct.URL="ui://tderqmz5dyfei";AssetItemStruct.DependPackages=["PlayerInfo","Common"];return AssetItemStruct}(fairygui.GComponent));PlayerInfo.AssetItemStruct=AssetItemStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var AssetItem=(function(_super){__extends(AssetItem,_super);function AssetItem(){return _super!==null&&_super.apply(this,arguments)||this}AssetItem.prototype.setAsset=function(assetId){var userItem=Game.moduleModel.item.getItem(assetId);this.m_assetIcon.url=userItem.itemIconUrl;var assetNum=Game.moduleModel.item.getItemNum(assetId);this.m_title.text=formatNumberUnit(assetNum)};return AssetItem}(PlayerInfo.AssetItemStruct));PlayerInfo.AssetItem=AssetItem})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var AvatarIconItemStruct=(function(_super){__extends(AvatarIconItemStruct,_super);function AvatarIconItemStruct(){return _super.call(this)||this}AvatarIconItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","AvatarIconItem"))};AvatarIconItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_avatarLoader=(this.getChild("avatarLoader"));this.m_flag_inuse=(this.getChild("flag_inuse"));this.m_flag_lock=(this.getChild("flag_lock"));this.m_g_lock=(this.getChild("g_lock"));this.m_btn_choose=(this.getChild("btn_choose"));this.m_btn_itemBuy=(this.getChild("btn_itemBuy"))};AvatarIconItemStruct.URL="ui://tderqmz5o11z1p";AvatarIconItemStruct.DependPackages=["PlayerInfo","Common"];return AvatarIconItemStruct}(fairygui.GButton));PlayerInfo.AvatarIconItemStruct=AvatarIconItemStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var AvatarIconItem=(function(_super){__extends(AvatarIconItem,_super);function AvatarIconItem(){return _super!==null&&_super.apply(this,arguments)||this}AvatarIconItem.prototype.setInfo=function(cfg){this.cfg=cfg;this.m_flag_inuse.visible=false;this.m_g_lock.visible=false;this.m_btn_choose.visible=true;if(cfg.id==User.info.portrait||this.isDefaultPortrait(cfg.id)&&User.info.portrait==0){this.m_flag_inuse.visible=true;this.m_btn_choose.visible=false}var avatarConfig=Game.config.avatar.getConfig(cfg.icon);if(avatarConfig){this.m_avatarLoader.url=avatarConfig.iconUrl}if(!this.isFree){if(!this.isGetPortrait(cfg.id)){this.showLock()}}};AvatarIconItem.prototype.showUnlock=function(){this.m_btn_choose.visible=true;this.m_g_lock.visible=false};Object.defineProperty(AvatarIconItem.prototype,"isFree",{get:function(){return this.cfg.unlock.itemId==0},enumerable:true,configurable:true});AvatarIconItem.prototype.isGetPortrait=function(portraitId){return User.infoExt.portraitList.indexOf(portraitId)!=-1};AvatarIconItem.prototype.isDefaultPortrait=function(portraitId){var portraitCfgList=Game.config.headPortrait.getConfigList();var portraitSexList=portraitCfgList.filter(function(value,index,array){return value.sex==User.info.sex});for(var _i=0,portraitSexList_1=portraitSexList;_i<portraitSexList_1.length;_i++){var portrait=portraitSexList_1[_i];if(portrait.unlock.itemId==0&&portrait.unlock.itemNum==0){return portrait.id==portraitId}}return false};AvatarIconItem.prototype.showLock=function(){this.m_btn_choose.visible=false;this.m_g_lock.visible=true;var costItem=Game.moduleModel.item.getItem(this.cfg.unlock.itemId);this.m_btn_itemBuy.getChild("itemIcon").url=costItem.itemIconUrl;this.m_btn_itemBuy.getChild("itemCount").text=this.cfg.unlock.itemNum.toString()};return AvatarIconItem}(PlayerInfo.AvatarIconItemStruct));PlayerInfo.AvatarIconItem=AvatarIconItem})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var BarSquareStruct=(function(_super){__extends(BarSquareStruct,_super);function BarSquareStruct(){return _super.call(this)||this}BarSquareStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","BarSquare"))};BarSquareStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};BarSquareStruct.URL="ui://tderqmz5dyfe3";BarSquareStruct.DependPackages=["PlayerInfo","Common"];return BarSquareStruct}(fairygui.GComponent));PlayerInfo.BarSquareStruct=BarSquareStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var BarSquare=(function(_super){__extends(BarSquare,_super);function BarSquare(){return _super!==null&&_super.apply(this,arguments)||this}return BarSquare}(PlayerInfo.BarSquareStruct));PlayerInfo.BarSquare=BarSquare})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var Btn_buyStruct=(function(_super){__extends(Btn_buyStruct,_super);function Btn_buyStruct(){return _super.call(this)||this}Btn_buyStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","btn_buy"))};Btn_buyStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_btnName=(this.getChild("btnName"))};Btn_buyStruct.URL="ui://tderqmz5o11z1j";Btn_buyStruct.DependPackages=["PlayerInfo","System"];return Btn_buyStruct}(fairygui.GButton));PlayerInfo.Btn_buyStruct=Btn_buyStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var Btn_buy=(function(_super){__extends(Btn_buy,_super);function Btn_buy(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_buy}(PlayerInfo.Btn_buyStruct));PlayerInfo.Btn_buy=Btn_buy})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var Btn_chooseStruct=(function(_super){__extends(Btn_chooseStruct,_super);function Btn_chooseStruct(){return _super.call(this)||this}Btn_chooseStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","btn_choose"))};Btn_chooseStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};Btn_chooseStruct.URL="ui://tderqmz5o11z1n";Btn_chooseStruct.DependPackages=["PlayerInfo","Common"];return Btn_chooseStruct}(fairygui.GButton));PlayerInfo.Btn_chooseStruct=Btn_chooseStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var Btn_choose=(function(_super){__extends(Btn_choose,_super);function Btn_choose(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_choose}(PlayerInfo.Btn_chooseStruct));PlayerInfo.Btn_choose=Btn_choose})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var Btn_editor_descStruct=(function(_super){__extends(Btn_editor_descStruct,_super);function Btn_editor_descStruct(){return _super.call(this)||this}Btn_editor_descStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","btn_editor_desc"))};Btn_editor_descStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_editor_descStruct.URL="ui://tderqmz5dyfef";Btn_editor_descStruct.DependPackages=["PlayerInfo","Common"];return Btn_editor_descStruct}(fairygui.GButton));PlayerInfo.Btn_editor_descStruct=Btn_editor_descStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var Btn_editor_desc=(function(_super){__extends(Btn_editor_desc,_super);function Btn_editor_desc(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_editor_desc}(PlayerInfo.Btn_editor_descStruct));PlayerInfo.Btn_editor_desc=Btn_editor_desc})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var Btn_editor_nameStruct=(function(_super){__extends(Btn_editor_nameStruct,_super);function Btn_editor_nameStruct(){return _super.call(this)||this}Btn_editor_nameStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","btn_editor_name"))};Btn_editor_nameStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_editor_nameStruct.URL="ui://tderqmz5dyfeg";Btn_editor_nameStruct.DependPackages=["PlayerInfo","Common"];return Btn_editor_nameStruct}(fairygui.GButton));PlayerInfo.Btn_editor_nameStruct=Btn_editor_nameStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var Btn_editor_name=(function(_super){__extends(Btn_editor_name,_super);function Btn_editor_name(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_editor_name}(PlayerInfo.Btn_editor_nameStruct));PlayerInfo.Btn_editor_name=Btn_editor_name})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var Btn_topCloseStruct=(function(_super){__extends(Btn_topCloseStruct,_super);function Btn_topCloseStruct(){return _super.call(this)||this}Btn_topCloseStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","btn_topClose"))};Btn_topCloseStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};Btn_topCloseStruct.URL="ui://tderqmz5dyfej";Btn_topCloseStruct.DependPackages=["PlayerInfo","Common"];return Btn_topCloseStruct}(fairygui.GButton));PlayerInfo.Btn_topCloseStruct=Btn_topCloseStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var Btn_topClose=(function(_super){__extends(Btn_topClose,_super);function Btn_topClose(){return _super!==null&&_super.apply(this,arguments)||this}return Btn_topClose}(PlayerInfo.Btn_topCloseStruct));PlayerInfo.Btn_topClose=Btn_topClose})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var ChooseAvatarStruct=(function(_super){__extends(ChooseAvatarStruct,_super);function ChooseAvatarStruct(){return _super.call(this)||this}ChooseAvatarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","ChooseAvatar"))};ChooseAvatarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_titleName=(this.getChild("titleName"));this.m_avatarList=(this.getChild("avatarList"));this.m_btn_close=(this.getChild("btn_close"))};ChooseAvatarStruct.URL="ui://tderqmz5o11z1l";ChooseAvatarStruct.DependPackages=["PlayerInfo","Common","System"];return ChooseAvatarStruct}(fairygui.GComponent));PlayerInfo.ChooseAvatarStruct=ChooseAvatarStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var ChooseAvatar=(function(_super){__extends(ChooseAvatar,_super);function ChooseAvatar(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isRemoveFromParent=false;return _this}ChooseAvatar.prototype.showForParent=function(parent){this.isRemoveFromParent=false;parent.addChild(this);this.setSize(fairygui.GRoot.inst.width,fairygui.GRoot.inst.height);this.addRelation(parent,fairygui.RelationType.Size);Game.protoOkEvent.add(ProtoEventKey.GameData_RePortraitGameData,this.onServerChangeHeadAvatar,this)};ChooseAvatar.prototype.setInfo=function(){var _this=this;this.avatarList=this.GetAvatarList();this.avatarList.sort(function(A,B){var isGetPortraitA=_this.isGetPortrait(A.id);var isGetPortraitB=_this.isGetPortrait(B.id);if(isGetPortraitA&&!isGetPortraitB){return -1}if(!isGetPortraitA&&isGetPortraitB){return 1}return 0});this.updateList();this.m_btn_close.onClick(this,this.onClose)};ChooseAvatar.prototype.updateList=function(){this.m_avatarList.removeChildrenToPool();for(var _i=0,_a=this.avatarList;_i<_a.length;_i++){var avatarCfg=_a[_i];var avatarIconItem=this.m_avatarList.addItemFromPool();avatarIconItem.setInfo(avatarCfg);avatarIconItem.m_btn_choose.onClick(this,this.onPortraitSelect,[avatarCfg.id]);avatarIconItem.m_btn_itemBuy.onClick(this,this.onPortraitUnlock,[avatarCfg.id]);this.m_avatarList.addChild(avatarIconItem)}};ChooseAvatar.prototype.isGetPortrait=function(portraitId){if(this.isDefaultPortrait(portraitId)){return true}return User.infoExt.portraitList.indexOf(portraitId)!=-1};ChooseAvatar.prototype.isDefaultPortrait=function(portraitId){var portraitCfgList=Game.config.headPortrait.getConfigList();var portraitSexList=portraitCfgList.filter(function(value,index,array){return value.sex==User.info.sex});for(var _i=0,portraitSexList_1=portraitSexList;_i<portraitSexList_1.length;_i++){var portrait=portraitSexList_1[_i];if(portrait.unlock.itemId==0&&portrait.unlock.itemNum==0){return portrait.id==portraitId}}return false};ChooseAvatar.prototype.onPortraitSelect=function(portraitId){Game.moduleModel.playerInfo.portraitType=Games.PortraitType.Dress;Game.moduleModel.playerInfo.portraitId=portraitId;Game.protosender.GameData.RePortraitGameData(Games.PortraitType.Dress,portraitId);this.onClose()};ChooseAvatar.prototype.onPortraitUnlock=function(portraitId){var itemCfg=Game.config.headPortrait.getConfig(portraitId);var itemCostCfg=Game.config.item.getConfig(itemCfg.unlock.itemId);var ownerItemNum=Game.moduleModel.item.getItemNum(itemCfg.unlock.itemId);if(ownerItemNum<itemCfg.unlock.itemNum){Game.system.openItemWay(itemCfg.unlock.itemId,itemCfg.unlock.itemNum)}else{Game.moduleModel.playerInfo.portraitType=Games.PortraitType.Buy;Game.moduleModel.playerInfo.portraitId=portraitId;Game.protosender.GameData.RePortraitGameData(Games.PortraitType.Buy,portraitId)}};ChooseAvatar.prototype.GetAvatarList=function(){var i=User.info;var headPortrait=Game.config.headPortrait.getConfigList();return headPortrait.filter(function(value,index,array){return value.sex==User.info.sex})};ChooseAvatar.prototype.onServerChangeHeadAvatar=function(proto){if(proto.result==0){if(Game.moduleModel.playerInfo.portraitType==Games.PortraitType.Buy){this.updateList()}}};ChooseAvatar.prototype.onClose=function(){Game.protoOkEvent.remove(ProtoEventKey.GameData_RePortraitGameData,this.onServerChangeHeadAvatar,this);this.parent.removeChild(this);this.isRemoveFromParent=true};return ChooseAvatar}(PlayerInfo.ChooseAvatarStruct));PlayerInfo.ChooseAvatar=ChooseAvatar})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var HeadCircleIconStruct=(function(_super){__extends(HeadCircleIconStruct,_super);function HeadCircleIconStruct(){return _super.call(this)||this}HeadCircleIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","HeadCircleIcon"))};HeadCircleIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_headIcon=(this.getChild("headIcon"));this.m_headCircleIconMask=(this.getChild("headCircleIconMask"))};HeadCircleIconStruct.URL="ui://tderqmz5gy5h21";HeadCircleIconStruct.DependPackages=["PlayerInfo"];return HeadCircleIconStruct}(fairygui.GComponent));PlayerInfo.HeadCircleIconStruct=HeadCircleIconStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var HeadCircleIcon=(function(_super){__extends(HeadCircleIcon,_super);function HeadCircleIcon(){return _super!==null&&_super.apply(this,arguments)||this}return HeadCircleIcon}(PlayerInfo.HeadCircleIconStruct));PlayerInfo.HeadCircleIcon=HeadCircleIcon})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var HomeRankItemStruct=(function(_super){__extends(HomeRankItemStruct,_super);function HomeRankItemStruct(){return _super.call(this)||this}HomeRankItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","HomeRankItem"))};HomeRankItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_iconLoader=(this.getChild("iconLoader"));this.m_title=(this.getChild("title"));this.m_nameTitle=(this.getChild("nameTitle"));this.m_value=(this.getChild("value"))};HomeRankItemStruct.URL="ui://tderqmz5xw64u";HomeRankItemStruct.DependPackages=["PlayerInfo","Common"];return HomeRankItemStruct}(fairygui.GComponent));PlayerInfo.HomeRankItemStruct=HomeRankItemStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var HomeRankItem=(function(_super){__extends(HomeRankItem,_super);function HomeRankItem(){return _super!==null&&_super.apply(this,arguments)||this}HomeRankItem.prototype.setInfo=function(info){this.m_title.text=info.title;if(info.value===undefined){this.m_value.text=""}else{if(isNumber(info.value)){this.m_value.text=formatNumberUnit(info.value)}else{this.m_value.text=info.value.toString()}}if(info.nameTitle){this.m_nameTitle.text=info.nameTitle.toString()}else{this.m_nameTitle.text=""}if(info.iconId&&info.iconId>0){this.m_iconLoader.url=Game.config.avatar.GetIconUrl(info.iconId);this.m_iconLoader.width=73}else{this.m_iconLoader.url="";this.m_iconLoader.width=0}};return HomeRankItem}(PlayerInfo.HomeRankItemStruct));PlayerInfo.HomeRankItem=HomeRankItem})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var HomeRankTopStruct=(function(_super){__extends(HomeRankTopStruct,_super);function HomeRankTopStruct(){return _super.call(this)||this}HomeRankTopStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","HomeRankTop"))};HomeRankTopStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_stLevel=(this.getChild("stLevel"));this.m_stRankKey=(this.getChild("stRankKey"));this.m_stRankValue=(this.getChild("stRankValue"));this.m_companyKey=(this.getChild("companyKey"));this.m_companyValue=(this.getChild("companyValue"))};HomeRankTopStruct.URL="ui://tderqmz5xw64t";HomeRankTopStruct.DependPackages=["PlayerInfo","Common"];return HomeRankTopStruct}(fairygui.GComponent));PlayerInfo.HomeRankTopStruct=HomeRankTopStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var HomeRankTop=(function(_super){__extends(HomeRankTop,_super);function HomeRankTop(){return _super!==null&&_super.apply(this,arguments)||this}return HomeRankTop}(PlayerInfo.HomeRankTopStruct));PlayerInfo.HomeRankTop=HomeRankTop})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var ItemBuyStruct=(function(_super){__extends(ItemBuyStruct,_super);function ItemBuyStruct(){return _super.call(this)||this}ItemBuyStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","ItemBuy"))};ItemBuyStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_titleName=(this.getChild("titleName"));this.m_lbl=(this.getChild("lbl"));this.m_itemIcon=(this.getChild("itemIcon"));this.m_btn_close=(this.getChild("btn_close"))};ItemBuyStruct.URL="ui://tderqmz5o11z1i";ItemBuyStruct.DependPackages=["PlayerInfo","Common","System"];return ItemBuyStruct}(fairygui.GComponent));PlayerInfo.ItemBuyStruct=ItemBuyStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var ItemBuy=(function(_super){__extends(ItemBuy,_super);function ItemBuy(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.ITEM_RENAME_ID=5008;return _this}ItemBuy.prototype.showForParent=function(parent){var _this=this;parent.addChild(this);var item=Game.moduleModel.item.getItem(this.ITEM_RENAME_ID);this.m_itemIcon.url=item.itemIconUrl;this.m_btn_close.onClick(this,function(){_this.parent.removeChild(_this)})};return ItemBuy}(PlayerInfo.ItemBuyStruct));PlayerInfo.ItemBuy=ItemBuy})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var MainStruct=(function(_super){__extends(MainStruct,_super);function MainStruct(){return _super.call(this)||this}MainStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","Main"))};MainStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_rankList=(this.getChild("rankList"));this.m_underLine=(this.getChild("underLine"));this.m_PersonInfo=(this.getChild("PersonInfo"));this.m_topAssetList=(this.getChild("topAssetList"));this.m_tabPanel=(this.getChild("tabPanel"));this.m_homeRankTop=(this.getChild("homeRankTop"))};MainStruct.URL="ui://tderqmz5dyfe6";MainStruct.DependPackages=["PlayerInfo","Common"];return MainStruct}(fairygui.GComponent));PlayerInfo.MainStruct=MainStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var Event=laya.events.Event;var Main=(function(_super){__extends(Main,_super);function Main(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.ITEM_RENAME_ID=5008;_this.tabNameList=[Games.TEXT.PlayerInfoTab0,Games.TEXT.PlayerInfoTab1,Games.TEXT.PlayerInfoTab2,Games.TEXT.PlayerInfoTab3,Games.TEXT.PlayerInfoTab4];return _this}Main.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.init()};Main.prototype.onWindowShowCall=function(){this.setTopAsset();this.setPersonInfo();this.openTab(0);Game.protoOkEvent.add(ProtoEventKey.ItemData,this.updateAssets,this);Game.protoOkEvent.add(ProtoEventKey.GameInfo,this.updateAssets,this);Game.protoOkEvent.add(ProtoEventKey.GameData_RenameGameData,this.onServerRename,this);Game.protoOkEvent.add(ProtoEventKey.GameData_RePerSignatureGameData,this.onServerRenameSignature,this);Game.protoOkEvent.add(ProtoEventKey.GameData_RePortraitGameData,this.onServerChangeHeadAvatar,this)};Main.prototype.onWindowHide=function(){this.hideChooseAvatar();Game.protoOkEvent.remove(ProtoEventKey.ItemData,this.updateAssets,this);Game.protoOkEvent.remove(ProtoEventKey.GameInfo,this.updateAssets,this);Game.protoOkEvent.remove(ProtoEventKey.GameData_RenameGameData,this.onServerRename,this);Game.protoOkEvent.remove(ProtoEventKey.GameData_RePerSignatureGameData,this.onServerRenameSignature,this);Game.protoOkEvent.remove(ProtoEventKey.GameData_RePortraitGameData,this.onServerChangeHeadAvatar,this)};Main.prototype.updateAssets=function(){this.setTopAsset();this.setPersonInfo()};Main.prototype.onServerChangeHeadAvatar=function(proto){if(proto.result==0){if(Game.moduleModel.playerInfo.portraitType==Games.PortraitType.Dress){User.info.portrait=Game.moduleModel.playerInfo.portraitId;this.updatePortrait()}else{if(Game.moduleModel.playerInfo.portraitType==Games.PortraitType.Buy){this.setTopAsset()}}}};Main.prototype.onServerRename=function(proto){if(proto.result==0){User.info.name=Game.moduleModel.playerInfo.playerName;this.m_PersonInfo.m_headName.text=User.info.name;Games.Static.Instance.onUserorbit("name","1","change")}};Main.prototype.onServerRenameSignature=function(proto){if(proto.result==0){Game.moduleModel.playerInfo.lastTimeRenameSignature=Game.time.serverSeconds;this.m_PersonInfo.m_btn_touch_desc.visible=true;this.m_PersonInfo.m_self_introduction.visible=true;this.m_PersonInfo.m_self_introduction_input.visible=false;User.infoExt.perSignature=Game.moduleModel.playerInfo.playerSign;this.m_PersonInfo.m_self_introduction.text=User.infoExt.perSignature;if(User.infoExt.perSignature==""){this.m_PersonInfo.m_self_introduction.text="Edit Self-Introduction"}Games.Static.Instance.onUserorbit("name","2","change")}};Main.prototype.updatePortrait=function(){var portraitId=User.info.portrait;if(portraitId==0){portraitId=this.getDefaultPortrait()}var portraitCfg=Game.config.headPortrait.getConfig(portraitId);if(portraitCfg){portraitId=portraitCfg.icon;var avatarConfig=Game.config.avatar.getConfig(portraitCfg.icon);if(avatarConfig){this.m_PersonInfo.m_headCircleIcon.m_headIcon.url=avatarConfig.iconUrl}}};Main.prototype.getDefaultPortrait=function(){var portraitCfgList=Game.config.headPortrait.getConfigList();var portraitSexList=portraitCfgList.filter(function(value,index,array){return value.sex==User.info.sex});for(var _i=0,portraitSexList_1=portraitSexList;_i<portraitSexList_1.length;_i++){var portrait=portraitSexList_1[_i];if(portrait.unlock.itemId==0&&portrait.unlock.itemNum==0){return portrait.id}}return 0};Main.prototype.init=function(){var index=0;for(var _i=0,_a=this.tabNameList;_i<_a.length;_i++){var tabName=_a[_i];index++;var tab=this.m_tabPanel.getChild("tab"+index);var txtTitle=tab.getChild("title");var txtSelectTitle=tab.getChild("select_title");txtTitle.y+=12;txtSelectTitle.y+=12;txtTitle.text=tabName;txtSelectTitle.text=tabName;tab.onClick(this,this.onTabChange)}this.recordRankListPosition();this.m_topAssetList.m_btn_topClose.onClick(this,this.onCloseWindow)};Main.prototype.setTopAsset=function(){this.m_topAssetList.m_assetList.removeChildrenToPool();var assetItem=this.m_topAssetList.m_assetList.addItemFromPool();assetItem.setAsset(Games.AssetType.Diamond);this.m_topAssetList.m_assetList.addChild(assetItem);assetItem=this.m_topAssetList.m_assetList.addItemFromPool();assetItem.setAsset(Games.AssetType.Thumb);this.m_topAssetList.m_assetList.addChild(assetItem);assetItem=this.m_topAssetList.m_assetList.addItemFromPool();assetItem.setAsset(Games.AssetType.Gold);this.m_topAssetList.m_assetList.addChild(assetItem);assetItem=this.m_topAssetList.m_assetList.addItemFromPool();assetItem.setAsset(Games.AssetType.Dollar);this.m_topAssetList.m_assetList.addChild(assetItem)};Main.prototype.setPersonInfo=function(){this.updatePortrait();this.m_PersonInfo.m_headName.text=User.info.name;this.m_PersonInfo.m_level.text="LV."+User.info.level;this.m_PersonInfo.m_self_introduction_input.input.maxChars=100;this.m_PersonInfo.m_self_introduction.text=User.infoExt.perSignature;this.m_PersonInfo.m_self_introduction_input.input.on(Event.BLUR,this,this.onSignatureInputBlur);if(User.infoExt.perSignature==""){this.m_PersonInfo.m_self_introduction.text="Edit Self-Introduction"}var prevExp=0;for(var i=0;i<User.info.level;i++){var cfg=Game.config.playerLevel.getConfig(i);if(cfg!=null){prevExp+=cfg.fans}}var a=User.info;var curExp=Math.round(User.info.fans);var upgradeExp=Game.config.playerLevel.getConfig(User.info.level).fans;this.m_PersonInfo.m_progressBarText.text=formatNumberUnit(curExp)+"/"+formatNumberUnit(upgradeExp);this.m_PersonInfo.m_progressBar.value=((curExp*100)/upgradeExp);this.m_PersonInfo.m_headCircleIcon.m_headIcon.onClick(this,this.onChooseAvatarClick);this.m_PersonInfo.m_btn_editor_name.onClick(this,this.onEditorNameClick);this.m_PersonInfo.m_btn_editor_desc.onClick(this,this.onEditorSignClick);this.m_PersonInfo.m_btn_touch_desc.onClick(this,this.onEditorSignClick)};Main.prototype.recordRankListPosition=function(){this.orignalY=this.m_rankList.y;this.orignalHeight=this.m_rankList.height};Main.prototype.onChooseAvatarClick=function(){Game.sound.playSound(SoundKey.MM01_Button);var lockLevel=Game.config.global.getConfig(GlobalKey.account_lock).value;if(User.info.level<lockLevel){Game.system.toastText(Game.config.msg.getTxtFormat(MsgKey.account_unlock,lockLevel));return}this.chooseAvatar=PlayerInfo.ChooseAvatar.createInstance();this.chooseAvatar.showForParent(this.parent);this.chooseAvatar.setInfo()};Main.prototype.hideChooseAvatar=function(){if(this.chooseAvatar){if(!this.chooseAvatar.isRemoveFromParent){this.chooseAvatar.onClose()}this.chooseAvatar=null}};Main.prototype.onEditorNameClick=function(){Game.sound.playSound(SoundKey.MM02_Popup);if(Game.moduleModel.item.getItemNum(this.ITEM_RENAME_ID)==0){Game.system.openItemWay(this.ITEM_RENAME_ID,1);return}var renameCompany=PlayerInfo.RenameCompany.createInstance();renameCompany.showForParent(this.parent);renameCompany.setInfo()};Main.prototype.onEditorSignClick=function(){if(!Game.moduleModel.playerInfo.checkRenameSignatureTime()){Game.system.toastText(Game.config.msg.getTxt(MsgKey.account_name_often));return}this.m_PersonInfo.m_btn_touch_desc.visible=false;this.m_PersonInfo.m_self_introduction.visible=false;var editorName=this.m_PersonInfo.m_self_introduction.text;this.m_PersonInfo.m_self_introduction_input.text=editorName;this.m_PersonInfo.m_self_introduction_input.visible=true;this.m_PersonInfo.m_self_introduction_input.input.focus=true;if(User.infoExt.perSignature==""){this.m_PersonInfo.m_self_introduction_input.text=""}};Main.prototype.onSignatureInputBlur=function(){this.m_PersonInfo.m_self_introduction_input.input.focus=false;var editorName=this.m_PersonInfo.m_self_introduction_input.text;if(this.checkRenameSignature(editorName)){Game.moduleModel.playerInfo.playerSign=editorName;Game.protosender.GameData.RePerSignatureGameData(editorName)}else{this.m_PersonInfo.m_btn_touch_desc.visible=true;this.m_PersonInfo.m_self_introduction.visible=true;this.m_PersonInfo.m_self_introduction_input.visible=false}};Main.prototype.checkRenameSignature=function(name){var oldName=this.m_PersonInfo.m_self_introduction.text;if(name==oldName){return false}if(!validateBlockWords(name,true)){return false}return true};Main.prototype.onTabChange=function(){this.showContent(this.tabIndex-1)};Main.prototype.openTab=function(index){this.showContent(index);this.tabIndex=index+1};Main.prototype.showContent=function(tab){this.m_rankList.removeChildrenToPool();this.m_underLine.visible=(tab==0);switch(tab){case 0:this.showTabHome();break;case 1:this.showTabCareer();break;case 2:this.showTabTrophy();break;case 3:this.showTabFilms();break;case 4:this.showTabActors();break}};Object.defineProperty(Main.prototype,"tabIndex",{get:function(){return this.m_tabPanel.m_tabctrl.selectedIndex+1},set:function(value){this.m_tabPanel.m_tabctrl.setSelectedIndex(value-1)},enumerable:true,configurable:true});Main.prototype.showTabHome=function(){var blockCfg=Game.config.blockLevel.getConfig(User.info.stall);this.m_homeRankTop.m_stLevel.text="ST."+User.info.stall%1000;this.m_homeRankTop.m_stRankValue.text=blockCfg.name;this.m_homeRankTop.m_companyValue.text=formatNumberUnit(2546789);this.m_homeRankTop.visible=true;this.m_rankList.y=this.orignalY;this.m_rankList.height=this.orignalHeight;var rankInfoList=[];var info={title:Games.TEXT.PlayerInfoTabHome_Rank0,value:User.info.extendFloor,nameTitle:null,iconId:5041};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabHome_Rank1,value:Game.moduleModel.actor.getAllActorLen(),nameTitle:null,iconId:5011};rankInfoList.push(info);var maxMarket=Game.moduleModel.market.GetMaxCity();var kvalue="0";if(maxMarket){kvalue=maxMarket.num+"."+maxMarket.name}info={title:Games.TEXT.PlayerInfoTabHome_Rank3,value:kvalue,nameTitle:null,iconId:5008};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabHome_Rank5,value:Game.moduleModel.bag.GetBagVolume(),nameTitle:null,iconId:5001};rankInfoList.push(info);for(var _i=0,rankInfoList_1=rankInfoList;_i<rankInfoList_1.length;_i++){var rankInfo=rankInfoList_1[_i];var rankItem=this.m_rankList.addItemFromPool();rankItem.setInfo(rankInfo);this.m_rankList.addChild(rankItem)}};Main.prototype.showTabCareer=function(){this.rePosRankList();var rankInfoList=[];var info={title:Games.TEXT.PlayerInfoTabCareer_Rank0,value:User.infoExt.totalFilm};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabCareer_Rank1,value:User.infoExt.totalFilm};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabCareer_Rank2,value:User.infoExt.numBoxOffice};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabCareer_Rank3,value:User.infoExt.numOrders};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabCareer_Rank4,value:User.infoExt.numProductionLine};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabCareer_Rank5,value:User.infoExt.numOfficialBusiness};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabCareer_Rank6,value:User.infoExt.numMeeting};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabCareer_Rank7,value:User.infoExt.numVisit};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabCareer_Rank8,value:User.infoExt.numGroupBest};rankInfoList.push(info);for(var _i=0,rankInfoList_2=rankInfoList;_i<rankInfoList_2.length;_i++){var rankInfo=rankInfoList_2[_i];var rankItem=this.m_rankList.addItemFromPool();rankItem.setInfo(rankInfo);this.m_rankList.addChild(rankItem)}};Main.prototype.showTabTrophy=function(){this.rePosRankList();var rankInfoList=[];var info;if(User.info.sex==EUserSex.boy){info={title:Games.TEXT.PlayerInfoTabTrophy_Rank00,value:Game.moduleModel.actor.bestActorCupCount};rankInfoList.push(info)}else{info={title:Games.TEXT.PlayerInfoTabTrophy_Rank11,value:Game.moduleModel.actor.bestActorCupCount};rankInfoList.push(info)}info={title:Games.TEXT.PlayerInfoTabTrophy_Rank22,value:User.infoExt.numBestPerformer};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabTrophy_Rank3,value:User.infoExt.numBestArtDirection};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabTrophy_Rank4,value:User.infoExt.numBestPublicPraise};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabTrophy_Rank5,value:0};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabTrophy_Rank6,value:0};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabTrophy_Rank7,value:0};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabTrophy_Rank8,value:0};rankInfoList.push(info);for(var _i=0,rankInfoList_3=rankInfoList;_i<rankInfoList_3.length;_i++){var rankInfo=rankInfoList_3[_i];if(rankInfo.value==0||rankInfo.value==null){continue}var rankItem=this.m_rankList.addItemFromPool();rankItem.setInfo(rankInfo);this.m_rankList.addChild(rankItem)}};Main.prototype.showTabFilms=function(){this.rePosRankList();var rankInfoList=[];var info={title:Games.TEXT.PlayerInfoTabFilm_Rank0,value:User.infoExt.bestWordOfMouth,nameTitle:User.infoExt.bestWordOfMouthFilm};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabFilm_Rank1,value:User.infoExt.bestBoxOffice,nameTitle:User.infoExt.bestBoxOfficeFilm};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabFilm_Rank2,value:User.infoExt.numHorrorFilm};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabFilm_Rank3,value:User.infoExt.numSuspense};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabFilm_Rank4,value:User.infoExt.numMusicalFilm};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabFilm_Rank5,value:User.infoExt.numComedyFilm};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabFilm_Rank6,value:User.infoExt.numCartoonFilm};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabFilm_Rank7,value:User.infoExt.numNarrativeFilm};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabFilm_Rank8,value:User.infoExt.numAffectionalFilm};rankInfoList.push(info);info={title:Games.TEXT.PlayerInfoTabFilm_Rank9,value:User.infoExt.numActionFilm};rankInfoList.push(info);for(var _i=0,rankInfoList_4=rankInfoList;_i<rankInfoList_4.length;_i++){var rankInfo=rankInfoList_4[_i];if(rankInfo.value==null){continue}var rankItem=this.m_rankList.addItemFromPool();rankItem.setInfo(rankInfo);this.m_rankList.addChild(rankItem)}};Main.prototype.showTabActors=function(){this.rePosRankList();var rankInfoList=[];var info;var topBoxOfficeActor=Game.moduleModel.actor.getTopBoxOfficeCount;if(topBoxOfficeActor){info={title:Games.TEXT.PlayerInfoTabActor_Rank0,value:formatNumberUnit(topBoxOfficeActor.boxOfficeCount),nameTitle:topBoxOfficeActor.name};rankInfoList.push(info)}var topCupCountActor=Game.moduleModel.actor.getTopCupCount;if(topCupCountActor){var valueText=format(TEXT.PlayerInfoTabActor_Rank1Value,topCupCountActor.cupCount);info={title:Games.TEXT.PlayerInfoTabActor_Rank1,value:valueText,nameTitle:topCupCountActor.name};rankInfoList.push(info)}var topMovieCountActor=Game.moduleModel.actor.getTopMovieCount;if(topMovieCountActor){var valueText=format(TEXT.PlayerInfoTabActor_Rank2Value,topMovieCountActor.movieCount);info={title:Games.TEXT.PlayerInfoTabActor_Rank2,value:valueText,nameTitle:topMovieCountActor.name};rankInfoList.push(info)}var topGiveAssetListCountActor=Game.moduleModel.actor.getTopGiveAssetListCount;if(topGiveAssetListCountActor){var totalCount=0;for(var _i=0,_a=topGiveAssetListCountActor.giveAssetsList;_i<_a.length;_i++){var giveAsset=_a[_i];for(var _b=0,_c=giveAsset.giveItemList;_b<_c.length;_b++){var item=_c[_b];totalCount+=item.amount}}var valueText=format(TEXT.PlayerInfoTabActor_Rank3Value,totalCount);info={title:Games.TEXT.PlayerInfoTabActor_Rank3,value:valueText,nameTitle:topGiveAssetListCountActor.name};rankInfoList.push(info)}var topCultivateCountActor=Game.moduleModel.actor.getTopCultivateCount;if(topCultivateCountActor){var valueText=format(TEXT.PlayerInfoTabActor_Rank4Value,topCultivateCountActor.cultivateCount);info={title:Games.TEXT.PlayerInfoTabActor_Rank4,value:valueText,nameTitle:topGiveAssetListCountActor.name};rankInfoList.push(info)}var topSkillLevelActor=Game.moduleModel.actor.getTopSkillLevel;if(topSkillLevelActor){var totalSkillLevel=0;for(var _d=0,_e=topSkillLevelActor.skillList;_d<_e.length;_d++){var skillInfo=_e[_d];var skillCfg=Game.config.skill.getConfig(skillInfo.skillId);totalSkillLevel+=skillCfg.lv}var valueText=format(TEXT.PlayerInfoTabActor_Rank5Value,totalSkillLevel);info={title:Games.TEXT.PlayerInfoTabActor_Rank5,value:valueText,nameTitle:topSkillLevelActor.name};rankInfoList.push(info)}for(var _f=0,rankInfoList_5=rankInfoList;_f<rankInfoList_5.length;_f++){var rankInfo=rankInfoList_5[_f];var rankItem=this.m_rankList.addItemFromPool();rankItem.setInfo(rankInfo);this.m_rankList.addChild(rankItem)}};Main.prototype.rePosRankList=function(){this.m_homeRankTop.visible=false;this.m_rankList.y=this.orignalY-100;this.m_rankList.height=this.orignalHeight+100};Main.prototype.onCloseWindow=function(){Game.menu.close(MenuId.PlayerInfo)};Main.DependPackages=["PlayerInfo","Common"];return Main}(PlayerInfo.MainStruct));PlayerInfo.Main=Main})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var PersonInfoStruct=(function(_super){__extends(PersonInfoStruct,_super);function PersonInfoStruct(){return _super.call(this)||this}PersonInfoStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","PersonInfo"))};PersonInfoStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_progressBarText=(this.getChild("progressBarText"));this.m_headName=(this.getChild("headName"));this.m_level=(this.getChild("level"));this.m_self_introduction_input=(this.getChild("self_introduction_input"));this.m_self_introduction=(this.getChild("self_introduction"));this.m_btn_touch_desc=(this.getChild("btn_touch_desc"));this.m_progressBar=(this.getChild("progressBar"));this.m_headCircleIcon=(this.getChild("headCircleIcon"));this.m_btn_editor_desc=(this.getChild("btn_editor_desc"));this.m_btn_editor_name=(this.getChild("btn_editor_name"))};PersonInfoStruct.URL="ui://tderqmz5dyfeh";PersonInfoStruct.DependPackages=["PlayerInfo","Common"];return PersonInfoStruct}(fairygui.GComponent));PlayerInfo.PersonInfoStruct=PersonInfoStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var PersonInfo=(function(_super){__extends(PersonInfo,_super);function PersonInfo(){return _super!==null&&_super.apply(this,arguments)||this}return PersonInfo}(PlayerInfo.PersonInfoStruct));PlayerInfo.PersonInfo=PersonInfo})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var PlayerInfoAwardItemStruct=(function(_super){__extends(PlayerInfoAwardItemStruct,_super);function PlayerInfoAwardItemStruct(){return _super.call(this)||this}PlayerInfoAwardItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","PlayerInfoAwardItem"))};PlayerInfoAwardItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_frame=(this.getChild("frame"));this.m_icon=(this.getChild("icon"));this.m_num=(this.getChild("num"))};PlayerInfoAwardItemStruct.URL="ui://tderqmz5mk9y1t";PlayerInfoAwardItemStruct.DependPackages=["PlayerInfo","Common"];return PlayerInfoAwardItemStruct}(fairygui.GComponent));PlayerInfo.PlayerInfoAwardItemStruct=PlayerInfoAwardItemStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var PlayerInfoAwardItem=(function(_super){__extends(PlayerInfoAwardItem,_super);function PlayerInfoAwardItem(){return _super!==null&&_super.apply(this,arguments)||this}PlayerInfoAwardItem.prototype.setInfo=function(info){this.m_icon.url=ItemHelper.getItemIcon(info.itemId);this.m_num.text=info.itemNumTxt};return PlayerInfoAwardItem}(PlayerInfo.PlayerInfoAwardItemStruct));PlayerInfo.PlayerInfoAwardItem=PlayerInfoAwardItem})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var PlayerLevelNumberStruct=(function(_super){__extends(PlayerLevelNumberStruct,_super);function PlayerLevelNumberStruct(){return _super.call(this)||this}PlayerLevelNumberStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","PlayerLevelNumber"))};PlayerLevelNumberStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1")};PlayerLevelNumberStruct.URL="ui://tderqmz5mk9y1s";PlayerLevelNumberStruct.DependPackages=["PlayerInfo"];return PlayerLevelNumberStruct}(fairygui.GComponent));PlayerInfo.PlayerLevelNumberStruct=PlayerLevelNumberStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var PlayerLevelNumber=(function(_super){__extends(PlayerLevelNumber,_super);function PlayerLevelNumber(){return _super!==null&&_super.apply(this,arguments)||this}return PlayerLevelNumber}(PlayerInfo.PlayerLevelNumberStruct));PlayerInfo.PlayerLevelNumber=PlayerLevelNumber})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var PlayerLevelUpStruct=(function(_super){__extends(PlayerLevelUpStruct,_super);function PlayerLevelUpStruct(){return _super.call(this)||this}PlayerLevelUpStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","PlayerLevelUp"))};PlayerLevelUpStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_processBarIcon=(this.getChild("processBarIcon"));this.m_stroyIcon=(this.getChild("stroyIcon"));this.m_starList=(this.getChild("starList"));this.m_group1=(this.getChild("group1"));this.m_actorNum=(this.getChild("actorNum"));this.m_actorNumUpgrade=(this.getChild("actorNumUpgrade"));this.m_group2=(this.getChild("group2"));this.m_awardList=(this.getChild("awardList"));this.m_group3=(this.getChild("group3"));this.m_levelNumList=(this.getChild("levelNumList"));this.m_infiniten_star=(this.getChild("infiniten_star"));this.m_progressBar=(this.getChild("progressBar"));this.m_btnGetAward=(this.getChild("btnGetAward"));this.m_starboom_use01=(this.getChild("starboom_use01"));this.m_fireworks_level01=(this.getChild("fireworks_level01"));this.m_t0=this.getTransition("t0")};PlayerLevelUpStruct.URL="ui://tderqmz5mk9y1r";PlayerLevelUpStruct.DependPackages=["PlayerInfo","Fx","Common"];return PlayerLevelUpStruct}(fairygui.GComponent));PlayerInfo.PlayerLevelUpStruct=PlayerLevelUpStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var PlayerLevelUp=(function(_super){__extends(PlayerLevelUp,_super);function PlayerLevelUp(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.oldLevel=1;_this.nowLevel=1;return _this}PlayerLevelUp.prototype.show=function(oldLevel,nowLevel,stroys,closeHandler){this.oldLevel=oldLevel;this.nowLevel=nowLevel;this.stroys=stroys;this.closeHandler=closeHandler;Games.MenuLayer.dialog.addChild(this);this.setSize(fairygui.GRoot.inst.width,fairygui.GRoot.inst.height);this.addRelation(Games.MenuLayer.dialog,fairygui.RelationType.Size);this.m_starList.touchable=false;this.setLevelNum();this.m_btnGetAward.m_title.text=TEXT.PlayerUpgradeGetAward;this.m_btnGetAward.onClick(this,this.onClose);Game.sound.playSound(SoundKey.MM05_Upgrade)};PlayerLevelUp.prototype.onClose=function(){var str="";str.toLowerCase;this.removeFromParent();if(this.closeHandler){this.closeHandler.run();this.closeHandler=null}};PlayerLevelUp.prototype.setLevelNum=function(){var strlevel=this.nowLevel.toString();this.m_levelNumList.removeChildrenToPool();for(var i=0;i<strlevel.length;i++){var n=strlevel.charAt(i);var nItem=this.m_levelNumList.addItemFromPool();nItem.m_c1.selectedIndex=Number(n);this.m_levelNumList.addChild(nItem)}var curExp=User.info.fans;var cfg=Game.config.playerLevel.getConfig(this.nowLevel);var upgradeExp=cfg.fans;this.m_progressBar.value=((curExp*100)/upgradeExp);this.m_group1.visible=false;if(this.stroys.length>0){this.m_group1.visible=true;var stroyId=this.stroys[0];var stroyCfg=Game.config.story.getConfig(stroyId);if(stroyCfg){var avatarCfg=Game.config.avatar.getConfig(stroyCfg.poster_name);this.m_stroyIcon.url=avatarCfg.iconUrl;this.m_starList.removeChildrenToPool();for(var i=0;i<stroyCfg.starNumber;i++){this.m_starList.addItemFromPool()}}}var oldCfg=Game.config.playerLevel.getConfig(this.oldLevel);this.m_actorNum.text=oldCfg.actor_count.toString();this.m_actorNumUpgrade.text=cfg.actor_count.toString();var rewards=oldCfg.reward;this.m_awardList.removeChildrenToPool();for(var _i=0,rewards_1=rewards;_i<rewards_1.length;_i++){var reward=rewards_1[_i];var item=this.m_awardList.addItemFromPool();item.setInfo(reward);this.m_awardList.addChild(item)}};return PlayerLevelUp}(PlayerInfo.PlayerLevelUpStruct));PlayerInfo.PlayerLevelUp=PlayerLevelUp})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var PlayerTopAssetStruct=(function(_super){__extends(PlayerTopAssetStruct,_super);function PlayerTopAssetStruct(){return _super.call(this)||this}PlayerTopAssetStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","PlayerTopAsset"))};PlayerTopAssetStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_assetList=(this.getChild("assetList"));this.m_btn_topClose=(this.getChild("btn_topClose"))};PlayerTopAssetStruct.URL="ui://tderqmz5dyfek";PlayerTopAssetStruct.DependPackages=["PlayerInfo","Common"];return PlayerTopAssetStruct}(fairygui.GComponent));PlayerInfo.PlayerTopAssetStruct=PlayerTopAssetStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var PlayerTopAsset=(function(_super){__extends(PlayerTopAsset,_super);function PlayerTopAsset(){return _super!==null&&_super.apply(this,arguments)||this}return PlayerTopAsset}(PlayerInfo.PlayerTopAssetStruct));PlayerInfo.PlayerTopAsset=PlayerTopAsset})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var ProgressRedBarStruct=(function(_super){__extends(ProgressRedBarStruct,_super);function ProgressRedBarStruct(){return _super.call(this)||this}ProgressRedBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","ProgressRedBar"))};ProgressRedBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_top=(this.getChild("top"));this.m_barSquare=(this.getChild("barSquare"))};ProgressRedBarStruct.URL="ui://tderqmz5dyfe0";ProgressRedBarStruct.DependPackages=["PlayerInfo","Common"];return ProgressRedBarStruct}(fairygui.GProgressBar));PlayerInfo.ProgressRedBarStruct=ProgressRedBarStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var ProgressRedBar=(function(_super){__extends(ProgressRedBar,_super);function ProgressRedBar(){return _super!==null&&_super.apply(this,arguments)||this}return ProgressRedBar}(PlayerInfo.ProgressRedBarStruct));PlayerInfo.ProgressRedBar=ProgressRedBar})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var RenameCompanyStruct=(function(_super){__extends(RenameCompanyStruct,_super);function RenameCompanyStruct(){return _super.call(this)||this}RenameCompanyStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","RenameCompany"))};RenameCompanyStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_titleName=(this.getChild("titleName"));this.m_inputName=(this.getChild("inputName"));this.m_btn_close=(this.getChild("btn_close"));this.m_btn_rename=(this.getChild("btn_rename"))};RenameCompanyStruct.URL="ui://tderqmz5o11z1h";RenameCompanyStruct.DependPackages=["PlayerInfo","Common","System"];return RenameCompanyStruct}(fairygui.GComponent));PlayerInfo.RenameCompanyStruct=RenameCompanyStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var RenameCompany=(function(_super){__extends(RenameCompany,_super);function RenameCompany(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.ITEM_RENAME_ID=5008;return _this}RenameCompany.prototype.showForParent=function(parent){parent.addChild(this);this.setSize(fairygui.GRoot.inst.width,fairygui.GRoot.inst.height);this.addRelation(parent,fairygui.RelationType.Size)};RenameCompany.prototype.setInfo=function(){this.m_inputName.input.focus=true;this.m_inputName.text=User.info.name;var item=Game.moduleModel.item.getItem(this.ITEM_RENAME_ID);this.m_btn_rename.m_icon.url=item.itemIconUrl;this.m_btn_rename.m_num.text="1";this.m_btn_rename.m_title.text=TEXT.Rename;this.m_btn_rename.onClick(this,this.onRenameClick);this.m_btn_close.onClick(this,this.onClose)};RenameCompany.prototype.onRenameClick=function(){var newName=this.m_inputName.text;if(this.check()&&newName!=""){Game.moduleModel.playerInfo.playerName=newName;Game.protosender.GameData.RenameGameData(newName);this.onClose()}};RenameCompany.prototype.check=function(){var newName=this.m_inputName.text;if(!validateRoleName(newName)){return false}if(newName==User.info.name){Game.system.toastText(Game.config.msg.getTxt(MsgKey.account_name_repeat));return false}if(Game.moduleModel.item.getItemNum(this.ITEM_RENAME_ID)==0){Game.system.openItemWay(this.ITEM_RENAME_ID,1);return false}return true};RenameCompany.prototype.onClose=function(){this.m_inputName.input.focus=false;this.parent.removeChild(this)};return RenameCompany}(PlayerInfo.RenameCompanyStruct));PlayerInfo.RenameCompany=RenameCompany})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var TabPanelStruct=(function(_super){__extends(TabPanelStruct,_super);function TabPanelStruct(){return _super.call(this)||this}TabPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PlayerInfo","TabPanel"))};TabPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_tabctrl=this.getController("tabctrl");this.m_tab1=(this.getChild("tab1"));this.m_tab2=(this.getChild("tab2"));this.m_tab3=(this.getChild("tab3"));this.m_tab4=(this.getChild("tab4"));this.m_tab5=(this.getChild("tab5"))};TabPanelStruct.URL="ui://tderqmz5dyfeq";TabPanelStruct.DependPackages=["PlayerInfo","Common"];return TabPanelStruct}(fairygui.GComponent));PlayerInfo.TabPanelStruct=TabPanelStruct})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PlayerInfo;(function(PlayerInfo){var TabPanel=(function(_super){__extends(TabPanel,_super);function TabPanel(){return _super!==null&&_super.apply(this,arguments)||this}return TabPanel}(PlayerInfo.TabPanelStruct));PlayerInfo.TabPanel=TabPanel})(PlayerInfo=fgui.PlayerInfo||(fgui.PlayerInfo={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PopUp;(function(PopUp){var PopUpMainStruct=(function(_super){__extends(PopUpMainStruct,_super);function PopUpMainStruct(){return _super.call(this)||this}PopUpMainStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PopUp","PopUpMain"))};PopUpMainStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_pic=(this.getChild("pic"));this.m_close=(this.getChild("close"));this.m_check=(this.getChild("check"))};PopUpMainStruct.URL="ui://4fu4p3osij4v0";PopUpMainStruct.DependPackages=["PopUp","Common"];return PopUpMainStruct}(fairygui.GComponent));PopUp.PopUpMainStruct=PopUpMainStruct})(PopUp=fgui.PopUp||(fgui.PopUp={}))})(fgui||(fgui={}));var fgui;(function(fgui){var PopUp;(function(PopUp){var PopUpMain=(function(_super){__extends(PopUpMain,_super);function PopUpMain(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.curShowNum=0;_this.maxShowNum=0;return _this}PopUpMain.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_close.onClick(this,this.setData)};PopUpMain.prototype.onWindowShow=function(){Games.GameLocalStorage.Instance.setBoolean("__PopUpMain_HavePopToday",true,false);this.m_check.selected=false;if(this.moduleWindow.menuParameter.args.length>0){this.curPopUpconfigList=this.moduleWindow.menuParameter.args[0];this.curPopUpconfigList.sort(function(a,b){return b.priority-a.priority});this.maxShowNum=this.curPopUpconfigList.length;this.curShowNum=0;this.setData()}};PopUpMain.prototype.onWindowHide=function(){};PopUpMain.prototype.setData=function(){if(this.curShowNum>0){Games.GameLocalStorage.Instance.setBoolean("__PopUpMain_HidePopToday"+this.curPopUpconfigList[this.curShowNum-1].id,this.m_check.selected,false)}if(this.curShowNum<this.maxShowNum){this.m_check.selected=false;this.m_pic.icon=ImageConfig.getUrl(this.curPopUpconfigList[this.curShowNum].image);this.curShowNum++}else{Games.GameLocalStorage.Instance.setInt("__PopUpMain_HidePopTodayServerTime",Game.time.serverMilliseconds,false);this.moduleWindow.menuBack()}};return PopUpMain}(PopUp.PopUpMainStruct));PopUp.PopUpMain=PopUpMain})(PopUp=fgui.PopUp||(fgui.PopUp={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ActorAttrItemStruct=(function(_super){__extends(ActorAttrItemStruct,_super);function ActorAttrItemStruct(){return _super.call(this)||this}ActorAttrItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ActorAttrItem"))};ActorAttrItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_attrIcon=(this.getChild("attrIcon"));this.m_attrValue=(this.getChild("attrValue"))};ActorAttrItemStruct.URL="ui://eg7c5x5regep1h";ActorAttrItemStruct.DependPackages=["Produce","Common"];return ActorAttrItemStruct}(fairygui.GComponent));Produce.ActorAttrItemStruct=ActorAttrItemStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ActorAttrItem=(function(_super){__extends(ActorAttrItem,_super);function ActorAttrItem(){return _super!==null&&_super.apply(this,arguments)||this}return ActorAttrItem}(Produce.ActorAttrItemStruct));Produce.ActorAttrItem=ActorAttrItem})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ActorFilterItemStruct=(function(_super){__extends(ActorFilterItemStruct,_super);function ActorFilterItemStruct(){return _super.call(this)||this}ActorFilterItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ActorFilterItem"))};ActorFilterItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_loader=(this.getChild("loader"))};ActorFilterItemStruct.URL="ui://eg7c5x5rvw1q16";ActorFilterItemStruct.DependPackages=["Produce","Common"];return ActorFilterItemStruct}(fairygui.GComponent));Produce.ActorFilterItemStruct=ActorFilterItemStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ActorFilterItem=(function(_super){__extends(ActorFilterItem,_super);function ActorFilterItem(){return _super!==null&&_super.apply(this,arguments)||this}return ActorFilterItem}(Produce.ActorFilterItemStruct));Produce.ActorFilterItem=ActorFilterItem})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var BtnAddStruct=(function(_super){__extends(BtnAddStruct,_super);function BtnAddStruct(){return _super.call(this)||this}BtnAddStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","BtnAdd"))};BtnAddStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button")};BtnAddStruct.URL="ui://eg7c5x5rfd658";BtnAddStruct.DependPackages=["Produce","Common"];return BtnAddStruct}(fairygui.GButton));Produce.BtnAddStruct=BtnAddStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var BtnAdd=(function(_super){__extends(BtnAdd,_super);function BtnAdd(){return _super!==null&&_super.apply(this,arguments)||this}return BtnAdd}(Produce.BtnAddStruct));Produce.BtnAdd=BtnAdd})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var BtnUpgradeStruct=(function(_super){__extends(BtnUpgradeStruct,_super);function BtnUpgradeStruct(){return _super.call(this)||this}BtnUpgradeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","BtnUpgrade"))};BtnUpgradeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};BtnUpgradeStruct.URL="ui://eg7c5x5rfd655";BtnUpgradeStruct.DependPackages=["Produce"];return BtnUpgradeStruct}(fairygui.GButton));Produce.BtnUpgradeStruct=BtnUpgradeStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var BtnUpgrade=(function(_super){__extends(BtnUpgrade,_super);function BtnUpgrade(){return _super!==null&&_super.apply(this,arguments)||this}return BtnUpgrade}(Produce.BtnUpgradeStruct));Produce.BtnUpgrade=BtnUpgrade})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var BtnUpgradeLockStruct=(function(_super){__extends(BtnUpgradeLockStruct,_super);function BtnUpgradeLockStruct(){return _super.call(this)||this}BtnUpgradeLockStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","BtnUpgradeLock"))};BtnUpgradeLockStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};BtnUpgradeLockStruct.URL="ui://eg7c5x5re80io";BtnUpgradeLockStruct.DependPackages=["Produce"];return BtnUpgradeLockStruct}(fairygui.GButton));Produce.BtnUpgradeLockStruct=BtnUpgradeLockStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var BtnUpgradeLock=(function(_super){__extends(BtnUpgradeLock,_super);function BtnUpgradeLock(){return _super!==null&&_super.apply(this,arguments)||this}return BtnUpgradeLock}(Produce.BtnUpgradeLockStruct));Produce.BtnUpgradeLock=BtnUpgradeLock})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ButtonEndTimeStruct=(function(_super){__extends(ButtonEndTimeStruct,_super);function ButtonEndTimeStruct(){return _super.call(this)||this}ButtonEndTimeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ButtonEndTime"))};ButtonEndTimeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_assetIcon=(this.getChild("assetIcon"));this.m_num=(this.getChild("num"))};ButtonEndTimeStruct.URL="ui://eg7c5x5rpspr2n";ButtonEndTimeStruct.DependPackages=["Produce","Common"];return ButtonEndTimeStruct}(fairygui.GButton));Produce.ButtonEndTimeStruct=ButtonEndTimeStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ButtonEndTime=(function(_super){__extends(ButtonEndTime,_super);function ButtonEndTime(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonEndTime}(Produce.ButtonEndTimeStruct));Produce.ButtonEndTime=ButtonEndTime})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ItemIconEffectLoaderStruct=(function(_super){__extends(ItemIconEffectLoaderStruct,_super);function ItemIconEffectLoaderStruct(){return _super.call(this)||this}ItemIconEffectLoaderStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ItemIconEffectLoader"))};ItemIconEffectLoaderStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_iconLoader=(this.getChild("iconLoader"));this.m_t1=this.getTransition("t1")};ItemIconEffectLoaderStruct.URL="ui://eg7c5x5rsayo33";ItemIconEffectLoaderStruct.DependPackages=["Produce"];return ItemIconEffectLoaderStruct}(fairygui.GComponent));Produce.ItemIconEffectLoaderStruct=ItemIconEffectLoaderStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ItemIconEffectLoader=(function(_super){__extends(ItemIconEffectLoader,_super);function ItemIconEffectLoader(){return _super!==null&&_super.apply(this,arguments)||this}return ItemIconEffectLoader}(Produce.ItemIconEffectLoaderStruct));Produce.ItemIconEffectLoader=ItemIconEffectLoader})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ItemProduceLineStruct=(function(_super){__extends(ItemProduceLineStruct,_super);function ItemProduceLineStruct(){return _super.call(this)||this}ItemProduceLineStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ItemProduceLine"))};ItemProduceLineStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};ItemProduceLineStruct.URL="ui://eg7c5x5rfd65a";ItemProduceLineStruct.DependPackages=["Produce"];return ItemProduceLineStruct}(fairygui.GButton));Produce.ItemProduceLineStruct=ItemProduceLineStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ItemProduceLine=(function(_super){__extends(ItemProduceLine,_super);function ItemProduceLine(){return _super!==null&&_super.apply(this,arguments)||this}return ItemProduceLine}(Produce.ItemProduceLineStruct));Produce.ItemProduceLine=ItemProduceLine})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ItemProduceMaxLineStruct=(function(_super){__extends(ItemProduceMaxLineStruct,_super);function ItemProduceMaxLineStruct(){return _super.call(this)||this}ItemProduceMaxLineStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ItemProduceMaxLine"))};ItemProduceMaxLineStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};ItemProduceMaxLineStruct.URL="ui://eg7c5x5rx9sk19";ItemProduceMaxLineStruct.DependPackages=["Produce"];return ItemProduceMaxLineStruct}(fairygui.GButton));Produce.ItemProduceMaxLineStruct=ItemProduceMaxLineStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ItemProduceMaxLine=(function(_super){__extends(ItemProduceMaxLine,_super);function ItemProduceMaxLine(){return _super!==null&&_super.apply(this,arguments)||this}return ItemProduceMaxLine}(Produce.ItemProduceMaxLineStruct));Produce.ItemProduceMaxLine=ItemProduceMaxLine})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var MainStruct=(function(_super){__extends(MainStruct,_super);function MainStruct(){return _super.call(this)||this}MainStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","Main"))};MainStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_subBg=(this.getChild("subBg"));this.m_produceList=(this.getChild("produceList"));this.m_roomContainer=(this.getChild("roomContainer"));this.m_btn_close=(this.getChild("btn_close"));this.m_assetListTitle=(this.getChild("assetListTitle"));this.m_tabList=(this.getChild("tabList"));this.m_btn_quickProduce=(this.getChild("btn_quickProduce"));this.m_btn_quickGetaward=(this.getChild("btn_quickGetaward"))};MainStruct.URL="ui://eg7c5x5rfd650";MainStruct.DependPackages=["Produce","Common"];return MainStruct}(fairygui.GComponent));Produce.MainStruct=MainStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var Main=(function(_super){__extends(Main,_super);function Main(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.PAPER_ID=7;_this.gradeLevelList=[];_this.buildIndex=-1;_this.quickGetRewardsList=[];return _this}Main.prototype.onWindowInited=function(){this.m_produceList.scrollItemToViewOnClick=false;this.m_btn_close.onClick(this,this.onCloseWindow);this.m_btn_quickProduce.m_title.text=TEXT.ProduceQuickBtnName;this.m_btn_quickGetaward.m_title.text=TEXT.ProduceQuickAwardBtnName;this.m_btn_quickProduce.onClick(this,this.onQuickProduce);this.m_btn_quickGetaward.onClick(this,this.onQuickGetAwards);this.m_produceList.itemRenderer=new Handler(this,this.renderProducetem,null,false);this.initTabUI()};Main.prototype.onWindowShow=function(){this.showBuildRoom();this.setAssets();this.tabIndex=0;this.onTabProduceList();Game.protoOkEvent.add(ProtoEventKey.ItemData,this.updateAssets,this);Game.protoOkEvent.add(ProtoEventKey.GameInfo,this.updateAssets,this);Game.protoOkEvent.add(ProtoEventKey.manageProduce_Produce,this.callBackProduce,this);Game.protoOkEvent.add(ProtoEventKey.manageProduce_Deblocking,this.callBackProduceLock,this);Game.protoOkEvent.add(ProtoEventKey.manageProduce_GetReward,this.callBackGetReward,this);Game.protoOkEvent.add(ProtoEventKey.manageProduce_Uplevel,this.callBackUplevel,this);Game.protoOkEvent.add(ProtoEventKey.manageProduce_SendActor,this.callBackSendActor,this);Game.protoOkEvent.add(ProtoEventKey.manageProduce_cleanTime,this.callBackCleanTime,this);Game.protoOkEvent.add(ProtoEventKey.manageProduce_QuickProduce,this.callBackQuickProduce,this);Game.protoOkEvent.add(ProtoEventKey.manageProduce_QuickGetReward,this.callBackQuickGetReward,this)};Main.prototype.onWindowHide=function(){this.hideBuildRoom();this.clearCurrentProduceList();Game.protoOkEvent.remove(ProtoEventKey.ItemData,this.updateAssets,this);Game.protoOkEvent.remove(ProtoEventKey.GameInfo,this.updateAssets,this);Game.protoOkEvent.remove(ProtoEventKey.manageProduce_Produce,this.callBackProduce,this);Game.protoOkEvent.remove(ProtoEventKey.manageProduce_Deblocking,this.callBackProduceLock,this);Game.protoOkEvent.remove(ProtoEventKey.manageProduce_GetReward,this.callBackGetReward,this);Game.protoOkEvent.remove(ProtoEventKey.manageProduce_Uplevel,this.callBackUplevel,this);Game.protoOkEvent.remove(ProtoEventKey.manageProduce_SendActor,this.callBackSendActor,this);Game.protoOkEvent.remove(ProtoEventKey.manageProduce_cleanTime,this.callBackCleanTime,this);Game.protoOkEvent.remove(ProtoEventKey.manageProduce_QuickProduce,this.callBackQuickProduce,this);Game.protoOkEvent.remove(ProtoEventKey.manageProduce_QuickGetReward,this.callBackQuickGetReward,this)};Main.prototype.showBuildRoom=function(){this.buildRoom=Games.AvatarManager.context.getRoomByType(Games.RoomType.Depot);if(this.buildRoom!=null){this.buildRoom.onRoomInScreen();this.buildRoom.setRoomFrameVisible(false);this.buildIndex=Games.AvatarManager.context.getRoomIndexByType(Games.RoomType.Depot);this.buildRoom.setXY(-20,-4);this.buildRoom.setScale(1.05,1.05);this.m_roomContainer.addChild(this.buildRoom.mainView);var scale=ScreenSetting.screenWidth/this.buildRoom.mainView.sourceWidth;this.buildRoom.setScale(scale*1.05,1.05)}};Main.prototype.hideBuildRoom=function(){if(this.buildRoom){this.buildRoom.setXY(0,0);this.buildRoom.setScale(1,1);this.buildRoom.setRoomFrameVisible(true);Games.AvatarManager.context.addRoomAt(this.buildRoom,this.buildIndex)}};Main.prototype.callBackProduce=function(proto){console.log("[Response] callBackProduce "+proto.uuid);var produceId=Game.moduleModel.produce.getProduceByUuid(proto.uuid).produceId;Games.Static.Instance.onUserorbit("product",produceId.toString(),"start");var renderItem=this.getRenderItem(produceId);if(renderItem){renderItem.updateSingleProduce();this.eachRenderItem(function(value){if(!value.isOpen){value.updateProduce()}});if(!renderItem.activeItem.isFirstLine){var startPos=this.m_assetListTitle.getAssetGloblePos(0);var endPos=renderItem.ProduceLinePos;FguiHelper.startTrailSingle(renderItem.activeItem.PAPER_ID,startPos,endPos,300,Laya.stage)}}};Main.prototype.callBackProduceLock=function(proto){var stall=Game.moduleModel.produce.getStall(proto.produceId);Games.Static.Instance.onUserorbit("product",stall+"&"+proto.produceId,"unlock");var index=this.getRenderItemIndex(proto.produceId);this.renderProducetem(index,this.m_produceList.getChildAt(index));this.eachRenderItem(function(value){if(!value.isOpen){value.updateProduce()}});this.initQuickProcess()};Main.prototype.callBackGetReward=function(proto){console.log("[Response] callBackGetReward "+proto.uuid);var produceId=Game.moduleModel.produce.getProduceByUuid(proto.uuid).produceId;var renderItem=this.getRenderItem(produceId);if(renderItem){renderItem.updateGetRewardView();var startPos=renderItem.produceItemIconPos;var endPos=void 0;if(renderItem.activeItem.isFirstLine){endPos=this.m_assetListTitle.getAssetGloblePos(1);FguiHelper.startTrail(renderItem.activeItem.itemId,startPos,endPos,500,Laya.stage)}else{endPos=new Point(Laya.stage.width,Laya.stage.height);FguiHelper.startTrail(renderItem.activeItem.itemId,startPos,endPos,500,Laya.stage)}Game.sound.playSound(SoundKey.MM09_GoldReward)}};Main.prototype.callBackUplevel=function(proto){console.log("[Response] callBackUplevel "+proto.uuid);var produceId=Game.moduleModel.produce.getProduceByUuid(proto.uuid).produceId;var stall=Game.moduleModel.produce.getStall(produceId);Games.Static.Instance.onUserorbit("product",stall+"&"+produceId,"upgrade");var renderItem=this.getRenderItem(produceId);if(renderItem){renderItem.updateLevelupView(proto.skillId)}};Main.prototype.callBackSendActor=function(proto){console.log("[Response] callBackSendActor "+proto.uuid+" "+proto.actBaseId);var produceId=Game.moduleModel.produce.getProduceByUuid(proto.uuid).produceId;var renderItem=this.getRenderItem(produceId);if(renderItem){renderItem.updateActorView(proto.actBaseId);this.eachRenderItem(function(value){value.updateProduce()});if(proto.actBaseId>0){Game.system.playSkillEffect(proto.actBaseId,Games.SkillTriggerType.production_earnings)}}};Main.prototype.callBackCleanTime=function(proto){console.log("[Response] callBackCleanTime "+proto.uuid);var produceId=Game.moduleModel.produce.getProduceByUuid(proto.uuid).produceId;var renderItem=this.getRenderItem(produceId);if(renderItem){renderItem.updateImmediateProduce()}};Main.prototype.callBackQuickProduce=function(proto){this.eachRenderItem(function(value){value.updateSingleProduce()});var produceNum=proto.num;if(produceNum>0){Game.system.toastText(Game.config.msg.getTxtFormat(MsgKey.produce_one_click,produceNum))}};Main.prototype.callBackQuickGetReward=function(proto){if(this.quickGetRewardsList.length>0){Game.system.getItemText(this.quickGetRewardsList,null,true);this.quickGetRewardsList.length=0}this.eachRenderItem(function(value){value.updateGetRewardView()})};Main.prototype.setAssets=function(){var assets=[7,3,1,2];this.m_assetListTitle.setAssets(assets)};Main.prototype.updateAssets=function(){this.m_assetListTitle.updateAssets();var children=this.m_produceList.numChildren;for(var i=0;i<children;i++){var item=this.m_produceList.getChildAt(i);item.updateAssets()}};Main.prototype.initTabUI=function(){var list=Game.config.produce.getConfigList();var currentGrade=0;for(var i=0;i<list.length;i++){if(currentGrade!=list[i].grade){currentGrade=list[i].grade;this.gradeLevelList.push(list[i].grade)}}for(var i_1=0;i_1<this.gradeLevelList.length;i_1++){var tab=this.m_tabList.getChild("tab"+i_1);var txtTitle=tab.getChild("nomalTitle");var txtSelectTitle=tab.getChild("selectTitle");txtTitle.text=format(TEXT.ProduceGrade,(i_1+1));txtSelectTitle.text=format(TEXT.ProduceGrade,(i_1+1));tab.onClick(this,this.onTabGradeChange)}};Object.defineProperty(Main.prototype,"tabIndex",{get:function(){return this.m_tabList.m_cTab.selectedIndex},set:function(value){this.m_tabList.m_cTab.setSelectedIndex(value);this.moduleWindow.openTab(this.tabIndex)},enumerable:true,configurable:true});Main.prototype.onTabGradeChange=function(e){this.tabIndex=this.m_tabList.m_cTab.selectedIndex;this.onTabProduceList()};Main.prototype.onTabProduceList=function(){this.clearCurrentProduceList();this.curTabProduceList=this.getProduceListGrade(this.gradeLevelList[this.tabIndex]);this.m_produceList.numItems=this.curTabProduceList.length;this.m_produceList.scrollToView(0,false);this.initQuickProcess()};Main.prototype.clearCurrentProduceList=function(){var childNum=this.m_produceList.numChildren;for(var i=0;i<childNum;i++){var renderItem=this.m_produceList.getChildAt(i);if(renderItem.isOpen){renderItem.activeItem.dispose()}}this.m_produceList.numItems=0};Main.prototype.renderProducetem=function(index,item){var data=this.curTabProduceList[index];item.setData(data,this.tabIndex)};Main.prototype.getRenderItemIndex=function(produceId){var children=this.m_produceList.numChildren;for(var i=0;i<children;i++){var item=this.m_produceList.getChildAt(i);if(item.produceId==produceId){return i}}return -1};Main.prototype.getRenderItem=function(produceId){var index=this.getRenderItemIndex(produceId);if(index!=-1){return this.m_produceList.getChildAt(index)}return null};Main.prototype.getUnlockItemList=function(){var result=[];var children=this.m_produceList.numChildren;for(var i=0;i<children;i++){var item=this.m_produceList.getChildAt(i);if(item.isOpen){result.push(item)}}return result};Main.prototype.eachRenderItem=function(handler){var children=this.m_produceList.numChildren;for(var i=0;i<children;i++){var item=this.m_produceList.getChildAt(i);handler(item)}};Main.prototype.getProduceListGrade=function(grade){var produceList=Game.config.produce.getConfigList();return produceList.filter(function(value,index,array){return value.grade==grade})};Main.prototype.initQuickProcess=function(){var isQuickProduceOpen=this.checkQuickProduceBlockStreetLevel();if(isQuickProduceOpen){FguiHelper.clearFilters(this.m_btn_quickProduce)}else{FguiHelper.setGray(this.m_btn_quickProduce)}var isQuickRewardOpen=this.checkQuickAwardBlockStreetLevel();if(isQuickRewardOpen){FguiHelper.clearFilters(this.m_btn_quickGetaward)}else{FguiHelper.setGray(this.m_btn_quickGetaward)}this.m_btn_quickProduce.visible=true;this.m_btn_quickGetaward.visible=true;var unlockList=this.getUnlockItemList();if(unlockList.length==0){this.m_btn_quickProduce.visible=false;this.m_btn_quickGetaward.visible=false}};Main.prototype.onQuickProduce=function(){if(!this.checkQuickProduceBlockStreetLevel()){var blockStreetId=Game.config.global.getConfig(GlobalKey.produce_production_less).value;var blockStreetCfg=Game.config.blockLevel.getConfig(blockStreetId);var blockStreetName="";blockStreetCfg&&(blockStreetName=blockStreetCfg.name);Game.system.toastText(Game.config.msg.getTxtFormat(MsgKey.produce_provip_less,blockStreetName));return}var unlockList=this.getUnlockItemList();var matchs=unlockList.filter(function(value,index,array){return value.activeItem.checkAll()});if(matchs.length==0){if(this.checkPaperZero()){}else{if(this.checkProduceLineFull(unlockList)){}else{if(this.checkOutputFull(unlockList)){}}}return}else{Game.protosender.manageProduce.QuickProduce(this.gradeLevelList[this.tabIndex])}};Main.prototype.checkPaperZero=function(){if(ItemHelper.getItemNum(this.PAPER_ID)==0){Game.system.openItemWay(this.PAPER_ID,1);return true}return false};Main.prototype.checkProduceLineFull=function(activeItemList){var isMatch=false;activeItemList.forEach(function(vaule,index,array){if(vaule.activeItem.checkProcessLineFull()){Game.system.toastText(Game.config.msg.getTxt(MsgKey.produce_lines_max));isMatch=true;return}});return isMatch};Main.prototype.checkOutputFull=function(activeItemList){var isMatch=false;activeItemList.forEach(function(vaule,index,array){if(vaule.activeItem.checkOutputFull()){Game.system.toastText(Game.config.msg.getTxt(MsgKey.produce_item_max));isMatch=true;return}});return isMatch};Main.prototype.checkQuickProduceBlockStreetLevel=function(){var blockStreetLevel=Game.config.global.getConfig(GlobalKey.produce_production_less).value;return User.info.stall>=blockStreetLevel};Main.prototype.onQuickGetAwards=function(){var _this=this;if(this.checkQuickGetAwards()){var unlockList=this.getUnlockItemList();var matchs=unlockList.filter(function(value,index,array){return value.activeItem.isCanGetItem()});this.quickGetRewardsList.length=0;matchs.forEach(function(value,index,array){if(value.activeItem.isCanGetItem()){var dtItem=new DTItemNum();dtItem.itemId=value.activeItem.itemId;dtItem.itemNum=value.activeItem.getOutItemNum();_this.quickGetRewardsList.push(dtItem)}});if(!this.checkDepotCapacityEnough()){Game.system.toastText(Game.config.msg.getTxt(MsgKey.produce_warehouse_max));return false}if(Game.moduleModel.bag.IsBagFull(this.quickGetRewardsList.length)){Game.system.toastText(Game.config.msg.getTxt(MsgKey.produce_warehouse_max));return false}Game.protosender.manageProduce.QuickGetReward(this.gradeLevelList[this.tabIndex])}};Main.prototype.checkQuickGetAwards=function(useAlert){if(useAlert===void 0){useAlert=true}if(!this.checkQuickAwardBlockStreetLevel()){if(useAlert){var blockStreetId=Game.config.global.getConfig(GlobalKey.produce_collection_less).value;var blockStreetCfg=Game.config.blockLevel.getConfig(blockStreetId);var blockStreetName="";blockStreetCfg&&(blockStreetName=blockStreetCfg.name);Game.system.toastText(Game.config.msg.getTxtFormat(MsgKey.produce_recvip_less,blockStreetName))}return false}if(!this.checkhasOutItem()){if(useAlert){Game.system.toastText(Game.config.msg.getTxt(MsgKey.produce_item_less))}return false}return true};Main.prototype.checkQuickAwardBlockStreetLevel=function(){var blockStreetLevel=Game.config.global.getConfig(GlobalKey.produce_collection_less).value;return User.info.stall>=blockStreetLevel};Main.prototype.checkDepotCapacityEnough=function(){if(!Game.moduleModel.building.hasBuildByType(Games.RoomType.Depot)){return false}if(Game.moduleModel.bag.IsBagFull()){return false}return true};Main.prototype.checkhasOutItem=function(){var unlockList=this.getUnlockItemList();var matchs=unlockList.filter(function(value,index,array){return value.activeItem.isCanGetItem()});if(matchs.length==0){return false}return true};Main.prototype.onCloseWindow=function(){Game.menu.close(MenuId.Produce)};return Main}(Produce.MainStruct));Produce.Main=Main})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceDescStruct=(function(_super){__extends(ProduceDescStruct,_super);function ProduceDescStruct(){return _super.call(this)||this}ProduceDescStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ProduceDesc"))};ProduceDescStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_descText=(this.getChild("descText"))};ProduceDescStruct.URL="ui://eg7c5x5roh2e34";ProduceDescStruct.DependPackages=["Produce"];return ProduceDescStruct}(fairygui.GComponent));Produce.ProduceDescStruct=ProduceDescStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceDesc=(function(_super){__extends(ProduceDesc,_super);function ProduceDesc(){return _super!==null&&_super.apply(this,arguments)||this}return ProduceDesc}(Produce.ProduceDescStruct));Produce.ProduceDesc=ProduceDesc})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceItemStruct=(function(_super){__extends(ProduceItemStruct,_super);function ProduceItemStruct(){return _super.call(this)||this}ProduceItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ProduceItem"))};ProduceItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_avatarLoader=(this.getChild("avatarLoader"));this.m_produceMaxLine=(this.getChild("produceMaxLine"));this.m_produceLine=(this.getChild("produceLine"));this.m_levelText=(this.getChild("levelText"));this.m_nameText=(this.getChild("nameText"));this.m_storeBg=(this.getChild("storeBg"));this.m_curItemNumLb=(this.getChild("curItemNumLb"));this.m_curItemNum=(this.getChild("curItemNum"));this.m_item=(this.getChild("item"));this.m_cutTime=(this.getChild("cutTime"));this.m_onProducing=(this.getChild("onProducing"));this.m_produceDesc=(this.getChild("produceDesc"));this.m_btn_addAvatar=(this.getChild("btn_addAvatar"));this.m_btn_produce=(this.getChild("btn_produce"));this.m_btn_upgrade=(this.getChild("btn_upgrade"));this.m_btn_tips=(this.getChild("btn_tips"));this.m_effectFull=(this.getChild("effectFull"));this.m_itemIcon=(this.getChild("itemIcon"));this.m_btn_getItem=(this.getChild("btn_getItem"));this.m_btn_timeEnd=(this.getChild("btn_timeEnd"));this.m_tip=(this.getChild("tip"))};ProduceItemStruct.URL="ui://eg7c5x5rfd65g";ProduceItemStruct.DependPackages=["Produce","Common","Fx"];return ProduceItemStruct}(fairygui.GComponent));Produce.ProduceItemStruct=ProduceItemStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceSkillType=Games.ProduceSkillType;var ProduceItem=(function(_super){__extends(ProduceItem,_super);function ProduceItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.PAPER_ID=7;_this.FIRST_LINE=100;_this.PRODUCE_SKILL_GROUP=1002;_this.cutDownTime=-1;_this.totalTime=0;_this.timeProcessedlineNum=0;_this.processedlineNum=0;_this.clientOutNum=0;_this.clientProcessTime=0;return _this}ProduceItem.prototype.setInfo=function(produceId,grade){this.grade=grade;this.produceId=produceId;this.cfg=Game.config.produce.getConfig(this.produceId);this.itemId=this.cfg.item;this.m_nameText.text=this.cfg.name;this.m_produceDesc.m_descText.text=this.cfg.tip;this.m_produceDesc.m_descText.x=2;this.m_curItemNumLb.text=TEXT.ProduceItemStore;this.m_curItemNum.text=formatNumberUnit(ItemHelper.getItemNum(this.cfg.item));this.m_itemIcon.m_iconLoader.url=ItemHelper.getItemIcon(this.cfg.item);this.m_btn_getItem.m_title.text=TEXT.GetReward;this.m_btn_produce.m_icon.url=Game.config.item.getConfig(this.PAPER_ID).iconUrl;this.m_btn_produce.m_title.text=TEXT.ProduceStart;this.m_btn_produce.m_num.text="1";this.m_btn_timeEnd.m_assetIcon.url=Game.config.item.getConfig(Games.AssetType.Diamond).iconUrl;this.data=Game.moduleModel.produce.getProduce(produceId);this.m_levelText.text=format(TEXT.ProduceLevel,this.data.level);this.setActorAvatar(this.data.actorId);this.m_btn_upgrade.onClick(this,this.onUpgradeClick);this.m_btn_tips.onClick(this,this.onTipsClick);this.m_btn_addAvatar.onClick(this,this.onAddAvatar);this.m_btn_timeEnd.onClick(this,this.onTimeEndClick);this.m_btn_getItem.onClick(this,this.onGetItemClick);this.m_btn_produce.onClick(this,this.onProduceClick);this.m_cutTime.text="";this.m_btn_getItem.visible=true;this.m_onProducing.visible=false;this.m_btn_upgrade.visible=true;this.m_avatarLoader.visible=true;this.m_btn_addAvatar.visible=true;if(this.data.itemNum==0){this.disableGetItemView()}if(this.data.actorId>0){this.m_btn_addAvatar.visible=false}this.setFirstLine();this.setProcessLine();this.setMaxProcessLine();this.refresh();this.updateTime();this.setOutputItemText();Laya.timer.clear(this,this.onScrollLongText);if(this.isLongText){Laya.timer.loop(30,this,this.onScrollLongText,null,true,true)}};ProduceItem.prototype.onScrollLongText=function(){this.m_produceDesc.m_descText.x-=2;if(this.m_produceDesc.m_descText.x+this.m_produceDesc.m_descText.width<0){this.m_produceDesc.m_descText.x=this.m_produceDesc.width}};Object.defineProperty(ProduceItem.prototype,"isLongText",{get:function(){return this.m_produceDesc.m_descText.width>this.m_produceDesc.width},enumerable:true,configurable:true});ProduceItem.prototype.dispose=function(){this.stopTimeCutdown();Laya.timer.clear(this,this.onScrollLongText)};Object.defineProperty(ProduceItem.prototype,"currentItemNum",{get:function(){return ItemHelper.getItemNum(this.cfg.item)},enumerable:true,configurable:true});ProduceItem.prototype.setFirstLine=function(){this.m_curItemNumLb.visible=true;this.m_curItemNum.visible=true;this.m_storeBg.visible=true;if(this.isFirstLine){this.m_btn_upgrade.visible=false;this.m_avatarLoader.visible=false;this.m_btn_addAvatar.visible=false;this.m_btn_produce.m_num.text="0";this.m_curItemNumLb.visible=false;this.m_curItemNum.visible=false;this.m_storeBg.visible=false}};ProduceItem.prototype.refresh=function(){this.resetClientData();this.totalTime=this.getProcessTotalTime();this.timeProcessedlineNum=Math.floor(Game.time.getSubSecondsPre(this.data.startTime)/this.totalTime);var calcProduceLineNum=(this.data.processNum>this.timeProcessedlineNum?this.timeProcessedlineNum:this.data.processNum);this.processedlineNum=calcProduceLineNum;for(var i=0;i<calcProduceLineNum;i++){this.clientOutNum+=this.perOutputNum();this.clientProcessTime+=this.totalTime;if(this.checkOutputFull()){this.processedlineNum=i+1;break}}for(var i=0;i<this.processedlineNum;i++){if(this.m_produceLine.numChildren>0){this.m_produceLine.removeChildAt(0)}}if(this.isCanGetItem()){this.refreshOutput()}};ProduceItem.prototype.resetClientData=function(){this.processedlineNum=0;this.clientOutNum=0;this.clientProcessTime=0};ProduceItem.prototype.updateAssets=function(){if(this.cfg){this.m_curItemNum.text=ItemHelper.getItemNumFormat(this.cfg.item);var costNum=1;if(this.isFirstLine){costNum=0}if(!this.checkPaperEnough()){if(!this.isFirstLine){this.m_btn_produce.m_num.text="[color=#ff0000]"+costNum+"[/color]"}else{this.m_btn_produce.m_num.text="[color=#ffffff]"+costNum+"[/color]"}}else{this.m_btn_produce.m_num.text="[color=#ffffff]"+costNum+"[/color]"}}};ProduceItem.prototype.singleUpdate=function(){this.data=Game.moduleModel.produce.getProduce(this.produceId);this.refresh();if(this.data.processNum>0){this.updateTime()}this.setOutputItemText();this.setProcessLine()};ProduceItem.prototype.updateView=function(){this.data=Game.moduleModel.produce.getProduce(this.produceId);this.setActorAvatar(this.data.actorId);this.updateAssets()};ProduceItem.prototype.updateUpgrade=function(skillId){this.setProcessLine();this.refresh();this.data=Game.moduleModel.produce.getProduce(this.produceId);this.m_levelText.text=format(TEXT.ProduceLevel,this.data.level);this.setOutputItemText();if(skillId==ProduceSkillType.Output){this.updateTime()}this.setMaxProcessLine()};ProduceItem.prototype.updateGetReward=function(){this.data=Game.moduleModel.produce.getProduce(this.produceId);this.refresh();this.setProcessLine();this.disableGetItemView();this.updateTime()};ProduceItem.prototype.updateActor=function(actorId){this.data=Game.moduleModel.produce.getProduce(this.produceId);this.setActorAvatar(actorId)};ProduceItem.prototype.updateImmediateProduce=function(){this.data=Game.moduleModel.produce.getProduce(this.produceId);this.refresh();this.setProcessLine();this.enableGetItemView();this.updateTime()};ProduceItem.prototype.enableGetItemView=function(){this.m_cutTime.text="";this.m_btn_getItem.visible=true;this.m_item.visible=true;this.showGetItemEffect();this.setOutputItemText()};ProduceItem.prototype.disableGetItemView=function(){this.m_btn_getItem.visible=false;this.m_item.visible=false;this.hideGetItemEffect()};ProduceItem.prototype.showGetItemEffect=function(){this.m_effectFull.visible=true;var animTrans=this.m_itemIcon.getTransition("t1");if(animTrans){animTrans.play(null,-1,0)}};ProduceItem.prototype.hideGetItemEffect=function(){this.m_effectFull.visible=false;var animTrans=this.m_itemIcon.getTransition("t1");if(animTrans){animTrans.stop()}};ProduceItem.prototype.setOutputItemText=function(){if(this.checkOutputFull()){this.m_item.text="[color=#e02f2b]"+(this.data.itemNum+this.clientOutNum)+"/"+this.maxStorage+"[/color]"}else{this.m_item.text="[color=#50e38a]"+(this.data.itemNum+this.clientOutNum)+"/"+this.maxStorage+"[/color]"}};ProduceItem.prototype.updateTime=function(){if(this.data.processNum-this.processedlineNum>0&&!this.checkOutputFull()){this.startTimeCutdown()}else{this.stopTimeCutdown()}};ProduceItem.prototype.startTimeCutdown=function(){this.stopTimeCutdown();this.m_onProducing.visible=true;if(!this.isFirstLine){this.m_btn_timeEnd.visible=true}else{this.m_btn_timeEnd.visible=false}this.onProcessTimeCutDown();Laya.timer.loop(1000,this,this.onProcessTimeCutDown,null,true,true)};ProduceItem.prototype.stopTimeCutdown=function(){Laya.timer.clear(this,this.onProcessTimeCutDown);this.m_cutTime.text="";this.m_onProducing.visible=false};ProduceItem.prototype.onProcessTimeCutDown=function(){var curtimeProcessLineNum=Math.floor(Game.time.getSubSecondsPre(this.data.startTime+this.clientProcessTime)/this.totalTime);if(curtimeProcessLineNum>this.timeProcessedlineNum){this.timeProcessedlineNum=curtimeProcessLineNum;this.processedlineNum++;this.clientOutNum+=this.perOutputNum();this.clientProcessTime+=this.totalTime;if(this.data.processNum-this.processedlineNum<=0){this.stopTimeCutdown()}if(this.m_produceLine.numChildren>0){this.m_produceLine.removeChildAt(0)}this.refreshOutput()}else{this.cutDownTime=this.totalTime-Game.time.getSubSecondsPre(this.data.startTime+this.clientProcessTime)%this.totalTime;if(this.cutDownTime>0){this.immediateProduceCost=this.getImmediateProcessCost(this.cutDownTime,this.totalTime);this.updateImmediateProcessCost(this.cutDownTime,this.totalTime);this.m_cutTime.text=TimeHelper.TimeFormat3(this.cutDownTime)}}};ProduceItem.prototype.refreshOutput=function(){if(this.checkOutputFull()){this.stopTimeCutdown()}this.enableGetItemView()};ProduceItem.prototype.perOutputNum=function(){if(this.isFirstLine){var cfg=Game.config.produceSouvenir.getConfig(User.info.level);return cfg.once}var outputSkill=Game.moduleModel.produce.getProduceSkill(this.produceId,ProduceSkillType.Output);var baseOutput=Game.moduleModel.produce.getProduceLvEffect(outputSkill);var baseOutputFactor=100;if(this.data.outFactorList.length>0){baseOutputFactor=this.data.outFactorList.splice(0,1)[0]}var produceSkillFactor=1;if(this.data.actorId>0){var actorData=Game.moduleModel.actor.getActor(this.data.actorId);if(actorData){var effectSkills=actorData.getEffectSkills();for(var _i=0,effectSkills_1=effectSkills;_i<effectSkills_1.length;_i++){var effectSkill=effectSkills_1[_i];if(effectSkill.config.group_id==this.PRODUCE_SKILL_GROUP){produceSkillFactor=effectSkill.config.value}}}}return baseOutput*(baseOutputFactor/100)*produceSkillFactor};ProduceItem.prototype.getProcessTotalTime=function(){var cd=Game.config.produce.getConfig(this.data.produceId).cd;var skillOutput=this.data.produceSkillList[ProduceSkillType.Output-1];var extTime=Game.moduleModel.produce.getProduceLvEffect(skillOutput,1);var skillTime=this.data.produceSkillList[ProduceSkillType.Time-1];var reduceTime=Game.moduleModel.produce.getProduceLvEffect(skillTime);var calcTime=cd+extTime-reduceTime;if(calcTime<=0){calcTime=1}return calcTime};ProduceItem.prototype.setMaxProcessLine=function(){var pSkillProcess=Game.moduleModel.produce.getProduceSkill(this.produceId,ProduceSkillType.Process);if(pSkillProcess){var maxLine=Game.moduleModel.produce.getProduceLvEffect(pSkillProcess);this.m_produceMaxLine.removeChildrenToPool();for(var i=0;i<maxLine;i++){var line=this.m_produceMaxLine.addItemFromPool();this.m_produceMaxLine.addChild(line)}}};ProduceItem.prototype.setProcessLine=function(){this.m_produceLine.removeChildrenToPool();for(var i=0;i<this.data.processNum;i++){var lineItem=this.m_produceLine.addItemFromPool();this.m_produceLine.addChild(lineItem)}};Object.defineProperty(ProduceItem.prototype,"maxStorage",{get:function(){if(this.isFirstLine){var cfg=Game.config.produceSouvenir.getConfig(User.info.level);return cfg.max}var pSkillStorage=Game.moduleModel.produce.getProduceSkill(this.produceId,ProduceSkillType.Storage);if(pSkillStorage){var save=Game.moduleModel.produce.getProduceLvEffect(pSkillStorage);return save}return 0},enumerable:true,configurable:true});Object.defineProperty(ProduceItem.prototype,"isFirstLine",{get:function(){return this.produceId==this.FIRST_LINE},enumerable:true,configurable:true});ProduceItem.prototype.onUpgradeClick=function(){var produceUpdate=Produce.ProduceUpgrade.createInstance();produceUpdate.showForParent(this.produceId,this.grade)};ProduceItem.prototype.onTipsClick=function(){this.m_tip.visible=true;this.m_tip.setInfo(this.produceId);fairygui.GRoot.inst.showPopup(this.m_tip)};ProduceItem.prototype.onTimeEndClick=function(){if(ItemHelper.getItemNum(Proto.SE.EItemId.diamond)<this.immediateProduceCost){Game.system.openItemWay(Proto.SE.EItemId.diamond,this.immediateProduceCost);return}Game.protosender.manageProduce.cleanTime(this.produceId)};ProduceItem.prototype.onAddAvatar=function(){if(this.data.actorId==0){if(this.checkAddAvatarToProduce()){var actorListPanel=Produce.ProduceSelectActorPanel.createInstance();actorListPanel.showForParent(this.produceId)}}else{var offActorPanel=Produce.ProduceOffActor.createInstance();offActorPanel.show(this.produceId,this.data.actorId)}};ProduceItem.prototype.checkAddAvatarToProduce=function(){var buildIdLock=Game.config.global.getConfig(GlobalKey.produce_inspire_buildlock).value;var lineLevelLock=Game.config.global.getConfig(GlobalKey.produce_inspire_linelock).value;if(!Game.moduleModel.building.validataBuildLevel(buildIdLock)){var buildLevelCfg=Game.config.buildingLevel.getConfig(buildIdLock);if(buildLevelCfg){Game.system.toastText(Game.config.msg.getTxtFormat(MsgKey.produce_inspire_buildlock,buildLevelCfg.name,buildLevelCfg.level))}return false}if(this.data.level<lineLevelLock){Game.system.toastText(Game.config.msg.getTxtFormat(MsgKey.produce_inspire_linelock,lineLevelLock));return false}return true};ProduceItem.prototype.setActorAvatar=function(actorId){if(this.isFirstLine){return}var cfg=Game.config.actor.getConfig(actorId);if(cfg){this.m_btn_addAvatar.visible=false;var avatarCfg=Game.config.avatar.getConfig(cfg.avatar);this.m_avatarLoader.url=avatarCfg.bodyIconUrl;this.m_avatarLoader.onClick(this,this.onAddAvatar)}else{this.m_avatarLoader.url="";this.m_btn_addAvatar.visible=true}};ProduceItem.prototype.onGetItemClick=function(){Game.protosender.manageProduce.GetReward(this.produceId);var rewardList=new DTItemNum();rewardList.itemId=this.cfg.item;rewardList.itemNum=this.data.itemNum+this.clientOutNum;Games.Static.Instance.onResourceoutput([rewardList],"productEnd",this.produceId.toString())};ProduceItem.prototype.isCanGetItem=function(){return this.data.itemNum+this.clientOutNum>0};ProduceItem.prototype.getOutItemNum=function(){if(this.isCanGetItem()){return this.data.itemNum+this.clientOutNum}return 0};ProduceItem.prototype.onProduceClick=function(){if(!this.isFirstLine){if(!this.checkPaperEnough()){Game.system.openItemWay(this.PAPER_ID,1);return}}if(this.checkOutputFull()){Game.system.toastText(Game.config.msg.getTxt(MsgKey.produce_item_max));return}if(this.checkProcessLineFull()){if(this.isFirstLine){Game.system.toastText(Game.config.msg.getTxt(MsgKey.produce_special))}else{Game.system.toastText(Game.config.msg.getTxt(MsgKey.produce_line_max))}return}Game.protosender.manageProduce.Produce(this.produceId)};ProduceItem.prototype.checkAll=function(){if(!this.checkPaperEnough()){return false}if(this.checkOutputFull()){return false}if(this.checkProcessLineFull()){return false}return true};ProduceItem.prototype.checkPaperEnough=function(){return ItemHelper.getItemNum(this.PAPER_ID)>0};ProduceItem.prototype.checkOutputFull=function(){if(this.isFirstLine){var cfg=Game.config.produceSouvenir.getConfig(User.info.level);return this.data.itemNum+this.clientOutNum>=cfg.max}return this.data.itemNum+this.clientOutNum>=this.maxStorage};ProduceItem.prototype.checkProcessLineFull=function(){var pSkillProcess=Game.moduleModel.produce.getProduceSkill(this.produceId,ProduceSkillType.Process);if(pSkillProcess){var line=Game.moduleModel.produce.getProduceLvEffect(pSkillProcess);return this.data.processNum-this.processedlineNum>=line}return false};ProduceItem.prototype.checkStallLevelEnough=function(level){if(level===void 0){level=1003}var stall=User.info.stall;if(User.info.stall>=level){return true}return false};ProduceItem.prototype.updateImmediateProcessCost=function(cur,total){var costNum=this.getImmediateProcessCost(cur,total);var dt=total/cur;this.m_btn_timeEnd.m_num.text=costNum.toString()};ProduceItem.prototype.getImmediateProcessCost=function(cur,total){var costNum=0;var dt=total/cur;if(dt>=3){return 20}else{if(dt>=2&&dt<3){return 40}else{return 60}}};return ProduceItem}(Produce.ProduceItemStruct));Produce.ProduceItem=ProduceItem})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceLimitItemStruct=(function(_super){__extends(ProduceLimitItemStruct,_super);function ProduceLimitItemStruct(){return _super.call(this)||this}ProduceLimitItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ProduceLimitItem"))};ProduceLimitItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_nameText=(this.getChild("nameText"));this.m_descText=(this.getChild("descText"));this.m_timeText=(this.getChild("timeText"));this.m_itemIcon=(this.getChild("itemIcon"));this.m_itemNum=(this.getChild("itemNum"));this.m_btnUnlock=(this.getChild("btnUnlock"))};ProduceLimitItemStruct.URL="ui://eg7c5x5rfd65h";ProduceLimitItemStruct.DependPackages=["Produce","Common","Building"];return ProduceLimitItemStruct}(fairygui.GComponent));Produce.ProduceLimitItemStruct=ProduceLimitItemStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceLimitItem=(function(_super){__extends(ProduceLimitItem,_super);function ProduceLimitItem(){return _super!==null&&_super.apply(this,arguments)||this}ProduceLimitItem.prototype.setInfo=function(produceId,grade){this.produceId=produceId;this.grade=grade;this.cfg=Game.config.produce.getConfig(produceId);this.m_nameText.text=this.cfg.name;this.m_descText.text=this.cfg.tip;this.m_itemIcon.url=ItemHelper.getItemIcon(this.cfg.unlock_reward.itemId);this.m_itemNum.text=this.cfg.unlock_reward.itemNum.toString();this.m_timeText.text=format(TEXT.ProduceTime,TimeHelper.TimeFormat3(this.cfg.cd));this.m_btnUnlock.m_icon.url=ItemHelper.getItemIcon(this.cfg.unlock_gold.itemId);var isReadyUnlock=this.checkCanUnlock();if(!isReadyUnlock){FguiHelper.setGray(this.m_btnUnlock)}else{FguiHelper.clearFilters(this.m_btnUnlock)}if(this.checkPrevProduce()){this.m_btnUnlock.m_title.text=TEXT.ProduceUnlock}else{this.m_btnUnlock.m_title.text=TEXT.ProduceUnlock}this.m_btnUnlock.m_num.text=formatNumberUnit(this.cfg.unlock_gold.itemNum);this.m_btnUnlock.onClick(this,this.onProduceUnlock)};ProduceLimitItem.prototype.onProduceUnlock=function(){if(!this.checkLevel()||!this.checkBuild()){var buildCfg=Game.config.buildingLevel.getConfig(this.cfg.unlock_building);Game.system.toastText(Game.config.msg.getTxtFormat(MsgKey.produce_lock,this.cfg.unlock_level,buildCfg.name));return}if(!this.checkPrevProduce()){Game.system.toastText(Game.config.msg.getTxt(MsgKey.produce_pre_unlock));return}if(!this.checkCostEnough()){Game.system.openItemWay(this.cfg.unlock_gold.itemId,this.cfg.unlock_gold.itemNum);return}Game.protosender.manageProduce.Deblocking(this.produceId)};ProduceLimitItem.prototype.checkCanUnlock=function(){if(!this.checkLevel()||!this.checkBuild()||!this.checkPrevProduce()){return false}return this.checkCostEnough()};ProduceLimitItem.prototype.checkLevel=function(){return User.info.level>=Game.config.produce.getConfig(this.produceId).unlock_level};ProduceLimitItem.prototype.checkPrevProduce=function(){if(this.cfg.pre_id==0){return true}return Game.moduleModel.produce.hasProduce(this.cfg.pre_id)};ProduceLimitItem.prototype.checkCostEnough=function(){return ItemHelper.getItemNum(this.cfg.unlock_gold.itemId)>=this.cfg.unlock_gold.itemNum};ProduceLimitItem.prototype.checkBuild=function(){return Game.moduleModel.building.validataBuildLevel(this.cfg.unlock_building)};return ProduceLimitItem}(Produce.ProduceLimitItemStruct));Produce.ProduceLimitItem=ProduceLimitItem})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceOffActorStruct=(function(_super){__extends(ProduceOffActorStruct,_super);function ProduceOffActorStruct(){return _super.call(this)||this}ProduceOffActorStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ProduceOffActor"))};ProduceOffActorStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_actorName=(this.getChild("actorName"));this.m_starList=(this.getChild("starList"));this.m_actorIcon=(this.getChild("actorIcon"));this.m_bgmodel=(this.getChild("bgmodel"));this.m_commonPanel=(this.getChild("commonPanel"));this.m_btnOffActor=(this.getChild("btnOffActor"));this.m_attr1=(this.getChild("attr1"));this.m_attr2=(this.getChild("attr2"));this.m_attr3=(this.getChild("attr3"));this.m_attr4=(this.getChild("attr4"))};ProduceOffActorStruct.URL="ui://eg7c5x5regep1f";ProduceOffActorStruct.DependPackages=["Produce","System","Common"];return ProduceOffActorStruct}(fairygui.GComponent));Produce.ProduceOffActorStruct=ProduceOffActorStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceOffActor=(function(_super){__extends(ProduceOffActor,_super);function ProduceOffActor(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.attrs=[];return _this}ProduceOffActor.prototype.show=function(produceId,actorId,parent){this.produceId=produceId;this.actorId=actorId;this.actorData=Game.moduleModel.actor.getActor(actorId);Games.MenuLayer.module.addChild(this);this.setSize(fairygui.GRoot.inst.width,fairygui.GRoot.inst.height);this.addRelation(Games.MenuLayer.module,fairygui.RelationType.Size);Game.protoOkEvent.add(ProtoEventKey.manageProduce_SendActor,this.callBackSendActor,this);var produceCfg=Game.config.produce.getConfig(this.produceId);this.m_commonPanel.m_title.text=format(TEXT.ProduceOffActorTitle,produceCfg.name);this.m_actorIcon.url=Game.config.avatar.getConfig(this.actorData.config.avatar).bodyIconUrl;this.m_actorName.text=this.actorData.config.name;this.m_starList.touchable=false;this.m_starList.removeChildrenToPool();for(var i_1=0;i_1<this.actorData.star;i_1++){var star=this.m_starList.addItemFromPool();this.m_starList.addChild(star)}this.attrs.push(this.m_attr1);this.attrs.push(this.m_attr2);this.attrs.push(this.m_attr3);this.attrs.push(this.m_attr4);var props=this.actorData.getProps();var attrIndex=-1;for(var i=0;i<props.length;i++){var id=props[i];var config=Game.config.property.getConfig(id);var field=config.field;var value=this.actorData[field];if(value>0){attrIndex++;this.attrs[attrIndex].m_attrIcon.url=Game.config.avatar.getConfig(config.icon).iconUrl;this.attrs[attrIndex].m_attrValue.text=value}}this.m_btnOffActor.m_title.text=TEXT.ProduceOffActor;this.m_btnOffActor.onClick(this,this.onOffActorClick);this.m_commonPanel.m_closeBtn.onClick(this,this.onClose)};ProduceOffActor.prototype.onClose=function(){Game.protoOkEvent.remove(ProtoEventKey.manageProduce_SendActor,this.callBackSendActor,this);this.removeFromParent()};ProduceOffActor.prototype.callBackSendActor=function(proto){this.onClose()};ProduceOffActor.prototype.onOffActorClick=function(){Game.protosender.manageProduce.SendActor(this.produceId,0)};return ProduceOffActor}(Produce.ProduceOffActorStruct));Produce.ProduceOffActor=ProduceOffActor})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceRenderItemStruct=(function(_super){__extends(ProduceRenderItemStruct,_super);function ProduceRenderItemStruct(){return _super.call(this)||this}ProduceRenderItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ProduceRenderItem"))};ProduceRenderItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_activeItem=(this.getChild("activeItem"));this.m_inActiveItem=(this.getChild("inActiveItem"))};ProduceRenderItemStruct.URL="ui://eg7c5x5rek6818";ProduceRenderItemStruct.DependPackages=["Produce","Common","Fx"];return ProduceRenderItemStruct}(fairygui.GComponent));Produce.ProduceRenderItemStruct=ProduceRenderItemStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceRenderItem=(function(_super){__extends(ProduceRenderItem,_super);function ProduceRenderItem(){return _super!==null&&_super.apply(this,arguments)||this}ProduceRenderItem.prototype.setData=function(cfg,grade){this.produceId=cfg.id;this.grade=grade;this.m_activeItem.visible=false;this.m_inActiveItem.visible=false;if(this.isOpen){this.m_activeItem.visible=true;this.m_activeItem.setInfo(this.produceId,this.grade)}else{this.m_inActiveItem.visible=true;this.m_inActiveItem.setInfo(this.produceId,this.grade)}};Object.defineProperty(ProduceRenderItem.prototype,"isOpen",{get:function(){return Game.moduleModel.produce.hasProduce(this.produceId)},enumerable:true,configurable:true});Object.defineProperty(ProduceRenderItem.prototype,"activeItem",{get:function(){return this.m_activeItem},enumerable:true,configurable:true});ProduceRenderItem.prototype.updateAssets=function(){if(this.isOpen){this.m_activeItem.updateAssets()}};ProduceRenderItem.prototype.updateSingleProduce=function(){if(this.isOpen){this.m_activeItem.singleUpdate()}};ProduceRenderItem.prototype.updateProduce=function(){if(this.isOpen){this.m_activeItem.updateView()}else{this.m_inActiveItem.visible=true;this.m_inActiveItem.setInfo(this.produceId,this.grade)}};ProduceRenderItem.prototype.updateGetRewardView=function(){if(this.isOpen){this.m_activeItem.updateGetReward()}};ProduceRenderItem.prototype.updateLevelupView=function(skillId){if(this.isOpen){this.m_activeItem.updateUpgrade(skillId)}};ProduceRenderItem.prototype.updateActorView=function(skillId){if(this.isOpen){this.m_activeItem.updateActor(skillId)}};ProduceRenderItem.prototype.updateImmediateProduce=function(){if(this.isOpen){this.m_activeItem.updateImmediateProduce()}};Object.defineProperty(ProduceRenderItem.prototype,"produceItemIconPos",{get:function(){if(this.isOpen){return this.m_activeItem.m_itemIcon.displayObject.localToGlobal(new Point(0,0))}},enumerable:true,configurable:true});Object.defineProperty(ProduceRenderItem.prototype,"ProduceLinePos",{get:function(){if(this.isOpen){var produceLineNum=this.m_activeItem.m_produceLine.numChildren;if(produceLineNum>0){var lineIcon=this.m_activeItem.m_produceLine.getChildAt(0);var lineListPos=this.m_activeItem.m_produceLine.displayObject.localToGlobal(new Point(0,0));lineListPos.x+=produceLineNum*lineIcon.width-lineIcon.width;return lineListPos}}},enumerable:true,configurable:true});return ProduceRenderItem}(Produce.ProduceRenderItemStruct));Produce.ProduceRenderItem=ProduceRenderItem})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceSelectActorPanelStruct=(function(_super){__extends(ProduceSelectActorPanelStruct,_super);function ProduceSelectActorPanelStruct(){return _super.call(this)||this}ProduceSelectActorPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ProduceSelectActorPanel"))};ProduceSelectActorPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_txtTip1=(this.getChild("txtTip1"));this.m_txtTip2=(this.getChild("txtTip2"));this.m_typefilterList=(this.getChild("typefilterList"));this.m_bgmodel=(this.getChild("bgmodel"));this.m_commonDialog=(this.getChild("commonDialog"))};ProduceSelectActorPanelStruct.URL="ui://eg7c5x5rvw1q10";ProduceSelectActorPanelStruct.DependPackages=["Produce","System","Common"];return ProduceSelectActorPanelStruct}(fairygui.GComponent));Produce.ProduceSelectActorPanelStruct=ProduceSelectActorPanelStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceSelectActorPanel=(function(_super){__extends(ProduceSelectActorPanel,_super);function ProduceSelectActorPanel(){return _super!==null&&_super.apply(this,arguments)||this}ProduceSelectActorPanel.prototype.showForParent=function(produceId,selectCaller,parent){this.produceId=produceId;this.selectCaller=selectCaller;this.onProduceActorList=Game.moduleModel.produce.getActorList();if(parent==null){parent=Games.MenuLayer.module}parent.addChild(this);this.setSize(fairygui.GRoot.inst.width,fairygui.GRoot.inst.height);this.addRelation(parent,fairygui.RelationType.Size);this.m_commonDialog.m_title.text=TEXT.ProduceActorTitle;this.m_commonDialog.m_closeBtn.onClick(this,this.onClose);this.setFilterTypeList();this.setListContent();Game.protoOkEvent.add(ProtoEventKey.manageProduce_SendActor,this.callBackSendActor,this)};ProduceSelectActorPanel.prototype.callBackSendActor=function(proto){if(this.selectCaller){this.selectCaller(proto.actBaseId)}this.onClose()};ProduceSelectActorPanel.prototype.setFilterTypeList=function(){var cfg=Game.config.produce.getConfig(this.produceId);this.actorList=Game.moduleModel.actor.getActors();this.m_typefilterList.removeChildrenToPool();if(cfg){var propCfg=void 0;if(cfg.cheer_sex!=0){var item=this.m_typefilterList.addItemFromPool();propCfg=Game.config.property.getConfig(cfg.cheer_sex);item.m_loader.url=propCfg.iconUrl;this.m_typefilterList.addChild(item);this.actorList=this.actorList.filter(function(value,index,array){return value.config.sex==cfg.cheer_sex})}if(cfg.cheer_continents!=0){var item=this.m_typefilterList.addItemFromPool();propCfg=Game.config.property.getConfig(cfg.cheer_continents);item.m_loader.url=propCfg.iconUrl;this.m_typefilterList.addChild(item);this.actorList=this.actorList.filter(function(value,index,array){return value.config.country==cfg.cheer_continents})}if(cfg.cheer_age!=0){var item=this.m_typefilterList.addItemFromPool();propCfg=Game.config.property.getConfig(cfg.cheer_age);item.m_loader.url=propCfg.iconUrl;this.m_typefilterList.addChild(item);this.actorList=this.actorList.filter(function(value,index,array){return value.config.age_type==cfg.cheer_age})}if(cfg.cheer_type!=0){var item=this.m_typefilterList.addItemFromPool();propCfg=Game.config.property.getConfig(cfg.cheer_type);item.m_loader.url=propCfg.iconUrl;this.m_typefilterList.addChild(item);this.actorList=this.actorList.filter(function(value,index,array){return value.config.show_type==cfg.cheer_type})}}};ProduceSelectActorPanel.prototype.setListContent=function(){this.m_list.removeChildrenToPool();var i=-1;for(var _i=0,_a=this.actorList;_i<_a.length;_i++){var actor=_a[_i];i++;var item=this.m_list.addItemFromPool();item.setInfo(actor);item.isOnProduce=this.isActorOnProduce(actor.id);item.name=i.toString();this.m_list.addChild(item)}this.m_list.on(fairygui.Events.CLICK_ITEM,this,this.onAvatarSelected)};ProduceSelectActorPanel.prototype.isActorOnProduce=function(actorId){return this.onProduceActorList.indexOf(actorId)!=-1};ProduceSelectActorPanel.prototype.onAvatarSelected=function(e){Game.protosender.manageProduce.SendActor(this.produceId,e.data.id)};ProduceSelectActorPanel.prototype.onClose=function(){Game.protoOkEvent.remove(ProtoEventKey.manageProduce_SendActor,this.callBackSendActor,this);this.selectCaller=null;this.removeFromParent()};return ProduceSelectActorPanel}(Produce.ProduceSelectActorPanelStruct));Produce.ProduceSelectActorPanel=ProduceSelectActorPanel})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceTipStruct=(function(_super){__extends(ProduceTipStruct,_super);function ProduceTipStruct(){return _super.call(this)||this}ProduceTipStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ProduceTip"))};ProduceTipStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_baseAddNum=(this.getChild("baseAddNum"));this.m_itemIcon1=(this.getChild("itemIcon1"));this.m_itemIcon2=(this.getChild("itemIcon2"));this.m_actorAddNum=(this.getChild("actorAddNum"));this.m_actorProduceDesc=(this.getChild("actorProduceDesc"));this.m_GActor=(this.getChild("GActor"))};ProduceTipStruct.URL="ui://eg7c5x5rx9sk1a";ProduceTipStruct.DependPackages=["Produce","Common"];return ProduceTipStruct}(fairygui.GComponent));Produce.ProduceTipStruct=ProduceTipStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceTip=(function(_super){__extends(ProduceTip,_super);function ProduceTip(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.FIRST_LINE=100;_this.PRODUCE_SKILL_GROUP=1002;return _this}ProduceTip.prototype.setInfo=function(produceId){this.produceId=produceId;this.cfg=Game.config.produce.getConfig(this.produceId);this.m_itemIcon1.url=ItemHelper.getItemIcon(this.cfg.item);this.m_itemIcon2.url=ItemHelper.getItemIcon(this.cfg.item);this.data=Game.moduleModel.produce.getProduce(produceId);var outputSkill=Game.moduleModel.produce.getProduceSkill(this.produceId,Games.ProduceSkillType.Output);var baseOutput=Game.moduleModel.produce.getProduceLvEffect(outputSkill);this.m_GActor.visible=true;if(this.isFirstLine){var cfg=Game.config.produceSouvenir.getConfig(User.info.level);baseOutput=cfg.once;this.m_GActor.visible=false}this.m_baseAddNum.text=baseOutput.toString();this.m_actorAddNum.text=(baseOutput*1.5).toString()};ProduceTip.prototype.getActorOutputNum=function(){var outputSkill=Game.moduleModel.produce.getProduceSkill(this.produceId,Games.ProduceSkillType.Output);var baseOutput=Game.moduleModel.produce.getProduceLvEffect(outputSkill);var baseOutputFactor=100;if(this.data.outFactorList.length>0){baseOutputFactor=this.data.outFactorList[0]}var produceSkillFactor=1;if(this.data.actorId>0){var actorData=Game.moduleModel.actor.getActor(this.data.actorId);if(actorData){var effectSkills=actorData.getEffectSkills();for(var _i=0,effectSkills_1=effectSkills;_i<effectSkills_1.length;_i++){var effectSkill=effectSkills_1[_i];if(effectSkill.config.group_id==this.PRODUCE_SKILL_GROUP){produceSkillFactor=effectSkill.config.value}}}}return baseOutput*(baseOutputFactor/100)*produceSkillFactor};Object.defineProperty(ProduceTip.prototype,"isFirstLine",{get:function(){return this.produceId==this.FIRST_LINE},enumerable:true,configurable:true});return ProduceTip}(Produce.ProduceTipStruct));Produce.ProduceTip=ProduceTip})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceUpgradeStruct=(function(_super){__extends(ProduceUpgradeStruct,_super);function ProduceUpgradeStruct(){return _super.call(this)||this}ProduceUpgradeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ProduceUpgrade"))};ProduceUpgradeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_assetList=(this.getChild("assetList"));this.m_itemIcon=(this.getChild("itemIcon"));this.m_itemNum=(this.getChild("itemNum"));this.m_commonPanel=(this.getChild("commonPanel"))};ProduceUpgradeStruct.URL="ui://eg7c5x5re80ij";ProduceUpgradeStruct.DependPackages=["Produce","System","Common"];return ProduceUpgradeStruct}(fairygui.GComponent));Produce.ProduceUpgradeStruct=ProduceUpgradeStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceUpgrade=(function(_super){__extends(ProduceUpgrade,_super);function ProduceUpgrade(){return _super!==null&&_super.apply(this,arguments)||this}ProduceUpgrade.prototype.showForParent=function(produceId,grade,onUpgradeCaller,thisArgs,parent){this.produceId=produceId;this.grade=grade;this.onUpgradeCaller=onUpgradeCaller;this.thisArgs=thisArgs;this.data=Game.moduleModel.produce.getProduce(produceId);this.cfg=Game.config.produce.getConfig(this.produceId);if(parent==null){parent=Games.MenuLayer.module}parent.addChild(this);this.setSize(parent.width,parent.height);this.addRelation(parent,fairygui.RelationType.Size);var pLevelCfg=Game.config.produceLevel.getConfig(this.data.level);this.m_itemNum.text=formatNumberUnit(pLevelCfg.cost.itemNum);this.m_itemIcon.url=ItemHelper.getItemIcon(pLevelCfg.cost.itemId);this.m_commonPanel.m_closeBtn.onClick(this,this.onClose);Game.protoOkEvent.add(ProtoEventKey.manageProduce_Uplevel,this.onServerUplevel,this);this.update()};ProduceUpgrade.prototype.update=function(){this.data=Game.moduleModel.produce.getProduce(this.produceId);var pLevelCfg=Game.config.produceLevel.getConfig(this.data.level);this.m_itemNum.text=formatNumberUnit(pLevelCfg.cost.itemNum);this.m_commonPanel.m_title.text=this.cfg.name+"[color=#33ff33]  "+format(TEXT.Lv,this.data.level)+"[/color]";this.setList()};ProduceUpgrade.prototype.setList=function(){this.m_assetList.removeChildrenToPool();for(var i=0;i<this.data.produceSkillList.length;i++){var skill=this.data.produceSkillList[i];var pSkillItem=this.m_assetList.addItemFromPool();pSkillItem.setInfo(this.data.level,skill);pSkillItem.m_btnUpgradeLock.onClick(this,this.onLockClick,[skill]);pSkillItem.m_btnUpgradeSelect.onClick(this,this.onUpgradeClick,[skill]);this.m_assetList.addChild(pSkillItem)}};ProduceUpgrade.prototype.onServerUplevel=function(proto){this.update()};ProduceUpgrade.prototype.onLockClick=function(skill){if(this.cfg){var produceLv=Game.moduleModel.produce.getProduceLvLimit(skill);Game.system.toastText(Game.config.msg.getTxtFormat(MsgKey.produce_lv,this.cfg.name,produceLv))}};ProduceUpgrade.prototype.onUpgradeClick=function(skill){if(!this.checkCostEnough()){return}if(!this.checkhasBuild()){var pLevelCfg=Game.config.produceLevel.getConfig(this.data.level);var buildId=pLevelCfg.limit_grade[this.grade];var cfg=Game.config.buildingLevel.getConfig(buildId);Game.system.toastText(Game.config.msg.getTxtFormat(MsgKey.produce_produce_limit,cfg.name,cfg.level));return}Game.protosender.manageProduce.Uplevel(this.produceId,skill.id)};ProduceUpgrade.prototype.checkCostEnough=function(){var pLevelCfg=Game.config.produceLevel.getConfig(this.data.level);var result=ItemHelper.getItemNum(pLevelCfg.cost.itemId)>=pLevelCfg.cost.itemNum;if(!result){Game.system.openItemWay(pLevelCfg.cost.itemId,pLevelCfg.cost.itemNum)}return result};ProduceUpgrade.prototype.checkhasBuild=function(){var pLevelCfg=Game.config.produceLevel.getConfig(this.data.level);if(pLevelCfg){var buildId=pLevelCfg.limit_grade[this.grade];if(buildId==0){return true}return Game.moduleModel.building.validataBuildLevel(buildId)}return true};ProduceUpgrade.prototype.onClose=function(){Game.protoOkEvent.remove(ProtoEventKey.manageProduce_Uplevel,this.onServerUplevel,this);this.removeFromParent()};return ProduceUpgrade}(Produce.ProduceUpgradeStruct));Produce.ProduceUpgrade=ProduceUpgrade})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceUpgradeItemStruct=(function(_super){__extends(ProduceUpgradeItemStruct,_super);function ProduceUpgradeItemStruct(){return _super.call(this)||this}ProduceUpgradeItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","ProduceUpgradeItem"))};ProduceUpgradeItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_title=(this.getChild("title"));this.m_num=(this.getChild("num"));this.m_skill1=(this.getChild("skill1"));this.m_skill2=(this.getChild("skill2"));this.m_skill3=(this.getChild("skill3"));this.m_skill4=(this.getChild("skill4"));this.m_btnUpgradeLock=(this.getChild("btnUpgradeLock"));this.m_btnUpgradeSelect=(this.getChild("btnUpgradeSelect"))};ProduceUpgradeItemStruct.URL="ui://eg7c5x5re80is";ProduceUpgradeItemStruct.DependPackages=["Produce","Common"];return ProduceUpgradeItemStruct}(fairygui.GComponent));Produce.ProduceUpgradeItemStruct=ProduceUpgradeItemStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var ProduceUpgradeItem=(function(_super){__extends(ProduceUpgradeItem,_super);function ProduceUpgradeItem(){return _super!==null&&_super.apply(this,arguments)||this}ProduceUpgradeItem.prototype.setInfo=function(produceLevel,skill){this.m_title.text=Game.moduleModel.produce.getProduceSkillName[skill.id];this.m_num.text=this.getTypeNum(skill).toString();this.m_c1.setSelectedIndex(skill.id-1);var isOnLimit=Game.moduleModel.produce.checkProduceLvLimit(produceLevel,skill);if(isOnLimit){this.m_btnUpgradeLock.visible=true;this.m_btnUpgradeSelect.visible=false}else{this.m_btnUpgradeLock.visible=false;this.m_btnUpgradeSelect.visible=true}};ProduceUpgradeItem.prototype.getTypeNum=function(skill){var configId=skill.id*1000+skill.level;var cfg=Game.config.produceLv.getConfig(configId);if(cfg){return cfg.effect[0]}};return ProduceUpgradeItem}(Produce.ProduceUpgradeItemStruct));Produce.ProduceUpgradeItem=ProduceUpgradeItem})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var TabCircleListStruct=(function(_super){__extends(TabCircleListStruct,_super);function TabCircleListStruct(){return _super.call(this)||this}TabCircleListStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","TabCircleList"))};TabCircleListStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_cTab=this.getController("cTab");this.m_tab0=(this.getChild("tab0"));this.m_tab1=(this.getChild("tab1"));this.m_tab2=(this.getChild("tab2"))};TabCircleListStruct.URL="ui://eg7c5x5rpspr2f";TabCircleListStruct.DependPackages=["Produce"];return TabCircleListStruct}(fairygui.GComponent));Produce.TabCircleListStruct=TabCircleListStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var TabCircleList=(function(_super){__extends(TabCircleList,_super);function TabCircleList(){return _super!==null&&_super.apply(this,arguments)||this}return TabCircleList}(Produce.TabCircleListStruct));Produce.TabCircleList=TabCircleList})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var TabGradeStruct=(function(_super){__extends(TabGradeStruct,_super);function TabGradeStruct(){return _super.call(this)||this}TabGradeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Produce","TabGrade"))};TabGradeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};TabGradeStruct.URL="ui://eg7c5x5rfd651";TabGradeStruct.DependPackages=["Produce","Common"];return TabGradeStruct}(fairygui.GButton));Produce.TabGradeStruct=TabGradeStruct})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Produce;(function(Produce){var TabGrade=(function(_super){__extends(TabGrade,_super);function TabGrade(){return _super!==null&&_super.apply(this,arguments)||this}return TabGrade}(Produce.TabGradeStruct));Produce.TabGrade=TabGrade})(Produce=fgui.Produce||(fgui.Produce={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Rank;(function(Rank){var RankItemStruct=(function(_super){__extends(RankItemStruct,_super);function RankItemStruct(){return _super.call(this)||this}RankItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Rank","RankItem"))};RankItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_BG=this.getController("BG");this.m_Rank=this.getController("Rank");this.m_isMine=this.getController("isMine");this.m_txtRank=(this.getChild("txtRank"));this.m_txtMovie=(this.getChild("txtMovie"));this.m_txtName=(this.getChild("txtName"));this.m_icon=(this.getChild("icon"));this.m_btnSelect=(this.getChild("btnSelect"));this.m_btnPlayer=(this.getChild("btnPlayer"));this.m_btnMovie=(this.getChild("btnMovie"));this.m_aniBling=this.getTransition("aniBling")};RankItemStruct.URL="ui://pqepuo38pqkqj";RankItemStruct.DependPackages=["Rank","Common","WarMovie"];return RankItemStruct}(fairygui.GLabel));Rank.RankItemStruct=RankItemStruct})(Rank=fgui.Rank||(fgui.Rank={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Rank;(function(Rank){var RankItem=(function(_super){__extends(RankItem,_super);function RankItem(){return _super!==null&&_super.apply(this,arguments)||this}RankItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnMovie.onClick(this,this.OnBtnMovieClick);this.m_btnPlayer.onClick(this,this.OnBtnPlayerClick)};Object.defineProperty(RankItem.prototype,"rank",{set:function(num){if(num<=3&&num>0){this.m_Rank.setSelectedIndex(num)}else{this.m_Rank.setSelectedIndex(0);this.m_txtRank.text=num.toString()}},enumerable:true,configurable:true});RankItem.prototype.Render=function(rankData){this.rankData=rankData;if(this.rankData){this.rank=rankData.rank;this.icon=this.rankData.playerIconUrl;this.m_txtName.text=rankData.desc.name;this.m_txtMovie.text=this.rankData.desc.totalBoxOffice>0?formatNumberUnit(this.rankData.desc.totalBoxOffice):"";this.m_btnMovie.icon=Game.config.story.GetPoster(rankData.desc.movieId);this.m_btnMovie.visible=this.rankData.desc.movieId!=0;var userRank=Game.moduleModel.rank.SelfServerRankData;if(User.account.userId==this.rankData.desc.userId){this.icon=User.headIconUrl;this.m_BG.setSelectedIndex(1);this.m_isMine.setSelectedIndex(1)}else{this.m_BG.setSelectedIndex(0);this.m_isMine.setSelectedIndex(0)}}};RankItem.prototype.OnBtnMovieClick=function(){if(this.rankData.desc.movieUuid){var movieData=Game.moduleModel.rank.GetMovieShort(this.rankData.desc.movieUuid);if(movieData){Game.system.movieInfo(movieData)}else{Game.system.movieInfo(this.rankData.desc.movieUuid)}}};RankItem.prototype.OnBtnPlayerClick=function(){if(this.rankData.desc.userId){var playerData=Game.moduleModel.rank.GetPlayerShortData(this.rankData.desc.userId);if(playerData){Game.system.playerInfo(playerData)}else{Game.system.playerInfo(this.rankData.desc.userId)}}};return RankItem}(Rank.RankItemStruct));Rank.RankItem=RankItem})(Rank=fgui.Rank||(fgui.Rank={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Rank;(function(Rank){var RankMainPanelStruct=(function(_super){__extends(RankMainPanelStruct,_super);function RankMainPanelStruct(){return _super.call(this)||this}RankMainPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Rank","RankMainPanel"))};RankMainPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_rankList=(this.getChild("rankList"));this.m_name=(this.getChild("name"));this.m_txtChangeName=(this.getChild("txtChangeName"));this.m_userRank=(this.getChild("userRank"));this.m_marquee=(this.getChild("marquee"));this.m_btnChangeName=(this.getChild("btnChangeName"));this.m_btnHelp=(this.getChild("btnHelp"));this.m_btnClose=(this.getChild("btnClose"));this.m_rank3=(this.getChild("rank3"));this.m_rank2=(this.getChild("rank2"));this.m_rank1=(this.getChild("rank1"))};RankMainPanelStruct.URL="ui://pqepuo38pqkq0";RankMainPanelStruct.DependPackages=["Rank","Common"];return RankMainPanelStruct}(fairygui.GComponent));Rank.RankMainPanelStruct=RankMainPanelStruct})(Rank=fgui.Rank||(fgui.Rank={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Rank;(function(Rank){var RankMainPanel=(function(_super){__extends(RankMainPanel,_super);function RankMainPanel(){return _super!==null&&_super.apply(this,arguments)||this}RankMainPanel.prototype.onWindowInited=function(){this.m_btnClose.onClick(this,this.OnBtnCloseClick);this.m_btnHelp.onClick(this,this.OnBtnHelpClick);this.m_btnChangeName.onClick(this,this.OnBtnChangeName);this.m_rankList.itemRenderer=new Handler(this,this.RenderRankItem,null,false);this.m_rankList.setVirtual();this.m_marquee.onWindowInited()};RankMainPanel.prototype.onWindowDestory=function(){this.m_marquee.onWindowDestory()};RankMainPanel.prototype.onWindowOpen=function(){var arg=[];for(var _i=0;_i<arguments.length;_i++){arg[_i]=arguments[_i]}this.UpdateView();Game.protosender.rank.GetServerRankList()};RankMainPanel.prototype.onWindowShow=function(){this.m_marquee.Show();Game.protoOkEvent.add(ProtoEventKey.rank_GetServerRankList,this.OnRankGetServerRankList,this);Game.protoOkEvent.add(ProtoEventKey.SelfRankListDesc,this.UpdateView,this);Game.protoOkEvent.add(ProtoEventKey.rank_ChangeServerName,this.UpdateView,this);Game.protoOkEvent.add(ProtoEventKey.rank_GetServerListReward,this.UpdateView,this)};RankMainPanel.prototype.onWindowHide=function(){this.m_marquee.Hide();Game.protoOkEvent.remove(ProtoEventKey.rank_GetServerRankList,this.OnRankGetServerRankList,this);Game.protoOkEvent.remove(ProtoEventKey.SelfRankListDesc,this.UpdateView,this);Game.protoOkEvent.remove(ProtoEventKey.rank_ChangeServerName,this.UpdateView,this);Game.protoOkEvent.remove(ProtoEventKey.rank_GetServerListReward,this.UpdateView,this)};RankMainPanel.prototype.UpdateView=function(){this.m_name.text=Game.moduleModel.rank.ServerName;this.rankList=Game.moduleModel.rank.ServerRankList;if(this.rankList.length>=1){this.m_rank1.visible=true;this.m_rank1.Render(this.rankList[0]);this.m_rank1.m_BG.setSelectedIndex(1)}else{this.m_rank1.visible=false}if(this.rankList.length>=2){this.m_rank2.visible=true;this.m_rank2.Render(this.rankList[1]);this.m_rank2.m_BG.setSelectedIndex(1)}else{this.m_rank2.visible=false}if(this.rankList.length>=3){this.m_rank3.visible=true;this.m_rank3.Render(this.rankList[2]);this.m_rank3.m_BG.setSelectedIndex(1)}else{this.m_rank3.visible=false}if(this.rankList.length>3){this.m_rankList.numItems=this.rankList.length-3;this.m_rankList.refreshVirtualList()}else{this.m_rankList.numItems=0}this.m_userRank.Render(Game.moduleModel.rank.SelfServerRankData);var msgList=[Game.config.msg.getTxt(MsgKey.ranking_list_tips1),Game.config.msg.getTxt(MsgKey.ranking_list_tips2)];this.m_marquee.UpdateView(msgList)};RankMainPanel.prototype.RenderRankItem=function(index,item){var data=this.rankList[index+3];item.Render(data)};RankMainPanel.prototype.OnBtnHelpClick=function(){this.moduleWindow.openSubwindowByIndex("rankReward",true)};RankMainPanel.prototype.OnBtnCloseClick=function(){this.moduleWindow.menuClose()};RankMainPanel.prototype.OnBtnChangeName=function(){if(Game.moduleModel.rank.CanChangeName){Game.system.rename("",this,this.OnChangeName,Game.moduleModel.rank.ServerName)}};RankMainPanel.prototype.OnRankGetServerRankList=function(){this.UpdateView()};RankMainPanel.prototype.OnChangeName=function(newName){Game.protosender.rank.ChangeServerName(Game.moduleModel.rank.ServerUuid,newName)};RankMainPanel.prototype.onChangeServerNameResponse=function(){Game.protosender.rank.GetSelfList()};return RankMainPanel}(Rank.RankMainPanelStruct));Rank.RankMainPanel=RankMainPanel})(Rank=fgui.Rank||(fgui.Rank={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Rank;(function(Rank){var RankRewardItemStruct=(function(_super){__extends(RankRewardItemStruct,_super);function RankRewardItemStruct(){return _super.call(this)||this}RankRewardItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Rank","RankRewardItem"))};RankRewardItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_txtRank=(this.getChild("txtRank"));this.m_listReward=(this.getChild("listReward"))};RankRewardItemStruct.URL="ui://pqepuo38pqkqk";RankRewardItemStruct.DependPackages=["Rank","WarMovie","Common"];return RankRewardItemStruct}(fairygui.GComponent));Rank.RankRewardItemStruct=RankRewardItemStruct})(Rank=fgui.Rank||(fgui.Rank={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Rank;(function(Rank){var RankRewardItem=(function(_super){__extends(RankRewardItem,_super);function RankRewardItem(){return _super!==null&&_super.apply(this,arguments)||this}RankRewardItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_listReward.itemRenderer=new Handler(this,this.RenderRewardItem,null,false)};RankRewardItem.prototype.Render=function(serverRewardData){this.serverRewardData=serverRewardData;if(this.serverRewardData==null){return}this.m_txtRank.text=this.serverRewardData.stringRank;this.m_listReward.numItems=this.serverRewardData.rewardList.length};RankRewardItem.prototype.RenderRewardItem=function(index,obj){var data=this.serverRewardData.rewardList[index];obj.m_num.text=formatNumberUnit(data.itemNum);obj.icon=data.itemIconUrl;obj.m_star.starNum=data.itemStar;obj.PopupInfo=data.itemId};return RankRewardItem}(Rank.RankRewardItemStruct));Rank.RankRewardItem=RankRewardItem})(Rank=fgui.Rank||(fgui.Rank={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Rank;(function(Rank){var RankRewardPanelStruct=(function(_super){__extends(RankRewardPanelStruct,_super);function RankRewardPanelStruct(){return _super.call(this)||this}RankRewardPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Rank","RankRewardPanel"))};RankRewardPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_listRanKReward=(this.getChild("listRanKReward"));this.m_btnClose=(this.getChild("btnClose"));this.m_txtTip=(this.getChild("txtTip"))};RankRewardPanelStruct.URL="ui://pqepuo38pqkq4";RankRewardPanelStruct.DependPackages=["Rank","Common"];return RankRewardPanelStruct}(fairygui.GComponent));Rank.RankRewardPanelStruct=RankRewardPanelStruct})(Rank=fgui.Rank||(fgui.Rank={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Rank;(function(Rank){var RankRewardPanel=(function(_super){__extends(RankRewardPanel,_super);function RankRewardPanel(){return _super!==null&&_super.apply(this,arguments)||this}RankRewardPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnClose.onClick(this,this.OnBtnCloseClick);this.m_listRanKReward.itemRenderer=new Handler(this,this.RenderItem,null,false);this.m_listRanKReward.setVirtual()};RankRewardPanel.prototype.OnWindowOpen=function(){this.UpdateView()};RankRewardPanel.prototype.UpdateView=function(){this.serverRewardList=Game.moduleModel.rank.RankRewardList;this.m_listRanKReward.numItems=this.serverRewardList.length;this.m_txtTip.title=Game.config.msg.getTxt(MsgKey.ranking_list_instruction1)+"\n"+Game.config.msg.getTxt(MsgKey.ranking_list_instruction2)+"\n"+Game.config.msg.getTxt(MsgKey.ranking_list_instruction3)};RankRewardPanel.prototype.RenderItem=function(index,obj){var data=this.serverRewardList[index];obj.Render(data)};RankRewardPanel.prototype.OnBtnCloseClick=function(){this.moduleWindow.closeSelf()};return RankRewardPanel}(Rank.RankRewardPanelStruct));Rank.RankRewardPanel=RankRewardPanel})(Rank=fgui.Rank||(fgui.Rank={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Rank;(function(Rank){var UserRankStruct=(function(_super){__extends(UserRankStruct,_super);function UserRankStruct(){return _super.call(this)||this}UserRankStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Rank","UserRank"))};UserRankStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_hasGetReward=this.getController("hasGetReward");this.m_listReward=(this.getChild("listReward"));this.m_txtName=(this.getChild("txtName"));this.m_txtMovie=(this.getChild("txtMovie"));this.m_txtRank=(this.getChild("txtRank"));this.m_btnReward=(this.getChild("btnReward"));this.m_btnMovie=(this.getChild("btnMovie"))};UserRankStruct.URL="ui://pqepuo38pqkqn";UserRankStruct.DependPackages=["Rank","Common"];return UserRankStruct}(fairygui.GComponent));Rank.UserRankStruct=UserRankStruct})(Rank=fgui.Rank||(fgui.Rank={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Rank;(function(Rank){var UserRank=(function(_super){__extends(UserRank,_super);function UserRank(){return _super!==null&&_super.apply(this,arguments)||this}UserRank.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnMovie.onClick(this,this.OnBtnMovieClick);this.m_btnReward.onClick(this,this.OnBtnRewardClick);this.m_listReward.itemRenderer=new Handler(this,this.RenderRewardItem,null,false)};UserRank.prototype.Render=function(rankData){this.rankData=rankData;if(this.rankData==null){this.m_btnMovie.visible=false;this.m_txtRank.text="";this.m_txtName.text="";this.m_txtMovie.text="";this.m_listReward.numItems=0;return}this.m_txtRank.text=this.rankData.rank.toString();if(this.rankData.desc.movieId!=0){this.m_txtName.text=this.rankData.desc.movieName;this.m_txtMovie.text=formatNumberUnit(this.rankData.desc.totalBoxOffice||0,this.rankData.desc.totalBoxOffice>1000?1:0);this.m_btnMovie.icon=Game.config.story.GetPoster(rankData.desc.movieId);this.m_btnMovie.visible=true}else{this.m_btnMovie.visible=false;this.m_txtName.text="";this.m_txtMovie.text="";this.m_listReward.numItems=0}this.lastRewardList=Game.moduleModel.rank.LastRewardList;this.m_listReward.numItems=this.lastRewardList.length;if(Game.moduleModel.rank.hasGetLastReward){this.m_hasGetReward.setSelectedIndex(1)}else{this.m_hasGetReward.setSelectedIndex(0);this.m_btnReward.enabled=this.lastRewardList.length>0}};UserRank.prototype.RenderRewardItem=function(index,obj){if(this.rankData==null){return}var data=this.lastRewardList[index];obj.title=data.itemNumTxt;obj.m_star.starNum=data.itemStar;obj.icon=Games.ItemData.GetIconUrl(data.itemId);obj.PopupInfo=data.itemId};UserRank.prototype.OnBtnMovieClick=function(){if(this.rankData==null){return}var movieData=Game.moduleModel.rank.GetMovieShort(this.rankData.desc.movieUuid);if(movieData){Game.system.movieInfo(movieData)}else{if(this.rankData.desc.movieUuid){Game.protosender.rank.GetMovieShortData(this.rankData.desc.movieUuid)}}};UserRank.prototype.OnBtnRewardClick=function(){if(this.rankData==null){return}if(Game.moduleModel.rank.CanGetReward){Game.protosender.rank.GetServerListReward(Game.moduleModel.rank.ServerUuid)}};return UserRank}(Rank.UserRankStruct));Rank.UserRank=UserRank})(Rank=fgui.Rank||(fgui.Rank={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var ActorCircleItemStruct=(function(_super){__extends(ActorCircleItemStruct,_super);function ActorCircleItemStruct(){return _super.call(this)||this}ActorCircleItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","ActorCircleItem"))};ActorCircleItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};ActorCircleItemStruct.URL="ui://mu4e45moh9ou1e";ActorCircleItemStruct.DependPackages=["Street"];return ActorCircleItemStruct}(fairygui.GLabel));Street.ActorCircleItemStruct=ActorCircleItemStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var ActorCircleItem=(function(_super){__extends(ActorCircleItem,_super);function ActorCircleItem(){return _super!==null&&_super.apply(this,arguments)||this}return ActorCircleItem}(Street.ActorCircleItemStruct));Street.ActorCircleItem=ActorCircleItem})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var BtnBackStruct=(function(_super){__extends(BtnBackStruct,_super);function BtnBackStruct(){return _super.call(this)||this}BtnBackStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","BtnBack"))};BtnBackStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};BtnBackStruct.URL="ui://mu4e45modo332c";BtnBackStruct.DependPackages=["Street"];return BtnBackStruct}(fairygui.GButton));Street.BtnBackStruct=BtnBackStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var BtnBack=(function(_super){__extends(BtnBack,_super);function BtnBack(){return _super!==null&&_super.apply(this,arguments)||this}return BtnBack}(Street.BtnBackStruct));Street.BtnBack=BtnBack})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var CinemaIconStruct=(function(_super){__extends(CinemaIconStruct,_super);function CinemaIconStruct(){return _super.call(this)||this}CinemaIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","CinemaIcon"))};CinemaIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_level=this.getController("level");this.m_icon=(this.getChild("icon"));this.m_lv=(this.getChild("lv"))};CinemaIconStruct.URL="ui://mu4e45moky79x";CinemaIconStruct.DependPackages=["Street"];return CinemaIconStruct}(fairygui.GLabel));Street.CinemaIconStruct=CinemaIconStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var CinemaIcon=(function(_super){__extends(CinemaIcon,_super);function CinemaIcon(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(CinemaIcon.prototype,"Level",{set:function(lv){if(lv>5){lv=4;console.log("Cinema signLevel: :",lv)}if(lv<1){lv=1;console.log("Cinema signLevel: :",lv)}this.m_level.setSelectedIndex(5-lv)},enumerable:true,configurable:true});return CinemaIcon}(Street.CinemaIconStruct));Street.CinemaIcon=CinemaIcon})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var CinemaItemStruct=(function(_super){__extends(CinemaItemStruct,_super);function CinemaItemStruct(){return _super.call(this)||this}CinemaItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","CinemaItem"))};CinemaItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_level=this.getController("level");this.m_title=(this.getChild("title"));this.m_num=(this.getChild("num"));this.m_icon=(this.getChild("icon"))};CinemaItemStruct.URL="ui://mu4e45moky79z";CinemaItemStruct.DependPackages=["Street"];return CinemaItemStruct}(fairygui.GLabel));Street.CinemaItemStruct=CinemaItemStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var CinemaItem=(function(_super){__extends(CinemaItem,_super);function CinemaItem(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(CinemaItem.prototype,"Level",{set:function(lv){if(lv>5){lv=4;console.log("Cinema signLevel: :",lv)}if(lv<1){lv=1;console.log("Cinema signLevel: :",lv)}this.m_icon.Level=lv},enumerable:true,configurable:true});return CinemaItem}(Street.CinemaItemStruct));Street.CinemaItem=CinemaItem})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var CinemaItem_llittleStruct=(function(_super){__extends(CinemaItem_llittleStruct,_super);function CinemaItem_llittleStruct(){return _super.call(this)||this}CinemaItem_llittleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","CinemaItem_llittle"))};CinemaItem_llittleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_level=this.getController("level");this.m_title=(this.getChild("title"));this.m_num=(this.getChild("num"));this.m_icon=(this.getChild("icon"))};CinemaItem_llittleStruct.URL="ui://mu4e45moky7910";CinemaItem_llittleStruct.DependPackages=["Street"];return CinemaItem_llittleStruct}(fairygui.GLabel));Street.CinemaItem_llittleStruct=CinemaItem_llittleStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var CinemaItem_llittle=(function(_super){__extends(CinemaItem_llittle,_super);function CinemaItem_llittle(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(CinemaItem_llittle.prototype,"Level",{set:function(lv){if(lv>5){lv=4;console.log("Cinema signLevel: :",lv)}if(lv<1){lv=1;console.log("Cinema signLevel: :",lv)}this.m_icon.Level=lv},enumerable:true,configurable:true});return CinemaItem_llittle}(Street.CinemaItem_llittleStruct));Street.CinemaItem_llittle=CinemaItem_llittle})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var CinemaSelectItemStruct=(function(_super){__extends(CinemaSelectItemStruct,_super);function CinemaSelectItemStruct(){return _super.call(this)||this}CinemaSelectItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","CinemaSelectItem"))};CinemaSelectItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_txtCinemaNums=(this.getChild("txtCinemaNums"));this.m_txtLike=(this.getChild("txtLike"));this.m_cinemaIcon=(this.getChild("cinemaIcon"))};CinemaSelectItemStruct.URL="ui://mu4e45moky790";CinemaSelectItemStruct.DependPackages=["Street","WarMovie","Common"];return CinemaSelectItemStruct}(fairygui.GButton));Street.CinemaSelectItemStruct=CinemaSelectItemStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var CinemaSelectItem=(function(_super){__extends(CinemaSelectItem,_super);function CinemaSelectItem(){return _super!==null&&_super.apply(this,arguments)||this}CinemaSelectItem.prototype.Render=function(cinemaId){this.cinemaId=cinemaId;var cfg=Game.config.cinema.getConfig(cinemaId);if(cfg){this.m_cinemaIcon.icon=cfg.iconUrl;this.m_cinemaIcon.Level=cfg.sign_level;this.m_txtCinemaNums.text=formatNumberUnit(cfg.num);this.m_txtLike.text=cfg.favoriteActor}};return CinemaSelectItem}(Street.CinemaSelectItemStruct));Street.CinemaSelectItem=CinemaSelectItem})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var CircleIconStruct=(function(_super){__extends(CircleIconStruct,_super);function CircleIconStruct(){return _super.call(this)||this}CircleIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","circleIcon"))};CircleIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};CircleIconStruct.URL="ui://mu4e45modo332d";CircleIconStruct.DependPackages=["Street"];return CircleIconStruct}(fairygui.GComponent));Street.CircleIconStruct=CircleIconStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var CircleIcon=(function(_super){__extends(CircleIcon,_super);function CircleIcon(){return _super!==null&&_super.apply(this,arguments)||this}return CircleIcon}(Street.CircleIconStruct));Street.CircleIcon=CircleIcon})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var MenuIconStruct=(function(_super){__extends(MenuIconStruct,_super);function MenuIconStruct(){return _super.call(this)||this}MenuIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","MenuIcon"))};MenuIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};MenuIconStruct.URL="ui://mu4e45moh9ou14";MenuIconStruct.DependPackages=["Street","Common"];return MenuIconStruct}(fairygui.GButton));Street.MenuIconStruct=MenuIconStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var MenuIcon=(function(_super){__extends(MenuIcon,_super);function MenuIcon(){return _super!==null&&_super.apply(this,arguments)||this}return MenuIcon}(Street.MenuIconStruct));Street.MenuIcon=MenuIcon})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var RankGroupItemStruct=(function(_super){__extends(RankGroupItemStruct,_super);function RankGroupItemStruct(){return _super.call(this)||this}RankGroupItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","RankGroupItem"))};RankGroupItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_BG=this.getController("BG");this.m_Rank=this.getController("Rank");this.m_isMine=this.getController("isMine");this.m_hasReward=this.getController("hasReward");this.m_txtRank=(this.getChild("txtRank"));this.m_txtMovie=(this.getChild("txtMovie"));this.m_txtName=(this.getChild("txtName"));this.m_icon=(this.getChild("icon"));this.m_btnPlayer=(this.getChild("btnPlayer"));this.m_labReward=(this.getChild("labReward"));this.m_btnCongratulate=(this.getChild("btnCongratulate"));this.m_aniBling=this.getTransition("aniBling")};RankGroupItemStruct.URL="ui://mu4e45moh9ou1i";RankGroupItemStruct.DependPackages=["Street","Common","WarMovie","Cooperation"];return RankGroupItemStruct}(fairygui.GLabel));Street.RankGroupItemStruct=RankGroupItemStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var RankGroupItem=(function(_super){__extends(RankGroupItem,_super);function RankGroupItem(){return _super!==null&&_super.apply(this,arguments)||this}RankGroupItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnCongratulate.onClick(this,this.OnBtnCongratulateClick);this.m_btnPlayer.onClick(this,this.OnBtnPlayerClick)};RankGroupItem.prototype.Render=function(rankData){this.rankData=rankData;if(this.rankData){this.rank=this.rankData.rank;this.icon=this.rankData.playerIconUrl;this.m_txtName.text=this.rankData.desc.name;this.m_txtMovie.text=this.rankData.desc.totalBoxOffice>0?formatNumberUnit(this.rankData.desc.totalBoxOffice):"";var userRank=Game.moduleModel.rank.SelfGroupRankData;if(User.account.userId==this.rankData.desc.userId){this.icon=User.headIconUrl;this.m_txtName.text=User.info.name;this.m_BG.setSelectedIndex(1);this.m_isMine.setSelectedIndex(1)}else{this.m_BG.setSelectedIndex(0);this.m_isMine.setSelectedIndex(0)}this.m_hasReward.setSelectedIndex(this.rankData.hasReward?1:0);if(this.rankData.hasReward){this.m_labReward.PopupInfo=this.rankData.extraReward.itemId;this.m_labReward.title=""}if(this.rankData.canCongratulate){this.m_btnCongratulate.visible=true;var cd=Game.moduleModel.street.gronpRankCongratulateCD;if(cd>0){this.m_btnCongratulate.enabled=false}else{this.m_btnCongratulate.enabled=true}}else{this.m_btnCongratulate.visible=false}}};RankGroupItem.prototype.OnBtnPlayerClick=function(){if(this.rankData.desc.userId){var playerData=Game.moduleModel.rank.GetPlayerShortData(this.rankData.desc.userId);if(playerData){Game.system.playerInfo(playerData)}else{Game.system.playerInfo(this.rankData.desc.userId)}}};RankGroupItem.prototype.OnBtnCongratulateClick=function(){var cd=Game.moduleModel.street.gronpRankCongratulateCD;if(cd<=0){if(this.rankData.desc.userId==User.account.userId){Game.system.toastText(Games.TEXT.StreetCongratulateSelf);return}Game.protosender.rank.GetStreetReward(1000+this.rankData.rank)}};Object.defineProperty(RankGroupItem.prototype,"rank",{set:function(num){if(num<=3&&num>0){this.m_Rank.setSelectedIndex(num)}else{this.m_Rank.setSelectedIndex(0);this.m_txtRank.text=num.toString()}},enumerable:true,configurable:true});RankGroupItem.prototype.OnTick=function(residue_times){if(this.m_btnCongratulate.m_time.visible){this.m_btnCongratulate.m_time.text=TimeHelper.TimeFormat(residue_times);return}};return RankGroupItem}(Street.RankGroupItemStruct));Street.RankGroupItem=RankGroupItem})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var RankGroupMovieItemStruct=(function(_super){__extends(RankGroupMovieItemStruct,_super);function RankGroupMovieItemStruct(){return _super.call(this)||this}RankGroupMovieItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","RankGroupMovieItem"))};RankGroupMovieItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_BG=this.getController("BG");this.m_Rank=this.getController("Rank");this.m_isMine=this.getController("isMine");this.m_txtRank=(this.getChild("txtRank"));this.m_txtMovieName=(this.getChild("txtMovieName"));this.m_txtName=(this.getChild("txtName"));this.m_txtMovie=(this.getChild("txtMovie"));this.m_btnMovie=(this.getChild("btnMovie"));this.m_btnCongratulate=(this.getChild("btnCongratulate"));this.m_aniBling=this.getTransition("aniBling")};RankGroupMovieItemStruct.URL="ui://mu4e45moh9ou1q";RankGroupMovieItemStruct.DependPackages=["Street","Common","WarMovie"];return RankGroupMovieItemStruct}(fairygui.GLabel));Street.RankGroupMovieItemStruct=RankGroupMovieItemStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var RankGroupMovieItem=(function(_super){__extends(RankGroupMovieItem,_super);function RankGroupMovieItem(){return _super!==null&&_super.apply(this,arguments)||this}RankGroupMovieItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnCongratulate.onClick(this,this.OnBtnCongratulateClick);this.m_btnMovie.onClick(this,this.OnBtnMovieClick)};RankGroupMovieItem.prototype.Render=function(rankData){this.rankData=rankData;if(this.rankData){this.rank=this.rankData.rank;this.m_txtName.text=this.rankData.desc.name;this.m_txtMovie.text=this.rankData.desc.totalBoxOffice>0?formatNumberUnit(this.rankData.desc.totalBoxOffice):"";this.m_btnMovie.icon=Game.config.story.GetPoster(this.rankData.desc.movieId);this.m_btnMovie.visible=this.rankData.desc.movieId!=0;this.m_txtMovieName.text=this.rankData.desc.movieName;if(User.account.userId==this.rankData.desc.userId){this.m_txtName.text=User.info.name;this.m_BG.setSelectedIndex(1);this.m_isMine.setSelectedIndex(1)}else{this.m_BG.setSelectedIndex(0);this.m_isMine.setSelectedIndex(0)}if(this.rankData.canCongratulate){this.m_btnCongratulate.visible=true;var cd=Game.moduleModel.street.groupMovieRankCongratulateCD;if(cd>0){this.m_btnCongratulate.enabled=false}else{this.m_btnCongratulate.enabled=true}}else{this.m_btnCongratulate.visible=false}}};Object.defineProperty(RankGroupMovieItem.prototype,"rank",{set:function(num){if(num<=3&&num>0){this.m_Rank.setSelectedIndex(num)}else{this.m_Rank.setSelectedIndex(0);this.m_txtRank.text=num.toString()}},enumerable:true,configurable:true});RankGroupMovieItem.prototype.OnBtnMovieClick=function(){if(this.rankData.desc.movieUuid){var movieData=Game.moduleModel.rank.GetMovieShort(this.rankData.desc.movieUuid);if(movieData){Game.system.movieInfo(movieData)}else{Game.system.movieInfo(this.rankData.desc.movieUuid)}}};RankGroupMovieItem.prototype.OnBtnCongratulateClick=function(){var cd=Game.moduleModel.street.groupMovieRankCongratulateCD;if(cd<=0){if(this.rankData.desc.userId==User.account.userId){Game.system.toastText(Games.TEXT.StreetCongratulateSelf);return}Game.protosender.rank.GetStreetReward(2000+this.rankData.rank)}};RankGroupMovieItem.prototype.OnTick=function(residue_times){if(this.m_btnCongratulate.m_time.visible){this.m_btnCongratulate.m_time.text=TimeHelper.TimeFormat(residue_times);return}};return RankGroupMovieItem}(Street.RankGroupMovieItemStruct));Street.RankGroupMovieItem=RankGroupMovieItem})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetCinemaSelectedPanelStruct=(function(_super){__extends(StreetCinemaSelectedPanelStruct,_super);function StreetCinemaSelectedPanelStruct(){return _super.call(this)||this}StreetCinemaSelectedPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","StreetCinemaSelectedPanel"))};StreetCinemaSelectedPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_txtTip1=(this.getChild("txtTip1"));this.m_txtTip2=(this.getChild("txtTip2"));this.m_btnClose=(this.getChild("btnClose"));this.m_cinemaIcon=(this.getChild("cinemaIcon"))};StreetCinemaSelectedPanelStruct.URL="ui://mu4e45moky795";StreetCinemaSelectedPanelStruct.DependPackages=["Street","Common","WarMovie"];return StreetCinemaSelectedPanelStruct}(fairygui.GComponent));Street.StreetCinemaSelectedPanelStruct=StreetCinemaSelectedPanelStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetCinemaSelectedPanel=(function(_super){__extends(StreetCinemaSelectedPanel,_super);function StreetCinemaSelectedPanel(){return _super!==null&&_super.apply(this,arguments)||this}StreetCinemaSelectedPanel.prototype.onWindowInited=function(){this.m_btnClose.onClick(this,this.OnBtnCloseClick)};StreetCinemaSelectedPanel.prototype.onWindowOpen=function(arg){this.moduleMain=this.moduleWindow.mainWindow;this.cinemaId=arg;this.UpdateView()};StreetCinemaSelectedPanel.prototype.onWindowShow=function(){};StreetCinemaSelectedPanel.prototype.onWindowHide=function(){};StreetCinemaSelectedPanel.prototype.UpdateView=function(){if(this.cinemaId){var cfg=Game.config.cinema.getConfig(this.cinemaId);this.m_txtTip1.text=cfg.proportionString;this.m_txtTip2.text=Game.config.msg.getTxtFormat(MsgKey.cinema_sign,cfg.name,numberToLetter(6-cfg.level),formatNumberUnit(cfg.num));this.m_cinemaIcon.icon=cfg.iconUrl;this.m_cinemaIcon.Level=cfg.sign_level}};StreetCinemaSelectedPanel.prototype.OnBtnCloseClick=function(){this.moduleWindow.closeSelf()};return StreetCinemaSelectedPanel}(Street.StreetCinemaSelectedPanelStruct));Street.StreetCinemaSelectedPanel=StreetCinemaSelectedPanel})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetCinemaViewStruct=(function(_super){__extends(StreetCinemaViewStruct,_super);function StreetCinemaViewStruct(){return _super.call(this)||this}StreetCinemaViewStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","StreetCinemaView"))};StreetCinemaViewStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=this.getController("state");this.m_name=(this.getChild("name"));this.m_num=(this.getChild("num"));this.m_listCinema=(this.getChild("listCinema"));this.m_btnSign=(this.getChild("btnSign"));this.m_cinemaItem=(this.getChild("cinemaItem"))};StreetCinemaViewStruct.URL="ui://mu4e45moky79w";StreetCinemaViewStruct.DependPackages=["Street","Common"];return StreetCinemaViewStruct}(fairygui.GComponent));Street.StreetCinemaViewStruct=StreetCinemaViewStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetCinemaView=(function(_super){__extends(StreetCinemaView,_super);function StreetCinemaView(){return _super!==null&&_super.apply(this,arguments)||this}StreetCinemaView.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_listCinema.itemRenderer=new Handler(this,this.RenderCinemaItem,null,false);this.m_btnSign.onClick(this,this.OnBtnSignClick)};StreetCinemaView.prototype.Render=function(data,moduleWindow){this.streetData=data;this.moduleWindow=moduleWindow;if(this.streetData.canSign){this.m_num.text=formatNumberUnit(this.streetData.cinemaStaticNum);this.m_state.setSelectedIndex(2)}else{if(this.streetData.hasCinema){this.m_num.text=formatNumberUnit(this.streetData.cinemaNum);this.m_state.setSelectedIndex(3)}else{var cinemaList=this.streetData.Cfg.cinema;if(cinemaList.length==1){this.m_state.setSelectedIndex(0);var data_1=this.streetData.Cfg.cinema[0];var cfg=Game.config.cinema.getConfig(data_1);this.m_cinemaItem.icon=cfg.iconUrl;this.m_cinemaItem.m_num.text=formatNumberUnit(cfg.num);this.m_cinemaItem.Level=cfg.sign_level}else{this.m_state.setSelectedIndex(1);this.m_listCinema.numItems=cinemaList.length}}}};StreetCinemaView.prototype.OnBtnSignClick=function(){this.moduleWindow.OnSignClick(this)};StreetCinemaView.prototype.RenderCinemaItem=function(index,obj){var data=this.streetData.Cfg.cinema[index];var cfg=Game.config.cinema.getConfig(data);obj.icon=cfg.iconUrl;obj.m_num.text=formatNumberUnit(cfg.num);obj.Level=cfg.sign_level};return StreetCinemaView}(Street.StreetCinemaViewStruct));Street.StreetCinemaView=StreetCinemaView})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetIconStruct=(function(_super){__extends(StreetIconStruct,_super);function StreetIconStruct(){return _super.call(this)||this}StreetIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","StreetIcon"))};StreetIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_isRed=this.getController("isRed");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};StreetIconStruct.URL="ui://mu4e45moky79c";StreetIconStruct.DependPackages=["Street","Common"];return StreetIconStruct}(fairygui.GButton));Street.StreetIconStruct=StreetIconStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetIcon=(function(_super){__extends(StreetIcon,_super);function StreetIcon(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(StreetIcon.prototype,"isRed",{set:function(value){this.m_isRed.setSelectedIndex(value?1:0)},enumerable:true,configurable:true});return StreetIcon}(Street.StreetIconStruct));Street.StreetIcon=StreetIcon})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetInfoPanelStruct=(function(_super){__extends(StreetInfoPanelStruct,_super);function StreetInfoPanelStruct(){return _super.call(this)||this}StreetInfoPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","StreetInfoPanel"))};StreetInfoPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_isCurrent=this.getController("isCurrent");this.m_canReward=this.getController("canReward");this.m_listReward=(this.getChild("listReward"));this.m_txtTip1=(this.getChild("txtTip1"));this.m_txtTip2=(this.getChild("txtTip2"));this.m_txtTip3=(this.getChild("txtTip3"));this.m_title=(this.getChild("title"));this.m_progress=(this.getChild("progress"));this.m_btnReward=(this.getChild("btnReward"));this.m_btnConfirm=(this.getChild("btnConfirm"));this.m_btnClose=(this.getChild("btnClose"));this.m_txtStreetInfo=(this.getChild("txtStreetInfo"));this.m_txtRewardInfo=(this.getChild("txtRewardInfo"))};StreetInfoPanelStruct.URL="ui://mu4e45moky796";StreetInfoPanelStruct.DependPackages=["Street","Common","WarMovie"];return StreetInfoPanelStruct}(fairygui.GComponent));Street.StreetInfoPanelStruct=StreetInfoPanelStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetInfoPanel=(function(_super){__extends(StreetInfoPanel,_super);function StreetInfoPanel(){return _super!==null&&_super.apply(this,arguments)||this}StreetInfoPanel.prototype.onWindowInited=function(){this.m_btnClose.onClick(this,this.OnCloseClick);this.m_btnConfirm.onClick(this,this.OnBtnConfirmClick);this.m_listReward.itemRenderer=new Handler(this,this.RenderRewardItem,null,false);this.m_listReward.itemProvider=new Handler(this,this.GetRewardItemResource,null,false);this.m_btnReward.onClick(this,this.OnGetReward)};StreetInfoPanel.prototype.onWindowOpen=function(arg){this.streetData=arg;this.UpdateView()};StreetInfoPanel.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.rank_GetStreetReward,this.OnGetStreetRewardResponse,this)};StreetInfoPanel.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.rank_GetStreetReward,this.OnGetStreetRewardResponse,this)};StreetInfoPanel.prototype.UpdateView=function(){this.m_title.text=this.streetData.Name;this.m_txtTip2.text=Game.config.msg.getTxtFormat(MsgKey.trophy_tips);this.m_txtTip3.text=Game.config.msg.getTxt(MsgKey.trophy_tips2);this.m_txtRewardInfo.text=this.streetData.Cfg.nextMsg;var rewardList=this.streetData.Cfg.upgrade_reward;this.m_listReward.numItems=rewardList.length;if(this.streetData.isCurrent){this.m_isCurrent.setSelectedIndex(1);var nextCfg=Game.config.blockLevel.GetNextSteetCfg(this.streetData.id);this.m_txtTip1.text=nextCfg?Game.config.msg.getTxtFormat(MsgKey.block_upgrade_requirement,nextCfg.name):"";this.m_txtStreetInfo.text=this.streetData.Cfg.currentMsg;this.m_progress.value=Game.moduleModel.street.cupNum;this.m_progress.max=Game.moduleModel.street.GetMaxCup(this.streetData.id);this.m_progress.m_title.text=this.m_progress.value+"/"+this.m_progress.max}else{this.m_txtTip1.text=Game.config.msg.getTxt(MsgKey.finished_block);this.m_isCurrent.setSelectedIndex(0);this.m_progress.value=100;this.m_progress.max=100;this.m_progress.m_title.text="MAX"}this.m_canReward.setSelectedIndex(this.streetData.isCurrent&&Game.moduleModel.street.canReward?1:0)};StreetInfoPanel.prototype.RenderRewardItem=function(index,obj){var data=this.streetData.Cfg.upgrade_reward[index];var itemData=Games.ItemData.Create(data.itemId,data.itemNum);if(itemData.itemType==7){var pact=obj;pact.Render(itemData)}else{var item=obj;item.icon=itemData.itemIconUrl;item.m_title.text=formatNumberUnit(itemData.itemNum);item.m_star.starNum=itemData.itemStar;item.PopupInfo=data.itemId}};StreetInfoPanel.prototype.GetRewardItemResource=function(index){var data=this.streetData.Cfg.upgrade_reward[index];var item=Games.ItemData.Create(data.itemId,data.itemNum);if(item.itemType==7){return fgui.Common.PactIcon_80.URL}else{return fgui.Common.CommonItem_70.URL}};StreetInfoPanel.prototype.OnCloseClick=function(){this.moduleWindow.closeSelf()};StreetInfoPanel.prototype.OnBtnConfirmClick=function(){this.moduleWindow.closeSelf()};StreetInfoPanel.prototype.OnGetReward=function(){Game.protosender.rank.GetStreetReward(0)};StreetInfoPanel.prototype.OnGetStreetRewardResponse=function(){this.UpdateView()};return StreetInfoPanel}(Street.StreetInfoPanelStruct));Street.StreetInfoPanel=StreetInfoPanel})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetItemStruct=(function(_super){__extends(StreetItemStruct,_super);function StreetItemStruct(){return _super.call(this)||this}StreetItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","StreetItem"))};StreetItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_isCurrent=this.getController("isCurrent");this.m_btnSelect=(this.getChild("btnSelect"));this.m_streetIcon=(this.getChild("streetIcon"));this.m_playerIcon=(this.getChild("playerIcon"));this.m_rewardView=(this.getChild("rewardView"));this.m_cinemaView=(this.getChild("cinemaView"));this.m_progress=(this.getChild("progress"));this.m_t0=this.getTransition("t0")};StreetItemStruct.URL="ui://mu4e45moky79b";StreetItemStruct.DependPackages=["Street","Common","WarMovie"];return StreetItemStruct}(fairygui.GLabel));Street.StreetItemStruct=StreetItemStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetItem=(function(_super){__extends(StreetItem,_super);function StreetItem(){return _super!==null&&_super.apply(this,arguments)||this}StreetItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_btnSelect.onClick(this,this.OnSelect)};StreetItem.prototype.Render=function(data,moduleWindow){this.streetData=data;this.moduleWindow=moduleWindow;this.m_streetIcon.icon=this.streetData.iconUrl;this.m_streetIcon.title=this.streetData.Cfg.name;this.m_streetIcon.grayed=this.streetData.isLock;this.m_streetIcon.isRed=this.streetData.isCurrent&&Game.moduleModel.street.canReward;this.m_playerIcon.m_icon.m_icon.url=User.headIconUrl;this.m_progress.value=Game.moduleModel.street.cupNum;this.m_progress.max=Game.moduleModel.street.GetMaxCup(this.streetData.id);this.m_isCurrent.setSelectedIndex(this.streetData.isCurrent?1:0);this.height=this.streetData.isCurrent?288:222;this.m_cinemaView.Render(this.streetData,this.moduleWindow);this.m_rewardView.Render(this.streetData)};StreetItem.prototype.OnSelect=function(){this.moduleWindow.OnItemClick(this)};return StreetItem}(Street.StreetItemStruct));Street.StreetItem=StreetItem})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetListPanelStruct=(function(_super){__extends(StreetListPanelStruct,_super);function StreetListPanelStruct(){return _super.call(this)||this}StreetListPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","StreetListPanel"))};StreetListPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_title=(this.getChild("title"));this.m_btnClose=(this.getChild("btnClose"));this.m_btnRank=(this.getChild("btnRank"))};StreetListPanelStruct.URL="ui://mu4e45moky79g";StreetListPanelStruct.DependPackages=["Street","Common"];return StreetListPanelStruct}(fairygui.GComponent));Street.StreetListPanelStruct=StreetListPanelStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetListPanel=(function(_super){__extends(StreetListPanel,_super);function StreetListPanel(){return _super!==null&&_super.apply(this,arguments)||this}StreetListPanel.prototype.onInit=function(moduleWindow){this.moduleWindow=moduleWindow;this.m_btnClose.onClick(this,this.OnCloseClick);this.m_btnRank.onClick(this,this.OnBtnRankClick);this.m_list.itemRenderer=new Handler(this,this.RenderListItem,null,false);this.m_list.setVirtual()};StreetListPanel.prototype.onWindowDestory=function(){};StreetListPanel.prototype.onWindowOpen=function(){var arg=[];for(var _i=0;_i<arguments.length;_i++){arg[_i]=arguments[_i]}this.UpdateView()};StreetListPanel.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.GameInfo,this.UpdateView,this)};StreetListPanel.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.GameInfo,this.UpdateView,this)};StreetListPanel.prototype.UpdateView=function(){this.streetList=Game.moduleModel.street.StreetList;this.m_list.numItems=this.streetList.length;this.m_list.refreshVirtualList();this.m_list.scrollToView(Game.moduleModel.street.NextStreetNum)};StreetListPanel.prototype.RenderListItem=function(index,obj){var data=this.streetList[index];obj.Render(data,this)};StreetListPanel.prototype.OnItemClick=function(obj){var item=obj;if(item.streetData.isLock){this.moduleWindow.openSubwindowByIndex(Games.StreetWindowSubEnum.StreetLvUpInfoPanel,true,item.streetData)}else{this.moduleWindow.openSubwindowByIndex(Games.StreetWindowSubEnum.StreetInfoPanel,true,item.streetData)}};StreetListPanel.prototype.OnSignClick=function(obj){var item=obj;this.moduleWindow.openSubwindowByIndex(Games.StreetWindowSubEnum.StreetSelectCinemaPanel,true,item.streetData)};StreetListPanel.prototype.OnCloseClick=function(){this.moduleWindow.menuClose()};StreetListPanel.prototype.OnBtnRankClick=function(){this.moduleWindow.conent.OpenStreetRankPanel()};StreetListPanel.prototype.ShowSelectCinemaPanel=function(){this.moduleWindow.openSubwindowByIndex(Games.StreetWindowSubEnum.StreetSelectCinemaPanel)};return StreetListPanel}(Street.StreetListPanelStruct));Street.StreetListPanel=StreetListPanel})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetLvUpInfoPanelStruct=(function(_super){__extends(StreetLvUpInfoPanelStruct,_super);function StreetLvUpInfoPanelStruct(){return _super.call(this)||this}StreetLvUpInfoPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","StreetLvUpInfoPanel"))};StreetLvUpInfoPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_txtTip1=(this.getChild("txtTip1"));this.m_txtTip2=(this.getChild("txtTip2"));this.m_txtTip3=(this.getChild("txtTip3"));this.m_title=(this.getChild("title"));this.m_progress=(this.getChild("progress"));this.m_btnConfirm=(this.getChild("btnConfirm"));this.m_btnClose=(this.getChild("btnClose"))};StreetLvUpInfoPanelStruct.URL="ui://mu4e45moky79i";StreetLvUpInfoPanelStruct.DependPackages=["Street","Common","WarMovie"];return StreetLvUpInfoPanelStruct}(fairygui.GComponent));Street.StreetLvUpInfoPanelStruct=StreetLvUpInfoPanelStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetLvUpInfoPanel=(function(_super){__extends(StreetLvUpInfoPanel,_super);function StreetLvUpInfoPanel(){return _super!==null&&_super.apply(this,arguments)||this}StreetLvUpInfoPanel.prototype.onWindowInited=function(){this.m_btnClose.onClick(this,this.OnCloseClick);this.m_btnConfirm.onClick(this,this.OnBtnConfirmClick)};StreetLvUpInfoPanel.prototype.onWindowOpen=function(arg){this.streetData=arg;this.UpdateView()};StreetLvUpInfoPanel.prototype.onWindowShow=function(){};StreetLvUpInfoPanel.prototype.onWindowHide=function(){};StreetLvUpInfoPanel.prototype.UpdateView=function(){this.m_txtTip1.text=Game.config.msg.getTxtFormat(MsgKey.block_upgrade_requirement,this.streetData.Cfg.name);this.m_txtTip2.text=Game.config.msg.getTxt(MsgKey.trophy_tips);this.m_txtTip3.text=Game.config.msg.getTxt(MsgKey.trophy_tips2);this.m_progress.value=Game.moduleModel.street.cupNum;this.m_progress.max=Game.moduleModel.street.GetMaxCup(this.streetData.id);this.m_title.text=this.streetData.Name};StreetLvUpInfoPanel.prototype.OnCloseClick=function(){this.moduleWindow.closeSelf()};StreetLvUpInfoPanel.prototype.OnBtnConfirmClick=function(){this.moduleWindow.closeSelf()};return StreetLvUpInfoPanel}(Street.StreetLvUpInfoPanelStruct));Street.StreetLvUpInfoPanel=StreetLvUpInfoPanel})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetMainPanelStruct=(function(_super){__extends(StreetMainPanelStruct,_super);function StreetMainPanelStruct(){return _super.call(this)||this}StreetMainPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","StreetMainPanel"))};StreetMainPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_showTab=this.getController("showTab");this.m_streetPanel=(this.getChild("streetPanel"));this.m_rankPanel=(this.getChild("rankPanel"));this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1")};StreetMainPanelStruct.URL="ui://mu4e45moky79j";StreetMainPanelStruct.DependPackages=["Street","Common"];return StreetMainPanelStruct}(fairygui.GComponent));Street.StreetMainPanelStruct=StreetMainPanelStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetMainPanel=(function(_super){__extends(StreetMainPanel,_super);function StreetMainPanel(){return _super!==null&&_super.apply(this,arguments)||this}StreetMainPanel.prototype.onWindowInited=function(){this.m_rankPanel.onInit(this.moduleWindow);this.m_streetPanel.onInit(this.moduleWindow)};StreetMainPanel.prototype.onWindowDestory=function(){this.m_rankPanel.onWindowDestory();this.m_streetPanel.onWindowDestory()};StreetMainPanel.prototype.onWindowOpen=function(){var arg=[];for(var _i=0;_i<arguments.length;_i++){arg[_i]=arguments[_i]}this.OpenStreetRankPanel()};StreetMainPanel.prototype.onWindowShow=function(){this.m_rankPanel.onWindowShow();this.m_streetPanel.onWindowShow()};StreetMainPanel.prototype.onWindowHide=function(){this.m_rankPanel.onWindowHide();this.m_streetPanel.onWindowHide()};StreetMainPanel.prototype.UpdateView=function(){switch(this.m_showTab.selectedIndex){case 0:this.m_rankPanel.UpdateView();break;case 1:this.m_streetPanel.UpdateView();break;default:break}};StreetMainPanel.prototype.OpenStreetRankPanel=function(){this.m_showTab.setSelectedIndex(0);this.m_rankPanel.onWindowOpen();if(this.m_rankPanel.x==0){return}this.m_rankPanel.x=this.width;this.m_streetPanel.x=0;Laya.Tween.to(this.m_rankPanel,{x:0},600);Laya.Tween.to(this.m_streetPanel,{x:-this.width},600)};StreetMainPanel.prototype.OpenStreetListPanel=function(){this.m_showTab.setSelectedIndex(1);this.m_streetPanel.onWindowOpen();this.m_rankPanel.x=0;this.m_streetPanel.x=-this.width;Laya.Tween.to(this.m_rankPanel,{x:this.width},600);Laya.Tween.to(this.m_streetPanel,{x:0},600)};return StreetMainPanel}(Street.StreetMainPanelStruct));Street.StreetMainPanel=StreetMainPanel})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetRankPanelStruct=(function(_super){__extends(StreetRankPanelStruct,_super);function StreetRankPanelStruct(){return _super.call(this)||this}StreetRankPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","StreetRankPanel"))};StreetRankPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_rankType=this.getController("rankType");this.m_list=(this.getChild("list"));this.m_title=(this.getChild("title"));this.m_listTab=(this.getChild("listTab"));this.m_txtGroupMovieRank=(this.getChild("txtGroupMovieRank"));this.m_txtGroupMovie=(this.getChild("txtGroupMovie"));this.m_txtMovieTime=(this.getChild("txtMovieTime"));this.m_tip=(this.getChild("tip"));this.m_txtMovie=(this.getChild("txtMovie"));this.m_txtMovieRank=(this.getChild("txtMovieRank"));this.m_txtMovieName=(this.getChild("txtMovieName"));this.m_btnClose=(this.getChild("btnClose"));this.m_marquee=(this.getChild("marquee"));this.m_streetIcon=(this.getChild("streetIcon"))};StreetRankPanelStruct.URL="ui://mu4e45moky79k";StreetRankPanelStruct.DependPackages=["Street","Common","PfSkin"];return StreetRankPanelStruct}(fairygui.GComponent));Street.StreetRankPanelStruct=StreetRankPanelStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetRankPanel=(function(_super){__extends(StreetRankPanel,_super);function StreetRankPanel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.selectIndex=-1;return _this}StreetRankPanel.prototype.onInit=function(moduleWindow){this.moduleWindow=moduleWindow;this.m_btnClose.onClick(this,this.OnCloseClick);this.m_listTab.onClick(this,this.OnTabClick);this.m_streetIcon.onClick(this,this.OnStreetIconClick);this.m_list.itemRenderer=new Handler(this,this.RenderListItem,null,false);this.m_list.itemProvider=new Handler(this,this.ProviderItem,null,false);this.m_list.setVirtual();this.tick=Game.tick.AddTick(1,0,new Handler(this,this.OnTick),new Handler(this,this.OnTickFinish));this.congraTick=Game.tick.AddTick(1,0,new Handler(this,this.OnCongraTick),new Handler(this,this.OnCongraTickFinish));this.m_marquee.onWindowInited()};StreetRankPanel.prototype.onWindowDestory=function(){Game.tick.ClearTick(this.tick);Game.tick.ClearTick(this.congraTick);this.m_marquee.onWindowDestory()};StreetRankPanel.prototype.RenderListItem=function(index,obj){if(this.m_rankType.selectedIndex==0){var item=obj;var data=this.rankGroupList[index];item.Render(data)}else{var item=obj;var data=this.rankGroupMovieList[index];item.Render(data)}};StreetRankPanel.prototype.ProviderItem=function(index){if(this.m_rankType.selectedIndex==0){return fgui.Street.RankGroupItem.URL}else{return fgui.Street.RankGroupMovieItem.URL}};StreetRankPanel.prototype.OnTick=function(){this.m_txtMovieTime.text=TimeHelper.TimeFormat(Game.moduleModel.street.groupRankCD)};StreetRankPanel.prototype.OnTickFinish=function(){this.tick.Stop()};StreetRankPanel.prototype.OnCongraTick=function(){var cd;if(this.m_rankType.selectedIndex==0){cd=Game.moduleModel.street.gronpRankCongratulateCD}else{cd=Game.moduleModel.street.groupMovieRankCongratulateCD}if(cd>0){for(var index=0;index<this.m_list.numChildren;index++){var obj=this.m_list.getChildAt(index);if(this.m_rankType.selectedIndex==0){var item=obj;item.OnTick(cd)}else{var item=obj;item.OnTick(cd)}}}};StreetRankPanel.prototype.OnCongraTickFinish=function(){this.congraTick.Stop();this.UpdateView()};StreetRankPanel.prototype.UpdateView=function(){var selfStreetData=Game.moduleModel.street.selfStreetData;this.m_title.text=Games.TEXT.StreetTitle.format(Game.moduleModel.rank.rankInfo.serverId,TimeHelper.DateTimeFormat3(Game.time.serverSeconds));this.m_streetIcon.icon=selfStreetData.iconUrl;this.m_streetIcon.title=selfStreetData.Cfg.name;this.m_streetIcon.isRed=Game.moduleModel.street.RedNum;var msgList=[Game.config.msg.getTxt(MsgKey.ranking_list_tips1),Game.config.msg.getTxt(MsgKey.ranking_list_tips2)];this.m_marquee.UpdateView(msgList);switch(this.m_rankType.selectedIndex){case 0:this.UpdateGroupView();break;case 1:this.UpdateMovieView();this.tick.Stop();break;default:break}};StreetRankPanel.prototype.UpdateGroupView=function(){this.tick.SetTargetTimes(Game.moduleModel.street.groupRankCD);this.tick.Restart();var cd=Game.moduleModel.street.gronpRankCongratulateCD;if(cd>0){this.congraTick.SetTargetTimes(cd);this.congraTick.Restart()}else{this.congraTick.Stop()}this.rankGroupList=Game.moduleModel.rank.GroupRankList||[];this.m_list.numItems=this.rankGroupList.length;var userData=Game.moduleModel.rank.SelfGroupRankData;if(userData){this.m_txtGroupMovieRank.text=Games.TEXT.RankText.format(userData.rank);this.m_txtGroupMovie.text=formatNumberUnit(userData.desc.totalBoxOffice||0,userData.desc.totalBoxOffice>=1000?1:0)}this.m_tip.text=Game.config.msg.getTxt(MsgKey.ranking_list_reset)};StreetRankPanel.prototype.UpdateMovieView=function(){var cd=Game.moduleModel.street.groupMovieRankCongratulateCD;if(cd>0){this.congraTick.SetTargetTimes(cd);this.congraTick.Restart()}else{this.congraTick.Stop()}this.rankGroupMovieList=Game.moduleModel.rank.GroupMovieRankList||[];this.m_list.numItems=this.rankGroupMovieList.length;var userData=Game.moduleModel.rank.SelfGroupMovieRankData;if(userData&&userData.desc.movieName!=""){this.m_txtMovieName.text=userData.desc.movieName;this.m_txtMovieRank.text=Games.TEXT.RankText.format(userData.rank);this.m_txtMovie.text=formatNumberUnit(userData.desc.totalBoxOffice||0,userData.desc.totalBoxOffice>=1000?1:0)}else{this.m_txtMovieName.text="";this.m_txtMovieRank.text="";this.m_txtMovie.text=""}};StreetRankPanel.prototype.OnStreetIconClick=function(){this.moduleWindow.conent.OpenStreetListPanel()};StreetRankPanel.prototype.OnTabClick=function(index){if(this.selectIndex==this.m_rankType.selectedIndex){return}this.selectIndex=this.m_rankType.selectedIndex;switch(this.m_rankType.selectedIndex){case 0:this.UpdateGroupView();break;case 1:Game.moduleModel.task.openRankNum=1;this.UpdateMovieView();break;default:break}};StreetRankPanel.prototype.onWindowOpen=function(){var arg=[];for(var _i=0;_i<arguments.length;_i++){arg[_i]=arguments[_i]}Game.protosender.rank.GetGroupRankList();Game.protosender.rank.GetGroupMovieRankList();this.selectIndex=-1;this.m_rankType.setSelectedIndex(0);this.OnTabClick(0)};StreetRankPanel.prototype.onWindowShow=function(){this.m_marquee.Show();Game.protoOkEvent.add(ProtoEventKey.rank_GetGroupMovieRankList,this.UpdateView,this);Game.protoOkEvent.add(ProtoEventKey.rank_GetGroupRankList,this.UpdateView,this);Game.protoOkEvent.add(ProtoEventKey.rank_GetStreetReward,this.UpdateView,this);Game.protoOkEvent.add(ProtoEventKey.GameData_RenameGameData,this.UpdateView,this);Game.protoOkEvent.add(ProtoEventKey.GameData_RePortraitGameData,this.UpdateView,this)};StreetRankPanel.prototype.onWindowHide=function(){this.tick.Stop();this.m_marquee.Hide();Game.protoOkEvent.remove(ProtoEventKey.rank_GetGroupMovieRankList,this.UpdateView,this);Game.protoOkEvent.remove(ProtoEventKey.rank_GetGroupRankList,this.UpdateView,this);Game.protoOkEvent.remove(ProtoEventKey.rank_GetStreetReward,this.UpdateView,this);Game.protoOkEvent.remove(ProtoEventKey.GameData_RenameGameData,this.UpdateView,this);Game.protoOkEvent.remove(ProtoEventKey.GameData_RePortraitGameData,this.UpdateView,this)};StreetRankPanel.prototype.OnCloseClick=function(){this.moduleWindow.menuClose()};return StreetRankPanel}(Street.StreetRankPanelStruct));Street.StreetRankPanel=StreetRankPanel})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetRewardViewStruct=(function(_super){__extends(StreetRewardViewStruct,_super);function StreetRewardViewStruct(){return _super.call(this)||this}StreetRewardViewStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","StreetRewardView"))};StreetRewardViewStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=this.getController("state");this.m_txtTip=(this.getChild("txtTip"));this.m_listReward=(this.getChild("listReward"))};StreetRewardViewStruct.URL="ui://mu4e45moky79v";StreetRewardViewStruct.DependPackages=["Street","Common"];return StreetRewardViewStruct}(fairygui.GButton));Street.StreetRewardViewStruct=StreetRewardViewStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetRewardView=(function(_super){__extends(StreetRewardView,_super);function StreetRewardView(){return _super!==null&&_super.apply(this,arguments)||this}StreetRewardView.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_listReward.itemRenderer=new Handler(this,this.RenderRewardItem,null,false);this.m_listReward.itemProvider=new Handler(this,this.GetRewardItemResource,null,false)};StreetRewardView.prototype.Render=function(data){this.streetData=data;var menuList=this.streetData.Cfg.UpgradeMenu;if(menuList&&menuList.length>0){this.m_state.setSelectedIndex(1);this.m_listReward.numItems=menuList.length}else{this.m_state.setSelectedIndex(0);var rewardList=this.streetData.Cfg.upgrade_reward;this.m_listReward.numItems=rewardList.length>2?2:rewardList.length}};StreetRewardView.prototype.RenderRewardItem=function(index,obj){if(this.m_state.selectedIndex==0){var data=this.streetData.Cfg.upgrade_reward[index];if(data==null){return}var itemData=Games.ItemData.Create(data.itemId,data.itemNum);if(itemData.itemType==7){var pact=obj;pact.Render(itemData)}else{var item=obj;item.icon=itemData.itemIconUrl;item.title=itemData.itemNumTxt;item.m_star.starNum=itemData.itemStar;item.PopupInfo=itemData.itemId}}else{var data=this.streetData.Cfg.UpgradeMenu[index];if(data==null){return}var menuItem=obj;var cfg=Game.config.menu.getConfig(data);if(cfg){menuItem.icon=cfg.iconUrl;menuItem.title=cfg.name}else{menuItem.icon="";menuItem.title=""}}};StreetRewardView.prototype.GetRewardItemResource=function(index){if(this.m_state.selectedIndex==0){var data=this.streetData.Cfg.upgrade_reward[index];if(data==null){return fgui.Common.CommonAssetItem_little.URL}var item=Games.ItemData.Create(data.itemId,data.itemNum);if(item.itemType==7){return fgui.Common.PactIcon_44.URL}else{return fgui.Common.CommonAssetItem_little.URL}}else{return fgui.Street.MenuIcon.URL}};return StreetRewardView}(Street.StreetRewardViewStruct));Street.StreetRewardView=StreetRewardView})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetSelectCinemaPanelStruct=(function(_super){__extends(StreetSelectCinemaPanelStruct,_super);function StreetSelectCinemaPanelStruct(){return _super.call(this)||this}StreetSelectCinemaPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","StreetSelectCinemaPanel"))};StreetSelectCinemaPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_list=(this.getChild("list"));this.m_title=(this.getChild("title"));this.m_btnConfirm=(this.getChild("btnConfirm"));this.m_btnClose=(this.getChild("btnClose"))};StreetSelectCinemaPanelStruct.URL="ui://mu4e45moky79p";StreetSelectCinemaPanelStruct.DependPackages=["Street","Common"];return StreetSelectCinemaPanelStruct}(fairygui.GComponent));Street.StreetSelectCinemaPanelStruct=StreetSelectCinemaPanelStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var StreetSelectCinemaPanel=(function(_super){__extends(StreetSelectCinemaPanel,_super);function StreetSelectCinemaPanel(){return _super!==null&&_super.apply(this,arguments)||this}StreetSelectCinemaPanel.prototype.onWindowInited=function(){this.m_list.itemRenderer=new Handler(this,this.RenderListItem,null,false);this.m_btnConfirm.onClick(this,this.OnBtnConfirmClick);this.m_btnClose.onClick(this,this.OnBtnCloseClick)};StreetSelectCinemaPanel.prototype.onWindowOpen=function(arg){this.moduleMain=this.moduleWindow.mainWindow;this.streetData=arg;this.m_list.selectedIndex=-1;this.UpdateView()};StreetSelectCinemaPanel.prototype.onWindowShow=function(){Game.protoOkEvent.add(ProtoEventKey.rank_ChoseTheater,this.OnSelectCinemaHandler,this)};StreetSelectCinemaPanel.prototype.onWindowHide=function(){Game.protoOkEvent.remove(ProtoEventKey.rank_ChoseTheater,this.OnSelectCinemaHandler,this)};StreetSelectCinemaPanel.prototype.UpdateView=function(){if(this.streetData){var cinemaList=this.streetData.Cfg.cinema;this.m_list.numItems=cinemaList.length;if(cinemaList.length==1){this.m_list.selectedIndex=0}}};StreetSelectCinemaPanel.prototype.RenderListItem=function(index,obj){var cinemaList=this.streetData.Cfg.cinema;var cinemaId=cinemaList[index];obj.Render(cinemaId)};StreetSelectCinemaPanel.prototype.OnBtnCloseClick=function(){this.moduleWindow.closeSelf()};StreetSelectCinemaPanel.prototype.OnBtnConfirmClick=function(){if(this.m_list.selectedIndex>=0){var cinemaList=this.streetData.Cfg.cinema;var cinema=cinemaList[this.m_list.selectedIndex];if(cinema){Game.protosender.rank.ChoseTheater(cinema)}}else{Game.system.toastMsg(MsgKey.choose_cinema)}};StreetSelectCinemaPanel.prototype.OnSelectCinemaHandler=function(){this.moduleWindow.closeSelf();var cinemaList=this.streetData.Cfg.cinema;var cinemaId=cinemaList[this.m_list.selectedIndex];this.moduleMain.openSubwindowByIndex(Games.StreetWindowSubEnum.StreetCinemaSelectedPanel,true,cinemaId)};return StreetSelectCinemaPanel}(Street.StreetSelectCinemaPanelStruct));Street.StreetSelectCinemaPanel=StreetSelectCinemaPanel})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var TabStreetStruct=(function(_super){__extends(TabStreetStruct,_super);function TabStreetStruct(){return _super.call(this)||this}TabStreetStruct.createInstance=function(){return(fairygui.UIPackage.createObject("Street","TabStreet"))};TabStreetStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_grayed=this.getController("grayed");this.m_title=(this.getChild("title"))};TabStreetStruct.URL="ui://mu4e45moiiww2a";TabStreetStruct.DependPackages=["Street","PfSkin"];return TabStreetStruct}(fairygui.GButton));Street.TabStreetStruct=TabStreetStruct})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var Street;(function(Street){var TabStreet=(function(_super){__extends(TabStreet,_super);function TabStreet(){return _super!==null&&_super.apply(this,arguments)||this}return TabStreet}(Street.TabStreetStruct));Street.TabStreet=TabStreet})(Street=fgui.Street||(fgui.Street={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var ButtonItemStruct=(function(_super){__extends(ButtonItemStruct,_super);function ButtonItemStruct(){return _super.call(this)||this}ButtonItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("SystemSettings","ButtonItem"))};ButtonItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};ButtonItemStruct.URL="ui://6ecreso0kl6dx54";ButtonItemStruct.DependPackages=["SystemSettings"];return ButtonItemStruct}(fairygui.GButton));SystemSettings.ButtonItemStruct=ButtonItemStruct})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var ButtonItem=(function(_super){__extends(ButtonItem,_super);function ButtonItem(){return _super!==null&&_super.apply(this,arguments)||this}return ButtonItem}(SystemSettings.ButtonItemStruct));SystemSettings.ButtonItem=ButtonItem})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var GiftPackageExchangeStruct=(function(_super){__extends(GiftPackageExchangeStruct,_super);function GiftPackageExchangeStruct(){return _super.call(this)||this}GiftPackageExchangeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("SystemSettings","GiftPackageExchange"))};GiftPackageExchangeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_bg3=(this.getChild("bg3"));this.m_title=(this.getChild("title"));this.m_inputText=(this.getChild("inputText"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_okBtn=(this.getChild("okBtn"))};GiftPackageExchangeStruct.URL="ui://6ecreso0izhnx41";GiftPackageExchangeStruct.DependPackages=["SystemSettings","Common"];return GiftPackageExchangeStruct}(fairygui.GComponent));SystemSettings.GiftPackageExchangeStruct=GiftPackageExchangeStruct})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var GiftPackageExchange=(function(_super){__extends(GiftPackageExchange,_super);function GiftPackageExchange(){return _super!==null&&_super.apply(this,arguments)||this}GiftPackageExchange.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=Game.config.msg.getConfig(MsgKey.exchange_title).notice;this.m_okBtn.m_title.text=Game.config.msg.getConfig(MsgKey.exhange_button).notice;this.m_inputText.promptText=Game.config.msg.getConfig(MsgKey.exchange_input).notice;this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_bg.onClick(this,this.onClickCloseBtn);this.m_closeBtn.onClick(this,this.onClickCloseBtn)};GiftPackageExchange.prototype.onClickOkBtn=function(){Game.moduleModel.setting.exchange(this.m_inputText.text)};GiftPackageExchange.prototype.onClickCloseBtn=function(){this.visible=false;Game.moduleModel.setting.sCallGiftGetOk.remove(this.giftGetOk,this)};GiftPackageExchange.prototype.onShow=function(){this.visible=true;this.m_inputText.text="";Game.moduleModel.setting.sCallGiftGetOk.add(this.giftGetOk,this)};GiftPackageExchange.prototype.giftGetOk=function(){Game.system.toastText(Game.config.msg.getConfig(MsgKey.gift_success).notice)};return GiftPackageExchange}(SystemSettings.GiftPackageExchangeStruct));SystemSettings.GiftPackageExchange=GiftPackageExchange})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var LanguageItemStruct=(function(_super){__extends(LanguageItemStruct,_super);function LanguageItemStruct(){return _super.call(this)||this}LanguageItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("SystemSettings","LanguageItem"))};LanguageItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_title=(this.getChild("title"))};LanguageItemStruct.URL="ui://6ecreso0izhnx43";LanguageItemStruct.DependPackages=["SystemSettings"];return LanguageItemStruct}(fairygui.GButton));SystemSettings.LanguageItemStruct=LanguageItemStruct})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var LanguageItem=(function(_super){__extends(LanguageItem,_super);function LanguageItem(){return _super!==null&&_super.apply(this,arguments)||this}LanguageItem.prototype.setData=function(data){this.m_title.text=data.type};return LanguageItem}(SystemSettings.LanguageItemStruct));SystemSettings.LanguageItem=LanguageItem})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var NoneCStruct=(function(_super){__extends(NoneCStruct,_super);function NoneCStruct(){return _super.call(this)||this}NoneCStruct.createInstance=function(){return(fairygui.UIPackage.createObject("SystemSettings","NoneC"))};NoneCStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=(this.getChild("state"))};NoneCStruct.URL="ui://6ecreso0kl6dx53";NoneCStruct.DependPackages=["SystemSettings"];return NoneCStruct}(fairygui.GComponent));SystemSettings.NoneCStruct=NoneCStruct})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var NoneC=(function(_super){__extends(NoneC,_super);function NoneC(){return _super!==null&&_super.apply(this,arguments)||this}return NoneC}(SystemSettings.NoneCStruct));SystemSettings.NoneC=NoneC})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var OffCStruct=(function(_super){__extends(OffCStruct,_super);function OffCStruct(){return _super.call(this)||this}OffCStruct.createInstance=function(){return(fairygui.UIPackage.createObject("SystemSettings","offC"))};OffCStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=(this.getChild("state"))};OffCStruct.URL="ui://6ecreso0kl6dx52";OffCStruct.DependPackages=["SystemSettings"];return OffCStruct}(fairygui.GComponent));SystemSettings.OffCStruct=OffCStruct})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var OffC=(function(_super){__extends(OffC,_super);function OffC(){return _super!==null&&_super.apply(this,arguments)||this}return OffC}(SystemSettings.OffCStruct));SystemSettings.OffC=OffC})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var OnCStruct=(function(_super){__extends(OnCStruct,_super);function OnCStruct(){return _super.call(this)||this}OnCStruct.createInstance=function(){return(fairygui.UIPackage.createObject("SystemSettings","onC"))};OnCStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_state=(this.getChild("state"))};OnCStruct.URL="ui://6ecreso0kl6dx51";OnCStruct.DependPackages=["SystemSettings"];return OnCStruct}(fairygui.GComponent));SystemSettings.OnCStruct=OnCStruct})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var OnC=(function(_super){__extends(OnC,_super);function OnC(){return _super!==null&&_super.apply(this,arguments)||this}return OnC}(SystemSettings.OnCStruct));SystemSettings.OnC=OnC})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var SelectLanguageStruct=(function(_super){__extends(SelectLanguageStruct,_super);function SelectLanguageStruct(){return _super.call(this)||this}SelectLanguageStruct.createInstance=function(){return(fairygui.UIPackage.createObject("SystemSettings","SelectLanguage"))};SelectLanguageStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_title=(this.getChild("title"));this.m_languageList=(this.getChild("languageList"));this.m_okBtn=(this.getChild("okBtn"));this.m_closeBtn=(this.getChild("closeBtn"))};SelectLanguageStruct.URL="ui://6ecreso0izhnx42";SelectLanguageStruct.DependPackages=["SystemSettings","Common"];return SelectLanguageStruct}(fairygui.GComponent));SystemSettings.SelectLanguageStruct=SelectLanguageStruct})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var SelectLanguage=(function(_super){__extends(SelectLanguage,_super);function SelectLanguage(){return _super!==null&&_super.apply(this,arguments)||this}SelectLanguage.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_languageList.itemRenderer=Laya.Handler.create(this,this.initItem,null,false);this.m_languageList.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem);this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_bg.onClick(this,this.onClickCloseBtn);this.m_closeBtn.onClick(this,this.onClickCloseBtn)};SelectLanguage.prototype.onClickCloseBtn=function(){this.visible=false;Game.moduleModel.setting.sCallLanguagePanel.remove(null,this)};SelectLanguage.prototype.onClickOkBtn=function(){var _this=this;if(this.selectItem&&this.selectItem!==null&&this.selectItem.id!==Game.moduleModel.setting.settingLanguageId){Game.system.confirmText(TEXT.LangSelectMsg,Games.TEXT.SwitchLanguage,this,function(){console.log(Game.moduleModel.setting.settingLanguageId);Game.moduleModel.setting.settingLanguageId=_this.selectItem.id;window.location.reload()})}this.onClickCloseBtn()};SelectLanguage.prototype.setData=function(){var list=Game.config.languageType.getConfigList();this.languageConfig=new Array();for(var i=0;i<list.length;i++){if(list[i].languageswitch===1){this.languageConfig.push(list[i])}}this.m_languageList.numItems=this.languageConfig.length;if(Game.moduleModel.setting.settingLanguageId===0){Game.moduleModel.setting.settingLanguageId=Game.config.global.getConfig(GlobalKey.default_language).value}for(var i=0;i<this.languageConfig.length;i++){if(this.languageConfig[i].id===Game.moduleModel.setting.settingLanguageId){this.m_languageList.addSelection(i);this.selectItem=this.languageConfig[i];break}}this.visible=true};SelectLanguage.prototype.initItem=function(index,obj){var item=obj;item.setData(this.languageConfig[index])};SelectLanguage.prototype.onClickItem=function(obj){var index=this.m_languageList.getChildIndex(obj);this.selectItem=this.languageConfig[index]};return SelectLanguage}(SystemSettings.SelectLanguageStruct));SystemSettings.SelectLanguage=SelectLanguage})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var SettingsItemStruct=(function(_super){__extends(SettingsItemStruct,_super);function SettingsItemStruct(){return _super.call(this)||this}SettingsItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("SystemSettings","SettingsItem"))};SettingsItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_onTip1=(this.getChild("onTip1"));this.m_offTip1=(this.getChild("offTip1"));this.m_noneTip=(this.getChild("noneTip"));this.m_onTip=(this.getChild("onTip"));this.m_offTip=(this.getChild("offTip"))};SettingsItemStruct.URL="ui://6ecreso0izhnx40";SettingsItemStruct.DependPackages=["SystemSettings"];return SettingsItemStruct}(fairygui.GButton));SystemSettings.SettingsItemStruct=SettingsItemStruct})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var SettingsItem=(function(_super){__extends(SettingsItem,_super);function SettingsItem(){return _super!==null&&_super.apply(this,arguments)||this}SettingsItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickBtn)};Object.defineProperty(SettingsItem.prototype,"OnOff",{get:function(){return this.m_onTip.visible},set:function(value){this.m_offTip.visible=!value;this.m_onTip.visible=value},enumerable:true,configurable:true});SettingsItem.prototype.setData=function(data,isInit){if(isInit===void 0){isInit=false}this.curData=data;this.m_title.text=this.curData.name+"";this.m_icon.icon=Games.WarLoadPic.getAvatarIcon(this.curData.icon);if(this.curData._default===2){this.m_offTip.visible=false;this.m_onTip.visible=false}else{this.OnOff=Game.moduleModel.setting.getBoolean(this.curData.key)}};SettingsItem.prototype.onClickBtn=function(){if(!this.curData._switch){Game.system.toastText(TEXT.FunNoOpen)}else{if(this.curData._default===2){if(this.curData.popup==="language_setting"){Game.moduleModel.setting.sCallLanguagePanel.dispatch()}else{if(this.curData.popup==="advice_feedback"){Game.system.toastText(Game.config.msg.getConfig(MsgKey.feedback_words).notice+"")}else{if(this.curData.popup==="gift_exchange"){Game.moduleModel.setting.sCallGiftPanel.dispatch()}}}}else{var onOff=Game.moduleModel.setting.getBoolean(this.curData.key);onOff=!onOff;Game.moduleModel.setting.setBoolean(this.curData.key,onOff);this.OnOff=onOff}}};return SettingsItem}(SystemSettings.SettingsItemStruct));SystemSettings.SettingsItem=SettingsItem})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var SettingsPanelStruct=(function(_super){__extends(SettingsPanelStruct,_super);function SettingsPanelStruct(){return _super.call(this)||this}SettingsPanelStruct.createInstance=function(){return(fairygui.UIPackage.createObject("SystemSettings","SettingsPanel"))};SettingsPanelStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_idTip=(this.getChild("idTip"));this.m_version=(this.getChild("version"));this.m_tip=(this.getChild("tip"));this.m_setList=(this.getChild("setList"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_SwitchAccountBtn=(this.getChild("SwitchAccountBtn"));this.m_FeedBackBtn=(this.getChild("FeedBackBtn"))};SettingsPanelStruct.URL="ui://6ecreso0izhnx3y";SettingsPanelStruct.DependPackages=["SystemSettings","Common"];return SettingsPanelStruct}(fairygui.GComponent));SystemSettings.SettingsPanelStruct=SettingsPanelStruct})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var SystemSettings;(function(SystemSettings){var SettingsPanel=(function(_super){__extends(SettingsPanel,_super);function SettingsPanel(){return _super!==null&&_super.apply(this,arguments)||this}SettingsPanel.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.isInit=true;this.m_setList.itemRenderer=Laya.Handler.create(this,this.initItem,null,false);this.m_closeBtn.onClick(this,this.onClickCloseBtn);this.m_SwitchAccountBtn.title=Games.TEXT.SwitchAccount;this.m_FeedBackBtn.title=Games.TEXT.FeedBackSettings;this.m_SwitchAccountBtn.onClick(this,this.SwitchAccount);this.m_FeedBackBtn.onClick(this,this.OpenFeedBackUI);this.m_FeedBackBtn.visible=false};SettingsPanel.prototype.onClickCloseBtn=function(){this.moduleWindow.menuClose()};SettingsPanel.prototype.SwitchAccount=function(){Game.system.confirmText(TEXT.SureaSwitchAccount,null,this,function(){window.location.reload()})};SettingsPanel.prototype.OpenFeedBackUI=function(){Game.system.toastText(Game.config.msg.getConfig(MsgKey.feedback_words).notice+"")};SettingsPanel.prototype.onWindowShow=function(){Game.moduleModel.setting.sCallLanguagePanel.add(this.onShowLanguagePanel,this);Game.moduleModel.setting.sCallGiftPanel.add(this.onShowGifPanel,this);this.onRefrush()};SettingsPanel.prototype.onWindowHide=function(){Game.moduleModel.setting.sCallLanguagePanel.remove(this.onShowLanguagePanel,this);Game.moduleModel.setting.sCallGiftPanel.remove(this.onShowGifPanel,this)};SettingsPanel.prototype.onRefrush=function(){this.setConfList=Game.config.settingDefault.getConfigInList();this.m_setList.numItems=this.setConfList.length;this.m_title.text=Game.config.msg.getConfig(MsgKey.setting_title).notice+"";this.m_idTip.text=format(Game.config.msg.getConfig(MsgKey.player_id).notice,User.info.entityId);this.m_version.text=format(Game.config.msg.getConfig(MsgKey.version_num).notice,GameVersions.Manager.Instance.localAppVersionData.toString());this.m_tip.text=format(Game.config.msg.getConfig(MsgKey.setting_notice).notice,10);if(this.isInit){this.isInit=false}};SettingsPanel.prototype.initItem=function(index,obj){var item=obj;item.setData(this.setConfList[index],this.isInit)};SettingsPanel.prototype.onShowLanguagePanel=function(){if(!this.languagePanel||this.languagePanel===null){this.languagePanel=fgui.SystemSettings.SelectLanguage.createInstance();this.addChild(this.languagePanel);setScreenSize(this.languagePanel)}this.languagePanel.setData()};SettingsPanel.prototype.onShowGifPanel=function(){if(!this.giftPanel||this.giftPanel===null){this.giftPanel=fgui.SystemSettings.GiftPackageExchange.createInstance();this.addChild(this.giftPanel);setScreenSize(this.giftPanel)}this.giftPanel.onShow()};SettingsPanel.prototype.onshowSwitchPanel=function(){this.switchPanel=fgui.System.SystemConfirmMessage.createInstance();this.addChild(this.switchPanel);setScreenSize(this.switchPanel)};return SettingsPanel}(SystemSettings.SettingsPanelStruct));SystemSettings.SettingsPanel=SettingsPanel})(SystemSettings=fgui.SystemSettings||(fgui.SystemSettings={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarContinue;(function(WarContinue){var WarContinuousIncomeStruct=(function(_super){__extends(WarContinuousIncomeStruct,_super);function WarContinuousIncomeStruct(){return _super.call(this)||this}WarContinuousIncomeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarContinue","WarContinuousIncome"))};WarContinuousIncomeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_ChangeCity=this.getController("ChangeCity");this.m_showCostRed=this.getController("showCostRed");this.m_filmName=(this.getChild("filmName"));this.m_incomeTime=(this.getChild("incomeTime"));this.m_guanzhuduValue=(this.getChild("guanzhuduValue"));this.m_expandIcon=(this.getChild("expandIcon"));this.m_expandCost=(this.getChild("expandCost"));this.m_rewardValue1=(this.getChild("rewardValue1"));this.m_rewardIcon1=(this.getChild("rewardIcon1"));this.m_tip1=(this.getChild("tip1"));this.m_rewardList=(this.getChild("rewardList"));this.m_cityList=(this.getChild("cityList"));this.m_lockTip=(this.getChild("lockTip"));this.m_lock=(this.getChild("lock"));this.m_title=(this.getChild("title"));this.m_pingjia=(this.getChild("pingjia"));this.m_overTip1=(this.getChild("overTip1"));this.m_overTip=(this.getChild("overTip"));this.m_icon2=(this.getChild("icon2"));this.m_cityName=(this.getChild("cityName"));this.m_rewardList2=(this.getChild("rewardList2"));this.m_cantTip=(this.getChild("cantTip"));this.m_tip2=(this.getChild("tip2"));this.m_guanzhuduProgress=(this.getChild("guanzhuduProgress"));this.m_promotionBtn=(this.getChild("promotionBtn"));this.m_okBtn=(this.getChild("okBtn"));this.m_Income=(this.getChild("Income"));this.m_xuanchuance=(this.getChild("xuanchuance"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_Income2=(this.getChild("Income2"));this.m_okBtn2=(this.getChild("okBtn2"));this.m_nameBtn=(this.getChild("nameBtn"));this.m_closeBtn2=(this.getChild("closeBtn2"));this.m_fxEffectMovieEarnings=(this.getChild("fxEffectMovieEarnings"))};WarContinuousIncomeStruct.URL="ui://qybz1z3jqbxl84";WarContinuousIncomeStruct.DependPackages=["WarContinue","WarMovie","System","Fx","Common"];return WarContinuousIncomeStruct}(fairygui.GComponent));WarContinue.WarContinuousIncomeStruct=WarContinuousIncomeStruct})(WarContinue=fgui.WarContinue||(fgui.WarContinue={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarContinue;(function(WarContinue){var WarContinuousIncome=(function(_super){__extends(WarContinuousIncome,_super);function WarContinuousIncome(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isOverIncome=false;_this.attentionval=-1;_this.preAttentionVal=-1;_this.tipGetCostItemId=0;_this.tipGetCostNum=0;return _this}WarContinuousIncome.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_rewardList.itemRenderer=Laya.Handler.create(this,this.initRewardItem,null,false);this.m_rewardList2.itemRenderer=Laya.Handler.create(this,this.initRewardItem2,null,false);this.m_cityList.itemRenderer=Laya.Handler.create(this,this.initCityItem,null,false);this.m_closeBtn.onClick(this,this.closeThis);this.m_closeBtn2.onClick(this,this.onClickCloseBtn2);this.m_okBtn2.onClick(this,this.onClickOkBtn2);this.m_promotionBtn.onClick(this,this.onClickUpAttentionBtn);this.m_promotionBtn.text=TEXT.promotionBtn;this.m_okBtn.onClick(this,this.onGetRewardBtn);this.m_okBtn.grayed=true;this.m_nameBtn.onClick(this,this.showFilmInf)};WarContinuousIncome.prototype.onWindowShow=function(){this.setData();Game.moduleModel.warData.sUpdateEndIncomeTime.add(this.updateEndIncomeTime,this);Game.event.add(GameEventKey.GameEventKey_MakeFilmSwitchCity,this.onClickCloseBtn2,this);Game.event.add(GameEventKey.GameEventKey_MakeFilmSpreadMovie,this.updateAttentionValue,this);Game.event.add(GameEventKey.GameEventKey_MakeFilmGetRewardMovie,this.updateContinueLastToNow,this)};WarContinuousIncome.prototype.onWindowHide=function(){Game.event.remove(GameEventKey.GameEventKey_MakeFilmSwitchCity,this.onClickCloseBtn2,this);Game.event.remove(GameEventKey.GameEventKey_MakeFilmSpreadMovie,this.updateAttentionValue,this);Game.event.remove(GameEventKey.GameEventKey_MakeFilmGetRewardMovie,this.updateContinueLastToNow,this);Game.moduleModel.warData.sUpdateEndIncomeTime.remove(this.updateEndIncomeTime,this);Laya.timer.clear(this,this.updateContinueLastToNow);Game.moduleModel.warData.curContinuData=null};WarContinuousIncome.prototype.showFilmInf=function(){Game.system.movieInfo(Game.moduleModel.warData.movieDataToShotData(this.incomeData.moveData))};WarContinuousIncome.prototype.closeThis=function(){this.moduleWindow.menuBack()};WarContinuousIncome.prototype.setData=function(){this.isOverIncome=false;this.incomeData=this.moduleWindow.menuParameter.args[0][0];if(!this.incomeData||this.incomeData===null){console.log("未找到数据 this.incomeData");this.closeThis()}this.globalConf_Extension_box_office_con=Game.config.global.getConfig(GlobalKey.Extension_box_office_con).value;this.globalConf_Extension_con=Game.config.global.getConfig(GlobalKey.Extension_con).value;this.m_ChangeCity.setSelectedIndex(0);this.curCity=null;var curData=this.incomeData.moveData;this.m_filmName.text=curData.name;Game.moduleModel.warData.curContinuData=this.incomeData;var sellIcon=Game.config.movieDrop.getSellIcon(curData.boxOfficeEvaluation);this.m_pingjia.icon=Game.config.avatar.getConfig(sellIcon).iconUrl;this.updateAttentionValue();this.updateContinueLastToNow();Laya.timer.loop(1000,this,this.updateContinueLastToNow,null,true,true);this.m_rewardIcon1.icon=Games.WarLoadPic.getItemIcon(3);this.updateEndIncomeTime()};WarContinuousIncome.prototype.updateContinueLastToNow=function(msg){var delFilm=false;if(msg&&msg!==null){delFilm=true;for(var i=0;i<Game.moduleModel.warData.movieDataList.length;i++){if(Game.moduleModel.warData.movieDataList[i].uuid===msg.uuid){delFilm=false;break}}if(msg.dropout&&msg.dropout!==null&&msg.dropout.length>0){this.onGetRewardItem(msg.dropout)}}if(!this.isOverIncome){var lastVal=this.incomeData.incomeValue;this.m_rewardValue1.text=formatNumberUnit(lastVal,1);if(lastVal>0){if(this.m_okBtn.grayed){this.m_okBtn.grayed=false}}else{if(!this.m_okBtn.grayed){this.m_okBtn.grayed=true}}}else{if(this.m_okBtn.grayed){this.m_okBtn.grayed=false}}if(delFilm){this.closeThis();Game.menu.getMenuCtl(MenuId.Home).moduleWindow.conent.onCreateFilmContinue()}};WarContinuousIncome.prototype.onGetRewardItem=function(dropList){if(this.m_ChangeCity.selectedIndex===2){var dtList=new Array();for(var ll=0;ll<dropList.length;ll++){var dtItem=new DTItemNum();dtItem.itemId=dropList[ll].itemId;dtItem.itemNum=dropList[ll].amount;dtList.push(dtItem)}Game.system.getItemText(dtList,null,false)}};WarContinuousIncome.prototype.onGetRewardBtn=function(){if(!this.m_okBtn.grayed){if(!this.m_okBtn.grayed){this.m_okBtn.grayed=true}Game.moduleModel.warData.reqGetRewardMovie(this.incomeData.moveData.uuid)}};WarContinuousIncome.prototype.updateAttentionValue=function(){var curData=this.incomeData.moveData;var roomInf=Game.moduleModel.building.getRoomLevel(4);this.m_lock.visible=!(roomInf&&roomInf>1);this.m_lockTip.text=Game.config.msg.getConfig(MsgKey.movie_city_unlock_tips).notice;this.curGZLv=parseInt(curData.attentionValue.toFixed(0));this.m_guanzhuduValue.text=format(TEXT.guanzhuduValue,this.curGZLv.toString());this.m_guanzhuduProgress.value=curData.attentionProgress;var moviePropularizeData=Game.config.moviePopularize.getConfig(this.curGZLv);if(!moviePropularizeData||moviePropularizeData===null){console.log("未找到数据 moviePropularizeData");this.closeThis()}this.m_expandCost.text=formatNumberUnit(moviePropularizeData.cost_num);this.tipGetCostItemId=Game.config.moviePopularize.getConfig(1).cost_id;this.tipGetCostNum=moviePropularizeData.cost_num;if(moviePropularizeData.cost_num>Game.moduleModel.item.getItemNum(this.tipGetCostItemId)){if(this.m_showCostRed.selectedIndex!==1){this.m_showCostRed.setSelectedIndex(1)}}else{if(this.m_showCostRed.selectedIndex!==0){this.m_showCostRed.setSelectedIndex(0)}this.tipGetCostItemId=0}this.m_expandIcon.icon=Games.WarLoadPic.getItemIcon(moviePropularizeData.cost_id);this.onRefrushCity()};WarContinuousIncome.prototype.onClickUpAttentionBtn=function(){if(this.curGZLv>=20){Game.system.toastText(TEXT.GZMax)}else{if(this.tipGetCostItemId>0){Game.system.openItemWay(this.tipGetCostItemId,this.tipGetCostNum)}else{Game.moduleModel.warData.reqSpreadMovie(this.incomeData.moveData.uuid)}}};WarContinuousIncome.prototype.updateEndIncomeTime=function(){if(this.incomeData.remainingTime<=0){this.onIncomeOver()}else{this.onUpdateTime(this.incomeData.remainingTime)}};WarContinuousIncome.prototype.onUpdateTime=function(val){this.m_incomeTime.text=format(Game.config.msg.getConfig(MsgKey.movie_off_line_remaining_time).notice,Games.TimeHelper.TimeFormat3(val))};WarContinuousIncome.prototype.onIncomeOver=function(){this.isOverIncome=true;this.m_overTip1.text=TEXT.filmOverTip;this.m_overTip.text=Game.config.msg.getConfig(MsgKey.earnings_over).notice;this.m_ChangeCity.setSelectedIndex(2);if(this.m_okBtn.grayed){this.m_okBtn.grayed=false}};WarContinuousIncome.prototype.initRewardItem=function(index,obj){var item=obj;item.setData(index,this.cityPopConfig,this.curGZLv)};WarContinuousIncome.prototype.initRewardItem2=function(index,obj){var item=obj;item.setData(index,this.cityPopConfig,this.curGZLv,true)};WarContinuousIncome.prototype.onRefrushCity=function(){var curData=this.incomeData.moveData;this.cityList=Game.moduleModel.market.GetMovieCity();this.curCity=null;var indexOf=0;if(curData.extendCity>0){for(var i=0;i<this.cityList.length;i++){if(this.cityList[i].id===curData.extendCity){this.curCity=this.cityList[i];indexOf=i;break}}}this.m_cityList.numItems=this.cityList.length;this.m_cityList.scrollToView(indexOf,true);if(this.curCity!==null){var popularize_id=this.curCity.cfg.popularize_id;this.cityPopConfig=Game.config.cityPopularize.getConfig(popularize_id);this.m_rewardList.numItems=5}else{this.m_rewardList.numItems=0}var val=curData.totalBoxOffice/(this.globalConf_Extension_box_office_con/100)*(curData.attentionValue*this.globalConf_Extension_con/100+1)*60;var str=format(Game.config.msg.getConfig(MsgKey.movie_off_line_gain_tips).notice,formatNumberUnit(val));this.m_Income.setData(EItemId.dollar,str);this.m_tip1.text=TEXT.continueTip;var cosId=Game.config.moviePopularize.getConfig(1).cost_id;this.m_xuanchuance.setData(cosId,formatNumberUnit(Game.moduleModel.item.getItemNum(cosId)).toString())};WarContinuousIncome.prototype.initCityItem=function(index,obj){var _this=this;var item=obj;item.setData(this.cityList[index],this.curCity,function(arg){_this.selectCallBack(arg)})};WarContinuousIncome.prototype.selectCallBack=function(data){this.curClickShowCityData=data;this.m_cityName.text=data.name;var val=this.incomeData.moveData.totalBoxOffice/(this.globalConf_Extension_box_office_con/100)*(this.incomeData.moveData.attentionValue*this.globalConf_Extension_con/100+1)*60;var str=format(Game.config.msg.getConfig(MsgKey.movie_off_line_gain_tips).notice,formatNumberUnit(val));this.m_Income2.setData(EItemId.dollar,str);this.m_tip2.text=TEXT.continueTip;var popularize_id=data.cfg.popularize_id;this.cityPopConfig=Game.config.cityPopularize.getConfig(popularize_id);this.m_rewardList2.numItems=5;if(data.state===Games.CityStateEnum.hasOccupy){this.m_cantTip.visible=false;this.m_okBtn2.visible=true}else{this.m_cantTip.visible=true;this.m_okBtn2.visible=false}this.m_ChangeCity.setSelectedIndex(1)};WarContinuousIncome.prototype.onClickCloseBtn2=function(){this.m_ChangeCity.setSelectedIndex(0);this.curClickShowCityData=null;this.onRefrushCity()};WarContinuousIncome.prototype.onClickOkBtn2=function(){Game.moduleModel.warData.reqSwitchCity(this.incomeData.moveData.uuid,this.curClickShowCityData.id)};WarContinuousIncome.prototype.onWindowResize=function(){this.setSize(Games.MenuLayer.root.width,Games.MenuLayer.root.height)};return WarContinuousIncome}(WarContinue.WarContinuousIncomeStruct));WarContinue.WarContinuousIncome=WarContinuousIncome})(WarContinue=fgui.WarContinue||(fgui.WarContinue={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var AveragePressStruct=(function(_super){__extends(AveragePressStruct,_super);function AveragePressStruct(){return _super.call(this)||this}AveragePressStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","AveragePress"))};AveragePressStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_tip=(this.getChild("tip"))};AveragePressStruct.URL="ui://y6ozucp1qbxl6q";AveragePressStruct.DependPackages=["WarMovie"];return AveragePressStruct}(fairygui.GProgressBar));WarMovie.AveragePressStruct=AveragePressStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var AveragePress=(function(_super){__extends(AveragePress,_super);function AveragePress(){return _super!==null&&_super.apply(this,arguments)||this}return AveragePress}(WarMovie.AveragePressStruct));WarMovie.AveragePress=AveragePress})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var BGStruct=(function(_super){__extends(BGStruct,_super);function BGStruct(){return _super.call(this)||this}BGStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","BG"))};BGStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};BGStruct.URL="ui://y6ozucp1g50xad";BGStruct.DependPackages=["WarMovie","Common"];return BGStruct}(fairygui.GComponent));WarMovie.BGStruct=BGStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var BG=(function(_super){__extends(BG,_super);function BG(){return _super!==null&&_super.apply(this,arguments)||this}return BG}(WarMovie.BGStruct));WarMovie.BG=BG})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var BG2Struct=(function(_super){__extends(BG2Struct,_super);function BG2Struct(){return _super.call(this)||this}BG2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","BG2"))};BG2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};BG2Struct.URL="ui://y6ozucp1g50xae";BG2Struct.DependPackages=["WarMovie","Common"];return BG2Struct}(fairygui.GComponent));WarMovie.BG2Struct=BG2Struct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var BG2=(function(_super){__extends(BG2,_super);function BG2(){return _super!==null&&_super.apply(this,arguments)||this}return BG2}(WarMovie.BG2Struct));WarMovie.BG2=BG2})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var CloseBtnStruct=(function(_super){__extends(CloseBtnStruct,_super);function CloseBtnStruct(){return _super.call(this)||this}CloseBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","CloseBtn"))};CloseBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};CloseBtnStruct.URL="ui://y6ozucp1r0zd31";CloseBtnStruct.DependPackages=["WarMovie","Common"];return CloseBtnStruct}(fairygui.GButton));WarMovie.CloseBtnStruct=CloseBtnStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var CloseBtn=(function(_super){__extends(CloseBtn,_super);function CloseBtn(){return _super!==null&&_super.apply(this,arguments)||this}return CloseBtn}(WarMovie.CloseBtnStruct));WarMovie.CloseBtn=CloseBtn})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var CompletedConditionsStruct=(function(_super){__extends(CompletedConditionsStruct,_super);function CompletedConditionsStruct(){return _super.call(this)||this}CompletedConditionsStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","CompletedConditions"))};CompletedConditionsStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_colorControl=this.getController("colorControl");this.m_tip=(this.getChild("tip"))};CompletedConditionsStruct.URL="ui://y6ozucp1r0zd5a";CompletedConditionsStruct.DependPackages=["WarMovie"];return CompletedConditionsStruct}(fairygui.GComponent));WarMovie.CompletedConditionsStruct=CompletedConditionsStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var CompletedConditions=(function(_super){__extends(CompletedConditions,_super);function CompletedConditions(){return _super!==null&&_super.apply(this,arguments)||this}return CompletedConditions}(WarMovie.CompletedConditionsStruct));WarMovie.CompletedConditions=CompletedConditions})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ConfirmBtnStruct=(function(_super){__extends(ConfirmBtnStruct,_super);function ConfirmBtnStruct(){return _super.call(this)||this}ConfirmBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","ConfirmBtn"))};ConfirmBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};ConfirmBtnStruct.URL="ui://y6ozucp1r0zd3i";ConfirmBtnStruct.DependPackages=["WarMovie","System"];return ConfirmBtnStruct}(fairygui.GButton));WarMovie.ConfirmBtnStruct=ConfirmBtnStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ConfirmBtn=(function(_super){__extends(ConfirmBtn,_super);function ConfirmBtn(){return _super!==null&&_super.apply(this,arguments)||this}return ConfirmBtn}(WarMovie.ConfirmBtnStruct));WarMovie.ConfirmBtn=ConfirmBtn})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ConfirmBtn2Struct=(function(_super){__extends(ConfirmBtn2Struct,_super);function ConfirmBtn2Struct(){return _super.call(this)||this}ConfirmBtn2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","ConfirmBtn2"))};ConfirmBtn2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};ConfirmBtn2Struct.URL="ui://y6ozucp1qbxl8e";ConfirmBtn2Struct.DependPackages=["WarMovie","Common"];return ConfirmBtn2Struct}(fairygui.GButton));WarMovie.ConfirmBtn2Struct=ConfirmBtn2Struct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ConfirmBtn2=(function(_super){__extends(ConfirmBtn2,_super);function ConfirmBtn2(){return _super!==null&&_super.apply(this,arguments)||this}return ConfirmBtn2}(WarMovie.ConfirmBtn2Struct));WarMovie.ConfirmBtn2=ConfirmBtn2})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ConfirmCostBtnStruct=(function(_super){__extends(ConfirmCostBtnStruct,_super);function ConfirmCostBtnStruct(){return _super.call(this)||this}ConfirmCostBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","ConfirmCostBtn"))};ConfirmCostBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_colorCtrol=this.getController("colorCtrol");this.m_icon=(this.getChild("icon"));this.m_item=(this.getChild("item"));this.m_title=(this.getChild("title"));this.m_cost=(this.getChild("cost"))};ConfirmCostBtnStruct.URL="ui://y6ozucp1snhga0";ConfirmCostBtnStruct.DependPackages=["WarMovie","Common"];return ConfirmCostBtnStruct}(fairygui.GButton));WarMovie.ConfirmCostBtnStruct=ConfirmCostBtnStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ConfirmCostBtn=(function(_super){__extends(ConfirmCostBtn,_super);function ConfirmCostBtn(){return _super!==null&&_super.apply(this,arguments)||this}return ConfirmCostBtn}(WarMovie.ConfirmCostBtnStruct));WarMovie.ConfirmCostBtn=ConfirmCostBtn})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmIconStruct=(function(_super){__extends(FilmIconStruct,_super);function FilmIconStruct(){return _super.call(this)||this}FilmIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","FilmIcon"))};FilmIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_gold=this.getController("gold");this.m_finishBg=(this.getChild("finishBg"));this.m_icon=(this.getChild("icon"));this.m_filmStar=(this.getChild("filmStar"))};FilmIconStruct.URL="ui://y6ozucp1r0zd53";FilmIconStruct.DependPackages=["WarMovie","Common"];return FilmIconStruct}(fairygui.GButton));WarMovie.FilmIconStruct=FilmIconStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmIcon=(function(_super){__extends(FilmIcon,_super);function FilmIcon(){return _super!==null&&_super.apply(this,arguments)||this}FilmIcon.prototype.setData=function(data,randomIcon){if(randomIcon===void 0){randomIcon=false}if(Game.moduleModel.story.getStoryData(data.id).isGold){this.m_gold.setSelectedIndex(1)}else{this.m_gold.setSelectedIndex(0)}this.m_icon.icon=Game.config.avatar.getConfig(data.poster_name).iconUrl;if(randomIcon){this.m_icon.setRandomIcon()}this.m_filmStar.m_starList.numItems=data.starNumber};return FilmIcon}(WarMovie.FilmIconStruct));WarMovie.FilmIcon=FilmIcon})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmInfBtnStruct=(function(_super){__extends(FilmInfBtnStruct,_super);function FilmInfBtnStruct(){return _super.call(this)||this}FilmInfBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","filmInfBtn"))};FilmInfBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};FilmInfBtnStruct.URL="ui://y6ozucp1yytj5n";FilmInfBtnStruct.DependPackages=["WarMovie","Common"];return FilmInfBtnStruct}(fairygui.GButton));WarMovie.FilmInfBtnStruct=FilmInfBtnStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmInfBtn=(function(_super){__extends(FilmInfBtn,_super);function FilmInfBtn(){return _super!==null&&_super.apply(this,arguments)||this}return FilmInfBtn}(WarMovie.FilmInfBtnStruct));WarMovie.FilmInfBtn=FilmInfBtn})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmingTipStruct=(function(_super){__extends(FilmingTipStruct,_super);function FilmingTipStruct(){return _super.call(this)||this}FilmingTipStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","FilmingTip"))};FilmingTipStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};FilmingTipStruct.URL="ui://y6ozucp1r0zd4s";FilmingTipStruct.DependPackages=["WarMovie"];return FilmingTipStruct}(fairygui.GComponent));WarMovie.FilmingTipStruct=FilmingTipStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmingTip=(function(_super){__extends(FilmingTip,_super);function FilmingTip(){return _super!==null&&_super.apply(this,arguments)||this}return FilmingTip}(WarMovie.FilmingTipStruct));WarMovie.FilmingTip=FilmingTip})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmProgressStruct=(function(_super){__extends(FilmProgressStruct,_super);function FilmProgressStruct(){return _super.call(this)||this}FilmProgressStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","FilmProgress"))};FilmProgressStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_top1=(this.getChild("top1"))};FilmProgressStruct.URL="ui://y6ozucp1r0zd4l";FilmProgressStruct.DependPackages=["WarMovie","System"];return FilmProgressStruct}(fairygui.GProgressBar));WarMovie.FilmProgressStruct=FilmProgressStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmProgress=(function(_super){__extends(FilmProgress,_super);function FilmProgress(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(FilmProgress.prototype,"valu",{set:function(val){if(!val||val===NaN){val=0.001}if(val<=0){val=0.001}if(val>100){val=100}this.value=val},enumerable:true,configurable:true});return FilmProgress}(WarMovie.FilmProgressStruct));WarMovie.FilmProgress=FilmProgress})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmProgressBlueStruct=(function(_super){__extends(FilmProgressBlueStruct,_super);function FilmProgressBlueStruct(){return _super.call(this)||this}FilmProgressBlueStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","FilmProgressBlue"))};FilmProgressBlueStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"));this.m_top1=(this.getChild("top1"))};FilmProgressBlueStruct.URL="ui://y6ozucp1qbxl6h";FilmProgressBlueStruct.DependPackages=["WarMovie","System","Common"];return FilmProgressBlueStruct}(fairygui.GProgressBar));WarMovie.FilmProgressBlueStruct=FilmProgressBlueStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmProgressBlue=(function(_super){__extends(FilmProgressBlue,_super);function FilmProgressBlue(){return _super!==null&&_super.apply(this,arguments)||this}return FilmProgressBlue}(WarMovie.FilmProgressBlueStruct));WarMovie.FilmProgressBlue=FilmProgressBlue})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmProgressBlue2Struct=(function(_super){__extends(FilmProgressBlue2Struct,_super);function FilmProgressBlue2Struct(){return _super.call(this)||this}FilmProgressBlue2Struct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","FilmProgressBlue2"))};FilmProgressBlue2Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_showNum=this.getController("showNum");this.m_bar=(this.getChild("bar"));this.m_title=(this.getChild("title"))};FilmProgressBlue2Struct.URL="ui://y6ozucp1qbxl6p";FilmProgressBlue2Struct.DependPackages=["WarMovie","System","Common"];return FilmProgressBlue2Struct}(fairygui.GProgressBar));WarMovie.FilmProgressBlue2Struct=FilmProgressBlue2Struct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmProgressBlue2=(function(_super){__extends(FilmProgressBlue2,_super);function FilmProgressBlue2(){return _super!==null&&_super.apply(this,arguments)||this}return FilmProgressBlue2}(WarMovie.FilmProgressBlue2Struct));WarMovie.FilmProgressBlue2=FilmProgressBlue2})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmSelectItemStruct=(function(_super){__extends(FilmSelectItemStruct,_super);function FilmSelectItemStruct(){return _super.call(this)||this}FilmSelectItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","FilmSelectItem"))};FilmSelectItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_filmTypeList=(this.getChild("filmTypeList"));this.m_filmName=(this.getChild("filmName"));this.m_selectBtn=(this.getChild("selectBtn"));this.m_filmInf=(this.getChild("filmInf"));this.m_men=(this.getChild("men"));this.m_women=(this.getChild("women"));this.m_child=(this.getChild("child"));this.m_filmDes=(this.getChild("filmDes"))};FilmSelectItemStruct.URL="ui://y6ozucp1r0zd55";FilmSelectItemStruct.DependPackages=["WarMovie","Common"];return FilmSelectItemStruct}(fairygui.GComponent));WarMovie.FilmSelectItemStruct=FilmSelectItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var FilmSelectItem=(function(_super){__extends(FilmSelectItem,_super);function FilmSelectItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._canShowInf=false;return _this}FilmSelectItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_selectBtn.onClick(this,this.onClickSelectBtn);this.m_selectBtn.m_title.text=TEXT.ButtonSelect;this.m_filmInf.onClick(this,this.onClickInf);this.m_filmInf.m_c1.setSelectedIndex(1);this.m_filmTypeList.itemRenderer=Laya.Handler.create(this,this.initTagsItem,null,false)};Object.defineProperty(FilmSelectItem.prototype,"canShowInf",{get:function(){return this._canShowInf},set:function(value){this._canShowInf=value},enumerable:true,configurable:true});FilmSelectItem.prototype.onClickInf=function(){if(this.canShowInf){Game.moduleModel.warData.filmInfoConfig=this.currData;this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.FilmInfo,true)}};FilmSelectItem.prototype.onClickSelectBtn=function(){var _this=this;if(FilmSelectItem.isSelectStory){return}var myHaveDollar=Game.moduleModel.item.getItemNum(EItemId.dollar);if(myHaveDollar>=this.cost){Game.moduleModel.warData.filmIndexOf=this.indexOf;Game.system.openRename(Games.TEXT.ChangeStoryName,null,function(txt){FilmSelectItem.isSelectStory=true;_this.moduleWindow.conent.startShowWaiting();Game.moduleModel.warData.SendReName(txt,_this.currData)},null,TEXT.ButtonOk,this.currData.filmName,format(TEXT.StoryNameLimit,20),20,"",[3,parseInt(this.cost.toFixed(0))],true,this.getRandomList())}else{var isplay=Game.story.triggerPlayStoryByType(Games.StoryTriggerType.SelectStoryMoneyNotEnough,1);if(isplay==false){Game.system.openItemWay(EItemId.dollar,this.cost)}}};FilmSelectItem.prototype.getRandomList=function(){return Game.config.gameRandomName.getConfig(this.currData.random_name).names};FilmSelectItem.prototype.setData=function(data,index,isHaveGuanzhong){this.currData=data;this.indexOf=index;this.cost=Game.moduleModel.warData.moveData.movieCost[this.indexOf];this.m_filmName.text=this.currData.filmName;this.m_filmInf.setData(this.currData,true);this.m_filmTypeList.numItems=this.currData.filmTags.length+1;if(this.currData.filmTags.length>2){this.m_c1.setSelectedIndex(0)}else{this.m_c1.setSelectedIndex(1)}this.m_filmDes.setData(this.currData.filmDes);this.m_selectBtn.m_cost.text=formatNumberUnit(this.cost,1);this.m_selectBtn.m_item.icon=Game.config.avatar.getConfig(Game.config.item.getConfig(EItemId.dollar).icon).iconUrl;if(isHaveGuanzhong){if(this.currData.getMale>0){this.m_men.text=this.currData.getMale+"%";this.m_men.visible=true}else{this.m_men.visible=false}if(this.currData.getFemale>0){this.m_women.text=this.currData.getFemale+"%";this.m_women.visible=true}else{this.m_women.visible=false}if(this.currData.getChild>0){this.m_child.text=this.currData.getChild+"%";this.m_child.visible=true}else{this.m_child.visible=false}}else{this.m_men.visible=false;this.m_women.visible=false;this.m_child.visible=false}};FilmSelectItem.prototype.initTagsItem=function(index,obj){var item=obj;if(index===0){item.m_title.text=this.currData.filmType;item.m_typeLabel.setSelectedIndex(1)}else{item.m_title.text=this.currData.filmTags[index-1];item.m_typeLabel.setSelectedIndex(0)}};FilmSelectItem.isSelectStory=false;return FilmSelectItem}(WarMovie.FilmSelectItemStruct));WarMovie.FilmSelectItem=FilmSelectItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var GoodsItemStruct=(function(_super){__extends(GoodsItemStruct,_super);function GoodsItemStruct(){return _super.call(this)||this}GoodsItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","GoodsItem"))};GoodsItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_ItemIcon=(this.getChild("ItemIcon"));this.m_title=(this.getChild("title"))};GoodsItemStruct.URL="ui://y6ozucp1qbxl85";GoodsItemStruct.DependPackages=["WarMovie","Common"];return GoodsItemStruct}(fairygui.GLabel));WarMovie.GoodsItemStruct=GoodsItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var GoodsItem=(function(_super){__extends(GoodsItem,_super);function GoodsItem(){return _super!==null&&_super.apply(this,arguments)||this}GoodsItem.prototype.setData=function(goodsId,vals){var conf2=Game.config.item.getConfig(goodsId).icon;this.m_ItemIcon.icon=Game.config.avatar.getConfig(conf2).iconUrl;this.text=vals};return GoodsItem}(WarMovie.GoodsItemStruct));WarMovie.GoodsItem=GoodsItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var MinDialogStruct=(function(_super){__extends(MinDialogStruct,_super);function MinDialogStruct(){return _super.call(this)||this}MinDialogStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","MinDialog"))};MinDialogStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"))};MinDialogStruct.URL="ui://y6ozucp1ty0bdq";MinDialogStruct.DependPackages=["WarMovie","Common"];return MinDialogStruct}(fairygui.GLabel));WarMovie.MinDialogStruct=MinDialogStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var MinDialog=(function(_super){__extends(MinDialog,_super);function MinDialog(){return _super!==null&&_super.apply(this,arguments)||this}return MinDialog}(WarMovie.MinDialogStruct));WarMovie.MinDialog=MinDialog})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var NoticeIconStruct=(function(_super){__extends(NoticeIconStruct,_super);function NoticeIconStruct(){return _super.call(this)||this}NoticeIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","NoticeIcon"))};NoticeIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_noticeIcon=(this.getChild("noticeIcon"))};NoticeIconStruct.URL="ui://y6ozucp1mp3ldc";NoticeIconStruct.DependPackages=["WarMovie","Building","Activity"];return NoticeIconStruct}(fairygui.GComponent));WarMovie.NoticeIconStruct=NoticeIconStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var NoticeIcon=(function(_super){__extends(NoticeIcon,_super);function NoticeIcon(){return _super!==null&&_super.apply(this,arguments)||this}return NoticeIcon}(WarMovie.NoticeIconStruct));WarMovie.NoticeIcon=NoticeIcon})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ProgressBlueStruct=(function(_super){__extends(ProgressBlueStruct,_super);function ProgressBlueStruct(){return _super.call(this)||this}ProgressBlueStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","ProgressBlue"))};ProgressBlueStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"))};ProgressBlueStruct.URL="ui://y6ozucp1qbxl7s";ProgressBlueStruct.DependPackages=["WarMovie","Common"];return ProgressBlueStruct}(fairygui.GProgressBar));WarMovie.ProgressBlueStruct=ProgressBlueStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ProgressBlue=(function(_super){__extends(ProgressBlue,_super);function ProgressBlue(){return _super!==null&&_super.apply(this,arguments)||this}return ProgressBlue}(WarMovie.ProgressBlueStruct));WarMovie.ProgressBlue=ProgressBlue})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ProgressYellowStruct=(function(_super){__extends(ProgressYellowStruct,_super);function ProgressYellowStruct(){return _super.call(this)||this}ProgressYellowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","ProgressYellow"))};ProgressYellowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"))};ProgressYellowStruct.URL="ui://y6ozucp1qbxl7r";ProgressYellowStruct.DependPackages=["WarMovie","Common"];return ProgressYellowStruct}(fairygui.GProgressBar));WarMovie.ProgressYellowStruct=ProgressYellowStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ProgressYellow=(function(_super){__extends(ProgressYellow,_super);function ProgressYellow(){return _super!==null&&_super.apply(this,arguments)||this}return ProgressYellow}(WarMovie.ProgressYellowStruct));WarMovie.ProgressYellow=ProgressYellow})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ShareBtnStruct=(function(_super){__extends(ShareBtnStruct,_super);function ShareBtnStruct(){return _super.call(this)||this}ShareBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","ShareBtn"))};ShareBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};ShareBtnStruct.URL="ui://y6ozucp1qbxl7z";ShareBtnStruct.DependPackages=["WarMovie","Common"];return ShareBtnStruct}(fairygui.GButton));WarMovie.ShareBtnStruct=ShareBtnStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ShareBtn=(function(_super){__extends(ShareBtn,_super);function ShareBtn(){return _super!==null&&_super.apply(this,arguments)||this}return ShareBtn}(WarMovie.ShareBtnStruct));WarMovie.ShareBtn=ShareBtn})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ShwoMinDialogStruct=(function(_super){__extends(ShwoMinDialogStruct,_super);function ShwoMinDialogStruct(){return _super.call(this)||this}ShwoMinDialogStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","ShwoMinDialog"))};ShwoMinDialogStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_dialog=(this.getChild("dialog"));this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1")};ShwoMinDialogStruct.URL="ui://y6ozucp1ty0bdr";ShwoMinDialogStruct.DependPackages=["WarMovie"];return ShwoMinDialogStruct}(fairygui.GComponent));WarMovie.ShwoMinDialogStruct=ShwoMinDialogStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ShwoMinDialog=(function(_super){__extends(ShwoMinDialog,_super);function ShwoMinDialog(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.setTimeountNum=-1;return _this}ShwoMinDialog.prototype.clickCloseBtn=function(){this.m_t1.play(Handler.create(this,this.close),1)};ShwoMinDialog.prototype.close=function(){this.visible=false;if(this.setTimeountNum>=0){clearTimeout(this.setTimeountNum)}this.setTimeountNum=-1};ShwoMinDialog.prototype.setData=function(content){var _this=this;this.visible=true;this.m_dialog.m_title.text=content;this.m_dialog.x=-450;if(this.setTimeountNum>=0){clearTimeout(this.setTimeountNum)}this.m_t0.play(Handler.create(this,function(){_this.setTimeountNum=setTimeout(function(){_this.clickCloseBtn()},3000)}),1)};return ShwoMinDialog}(WarMovie.ShwoMinDialogStruct));WarMovie.ShwoMinDialog=ShwoMinDialog})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var SQFlashStruct=(function(_super){__extends(SQFlashStruct,_super);function SQFlashStruct(){return _super.call(this)||this}SQFlashStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","SQFlash"))};SQFlashStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};SQFlashStruct.URL="ui://y6ozucp1row7e3";SQFlashStruct.DependPackages=["WarMovie","Common"];return SQFlashStruct}(fairygui.GComponent));WarMovie.SQFlashStruct=SQFlashStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var SQFlash=(function(_super){__extends(SQFlash,_super);function SQFlash(){return _super!==null&&_super.apply(this,arguments)||this}return SQFlash}(WarMovie.SQFlashStruct));WarMovie.SQFlash=SQFlash})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var StarStruct=(function(_super){__extends(StarStruct,_super);function StarStruct(){return _super.call(this)||this}StarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","Star"))};StarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};StarStruct.URL="ui://y6ozucp1r0zd35";StarStruct.DependPackages=["WarMovie","Common"];return StarStruct}(fairygui.GComponent));WarMovie.StarStruct=StarStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Star=(function(_super){__extends(Star,_super);function Star(){return _super!==null&&_super.apply(this,arguments)||this}return Star}(WarMovie.StarStruct));WarMovie.Star=Star})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var StarProgressStruct=(function(_super){__extends(StarProgressStruct,_super);function StarProgressStruct(){return _super.call(this)||this}StarProgressStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","StarProgress"))};StarProgressStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"))};StarProgressStruct.URL="ui://y6ozucp1qbxl6v";StarProgressStruct.DependPackages=["WarMovie"];return StarProgressStruct}(fairygui.GProgressBar));WarMovie.StarProgressStruct=StarProgressStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var StarProgress=(function(_super){__extends(StarProgress,_super);function StarProgress(){return _super!==null&&_super.apply(this,arguments)||this}return StarProgress}(WarMovie.StarProgressStruct));WarMovie.StarProgress=StarProgress})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var StarProgressSmallStruct=(function(_super){__extends(StarProgressSmallStruct,_super);function StarProgressSmallStruct(){return _super.call(this)||this}StarProgressSmallStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","StarProgressSmall"))};StarProgressSmallStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"))};StarProgressSmallStruct.URL="ui://y6ozucp1qbxl71";StarProgressSmallStruct.DependPackages=["WarMovie"];return StarProgressSmallStruct}(fairygui.GProgressBar));WarMovie.StarProgressSmallStruct=StarProgressSmallStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var StarProgressSmall=(function(_super){__extends(StarProgressSmall,_super);function StarProgressSmall(){return _super!==null&&_super.apply(this,arguments)||this}return StarProgressSmall}(WarMovie.StarProgressSmallStruct));WarMovie.StarProgressSmall=StarProgressSmall})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var TargetSiccesItemStruct=(function(_super){__extends(TargetSiccesItemStruct,_super);function TargetSiccesItemStruct(){return _super.call(this)||this}TargetSiccesItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","targetSiccesItem"))};TargetSiccesItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon1=(this.getChild("icon1"));this.m_val1=(this.getChild("val1"));this.m_starList=(this.getChild("starList"))};TargetSiccesItemStruct.URL="ui://y6ozucp1h8qae0";TargetSiccesItemStruct.DependPackages=["WarMovie","Common"];return TargetSiccesItemStruct}(fairygui.GComponent));WarMovie.TargetSiccesItemStruct=TargetSiccesItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var TargetSiccesItem=(function(_super){__extends(TargetSiccesItem,_super);function TargetSiccesItem(){return _super!==null&&_super.apply(this,arguments)||this}return TargetSiccesItem}(WarMovie.TargetSiccesItemStruct));WarMovie.TargetSiccesItem=TargetSiccesItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Touxiang120Struct=(function(_super){__extends(Touxiang120Struct,_super);function Touxiang120Struct(){return _super.call(this)||this}Touxiang120Struct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","touxiang120"))};Touxiang120Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};Touxiang120Struct.URL="ui://y6ozucp1cvs8d0";Touxiang120Struct.DependPackages=["WarMovie","Common"];return Touxiang120Struct}(fairygui.GLabel));WarMovie.Touxiang120Struct=Touxiang120Struct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Touxiang120=(function(_super){__extends(Touxiang120,_super);function Touxiang120(){return _super!==null&&_super.apply(this,arguments)||this}return Touxiang120}(WarMovie.Touxiang120Struct));WarMovie.Touxiang120=Touxiang120})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Touxiang160Struct=(function(_super){__extends(Touxiang160Struct,_super);function Touxiang160Struct(){return _super.call(this)||this}Touxiang160Struct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","touxiang160"))};Touxiang160Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};Touxiang160Struct.URL="ui://y6ozucp1xfnlci";Touxiang160Struct.DependPackages=["WarMovie","Common"];return Touxiang160Struct}(fairygui.GLabel));WarMovie.Touxiang160Struct=Touxiang160Struct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Touxiang160=(function(_super){__extends(Touxiang160,_super);function Touxiang160(){return _super!==null&&_super.apply(this,arguments)||this}return Touxiang160}(WarMovie.Touxiang160Struct));WarMovie.Touxiang160=Touxiang160})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Touxiang44Struct=(function(_super){__extends(Touxiang44Struct,_super);function Touxiang44Struct(){return _super.call(this)||this}Touxiang44Struct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","touxiang44"))};Touxiang44Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};Touxiang44Struct.URL="ui://y6ozucp1xfnlan";Touxiang44Struct.DependPackages=["WarMovie","Common"];return Touxiang44Struct}(fairygui.GLabel));WarMovie.Touxiang44Struct=Touxiang44Struct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Touxiang44=(function(_super){__extends(Touxiang44,_super);function Touxiang44(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(Touxiang44.prototype,"AvatarId",{set:function(id){var cfg=Game.config.avatar.getConfig(id);if(cfg){this.Icon=cfg.bodyIconUrl;this.Vector=cfg.co_vector}},enumerable:true,configurable:true});Object.defineProperty(Touxiang44.prototype,"Icon",{set:function(url){this.m_icon.url=url},enumerable:true,configurable:true});Object.defineProperty(Touxiang44.prototype,"Vector",{set:function(pos){this.m_icon.x=isNaN(pos.x)?-34:0-pos.x;this.m_icon.y=isNaN(pos.y)?-3:0-pos.y},enumerable:true,configurable:true});return Touxiang44}(WarMovie.Touxiang44Struct));WarMovie.Touxiang44=Touxiang44})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Touxiang80Struct=(function(_super){__extends(Touxiang80Struct,_super);function Touxiang80Struct(){return _super.call(this)||this}Touxiang80Struct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","touxiang80"))};Touxiang80Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};Touxiang80Struct.URL="ui://y6ozucp1xfnlch";Touxiang80Struct.DependPackages=["WarMovie","Common"];return Touxiang80Struct}(fairygui.GLabel));WarMovie.Touxiang80Struct=Touxiang80Struct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Touxiang80=(function(_super){__extends(Touxiang80,_super);function Touxiang80(){return _super!==null&&_super.apply(this,arguments)||this}return Touxiang80}(WarMovie.Touxiang80Struct));WarMovie.Touxiang80=Touxiang80})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Touxiang80noMaskStruct=(function(_super){__extends(Touxiang80noMaskStruct,_super);function Touxiang80noMaskStruct(){return _super.call(this)||this}Touxiang80noMaskStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","touxiang80noMask"))};Touxiang80noMaskStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};Touxiang80noMaskStruct.URL="ui://y6ozucp1xfnlcp";Touxiang80noMaskStruct.DependPackages=["WarMovie","Common"];return Touxiang80noMaskStruct}(fairygui.GComponent));WarMovie.Touxiang80noMaskStruct=Touxiang80noMaskStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Touxiang80noMask=(function(_super){__extends(Touxiang80noMask,_super);function Touxiang80noMask(){return _super!==null&&_super.apply(this,arguments)||this}return Touxiang80noMask}(WarMovie.Touxiang80noMaskStruct));WarMovie.Touxiang80noMask=Touxiang80noMask})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActor120Struct=(function(_super){__extends(WarActor120Struct,_super);function WarActor120Struct(){return _super.call(this)||this}WarActor120Struct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarActor120"))};WarActor120Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};WarActor120Struct.URL="ui://y6ozucp1cvs8cz";WarActor120Struct.DependPackages=["WarMovie","Common"];return WarActor120Struct}(fairygui.GComponent));WarMovie.WarActor120Struct=WarActor120Struct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActor120=(function(_super){__extends(WarActor120,_super);function WarActor120(){return _super!==null&&_super.apply(this,arguments)||this}WarActor120.prototype.setIcon=function(iconPath){this.m_icon.m_icon.icon=iconPath};return WarActor120}(WarMovie.WarActor120Struct));WarMovie.WarActor120=WarActor120})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActor160Struct=(function(_super){__extends(WarActor160Struct,_super);function WarActor160Struct(){return _super.call(this)||this}WarActor160Struct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarActor160"))};WarActor160Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};WarActor160Struct.URL="ui://y6ozucp1qbxl6n";WarActor160Struct.DependPackages=["WarMovie","Common"];return WarActor160Struct}(fairygui.GComponent));WarMovie.WarActor160Struct=WarActor160Struct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActor160=(function(_super){__extends(WarActor160,_super);function WarActor160(){return _super!==null&&_super.apply(this,arguments)||this}WarActor160.prototype.setIcon=function(iconPath){this.m_icon.m_icon.icon=iconPath};return WarActor160}(WarMovie.WarActor160Struct));WarMovie.WarActor160=WarActor160})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActor44Struct=(function(_super){__extends(WarActor44Struct,_super);function WarActor44Struct(){return _super.call(this)||this}WarActor44Struct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarActor44"))};WarActor44Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};WarActor44Struct.URL="ui://y6ozucp1xfnlck";WarActor44Struct.DependPackages=["WarMovie","Common"];return WarActor44Struct}(fairygui.GComponent));WarMovie.WarActor44Struct=WarActor44Struct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActor44=(function(_super){__extends(WarActor44,_super);function WarActor44(){return _super!==null&&_super.apply(this,arguments)||this}WarActor44.prototype.setIcon=function(iconPath){this.m_icon.m_icon.icon=iconPath};WarActor44.prototype.Render=function(actor){this.m_icon.AvatarId=actor.config.avatar};Object.defineProperty(WarActor44.prototype,"ActorId",{set:function(id){var cfg=Game.config.actor.getConfig(id);this.m_icon.AvatarId=cfg.avatar},enumerable:true,configurable:true});Object.defineProperty(WarActor44.prototype,"AvatarId",{set:function(id){this.m_icon.AvatarId=id},enumerable:true,configurable:true});return WarActor44}(WarMovie.WarActor44Struct));WarMovie.WarActor44=WarActor44})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActor80Struct=(function(_super){__extends(WarActor80Struct,_super);function WarActor80Struct(){return _super.call(this)||this}WarActor80Struct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarActor80"))};WarActor80Struct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};WarActor80Struct.URL="ui://y6ozucp1xfnlcj";WarActor80Struct.DependPackages=["WarMovie","Common"];return WarActor80Struct}(fairygui.GLabel));WarMovie.WarActor80Struct=WarActor80Struct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActor80=(function(_super){__extends(WarActor80,_super);function WarActor80(){return _super!==null&&_super.apply(this,arguments)||this}WarActor80.prototype.setIcon=function(iconPath){this.m_icon.m_icon.icon=iconPath};return WarActor80}(WarMovie.WarActor80Struct));WarMovie.WarActor80=WarActor80})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActor80noMaskStruct=(function(_super){__extends(WarActor80noMaskStruct,_super);function WarActor80noMaskStruct(){return _super.call(this)||this}WarActor80noMaskStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarActor80noMask"))};WarActor80noMaskStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};WarActor80noMaskStruct.URL="ui://y6ozucp1xfnlcq";WarActor80noMaskStruct.DependPackages=["WarMovie","Common"];return WarActor80noMaskStruct}(fairygui.GComponent));WarMovie.WarActor80noMaskStruct=WarActor80noMaskStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActor80noMask=(function(_super){__extends(WarActor80noMask,_super);function WarActor80noMask(){return _super!==null&&_super.apply(this,arguments)||this}WarActor80noMask.prototype.setIcon=function(iconPath){this.m_icon.m_icon.icon=iconPath};return WarActor80noMask}(WarMovie.WarActor80noMaskStruct));WarMovie.WarActor80noMask=WarActor80noMask})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActorItemStruct=(function(_super){__extends(WarActorItemStruct,_super);function WarActorItemStruct(){return _super.call(this)||this}WarActorItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarActorItem"))};WarActorItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_YRHave=this.getController("YRHave");this.m_isUse=this.getController("isUse");this.m_Icon=(this.getChild("Icon"));this.m_yrName=(this.getChild("yrName"));this.m_attribute1=(this.getChild("attribute1"));this.m_attribute2=(this.getChild("attribute2"));this.m_attribute1Val=(this.getChild("attribute1Val"));this.m_attribute2Val=(this.getChild("attribute2Val"));this.m_temName=(this.getChild("temName"));this.m_costIcon=(this.getChild("costIcon"));this.m_costVal=(this.getChild("costVal"));this.m_freeCost=(this.getChild("freeCost"));this.m_tip1=(this.getChild("tip1"));this.m_tip2=(this.getChild("tip2"));this.m_filmStar=(this.getChild("filmStar"));this.m_okBtn=(this.getChild("okBtn"));this.m_infBtn=(this.getChild("infBtn"))};WarActorItemStruct.URL="ui://y6ozucp1qbxl62";WarActorItemStruct.DependPackages=["WarMovie","Common"];return WarActorItemStruct}(fairygui.GButton));WarMovie.WarActorItemStruct=WarActorItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActorItem=(function(_super){__extends(WarActorItem,_super);function WarActorItem(){return _super!==null&&_super.apply(this,arguments)||this}WarActorItem.prototype.setDataEmpty=function(){var temActor=Game.moduleModel.warData.temActor;this.m_YRHave.setSelectedIndex(1);this.m_isUse.setSelectedIndex(0);this.m_Icon.icon=Game.config.avatar.getConfig(temActor.config.avatar).bodyIconUrl;this.m_yrName.text=temActor.name;this.m_temName.text=TEXT.NoAttAdd;this.m_freeCost.text=TEXT.CostFree;this.m_okBtn.text=TEXT.SYNTH};WarActorItem.prototype.setData=function(data,charcterData){this.m_okBtn.text=TEXT.SYNTH;this.m_YRHave.setSelectedIndex(0);this.m_yrName.text=format(TEXT.NameLV,data.name,data.level);this.m_filmStar.m_starList.numItems=data.config.starNum;this.m_Icon.icon=Game.config.avatar.getConfig(data.config.avatar).bodyIconUrl;var effect=charcterData.geteffectVal;this.m_attribute1Val.text=formatNumberUnit(this.getEffectValue(effect[0],data));this.m_attribute2Val.text=formatNumberUnit(this.getEffectValue(effect[1],data));Games.WarLoadPic.setIcon(this.m_attribute1,effect[0]);Games.WarLoadPic.setIcon(this.m_attribute2,effect[1]);if(data.id===9997){this.m_costVal.text="0"}else{this.m_costVal.text=formatNumberUnit(data.PayForFilming(charcterData.type),1)}this.m_costIcon.icon=Game.config.avatar.getConfig(Game.config.item.getConfig(EItemId.dollar).icon).iconUrl};WarActorItem.prototype.getEffectValue=function(effect,data){var result=0;switch(effect){case 1601:result=data.spectacle;break;case 1602:result=data.perform;break;case 1603:result=data.plot;break;case 1604:result=data.art;break;case 1605:result=data.entertainment;break}return result};return WarActorItem}(WarMovie.WarActorItemStruct));WarMovie.WarActorItem=WarActorItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActorItemShowStruct=(function(_super){__extends(WarActorItemShowStruct,_super);function WarActorItemShowStruct(){return _super.call(this)||this}WarActorItemShowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarActorItemShow"))};WarActorItemShowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_name=(this.getChild("name"));this.m_type=(this.getChild("type"));this.m_reqTip=(this.getChild("reqTip"));this.m_sexIcon=(this.getChild("sexIcon"));this.m_sexReq=(this.getChild("sexReq"));this.m_countryIcon=(this.getChild("countryIcon"));this.m_countryReq=(this.getChild("countryReq"));this.m_showIcon=(this.getChild("showIcon"));this.m_showReq=(this.getChild("showReq"));this.m_ageIcon=(this.getChild("ageIcon"));this.m_ageReq=(this.getChild("ageReq"));this.m_reqTip2=(this.getChild("reqTip2"));this.m_property1=(this.getChild("property1"));this.m_propertyup1=(this.getChild("propertyup1"));this.m_property1Req=(this.getChild("property1Req"));this.m_property2=(this.getChild("property2"));this.m_propertyup2=(this.getChild("propertyup2"));this.m_property2Req=(this.getChild("property2Req"));this.m_des=(this.getChild("des"))};WarActorItemShowStruct.URL="ui://y6ozucp1qbxl9c";WarActorItemShowStruct.DependPackages=["WarMovie","Common"];return WarActorItemShowStruct}(fairygui.GComponent));WarMovie.WarActorItemShowStruct=WarActorItemShowStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActorItemShow=(function(_super){__extends(WarActorItemShow,_super);function WarActorItemShow(){return _super!==null&&_super.apply(this,arguments)||this}WarActorItemShow.prototype.setData=function(data){this.m_type.text=data.getType;this.m_name.text=data.getName;this.m_des.setData(data.getDes);if(data.sex>0){this.m_sexReq.visible=true;Games.WarLoadPic.setIcon(this.m_sexIcon,data.sex)}else{this.m_sexReq.visible=false}if(data.country>0){this.m_countryReq.visible=true;Games.WarLoadPic.setIcon(this.m_countryIcon,data.country)}else{this.m_countryReq.visible=false}if(data.show_type>0){this.m_showReq.visible=true;Games.WarLoadPic.setIcon(this.m_showIcon,data.show_type)}else{this.m_showReq.visible=false}if(data.getReqageType>0){this.m_ageReq.visible=true;Games.WarLoadPic.setIcon(this.m_ageIcon,data.getReqageType)}else{this.m_ageReq.visible=false}var conf2=Game.config.property.getConfig(data.effect[0]).icon;this.m_property1.icon=Game.config.avatar.getConfig(conf2).iconUrl;var conf3=Game.config.property.getConfig(data.effect[1]).icon;this.m_property2.icon=Game.config.avatar.getConfig(conf3).iconUrl};return WarActorItemShow}(WarMovie.WarActorItemShowStruct));WarMovie.WarActorItemShow=WarActorItemShow})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActorProficiencyItemStruct=(function(_super){__extends(WarActorProficiencyItemStruct,_super);function WarActorProficiencyItemStruct(){return _super.call(this)||this}WarActorProficiencyItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarActorProficiencyItem"))};WarActorProficiencyItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_name=(this.getChild("name"));this.m_tip=(this.getChild("tip"));this.m_lv=(this.getChild("lv"));this.m_icon=(this.getChild("icon"));this.m_progress=(this.getChild("progress"))};WarActorProficiencyItemStruct.URL="ui://y6ozucp1qbxl6l";WarActorProficiencyItemStruct.DependPackages=["WarMovie","System","Common"];return WarActorProficiencyItemStruct}(fairygui.GComponent));WarMovie.WarActorProficiencyItemStruct=WarActorProficiencyItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActorProficiencyItem=(function(_super){__extends(WarActorProficiencyItem,_super);function WarActorProficiencyItem(){return _super!==null&&_super.apply(this,arguments)||this}WarActorProficiencyItem.prototype.setData=function(data,index){this.m_name.text=data.name;this.m_icon.setIcon(Game.config.avatar.getConfig(data.config.avatar).bodyIconUrl);this.m_lv.text=format(TEXT.Lv,data.level);this.prop=data.getShootType(Game.moduleModel.warData.moveData.type+400);if(this.prop){this.config=Game.config.actorProficiency.getConfig(Game.moduleModel.warData.moveData.type*100+this.prop.proficiencyLevel);this.add=Game.moduleModel.warData.moveData.actorShootType[Game.moduleModel.warData.proficiencyForActor.getValue(index+1)];this.checkProgress(data,index)}else{this.compleOver()}};WarActorProficiencyItem.prototype.checkProgress=function(data,index){var showLv=this.prop.proficiencyLevel;var curExp=this.prop.proficiencyExp;if(curExp-this.add>=0){this.m_progress.max=this.config.exp;this.m_progress.value=curExp-this.add;laya.utils.Tween.to(this.m_progress,{value:curExp},1000,Laya.Ease.linearIn,Laya.Handler.create(this,this.compleOver));this.m_tip.text=format(TEXT.FilmProficiency,showLv,this.add)}else{showLv--;var preConfig=Game.config.actorProficiency.getConfig(Game.moduleModel.warData.moveData.type*100+showLv);this.m_progress.max=preConfig.exp;this.m_progress.value=curExp+preConfig.exp-this.add;laya.utils.Tween.to(this.m_progress,{value:preConfig.exp},1000,Laya.Ease.linearIn,Laya.Handler.create(this,this.compleProgress));this.m_tip.text=format(TEXT.FilmProficiency,showLv,this.add)}};WarActorProficiencyItem.prototype.compleProgress=function(){this.m_progress.max=this.config.exp;this.m_progress.value=0;laya.utils.Tween.to(this.m_progress,{value:this.prop.proficiencyExp},1000,Laya.Ease.linearIn,Laya.Handler.create(this,this.compleOver));this.m_tip.text=format(TEXT.FilmProficiency,this.prop.proficiencyLevel,this.add)};WarActorProficiencyItem.prototype.compleOver=function(){Game.moduleModel.warData.sProficiencyUpdate.dispatch()};return WarActorProficiencyItem}(WarMovie.WarActorProficiencyItemStruct));WarMovie.WarActorProficiencyItem=WarActorProficiencyItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActorPropertyStruct=(function(_super){__extends(WarActorPropertyStruct,_super);function WarActorPropertyStruct(){return _super.call(this)||this}WarActorPropertyStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarActorProperty"))};WarActorPropertyStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};WarActorPropertyStruct.URL="ui://y6ozucp1yytj5p";WarActorPropertyStruct.DependPackages=["WarMovie"];return WarActorPropertyStruct}(fairygui.GComponent));WarMovie.WarActorPropertyStruct=WarActorPropertyStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActorProperty=(function(_super){__extends(WarActorProperty,_super);function WarActorProperty(){return _super!==null&&_super.apply(this,arguments)||this}return WarActorProperty}(WarMovie.WarActorPropertyStruct));WarMovie.WarActorProperty=WarActorProperty})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActorSelectTipStruct=(function(_super){__extends(WarActorSelectTipStruct,_super);function WarActorSelectTipStruct(){return _super.call(this)||this}WarActorSelectTipStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarActorSelectTip"))};WarActorSelectTipStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};WarActorSelectTipStruct.URL="ui://y6ozucp1yytj5q";WarActorSelectTipStruct.DependPackages=["WarMovie"];return WarActorSelectTipStruct}(fairygui.GLabel));WarMovie.WarActorSelectTipStruct=WarActorSelectTipStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActorSelectTip=(function(_super){__extends(WarActorSelectTip,_super);function WarActorSelectTip(){return _super!==null&&_super.apply(this,arguments)||this}return WarActorSelectTip}(WarMovie.WarActorSelectTipStruct));WarMovie.WarActorSelectTip=WarActorSelectTip})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActorShowItemStruct=(function(_super){__extends(WarActorShowItemStruct,_super);function WarActorShowItemStruct(){return _super.call(this)||this}WarActorShowItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarActorShowItem"))};WarActorShowItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bg=(this.getChild("bg"));this.m_icon=(this.getChild("icon"));this.m_1=(this.getChild("1"));this.m_2=(this.getChild("2"));this.m_3=(this.getChild("3"));this.m_4=(this.getChild("4"));this.m_5=(this.getChild("5"));this.m_left=(this.getChild("left"));this.m_right=(this.getChild("right"));this.m_mask=(this.getChild("mask"));this.m_t0=this.getTransition("t0")};WarActorShowItemStruct.URL="ui://y6ozucp1kh7oa5";WarActorShowItemStruct.DependPackages=["WarMovie"];return WarActorShowItemStruct}(fairygui.GComponent));WarMovie.WarActorShowItemStruct=WarActorShowItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarActorShowItem=(function(_super){__extends(WarActorShowItem,_super);function WarActorShowItem(){return _super!==null&&_super.apply(this,arguments)||this}WarActorShowItem.prototype.setRandomIcon=function(actorId){var config=Game.config.actor.getConfig(actorId);this.m_icon.icon=Game.config.avatar.getConfig(config.avatar).bodyIconUrl;var list=Game.config.actor.getConfigList();this.m_1.icon=Game.config.avatar.getConfig(list[Random.range(1,list.length)].avatar).bodyIconUrl;this.m_2.icon=Game.config.avatar.getConfig(list[Random.range(1,list.length)].avatar).bodyIconUrl;this.m_3.icon=Game.config.avatar.getConfig(list[Random.range(1,list.length)].avatar).bodyIconUrl;this.m_4.icon=Game.config.avatar.getConfig(list[Random.range(1,list.length)].avatar).bodyIconUrl;this.m_5.icon=Game.config.avatar.getConfig(list[Random.range(1,list.length)].avatar).bodyIconUrl};return WarActorShowItem}(WarMovie.WarActorShowItemStruct));WarMovie.WarActorShowItem=WarActorShowItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarAttributeUpTipStruct=(function(_super){__extends(WarAttributeUpTipStruct,_super);function WarAttributeUpTipStruct(){return _super.call(this)||this}WarAttributeUpTipStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarAttributeUpTip"))};WarAttributeUpTipStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"));this.m_t0=this.getTransition("t0")};WarAttributeUpTipStruct.URL="ui://y6ozucp1moqedl";WarAttributeUpTipStruct.DependPackages=["WarMovie","Common"];return WarAttributeUpTipStruct}(fairygui.GComponent));WarMovie.WarAttributeUpTipStruct=WarAttributeUpTipStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarAttributeUpTip=(function(_super){__extends(WarAttributeUpTip,_super);function WarAttributeUpTip(){return _super!==null&&_super.apply(this,arguments)||this}WarAttributeUpTip.prototype.setData=function(data){Games.WarLoadPic.setIcon(this.m_icon,data.icon);this.m_title.text=data.str};return WarAttributeUpTip}(WarMovie.WarAttributeUpTipStruct));WarMovie.WarAttributeUpTip=WarAttributeUpTip})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarAudienceItemStruct=(function(_super){__extends(WarAudienceItemStruct,_super);function WarAudienceItemStruct(){return _super.call(this)||this}WarAudienceItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarAudienceItem"))};WarAudienceItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_name=(this.getChild("name"));this.m_score=(this.getChild("score"));this.m_actor=(this.getChild("actor"));this.m_des=(this.getChild("des"));this.m_t0=this.getTransition("t0")};WarAudienceItemStruct.URL="ui://y6ozucp1qbxl74";WarAudienceItemStruct.DependPackages=["WarMovie","Common"];return WarAudienceItemStruct}(fairygui.GComponent));WarMovie.WarAudienceItemStruct=WarAudienceItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarAudienceItem=(function(_super){__extends(WarAudienceItem,_super);function WarAudienceItem(){return _super!==null&&_super.apply(this,arguments)||this}WarAudienceItem.prototype.setData=function(val,index){var conf=Game.config.movieAudienceEvaluation.getMovieAudience(val);while(!conf){conf=Game.config.movieAudienceEvaluation.getMovieAudience(50)}this.m_name.text=conf.name;this.m_des.text=conf.content;this.m_score.text=val.toFixed(0);if(index<4){this.m_t0.play(laya.utils.Handler.create(this,function(){Game.moduleModel.warData.sAudienceUpdate.dispatch()}),1)}else{this.m_t0.stop();Game.moduleModel.warData.sAudienceUpdate.dispatch()}this.m_actor.setIcon(Games.WarLoadPic.getAvatarIcon(conf.pic))};return WarAudienceItem}(WarMovie.WarAudienceItemStruct));WarMovie.WarAudienceItem=WarAudienceItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarAudienceReputationStruct=(function(_super){__extends(WarAudienceReputationStruct,_super);function WarAudienceReputationStruct(){return _super.call(this)||this}WarAudienceReputationStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarAudienceReputation"))};WarAudienceReputationStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_filmName=(this.getChild("filmName"));this.m_scorTip=(this.getChild("scorTip"));this.m_score=(this.getChild("score"));this.m_typeList=(this.getChild("typeList"));this.m_audTip2=(this.getChild("audTip2"));this.m_audTip3=(this.getChild("audTip3"));this.m_audTip4=(this.getChild("audTip4"));this.m_audTip5=(this.getChild("audTip5"));this.m_filmInf=(this.getChild("filmInf"));this.m_filmDes=(this.getChild("filmDes"));this.m_audienceProgress=(this.getChild("audienceProgress"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_okBtn=(this.getChild("okBtn"))};WarAudienceReputationStruct.URL="ui://y6ozucp1qbxl73";WarAudienceReputationStruct.DependPackages=["WarMovie","System","Common"];return WarAudienceReputationStruct}(fairygui.GComponent));WarMovie.WarAudienceReputationStruct=WarAudienceReputationStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarAudienceReputation=(function(_super){__extends(WarAudienceReputation,_super);function WarAudienceReputation(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.curIndexOf=0;return _this}WarAudienceReputation.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.AudienceReputationTitle;this.m_closeBtn.visible=false;this.m_typeList.itemRenderer=Laya.Handler.create(this,this.initItem,null,false);this.m_okBtn.onClick(this,this.onClickOkBtn)};WarAudienceReputation.prototype.onClickOkBtn=function(){this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.sendUpdateMovieState()};WarAudienceReputation.prototype.onWindowShow=function(){Game.moduleModel.warData.sAudienceUpdate.add(this.updateList,this);this.clearData();this.setDataBefor();this.setData()};WarAudienceReputation.prototype.clearData=function(){this.m_okBtn.visible=false;this.m_audienceProgress.value=0;this.m_score.text="";this.m_filmName.text="";this.m_typeList.numItems=0};WarAudienceReputation.prototype.onWindowHide=function(){Game.moduleModel.warData.sAudienceUpdate.remove(this.updateList,this)};WarAudienceReputation.prototype.setDataBefor=function(){this.moduleMain=this.moduleWindow.mainWindow;this.m_audienceProgress.value=0;this.m_filmName.text=Game.moduleModel.warData.moveData.name;this.m_filmInf.setData(Game.moduleModel.warData.moveStory);this.m_filmDes.setData(Game.moduleModel.warData.moveStory.filmDes);this.m_score.text=Game.moduleModel.warData.moveData.publicPraise.toFixed(0);this.curIndexOf=0};WarAudienceReputation.prototype.setData=function(){laya.utils.Tween.to(this.m_audienceProgress,{value:Game.moduleModel.warData.moveData.publicPraise},1000,Laya.Ease.linearIn,null);this.updateList()};WarAudienceReputation.prototype.updateList=function(){if(this.curIndexOf<10){this.curIndexOf++;this.m_typeList.numItems=this.curIndexOf}else{this.m_okBtn.visible=true;this.curIndexOf=11}};WarAudienceReputation.prototype.initItem=function(index,obj){if(index===this.curIndexOf-1){var item=obj;var min=Game.moduleModel.warData.moveData.publicPraise-20;var max=Game.moduleModel.warData.moveData.publicPraise+20;if(min<1){min=1}if(max>100){max=100}item.setData(Random.rangeBoth(min,max),index)}};return WarAudienceReputation}(WarMovie.WarAudienceReputationStruct));WarMovie.WarAudienceReputation=WarAudienceReputation})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarBgCloseBtnStruct=(function(_super){__extends(WarBgCloseBtnStruct,_super);function WarBgCloseBtnStruct(){return _super.call(this)||this}WarBgCloseBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarBgCloseBtn"))};WarBgCloseBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_closeBtn=(this.getChild("closeBtn"))};WarBgCloseBtnStruct.URL="ui://y6ozucp1icyf9y";WarBgCloseBtnStruct.DependPackages=["WarMovie","Common"];return WarBgCloseBtnStruct}(fairygui.GButton));WarMovie.WarBgCloseBtnStruct=WarBgCloseBtnStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarBgCloseBtn=(function(_super){__extends(WarBgCloseBtn,_super);function WarBgCloseBtn(){return _super!==null&&_super.apply(this,arguments)||this}return WarBgCloseBtn}(WarMovie.WarBgCloseBtnStruct));WarMovie.WarBgCloseBtn=WarBgCloseBtn})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarBtnStruct=(function(_super){__extends(WarBtnStruct,_super);function WarBtnStruct(){return _super.call(this)||this}WarBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarBtn"))};WarBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};WarBtnStruct.URL="ui://y6ozucp1qbxl92";WarBtnStruct.DependPackages=["WarMovie"];return WarBtnStruct}(fairygui.GButton));WarMovie.WarBtnStruct=WarBtnStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarBtn=(function(_super){__extends(WarBtn,_super);function WarBtn(){return _super!==null&&_super.apply(this,arguments)||this}return WarBtn}(WarMovie.WarBtnStruct));WarMovie.WarBtn=WarBtn})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarbubbleStruct=(function(_super){__extends(WarbubbleStruct,_super);function WarbubbleStruct(){return _super.call(this)||this}WarbubbleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","Warbubble"))};WarbubbleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_lv=this.getController("lv");this.m_icon0=(this.getChild("icon0"));this.m_icon1=(this.getChild("icon1"));this.m_icon3=(this.getChild("icon3"));this.m_icon4=(this.getChild("icon4"));this.m_title=(this.getChild("title"));this.m_t0=this.getTransition("t0")};WarbubbleStruct.URL="ui://y6ozucp1r0zd3t";WarbubbleStruct.DependPackages=["WarMovie"];return WarbubbleStruct}(fairygui.GLabel));WarMovie.WarbubbleStruct=WarbubbleStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Warbubble=(function(_super){__extends(Warbubble,_super);function Warbubble(){return _super!==null&&_super.apply(this,arguments)||this}Warbubble.prototype.setData=function(data){this.m_title.text=data.strTip;var lv=data.lv;if(lv<1){lv=1}if(lv>4){lv=4}this.m_lv.setSelectedIndex(lv-1)};return Warbubble}(WarMovie.WarbubbleStruct));WarMovie.Warbubble=Warbubble})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarCinemaItemStruct=(function(_super){__extends(WarCinemaItemStruct,_super);function WarCinemaItemStruct(){return _super.call(this)||this}WarCinemaItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarCinemaItem"))};WarCinemaItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_okBtn=(this.getChild("okBtn"))};WarCinemaItemStruct.URL="ui://y6ozucp1qbxl6t";WarCinemaItemStruct.DependPackages=["WarMovie"];return WarCinemaItemStruct}(fairygui.GLabel));WarMovie.WarCinemaItemStruct=WarCinemaItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarCinemaItem=(function(_super){__extends(WarCinemaItem,_super);function WarCinemaItem(){return _super!==null&&_super.apply(this,arguments)||this}WarCinemaItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_okBtn.onClick(this,this.onClickSelectBtn)};WarCinemaItem.prototype.setData=function(data,index,moduleModels){this.dataid=data.id;this.moduleModels=moduleModels;if(this.dataid===Game.moduleModel.warData.emptyCinemalist[0]||this.dataid===Game.moduleModel.warData.emptyCinemalist[1]){this.m_c1.setSelectedIndex(0);var blockLevel=Game.config.blockLevel.getConfig(data.unlock);this.m_title.text=format(Game.config.msg.getConfig(MsgKey.movie_unlock_cinema_tips).notice,blockLevel.name)}else{this.m_c1.setSelectedIndex(1);this.m_title.text=format(Game.config.msg.getConfig(MsgKey.movie_cinema_tips).notice,data.sign_level,formatNumberUnit(data.num))}this.m_icon.icon=Game.config.avatar.getConfig(data.pic).iconUrl};WarCinemaItem.prototype.onClickSelectBtn=function(){this.moduleMain=this.moduleModels.mainWindow;this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.setPublishMovie(this.dataid)};return WarCinemaItem}(WarMovie.WarCinemaItemStruct));WarMovie.WarCinemaItem=WarCinemaItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarCinemaSelectionStruct=(function(_super){__extends(WarCinemaSelectionStruct,_super);function WarCinemaSelectionStruct(){return _super.call(this)||this}WarCinemaSelectionStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarCinemaSelection"))};WarCinemaSelectionStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_allTip=(this.getChild("allTip"));this.m_title=(this.getChild("title"));this.m_yxList=(this.getChild("yxList"));this.m_closeBtn=(this.getChild("closeBtn"))};WarCinemaSelectionStruct.URL="ui://y6ozucp1qbxl6s";WarCinemaSelectionStruct.DependPackages=["WarMovie","Common","System"];return WarCinemaSelectionStruct}(fairygui.GComponent));WarMovie.WarCinemaSelectionStruct=WarCinemaSelectionStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarCinemaSelection=(function(_super){__extends(WarCinemaSelection,_super);function WarCinemaSelection(){return _super!==null&&_super.apply(this,arguments)||this}WarCinemaSelection.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.CinemaSelectionTitle;this.m_yxList.itemRenderer=Laya.Handler.create(this,this.initItem,null,false);this.m_closeBtn.onClick(this,this.onClickClose)};WarCinemaSelection.prototype.onClickClose=function(){this.moduleMain.conent.startShowWaiting();this.moduleMain.menuClose()};WarCinemaSelection.prototype.onWindowShow=function(){this.setData()};WarCinemaSelection.prototype.onWindowHide=function(){};WarCinemaSelection.prototype.setData=function(){this.moduleMain=this.moduleWindow.mainWindow;this.cinList=Game.moduleModel.warData.cinemaList();this.m_yxList.numItems=this.cinList.length};WarCinemaSelection.prototype.initItem=function(index,obj){var item=obj;item.setData(this.cinList[index],index,this.moduleWindow)};return WarCinemaSelection}(WarMovie.WarCinemaSelectionStruct));WarMovie.WarCinemaSelection=WarCinemaSelection})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarCityItemStruct=(function(_super){__extends(WarCityItemStruct,_super);function WarCityItemStruct(){return _super.call(this)||this}WarCityItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarCityItem"))};WarCityItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_gray=this.getController("gray");this.m_icon=(this.getChild("icon"));this.m_iconGray=(this.getChild("iconGray"));this.m_title=(this.getChild("title"))};WarCityItemStruct.URL="ui://y6ozucp1qbxl8b";WarCityItemStruct.DependPackages=["WarMovie"];return WarCityItemStruct}(fairygui.GButton));WarMovie.WarCityItemStruct=WarCityItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarCityItem=(function(_super){__extends(WarCityItem,_super);function WarCityItem(){return _super!==null&&_super.apply(this,arguments)||this}WarCityItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickBtn)};WarCityItem.prototype.onClickBtn=function(){if(!this.selectedThis){this.selectedCallBack(this.curData)}};WarCityItem.prototype.setData=function(cityData,curCity,selectedCallBack){this.curData=cityData;this.curCity=curCity;this.selectedCallBack=selectedCallBack;if(this.curCity!==null&&this.curCity.id===cityData.id){this.selectedThis=true}else{this.selectedThis=false}this.selected=this.selectedThis;this.m_title.text=cityData.num.toFixed(0)+"."+cityData.name;if(cityData.state===Games.CityStateEnum.hasOccupy){this.m_gray.setSelectedIndex(0)}else{this.m_gray.setSelectedIndex(1)}};return WarCityItem}(WarMovie.WarCityItemStruct));WarMovie.WarCityItem=WarCityItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarContinueRewardItemStruct=(function(_super){__extends(WarContinueRewardItemStruct,_super);function WarContinueRewardItemStruct(){return _super.call(this)||this}WarContinueRewardItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarContinueRewardItem"))};WarContinueRewardItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_icon=(this.getChild("icon"))};WarContinueRewardItemStruct.URL="ui://y6ozucp1qbxl87";WarContinueRewardItemStruct.DependPackages=["WarMovie","Common"];return WarContinueRewardItemStruct}(fairygui.GButton));WarMovie.WarContinueRewardItemStruct=WarContinueRewardItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarContinueRewardItem=(function(_super){__extends(WarContinueRewardItem,_super);function WarContinueRewardItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.openLv=0;_this.itemId=0;return _this}WarContinueRewardItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickOkBtn)};WarContinueRewardItem.prototype.onClickOkBtn=function(){if(this.m_c1.selectedIndex===1){Game.system.showItemInfo(this,this.itemId)}else{Game.system.toastText(format(TEXT.guanzhuduOpenTip,this.openLv))}};WarContinueRewardItem.prototype.setData=function(index,cityPopConfig,curGZLv,noLock){if(noLock===void 0){noLock=false}this.m_c1.setSelectedIndex(0);var conLv=0;var confId=0;this.itemId=0;switch(index){case 0:confId=Game.config.item.getConfig(cityPopConfig.level_out_3).icon;this.itemId=cityPopConfig.level_out_3;if(curGZLv>=3){conLv=1}else{conLv=0;this.openLv=3}break;case 1:confId=Game.config.item.getConfig(cityPopConfig.level_out_7).icon;this.itemId=cityPopConfig.level_out_7;if(curGZLv>=7){conLv=1}else{conLv=0;this.openLv=7}break;case 2:confId=Game.config.item.getConfig(cityPopConfig.level_out_10).icon;this.itemId=cityPopConfig.level_out_10;if(curGZLv>=10){conLv=1}else{conLv=0;this.openLv=10}break;case 3:confId=Game.config.item.getConfig(cityPopConfig.level_out_15).icon;this.itemId=cityPopConfig.level_out_15;if(curGZLv>=15){conLv=1}else{conLv=0;this.openLv=15}break;case 4:confId=Game.config.item.getConfig(cityPopConfig.level_out_20).icon;this.itemId=cityPopConfig.level_out_20;if(curGZLv>=20){conLv=1}else{conLv=0;this.openLv=20}break}this.icon=Game.config.avatar.getConfig(confId).iconUrl;if(noLock){conLv=1}this.m_c1.setSelectedIndex(conLv)};return WarContinueRewardItem}(WarMovie.WarContinueRewardItemStruct));WarMovie.WarContinueRewardItem=WarContinueRewardItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarCostViewStruct=(function(_super){__extends(WarCostViewStruct,_super);function WarCostViewStruct(){return _super.call(this)||this}WarCostViewStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarCostView"))};WarCostViewStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_nameTip=(this.getChild("nameTip"));this.m_yrList=(this.getChild("yrList"));this.m_allTip=(this.getChild("allTip"));this.m_costText=(this.getChild("costText"));this.m_costIcon=(this.getChild("costIcon"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_okBtn=(this.getChild("okBtn"))};WarCostViewStruct.URL="ui://y6ozucp1r0zd2y";WarCostViewStruct.DependPackages=["WarMovie","Common","System"];return WarCostViewStruct}(fairygui.GComponent));WarMovie.WarCostViewStruct=WarCostViewStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarCostView=(function(_super){__extends(WarCostView,_super);function WarCostView(){return _super!==null&&_super.apply(this,arguments)||this}WarCostView.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.FilmCostViewTitle;this.m_yrList.itemRenderer=Laya.Handler.create(this,this.yrCostItem,null,false);this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_closeBtn.onClick(this,this.onClickClose)};WarCostView.prototype.onClickOkBtn=function(){Game.moduleModel.warData.sendUpdateMovieState()};WarCostView.prototype.onClickClose=function(){this.moduleWindow.closeSelf();this.moduleMain.menuClose()};WarCostView.prototype.onWindowShow=function(){this.setData()};WarCostView.prototype.onWindowHide=function(){};WarCostView.prototype.yrCostItem=function(index,obj){var item=obj;item.setData(this.costlist.getValue(index),this.charact.getValue(index))};WarCostView.prototype.setData=function(){this.moduleMain=this.moduleWindow.mainWindow;var list=Game.moduleModel.warData.curYRList;this.costlist=new Dictionary();this.charact=new Dictionary();this.m_nameTip.text=format(Game.config.msg.getConfig(MsgKey.movie_actor_pay).notice,Game.moduleModel.warData.moveStory.filmName);var cost=0;var counts=0;if(list.count>0){var keyList=list.getKeys();for(var i=0;i<keyList.length;i++){var val=list.getValue(keyList[i]);if(val.id!==9999){var charactItem=Game.moduleModel.warData.moveStory.characterProperty[i];if(val.id!==9997){cost+=val.PayForFilming(charactItem.type)}this.charact.add(counts,charactItem);this.costlist.add(counts,val);counts++}}}this.m_costText.text=formatNumberUnit(cost,1);this.m_costIcon.icon=Game.config.avatar.getConfig(Game.config.item.getConfig(EItemId.dollar).icon).iconUrl;this.m_yrList.numItems=counts};return WarCostView}(WarMovie.WarCostViewStruct));WarMovie.WarCostView=WarCostView})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarCurrentMarketInfoStruct=(function(_super){__extends(WarCurrentMarketInfoStruct,_super);function WarCurrentMarketInfoStruct(){return _super.call(this)||this}WarCurrentMarketInfoStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarCurrentMarketInfo"))};WarCurrentMarketInfoStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_des=(this.getChild("des"));this.m_tip1=(this.getChild("tip1"));this.m_tip2=(this.getChild("tip2"));this.m_clickTip=(this.getChild("clickTip"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_men=(this.getChild("men"));this.m_women=(this.getChild("women"));this.m_child=(this.getChild("child"))};WarCurrentMarketInfoStruct.URL="ui://y6ozucp1qbxl8h";WarCurrentMarketInfoStruct.DependPackages=["WarMovie","Common"];return WarCurrentMarketInfoStruct}(fairygui.GComponent));WarMovie.WarCurrentMarketInfoStruct=WarCurrentMarketInfoStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarCurrentMarketInfo=(function(_super){__extends(WarCurrentMarketInfo,_super);function WarCurrentMarketInfo(){return _super!==null&&_super.apply(this,arguments)||this}WarCurrentMarketInfo.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickClose)};WarCurrentMarketInfo.prototype.onClickClose=function(){this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.sendUpdateMovieState()};WarCurrentMarketInfo.prototype.onWindowShow=function(){this.setData()};WarCurrentMarketInfo.prototype.onWindowHide=function(){};WarCurrentMarketInfo.prototype.setData=function(){this.moduleMain=this.moduleWindow.mainWindow;var data=Game.moduleModel.warData.moveStory;var man=Game.moduleModel.warData.moveData.expected[0];var woman=Game.moduleModel.warData.moveData.expected[1];var child=Game.moduleModel.warData.moveData.expected[2];var ok1=this.m_men.setData(data.getMale,man,0);var ok2=this.m_women.setData(data.getFemale,woman,1);var ok3=this.m_child.setData(data.getChild,child,2);var strTip="";if(ok1&&ok2&&ok3){if(Random.rangeBoth(0,1)===0){strTip=Game.config.msg.getConfig(MsgKey.movie_market_good1).notice}else{strTip=Game.config.msg.getConfig(MsgKey.movie_market_good2).notice}}else{if(Random.rangeBoth(0,1)===0){strTip=Game.config.msg.getConfig(MsgKey.movie_market_bad1).notice}else{strTip=Game.config.msg.getConfig(MsgKey.movie_market_bad2).notice}}this.m_des.text=format(strTip,Game.moduleModel.warData.moveData.name)};return WarCurrentMarketInfo}(WarMovie.WarCurrentMarketInfoStruct));WarMovie.WarCurrentMarketInfo=WarCurrentMarketInfo})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarEndIncomeItemStruct=(function(_super){__extends(WarEndIncomeItemStruct,_super);function WarEndIncomeItemStruct(){return _super.call(this)||this}WarEndIncomeItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarEndIncomeItem"))};WarEndIncomeItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_icon=(this.getChild("icon"));this.m_filmName=(this.getChild("filmName"));this.m_shouyipingjia=(this.getChild("shouyipingjia"));this.m_timeLeftTip=(this.getChild("timeLeftTip"));this.m_timeLeft=(this.getChild("timeLeft"));this.m_endBtn=(this.getChild("endBtn"));this.m_okBtn=(this.getChild("okBtn"))};WarEndIncomeItemStruct.URL="ui://y6ozucp1qbxl8f";WarEndIncomeItemStruct.DependPackages=["WarMovie"];return WarEndIncomeItemStruct}(fairygui.GComponent));WarMovie.WarEndIncomeItemStruct=WarEndIncomeItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarEndIncomeItem=(function(_super){__extends(WarEndIncomeItem,_super);function WarEndIncomeItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.curShowBtnIndexOf=0;return _this}WarEndIncomeItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.mainModels=Game.menu.getMenuCtl(MenuId.Home).moduleWindow;this.m_timeLeftTip.text=TEXT.TimeLeftTip;this.m_okBtn.onClick(this,this.onClickClose);this.m_endBtn.onClick(this,this.onClickClose)};WarEndIncomeItem.prototype.onWindowHide=function(){Game.moduleModel.warData.sUpdateEndIncomeTime.remove(this.updateEndIncomeTime,this)};WarEndIncomeItem.prototype.onWindowShow=function(){Game.moduleModel.warData.sUpdateEndIncomeTime.add(this.updateEndIncomeTime,this)};WarEndIncomeItem.prototype.updateEndIncomeTime=function(){this.updateTime(this.curData.remainingTime)};WarEndIncomeItem.prototype.onClickClose=function(){var _this=this;if(this.curShowBtnIndexOf===1){Game.moduleModel.warData.reqDeleteMovie(this.curData.uuid)}else{Game.system.confirmMsg(MsgKey.movie_stop_tips,[Game.config.global.getConfig(GlobalKey.Movie_Stop_Tips).value],"",this,function(){Game.moduleModel.warData.reqDeleteMovie(_this.curData.uuid)},function(){},TEXT.ButtonOk,TEXT.ButtonCannel,false)}};WarEndIncomeItem.prototype.setData=function(data,index){this.indexOf=index;this.curShowBtnIndexOf=0;this.curData=data;this.m_filmName.text=this.curData.moveData.name;var moveStory=Game.config.story.getConfig(this.curData.moveData.movieId);this.m_icon.icon=Game.config.avatar.getConfig(moveStory.poster_name).iconUrl;this.timeTip=this.curData.moveData.totalBoxOffice/(Game.config.global.getConfig(GlobalKey.Extension_box_office_con).value/100)*(this.curData.moveData.attentionValue*Game.config.global.getConfig(GlobalKey.Extension_con).value/100+1)*60;this.updateTime(this.curData.remainingTime)};WarEndIncomeItem.prototype.updateTime=function(val){this.m_timeLeft.text=Games.TimeHelper.TimeFormat3(val);if(val>0){if(this.curShowBtnIndexOf===1){this.curShowBtnIndexOf=0}this.m_shouyipingjia.text=format(TEXT.gainEvaluation,formatNumberUnit(this.timeTip));this.m_c1.setSelectedIndex(this.curShowBtnIndexOf)}else{if(this.curShowBtnIndexOf===0){this.curShowBtnIndexOf=1}this.m_shouyipingjia.text=format(TEXT.gainEvaluationOver,formatNumberUnit(this.curData.incomeValue,1));this.m_c1.setSelectedIndex(this.curShowBtnIndexOf)}};return WarEndIncomeItem}(WarMovie.WarEndIncomeItemStruct));WarMovie.WarEndIncomeItem=WarEndIncomeItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarEndingIncomeStruct=(function(_super){__extends(WarEndingIncomeStruct,_super);function WarEndingIncomeStruct(){return _super.call(this)||this}WarEndingIncomeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarEndingIncome"))};WarEndingIncomeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_filmList=(this.getChild("filmList"));this.m_nameTip=(this.getChild("nameTip"));this.m_title=(this.getChild("title"));this.m_okBtn=(this.getChild("okBtn"))};WarEndingIncomeStruct.URL="ui://y6ozucp1qbxl8c";WarEndingIncomeStruct.DependPackages=["WarMovie","Common","System"];return WarEndingIncomeStruct}(fairygui.GComponent));WarMovie.WarEndingIncomeStruct=WarEndingIncomeStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarEndingIncome=(function(_super){__extends(WarEndingIncome,_super);function WarEndingIncome(){return _super!==null&&_super.apply(this,arguments)||this}WarEndingIncome.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_filmList.itemRenderer=Laya.Handler.create(this,this.initItem,null,false);this.m_okBtn.onClick(this,this.onClickClose)};WarEndingIncome.prototype.onClickClose=function(){this.moduleWindow.closeSelf();this.moduleMain.menuClose()};WarEndingIncome.prototype.onWindowShow=function(){this.setData();Game.event.add(GameEventKey.GameEventKey_MakeFilmWarEndingIncome,this.setData,this);Game.moduleModel.warData.sUpdateContinue.add(this.refreshContinue,this)};WarEndingIncome.prototype.onWindowHide=function(){Game.event.remove(GameEventKey.GameEventKey_MakeFilmWarEndingIncome,this.setData,this);Game.moduleModel.warData.sUpdateContinue.remove(this.refreshContinue,this)};WarEndingIncome.prototype.refreshContinue=function(){Game.menu.getMenuCtl(MenuId.Home).moduleWindow.conent.onCreateFilmContinue()};WarEndingIncome.prototype.setData=function(){this.moduleMain=this.moduleWindow.mainWindow;this.m_title.text=TEXT.EndingTitle;this.m_nameTip.text=TEXT.EndingTip;this.m_filmList.numItems=Game.moduleModel.warData.endIncomeList.length};WarEndingIncome.prototype.initItem=function(index,obj){var item=obj;item.setData(Game.moduleModel.warData.endIncomeList[index],index)};return WarEndingIncome}(WarMovie.WarEndingIncomeStruct));WarMovie.WarEndingIncome=WarEndingIncome})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFeedBackStruct=(function(_super){__extends(WarFeedBackStruct,_super);function WarFeedBackStruct(){return _super.call(this)||this}WarFeedBackStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFeedBack"))};WarFeedBackStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_filmName=(this.getChild("filmName"));this.m_zongfen=(this.getChild("zongfen"));this.m_receive=(this.getChild("receive"));this.m_okIcon=(this.getChild("okIcon"));this.m_dianzanValue=(this.getChild("dianzanValue"));this.m_dianzhanCom=(this.getChild("dianzhanCom"));this.m_feedList=(this.getChild("feedList"));this.m_feedTip2=(this.getChild("feedTip2"));this.m_feedTip3=(this.getChild("feedTip3"));this.m_feedTip4=(this.getChild("feedTip4"));this.m_filmInf=(this.getChild("filmInf"));this.m_starProgress=(this.getChild("starProgress"));this.m_filmDes=(this.getChild("filmDes"));this.m_okBtn=(this.getChild("okBtn"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_t0=this.getTransition("t0");this.m_dianzhanAni=this.getTransition("dianzhanAni")};WarFeedBackStruct.URL="ui://y6ozucp1qbxl6u";WarFeedBackStruct.DependPackages=["WarMovie","Common","System"];return WarFeedBackStruct}(fairygui.GComponent));WarMovie.WarFeedBackStruct=WarFeedBackStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFeedBack=(function(_super){__extends(WarFeedBack,_super);function WarFeedBack(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.curIndexOf=0;_this.dianVal=0;return _this}WarFeedBack.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.FeedBackTitle;this.m_feedList.setVirtual();this.m_feedList.itemRenderer=Laya.Handler.create(this,this.initItem,null,false);this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_closeBtn.onClick(this,this.onClickCloseBtn)};WarFeedBack.prototype.onClickCloseBtn=function(){this.moduleWindow.closeSelf();this.moduleMain.menuClose()};WarFeedBack.prototype.onClickOkBtn=function(){this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.sendUpdateMovieState()};WarFeedBack.prototype.onWindowShow=function(){Game.moduleModel.warData.sFeedBackUpdate.add(this.updateList,this);this.clearData();this.setDataBefor();this.setData()};WarFeedBack.prototype.onWindowHide=function(){if(this.mindDialog&&this.mindDialog!==null){this.mindDialog.close()}Laya.timer.clear(this,this.showNum);Game.moduleModel.warData.sFeedBackUpdate.remove(this.updateList,this)};WarFeedBack.prototype.clearData=function(){this.m_dianzhanCom.visible=false;this.m_okBtn.visible=false;this.m_starProgress.value=0;this.m_zongfen.visible=false;this.m_dianzanValue.text="";this.m_filmName.text="";this.m_feedList.numItems=0;this.dianVal=0;this.curIndexOf=0};WarFeedBack.prototype.setDataBefor=function(){this.moduleMain=this.moduleWindow.mainWindow;this.m_starProgress.value=Game.moduleModel.warData.moveData.mediaCommend*0.1;this.m_zongfen.text=(Game.moduleModel.warData.moveData.mediaCommend*0.1).toFixed(1);this.m_zongfen.visible=false;this.scoreList=new Array();var total=Game.moduleModel.warData.moveData.mediaCommend*3;for(var i=0;i<2;i++){var val=Math.floor(Game.moduleModel.warData.moveData.mediaCommendArr[i]/total*Game.moduleModel.warData.moveData.praise);this.scoreList.push(val)}var val2=Math.floor(Game.moduleModel.warData.moveData.praise)-this.scoreList[0]-this.scoreList[1];this.scoreList.push(val2);this.m_filmName.text=Game.moduleModel.warData.moveData.name;this.m_filmInf.setData(Game.moduleModel.warData.moveStory);this.m_filmDes.setData(Game.moduleModel.warData.moveStory.filmDes)};WarFeedBack.prototype.setData=function(){this.updateList()};WarFeedBack.prototype.updateList=function(){if(this.curIndexOf<3){this.curIndexOf++;this.m_feedList.numItems=this.curIndexOf}else{this.m_zongfen.visible=true;this.m_t0.play();this.m_dianzhanCom.visible=true;this.m_dianzhanAni.play(null,1);Laya.timer.loop(10,this,this.showNum)}};WarFeedBack.prototype.showNum=function(){if(this.dianVal<Game.moduleModel.warData.moveData.praise){this.dianVal+=Game.moduleModel.warData.moveData.praise/10;if(this.dianVal>=Game.moduleModel.warData.moveData.praise){this.dianVal=Game.moduleModel.warData.moveData.praise;this.m_okBtn.visible=true;var val=Game.moduleModel.warData.moveData.mediaCommend*0.1;if(!this.mindDialog||this.mindDialog===null){this.mindDialog=fgui.WarMovie.ShwoMinDialog.createInstance();this.addChild(this.mindDialog);this.mindDialog.setXY(0,0)}this.mindDialog.setData(format(Game.config.movieMidiaEvaluationMsg.getMsgFoNotice(val).msg,val.toFixed(1)))}this.m_dianzanValue.text=this.dianVal.toFixed(0)}};WarFeedBack.prototype.initItem=function(index,obj){if(index===this.curIndexOf-1){var item=obj;item.setData(Game.moduleModel.warData.moveData.mediaCommendArr[index],this.scoreList[index],index)}};return WarFeedBack}(WarMovie.WarFeedBackStruct));WarMovie.WarFeedBack=WarFeedBack})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmInfoStruct=(function(_super){__extends(WarFilmInfoStruct,_super);function WarFilmInfoStruct(){return _super.call(this)||this}WarFilmInfoStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmInfo"))};WarFilmInfoStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_filmName=(this.getChild("filmName"));this.m_filmTypeList=(this.getChild("filmTypeList"));this.m_completeList=(this.getChild("completeList"));this.m_reqTip=(this.getChild("reqTip"));this.m_rewardTip=(this.getChild("rewardTip"));this.m_rewardIcon=(this.getChild("rewardIcon"));this.m_rewardVal=(this.getChild("rewardVal"));this.m_rewardCom=(this.getChild("rewardCom"));this.m_filmActorList=(this.getChild("filmActorList"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_filmIcon=(this.getChild("filmIcon"));this.m_filmDes=(this.getChild("filmDes"));this.m_men=(this.getChild("men"));this.m_women=(this.getChild("women"));this.m_child=(this.getChild("child"))};WarFilmInfoStruct.URL="ui://y6ozucp1r0zd59";WarFilmInfoStruct.DependPackages=["WarMovie","Common","System"];return WarFilmInfoStruct}(fairygui.GComponent));WarMovie.WarFilmInfoStruct=WarFilmInfoStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmInfo=(function(_super){__extends(WarFilmInfo,_super);function WarFilmInfo(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.closeMenui=false;return _this}WarFilmInfo.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_filmTypeList.itemRenderer=Laya.Handler.create(this,this.initTagsItem,null,false);this.m_filmActorList.itemRenderer=Laya.Handler.create(this,this.yirenItem,null,false);this.m_filmActorList.on(fairygui.Events.CLICK_ITEM,this,this.clickItem);this.m_completeList.itemRenderer=Laya.Handler.create(this,this.completeItem,null,false);this.m_closeBtn.onClick(this,this.onClicClose)};WarFilmInfo.prototype.onClicClose=function(){this.moduleWindow.closeSelf();if(this.closeMenui){this.moduleWindow.menuClose()}};WarFilmInfo.prototype.onWindowShow=function(){this.setData()};WarFilmInfo.prototype.onWindowHide=function(){this.m_filmActorList.clearSelection()};WarFilmInfo.prototype.setData=function(){if(this.moduleWindow.menuParameter.args.length>0){this.closeMenui=true;if(this.moduleWindow.menuParameter.args[0].movieId>0){this.curData=Game.config.story.getConfig(this.moduleWindow.menuParameter.args[0].movieId);this.curData.filmName=this.moduleWindow.menuParameter.args[0].name}else{Game.system.toastText("error!!!");this.moduleWindow.closeSelf();return}}else{this.closeMenui=false;if(Game.moduleModel.warData.filmInfoConfig&&Game.moduleModel.warData.filmInfoConfig!==null){this.curData=Game.moduleModel.warData.filmInfoConfig}else{this.curData=Game.moduleModel.warData.moveStory}}this.m_filmName.text=this.curData.filmName;this.m_filmTypeList.numItems=this.curData.filmTags.length+1;this.m_filmDes.setData(this.curData.filmDes);this.m_filmIcon.setData(this.curData);this.clickYRItem=0;this.m_filmActorList.numItems=this.curData.characterProperty.length;if(this.curData.characterProperty.length===5){this.m_filmActorList.scrollPane.setPosX(150)}else{if(this.curData.characterProperty.length===4){this.m_filmActorList.scrollPane.setPosX(70)}}this.onClick(this,this.closeyirenItemPos);if(Game.moduleModel.building.getRoomLevel(Games.RoomType.Market)>0){if(this.curData.getMale>0){this.m_men.visible=true;this.m_men.text=this.curData.getMale+"%"}else{this.m_men.visible=false}if(this.curData.getFemale>0){this.m_women.visible=true;this.m_women.text=this.curData.getFemale+"%"}else{this.m_women.visible=false}if(this.curData.getChild>0){this.m_child.visible=true;this.m_child.text=this.curData.getChild+"%"}else{this.m_child.visible=false}this.m_rewardCom.visible=true}else{this.m_rewardCom.visible=false}this.m_completeList.numItems=1;Games.WarLoadPic.setIcon(this.m_rewardIcon,this.curData.getReward[0].storyeffect);this.m_rewardVal.text=format("+{0}%",this.curData.getReward[0].rate)};WarFilmInfo.prototype.getRewardTip=function(){var str="";if(this.curData.target_mark){str=Game.config.msg.getConfig(MsgKey.story_target_tips).notice}else{str=Game.config.msg.getConfig(MsgKey.story_non_target_tips).notice}return str};WarFilmInfo.prototype.completeItem=function(index,obj){if(index===0){var item=obj;item.m_tip.text=this.getRewardTip();if(this.curData.target_mark){item.m_colorControl.setSelectedIndex(0)}else{item.m_colorControl.setSelectedIndex(1)}}};WarFilmInfo.prototype.initTagsItem=function(index,obj){var item=obj;if(index===0){item.m_title.text=this.curData.filmType;item.m_typeLabel.setSelectedIndex(1)}else{item.m_title.text=this.curData.filmTags[index-1];item.m_typeLabel.setSelectedIndex(0)}};WarFilmInfo.prototype.yirenItem=function(index,obj){var item=obj;item.setData(this.curData.characterProperty[index])};WarFilmInfo.prototype.closeyirenItemPos=function(vet){if(this.clickYRItem==0){this.m_filmActorList.clearSelection()}else{this.clickYRItem=0}};WarFilmInfo.prototype.clickItem=function(obj){this.clickYRItem=1;this.m_filmActorList.childrenRenderOrder=fairygui.ChildrenRenderOrder.Arch;this.m_filmActorList.apexIndex=this.m_filmActorList.getChildIndex(obj)};return WarFilmInfo}(WarMovie.WarFilmInfoStruct));WarMovie.WarFilmInfo=WarFilmInfo})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmingStruct=(function(_super){__extends(WarFilmingStruct,_super);function WarFilmingStruct(){return _super.call(this)||this}WarFilmingStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilming"))};WarFilmingStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_gold=this.getController("gold");this.m_expectingTips=(this.getChild("expectingTips"));this.m_expectingIcon=(this.getChild("expectingIcon"));this.m_expectingVal=(this.getChild("expectingVal"));this.m_goal=(this.getChild("goal"));this.m_psAim=(this.getChild("psAim"));this.m_attIcon1=(this.getChild("attIcon1"));this.m_attIcon2=(this.getChild("attIcon2"));this.m_attIcon3=(this.getChild("attIcon3"));this.m_attIcon4=(this.getChild("attIcon4"));this.m_attIcon5=(this.getChild("attIcon5"));this.m_att1=(this.getChild("att1"));this.m_att2=(this.getChild("att2"));this.m_att3=(this.getChild("att3"));this.m_att4=(this.getChild("att4"));this.m_att5=(this.getChild("att5"));this.m_filmName=(this.getChild("filmName"));this.m_filmTime=(this.getChild("filmTime"));this.m_filmTypeList=(this.getChild("filmTypeList"));this.m_yrList=(this.getChild("yrList"));this.m_xuanzeList=(this.getChild("xuanzeList"));this.m_roomContainer=(this.getChild("roomContainer"));this.m_sliver=(this.getChild("sliver"));this.m_xukezheng=(this.getChild("xukezheng"));this.m_filmProgress=(this.getChild("filmProgress"));this.m_caozuo=(this.getChild("caozuo"));this.m_filmIcon=(this.getChild("filmIcon"));this.m_filmDes=(this.getChild("filmDes"));this.m_notice=(this.getChild("notice"));this.m_goldProgress=(this.getChild("goldProgress"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_goldEffect=(this.getChild("goldEffect"));this.m_t0=this.getTransition("t0")};WarFilmingStruct.URL="ui://y6ozucp1r0zd3w";WarFilmingStruct.DependPackages=["WarMovie","Common","Fx","System"];return WarFilmingStruct}(fairygui.GComponent));WarMovie.WarFilmingStruct=WarFilmingStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ShootingStage;(function(ShootingStage){ShootingStage[ShootingStage.Start=1]="Start";ShootingStage[ShootingStage.SelectType=2]="SelectType";ShootingStage[ShootingStage.SelectTypeWait=3]="SelectTypeWait";ShootingStage[ShootingStage.SelectNotice=4]="SelectNotice";ShootingStage[ShootingStage.SelectNoticeWait=5]="SelectNoticeWait";ShootingStage[ShootingStage.Fixing=6]="Fixing";ShootingStage[ShootingStage.FixingWait=7]="FixingWait"})(ShootingStage=WarMovie.ShootingStage||(WarMovie.ShootingStage={}));var WarFilming=(function(_super){__extends(WarFilming,_super);function WarFilming(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.curWinStateShow=false;_this.flyToScallBig=500;_this.flyToScallSmall=300;_this.flyToScallSmallDelay=200;_this.flyToHead=500;_this.flyHeadDelay=600;_this.flyToEndFromHead=800;_this.flyBigScall=1.2;_this.buildIndex=-1;_this.isRoomAddToUI=false;_this.isOnWindowHide=true;_this.onFilming=false;_this.noticeTipNum=-1;_this.noticeShowTipNum=-1;_this.goldCurIndex=0;_this.oldExpected=0;_this.property1=0;_this.property2=0;_this.attupTweenList=new Array();_this.attIconList=new Array();_this.rewardTipOk=false;_this.isOverToSQ=false;_this.curNoticeIndex=0;_this.noticeDelayTime=1000;return _this}WarFilming.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.State=ShootingStage.Start;var globalconfig=Game.config.global.getConfig(GlobalKey.Movie_Shoot_Time);this.selectType=25;this.selectNotice=65;this.m_filmProgress.valu=0;this.m_goldProgress.max=100;this.m_expectingIcon.icon=Games.WarLoadPic.getItemIcon(EItemId.expect);this.m_filmTypeList.itemRenderer=Laya.Handler.create(this,this.initTagsItem,null,false);this.m_yrList.itemRenderer=Laya.Handler.create(this,this.initYRListItem,null,false);this.m_xuanzeList.itemRenderer=Laya.Handler.create(this,this.initXZListItem,null,false);this.m_closeBtn.onClick(this,this.onClickClose);this.isOnWindowHide=true};WarFilming.prototype.showBuildRoom=function(){if(!this.isRoomAddToUI){if(!this.buildRoom){this.buildRoom=Games.AvatarManager.context.getRoomByType(Games.RoomType.Shoot)}if(this.buildRoom!=null){this.buildRoom.onRoomInScreen();this.buildRoom.setRoomFrameVisible(false);this.buildRoom.setXY(-20,-15);this.buildRoom.setScale(1.05,1.05);this.buildIndex=Games.AvatarManager.context.getRoomIndexByType(Games.RoomType.Shoot);this.m_roomContainer.addChild(this.buildRoom.mainView);this.isRoomAddToUI=true;var scale=ScreenSetting.screenWidth/this.buildRoom.mainView.sourceWidth;this.buildRoom.setScale(scale*1.05,1.05)}}};WarFilming.prototype.hideBuildRoom=function(){if(this.buildRoom){this.buildRoom.setXY(0,0);this.buildRoom.setScale(1,1);this.buildRoom.setRoomFrameVisible(true);Games.AvatarManager.context.addRoomAt(this.buildRoom,this.buildIndex);this.isRoomAddToUI=false}};WarFilming.prototype.onClickClose=function(){this.curWinStateShow=false;Game.moduleModel.warData.pauseWarFilmingProgress(true);Laya.timer.clearAll(this);laya.utils.Tween.clearAll(this.m_filmProgress);this.moduleWindow.closeSelf();this.moduleMain.menuClose()};WarFilming.prototype.onWindowShow=function(){this.curWinStateShow=true;this.attupTweenList=new Array();this.showBuildRoom();if(this.isOnWindowHide){Game.sound.playSound(SoundKey.MM40_FilmScreen);if(Game.moduleModel.story.getStoryData(Game.moduleModel.warData.moveData.movieId).isGold){this.m_gold.setSelectedIndex(1)}else{this.m_gold.setSelectedIndex(0)}if(!this.onFilming){Game.event.dispatch(GameEventKey.GameEventKey_ShootStart,this.onFilming);this.onFilming=true}else{Game.event.dispatch(GameEventKey.GameEventKey_ShootStart,this.onFilming)}Game.event.dispatch(GameEventKey.GameEventKey_ScrollMainRoom,Games.RoomType.Shoot)}if(this.State!==ShootingStage.Start){this.subCallBack()}else{this.m_goldProgress.value=0;this.setData()}if(this.isOnWindowHide){Laya.timer.loop(10,this,this.updateFilmingProgress);if(Game.moduleModel.story.getStoryData(Game.moduleModel.warData.moveData.movieId).isGold){Laya.timer.loop(10,this,this.updateTime)}Game.event.add(GameEventKey.GameEventKey_MakeFilmGetStoryGoals,this.showStoryGoalsTip,this)}this.isOnWindowHide=false};WarFilming.prototype.updateTime=function(){var val=this.m_filmProgress.value*3.3;if(this.goldCurIndex!==this.parseIntComple(val)&&Game.moduleModel.warData.moveData.battleDataEx&&Game.moduleModel.warData.moveData.battleDataEx.length>0){this.goldCurIndex=this.parseIntComple(val);var increase=this.eachTimeAdd(this.goldCurIndex);if(increase>=0&&increase+1<Game.moduleModel.warData.moveData.battleDataEx.length){var item1=Game.moduleModel.warData.moveData.battleDataEx[increase];var item2=Game.moduleModel.warData.moveData.battleDataEx[increase+1];if(item1.actorId===item2.actorId){this.m_goldEffect.setData(item1,item2)}for(var i=0;i<5;i++){if(item1.propertyId===this.attList[i]){this.flyAttribute(i,item1)}if(item2.propertyId===this.attList[i]){this.flyAttribute(i,item2)}}}}if(val>=300){val=100}else{if(val>=200){val-=200}else{if(val>=100){val-=100}}}this.m_gold.setSelectedIndex(1);this.m_goldProgress.value=val};WarFilming.prototype.eachTimeAdd=function(curNum){if(Game.moduleModel.warData.moveData.battleDataEx.length>=6){switch(curNum){case 1:return 0;case 2:return 2;case 3:return 4;default:return curNum-1}}return curNum-1};WarFilming.prototype.parseIntComple=function(innt){if(innt>299){return 3}else{if(innt>199){return 2}else{if(innt>99){return 1}}}return 0};WarFilming.prototype.onWindowHide=function(){this.isOnWindowHide=true;this.curWinStateShow=false;if(this.mindDialog&&this.mindDialog!==null){this.mindDialog.close()}this.hideBuildRoom();if(this.noticeTipNum>-1){clearTimeout(this.noticeTipNum);this.noticeTipNum=-1}if(this.noticeShowTipNum>-1){clearTimeout(this.noticeShowTipNum);this.noticeShowTipNum=-1}if(this.mindDialog&&this.mindDialog!==null){this.mindDialog.close()}Laya.timer.clearAll(this);if(this.attupTweenList.length>0){for(var i=0;i<this.attupTweenList.length;i++){this.attupTweenList[i].clear()}this.attupTweenList=new Array()}if(this.attIconList.length>0){for(var i=0;i<this.attIconList.length;i++){if(this.attIconList[i]&&this.attIconList[i].visible){this.attIconList[i].visible=false}}this.attIconList=new Array()}Laya.timer.clear(this,this.updateFilmingProgress);Laya.timer.clear(this,this.updateTime);Game.event.remove(GameEventKey.GameEventKey_MakeFilmGetStoryGoals,this.showStoryGoalsTip,this)};WarFilming.prototype.updateFilmingProgress=function(){switch(this.State){case ShootingStage.SelectType:if(Game.moduleModel.warData.warFilmingTSprogerss.value>=this.selectType){this.State=ShootingStage.SelectTypeWait;Game.moduleModel.warData.pauseWarFilmingProgress(true);Game.moduleModel.warData.warFilmingTSprogerss.value=this.selectType;this.compleProgress()}break;case ShootingStage.SelectNotice:if(Game.moduleModel.warData.warFilmingTSprogerss.value>=this.selectNotice){this.State=ShootingStage.SelectNoticeWait;Game.moduleModel.warData.pauseWarFilmingProgress(true);Game.moduleModel.warData.warFilmingTSprogerss.value=this.selectNotice;this.compleProgress()}break;case ShootingStage.Fixing:if(Game.moduleModel.warData.warFilmingTSprogerss.value>=100){this.State=ShootingStage.FixingWait;Game.moduleModel.warData.clearWarFilmingProgress();Game.moduleModel.warData.warFilmingTSprogerss.value=100;this.compleProgress()}break}this.m_filmProgress.valu=Game.moduleModel.warData.warFilmingTSprogerss.value};WarFilming.prototype.setData=function(){if(this.m_notice){this.m_notice.setScale(0,0)}var data=Game.moduleModel.warData.moveData;this.confData=Game.moduleModel.warData.moveStory;this.moduleMain=this.moduleWindow.mainWindow;this.updateIndex=0;this.UpdateAttributeList=data.battleData;this.starUpdate=false;this.oldExpected=User.info.expected;this.m_expectingVal.text=formatNumberUnit(User.info.expected);this.m_psAim.visible=this.confData.target_mark;this.m_goldProgress.value=0;this.sortAttribute();this.InitAttNum();this.attText=[this.m_att1,this.m_att2,this.m_att3,this.m_att4,this.m_att5];for(var i=0;i<5;i++){if(i===0&&this.property1>0){this.attText[i].text=this.attNum[i]+"/"+this.property1}else{if(i===1&&this.property2>0){this.attText[i].text=this.attNum[i]+"/"+this.property2}else{this.attText[i].text=this.attNum[i].toString()}}}Games.WarLoadPic.setIcon(this.m_attIcon1,this.attList[0]);Games.WarLoadPic.setIcon(this.m_attIcon2,this.attList[1]);Games.WarLoadPic.setIcon(this.m_attIcon3,this.attList[2]);Games.WarLoadPic.setIcon(this.m_attIcon4,this.attList[3]);Games.WarLoadPic.setIcon(this.m_attIcon5,this.attList[4]);this.m_xuanzeList.numItems=0;this.m_filmName.text=data.name;this.m_filmTime.text=format(TEXT.FilmLongTime,this.confData.length);this.m_filmDes.setData(this.confData.filmDes);this.m_filmTypeList.numItems=this.confData.filmTags.length+1;this.m_filmIcon.setData(this.confData);this.m_sliver.setData(EItemId.dollar,formatNumberUnit(Game.moduleModel.item.getItemNum(EItemId.dollar)));this.m_xukezheng.setData(EItemId.licence,Game.moduleModel.warData.licenceNumInFilming.toString());switch(Game.moduleModel.warData.getRealYRList.count){case 1:this.m_yrList.columnGap=0;break;case 2:this.m_yrList.columnGap=100;break;case 3:this.m_yrList.columnGap=50;break;case 4:this.m_yrList.columnGap=8;break;case 5:this.m_yrList.columnGap=-26;break}this.m_yrList.numItems=Game.moduleModel.warData.getRealYRList.count;this.haveFailShow=false;this.haveWinShow=false;if(Game.moduleModel.warData.moveData.type>0){if(Game.moduleModel.warData.warFilmingTSprogerss&&Game.moduleModel.warData.warFilmingTSprogerss!==null){this.m_filmProgress.valu=Game.moduleModel.warData.warFilmingTSprogerss.value}else{this.m_filmProgress.valu=this.selectType}if(Game.moduleModel.warData.moveData.mediaVisit.length>0){if(Game.moduleModel.warData.moveData.state==EMovieState.propaganda){this.State=ShootingStage.SelectNotice;Game.moduleModel.warData.startWarFilming(this.selectType);this.currentCaozuoTip(this.selectNotice,Game.config.msg.getConfig(MsgKey.movie_state_tips2).notice)}else{this.State=ShootingStage.Fixing;Game.moduleModel.warData.startWarFilming(this.selectNotice);this.currentCaozuoTip(100,Game.config.msg.getConfig(MsgKey.movie_state_tips3).notice)}}else{this.State=ShootingStage.Fixing;Game.moduleModel.warData.startWarFilming(this.selectNotice);this.currentCaozuoTip(100,Game.config.msg.getConfig(MsgKey.movie_state_tips3).notice)}}else{var subTimePre=Game.time.getSubSecondsPre(Game.moduleModel.warData.moveData.startTime);if(subTimePre<0){subTimePre=0}var lastTime=this.selectType-subTimePre;if(lastTime<=0){this.m_filmProgress.valu=this.selectType}else{this.m_filmProgress.valu=subTimePre}this.State=ShootingStage.SelectType;Game.moduleModel.warData.startWarFilming(subTimePre);this.currentCaozuoTip(this.selectType,Game.config.msg.getConfig(MsgKey.movie_state_tips1).notice)}this.rewardTipOk=false;Laya.timer.clear(this,this.updateAttribute);var delayTime=this.selectType*Game.moduleModel.warData.filmingSpeed/this.UpdateAttributeList.length*0.9;Laya.timer.loop(delayTime,this,this.updateAttribute)};WarFilming.prototype.initTagsItem=function(index,obj){var item=obj;if(index===0){item.m_title.text=this.confData.filmType;item.m_typeLabel.setSelectedIndex(1)}else{item.m_title.text=this.confData.filmTags[index-1];item.m_typeLabel.setSelectedIndex(0)}};WarFilming.prototype.currentCaozuoTip=function(pross,str){this.m_caozuo.x=-130+(646*pross*0.01)+this.m_filmProgress.x-38;this.m_caozuo.m_title.text=str;this.starUpdate=true;if(Game.moduleModel.warData.warFilmingTSPause){Game.moduleModel.warData.pauseWarFilmingProgress(false)}};WarFilming.prototype.compleProgress=function(){this.starUpdate=false;switch(this.State){case ShootingStage.SelectTypeWait:this.moduleMain.conent.startShowWaiting();this.curWinStateShow=false;Game.moduleModel.warData.sendUpdateMovieState();break;case ShootingStage.SelectNoticeWait:this.curWinStateShow=false;if(Game.moduleModel.warData.moveData.state==EMovieState.propaganda){this.moduleWindow.closeSelf();this.moduleMain.openSubwindowByIndex(Games.WarSubwindowType.SelectNotice,true)}else{this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.sendUpdateMovieState()}break;case ShootingStage.FixingWait:this.starUpdate=false;this.showTargetFail();break}};WarFilming.prototype.sortAttribute=function(){var propertyConfig=Game.config.property.getPropertyList();this.attList=propertyConfig;this.property1=0;this.property2=0;if(this.confData.target_mark){var storyGoal=Game.config.storyGoals.getGoalTarget(this.confData.id,User.info.stall);this.property1=storyGoal.value1;this.property2=storyGoal.value2;this.propertyReward=storyGoal.reward;for(var i=0;i<propertyConfig.length;i++){if(i!==0&&propertyConfig[i]===storyGoal.property1){var tem=propertyConfig[0];this.attList[0]=propertyConfig[i];this.attList[i]=tem}else{if(i!==1&&propertyConfig[i]===storyGoal.property2){var tem=propertyConfig[1];this.attList[1]=propertyConfig[i];this.attList[i]=tem}}}}};WarFilming.prototype.InitAttNum=function(){this.attNum=[0,0,0,0,0];this.goldCurIndex=0;for(var j=0;j<5;j++){this.attNum[j]=Game.moduleModel.warData.moveData.attribute[this.attList[j]-1601]}for(var i=0;i<this.UpdateAttributeList.length;i++){var item=this.UpdateAttributeList[i];for(var j=0;j<5;j++){if(item.propertyId===this.attList[j]){this.attNum[j]-=item.value;break}}}};WarFilming.prototype.updateAttribute=function(){if(this.starUpdate){if(this.UpdateAttributeList&&this.UpdateAttributeList.length>this.updateIndex){var curAtt=this.UpdateAttributeList[this.updateIndex];for(var i=0;i<5;i++){if(curAtt.propertyId===this.attList[i]){this.flyAttribute(i,curAtt);this.updateIndex++;break}}}}};WarFilming.prototype.getIcon=function(url){if(this.attIconList.length>0){for(var i=0;i<this.attIconList.length;i++){var element=this.attIconList[i];if(!element.visible){element.visible=true;var result=element;result.icon=url;return result}}}var attIcon=fgui.Common.AttrUpView.createInstance();attIcon.icon=url;this.addChildAt(attIcon,this.numChildren-2);this.attIconList.push(attIcon);return attIcon};WarFilming.prototype.flyAttribute=function(i,curAtt){var _this=this;var iconConfig=Game.config.property.getConfig(curAtt.propertyId);var url=Game.config.avatar.getConfig(iconConfig.icon).iconUrl;var attIcon=this.getIcon(url);var pos=this.attText[i].y-10;var posx=this.attText[i].x-50;attIcon.text=format("+{0}",curAtt.value);attIcon.m_titleColor.setSelectedIndex(1);var indexOf=this.m_yrList.itemIndexToChildIndex(this.getYRIndexOf(curAtt.actorId));var gObj=this.m_yrList.getChildAt(indexOf);attIcon.setXY(gObj.localToGlobal().x+20,gObj.localToGlobal().y-50);attIcon.setScale(1,1);Game.sound.playSound(SoundKey.MM20_ArtistData);var yrObj=gObj;if(!yrObj.m_t0.playing){yrObj.m_t0.play(null,1)}var pos0=attIcon.y-70;var posx0=attIcon.x+Random.rangeBoth(-3,3)*10;var tw1=laya.utils.Tween.to(attIcon,{scaleX:this.flyBigScall,scaleY:this.flyBigScall},this.flyToScallBig);this.attupTweenList.push(tw1);var tw2=laya.utils.Tween.to(attIcon,{scaleX:1,scaleY:1},this.flyToScallSmall,Laya.Ease.quadInOut,null,this.flyToScallSmallDelay);this.attupTweenList.push(tw2);var tw3=laya.utils.Tween.to(attIcon,{y:pos0,x:posx0},this.flyToHead,Laya.Ease.quadInOut,Handler.create(this,function(){var tw4=laya.utils.Tween.to(attIcon,{y:pos,x:posx},_this.flyToEndFromHead,Laya.Ease.quadInOut,Handler.create(_this,function(){_this.attNum[i]+=curAtt.value;if(i===0&&_this.property1>0){_this.attText[i].text=_this.attNum[i].toFixed(0)+"/"+_this.property1}else{if(i===1&&_this.property2>0){_this.attText[i].text=_this.attNum[i].toFixed(0)+"/"+_this.property2}else{_this.attText[i].text=_this.attNum[i].toFixed(0)}}if(_this.property1>0&&_this.property2>0&&!_this.rewardTipOk&&_this.property1<=_this.attNum[0]&&_this.property2<=_this.attNum[1]){_this.rewardTipOk=true;if(!Game.moduleModel.warData.moveData.isGetStoryGoals){_this.isOverToSQ=false;Game.moduleModel.warData.reqGetStoryGoals()}}attIcon.visible=false}),_this.flyHeadDelay);_this.attupTweenList.push(tw4)}));this.attupTweenList.push(tw3)};WarFilming.prototype.showStoryGoalsTip=function(calFun){var _this=this;if(calFun===void 0){calFun=null}if(!this.haveFailShow&&!this.haveWinShow&&this.propertyReward&&this.propertyReward!==null){Game.sound.playSound(SoundKey.MM03_ReachGoal);if(!this.rewardTip||this.rewardTip===null){this.rewardTip=fgui.WarMovie.WarTargetSucces.createInstance();this.addChild(this.rewardTip);this.rewardTip.setSize(Games.MenuLayer.root.width,Games.MenuLayer.root.height)}this.starUpdate=false;this.rewardTip.setData(this.propertyReward,function(){if(_this.isOverToSQ){_this.goToSQ()}else{_this.starUpdate=true}});this.haveWinShow=true}};WarFilming.prototype.targetResult=function(){var result=[0,0,0];if(this.confData.target_mark){var serverAttribute=Game.moduleModel.warData.moveData.attribute;var storyGoal=Game.config.storyGoals.getGoalTarget(this.confData.id,User.info.stall);this.propertyReward=storyGoal.reward;for(var i=0;i<serverAttribute.length;i++){if(i+1601===storyGoal.property1){result[0]=serverAttribute[i];if(serverAttribute[i]>=storyGoal.value1){result[2]++}}else{if(i+1601===storyGoal.property2){result[1]=serverAttribute[i];if(serverAttribute[i]>=storyGoal.value2){result[2]++}}}}}return result};WarFilming.prototype.showTargetFail=function(){var _this=this;if(this.attupTweenList.length>0){for(var i=0;i<this.attupTweenList.length;i++){this.attupTweenList[i].clear()}this.attupTweenList=new Array()}if(this.attIconList.length>0){for(var i=0;i<this.attIconList.length;i++){if(this.attIconList[i]&&this.attIconList[i].visible){this.attIconList[i].visible=false}}this.attIconList=new Array()}this.starUpdate=false;this.m_filmProgress.valu=100;if(this.confData.target_mark){var tarRes=this.targetResult();if(tarRes[2]===2){if(!Game.moduleModel.warData.moveData.isGetStoryGoals){this.isOverToSQ=true;Game.moduleModel.warData.reqGetStoryGoals()}else{this.goToSQ()}}else{if(!this.haveFailShow&&!this.haveWinShow){Game.sound.playSound(SoundKey.MM04_Lose);if(!this.targetFailTip||this.targetFailTip===null){this.targetFailTip=fgui.WarMovie.WarTargetFailed.createInstance();this.addChild(this.targetFailTip);this.targetFailTip.setSize(Games.MenuLayer.root.width,Games.MenuLayer.root.height)}this.targetFailTip.setData(this.attList,this.attNum,[this.property1,this.property2],function(){_this.goToSQ()});this.haveFailShow=true}else{this.goToSQ()}}}else{this.goToSQ()}};WarFilming.prototype.goToSQ=function(){this.goldCurIndex=0;this.State=ShootingStage.Start;this.moduleWindow.closeSelf();this.curWinStateShow=false;this.moduleMain.openSubwindowByIndex(Games.WarSubwindowType.FilmSQ,true)};WarFilming.prototype.getYRIndexOf=function(yrId){var result=0;var keys=Game.moduleModel.warData.getRealYRList.getKeys();for(var i=0;i<keys.length;i++){if(Game.moduleModel.warData.getRealYRList.getValue(keys[i]).id==yrId){result=i;break}}return result};WarFilming.prototype.typeContinueGoNext=function(){var _this=this;this.m_filmProgress.valu=this.selectType;this.xuanzeList();this.UpdateAttributeList=Game.moduleModel.warData.moveData.battleData;this.updateIndex=0;Game.moduleModel.warData.startWarFilming(this.selectType);if(Game.moduleModel.warData.moveData.mediaVisit.length>0){this.State=ShootingStage.SelectNotice;this.currentCaozuoTip(this.selectNotice,Game.config.msg.getConfig(MsgKey.movie_state_tips2).notice)}else{if(this.noticeTipNum===-1){this.noticeTipNum=setTimeout(function(){_this.noticeCantTip()},3000)}this.State=ShootingStage.Fixing;this.currentCaozuoTip(100,Game.config.msg.getConfig(MsgKey.movie_state_tips3).notice)}Laya.timer.clear(this,this.updateAttribute);var delayTime=(100-this.selectType)*Game.moduleModel.warData.filmingSpeed/this.UpdateAttributeList.length;Laya.timer.loop(delayTime,this,this.updateAttribute)};WarFilming.prototype.subCallBack=function(){var _this=this;switch(this.State){case ShootingStage.SelectTypeWait:if(Game.moduleModel.warData.moveData.type>0){if(!this.warTip||this.warTip===null){this.warTip=fgui.WarMovie.WarTip.createInstance();this.addChild(this.warTip);this.warTip.setSize(Games.MenuLayer.root.width,Games.MenuLayer.root.height)}var tipstr_1=Game.config.movieAdaptationMsg.getStoryShootTypeTip(Game.moduleModel.warData.storyShootType);if(Game.moduleModel.warData.moveData.isTired){this.warTip.setData(Game.config.msg.getConfig(MsgKey.movie_too_much).notice,function(){_this.warTip.setData(tipstr_1,function(){_this.typeContinueGoNext()})})}else{this.warTip.setData(tipstr_1,function(){_this.typeContinueGoNext()})}}else{if(Game.moduleModel.warData.moveData.state==EMovieState.chooseType){this.moduleWindow.closeSelf();this.curWinStateShow=false;this.moduleMain.openSubwindowByIndex(Games.WarSubwindowType.SelectFilmType,true)}else{var subTimePre=Game.time.getSubSecondsPre(Game.moduleModel.warData.moveData.startTime);if(subTimePre<0){subTimePre=0}var lastTime=this.selectType-subTimePre;if(lastTime<=0){this.moduleMain.conent.startShowWaiting();this.curWinStateShow=false;Game.moduleModel.warData.sendUpdateMovieState()}else{this.State=ShootingStage.SelectType;Game.moduleModel.warData.startWarFilming(lastTime);this.currentCaozuoTip(this.selectType,Game.config.msg.getConfig(MsgKey.movie_state_tips1).notice)}}}break;case ShootingStage.SelectNoticeWait:if(Game.moduleModel.warData.moveData.state==EMovieState.propaganda){this.moduleWindow.closeSelf();this.curWinStateShow=false;this.moduleMain.openSubwindowByIndex(Games.WarSubwindowType.SelectNotice,true)}else{this.xuanzeList();this.State=ShootingStage.Fixing;Game.moduleModel.warData.startWarFilming(this.selectNotice);this.currentCaozuoTip(100,Game.config.msg.getConfig(MsgKey.movie_state_tips3).notice);if(this.mediaList&&this.mediaList.length>0){this.noticeDelayTime=(100-this.selectNotice)*Game.moduleModel.warData.filmingSpeed/this.mediaList.length*0.7;this.curNoticeIndex=0;this.showNotice()}var curLength=this.UpdateAttributeList.length-this.updateIndex;if(curLength>0){Laya.timer.clear(this,this.updateAttribute);var delayTime=(100-this.selectNotice)*Game.moduleModel.warData.filmingSpeed/curLength;Laya.timer.loop(delayTime,this,this.updateAttribute)}}break;case ShootingStage.FixingWait:this.State=ShootingStage.Fixing;Game.moduleModel.warData.startWarFilming(this.selectNotice);this.currentCaozuoTip(100,Game.config.msg.getConfig(MsgKey.movie_state_tips3).notice);break;default:this.setData();break}};WarFilming.prototype.showNotice=function(){var _this=this;if(this.curWinStateShow){if(this.noticeShowTipNum>-1){clearTimeout(this.noticeShowTipNum);this.noticeShowTipNum=-1}if(this.curNoticeIndex>0&&this.curNoticeIndex<=this.mediaList.length){var attIcon_1=this.getIcon(Games.WarLoadPic.getItemIcon(EItemId.expect));var addVal_1=Game.moduleModel.warData.filmExpectations.getValue(this.mediaList[this.curNoticeIndex-1]);attIcon_1.text=format("+{0}",addVal_1);attIcon_1.setXY(this.m_notice.x,this.m_notice.y);attIcon_1.setScale(1,1);laya.utils.Tween.to(attIcon_1,{y:this.m_expectingVal.y,x:this.m_expectingVal.x},1000,Laya.Ease.quadInOut,Handler.create(this,function(){_this.oldExpected+=addVal_1;_this.m_expectingVal.text=formatNumberUnit(_this.oldExpected);attIcon_1.visible=false}))}if(this.curNoticeIndex<this.mediaList.length){var medaConfig=Game.config.movieMediaVisit.getConfig(this.mediaList[this.curNoticeIndex]);this.m_notice.setScale(0,0);this.m_notice.m_noticeIcon.icon=Games.WarLoadPic.getAvatarIcon(medaConfig.pic);Game.sound.playSound(SoundKey.MM41_ExpectNotices);this.m_t0.play(laya.utils.Handler.create(this,function(){_this.noticeShowTipNum=setTimeout(function(){_this.showNotice()},_this.noticeDelayTime)}),1);this.curNoticeIndex++}else{this.m_notice.setScale(0,0)}}};WarFilming.prototype.noticeCantTip=function(){if(this.curWinStateShow){if(!this.mindDialog||this.mindDialog===null){this.mindDialog=fgui.WarMovie.ShwoMinDialog.createInstance();this.addChild(this.mindDialog);this.mindDialog.setXY(0,0)}this.mindDialog.setData(Game.config.msg.getConfig(MsgKey.non_midia_visit).notice)}};WarFilming.prototype.initYRListItem=function(index,obj){var item=obj;item.setData(Game.moduleModel.warData.getRealYRList.getValue(index),index)};WarFilming.prototype.xuanzeList=function(){if(this.State==ShootingStage.SelectNotice&&Game.moduleModel.warData.filmExpectations.count==0){return}switch(this.State){case ShootingStage.SelectTypeWait:this.m_xuanzeList.numItems=1;break;case ShootingStage.SelectNoticeWait:this.Mediatips=Game.config.msg.getConfig(MsgKey.movie_mediavisit_tips).notice;this.mediaList=Game.moduleModel.warData.filmExpectations.getKeys();this.m_xuanzeList.numItems=Game.moduleModel.warData.filmExpectations.count+1;break}};WarFilming.prototype.initXZListItem=function(index,obj){var item=obj;if(index===0){var types=Game.config.movieShootType.getConfigList();var tips=Game.config.msg.getConfig(MsgKey.movie_type_tips).notice;for(var i=0;i<types.length;i++){if(types[i].id==Game.moduleModel.warData.moveData.type){item.m_title.text=format(tips,types[i].getName);break}}}else{var mediaConfig=Game.config.movieMediaVisit.getConfig(this.mediaList[index-1]);var actorList=Game.moduleModel.warData.filmExpecteActor.getValue(this.mediaList[index-1]);var tipActor="";for(var ll=0;ll<actorList.length;ll++){tipActor+=" ";tipActor+=actorList[ll].name}item.m_title.text=format(this.Mediatips,tipActor,mediaConfig.name,Game.moduleModel.warData.filmExpectations.getValue(this.mediaList[index-1]))}};return WarFilming}(WarMovie.WarFilmingStruct));WarMovie.WarFilming=WarFilming})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmingGoldEffectStruct=(function(_super){__extends(WarFilmingGoldEffectStruct,_super);function WarFilmingGoldEffectStruct(){return _super.call(this)||this}WarFilmingGoldEffectStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmingGoldEffect"))};WarFilmingGoldEffectStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_attIcon1=(this.getChild("attIcon1"));this.m_attIcon2=(this.getChild("attIcon2"));this.m_attText1=(this.getChild("attText1"));this.m_attText2=(this.getChild("attText2"));this.m_dialog=(this.getChild("dialog"))};WarFilmingGoldEffectStruct.URL="ui://y6ozucp1r0sqea";WarFilmingGoldEffectStruct.DependPackages=["WarMovie","Common"];return WarFilmingGoldEffectStruct}(fairygui.GComponent));WarMovie.WarFilmingGoldEffectStruct=WarFilmingGoldEffectStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmingGoldEffect=(function(_super){__extends(WarFilmingGoldEffect,_super);function WarFilmingGoldEffect(){return _super!==null&&_super.apply(this,arguments)||this}WarFilmingGoldEffect.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickClose)};WarFilmingGoldEffect.prototype.onClickClose=function(){clearTimeout(this.autoCloseTimeout);this.visible=false};WarFilmingGoldEffect.prototype.setData=function(curAtt,curAtt2){var _this=this;if(!this.listSpeak||this.listSpeak.length!==3){this.listSpeak=new Array();this.listSpeak.push(Game.config.speak.getConfig(1701).speak);this.listSpeak.push(Game.config.speak.getConfig(1702).speak);this.listSpeak.push(Game.config.speak.getConfig(1703).speak)}this.m_dialog.m_title.text=this.listSpeak[Random.rangeBoth(0,2)];this.m_attIcon1.icon=this.urlPath(curAtt.propertyId);this.m_attIcon2.icon=this.urlPath(curAtt2.propertyId);this.m_attText1.text="+ "+formatNumberUnit(curAtt.value);this.m_attText2.text="+ "+formatNumberUnit(curAtt2.value);var actorList=Game.moduleModel.actor.getActors();for(var j=0;j<actorList.length;j++){if(actorList[j].id==curAtt.actorId){this.m_icon.icon=Games.WarLoadPic.getActorIcon(actorList[j].config.avatar);break}}this.visible=true;this.autoCloseTimeout=setTimeout(function(){_this.onClickClose()},3000)};WarFilmingGoldEffect.prototype.urlPath=function(id){var iconConfig=Game.config.property.getConfig(id);if(iconConfig){return Game.config.avatar.getConfig(iconConfig.icon).iconUrl}return""};return WarFilmingGoldEffect}(WarMovie.WarFilmingGoldEffectStruct));WarMovie.WarFilmingGoldEffect=WarFilmingGoldEffect})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmingSelectTipItemStruct=(function(_super){__extends(WarFilmingSelectTipItemStruct,_super);function WarFilmingSelectTipItemStruct(){return _super.call(this)||this}WarFilmingSelectTipItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmingSelectTipItem"))};WarFilmingSelectTipItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};WarFilmingSelectTipItemStruct.URL="ui://y6ozucp1r0zd58";WarFilmingSelectTipItemStruct.DependPackages=["WarMovie"];return WarFilmingSelectTipItemStruct}(fairygui.GLabel));WarMovie.WarFilmingSelectTipItemStruct=WarFilmingSelectTipItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmingSelectTipItem=(function(_super){__extends(WarFilmingSelectTipItem,_super);function WarFilmingSelectTipItem(){return _super!==null&&_super.apply(this,arguments)||this}return WarFilmingSelectTipItem}(WarMovie.WarFilmingSelectTipItemStruct));WarMovie.WarFilmingSelectTipItem=WarFilmingSelectTipItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmingYRItemStruct=(function(_super){__extends(WarFilmingYRItemStruct,_super);function WarFilmingYRItemStruct(){return _super.call(this)||this}WarFilmingYRItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmingYRItem"))};WarFilmingYRItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_tip=(this.getChild("tip"));this.m_mingzi=(this.getChild("mingzi"));this.m_t0=this.getTransition("t0");this.m_t1=this.getTransition("t1")};WarFilmingYRItemStruct.URL="ui://y6ozucp1r0zd57";WarFilmingYRItemStruct.DependPackages=["WarMovie","Common"];return WarFilmingYRItemStruct}(fairygui.GLabel));WarMovie.WarFilmingYRItemStruct=WarFilmingYRItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmingYRItem=(function(_super){__extends(WarFilmingYRItem,_super);function WarFilmingYRItem(){return _super!==null&&_super.apply(this,arguments)||this}WarFilmingYRItem.prototype.setData=function(dat,index){this.m_mingzi.text=dat.name;this.m_icon.icon=Games.WarLoadPic.getActorIcon(dat.config.avatar)};return WarFilmingYRItem}(WarMovie.WarFilmingYRItemStruct));WarMovie.WarFilmingYRItem=WarFilmingYRItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmJiesuanStruct=(function(_super){__extends(WarFilmJiesuanStruct,_super);function WarFilmJiesuanStruct(){return _super.call(this)||this}WarFilmJiesuanStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmJiesuan"))};WarFilmJiesuanStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_colorCon=this.getController("colorCon");this.m_filmName=(this.getChild("filmName"));this.m_filmType=(this.getChild("filmType"));this.m_filmTime=(this.getChild("filmTime"));this.m_zhuyanList=(this.getChild("zhuyanList"));this.m_koubei=(this.getChild("koubei"));this.m_tip=(this.getChild("tip"));this.m_tip1=(this.getChild("tip1"));this.m_auther=(this.getChild("auther"));this.m_tip2=(this.getChild("tip2"));this.m_totalList=(this.getChild("totalList"));this.m_tip3=(this.getChild("tip3"));this.m_tip4=(this.getChild("tip4"));this.m_rewardValue=(this.getChild("rewardValue"));this.m_tip5=(this.getChild("tip5"));this.m_rewardList=(this.getChild("rewardList"));this.m_filmTip=(this.getChild("filmTip"));this.m_icon=(this.getChild("icon"));this.m_clickTip=(this.getChild("clickTip"));this.m_filmIcon=(this.getChild("filmIcon"));this.m_starProgress=(this.getChild("starProgress"));this.m_costProgress=(this.getChild("costProgress"));this.m_totalProgress=(this.getChild("totalProgress"));this.m_fx=(this.getChild("fx"));this.m_t0=this.getTransition("t0")};WarFilmJiesuanStruct.URL="ui://y6ozucp1qbxl7b";WarFilmJiesuanStruct.DependPackages=["WarMovie","Fx","Common"];return WarFilmJiesuanStruct}(fairygui.GComponent));WarMovie.WarFilmJiesuanStruct=WarFilmJiesuanStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmJiesuan=(function(_super){__extends(WarFilmJiesuan,_super);function WarFilmJiesuan(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.canClose=false;_this.totalNum=9932;_this.curTotalNum=0;return _this}WarFilmJiesuan.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_zhuyanList.itemRenderer=Laya.Handler.create(this,this.initYRListItem,null,false);this.m_rewardList.itemRenderer=Laya.Handler.create(this,this.initRewardListItem,null,false);this.m_totalList.itemRenderer=Laya.Handler.create(this,this.initTotalListItem,null,false);this.onClick(this,this.onClickOkBtn)};WarFilmJiesuan.prototype.onClickOkBtn=function(){if(this.canClose){this.moduleMain.conent.startShowWaiting();this.moduleMain.conent.filmOverTip(EMovieState.rewardTip)}};WarFilmJiesuan.prototype.onWindowShow=function(){this.setData()};WarFilmJiesuan.prototype.onWindowHide=function(){this.m_fx.m_t0.stop();this.m_fx.visible=false;Laya.timer.clearAll(this)};WarFilmJiesuan.prototype.setData=function(){this.curVal="0";this.m_totalList.numItems=this.curVal.length;this.canClose=false;this.moduleMain=this.moduleWindow.mainWindow;this.isPutPanel=true;var data=Game.moduleModel.warData.moveJieSuanData;if(!data){data=Game.moduleModel.warData.moveData}this.curData=data;var confData=Game.moduleModel.warData.moveStory;this.m_totalProgress.value=0;this.m_costProgress.value=0;this.m_icon.alpha=0;this.m_filmIcon.setData(confData);if(data.boxOfficeEvaluation>0){var sellIcon=Game.config.movieDrop.getSellIcon(data.boxOfficeEvaluation);this.m_icon.icon=Game.config.avatar.getConfig(sellIcon).iconUrl;this.m_tip5.text=format(Game.config.msg.getConfig(MsgKey.movie_drop_tips).notice,Game.config.movieDrop.getSellTip(sellIcon).gain_name)}this.m_filmName.text=data.name;var types=Game.config.movieShootType.getConfigList();for(var i=0;i<types.length;i++){if(types[i].id==data.type){this.m_filmType.text=Game.moduleModel.warData.moveStory.filmType+"/"+types[i].getName;break}}this.m_rewardValue.text="";this.m_filmTime.text=format(TEXT.FilmLongTime,confData.length);this.m_koubei.text=format(TEXT.FilmKouBei,data.publicPraise.toFixed(0));this.m_starProgress.value=data.mediaCommend*0.1;this.m_auther.text=User.info.name;this.m_filmTip.text="";this.m_tip5.text="";this.m_rewardList.numItems=0;this.m_zhuyanList.numItems=Game.moduleModel.warData.getRealYRList.count;this.curTotalNum=0;this.totalNum=data.totalBoxOffice;Laya.timer.loop(10,this,this.showTotalNum);switch(this.curData.boxOfficeEvaluation){case Proto.SE.EBoxOfficeEvaluation.normal:Game.sound.playSound(SoundKey.MM27_TicketsOrdinary);break;case Proto.SE.EBoxOfficeEvaluation.good:Game.sound.playSound(SoundKey.MM28_TicketsGood);break;case Proto.SE.EBoxOfficeEvaluation.big_sell:case Proto.SE.EBoxOfficeEvaluation.great_sell:case Proto.SE.EBoxOfficeEvaluation.myth_sell:case Proto.SE.EBoxOfficeEvaluation.marvel_sell:Game.sound.playSound(SoundKey.MM29_TicketsGreat);break}};WarFilmJiesuan.prototype.initYRListItem=function(index,obj){var item=obj;item.ActorId=Game.moduleModel.warData.getRealYRList.getValue(index).id};WarFilmJiesuan.prototype.initRewardListItem=function(index,obj){var item=obj;item.setData(index)};WarFilmJiesuan.prototype.showTotalNum=function(){if(this.curTotalNum<this.totalNum){this.curTotalNum+=this.totalNum/50;if(this.curTotalNum>=this.totalNum){this.curTotalNum=this.totalNum;var costVal=0;var totVal=0;if(this.curData.totalMovieCost<this.curData.totalBoxOffice){if(this.curData.totalBoxOffice===0){costVal=this.curData.totalMovieCost/100*100}else{costVal=this.curData.totalMovieCost/this.curData.totalBoxOffice*100}totVal=100}else{costVal=100;if(this.curData.totalMovieCost===0){totVal=this.curData.totalBoxOffice/100*100}else{totVal=this.curData.totalBoxOffice/this.curData.totalMovieCost*100}}this.m_totalProgress.value=0;laya.utils.Tween.to(this.m_totalProgress,{value:totVal},1000,Laya.Ease.linearIn,null);this.m_costProgress.value=0;laya.utils.Tween.to(this.m_costProgress,{value:costVal},1000,Laya.Ease.linearIn,Handler.create(this,this.porgressOver))}this.curVal=formatNumberUnit(this.curTotalNum,1).toString();this.m_totalList.numItems=this.curVal.length}};WarFilmJiesuan.prototype.porgressOver=function(){var _this=this;this.m_t0.play(laya.utils.Handler.create(this,function(){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask&&mainTask.isFinished){Game.story.triggerPlayStoryByType(Games.StoryTriggerType.FristMovieUp,mainTask.id)}_this.m_fx.m_t0.play(Handler.create(_this,function(){_this.m_fx.visible=false}),1);_this.canClose=true}),1);if(this.curData.totalBoxOffice>this.curData.totalMovieCost){var result=(this.curData.totalBoxOffice/this.curData.totalMovieCost)*100;this.m_rewardValue.text=format(TEXT.filmJiesuanWin,result.toFixed(1));this.m_colorCon.setSelectedIndex(0)}else{var result=(this.curData.totalMovieCost/this.curData.totalBoxOffice)*100;this.m_rewardValue.text=format(TEXT.filmJiesuanFail,result.toFixed(1));this.m_colorCon.setSelectedIndex(1)}var dropCount=Game.moduleModel.warData.dropList.length;this.m_rewardList.numItems=dropCount;if(dropCount>0){this.m_tip5.text=TEXT.filmJiesuanRewardTip}else{this.m_tip5.text=""}};WarFilmJiesuan.prototype.initTotalListItem=function(index,obj){var item=obj;item.setData(this.curVal[index])};return WarFilmJiesuan}(WarMovie.WarFilmJiesuanStruct));WarMovie.WarFilmJiesuan=WarFilmJiesuan})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmLiuxingStruct=(function(_super){__extends(WarFilmLiuxingStruct,_super);function WarFilmLiuxingStruct(){return _super.call(this)||this}WarFilmLiuxingStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmLiuxing"))};WarFilmLiuxingStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_title2=(this.getChild("title2"));this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"));this.m_tip=(this.getChild("tip"));this.m_closeBtn=(this.getChild("closeBtn"))};WarFilmLiuxingStruct.URL="ui://y6ozucp1qbxl9v";WarFilmLiuxingStruct.DependPackages=["WarMovie","Fx"];return WarFilmLiuxingStruct}(fairygui.GComponent));WarMovie.WarFilmLiuxingStruct=WarFilmLiuxingStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmLiuxing=(function(_super){__extends(WarFilmLiuxing,_super);function WarFilmLiuxing(){return _super!==null&&_super.apply(this,arguments)||this}return WarFilmLiuxing}(WarMovie.WarFilmLiuxingStruct));WarMovie.WarFilmLiuxing=WarFilmLiuxing})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmMoveShowStruct=(function(_super){__extends(WarFilmMoveShowStruct,_super);function WarFilmMoveShowStruct(){return _super.call(this)||this}WarFilmMoveShowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmMoveShow"))};WarFilmMoveShowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_1=(this.getChild("1"));this.m_2=(this.getChild("2"));this.m_3=(this.getChild("3"));this.m_4=(this.getChild("4"));this.m_5=(this.getChild("5"));this.m_mask=(this.getChild("mask"));this.m_moveShow=this.getTransition("moveShow")};WarFilmMoveShowStruct.URL="ui://y6ozucp1qbxl9b";WarFilmMoveShowStruct.DependPackages=["WarMovie","Common"];return WarFilmMoveShowStruct}(fairygui.GButton));WarMovie.WarFilmMoveShowStruct=WarFilmMoveShowStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmMoveShow=(function(_super){__extends(WarFilmMoveShow,_super);function WarFilmMoveShow(){return _super!==null&&_super.apply(this,arguments)||this}WarFilmMoveShow.prototype.setRandomIcon=function(){var list=Game.config.story.getConfigList();this.m_1.icon=Game.config.avatar.getConfig(list[Random.range(1,list.length)].poster_name).iconUrl;this.m_2.icon=Game.config.avatar.getConfig(list[Random.range(1,list.length)].poster_name).iconUrl;this.m_3.icon=Game.config.avatar.getConfig(list[Random.range(1,list.length)].poster_name).iconUrl;this.m_4.icon=Game.config.avatar.getConfig(list[Random.range(1,list.length)].poster_name).iconUrl;this.m_5.icon=Game.config.avatar.getConfig(list[Random.range(1,list.length)].poster_name).iconUrl};return WarFilmMoveShow}(WarMovie.WarFilmMoveShowStruct));WarMovie.WarFilmMoveShow=WarFilmMoveShow})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmOverMarketInfoStruct=(function(_super){__extends(WarFilmOverMarketInfoStruct,_super);function WarFilmOverMarketInfoStruct(){return _super.call(this)||this}WarFilmOverMarketInfoStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmOverMarketInfo"))};WarFilmOverMarketInfoStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_tip=(this.getChild("tip"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_okBtn=(this.getChild("okBtn"))};WarFilmOverMarketInfoStruct.URL="ui://y6ozucp1qbxl79";WarFilmOverMarketInfoStruct.DependPackages=["WarMovie","Common"];return WarFilmOverMarketInfoStruct}(fairygui.GComponent));WarMovie.WarFilmOverMarketInfoStruct=WarFilmOverMarketInfoStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmOverMarketInfo=(function(_super){__extends(WarFilmOverMarketInfo,_super);function WarFilmOverMarketInfo(){return _super!==null&&_super.apply(this,arguments)||this}WarFilmOverMarketInfo.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_okBtn.onClick(this,this.onClickOkBtn)};WarFilmOverMarketInfo.prototype.onClickOkBtn=function(){this.moduleMain.conent.startShowWaiting();this.moduleMain.conent.filmOverTip(EMovieState.Jiesuan)};WarFilmOverMarketInfo.prototype.onWindowShow=function(){this.setData()};WarFilmOverMarketInfo.prototype.onWindowHide=function(){};WarFilmOverMarketInfo.prototype.setData=function(){this.moduleMain=this.moduleWindow.mainWindow;this.m_tip.text=format(TEXT.filmOverMarketTip1,Random.range(50,500),Game.moduleModel.warData.refrushGuanzhongInf[0]);if(Game.moduleModel.warData.refrushGuanzhongInf[1]>0){var types=Game.config.movieShootType.getConfigList();var tips=Game.config.msg.getConfig(MsgKey.movie_type_tips).notice;for(var i=0;i<types.length;i++){if(types[i].id==Game.moduleModel.warData.moveJieSuanData.type){this.m_tip.text+=format(TEXT.filmOverMarketTip2,Game.moduleModel.warData.refrushGuanzhongInf[1],types[i].getName);break}}}};return WarFilmOverMarketInfo}(WarMovie.WarFilmOverMarketInfoStruct));WarMovie.WarFilmOverMarketInfo=WarFilmOverMarketInfo})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmSelectingStruct=(function(_super){__extends(WarFilmSelectingStruct,_super);function WarFilmSelectingStruct(){return _super.call(this)||this}WarFilmSelectingStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmSelecting"))};WarFilmSelectingStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_filmItemList=(this.getChild("filmItemList"));this.m_marketTip1=(this.getChild("marketTip1"));this.m_marketTip2=(this.getChild("marketTip2"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_sliver=(this.getChild("sliver"));this.m_licence=(this.getChild("licence"));this.m_men=(this.getChild("men"));this.m_women=(this.getChild("women"));this.m_child=(this.getChild("child"));this.m_refrush=(this.getChild("refrush"))};WarFilmSelectingStruct.URL="ui://y6ozucp1r0zd50";WarFilmSelectingStruct.DependPackages=["WarMovie","Common"];return WarFilmSelectingStruct}(fairygui.GComponent));WarMovie.WarFilmSelectingStruct=WarFilmSelectingStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmSelecting=(function(_super){__extends(WarFilmSelecting,_super);function WarFilmSelecting(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isShowSelectBtn=false;return _this}WarFilmSelecting.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_men.m_sex.text=TEXT.sexMan;this.m_women.m_sex.text=TEXT.sexWomen;this.m_child.m_sex.text=TEXT.sexChild;this.m_licence.visible=false;this.m_filmItemList.itemRenderer=Laya.Handler.create(this,this.roomItem,null,false);this.m_closeBtn.onClick(this,this.onClickClose);this.m_refrush.onClick(this,this.onClickRefrush);this.m_refrush.m_title.text=TEXT.RefrushStory;this.setRefrushText()};WarFilmSelecting.prototype.setRefrushText=function(){if(Game.moduleModel.warData.curRefrushTimes[0]<=0){this.m_refrush.visible=false;return}this.m_refrush.visible=true;if(Game.moduleModel.warData.curRefrushTimes[1]>=0){this.m_refrush.grayed=false}else{this.m_refrush.grayed=true}};WarFilmSelecting.prototype.onClickRefrush=function(){var times=Game.moduleModel.warData.curRefrushTimes[1];if(times>=0){var inf=Game.config.storyRefreshPrice.getConfig(times+1).price;var itemName=Game.config.item.getConfig(inf.itemId).name;var msg=format(TEXT.RefrushStoryTip,inf.itemNum,itemName,Game.moduleModel.warData.curRefrushTimes[2]);Game.system.confirmText(msg,null,this,function(){Game.moduleModel.warData.refreshMovieStory()})}else{Game.system.toastText(TEXT.RefrushStoryTipOver)}};WarFilmSelecting.prototype.onClickClose=function(){this.moduleWindow.menuBack()};WarFilmSelecting.prototype.onWindowShow=function(){this.setData()};WarFilmSelecting.prototype.onWindowHide=function(){};WarFilmSelecting.prototype.setData=function(){this.setRefrushText();WarMovie.FilmSelectItem.isSelectStory=false;this.moduleMain=this.moduleWindow.mainWindow;this.storyList=Game.moduleModel.warData.getStoryList;if(this.storyList.length==0){Game.system.toastText(TEXT.NoStoryList);this.onClickClose();return}this.m_sliver.setData(EItemId.dollar,formatNumberUnit(Game.moduleModel.item.getItemNum(EItemId.dollar)));var man=Game.moduleModel.warData.moveData.expected[0];var woman=Game.moduleModel.warData.moveData.expected[1];var child=Game.moduleModel.warData.moveData.expected[2];if(Game.moduleModel.building.getRoomLevel(Games.RoomType.Market)>0){this.isHaveGuanzhong=true;this.m_marketTip1.visible=true;this.m_marketTip2.visible=true;if(man>0){this.m_men.visible=true;this.m_men.m_title.text=man+"%"}else{this.m_men.visible=false}if(woman>0){this.m_women.visible=true;this.m_women.m_title.text=woman+"%"}else{this.m_women.visible=false}if(child>0){this.m_child.visible=true;this.m_child.m_title.text=child+"%"}else{this.m_child.visible=false}}else{this.isHaveGuanzhong=false;this.m_marketTip1.visible=false;this.m_marketTip2.visible=false;this.m_men.visible=false;this.m_women.visible=false;this.m_child.visible=false}this.roomCurCount=1;this.roomMaxCount=this.storyList.length;this.isShowSelectBtn=false;Game.moduleModel.warData.filmInfoConfig=null;this.refrushStoryList()};WarFilmSelecting.prototype.refrushStoryList=function(){if(this.roomCurCount<=this.roomMaxCount){this.isShowSelectBtn=false;this.m_filmItemList.numItems=this.roomCurCount;this.roomCurCount++}else{this.isShowSelectBtn=true;this.m_filmItemList.numItems=this.roomCurCount-1;Game.event.dispatch(GameEventKey.GameEventKey_FilmStoryAnimationComplete,this.storyList)}};WarFilmSelecting.prototype.roomItem=function(index,obj){var item=obj;if(this.isShowSelectBtn){item.m_selectBtn.visible=true;item.canShowInf=true}else{if(this.roomCurCount<index+2){item.m_selectBtn.visible=false;item.canShowInf=false;item.moduleWindow=this.moduleMain;item.setData(this.storyList[index],index,this.isHaveGuanzhong);Game.sound.playSound(SoundKey.MM16_ScriptRolling);item.m_filmInf.m_icon.m_moveShow.play(laya.utils.Handler.create(this,this.moveOverCall),1)}else{item.m_filmInf.m_icon.m_moveShow.stop()}}};WarFilmSelecting.prototype.moveOverCall=function(){this.refrushStoryList()};return WarFilmSelecting}(WarMovie.WarFilmSelectingStruct));WarMovie.WarFilmSelecting=WarFilmSelecting})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmShangYingStruct=(function(_super){__extends(WarFilmShangYingStruct,_super);function WarFilmShangYingStruct(){return _super.call(this)||this}WarFilmShangYingStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmShangYing"))};WarFilmShangYingStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_filmName=(this.getChild("filmName"));this.m_progressList=(this.getChild("progressList"));this.m_filmTime=(this.getChild("filmTime"));this.m_filmTotal=(this.getChild("filmTotal"));this.m_filmcurrent=(this.getChild("filmcurrent"));this.m_guanzhongList=(this.getChild("guanzhongList"));this.m_roomContainer=(this.getChild("roomContainer"));this.m_closeBtn=(this.getChild("closeBtn"))};WarFilmShangYingStruct.URL="ui://y6ozucp1qbxl75";WarFilmShangYingStruct.DependPackages=["WarMovie","PfSkin","Common","System"];return WarFilmShangYingStruct}(fairygui.GComponent));WarMovie.WarFilmShangYingStruct=WarFilmShangYingStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmShangYing=(function(_super){__extends(WarFilmShangYing,_super);function WarFilmShangYing(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isHide=false;_this.buildIndex=-1;_this.light1TimeId=0;_this.light2TimeId=0;_this.onlyShow=false;_this.liuxingTimeoutNum=-1;_this.pressTweenList=new Array();return _this}WarFilmShangYing.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_progressList.setVirtual();this.m_progressList.itemRenderer=Laya.Handler.create(this,this.initProgressItem,null,false);this.m_guanzhongList.itemRenderer=Laya.Handler.create(this,this.initGuanzhongItem,null,false);this.m_closeBtn.onClick(this,this.onClickCloseBtn);this.m_closeBtn.visible=false;this.clearData()};WarFilmShangYing.prototype.onClickCloseBtn=function(){this.moduleWindow.closeSelf();this.moduleMain.menuClose();Game.menu.getMenuCtl(MenuId.Home).moduleWindow.conent.onCreateFilmSmall()};WarFilmShangYing.prototype.onWindowShow=function(){var _this=this;this.isHide=false;this.setData();this.showBuildRoom();if(this.isFilmStart){this.showFilmStartAnim()}this.onShowProgress();Game.event.add(GameEventKey.GameEventKey_UpdateFilmingStatus,this.onShowProgress,this);setTimeout(function(){_this.m_closeBtn.visible=true},1500)};WarFilmShangYing.prototype.onWindowHide=function(){this.m_closeBtn.visible=false;clearTimeout(this.liuxingTimeoutNum);this.liuxingTimeoutNum=-1;if(this.mindDialog&&this.mindDialog!==null){this.mindDialog.close()}Game.event.remove(GameEventKey.GameEventKey_UpdateFilmingStatus,this.onShowProgress,this);if(this.curTween&&this.curTween!==null){this.curTween.clear()}this.hideBuildRoom();if(this.isFilmStart){this.hideFilmStartAnim()}if(this.light1TimeId>0){clearTimeout(this.light1TimeId);this.light1TimeId=0}if(this.light2TimeId>0){clearTimeout(this.light2TimeId);this.light2TimeId=0}this.m_progressList.numItems=0;this.isHide=true;for(var i=0;i<this.pressTweenList.length;i++){if(this.pressTweenList[i]){this.pressTweenList[i].clear()}}this.pressTweenList=new Array()};WarFilmShangYing.prototype.showBuildRoom=function(){this.buildRoom=Games.AvatarManager.context.getRoomByType(Games.RoomType.Cinema);if(this.buildRoom!=null){console.log("#####startFilm showBuildRoom : "+this.buildRoom.roomTextureUrl);this.buildRoom.onRoomInScreen();this.buildRoom.setRoomFrameVisible(false);this.buildIndex=Games.AvatarManager.context.getRoomIndexByType(Games.RoomType.Cinema);this.buildRoom.setXY(-20,-4);this.buildRoom.setScale(1.1,1.1);this.m_roomContainer.addChild(this.buildRoom.mainView);var scale=ScreenSetting.screenWidth/this.buildRoom.mainView.sourceWidth;this.buildRoom.setScale(scale*1.1,1.1)}};WarFilmShangYing.prototype.hideBuildRoom=function(){if(this.buildRoom){this.buildRoom.setXY(0,0);this.buildRoom.setScale(1,1);this.buildRoom.setRoomFrameVisible(true);Games.AvatarManager.context.addRoomAt(this.buildRoom,this.buildIndex)}};WarFilmShangYing.prototype.showFilmStartAnim=function(){if(this.buildRoom){this.buildRoom.mainView.visible=false}if(!this.filmEnterScene){this.filmEnterScene=fgui.Building.BuildSceneFilmEnter.createInstance()}var stroyId=Game.moduleModel.warData.moveData.movieId;var stroyCfg=Game.config.story.getConfig(stroyId);if(stroyCfg){var avatarCfg=Game.config.avatar.getConfig(stroyCfg.poster_name);this.filmEnterScene.m_stoyIcon.url=avatarCfg.iconUrl}this.filmEnterScene.m_title.text=Game.moduleModel.warData.moveData.name;this.m_roomContainer.addChild(this.filmEnterScene);var scale=ScreenSetting.screenWidth/this.buildRoom.mainView.sourceWidth;this.filmEnterScene.setScale(scale,1);this.loadFilmAnim()};WarFilmShangYing.prototype.hideFilmStartAnim=function(){if(this.buildRoom){this.buildRoom.mainView.visible=true}if(this.filmAcotrs){this.filmAcotrs.unit.animator.sPlayEnd.add(this.onAnimPlayEnd,this);this.filmAcotrs.dispose();this.filmAcotrs=null}if(this.filmDoor){this.filmDoor.dispose();this.filmDoor=null}if(this.filmEnterScene){this.filmEnterScene.removeFromParent();this.filmEnterScene.dispose();this.filmEnterScene=null}if(this.light1TimeId>0){clearTimeout(this.light1TimeId);this.light1TimeId=0}if(this.light2TimeId>0){clearTimeout(this.light2TimeId);this.light2TimeId=0}};WarFilmShangYing.prototype.loadFilmAnim=function(){var aInfo=new Games.AvatarInfo();aInfo.type=Games.AvatarType.Npc;aInfo.texturePath=Res.cinemaHallActorSkin;aInfo.skeletonPath=Res.cinemaHallActorSK;this.filmAcotrs=Game.creator.creatEUnit(aInfo,this.filmEnterScene.width,this.filmEnterScene.height,1);this.filmAcotrs.pos(0,50);this.filmAcotrs.showOn(this.filmEnterScene.m_canvasContainer);this.loadFilmDoorAnim()};WarFilmShangYing.prototype.loadFilmDoorAnim=function(){var aInfo=new Games.AvatarInfo();aInfo.type=Games.AvatarType.Npc;aInfo.texturePath=Res.cinemaHallDoorSkin;aInfo.skeletonPath=Res.cinemaHallDoorSK;this.filmDoor=Game.creator.creatEUnit(aInfo,this.filmEnterScene.width,this.filmEnterScene.height,1);this.filmDoor.pos(0,50);this.filmDoor.showOn(this.filmEnterScene.m_doorContainer);this.playFilmEnterAnim()};WarFilmShangYing.prototype.playFilmEnterAnim=function(){var _this=this;if(this.filmAcotrs){this.filmAcotrs.unit.animator.sPlayEnd.add(this.onAnimPlayEnd,this);this.filmAcotrs.play("animation");Game.sound.playSound(SoundKey.MM38_AudienceGetIn)}if(this.filmDoor){this.filmDoor.play("animation")}this.filmEnterScene.m_screenlight.visible=false;this.filmEnterScene.m_filmlight.visible=false;this.light1TimeId=setTimeout(function(){if(_this.filmEnterScene){_this.filmEnterScene.m_screenlight.visible=true}},1500);this.light2TimeId=setTimeout(function(){if(_this.filmEnterScene){_this.filmEnterScene.m_filmlight.visible=true}},2500)};WarFilmShangYing.prototype.onAnimPlayEnd=function(){this.filmAcotrs.unit.animator.sPlayEnd.remove(this.onAnimPlayEnd,this);this.hideFilmStartAnim()};Object.defineProperty(WarFilmShangYing.prototype,"isFilmStart",{get:function(){return Game.moduleModel.warData.filmingCurDay<=3},enumerable:true,configurable:true});WarFilmShangYing.prototype.setData=function(){var _this=this;this.dayLeftTip=Game.config.msg.getConfig(MsgKey.movie_remaining_days).notice;this.dayCurTip=Game.config.msg.getConfig(MsgKey.movie_day).notice;this.moduleMain=this.moduleWindow.mainWindow;if(Game.moduleModel.warData.filmingCurDay<=3){this.clearData();Game.event.dispatch(GameEventKey.GameEventKey_FilmStart,Game.moduleModel.warData.moveData.mExpected);Game.moduleModel.warData.guanzhongList=new Array();Game.moduleModel.warData.haveGuanzhong=false}else{Game.event.dispatch(GameEventKey.GameEventKey_FilmOn,Game.moduleModel.warData.moveData.mExpected)}this.m_filmName.text=Game.moduleModel.warData.moveData.name;if(!Game.moduleModel.warData.haveGuanzhong){Game.moduleModel.warData.haveGuanzhong=true;this.curGZindex=0;this.onlyShow=false;this.setGuanzhong();if(this.guanzhongList.length>0){this.onShowGuanzhongList()}clearTimeout(this.liuxingTimeoutNum);this.liuxingTimeoutNum=setTimeout(function(){_this.showLiuxing()},2000)}else{this.curGZindex=10;this.setGuanzhong();this.onlyShow=true;if(this.guanzhongList.length>0){this.m_guanzhongList.numItems=this.guanzhongList.length}}};WarFilmShangYing.prototype.clearData=function(){this.m_progressList.numItems=0;this.m_filmTime.text="";this.m_filmTotal.text="";this.m_filmcurrent.text="";this.m_guanzhongList.numItems=0};WarFilmShangYing.prototype.onShowProgress=function(){if(!Game.moduleModel.warData.moveData){console.warn("丫的 哪里调的 WarFilmShangYing.onShowProgress");return}if(Game.moduleModel.warData.moveData.evaluationCon&&Game.moduleModel.warData.moveData.evaluationCon>0&&Math.floor(Game.moduleModel.warData.filmingMaxDay/4)===Game.moduleModel.warData.filmingCurDay){if(!this.mindDialog||this.mindDialog===null){this.mindDialog=fgui.WarMovie.ShwoMinDialog.createInstance();this.addChild(this.mindDialog);this.mindDialog.setXY(0,0)}this.mindDialog.setData(Game.config.msg.getConfig(Game.moduleModel.warData.moveData.evaluationCon).notice)}this.curTween=null;if(Game.moduleModel.warData.filmingCurDay>0&&Game.moduleModel.warData.filmingCurDay<=Game.moduleModel.warData.filmingMaxDay){this.m_filmcurrent.text=format(this.dayCurTip,Game.moduleModel.warData.filmingCurDay,formatNumberUnit(Game.moduleModel.warData.moveData.runDays[Game.moduleModel.warData.filmingCurDay-1]));var lastDay=Game.moduleModel.warData.filmingMaxDay-Game.moduleModel.warData.filmingCurDay;this.m_filmTime.text=format(this.dayLeftTip,lastDay);this.m_filmTotal.text=format(TEXT.TotalFilm,formatNumberUnit(Game.moduleModel.warData.filmingTotal));this.m_progressList.numItems=Game.moduleModel.warData.filmingCurDay;this.m_progressList.scrollToView(Game.moduleModel.warData.filmingCurDay-1)}else{if(Game.moduleModel.warData.filmingCurDay===Game.moduleModel.warData.filmingMaxDay+1){this.moduleMain.conent.startShowWaiting()}}};WarFilmShangYing.prototype.initProgressItem=function(index,obj){var item=obj;item.max=Game.moduleModel.warData.filmingMaxCur;if(index+1===Game.moduleModel.warData.filmingCurDay){item.myvalue=0;for(var i=0;i<this.pressTweenList.length;i++){this.pressTweenList[i].complete()}var curTween=laya.utils.Tween.to(item,{myvalue:Game.moduleModel.warData.moveData.runDays[index]},Game.moduleModel.warData.movieHistogramTime,null,null,0,true);this.pressTweenList.push(curTween)}else{item.myvalue=Game.moduleModel.warData.moveData.runDays[index]}};WarFilmShangYing.prototype.setGuanzhong=function(){this.guanzhongList=new Array();var expected=new Array();var isNullExpected=true;for(var i=0;i<3;i++){if(Game.moduleModel.warData.moveData.expected[i]>0){isNullExpected=false}}var haveGetExpect=0;for(var i=0;i<3;i++){if(isNullExpected){if(i<2){haveGetExpect=Random.rangeBoth(haveGetExpect,10)}else{haveGetExpect=10-haveGetExpect}}else{haveGetExpect=Game.moduleModel.warData.moveData.expected[i]}expected.push(haveGetExpect)}for(var i=0;i<10;i++){if(expected[0]>0){this.guanzhongList.push(0);expected[0]-=10}else{if(expected[1]>0){this.guanzhongList.push(1);expected[1]-=10}else{if(expected[2]>0){this.guanzhongList.push(2)}}}}if(this.guanzhongList.length>0){Game.moduleModel.warData.guanzhongMax=[0,0,0];for(var i=0;i<this.guanzhongList.length;i++){if(this.guanzhongList[i]===0){Game.moduleModel.warData.guanzhongMax[0]++}else{if(this.guanzhongList[i]===0){Game.moduleModel.warData.guanzhongMax[1]++}else{Game.moduleModel.warData.guanzhongMax[2]++}}}this.guanzhongList=this.sortRandomArr(this.guanzhongList)}};WarFilmShangYing.prototype.sortRandomArr=function(arr){var i=arr.length;while(i){var j=Math.floor(Math.random()*i--);_a=[arr[i],arr[j]],arr[j]=_a[0],arr[i]=_a[1]}return arr;var _a};WarFilmShangYing.prototype.showLiuxing=function(){var _this=this;var configs=Game.config.movieExpect.getConfigWithExpect(Game.moduleModel.warData.moveData.mExpected);var indexOf=configs.pic;if(indexOf>=0){switch(indexOf){case 0:Game.sound.playSound(SoundKey.MM24_NiceScore1);break;case 1:Game.sound.playSound(SoundKey.MM25_NiceScore2);break;case 2:Game.sound.playSound(SoundKey.MM26_NiceScore3);break;case 3:Game.sound.playSound(SoundKey.MM33_NiceScore4);break;default:Game.sound.playSound(SoundKey.MM33_NiceScore4);break}if(!this.liuxing||this.liuxing===null){this.liuxing=fgui.WarMovie.WarFilmLiuxing.createInstance();this.liuxing.setSize(fairygui.GRoot.inst.width,fairygui.GRoot.inst.height);this.addChild(this.liuxing)}this.liuxing.m_tip.text=format(configs.pic_word,Game.moduleModel.warData.moveData.name);this.liuxing.m_title.text=format(configs.pic_word,Game.moduleModel.warData.moveData.name);this.liuxing.m_title2.text=format(configs.pic_word,Game.moduleModel.warData.moveData.name);this.liuxing.m_icon.icon=Game.config.avatar.getConfig(Game.moduleModel.warData.moveStory.poster_name).iconUrl;this.liuxing.m_c1.setSelectedIndex(indexOf);this.liuxingTimeOutNum=setTimeout(function(){_this.liuxing.visible=false},3000);this.liuxing.onClick(this,function(){_this.liuxing.visible=false;clearTimeout(_this.liuxingTimeOutNum)})}else{if(!this.mindDialog||this.mindDialog===null){this.mindDialog=fgui.WarMovie.ShwoMinDialog.createInstance();this.addChild(this.mindDialog);this.mindDialog.setXY(0,0)}this.mindDialog.setData(format(configs.pic_word,Game.moduleModel.warData.moveData.name))}};WarFilmShangYing.prototype.onShowGuanzhongList=function(){this.curGZindex++;if(this.curGZindex<11){this.m_guanzhongList.numItems=this.curGZindex}};WarFilmShangYing.prototype.initGuanzhongItem=function(index,obj){if(this.onlyShow){var item=obj;item.m_face0.alpha=0;item.m_face1.alpha=0;item.m_face2.alpha=0;item.m_face3.alpha=0;item.m_face4.alpha=0;var conf=Game.config.dialogue.getConfig(Random.rangeBoth(1,25));item.m_sex.setSelectedIndex(this.guanzhongList[index]);item.m_phiz.setSelectedIndex(conf.face-1);item.m_tip.text=conf.content;item.m_tip2.text=conf.content;if(index<5){item.m_c1.setSelectedIndex(0)}else{item.m_c1.setSelectedIndex(1)}item.m_t0.play(null,1);item.m_t0.stop(true);if(Game.moduleModel.warData.guanzhongList.length===index){Game.moduleModel.warData.guanzhongList.push(conf.face)}}else{if(index+1===this.curGZindex){var item=obj;item.m_face0.alpha=0;item.m_face1.alpha=0;item.m_face2.alpha=0;item.m_face3.alpha=0;item.m_face4.alpha=0;var conf=Game.config.dialogue.getConfig(Random.rangeBoth(1,25));item.m_sex.setSelectedIndex(this.guanzhongList[index]);item.m_phiz.setSelectedIndex(conf.face-1);item.m_tip.text=conf.content;item.m_tip2.text=conf.content;if(index<5){item.m_c1.setSelectedIndex(0)}else{item.m_c1.setSelectedIndex(1)}item.m_t0.play(laya.utils.Handler.create(this,this.onShowGuanzhongList),1);Game.moduleModel.warData.guanzhongList.push(conf.face)}}};return WarFilmShangYing}(WarMovie.WarFilmShangYingStruct));WarMovie.WarFilmShangYing=WarFilmShangYing})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmSQStruct=(function(_super){__extends(WarFilmSQStruct,_super);function WarFilmSQStruct(){return _super.call(this)||this}WarFilmSQStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmSQ"))};WarFilmSQStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_tip1=(this.getChild("tip1"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_flash=(this.getChild("flash"))};WarFilmSQStruct.URL="ui://y6ozucp1qbxl9r";WarFilmSQStruct.DependPackages=["WarMovie","Common"];return WarFilmSQStruct}(fairygui.GComponent));WarMovie.WarFilmSQStruct=WarFilmSQStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmSQ=(function(_super){__extends(WarFilmSQ,_super);function WarFilmSQ(){return _super!==null&&_super.apply(this,arguments)||this}WarFilmSQ.prototype.onWindowShow=function(){var _this=this;Game.sound.playSound(SoundKey.MM22_ScreenOver);this.m_flash.m_t0.play(null,1);setTimeout(function(){_this.delayRun()},2000)};WarFilmSQ.prototype.onWindowHide=function(){this.m_flash.m_t0.stop()};WarFilmSQ.prototype.delayRun=function(){this.moduleMain=this.moduleWindow.mainWindow;this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.sendUpdateMovieState()};return WarFilmSQ}(WarMovie.WarFilmSQStruct));WarMovie.WarFilmSQ=WarFilmSQ})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmSQViewStruct=(function(_super){__extends(WarFilmSQViewStruct,_super);function WarFilmSQViewStruct(){return _super.call(this)||this}WarFilmSQViewStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmSQView"))};WarFilmSQViewStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_filmAttributeList=(this.getChild("filmAttributeList"));this.m_zhuyanList=(this.getChild("zhuyanList"));this.m_filmName=(this.getChild("filmName"));this.m_filmTime=(this.getChild("filmTime"));this.m_type=(this.getChild("type"));this.m_title=(this.getChild("title"));this.m_okBtn=(this.getChild("okBtn"));this.m_filmIcon=(this.getChild("filmIcon"))};WarFilmSQViewStruct.URL="ui://y6ozucp1qbxl6m";WarFilmSQViewStruct.DependPackages=["WarMovie","Common","System"];return WarFilmSQViewStruct}(fairygui.GComponent));WarMovie.WarFilmSQViewStruct=WarFilmSQViewStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmSQView=(function(_super){__extends(WarFilmSQView,_super);function WarFilmSQView(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.maxVal=0;return _this}WarFilmSQView.prototype.constructFromXML=function(xml){var _this=this;_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.FilmSQViewTitle;this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_filmAttributeList.itemRenderer=Laya.Handler.create(this,this.initAttItem,null,false);this.m_zhuyanList.itemRenderer=Laya.Handler.create(this,this.initYRItem,null,false);this.m_filmIcon.onClick(this,function(){_this.moduleMain.openSubwindowByIndex(Games.WarSubwindowType.FilmInfo,true)})};WarFilmSQView.prototype.onClickOkBtn=function(){this.m_filmAttributeList.visible=false;this.m_okBtn.visible=false;this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.sendUpdateMovieState()};WarFilmSQView.prototype.onWindowShow=function(){var _this=this;this.m_filmAttributeList.visible=false;this.m_okBtn.visible=false;setTimeout(function(){_this.setData()},100)};WarFilmSQView.prototype.onWindowHide=function(){};WarFilmSQView.prototype.setData=function(){var _this=this;this.maxVal=0;this.m_zhuyanList.numItems=0;this.moduleMain=this.moduleWindow.mainWindow;this.m_filmName.text=Game.moduleModel.warData.moveStory.filmName;this.m_filmIcon.setData(Game.moduleModel.warData.moveStory);var types=Game.config.movieShootType.getConfigList();var tips=Game.config.msg.getConfig(MsgKey.movie_type_tips).notice;for(var i=0;i<types.length;i++){if(types[i].id==Game.moduleModel.warData.moveData.type){this.m_type.text=Game.moduleModel.warData.moveStory.filmType+"/"+types[i].getName;break}}this.m_filmTime.text=format(TEXT.FilmLongTime,Game.moduleModel.warData.moveStory.length);for(var i=0;i<5;i++){if(this.maxVal<Game.moduleModel.warData.moveData.avrAttribute[i]){this.maxVal=Game.moduleModel.warData.moveData.avrAttribute[i]}}this.maxVal*=Random.range(200,220)*0.01;this.m_filmAttributeList.numItems=5;this.m_filmAttributeList.visible=true;this.m_zhuyanList.numItems=Game.moduleModel.warData.getRealYRList.count;setTimeout(function(){_this.m_okBtn.visible=true},2000)};WarFilmSQView.prototype.initAttItem=function(index,obj){var item=obj;item.setData(index,this.maxVal)};WarFilmSQView.prototype.initYRItem=function(index,obj){var item=obj;var data=Game.moduleModel.warData.getRealYRList.getValue(index);item.setIcon(Game.config.avatar.getConfig(data.config.avatar).bodyIconUrl)};return WarFilmSQView}(WarMovie.WarFilmSQViewStruct));WarMovie.WarFilmSQView=WarFilmSQView})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmStarStruct=(function(_super){__extends(WarFilmStarStruct,_super);function WarFilmStarStruct(){return _super.call(this)||this}WarFilmStarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmStar"))};WarFilmStarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_starList=(this.getChild("starList"))};WarFilmStarStruct.URL="ui://y6ozucp1r0zd34";WarFilmStarStruct.DependPackages=["WarMovie"];return WarFilmStarStruct}(fairygui.GComponent));WarMovie.WarFilmStarStruct=WarFilmStarStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmStar=(function(_super){__extends(WarFilmStar,_super);function WarFilmStar(){return _super!==null&&_super.apply(this,arguments)||this}return WarFilmStar}(WarMovie.WarFilmStarStruct));WarMovie.WarFilmStar=WarFilmStar})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmSYPFStruct=(function(_super){__extends(WarFilmSYPFStruct,_super);function WarFilmSYPFStruct(){return _super.call(this)||this}WarFilmSYPFStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmSYPF"))};WarFilmSYPFStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_tip1=(this.getChild("tip1"));this.m_tip2=(this.getChild("tip2"));this.m_total=(this.getChild("total"));this.m_add=(this.getChild("add"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_t1=this.getTransition("t1")};WarFilmSYPFStruct.URL="ui://y6ozucp1qbxl9x";WarFilmSYPFStruct.DependPackages=["WarMovie","Common"];return WarFilmSYPFStruct}(fairygui.GComponent));WarMovie.WarFilmSYPFStruct=WarFilmSYPFStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmSYPF=(function(_super){__extends(WarFilmSYPF,_super);function WarFilmSYPF(){return _super!==null&&_super.apply(this,arguments)||this}WarFilmSYPF.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickOkBtn)};WarFilmSYPF.prototype.onClickOkBtn=function(){this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.sendUpdateMovieState()};WarFilmSYPF.prototype.onWindowShow=function(){this.setData()};WarFilmSYPF.prototype.onWindowHide=function(){};WarFilmSYPF.prototype.setData=function(){var _this=this;this.m_t1.stop();Game.sound.playSound(SoundKey.MM23_Premiere);var list=Game.moduleModel.warData.getRealYRList.getValues();for(var i=0;i<list.length;i++){if(i===list.length-1){Game.system.playSkillEffect(list[i].id,Games.SkillTriggerType.box_office_earnings,function(){if(Game.moduleModel.warData.moveData.extBoxOffice>0){_this.m_add.text="+"+formatNumberUnit(Game.moduleModel.warData.moveData.extBoxOffice);_this.m_t1.play(laya.utils.Handler.create(_this,_this.moveOverCall),1)}else{_this.m_t1.stop()}})}else{Game.system.playSkillEffect(list[i].id,Games.SkillTriggerType.box_office_earnings)}}this.moduleMain=this.moduleWindow.mainWindow;this.m_total.text=formatNumberUnit(Game.moduleModel.warData.moveData.premiereBoxOffice-Game.moduleModel.warData.moveData.extBoxOffice)};WarFilmSYPF.prototype.moveOverCall=function(){this.m_total.text=formatNumberUnit(Game.moduleModel.warData.moveData.premiereBoxOffice)};return WarFilmSYPF}(WarMovie.WarFilmSYPFStruct));WarMovie.WarFilmSYPF=WarFilmSYPF})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmTypeItemStruct=(function(_super){__extends(WarFilmTypeItemStruct,_super);function WarFilmTypeItemStruct(){return _super.call(this)||this}WarFilmTypeItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmTypeItem"))};WarFilmTypeItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_typeLabel=this.getController("typeLabel");this.m_title=(this.getChild("title"))};WarFilmTypeItemStruct.URL="ui://y6ozucp1r0zd4z";WarFilmTypeItemStruct.DependPackages=["WarMovie"];return WarFilmTypeItemStruct}(fairygui.GLabel));WarMovie.WarFilmTypeItemStruct=WarFilmTypeItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmTypeItem=(function(_super){__extends(WarFilmTypeItem,_super);function WarFilmTypeItem(){return _super!==null&&_super.apply(this,arguments)||this}return WarFilmTypeItem}(WarMovie.WarFilmTypeItemStruct));WarMovie.WarFilmTypeItem=WarFilmTypeItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmTypeSelectItemStruct=(function(_super){__extends(WarFilmTypeSelectItemStruct,_super);function WarFilmTypeSelectItemStruct(){return _super.call(this)||this}WarFilmTypeSelectItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmTypeSelectItem"))};WarFilmTypeSelectItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_icon=(this.getChild("icon"));this.m_filmType=(this.getChild("filmType"));this.m_lovePeople=(this.getChild("lovePeople"));this.m_proficiency=(this.getChild("proficiency"));this.m_totalTip=(this.getChild("totalTip"));this.m_tip=(this.getChild("tip"));this.m_actorVal1=(this.getChild("actorVal1"));this.m_actorVal2=(this.getChild("actorVal2"));this.m_actorVal3=(this.getChild("actorVal3"));this.m_actorVal4=(this.getChild("actorVal4"));this.m_actorVal5=(this.getChild("actorVal5"));this.m_actor1=(this.getChild("actor1"));this.m_actor2=(this.getChild("actor2"));this.m_actor3=(this.getChild("actor3"));this.m_actor4=(this.getChild("actor4"));this.m_actor5=(this.getChild("actor5"))};WarFilmTypeSelectItemStruct.URL="ui://y6ozucp1qbxl6a";WarFilmTypeSelectItemStruct.DependPackages=["WarMovie","Common"];return WarFilmTypeSelectItemStruct}(fairygui.GButton));WarMovie.WarFilmTypeSelectItemStruct=WarFilmTypeSelectItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmTypeSelectItem=(function(_super){__extends(WarFilmTypeSelectItem,_super);function WarFilmTypeSelectItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.actorList=new Array();_this.actorValList=new Array();return _this}WarFilmTypeSelectItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.actorList=[this.m_actor1,this.m_actor2,this.m_actor3,this.m_actor4,this.m_actor5];this.actorValList=[this.m_actorVal1,this.m_actorVal2,this.m_actorVal3,this.m_actorVal4,this.m_actorVal5]};WarFilmTypeSelectItem.prototype.setData=function(data,index){this.m_filmType.text=data.getName;this.m_lovePeople.text=data.getLove;this.m_icon.icon=Game.config.avatar.getConfig(data.pic).iconUrl;var allsType=0;for(var i=0;i<5;i++){if(i<Game.moduleModel.warData.getRealYRList.count){this.actorList[i].visible=true;this.actorValList[i].visible=true;var actor=Game.moduleModel.warData.getRealYRList.getValue(i);var config=Game.config.actor.getConfig(actor.id);this.actorList[i].ActorId=actor.id;var stype=actor.getShootType(data.id+400);if(stype!==null){allsType+=stype.proficiencyLevel;this.actorValList[i].text=stype.proficiencyLevel.toString()}else{this.actorValList[i].text="0"}}else{this.actorList[i].visible=false;this.actorValList[i].visible=false}}this.m_proficiency.text=allsType.toString()};return WarFilmTypeSelectItem}(WarMovie.WarFilmTypeSelectItemStruct));WarMovie.WarFilmTypeSelectItem=WarFilmTypeSelectItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmYirenItemStruct=(function(_super){__extends(WarFilmYirenItemStruct,_super);function WarFilmYirenItemStruct(){return _super.call(this)||this}WarFilmYirenItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmYirenItem"))};WarFilmYirenItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_sex=this.getController("sex");this.m_mingzi=(this.getChild("mingzi"));this.m_inf=(this.getChild("inf"));this.m_t0=this.getTransition("t0")};WarFilmYirenItemStruct.URL="ui://y6ozucp1r0zd5l";WarFilmYirenItemStruct.DependPackages=["WarMovie"];return WarFilmYirenItemStruct}(fairygui.GButton));WarMovie.WarFilmYirenItemStruct=WarFilmYirenItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmYirenItem=(function(_super){__extends(WarFilmYirenItem,_super);function WarFilmYirenItem(){return _super!==null&&_super.apply(this,arguments)||this}WarFilmYirenItem.prototype.setData=function(data){this.m_mingzi.text=data.getName;var sex=data.getSex-1;if(sex<0){sex=1}this.m_sex.setSelectedIndex(sex);this.m_inf.setData(data)};return WarFilmYirenItem}(WarMovie.WarFilmYirenItemStruct));WarMovie.WarFilmYirenItem=WarFilmYirenItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmYirenReqStruct=(function(_super){__extends(WarFilmYirenReqStruct,_super);function WarFilmYirenReqStruct(){return _super.call(this)||this}WarFilmYirenReqStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmYirenReq"))};WarFilmYirenReqStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};WarFilmYirenReqStruct.URL="ui://y6ozucp1r0zd5k";WarFilmYirenReqStruct.DependPackages=["WarMovie"];return WarFilmYirenReqStruct}(fairygui.GLabel));WarMovie.WarFilmYirenReqStruct=WarFilmYirenReqStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmYirenReq=(function(_super){__extends(WarFilmYirenReq,_super);function WarFilmYirenReq(){return _super!==null&&_super.apply(this,arguments)||this}return WarFilmYirenReq}(WarMovie.WarFilmYirenReqStruct));WarMovie.WarFilmYirenReq=WarFilmYirenReq})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmYRShowStruct=(function(_super){__extends(WarFilmYRShowStruct,_super);function WarFilmYRShowStruct(){return _super.call(this)||this}WarFilmYRShowStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFilmYRShow"))};WarFilmYRShowStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_warTape=(this.getChild("warTape"));this.m_actor1=(this.getChild("actor1"));this.m_actor2=(this.getChild("actor2"));this.m_actor3=(this.getChild("actor3"));this.m_actor4=(this.getChild("actor4"));this.m_actor5=(this.getChild("actor5"))};WarFilmYRShowStruct.URL="ui://y6ozucp1qbxl8g";WarFilmYRShowStruct.DependPackages=["WarMovie","Fx"];return WarFilmYRShowStruct}(fairygui.GComponent));WarMovie.WarFilmYRShowStruct=WarFilmYRShowStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFilmYRShow=(function(_super){__extends(WarFilmYRShow,_super);function WarFilmYRShow(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.haveClick=false;return _this}WarFilmYRShow.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_actor1.visible=false;this.m_actor2.visible=false;this.m_actor3.visible=false;this.m_actor4.visible=false;this.m_actor5.visible=false;this.yrList=[this.m_actor1,this.m_actor2,this.m_actor3,this.m_actor4,this.m_actor5];this.onClick(this,this.onClickClose)};WarFilmYRShow.prototype.onClickClose=function(){if(!this.haveClick){this.haveClick=true;this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.sendUpdateMovieState()}};WarFilmYRShow.prototype.onWindowShow=function(){this.haveClick=false;this.setData()};WarFilmYRShow.prototype.onWindowHide=function(){};WarFilmYRShow.prototype.setData=function(){this.moduleMain=this.moduleWindow.mainWindow;this.curFilmYRItemNumber=0;for(var i=0;i<this.yrList.length;i++){this.yrList[i].visible=false}var count=Game.moduleModel.warData.getRealYRList.count;var _xx=720/count;for(var i=0;i<count;i++){this.yrList[i].m_mask.width=_xx;this.yrList[i].m_bg.width=_xx;var maskX=this.yrList[i].m_mask.x;this.yrList[i].x=i*_xx-maskX+this.m_warTape.x;this.yrList[i].m_left.x=maskX-2;this.yrList[i].m_right.x=144-maskX-2;this.yrList[i].m_t0.stop()}Game.sound.playSound(SoundKey.MM18_Screen);this.filmYRShowItem(count)};WarFilmYRShow.prototype.filmYRShowItem=function(max){var _this=this;this.curFilmYRItemNumber++;if(this.curFilmYRItemNumber<=max){var actor=Game.moduleModel.warData.getRealYRList.getValue(this.curFilmYRItemNumber-1);this.yrList[this.curFilmYRItemNumber-1].visible=true;this.yrList[this.curFilmYRItemNumber-1].setRandomIcon(actor.id);this.yrList[this.curFilmYRItemNumber-1].m_t0.play(laya.utils.Handler.create(this,this.filmYRShowAniOver,[max]),1);this.yrList[this.curFilmYRItemNumber-1].m_t0.setHook("over",laya.utils.Handler.create(this,this.filmYRShowAni,[max]))}else{setTimeout(function(){_this.onClickClose()},3000)}};WarFilmYRShow.prototype.filmYRShowAni=function(max){if(this.curFilmYRItemNumber<max){this.filmYRShowItem(max)}};WarFilmYRShow.prototype.filmYRShowAniOver=function(max){if(this.curFilmYRItemNumber==max){this.filmYRShowItem(max)}};return WarFilmYRShow}(WarMovie.WarFilmYRShowStruct));WarMovie.WarFilmYRShow=WarFilmYRShow})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFrreBackItemStruct=(function(_super){__extends(WarFrreBackItemStruct,_super);function WarFrreBackItemStruct(){return _super.call(this)||this}WarFrreBackItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarFrreBackItem"))};WarFrreBackItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_noticeIcon=(this.getChild("noticeIcon"));this.m_noticeName=(this.getChild("noticeName"));this.m_fen=(this.getChild("fen"));this.m_useNo=(this.getChild("useNo"));this.m_dianzanValue=(this.getChild("dianzanValue"));this.m_starProgress=(this.getChild("starProgress"));this.m_des=(this.getChild("des"));this.m_t0=this.getTransition("t0")};WarFrreBackItemStruct.URL="ui://y6ozucp1qbxl72";WarFrreBackItemStruct.DependPackages=["WarMovie","Common"];return WarFrreBackItemStruct}(fairygui.GComponent));WarMovie.WarFrreBackItemStruct=WarFrreBackItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarFrreBackItem=(function(_super){__extends(WarFrreBackItem,_super);function WarFrreBackItem(){return _super!==null&&_super.apply(this,arguments)||this}WarFrreBackItem.prototype.setData=function(val,dianzhan,index){var values=val*0.1;this.m_fen.text=values.toFixed(1);this.m_starProgress.value=val;this.m_dianzanValue.text=dianzhan.toFixed(0);var config=Game.config.movieMidiaEvaluation.getMovieMidiaEva(values,index+1);if(config.pic&&config.pic>0){this.m_noticeIcon.icon=Game.config.avatar.getConfig(config.pic).iconUrl}this.m_noticeName.text=config.name;this.m_des.setData(config.content);this.m_t0.play(laya.utils.Handler.create(this,function(){Game.moduleModel.warData.sFeedBackUpdate.dispatch()}),1)};return WarFrreBackItem}(WarMovie.WarFrreBackItemStruct));WarMovie.WarFrreBackItem=WarFrreBackItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarGoldProgressBarStruct=(function(_super){__extends(WarGoldProgressBarStruct,_super);function WarGoldProgressBarStruct(){return _super.call(this)||this}WarGoldProgressBarStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarGoldProgressBar"))};WarGoldProgressBarStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar=(this.getChild("bar"))};WarGoldProgressBarStruct.URL="ui://y6ozucp1qnq0dv";WarGoldProgressBarStruct.DependPackages=["WarMovie"];return WarGoldProgressBarStruct}(fairygui.GProgressBar));WarMovie.WarGoldProgressBarStruct=WarGoldProgressBarStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarGoldProgressBar=(function(_super){__extends(WarGoldProgressBar,_super);function WarGoldProgressBar(){return _super!==null&&_super.apply(this,arguments)||this}return WarGoldProgressBar}(WarMovie.WarGoldProgressBarStruct));WarMovie.WarGoldProgressBar=WarGoldProgressBar})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarGoodsItemStruct=(function(_super){__extends(WarGoodsItemStruct,_super);function WarGoodsItemStruct(){return _super.call(this)||this}WarGoodsItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarGoodsItem"))};WarGoodsItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_colorCon=this.getController("colorCon");this.m_icon=(this.getChild("icon"));this.m_starList=(this.getChild("starList"));this.m_title=(this.getChild("title"))};WarGoodsItemStruct.URL="ui://y6ozucp1qbxl7u";WarGoodsItemStruct.DependPackages=["WarMovie","Common","PfSkin"];return WarGoodsItemStruct}(fairygui.GButton));WarMovie.WarGoodsItemStruct=WarGoodsItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarGoodsItem=(function(_super){__extends(WarGoodsItem,_super);function WarGoodsItem(){return _super!==null&&_super.apply(this,arguments)||this}WarGoodsItem.prototype.setData=function(index){var itemDesc=Game.moduleModel.warData.dropList[index];this.m_title.text=formatNumberUnit(itemDesc.amount);var config=Game.config.item.getConfig(itemDesc.itemId);this.m_icon.icon=Game.config.avatar.getConfig(config.icon).iconUrl;this.m_colorCon.setSelectedIndex(0);this.m_starList.numItems=config.itemStarNum};return WarGoodsItem}(WarMovie.WarGoodsItemStruct));WarMovie.WarGoodsItem=WarGoodsItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarInfBtnStruct=(function(_super){__extends(WarInfBtnStruct,_super);function WarInfBtnStruct(){return _super.call(this)||this}WarInfBtnStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarInfBtn"))};WarInfBtnStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};WarInfBtnStruct.URL="ui://y6ozucp1kh7oa2";WarInfBtnStruct.DependPackages=["WarMovie","Common"];return WarInfBtnStruct}(fairygui.GButton));WarMovie.WarInfBtnStruct=WarInfBtnStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarInfBtn=(function(_super){__extends(WarInfBtn,_super);function WarInfBtn(){return _super!==null&&_super.apply(this,arguments)||this}return WarInfBtn}(WarMovie.WarInfBtnStruct));WarMovie.WarInfBtn=WarInfBtn})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarjiaojuanStruct=(function(_super){__extends(WarjiaojuanStruct,_super);function WarjiaojuanStruct(){return _super.call(this)||this}WarjiaojuanStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","Warjiaojuan"))};WarjiaojuanStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t0=this.getTransition("t0")};WarjiaojuanStruct.URL="ui://y6ozucp1qbxl9d";WarjiaojuanStruct.DependPackages=["WarMovie"];return WarjiaojuanStruct}(fairygui.GComponent));WarMovie.WarjiaojuanStruct=WarjiaojuanStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Warjiaojuan=(function(_super){__extends(Warjiaojuan,_super);function Warjiaojuan(){return _super!==null&&_super.apply(this,arguments)||this}return Warjiaojuan}(WarMovie.WarjiaojuanStruct));WarMovie.Warjiaojuan=Warjiaojuan})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarjiaojuanPinPuStruct=(function(_super){__extends(WarjiaojuanPinPuStruct,_super);function WarjiaojuanPinPuStruct(){return _super.call(this)||this}WarjiaojuanPinPuStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarjiaojuanPinPu"))};WarjiaojuanPinPuStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};WarjiaojuanPinPuStruct.URL="ui://y6ozucp1hz8fd4";WarjiaojuanPinPuStruct.DependPackages=["WarMovie"];return WarjiaojuanPinPuStruct}(fairygui.GComponent));WarMovie.WarjiaojuanPinPuStruct=WarjiaojuanPinPuStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarjiaojuanPinPu=(function(_super){__extends(WarjiaojuanPinPu,_super);function WarjiaojuanPinPu(){return _super!==null&&_super.apply(this,arguments)||this}return WarjiaojuanPinPu}(WarMovie.WarjiaojuanPinPuStruct));WarMovie.WarjiaojuanPinPu=WarjiaojuanPinPu})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarJiesuanNumStruct=(function(_super){__extends(WarJiesuanNumStruct,_super);function WarJiesuanNumStruct(){return _super.call(this)||this}WarJiesuanNumStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarJiesuanNum"))};WarJiesuanNumStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_num=this.getController("num")};WarJiesuanNumStruct.URL="ui://y6ozucp1j0tea8";WarJiesuanNumStruct.DependPackages=["WarMovie"];return WarJiesuanNumStruct}(fairygui.GComponent));WarMovie.WarJiesuanNumStruct=WarJiesuanNumStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarJiesuanNum=(function(_super){__extends(WarJiesuanNum,_super);function WarJiesuanNum(){return _super!==null&&_super.apply(this,arguments)||this}WarJiesuanNum.prototype.setData=function(num){var curNum=0;if(num==="."){curNum=10}else{if(num==="K"){curNum=11}else{if(num==="M"){curNum=12}else{if(num==="B"){curNum=13}else{if(num===","){curNum=14}else{curNum=toInt(num)}}}}}this.m_num.setSelectedIndex(curNum)};return WarJiesuanNum}(WarMovie.WarJiesuanNumStruct));WarMovie.WarJiesuanNum=WarJiesuanNum})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarMainStruct=(function(_super){__extends(WarMainStruct,_super);function WarMainStruct(){return _super.call(this)||this}WarMainStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarMain"))};WarMainStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml)};WarMainStruct.URL="ui://y6ozucp1qbxl99";WarMainStruct.DependPackages=["WarMovie"];return WarMainStruct}(fairygui.GComponent));WarMovie.WarMainStruct=WarMainStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarMain=(function(_super){__extends(WarMain,_super);function WarMain(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.filmingRun=false;return _this}WarMain.prototype.onWindowShow=function(){if(!Game.moduleModel.warData.isBattleOverCall){Game.protoFailEvent.add(ProtoEventKey.movie_MakeFilm,this.onProtoFail,this);Game.event.add(GameEventKey.GameEventKey_TimeLimitRemind,this.GameEventKey_TimeLimitRemind,this);Game.event.dispatch(GameEventKey.PopupPanel);this.checkStatus()}else{this.moduleWindow.menuBack()}Game.event.add(GameEventKey.GameEventKey_MakeFilm,this.subWindowToMain,this);Game.event.add(GameEventKey.GameEventKey_MakeFilmRename,this.subWindowToMain,this);Game.event.add(GameEventKey.GameEventKey_MakeFilmConfirmSetActor,this.subWindowToMain,this);Game.event.add(GameEventKey.GameEventKey_MakeFilmsetSelectType,this.subWindowToMain,this);Game.event.add(GameEventKey.GameEventKey_MakeFilmsetPublishMovie,this.subWindowToMain,this);Game.event.add(GameEventKey.GameEventKey_MakeFilmUpdateMovieState,this.subWindowToMain,this);Game.moduleModel.warData.sReGetLoginGameData.add(this.sReGetLoginGameData,this)};WarMain.prototype.onWindowHide=function(){Game.protoFailEvent.remove(ProtoEventKey.movie_MakeFilm,this.onProtoFail,this);Game.event.remove(GameEventKey.GameEventKey_TimeLimitRemind,this.GameEventKey_TimeLimitRemind,this);Game.event.remove(GameEventKey.GameEventKey_MakeFilm,this.subWindowToMain,this);Game.event.remove(GameEventKey.GameEventKey_MakeFilmRename,this.subWindowToMain,this);Game.event.remove(GameEventKey.GameEventKey_MakeFilmConfirmSetActor,this.subWindowToMain,this);Game.event.remove(GameEventKey.GameEventKey_MakeFilmsetSelectType,this.subWindowToMain,this);Game.event.remove(GameEventKey.GameEventKey_MakeFilmsetPublishMovie,this.subWindowToMain,this);Game.event.remove(GameEventKey.GameEventKey_MakeFilmUpdateMovieState,this.subWindowToMain,this);Game.moduleModel.warData.sReGetLoginGameData.remove(this.sReGetLoginGameData,this);Game.system.hideRename()};WarMain.prototype.sReGetLoginGameData=function(){this.moduleWindow.closeAllSubwindowSelf();this.checkStatus()};WarMain.prototype.onProtoFail=function(protoKey){this.moduleWindow.menuBack()};WarMain.prototype.GameEventKey_TimeLimitRemind=function(timeLimit){switch(timeLimit){case Games.TimeLimitType.NineToFiftyFive:if(User.isNineToFiftyFive&&Game.moduleModel.warData.moveData&&Game.moduleModel.warData.moveData.state<EMovieState.result){Game.system.toastText(TEXT.NineToFiftyFiveTip);this.moduleWindow.menuBack()}break}};WarMain.prototype.checkStatus=function(){this.endShowWaiting();if(Game.moduleModel.warData.moveJieSuanData&&Game.moduleModel.warData.moveJieSuanData!==null){Game.menu.getMenuCtl(MenuId.Home).moduleWindow.conent.onCreateFilmContinue();this.filmOverTip(EMovieState.overMarket)}else{if(Game.moduleModel.warData.moveData&&Game.moduleModel.warData.moveData!==null){this.subWindowToMain()}else{if(Game.moduleModel.warData.movieDataList.length>=5){this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.EndIncome,true)}else{this.shootingConfirmation()}}}};WarMain.prototype.startShowWaiting=function(){};WarMain.prototype.endShowWaiting=function(){};WarMain.prototype.shootingConfirmation=function(){if(!Game.moduleModel.street.canSign){if(Game.moduleModel.warData.realLicenceNum>0){this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.ShootingConfirmation,true)}else{if(Game.moduleModel.warData.licenceData&&Game.moduleModel.warData.licenceData.dailyCount>=Game.config.global.getConfig(GlobalKey.Licence_Restore_Max).value){this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.XukeOver,true)}else{this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.XukeHuifu,true)}}}else{this.moduleWindow.menuBack();Game.guide.readyPlayGuide(105401,true)}};WarMain.prototype.filmOverTip=function(status){var _this=this;this.endShowWaiting();this.moduleWindow.closeLastSubwindowSelf();switch(status){case EMovieState.overMarket:this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.overMarket,true);break;case EMovieState.Jiesuan:this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.Jiesuan,true);break;case EMovieState.rewardTip:Game.sound.playSound(SoundKey.MM30_Settlements);var dropList=Game.moduleModel.warData.dropList;var dtList=new Array();var fansVal_1=0;for(var ll=0;ll<dropList.length;ll++){var dtItem=new DTItemNum();dtItem.itemId=dropList[ll].itemId;dtItem.itemNum=dropList[ll].amount;if(dropList[ll].itemId===EItemId.fans){fansVal_1+=dropList[ll].amount}dtList.push(dtItem)}Game.moduleModel.warData.jiesuanName=Game.moduleModel.warData.moveJieSuanData.name;Game.system.getItemText(dtList,function(){if(fansVal_1>0){Game.system.addFansText(fansVal_1,Handler.create(_this,_this.triggerWarMainBack))}else{_this.triggerWarMainBack()}},false);Game.moduleModel.warData.moveJieSuanData=null;this.moduleWindow.menuClose();break}};WarMain.prototype.triggerWarMainBack=function(){Game.system.alrtTextFull(format(Game.config.msg.getConfig(MsgKey.movie_off_line_tips).notice,Game.config.global.getConfig(GlobalKey.Popularize_Duration).value),Game.moduleModel.warData.jiesuanName,null,function(){Game.moduleModel.func.checkLevelUp()})};WarMain.prototype.subWindowToMain=function(){this.endShowWaiting();if(Game.moduleModel.warData.moveData.state!==EMovieState.chooseType&&Game.moduleModel.warData.moveData.state!==EMovieState.propaganda&&Game.moduleModel.warData.moveData.state!==EMovieState.complete){this.moduleWindow.closeAllSubwindowSelf()}else{this.moduleWindow.closeAllSubwindowSelf([this.moduleWindow.warFilmingSubwindow])}switch(Game.moduleModel.warData.moveData.state){case EMovieState.chooseScript:this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.FilmSelect,true);break;case EMovieState.renameFilm:break;case EMovieState.currentMarketInf:this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.CurrentMarketInf,true);break;case EMovieState.chooseActor:this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.SelectYiren,true);break;case EMovieState.costView:this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.CostView,true);break;case EMovieState.yRShowView:this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.YRShowView,true);break;case EMovieState.compatibility:this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.Compatibility,true);break;case EMovieState.filming:if(!this.filmingRun){this.filmingRun=true;this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.Filming,true)}else{this.moduleWindow.warFilmingSubwindow.windowShow()}break;case EMovieState.chooseType:if(!this.filmingRun){this.filmingRun=true;this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.Filming,true)}else{this.moduleWindow.warFilmingSubwindow.windowShow()}break;case EMovieState.chooseTip:console.error("----不会进入这里---");break;case EMovieState.propaganda:if(!this.filmingRun){this.filmingRun=true;this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.Filming,true)}else{this.moduleWindow.warFilmingSubwindow.windowShow()}break;case EMovieState.complete:if(!this.filmingRun){this.filmingRun=true;this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.Filming,true)}else{this.moduleWindow.warFilmingSubwindow.windowShow()}break;case EMovieState.actorUpdate:Game.event.dispatch(GameEventKey.GameEventKey_ShootEnd);this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.proficiency,true);break;case EMovieState.proficiency:this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.FilmSQView,true);break;case EMovieState.chooseTheater:this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.CinemaSelection,true);break;case EMovieState.noticeFeedBack:this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.NoticeFeedBack,true);break;case EMovieState.SYPF:this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.SYPF,true);break;case EMovieState.audienceReputation:this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.AudienceReputation,true);break;case EMovieState.result:Game.moduleModel.warData.refrushFilmingStatus();this.moduleWindow.openSubwindowByIndex(Games.WarSubwindowType.Shangying,true);break}};return WarMain}(WarMovie.WarMainStruct));WarMovie.WarMain=WarMain})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarMarketPeopleStruct=(function(_super){__extends(WarMarketPeopleStruct,_super);function WarMarketPeopleStruct(){return _super.call(this)||this}WarMarketPeopleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarMarketPeople"))};WarMarketPeopleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_colorControl=this.getController("colorControl");this.m_sex=this.getController("sex");this.m_curMarket=(this.getChild("curMarket"));this.m_req=(this.getChild("req"));this.m_req2=(this.getChild("req2"))};WarMarketPeopleStruct.URL="ui://y6ozucp1qbxl8j";WarMarketPeopleStruct.DependPackages=["WarMovie","Common"];return WarMarketPeopleStruct}(fairygui.GComponent));WarMovie.WarMarketPeopleStruct=WarMarketPeopleStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarMarketPeople=(function(_super){__extends(WarMarketPeople,_super);function WarMarketPeople(){return _super!==null&&_super.apply(this,arguments)||this}WarMarketPeople.prototype.setData=function(req,cur,sex){var isOk=true;this.m_curMarket.text=cur+"%";this.m_req.text=req+"%";this.m_req2.text=req+"%";if(req<=cur){this.m_colorControl.setSelectedIndex(0)}else{this.m_colorControl.setSelectedIndex(1);isOk=false}this.m_sex.setSelectedIndex(sex);return isOk};return WarMarketPeople}(WarMovie.WarMarketPeopleStruct));WarMovie.WarMarketPeople=WarMarketPeople})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarMoveTextHideStruct=(function(_super){__extends(WarMoveTextHideStruct,_super);function WarMoveTextHideStruct(){return _super.call(this)||this}WarMoveTextHideStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarMoveTextHide"))};WarMoveTextHideStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};WarMoveTextHideStruct.URL="ui://y6ozucp1row7e2";WarMoveTextHideStruct.DependPackages=["WarMovie"];return WarMoveTextHideStruct}(fairygui.GLabel));WarMovie.WarMoveTextHideStruct=WarMoveTextHideStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarMoveTextHide=(function(_super){__extends(WarMoveTextHide,_super);function WarMoveTextHide(){return _super!==null&&_super.apply(this,arguments)||this}return WarMoveTextHide}(WarMovie.WarMoveTextHideStruct));WarMovie.WarMoveTextHide=WarMoveTextHide})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarMoveTextUDStruct=(function(_super){__extends(WarMoveTextUDStruct,_super);function WarMoveTextUDStruct(){return _super.call(this)||this}WarMoveTextUDStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarMoveTextUD"))};WarMoveTextUDStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};WarMoveTextUDStruct.URL="ui://y6ozucp1r0zd4w";WarMoveTextUDStruct.DependPackages=["WarMovie"];return WarMoveTextUDStruct}(fairygui.GLabel));WarMovie.WarMoveTextUDStruct=WarMoveTextUDStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarMoveTextUD=(function(_super){__extends(WarMoveTextUD,_super);function WarMoveTextUD(){return _super!==null&&_super.apply(this,arguments)||this}WarMoveTextUD.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.y=2};WarMoveTextUD.prototype.setData=function(str){this.m_title.text=str;this.scrollPane.posY=-5};return WarMoveTextUD}(WarMovie.WarMoveTextUDStruct));WarMovie.WarMoveTextUD=WarMoveTextUD})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarNoticeStruct=(function(_super){__extends(WarNoticeStruct,_super);function WarNoticeStruct(){return _super.call(this)||this}WarNoticeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarNotice"))};WarNoticeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_nameTip=(this.getChild("nameTip"));this.m_title=(this.getChild("title"));this.m_noticeList=(this.getChild("noticeList"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_okBtn=(this.getChild("okBtn"))};WarNoticeStruct.URL="ui://y6ozucp1qbxl6c";WarNoticeStruct.DependPackages=["WarMovie","Common","System"];return WarNoticeStruct}(fairygui.GComponent));WarMovie.WarNoticeStruct=WarNoticeStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarNotice=(function(_super){__extends(WarNotice,_super);function WarNotice(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.mediaId=0;_this.actorData=new Array();return _this}WarNotice.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.FilmNoticeTitle;this.m_nameTip.text=TEXT.FilmNoticeTitle;this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_noticeList.itemRenderer=Laya.Handler.create(this,this.initNoticeItem,null,false);this.m_closeBtn.onClick(this,this.onClickClose)};WarNotice.prototype.onClickOkBtn=function(){this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.sendUpdateMovieState()};WarNotice.prototype.onClickClose=function(){this.moduleWindow.closeSelf();this.moduleMain.menuClose()};WarNotice.prototype.onWindowShow=function(){Game.moduleModel.warData.sUpdateMediaCall.add(this.onAcceptBack,this);this.setData()};WarNotice.prototype.onWindowHide=function(){Game.moduleModel.warData.sUpdateMediaCall.remove(this.onAcceptBack,this)};WarNotice.prototype.setData=function(){this.m_noticeList.numItems=0;this.moduleMain=this.moduleWindow.mainWindow;this.getRandomActor();this.m_noticeList.numItems=Game.moduleModel.warData.moveData.mediaVisit.length};WarNotice.prototype.getRandomActor=function(){this.actorList=new Dictionary();var actors=Game.moduleModel.warData.getRealYRList;var actorLength=actors.count;for(var i=0;i<Game.moduleModel.warData.moveData.mediaVisit.length;i++){var randomActorList=new Array();var randomCount=Random.rangeBoth(1,2);var arrActor=new Array();if(actorLength<=randomCount||actorLength<=2){var lengths=randomCount<actorLength?randomCount:actorLength;for(var j=0;j<lengths;j++){arrActor.push(actors.getValue(j))}}else{var random1=Random.range(0,actorLength);arrActor.push(actors.getValue(random1));if(randomCount>1){var halfLeght=actorLength/2;var random2=void 0;if(random1<halfLeght){random2=Random.range(halfLeght+1,actorLength)}else{random2=Random.range(0,halfLeght)}random2=Math.floor(random2);if(random2<0||random2>=actorLength||random2==random1){}else{arrActor.push(actors.getValue(random2))}}}this.actorList.add(i,arrActor)}};WarNotice.prototype.initNoticeItem=function(index,obj){var _this=this;var item=obj;item.setData(index,this.actorList.getValue(index),function(arg,actorData){_this.selectItemGetValue(arg,actorData)})};WarNotice.prototype.selectItemGetValue=function(index,actorData){this.mediaId=index;this.actorData=actorData;Game.moduleModel.warData.AcceptMediaVisit(index)};WarNotice.prototype.onAcceptBack=function(arg){Game.moduleModel.warData.filmExpectations.add(this.mediaId,arg);Game.moduleModel.warData.filmExpecteActor.add(this.mediaId,this.actorData);this.m_noticeList.numItems=0;this.m_noticeList.numItems=Game.moduleModel.warData.moveData.mediaVisit.length};return WarNotice}(WarMovie.WarNoticeStruct));WarMovie.WarNotice=WarNotice})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarPaishequerenStruct=(function(_super){__extends(WarPaishequerenStruct,_super);function WarPaishequerenStruct(){return _super.call(this)||this}WarPaishequerenStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarPaishequeren"))};WarPaishequerenStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_tip=(this.getChild("tip"));this.m_cost=(this.getChild("cost"));this.m_closeTip=(this.getChild("closeTip"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_okBtn=(this.getChild("okBtn"))};WarPaishequerenStruct.URL="ui://y6ozucp1r0zd2v";WarPaishequerenStruct.DependPackages=["WarMovie","Common"];return WarPaishequerenStruct}(fairygui.GComponent));WarMovie.WarPaishequerenStruct=WarPaishequerenStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarPaishequeren=(function(_super){__extends(WarPaishequeren,_super);function WarPaishequeren(){return _super!==null&&_super.apply(this,arguments)||this}WarPaishequeren.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_closeBtn.onClick(this,this.onClickClose);this.m_okBtn.onClick(this,this.onClickOkBtn)};WarPaishequeren.prototype.onClickClose=function(){this.moduleWindow.menuBack()};WarPaishequeren.prototype.onClickOkBtn=function(){this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.MakeFilm()};WarPaishequeren.prototype.onWindowShow=function(){this.setData()};WarPaishequeren.prototype.onWindowHide=function(){};WarPaishequeren.prototype.setData=function(){this.moduleMain=this.moduleWindow.mainWindow;this.m_tip.text=Game.config.msg.getConfig(MsgKey.movie_confirm).notice;this.m_icon.icon=Games.WarLoadPic.getItemIcon(EItemId.licence)};return WarPaishequeren}(WarMovie.WarPaishequerenStruct));WarMovie.WarPaishequeren=WarPaishequeren})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarPeopleStruct=(function(_super){__extends(WarPeopleStruct,_super);function WarPeopleStruct(){return _super.call(this)||this}WarPeopleStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarPeople"))};WarPeopleStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_sex=(this.getChild("sex"))};WarPeopleStruct.URL="ui://y6ozucp1r0zd52";WarPeopleStruct.DependPackages=["WarMovie"];return WarPeopleStruct}(fairygui.GLabel));WarMovie.WarPeopleStruct=WarPeopleStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarPeople=(function(_super){__extends(WarPeople,_super);function WarPeople(){return _super!==null&&_super.apply(this,arguments)||this}return WarPeople}(WarMovie.WarPeopleStruct));WarMovie.WarPeople=WarPeople})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarPeopleFaceItemStruct=(function(_super){__extends(WarPeopleFaceItemStruct,_super);function WarPeopleFaceItemStruct(){return _super.call(this)||this}WarPeopleFaceItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarPeopleFaceItem"))};WarPeopleFaceItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_phiz=this.getController("phiz");this.m_sex=this.getController("sex");this.m_c1=this.getController("c1");this.m_peopleMan=(this.getChild("peopleMan"));this.m_peopleWomen=(this.getChild("peopleWomen"));this.m_peopleChild=(this.getChild("peopleChild"));this.m_face0=(this.getChild("face0"));this.m_face1=(this.getChild("face1"));this.m_face2=(this.getChild("face2"));this.m_face3=(this.getChild("face3"));this.m_face4=(this.getChild("face4"));this.m_tip=(this.getChild("tip"));this.m_tip2=(this.getChild("tip2"));this.m_t0=this.getTransition("t0")};WarPeopleFaceItemStruct.URL="ui://y6ozucp1qbxl80";WarPeopleFaceItemStruct.DependPackages=["WarMovie","Common"];return WarPeopleFaceItemStruct}(fairygui.GComponent));WarMovie.WarPeopleFaceItemStruct=WarPeopleFaceItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarPeopleFaceItem=(function(_super){__extends(WarPeopleFaceItem,_super);function WarPeopleFaceItem(){return _super!==null&&_super.apply(this,arguments)||this}return WarPeopleFaceItem}(WarMovie.WarPeopleFaceItemStruct));WarMovie.WarPeopleFaceItem=WarPeopleFaceItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarPeopleSmallStruct=(function(_super){__extends(WarPeopleSmallStruct,_super);function WarPeopleSmallStruct(){return _super.call(this)||this}WarPeopleSmallStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarPeopleSmall"))};WarPeopleSmallStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};WarPeopleSmallStruct.URL="ui://y6ozucp1r0zd54";WarPeopleSmallStruct.DependPackages=["WarMovie","Common"];return WarPeopleSmallStruct}(fairygui.GLabel));WarMovie.WarPeopleSmallStruct=WarPeopleSmallStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarPeopleSmall=(function(_super){__extends(WarPeopleSmall,_super);function WarPeopleSmall(){return _super!==null&&_super.apply(this,arguments)||this}return WarPeopleSmall}(WarMovie.WarPeopleSmallStruct));WarMovie.WarPeopleSmall=WarPeopleSmall})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarSelectActorStruct=(function(_super){__extends(WarSelectActorStruct,_super);function WarSelectActorStruct(){return _super.call(this)||this}WarSelectActorStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarSelectActor"))};WarSelectActorStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_select=this.getController("select");this.m_okBtnContorl=this.getController("okBtnContorl");this.m_reqList=(this.getChild("reqList"));this.m_emtpyTip=(this.getChild("emtpyTip"));this.m_emtpyTip2=(this.getChild("emtpyTip2"));this.m_searchTip=(this.getChild("searchTip"));this.m_yrList=(this.getChild("yrList"));this.m_title=(this.getChild("title"));this.m_okBtn=(this.getChild("okBtn"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_filmInfBtn=(this.getChild("filmInfBtn"));this.m_selectTip=(this.getChild("selectTip"));this.m_backBtn=(this.getChild("backBtn"));this.m_zhongTip=(this.getChild("zhongTip"))};WarSelectActorStruct.URL="ui://y6ozucp1yytj5m";WarSelectActorStruct.DependPackages=["WarMovie","PfSkin","Common"];return WarSelectActorStruct}(fairygui.GComponent));WarMovie.WarSelectActorStruct=WarSelectActorStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarSelectActor=(function(_super){__extends(WarSelectActor,_super);function WarSelectActor(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.curActorReqIndex=-1;_this.showTipTimeOutNum=-1;return _this}WarSelectActor.prototype.constructFromXML=function(xml){var _this=this;_super.prototype.constructFromXML.call(this,xml);this.m_selectTip.visible=false;this.m_title.text=TEXT.FilmSelectActorTitle;this.m_selectTip.text=TEXT.PleaseSelectActor;this.m_reqList.itemRenderer=Laya.Handler.create(this,this.YRReqItem,null,false);this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_closeBtn.onClick(this,this.onCloseUI);this.m_reqList.on(fairygui.Events.CLICK_ITEM,this,this.reqClickItem);this.m_backBtn.onClick(this,this.onBackSelect,[-1]);this.m_filmInfBtn.onClick(this,function(){_this.moduleMain.openSubwindowByIndex(Games.WarSubwindowType.FilmInfo,true)})};WarSelectActor.prototype.onCloseUI=function(){this.curActorReqIndex=-1;this.onBackSelect(-1);this.moduleWindow.closeSelf();this.moduleMain.menuClose()};WarSelectActor.prototype.onClickOkBtn=function(){var myHaveDollar=Game.moduleModel.item.getItemNum(EItemId.dollar);var list=Game.moduleModel.warData.getRealYRList;var cost=0;if(list.count>0){var keyList=list.getKeys();for(var i=0;i<keyList.length;i++){var val=list.getValue(keyList[i]);if(val.id!==9999){cost+=val.PayForFilming(Game.moduleModel.warData.moveStory.characterProperty[i].type)}}}if(cost<=0){Game.system.toastText(TEXT.AllTempTip)}else{if(cost<=myHaveDollar){this.moduleMain.conent.startShowWaiting();this.curActorReqIndex=-1;Game.moduleModel.warData.ConfirmSetActor()}else{var isplay=Game.story.triggerPlayStoryByType(Games.StoryTriggerType.SelectStoryMoneyNotEnough,1);if(isplay==false){Game.system.openItemWay(EItemId.dollar,cost)}}}};WarSelectActor.prototype.onWindowShow=function(){this.setData();Game.event.add(GameEventKey.GameEventKey_MakeFilmSelectActor,this.GameEventKey_MakeFilmSelectActor,this)};WarSelectActor.prototype.onWindowHide=function(){clearTimeout(this.showTipTimeOutNum);Game.event.remove(GameEventKey.GameEventKey_MakeFilmSelectActor,this.GameEventKey_MakeFilmSelectActor,this)};WarSelectActor.prototype.GameEventKey_MakeFilmSelectActor=function(){this.m_reqList.numItems=this.curData.characterProperty.length;this.setSelectTip()};WarSelectActor.prototype.setData=function(){var _this=this;this.moduleMain=this.moduleWindow.mainWindow;this.temActor=Game.moduleModel.warData.temActor;this.curData=Game.moduleModel.warData.moveStory;this.m_okBtnContorl.setSelectedIndex(0);this.m_reqList.numItems=this.curData.characterProperty.length;if(this.curActorReqIndex!==-1){this.onShowYRList(this.curActorReqIndex)}this.showTipTimeOutNum=setTimeout(function(){_this.setSelectTip()},500);if(Game.moduleModel.warData.curYRList.count===this.curData.characterProperty.length){this.m_okBtnContorl.setSelectedIndex(1);if(this.m_select.selectedIndex===1){this.m_select.setSelectedIndex(0)}this.m_searchTip.visible=false}else{this.m_okBtnContorl.setSelectedIndex(0)}};WarSelectActor.prototype.setSelectTip=function(){var pos=-1;for(var i=0;i<this.curData.characterProperty.length;i++){if(Game.moduleModel.warData.curYRList.hasKey(i)){if(pos===-1){pos=this.curData.characterProperty.length}}else{pos=i;break}}if(pos===this.curData.characterProperty.length){if(this.m_selectTip.visible){this.m_selectTip.visible=false}}else{if(!this.m_selectTip.visible){this.m_selectTip.visible=true}this.m_selectTip.x=this.m_reqList.getChildAt(pos).localToGlobal().x}};WarSelectActor.prototype.YRReqItem=function(index,obj){var item=obj;var actor;if(Game.moduleModel.warData.curYRList.hasKey(index)){actor=Game.moduleModel.warData.curYRList.getValue(index)}else{actor=null}item.setData(this.curData.characterProperty[index],actor);if(Game.moduleModel.warData.curYRList.count===this.curData.characterProperty.length){this.m_okBtnContorl.setSelectedIndex(1);if(this.m_select.selectedIndex===1){this.m_select.setSelectedIndex(0)}this.m_searchTip.visible=false}else{this.m_okBtnContorl.setSelectedIndex(0)}};WarSelectActor.prototype.reqClickItem=function(obj){Game.sound.playSound(SoundKey.MM19_ArtistShow);this.m_select.setSelectedIndex(1);this.onShowYRList(this.m_reqList.getChildIndex(obj))};WarSelectActor.prototype.onBackSelect=function(index,reqIndex){this.m_reqList.clearSelection();this.m_searchTip.visible=false;this.m_select.setSelectedIndex(0);this.m_zhongTip.text="";if(index>=0){var actor=this.temActor;if(this.actorData.length>index){actor=this.actorData[index]}Game.moduleModel.warData.sendSetActor(reqIndex,actor.id)}else{if(Game.moduleModel.warData.curYRList.count===this.curData.characterProperty.length){this.m_okBtnContorl.setSelectedIndex(1);if(this.m_select.selectedIndex===1){this.m_select.setSelectedIndex(0)}this.m_searchTip.visible=false}else{this.m_okBtnContorl.setSelectedIndex(0)}}this.setSelectTip()};WarSelectActor.prototype.onShowYRList=function(index){this.curActorReqIndex=index;this.m_okBtnContorl.setSelectedIndex(0);var characterConfig=this.curData.characterProperty[index];this.actorData=Game.moduleModel.warData.getListForFilmYR(characterConfig);if(User.infoExt.totalFilm<1){this.actorData.push(Game.moduleModel.warData.temActor2)}var count=this.actorData.length;this.m_zhongTip.setData(characterConfig.getDes);this.m_yrList.numItems=0;this.m_yrList.itemRenderer=Laya.Handler.create(this,this.YRListItem,[index,characterConfig],false);if(count==0){count=1;this.m_emtpyTip2.text=Game.config.msg.getConfig(MsgKey.movie_actor_recruit).notice;this.m_emtpyTip.text=Game.config.msg.getConfig(MsgKey.movie_non_suitable_actor).notice;this.m_searchTip.visible=true}else{this.m_searchTip.visible=false;if(this.isUseTemActor(index)){this.m_emtpyTip2.text=Game.config.msg.getConfig(MsgKey.movie_actor_recruit).notice;this.m_emtpyTip.text=Game.config.msg.getConfig(MsgKey.movie_non_enough_actor).notice;this.m_searchTip.visible=true;count++}}this.m_yrList.numItems=count};WarSelectActor.prototype.isUseTemActor=function(index){var result=false;if(Game.moduleModel.warData.getRealYRList.count>0){var keyList=Game.moduleModel.warData.getRealYRList.getKeys();var haveInde=0;for(var i=0;i<keyList.length;i++){for(var index_1=0;index_1<this.actorData.length;index_1++){if(Game.moduleModel.warData.getRealYRList.getValue(keyList[i]).id===this.actorData[index_1].id){haveInde++}}}if(haveInde==this.actorData.length){result=true;var cur=Game.moduleModel.warData.curYRList.getValue(index);if(cur&&cur.id>0&&cur.id!==9999){for(var index_2=0;index_2<this.actorData.length;index_2++){if(cur.id==this.actorData[index_2].id){result=false}}}}}return result};WarSelectActor.prototype.YRListItem=function(reqIndex,characterConfig,index,obj){var item=obj;item.m_infBtn.offClick(this,this.onClickInfoBtn);if(this.actorData.length>0){if(index===this.actorData.length){item.setDataEmpty()}else{item.setData(this.actorData[index],characterConfig);item.m_isUse.setSelectedIndex(0);if(Game.moduleModel.warData.curYRList.count>0){var keyList=Game.moduleModel.warData.curYRList.getKeys();for(var i=0;i<keyList.length;i++){if(Game.moduleModel.warData.curYRList.getValue(keyList[i]).id==this.actorData[index].id){item.m_isUse.setSelectedIndex(1);item.m_tip1.text=TEXT.Play;item.m_tip2.text=this.curData.characterProperty[keyList[i]].getType}}}if(this.actorData[index].id===9997){item.m_infBtn.visible=false}else{item.m_infBtn.visible=true;item.m_infBtn.onClick(this,this.onClickInfoBtn,[this.actorData[index]])}}}else{item.setDataEmpty()}item.m_okBtn.onClick(this,this.onBackSelect,[index,reqIndex])};WarSelectActor.prototype.onClickInfoBtn=function(data){Game.menu.open(MenuId.ArtistDetail,data.id,Games.ArtistDetailTabType.Expert)};return WarSelectActor}(WarMovie.WarSelectActorStruct));WarMovie.WarSelectActor=WarSelectActor})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarSelectActorItemStruct=(function(_super){__extends(WarSelectActorItemStruct,_super);function WarSelectActorItemStruct(){return _super.call(this)||this}WarSelectActorItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarSelectActorItem"))};WarSelectActorItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_button=this.getController("button");this.m_actorOk=this.getController("actorOk");this.m_chReq1=(this.getChild("chReq1"));this.m_chReq2=(this.getChild("chReq2"));this.m_sex=(this.getChild("sex"));this.m_nation=(this.getChild("nation"));this.m_icon=(this.getChild("icon"));this.m_actorName=(this.getChild("actorName"));this.m_chName=(this.getChild("chName"));this.m_property=(this.getChild("property"))};WarSelectActorItemStruct.URL="ui://y6ozucp1yytj5o";WarSelectActorItemStruct.DependPackages=["WarMovie","Common"];return WarSelectActorItemStruct}(fairygui.GButton));WarMovie.WarSelectActorItemStruct=WarSelectActorItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarSelectActorItem=(function(_super){__extends(WarSelectActorItem,_super);function WarSelectActorItem(){return _super!==null&&_super.apply(this,arguments)||this}WarSelectActorItem.prototype.setData=function(data,actor){this.m_property.m_title.text=data.getType;this.m_property.m_icon.icon=Games.WarLoadPic.getActorTypeIcon(data.type);Games.WarLoadPic.setIcon(this.m_sex,data.sex);Games.WarLoadPic.setIcon(this.m_nation,data.country);if(actor!==null){this.m_actorOk.setSelectedIndex(1);this.m_actorName.text=actor.name;this.m_icon.icon=Game.config.avatar.getConfig(actor.config.avatar).bodyIconUrl}else{this.m_actorOk.setSelectedIndex(0);this.m_chName.text=data.getName;if(data.show_type>0){this.m_chReq1.visible=true;Games.WarLoadPic.setIcon(this.m_chReq1,data.show_type)}else{this.m_chReq1.visible=false}if(data.getReqageType>0){this.m_chReq2.visible=true;Games.WarLoadPic.setIcon(this.m_chReq2,data.getReqageType)}else{this.m_chReq2.visible=false}}};return WarSelectActorItem}(WarMovie.WarSelectActorItemStruct));WarMovie.WarSelectActorItem=WarSelectActorItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarSelectFilmTypeStruct=(function(_super){__extends(WarSelectFilmTypeStruct,_super);function WarSelectFilmTypeStruct(){return _super.call(this)||this}WarSelectFilmTypeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarSelectFilmType"))};WarSelectFilmTypeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_nameTip=(this.getChild("nameTip"));this.m_title=(this.getChild("title"));this.m_typeList=(this.getChild("typeList"));this.m_curMarket=(this.getChild("curMarket"));this.m_filminfBtn=(this.getChild("filminfBtn"));this.m_men=(this.getChild("men"));this.m_women=(this.getChild("women"));this.m_child=(this.getChild("child"));this.m_okBtn=(this.getChild("okBtn"));this.m_closeBtn=(this.getChild("closeBtn"))};WarSelectFilmTypeStruct.URL="ui://y6ozucp1qbxl67";WarSelectFilmTypeStruct.DependPackages=["WarMovie","Common","System"];return WarSelectFilmTypeStruct}(fairygui.GComponent));WarMovie.WarSelectFilmTypeStruct=WarSelectFilmTypeStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarSelectFilmType=(function(_super){__extends(WarSelectFilmType,_super);function WarSelectFilmType(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.selectType=-1;return _this}WarSelectFilmType.prototype.constructFromXML=function(xml){var _this=this;_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.FilmTypeSelectTitle;this.m_nameTip.text=TEXT.FilmTypeSelectTitle;this.m_curMarket.text=TEXT.CurMarketTip;this.m_men.m_sex.text=TEXT.sexMan;this.m_women.m_sex.text=TEXT.sexWomen;this.m_child.m_sex.text=TEXT.sexChild;this.allType=Game.config.movieShootType.getConfigList();this.m_typeList.itemRenderer=Laya.Handler.create(this,this.initTypeListItem,null,false);this.m_typeList.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem);this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_closeBtn.onClick(this,this.onClickClose);this.m_filminfBtn.onClick(this,function(){_this.moduleMain.openSubwindowByIndex(Games.WarSubwindowType.FilmInfo,true)})};WarSelectFilmType.prototype.onClickOkBtn=function(){if(this.selectType>-1){this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.setSelectType(this.selectType)}else{Game.system.toastText(TEXT.SelectTypeNone)}};WarSelectFilmType.prototype.onClickClose=function(){this.moduleWindow.closeSelf();this.moduleMain.menuClose()};WarSelectFilmType.prototype.onWindowShow=function(){this.setData()};WarSelectFilmType.prototype.onWindowHide=function(){};WarSelectFilmType.prototype.setData=function(){if(Game.moduleModel.building.getRoomLevel(Games.RoomType.Market)>0){var man=Game.moduleModel.warData.moveData.expected[0];var woman=Game.moduleModel.warData.moveData.expected[1];var child=Game.moduleModel.warData.moveData.expected[2];this.m_curMarket.visible=true;this.m_men.m_title.text=man+"%";this.m_women.m_title.text=woman+"%";this.m_child.m_title.text=child+"%"}else{this.m_curMarket.visible=false;this.m_men.visible=false;this.m_women.visible=false;this.m_child.visible=false}this.moduleMain=this.moduleWindow.mainWindow;this.selectType=-1;this.allType=Game.config.movieShootType.getConfigList();this.m_typeList.clearSelection();this.m_typeList.numItems=this.allType.length;this.m_typeList.scrollToView(0)};WarSelectFilmType.prototype.initTypeListItem=function(index,obj){var item=obj;item.setData(this.allType[index],index)};WarSelectFilmType.prototype.onClickItem=function(obj){var index=this.m_typeList.getChildIndex(obj);this.selectType=this.allType[index].id};return WarSelectFilmType}(WarMovie.WarSelectFilmTypeStruct));WarMovie.WarSelectFilmType=WarSelectFilmType})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarShangYingProgressStruct=(function(_super){__extends(WarShangYingProgressStruct,_super);function WarShangYingProgressStruct(){return _super.call(this)||this}WarShangYingProgressStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarShangYingProgress"))};WarShangYingProgressStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_bar_v=(this.getChild("bar_v"))};WarShangYingProgressStruct.URL="ui://y6ozucp1qbxl78";WarShangYingProgressStruct.DependPackages=["WarMovie"];return WarShangYingProgressStruct}(fairygui.GProgressBar));WarMovie.WarShangYingProgressStruct=WarShangYingProgressStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarShangYingProgress=(function(_super){__extends(WarShangYingProgress,_super);function WarShangYingProgress(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isHide=false;return _this}WarShangYingProgress.prototype.onWindowShow=function(){this.isHide=false};WarShangYingProgress.prototype.onWindowHide=function(){this.isHide=true};Object.defineProperty(WarShangYingProgress.prototype,"myvalue",{get:function(){return this.value},set:function(v){this.value=v},enumerable:true,configurable:true});return WarShangYingProgress}(WarMovie.WarShangYingProgressStruct));WarMovie.WarShangYingProgress=WarShangYingProgress})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarSQViewItemStruct=(function(_super){__extends(WarSQViewItemStruct,_super);function WarSQViewItemStruct(){return _super.call(this)||this}WarSQViewItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarSQViewItem"))};WarSQViewItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"));this.m_progress=(this.getChild("progress"));this.m_average=(this.getChild("average"))};WarSQViewItemStruct.URL="ui://y6ozucp1qbxl6r";WarSQViewItemStruct.DependPackages=["WarMovie","System","Common"];return WarSQViewItemStruct}(fairygui.GLabel));WarMovie.WarSQViewItemStruct=WarSQViewItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarSQViewItem=(function(_super){__extends(WarSQViewItem,_super);function WarSQViewItem(){return _super!==null&&_super.apply(this,arguments)||this}WarSQViewItem.prototype.setData=function(index,maxVal){var getPropertyList=Game.config.property.getPropertyList();var moveData=Game.moduleModel.warData.moveData;this.m_progress.value=0;this.m_progress.max=maxVal;var curVal=moveData.attribute[index];if(curVal>maxVal){this.m_progress.max=curVal}laya.utils.Tween.to(this.m_progress,{value:curVal},2000,Laya.Ease.linearIn,null);this.m_average.max=maxVal;this.m_average.value=moveData.avrAttribute[index];this.m_average.m_tip.text=format(TEXT.FilmAverage,moveData.avrAttribute[index])};return WarSQViewItem}(WarMovie.WarSQViewItemStruct));WarMovie.WarSQViewItem=WarSQViewItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarTapeStruct=(function(_super){__extends(WarTapeStruct,_super);function WarTapeStruct(){return _super.call(this)||this}WarTapeStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarTape"))};WarTapeStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_t1=this.getTransition("t1")};WarTapeStruct.URL="ui://y6ozucp1qbxl77";WarTapeStruct.DependPackages=["WarMovie","Common"];return WarTapeStruct}(fairygui.GComponent));WarMovie.WarTapeStruct=WarTapeStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarTape=(function(_super){__extends(WarTape,_super);function WarTape(){return _super!==null&&_super.apply(this,arguments)||this}return WarTape}(WarMovie.WarTapeStruct));WarMovie.WarTape=WarTape})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarTargetFailedStruct=(function(_super){__extends(WarTargetFailedStruct,_super);function WarTargetFailedStruct(){return _super.call(this)||this}WarTargetFailedStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarTargetFailed"))};WarTargetFailedStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_tip=(this.getChild("tip"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_target1=(this.getChild("target1"));this.m_target2=(this.getChild("target2"));this.m_okBtn=(this.getChild("okBtn"))};WarTargetFailedStruct.URL="ui://y6ozucp1qbxl9t";WarTargetFailedStruct.DependPackages=["WarMovie","Fx"];return WarTargetFailedStruct}(fairygui.GComponent));WarMovie.WarTargetFailedStruct=WarTargetFailedStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarTargetFailed=(function(_super){__extends(WarTargetFailed,_super);function WarTargetFailed(){return _super!==null&&_super.apply(this,arguments)||this}WarTargetFailed.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.onClick(this,this.onClickClose)};WarTargetFailed.prototype.onClickClose=function(){if(this.callBack!==null){this.callBack()}this.visible=false};WarTargetFailed.prototype.setData=function(propertyReward,haveNum,okList,callBack){Games.WarLoadPic.setIcon(this.m_target1.m_icon,propertyReward[0]);this.m_target1.m_title.text=haveNum[0]+"/"+okList[0];if(haveNum[0]>=okList[0]){this.m_target1.m_c1.setSelectedIndex(0)}else{this.m_target1.m_c1.setSelectedIndex(1)}Games.WarLoadPic.setIcon(this.m_target2.m_icon,propertyReward[1]);this.m_target2.m_title.text=haveNum[1]+"/"+okList[1];if(haveNum[1]>=okList[1]){this.m_target2.m_c1.setSelectedIndex(0)}else{this.m_target2.m_c1.setSelectedIndex(1)}this.callBack=callBack;this.m_tip.text=Game.config.msg.getConfig(MsgKey.movie_target_fail).notice;this.visible=true};return WarTargetFailed}(WarMovie.WarTargetFailedStruct));WarMovie.WarTargetFailed=WarTargetFailed})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarTargetFailItemStruct=(function(_super){__extends(WarTargetFailItemStruct,_super);function WarTargetFailItemStruct(){return _super.call(this)||this}WarTargetFailItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarTargetFailItem"))};WarTargetFailItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_c1=this.getController("c1");this.m_icon=(this.getChild("icon"));this.m_title=(this.getChild("title"))};WarTargetFailItemStruct.URL="ui://y6ozucp1qbxl9u";WarTargetFailItemStruct.DependPackages=["WarMovie","Common"];return WarTargetFailItemStruct}(fairygui.GLabel));WarMovie.WarTargetFailItemStruct=WarTargetFailItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarTargetFailItem=(function(_super){__extends(WarTargetFailItem,_super);function WarTargetFailItem(){return _super!==null&&_super.apply(this,arguments)||this}return WarTargetFailItem}(WarMovie.WarTargetFailItemStruct));WarMovie.WarTargetFailItem=WarTargetFailItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarTargetSuccesStruct=(function(_super){__extends(WarTargetSuccesStruct,_super);function WarTargetSuccesStruct(){return _super.call(this)||this}WarTargetSuccesStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarTargetSucces"))};WarTargetSuccesStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_iconList=(this.getChild("iconList"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_okBtn=(this.getChild("okBtn"))};WarTargetSuccesStruct.URL="ui://y6ozucp1qbxl9s";WarTargetSuccesStruct.DependPackages=["WarMovie","Fx","Common"];return WarTargetSuccesStruct}(fairygui.GComponent));WarMovie.WarTargetSuccesStruct=WarTargetSuccesStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarTargetSucces=(function(_super){__extends(WarTargetSucces,_super);function WarTargetSucces(){return _super!==null&&_super.apply(this,arguments)||this}WarTargetSucces.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_iconList.itemRenderer=Laya.Handler.create(this,this.initItem,null,false);this.m_okBtn.onClick(this,this.onClickClose)};WarTargetSucces.prototype.onClickClose=function(){if(this.starUpdate&&this.starUpdate!==null){this.starUpdate()}this.visible=false};WarTargetSucces.prototype.setData=function(data,starUpdate,title){if(title===void 0){title=null}this.curDTItemData=data;this.m_iconList.numItems=this.curDTItemData.length;this.starUpdate=starUpdate;this.visible=true};WarTargetSucces.prototype.initItem=function(index,obj){var item=obj;item.m_icon1.icon=Games.WarLoadPic.getItemIcon(this.curDTItemData[index].itemId);item.m_val1.text=this.curDTItemData[index].itemNum.toFixed(0);var config=Game.config.item.getConfig(this.curDTItemData[index].itemId);item.m_starList.numItems=config.itemStarNum};return WarTargetSucces}(WarMovie.WarTargetSuccesStruct));WarMovie.WarTargetSucces=WarTargetSucces})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarTipStruct=(function(_super){__extends(WarTipStruct,_super);function WarTipStruct(){return _super.call(this)||this}WarTipStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarTip"))};WarTipStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_tip=(this.getChild("tip"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_des=(this.getChild("des"));this.m_t0=this.getTransition("t0")};WarTipStruct.URL="ui://y6ozucp1qbxl9e";WarTipStruct.DependPackages=["WarMovie"];return WarTipStruct}(fairygui.GComponent));WarMovie.WarTipStruct=WarTipStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarTip=(function(_super){__extends(WarTip,_super);function WarTip(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.haveClose=false;return _this}WarTip.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_closeBtn.onClick(this,this.clickCloseBtn)};WarTip.prototype.clickCloseBtn=function(){if(!this.haveClose){this.haveClose=true;this.m_t0.playReverse(Handler.create(this,this.close))}};WarTip.prototype.close=function(){if(this.okFunc&&this.okFunc!==null){this.okFunc()}this.visible=false};WarTip.prototype.setData=function(content,okFunc){this.haveClose=false;this.okFunc=okFunc;this.m_des.text=content;this.visible=true;this.m_t0.play(null,1)};return WarTip}(WarMovie.WarTipStruct));WarMovie.WarTip=WarTip})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarTipKuangStruct=(function(_super){__extends(WarTipKuangStruct,_super);function WarTipKuangStruct(){return _super.call(this)||this}WarTipKuangStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarTipKuang"))};WarTipKuangStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"))};WarTipKuangStruct.URL="ui://y6ozucp1qbxl9f";WarTipKuangStruct.DependPackages=["WarMovie","Common"];return WarTipKuangStruct}(fairygui.GLabel));WarMovie.WarTipKuangStruct=WarTipKuangStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarTipKuang=(function(_super){__extends(WarTipKuang,_super);function WarTipKuang(){return _super!==null&&_super.apply(this,arguments)||this}return WarTipKuang}(WarMovie.WarTipKuangStruct));WarMovie.WarTipKuang=WarTipKuang})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarXKHuifuStruct=(function(_super){__extends(WarXKHuifuStruct,_super);function WarXKHuifuStruct(){return _super.call(this)||this}WarXKHuifuStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarXKHuifu"))};WarXKHuifuStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_need=(this.getChild("need"));this.m_icon=(this.getChild("icon"));this.m_num=(this.getChild("num"));this.m_topTIp=(this.getChild("topTIp"));this.m_icon2=(this.getChild("icon2"));this.m_time=(this.getChild("time"));this.m_bottomTip=(this.getChild("bottomTip"));this.m_closeBtn=(this.getChild("closeBtn"))};WarXKHuifuStruct.URL="ui://y6ozucp1qbxl8k";WarXKHuifuStruct.DependPackages=["WarMovie","Common","System","PlayerInfo","MainUI"];return WarXKHuifuStruct}(fairygui.GComponent));WarMovie.WarXKHuifuStruct=WarXKHuifuStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarXKHuifu=(function(_super){__extends(WarXKHuifu,_super);function WarXKHuifu(){return _super!==null&&_super.apply(this,arguments)||this}WarXKHuifu.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_closeBtn.onClick(this,this.onClickOkBtn)};WarXKHuifu.prototype.onClickOkBtn=function(){this.moduleWindow.closeSelf();this.moduleMain.menuClose()};WarXKHuifu.prototype.onWindowShow=function(){this.setData();Game.moduleModel.warData.sUpdateLicenceForTime.add(this.onUpdateTime,this)};WarXKHuifu.prototype.onWindowHide=function(){Game.moduleModel.warData.sUpdateLicenceForTime.remove(this.onUpdateTime,this)};WarXKHuifu.prototype.setData=function(){this.moduleMain=this.moduleWindow.mainWindow;var itemId=Game.config.global.getConfig(GlobalKey.Movie_Licence_ID).value;this.m_icon.icon=Games.WarLoadPic.getItemIcon(itemId);var itemConf=Game.config.item.getConfig(itemId);this.m_bottomTip.text=format(Game.config.msg.getConfig(MsgKey.movie_licence_get_tips).notice,Game.config.global.getConfig(GlobalKey.Licence_Restore_Max).value,Game.moduleModel.warData.licenceData.dailyCount);this.m_title.text=format(Game.config.msg.getConfig(MsgKey.build_non_material).notice,itemConf.name);this.onUpdateTime()};WarXKHuifu.prototype.onUpdateTime=function(){if(Game.moduleModel.warData.preLicenceAddWithCD<1){if(Game.moduleModel.warData.licenceSubTime>0){this.m_time.text=TimeHelper.TimeFormat3(Game.moduleModel.warData.licenceSubTime)}else{this.m_time.text="0"}}else{this.onClickOkBtn()}};return WarXKHuifu}(WarMovie.WarXKHuifuStruct));WarMovie.WarXKHuifu=WarXKHuifu})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarXukezhengOverStruct=(function(_super){__extends(WarXukezhengOverStruct,_super);function WarXukezhengOverStruct(){return _super.call(this)||this}WarXukezhengOverStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarXukezhengOver"))};WarXukezhengOverStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"));this.m_getTip=(this.getChild("getTip"));this.m_title=(this.getChild("title"));this.m_okBtn=(this.getChild("okBtn"))};WarXukezhengOverStruct.URL="ui://y6ozucp1qbxl97";WarXukezhengOverStruct.DependPackages=["WarMovie","Common","System"];return WarXukezhengOverStruct}(fairygui.GComponent));WarMovie.WarXukezhengOverStruct=WarXukezhengOverStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarXukezhengOver=(function(_super){__extends(WarXukezhengOver,_super);function WarXukezhengOver(){return _super!==null&&_super.apply(this,arguments)||this}WarXukezhengOver.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.SysTipTitle;this.m_okBtn.onClick(this,this.onClickOkBtn)};WarXukezhengOver.prototype.onClickOkBtn=function(){this.moduleWindow.menuBack()};WarXukezhengOver.prototype.onWindowShow=function(){this.setData()};WarXukezhengOver.prototype.onWindowHide=function(){};WarXukezhengOver.prototype.setData=function(){this.moduleMain=this.moduleWindow.mainWindow;this.m_icon.icon=Games.WarLoadPic.getItemIcon(4);this.m_getTip.text=format(Game.config.msg.getConfig(MsgKey.movie_licence_finish_tips).notice,Game.config.global.getConfig(GlobalKey.Licence_Restore_Time).value)};return WarXukezhengOver}(WarMovie.WarXukezhengOverStruct));WarMovie.WarXukezhengOver=WarXukezhengOver})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarYRCostItemStruct=(function(_super){__extends(WarYRCostItemStruct,_super);function WarYRCostItemStruct(){return _super.call(this)||this}WarYRCostItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarYRCostItem"))};WarYRCostItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_juese=(this.getChild("juese"));this.m_name=(this.getChild("name"));this.m_costText=(this.getChild("costText"));this.m_costIcon=(this.getChild("costIcon"));this.m_icon=(this.getChild("icon"));this.m_star=(this.getChild("star"))};WarYRCostItemStruct.URL="ui://y6ozucp1r0zd3g";WarYRCostItemStruct.DependPackages=["WarMovie","Common"];return WarYRCostItemStruct}(fairygui.GComponent));WarMovie.WarYRCostItemStruct=WarYRCostItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarYRCostItem=(function(_super){__extends(WarYRCostItem,_super);function WarYRCostItem(){return _super!==null&&_super.apply(this,arguments)||this}WarYRCostItem.prototype.setData=function(data,conf){var cost="0";if(data.id!==9997){cost=formatNumberUnit(data.PayForFilming(conf.type),1)}this.m_costText.text=cost;this.m_costIcon.icon=Game.config.avatar.getConfig(Game.config.item.getConfig(EItemId.dollar).icon).iconUrl;this.m_juese.text=conf.getType;this.m_star.m_starList.numItems=data.star;this.m_icon.setIcon(Game.config.avatar.getConfig(data.config.avatar).bodyIconUrl);this.m_name.text=data.name;Game.system.playSkillEffect(data.id,Games.SkillTriggerType.actor_paycheck)};return WarYRCostItem}(WarMovie.WarYRCostItemStruct));WarMovie.WarYRCostItem=WarYRCostItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarYRFilmItemStruct=(function(_super){__extends(WarYRFilmItemStruct,_super);function WarYRFilmItemStruct(){return _super.call(this)||this}WarYRFilmItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarYRFilmItem"))};WarYRFilmItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_tipBg=(this.getChild("tipBg"));this.m_attList=(this.getChild("attList"));this.m_tip=(this.getChild("tip"));this.m_icon=(this.getChild("icon"));this.m_star=(this.getChild("star"))};WarYRFilmItemStruct.URL="ui://y6ozucp1r0zd3u";WarYRFilmItemStruct.DependPackages=["WarMovie"];return WarYRFilmItemStruct}(fairygui.GButton));WarMovie.WarYRFilmItemStruct=WarYRFilmItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarYRFilmItem=(function(_super){__extends(WarYRFilmItem,_super);function WarYRFilmItem(){return _super!==null&&_super.apply(this,arguments)||this}WarYRFilmItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_attList.itemRenderer=Laya.Handler.create(this,this.initItem,null,false)};WarYRFilmItem.prototype.setData=function(data,index,aggreementList,over){this.attributeUpTip=new Array();this.m_tip.text="";this.m_tipBg.visible=false;this.m_attList.numItems=0;this.m_icon.setIcon(Game.config.avatar.getConfig(data.config.avatar).bodyIconUrl);this.m_star.m_starList.numItems=data.star;var str=Game.config.msg.getConfig(MsgKey.movie_none_coordination).notice;if(aggreementList){if(aggreementList.length>0){var haveStory=false;var haveCharter=false;for(var i=0;i<aggreementList.length;i++){var canAdd=true;for(var k=0;k<this.attributeUpTip.length;k++){if(this.attributeUpTip[k].icon===aggreementList[i].attribute){canAdd=false}}if(canAdd){if(aggreementList[i].type===1||aggreementList[i].type===2){haveStory=true;var aut=new AttributeUpTip();aut.icon=aggreementList[i].attribute;aut.str=Game.config.msg.getConfig(MsgKey.movie_story_coordination_tips).notice;this.attributeUpTip.push(aut)}if(aggreementList[i].type===3){haveCharter=true;var aut=new AttributeUpTip();aut.icon=aggreementList[i].attribute;aut.str=Game.config.msg.getConfig(MsgKey.movie_character_coordination_tips).notice;this.attributeUpTip.push(aut)}}}if(haveStory&&haveCharter){str=Game.config.msg.getConfig(MsgKey.movie_story_character_coordination).notice}else{if(haveStory){str=Game.config.msg.getConfig(MsgKey.movie_story_coordination).notice}else{str=Game.config.msg.getConfig(MsgKey.movie_character_coordination).notice}}this.m_attList.numItems=this.attributeUpTip.length}if(over){this.m_tip.text=str;if(str.length>1){this.m_tipBg.visible=true}}}else{if(over){this.m_tip.text=str;if(str.length>1){this.m_tipBg.visible=true}}}};WarYRFilmItem.prototype.initItem=function(index,obj){var item=obj;if(this.attributeUpTip&&this.attributeUpTip.length>index){item.setData(this.attributeUpTip[index])}};return WarYRFilmItem}(WarMovie.WarYRFilmItemStruct));WarMovie.WarYRFilmItem=WarYRFilmItem;var AttributeUpTip=(function(){function AttributeUpTip(){}return AttributeUpTip}());WarMovie.AttributeUpTip=AttributeUpTip})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarYRForFilmStruct=(function(_super){__extends(WarYRForFilmStruct,_super);function WarYRForFilmStruct(){return _super.call(this)||this}WarYRForFilmStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarYRForFilm"))};WarYRForFilmStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_resultList=(this.getChild("resultList"));this.m_type=(this.getChild("type"));this.m_bubble4=(this.getChild("bubble4"));this.m_bubble6=(this.getChild("bubble6"));this.m_bubble0=(this.getChild("bubble0"));this.m_bubble1=(this.getChild("bubble1"));this.m_bubble3=(this.getChild("bubble3"));this.m_bubble2=(this.getChild("bubble2"));this.m_bubble7=(this.getChild("bubble7"));this.m_bubble5=(this.getChild("bubble5"));this.m_icon=(this.getChild("icon"));this.m_skipBtn=(this.getChild("skipBtn"));this.m_okBtn=(this.getChild("okBtn"));this.m_closeBtn=(this.getChild("closeBtn"));this.m_t0=this.getTransition("t0")};WarYRForFilmStruct.URL="ui://y6ozucp1r0zd3s";WarYRForFilmStruct.DependPackages=["WarMovie","Common","System"];return WarYRForFilmStruct}(fairygui.GComponent));WarMovie.WarYRForFilmStruct=WarYRForFilmStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var Agreement=(function(){function Agreement(){}return Agreement}());WarMovie.Agreement=Agreement;var WarYRForFilm=(function(_super){__extends(WarYRForFilm,_super);function WarYRForFilm(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.currIndexOf=0;_this.agreDic=new Dictionary();_this.curBulleIndexOf=0;_this.agreementList=new Array();_this.bubbleList=new Array();_this.bubbleX=new Array();_this.bubbleY=new Array();_this.speed=1000;_this.setOutTimeNum=-1;_this.isSkipAni=false;_this.flyIndexOf=0;_this.overDic=new Dictionary();return _this}WarYRForFilm.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.ActorForFilmTitle;this.bubbleList=[this.m_bubble0,this.m_bubble1,this.m_bubble2,this.m_bubble3,this.m_bubble4,this.m_bubble5,this.m_bubble6,this.m_bubble7];this.bubbleX=[this.m_bubble0.x,this.m_bubble1.x,this.m_bubble2.x,this.m_bubble3.x,this.m_bubble4.x,this.m_bubble5.x,this.m_bubble6.x,this.m_bubble7.x];this.bubbleY=[this.m_bubble0.y,this.m_bubble1.y,this.m_bubble2.y,this.m_bubble3.y,this.m_bubble4.y,this.m_bubble5.y,this.m_bubble6.y,this.m_bubble7.y];this.m_resultList.itemRenderer=Laya.Handler.create(this,this.yrForFilmItem,null,false);this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_skipBtn.onClick(this,this.onskipAniShowResult);this.m_closeBtn.onClick(this,this.onClickCloseBtn);this.m_closeBtn.visible=false};WarYRForFilm.prototype.onClickCloseBtn=function(){this.moduleWindow.menuBack()};WarYRForFilm.prototype.onClickOkBtn=function(){this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.sendUpdateMovieState()};WarYRForFilm.prototype.onClickClose=function(){this.moduleWindow.closeSelf()};WarYRForFilm.prototype.onWindowShow=function(){this.setData()};WarYRForFilm.prototype.onWindowHide=function(){this.hideBubble()};WarYRForFilm.prototype.setData=function(){this.isSkipAni=false;this.overDic.clear();this.m_okBtn.visible=false;this.moduleMain=this.moduleWindow.mainWindow;this.currIndexOf=0;this.m_resultList.numItems=0;this.agreDic.clear();var list=Game.moduleModel.warData.curYRList;var keyList=list.getKeys();var counts=0;this.charact=new Dictionary();this.actorList=new Dictionary();for(var i=0;i<keyList.length;i++){var val=list.getValue(keyList[i]);if(val.id!==9999){var charactItem=Game.moduleModel.warData.moveStory.characterProperty[i];this.charact.add(counts,charactItem);this.actorList.add(counts,val);counts++}}this.showYRNext()};WarYRForFilm.prototype.showYRNext=function(){if(this.currIndexOf<=this.actorList.count){if(this.currIndexOf<this.actorList.count){this.hideBubble();Game.sound.playSound(SoundKey.MM21_ArtistAccord);this.m_resultList.numItems=this.currIndexOf;this.m_type.text=this.charact.getValue(this.currIndexOf).getType;this.m_icon.setIcon(Games.WarLoadPic.getActorIcon(this.actorList.getValue(this.currIndexOf).config.avatar));this.curBulleIndexOf=0;if(this.isSkipAni){this.m_t0.stop();this.showBubbleList()}else{this.m_t0.play(laya.utils.Handler.create(this,this.showBubbleList),1)}}else{this.m_resultList.numItems=this.currIndexOf;this.m_okBtn.visible=true}}};WarYRForFilm.prototype.hideBubble=function(){clearTimeout(this.setOutTimeNum);for(var i=0;i<this.bubbleList.length;i++){this.bubbleList[i].visible=false}if(this.tweenTarget&&this.tweenTarget!=null){laya.utils.Tween.clearAll(this.tweenTarget);this.tweenTarget=null}};WarYRForFilm.prototype.onskipAniShowResult=function(){if(!this.isSkipAni){this.isSkipAni=true}};WarYRForFilm.prototype.showBubbleList=function(){var _this=this;if(this.curBulleIndexOf===0){this.agreementList=this.checkBubble()}if(this.curBulleIndexOf<this.agreementList.length){var cur=this.bubbleList[this.curBulleIndexOf];cur.setXY(160,250);cur.setData(this.agreementList[this.curBulleIndexOf]);cur.visible=true;if(this.isSkipAni){this.tweenTarget=null;cur.setXY(this.bubbleX[this.curBulleIndexOf],this.bubbleY[this.curBulleIndexOf]);this.curBulleIndexOf++;this.showBubbleList()}else{this.tweenTarget=cur;laya.utils.Tween.to(cur,{x:this.bubbleX[this.curBulleIndexOf],y:this.bubbleY[this.curBulleIndexOf]},(this.bubbleX[this.curBulleIndexOf]-160)/this.speed*1000,Laya.Ease.linearIn,Handler.create(this,function(){_this.tweenTarget=null;_this.showBubbleList()}));this.curBulleIndexOf++}}else{this.currIndexOf++;this.overDic.add(this.currIndexOf-1,false);this.m_resultList.numItems=this.currIndexOf;this.flyIndexOf=0;if(this.isSkipAni){this.flyActorList()}else{clearTimeout(this.setOutTimeNum);this.setOutTimeNum=setTimeout(function(){_this.flyActorList()},700)}}};WarYRForFilm.prototype.flyActorList=function(){var _this=this;if(this.flyIndexOf<this.agreementList.length){var cur_1=this.bubbleList[this.flyIndexOf];var target=this.m_resultList.getChildAt(this.currIndexOf-1);if(this.isSkipAni){this.tweenTarget=null;var aggList=this.agreDic.getValue(this.currIndexOf-1);if(!aggList||aggList===null){aggList=new Array()}aggList.push(this.agreementList[this.flyIndexOf]);this.agreDic.add(this.currIndexOf-1,aggList);this.flyIndexOf++;this.m_resultList.numItems=this.currIndexOf;cur_1.visible=false;this.flyActorList()}else{var dur=(target.localToGlobal().y-cur_1.y)/(this.speed*1.3)*1000;this.tweenTarget=cur_1;laya.utils.Tween.to(cur_1,{y:target.localToGlobal().y},dur,Laya.Ease.linearIn,Handler.create(this,function(){_this.tweenTarget=null;var aggList=_this.agreDic.getValue(_this.currIndexOf-1);if(!aggList||aggList===null){aggList=new Array()}aggList.push(_this.agreementList[_this.flyIndexOf]);_this.agreDic.add(_this.currIndexOf-1,aggList);_this.flyIndexOf++;_this.m_resultList.numItems=_this.currIndexOf;cur_1.visible=false;_this.flyActorList()}))}}else{this.overDic.add(this.currIndexOf-1,true);this.showYRNext()}};WarYRForFilm.prototype.yrForFilmItem=function(index,obj){if(index===this.currIndexOf-1){var item=obj;item.setData(this.actorList.getValue(index),index,this.agreDic.getValue(index),this.overDic.getValue(index))}};WarYRForFilm.prototype.checkBubble=function(){var agreementList=new Array();var actor=this.actorList.getValue(this.currIndexOf);var actorType=actor.config.story_type;var actorFeature=actor.config.story_feature;var actorCharacter=actor.config.character;var story=Game.moduleModel.warData.moveStory;var reqCaracters=this.charact.getValue(this.currIndexOf);var cTags=reqCaracters.tags;for(var i=0;i<actorType.length;i++){if(actorType[i].story===story.type){var canAdd=true;for(var k=0;k<agreementList.length;k++){if(agreementList[k].id===actorType[i].story){canAdd=false}}if(canAdd){var aggree=new Agreement();aggree.type=1;aggree.id=actorType[i].story;aggree.lv=actorType[i].lv;aggree.strTip=Game.config.property.getConfig(actorType[i].story).name;aggree.attribute=actorType[i].property;agreementList.push(aggree)}}}for(var i=0;i<actorFeature.length;i++){for(var j=0;j<story.tags.length;j++){if(story.tags[j]===actorFeature[i].feature){var canAdd=true;for(var k=0;k<agreementList.length;k++){if(agreementList[k].id===actorFeature[i].feature){canAdd=false}}if(canAdd){var aggree=new Agreement();aggree.type=2;aggree.id=actorFeature[i].feature;aggree.lv=actorFeature[i].lv;aggree.strTip=Game.config.property.getConfig(actorFeature[i].feature).name;aggree.attribute=actorFeature[i].property;agreementList.push(aggree)}}}}for(var i=0;i<actorCharacter.length;i++){for(var j=0;j<cTags.length;j++){if(cTags[j]===actorCharacter[i].character){var canAdd=true;for(var k=0;k<agreementList.length;k++){if(agreementList[k].id===actorCharacter[i].character){canAdd=false}}if(canAdd){var aggree=new Agreement();aggree.type=3;aggree.id=actorCharacter[i].character;aggree.lv=actorCharacter[i].lv;aggree.strTip=Game.config.property.getConfig(actorCharacter[i].character).name;aggree.attribute=actorCharacter[i].property;agreementList.push(aggree)}}}}return agreementList};return WarYRForFilm}(WarMovie.WarYRForFilmStruct));WarMovie.WarYRForFilm=WarYRForFilm})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarYRNoticeItemStruct=(function(_super){__extends(WarYRNoticeItemStruct,_super);function WarYRNoticeItemStruct(){return _super.call(this)||this}WarYRNoticeItemStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarYRNoticeItem"))};WarYRNoticeItemStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_selected=this.getController("selected");this.m_icon=(this.getChild("icon"));this.m_lv=(this.getChild("lv"));this.m_title=(this.getChild("title"));this.m_yr1=(this.getChild("yr1"));this.m_yr2=(this.getChild("yr2"));this.m_okBtn=(this.getChild("okBtn"))};WarYRNoticeItemStruct.URL="ui://y6ozucp1moqedn";WarYRNoticeItemStruct.DependPackages=["WarMovie","Common"];return WarYRNoticeItemStruct}(fairygui.GComponent));WarMovie.WarYRNoticeItemStruct=WarYRNoticeItemStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarYRNoticeItem=(function(_super){__extends(WarYRNoticeItem,_super);function WarYRNoticeItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.mediaId=0;_this.actorData=new Array();return _this}WarYRNoticeItem.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_okBtn.m_title.text=TEXT.ButtonSelect};WarYRNoticeItem.prototype.setData=function(index,actor,selectNotice){this.actorData=actor;var media=Game.moduleModel.warData.moveData.mediaVisit[index];this.mediaId=media.mediaId;this.mediaConfig=Game.config.movieMediaVisit.getConfig(this.mediaId);this.m_icon.icon=Games.WarLoadPic.getAvatarIcon(this.mediaConfig.pic);this.m_lv.text=format(TEXT.Lv,media.level);this.m_title.text=this.mediaConfig.name;this.m_yr1.setIcon(Games.WarLoadPic.getActorIcon(actor[0].config.avatar));if(actor.length==2){this.m_yr2.setIcon(Games.WarLoadPic.getActorIcon(actor[1].config.avatar));this.m_yr2.visible=true}else{this.m_yr2.visible=false}var curNum=Game.moduleModel.item.getItemNum(this.mediaConfig.cost_id);if(curNum>=this.mediaConfig.cost_num){this.canClick=true;this.m_okBtn.m_colorCtrol.setSelectedIndex(0)}else{this.m_okBtn.m_colorCtrol.setSelectedIndex(1);this.canClick=false}if(media.bAccept){this.m_selected.setSelectedIndex(1)}else{this.m_selected.setSelectedIndex(0)}this.m_okBtn.m_cost.text=formatNumberUnit(this.mediaConfig.cost_num);this.m_okBtn.m_item.icon=Games.WarLoadPic.getItemIcon(this.mediaConfig.cost_id);this.m_okBtn.onClick(this,this.onClickSelectNotice,[selectNotice])};WarYRNoticeItem.prototype.onClickSelectNotice=function(selectNotice){if(this.canClick){selectNotice(this.mediaId,this.actorData)}else{Game.system.openItemWay(this.mediaConfig.cost_id,this.mediaConfig.cost_num)}};return WarYRNoticeItem}(WarMovie.WarYRNoticeItemStruct));WarMovie.WarYRNoticeItem=WarYRNoticeItem})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarYRProficiencyStruct=(function(_super){__extends(WarYRProficiencyStruct,_super);function WarYRProficiencyStruct(){return _super.call(this)||this}WarYRProficiencyStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","WarYRProficiency"))};WarYRProficiencyStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title=(this.getChild("title"));this.m_icon=(this.getChild("icon"));this.m_filmName=(this.getChild("filmName"));this.m_actorList=(this.getChild("actorList"));this.m_filmDes=(this.getChild("filmDes"));this.m_okBtn=(this.getChild("okBtn"))};WarYRProficiencyStruct.URL="ui://y6ozucp1qbxl6f";WarYRProficiencyStruct.DependPackages=["WarMovie","Common","System"];return WarYRProficiencyStruct}(fairygui.GComponent));WarMovie.WarYRProficiencyStruct=WarYRProficiencyStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var WarYRProficiency=(function(_super){__extends(WarYRProficiency,_super);function WarYRProficiency(){return _super!==null&&_super.apply(this,arguments)||this}WarYRProficiency.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_title.text=TEXT.FilmProficiencyTitle;this.m_okBtn.onClick(this,this.onClickOkBtn);this.m_actorList.itemRenderer=Laya.Handler.create(this,this.initYRItem,null,false)};WarYRProficiency.prototype.onClickOkBtn=function(){this.moduleMain.conent.startShowWaiting();Game.moduleModel.warData.sendUpdateMovieState()};WarYRProficiency.prototype.onClickClose=function(){this.moduleWindow.closeSelf()};WarYRProficiency.prototype.onWindowShow=function(){Game.moduleModel.warData.sProficiencyUpdate.add(this.updateList,this);this.setData()};WarYRProficiency.prototype.onWindowHide=function(){Game.moduleModel.warData.sProficiencyUpdate.add(this.updateList,this)};WarYRProficiency.prototype.updateList=function(){this.m_okBtn.visible=true};WarYRProficiency.prototype.setData=function(){this.moduleMain=this.moduleWindow.mainWindow;this.m_okBtn.visible=false;var typetip="";var types=Game.config.movieShootType.getConfigList();var tips=Game.config.msg.getConfig(MsgKey.movie_type_tips).notice;var curType;for(var i=0;i<types.length;i++){if(types[i].id==Game.moduleModel.warData.moveData.type){curType=types[i];break}}this.m_filmName.text=format(Game.config.msg.getConfig(MsgKey.movie_type_addition).notice,curType.getName);this.m_filmDes.setData(curType.getLove);this.m_icon.icon=Game.config.avatar.getConfig(curType.pic).iconUrl;this.m_actorList.numItems=Game.moduleModel.warData.getRealYRList.count};WarYRProficiency.prototype.initYRItem=function(index,obj){var item=obj;item.setData(Game.moduleModel.warData.getRealYRList.getValue(index),index)};return WarYRProficiency}(WarMovie.WarYRProficiencyStruct));WarMovie.WarYRProficiency=WarYRProficiency})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ZhuIconStruct=(function(_super){__extends(ZhuIconStruct,_super);function ZhuIconStruct(){return _super.call(this)||this}ZhuIconStruct.createInstance=function(){return(fairygui.UIPackage.createObject("WarMovie","ZhuIcon"))};ZhuIconStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};ZhuIconStruct.URL="ui://y6ozucp1jkgadz";ZhuIconStruct.DependPackages=["WarMovie","Common"];return ZhuIconStruct}(fairygui.GLabel));WarMovie.ZhuIconStruct=ZhuIconStruct})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var WarMovie;(function(WarMovie){var ZhuIcon=(function(_super){__extends(ZhuIcon,_super);function ZhuIcon(){return _super!==null&&_super.apply(this,arguments)||this}return ZhuIcon}(WarMovie.ZhuIconStruct));WarMovie.ZhuIcon=ZhuIcon})(WarMovie=fgui.WarMovie||(fgui.WarMovie={}))})(fgui||(fgui={}));var fgui;(function(fgui){var FguiComponentTemplete=(function(_super){__extends(FguiComponentTemplete,_super);function FguiComponentTemplete(){return _super!==null&&_super.apply(this,arguments)||this}FguiComponentTemplete.prototype.onWindowInited=function(){};FguiComponentTemplete.prototype.onWindowDestory=function(){return false};FguiComponentTemplete.prototype.onWindowShow=function(){};FguiComponentTemplete.prototype.onWindowHide=function(){};FguiComponentTemplete.prototype.onTabShow=function(){};FguiComponentTemplete.prototype.onTabHide=function(){};return FguiComponentTemplete}(fairygui.GComponent));fgui.FguiComponentTemplete=FguiComponentTemplete})(fgui||(fgui={}));var fgui;(function(fgui){var PfSkin;(function(PfSkin){var SkillCellStruct=(function(_super){__extends(SkillCellStruct,_super);function SkillCellStruct(){return _super.call(this)||this}SkillCellStruct.createInstance=function(){return(fairygui.UIPackage.createObject("PfSkin","SkillCell"))};SkillCellStruct.prototype.constructFromXML=function(xml){_super.prototype.constructFromXML.call(this,xml);this.m_icon=(this.getChild("icon"))};SkillCellStruct.URL="ui://s33x8418jazc1mq";SkillCellStruct.DependPackages=["PfSkin","Common"];return SkillCellStruct}(fairygui.GLabel));PfSkin.SkillCellStruct=SkillCellStruct})(PfSkin=fgui.PfSkin||(fgui.PfSkin={}))})(fgui||(fgui={}));var Games;(function(Games){var AssetManager=(function(){function AssetManager(){this.loadedAssets=new Dictionary()}AssetManager.prototype.loadConfig=function(path,callback){if(callback){var obj={onLoaded:function(){var txt=Laya.loader.getRes(path);callback(txt,path)}};Laya.loader.load(path,Handler.create(obj,obj.onLoaded),null,Loader.TEXT)}};AssetManager.prototype.unloadConfig=function(path){Laya.loader.clearRes(path,true)};AssetManager.prototype.loadList=function(list,onObj,onCompleteFun,onProgress){var count=list.length;var index=0;var callback={onComplete:function(isSuccess){var item=list[index];index++;if(onProgress){var rate=count>0?index/count:1;onProgress(rate,index,count,item)}if(index>=count){if(onCompleteFun){if(onObj){onCompleteFun.apply(onObj)}else{onCompleteFun()}}}},onProgress:function(val){}};if(list&&list.length>0){var assets=[];var item=void 0;for(var i=0;i<list.length;i++){item=list[i];if(!item){callback.onComplete(item)}switch(item.type){case Games.AssetItemType.FguiPackage:this.loadFguiByPackagename(item.url,callback,callback.onComplete);break;case Games.AssetItemType.FspritePackage:this.loadFSpriteByPackagename(item.url,callback,callback.onComplete);break;case Games.AssetItemType.Image:assets.push({url:item.url,type:Loader.IMAGE});break;case Games.AssetItemType.Buffer:assets.push({url:item.url,type:Loader.BUFFER});break;case Games.AssetItemType.Sound:assets.push({url:item.url,type:Loader.SOUND});break;case Games.AssetItemType.Text:assets.push({url:item.url,type:Loader.TEXT});break;case Games.AssetItemType.Json:assets.push({url:item.url,type:Loader.JSON});break;case Games.AssetItemType.Xml:assets.push({url:item.url,type:Loader.XML});break;case Games.AssetItemType.Font:assets.push({url:item.url,type:Loader.FONT});break;case Games.AssetItemType.TTF:assets.push({url:item.url,type:Loader.TTF});break;case Games.AssetItemType.PKM:assets.push({url:item.url,type:Loader.PKM});break}}if(assets.length>0){for(var j=0;j<assets.length;j++){if(this.loadedAssets.hasKey(assets[j].url)){callback.onComplete(true)}else{Laya.loader.load([assets[j]],Handler.create(callback,callback.onComplete),Handler.create(callback,callback.onProgress))}this.loadedAssets.add(assets[j].url,Game.time.localTime)}}}else{callback.onComplete(null)}};AssetManager.prototype.loadFguiByPackagename=function(packageName,caller,method){var packageConfig=Game.guiRes.getconfig(packageName);this.loadFgui(packageConfig,caller,method)};AssetManager.prototype.loadFSpriteByPackagename=function(packageName,caller,method){var packageConfig=Game.spriteRes.getconfig(packageName);this.loadFgui(packageConfig,caller,method)};AssetManager.prototype.loadFgui=function(packageConfig,caller,method){var callback={apply:function(){Games.GuiSetting.addPackage(packageConfig.packagePath,packageConfig);if(method){if(caller){return method.apply(caller,[packageConfig])}else{method(packageConfig)}}}};Games.GuiSetting.addPackageReferenceNum(packageConfig.packagePath);if(Games.GuiSetting.hasLoadPackage(packageConfig.packagePath)){callback.apply();return}Laya.loader.load(packageConfig.loadList,Handler.create(callback,callback.apply))};AssetManager.prototype.unloadFgui=function(packageName,forceDispose){if(forceDispose===undefined){forceDispose=false}var packageConfig=Game.guiRes.getconfig(packageName);if(!packageConfig){packageConfig=Game.spriteRes.getconfig(packageName)}if(packageConfig){var referenceNum=Games.GuiSetting.removePackageReferenceNum(packageConfig.packagePath);if(!forceDispose){if(referenceNum>0){return}}Games.GuiSetting.removePackage(packageConfig.packagePath,packageConfig);var list=packageConfig.loadList;for(var i=0;i<list.length;i++){Laya.loader.clearRes(list[i].url,forceDispose)}}};AssetManager.prototype.loadFx=function(path,caller,complete){Laya.loader.load(path,Handler.create(null,function(setting){if(complete){if(caller){complete.apply(caller,setting)}else{complete(setting)}}}),null,Loader.JSON)};return AssetManager}());Games.AssetManager=AssetManager})(Games||(Games={}));var Games;(function(Games){var MWindow=(function(_super){__extends(MWindow,_super);function MWindow(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.sShowComplete=new Signal();_this.sHideComplete=new Signal();_this.menuIsCreated=false;_this.isDestoryed=false;_this.enableShowAnimation=true;_this.enableShowSignal=true;_this.enableHideSignal=true;_this._loadAssets=[];_this._dynamicAssetsList=[];_this.toPoint=new Point();_this.srcPoint=new Point();_this.sShowSubwindowComplete=new Signal();_this.sHideSubwindowComplete=new Signal();_this.subwindowDict=new Dictionary();_this.subwindowStack=[];_this.tabDict=new Dictionary();_this.tabHistorys=[];return _this}MWindow.prototype.isOpenSubOrTab=function(index){return this.menuParameter.openIndex==index};MWindow.prototype.addAssetForFguiPackagename=function(packagename){this._loadAssets.push({url:packagename,type:Games.AssetItemType.FguiPackage})};MWindow.prototype.addAssetForFguiComponent=function(fguiCom){var names=fguiCom.DependPackages;for(var i=0;i<names.length;i++){this.addAssetForFguiPackagename(names[i])}};MWindow.prototype.getLoadAssets=function(list,dict){var assets=this._loadAssets;for(var i=0;i<assets.length;i++){var key=getAssetItemKey(assets[i]);if(!dict.hasKey(key)){list.push(assets[i]);dict.add(key,assets[i])}}return list};MWindow.prototype.unloadAssetForFguiPackagename=function(packagename){switch(packagename){case Games.GuiPackageNames.Common:case Games.GuiPackageNames.Fx:case Games.GuiPackageNames.LangEn:case Games.GuiPackageNames.LangZhCn:case Games.GuiPackageNames.Sound:case Games.GuiPackageNames.System:case Games.GuiPackageNames.PfSkin:case Games.GuiPackageNames.PlayerInfo:case Games.GuiPackageNames.Guide:case Games.GuiPackageNames.MainUI:case Games.GuiPackageNames.WarMovie:return}Game.asset.unloadFgui(packagename)};MWindow.prototype.unloadAssetForFguiComponent=function(fguiCom){var names=fguiCom.DependPackages;for(var i=0;i<names.length;i++){this.unloadAssetForFguiPackagename(names[i])}};MWindow.prototype.unloadAssetFroAssetList=function(){for(var i=0;i<this._loadAssets.length;i++){this.unloadAssetForFguiPackagename(this._loadAssets[i].url)}};MWindow.prototype.addDynamicAsset=function(assetItem){if(assetItem){this._dynamicAssetsList.push(assetItem)}};MWindow.prototype.addDynmicAssetForAvatarAll=function(avatarConfig){avatarConfig.getAllAssset(this._dynamicAssetsList)};MWindow.prototype.generateAssetsForDynmic=function(){this._dynamicAssetsList=[]};MWindow.prototype.getLoadAssetsForDynamic=function(list,dict){var assets=this._dynamicAssetsList;for(var i=0;i<assets.length;i++){var key=getAssetItemKey(assets[i]);if(!dict.hasKey(key)){list.push(assets[i]);dict.add(key,assets[i])}}var subwindows=this.subwindowDict.getValues();for(var i=0;i<subwindows.length;i++){subwindows[i].getLoadAssetsForDynamic(list,dict)}return list};MWindow.prototype.onInit=function(){this.onMenuCreate();_super.prototype.onInit.call(this)};MWindow.prototype.onMenuCreate=function(){this.setChildWindow(this.contentPane);this.callChildOnWindowInited(this.contentPane);this.menuIsCreated=true;this.onMenuOpen(this.menuParameter)};MWindow.prototype.onMenuOpen=function(parameter){this.enableShowSignal=true;this.enableShowAnimation=true;this.menuParameter=parameter;switch(parameter.openType){case Games.MenuOpenType.Subwindow:this.enableShowSignal=false;this.enableShowAnimation=false;this.openSubwindowByIndex.apply(this,[parameter.openIndex,false].concat(parameter.args));break;case Games.MenuOpenType.Tab:this.openTab(parameter.openIndex);break;default:Game.event.dispatch(GameEventKey.GameFrame_OpenMenu,this.menuId,parameter.openType);break}};MWindow.prototype.windowShow=function(){if(this.windowContainer){this.showOn(this.windowContainer)}else{this.show()}};MWindow.prototype.menuShow=function(root){switch(this.menuParameter.openType){case Games.MenuOpenType.Subwindow:if(!this.contentPane){this.onInit()}break;default:this.showOn(root);break}};MWindow.prototype.menuClose=function(){Game.menu.close(this.menuId)};MWindow.prototype.menuBack=function(){Game.menu.back(this.menuId)};MWindow.prototype.destory=function(){this.callChildOnWindowDestory(this.contentPane);this.onMenuDestory();this.sShowComplete.removeAll();this.sHideComplete.removeAll();this.sShowSubwindowComplete.removeAll();this.sHideSubwindowComplete.removeAll();this.tabDict.clear();var list=this.subwindowDict.getValues();for(var i=0;i<list.length;i++){var item=list[i];item.destory()}this.subwindowDict.clear();if(this.contentPane){this.contentPane.dispose();this.contentPane=null}this.unloadAssetFroAssetList();_super.prototype.dispose.call(this);this.isDestoryed=true};MWindow.prototype.onMenuDestory=function(){};MWindow.prototype.doShowAnimation=function(){var _this=this;this.onWindowWillShow();if(this.openAnimation==1){this.srcPoint.x=this.panel.x;this.srcPoint.y=this.panel.y;this.panel.setScale(0.1,0.1);this.calBuutonPos();this.panel.setXY(this.toPoint.x,this.toPoint.y);laya.utils.Tween.to(this.panel,{scaleX:1,scaleY:1,x:this.srcPoint.x,y:this.srcPoint.y},300,laya.utils.Ease.quadOut,Handler.create(this,function(){_this.onShown()}))}else{_super.prototype.doShowAnimation.call(this)}};Object.defineProperty(MWindow.prototype,"panel",{get:function(){if(this.contentPane.m_panel){return this.contentPane.m_panel}return this.contentPane},enumerable:true,configurable:true});MWindow.prototype.doHideAnimation=function(){var _this=this;this.onWindowWillHide();if(this.closeAnimation==1){this.panel.setScale(1,1);this.calBuutonPos();laya.utils.Tween.to(this.panel,{scaleX:0.1,scaleY:0.1,x:this.toPoint.x,y:this.toPoint.y},300,laya.utils.Ease.quadOut,Handler.create(this,function(){_this.panel.x=_this.srcPoint.x;_this.panel.y=_this.srcPoint.y;_this.hideImmediately()}))}else{_super.prototype.doHideAnimation.call(this)}};Object.defineProperty(MWindow.prototype,"openAnimation",{get:function(){if(this.menuConfig==null){return 0}return this.menuConfig.openAnimation},enumerable:true,configurable:true});Object.defineProperty(MWindow.prototype,"closeAnimation",{get:function(){if(this.menuConfig==null){return 0}return this.menuConfig.closeAnimation},enumerable:true,configurable:true});Object.defineProperty(MWindow.prototype,"menuConfig",{get:function(){if(this.menuId>0){return Game.config.menu.getConfig(this.menuId)}return null},enumerable:true,configurable:true});MWindow.prototype.calBuutonPos=function(){var btn=Game.moduleModel.func.getMenuCtrlByMenuId(this.menuId);if(btn){var p=btn.getGlobalPos();this.toPoint.x=p.x;this.toPoint.y=p.y}else{this.toPoint.x=ScreenSetting.screenWidth>>1;this.toPoint.y=ScreenSetting.screenHeight>>1}};MWindow.prototype.onShown=function(){this.panel.setScale(1,1);this.enableHideSignal=true;this.onShowComplete();if(this.contentPane){this.callChildOnWindowShow(this.contentPane)}};MWindow.prototype.onMenuClose=function(){this.hide();var list=this.subwindowDict.getValues();for(var i=0;i<list.length;i++){var item=list[i];item.hide()}};MWindow.prototype.onHide=function(){this.enableShowSignal=true;this.onHideComplete();this.clearTabHistorys();if(this.contentPane){this.callChildOnWindowHide(this.contentPane)}};MWindow.prototype.onShowComplete=function(){if(this.enableShowSignal){this.sShowComplete.dispatch()}};MWindow.prototype.onHideComplete=function(){if(this.enableHideSignal){this.sHideComplete.dispatch()}};MWindow.prototype.getSubwindow=function(subwindowIndex){return this.subwindowDict.getValue(subwindowIndex)};MWindow.prototype.registerSubwindow=function(subwindow){this.subwindowDict.add(subwindow.subwindowIndex,subwindow)};MWindow.prototype.__onSubWindowClose=function(subwindow){for(var i=this.subwindowStack.length-1;i>=0;i--){if(this.subwindowStack[i]==subwindow){this.subwindowStack.splice(i,1)}}};MWindow.prototype.__getLastOpenSubWindow=function(excludeSubwindow){for(var i=this.subwindowStack.length-1;i>=0;i--){var ctl=this.subwindowStack[i];if(excludeSubwindow&&excludeSubwindow.indexOf(ctl)!=-1){continue}return ctl}return null};MWindow.prototype.closeAllSubwindowSelf=function(excludeSubwindow){var list=[];for(var i=this.subwindowStack.length-1;i>=0;i--){list.push(this.subwindowStack[i])}for(var i=0;i<list.length;i++){var ctl=list[i];if(excludeSubwindow&&excludeSubwindow.indexOf(ctl)!=-1){continue}ctl.closeSelf()}};MWindow.prototype.closeLastSubwindowSelf=function(){var subWindow=this.__getLastOpenSubWindow();if(subWindow){subWindow.closeSelf()}};MWindow.prototype.getLastMenuParameter=function(){var subWindow=this.__getLastOpenSubWindow();if(subWindow){return subWindow.menuParameter}else{return this.menuParameter}};MWindow.prototype.openSubwindow=function(subwindow,dontCloseOther){var _this=this;if(dontCloseOther===void 0){dontCloseOther=false}var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}subwindow.__backSubWindow=this.__getLastOpenSubWindow([subwindow]);this.menuParameter.openType=Games.MenuOpenType.Subwindow;this.menuParameter.openIndex=subwindow.subwindowIndex;this.menuParameter.args=args;var menuParmeter={openType:this.menuParameter.openType,openIndex:this.menuParameter.openIndex,args:args,dontCloseOther:dontCloseOther};if(!dontCloseOther){var caller={on:function(){if(subwindow.whenOpenCloseMainwindow){_this.enableHideSignal=false;_this.hideImmediately()}if(subwindow.whenOpenCloseOthersubwindow){var list=_this.subwindowDict.getValues;for(var i=0;i<list.length;i++){var item=list[i];if(item!=subwindow){item.hideImmediately();_this.__onSubWindowClose(item)}}}_this.sShowSubwindowComplete.dispatch()}};subwindow.sShowComplete.addOnce(caller.on,caller)}var index=this.subwindowStack.indexOf(subwindow);if(index!=-1){this.subwindowStack.splice(index,1)}this.subwindowStack.push(subwindow);if(subwindow.menuIsCreated){subwindow.onMenuOpen(menuParmeter)}else{subwindow.menuParameter=menuParmeter}subwindow.showOn(this.windowContainer);Game.event.dispatch(GameEventKey.GameFrame_OpenMenu,this.menuId,menuParmeter.openType,menuParmeter.openIndex)};MWindow.prototype.openSubwindowByIndex=function(subwindowIndex,dontCloseOther){if(dontCloseOther===void 0){dontCloseOther=false}var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}var subwindow=this.getSubwindow(subwindowIndex);this.openSubwindow.apply(this,[subwindow,dontCloseOther].concat(args))};MWindow.prototype.onSubwindowBack=function(subwindow){this.menuParameter.openType=Games.MenuOpenType.None;this.menuParameter.openIndex=0;this.sShowComplete.addOnce(function(){subwindow.hide()},subwindow);if(this.windowContainer.parent){subwindow.hide()}this.showOn(this.windowContainer);this.subwindowStack=[]};MWindow.prototype.getTabDispyaObjects=function(tabIndex){if(this.tabDict.hasKey(tabIndex)){return this.tabDict.getValue(tabIndex)}var list=[];this.tabDict.add(tabIndex,list);return list};MWindow.prototype.registerTab=function(tabIndex,displayObject){var list=this.getTabDispyaObjects(tabIndex);list.push(displayObject)};MWindow.prototype.setTabVisiable=function(tabIndex,visiable){var list=this.getTabDispyaObjects(tabIndex);for(var i=0;i<list.length;i++){if(visiable){this.callChildOnTabShow(list[i])}else{if(list[i].visible){this.callChildOnTabHide(list[i])}}list[i].visible=visiable}};MWindow.prototype.setOpenTab=function(tabIndex){this.menuParameter.openIndex=tabIndex;var keys=this.tabDict.getKeys();for(var i=0;i<keys.length;i++){if(keys[i]!=tabIndex){this.setTabVisiable(keys[i],false)}}this.setTabVisiable(tabIndex,true);this.onOpenTab(tabIndex)};MWindow.prototype.openTab=function(tabIndex){this.tabHistorys.push(tabIndex);this.setOpenTab(tabIndex);Game.event.dispatch(GameEventKey.GameFrame_OpenMenu,this.menuId,Games.MenuOpenType.Tab,tabIndex)};MWindow.prototype.onOpenTab=function(tabIndex){};MWindow.prototype.backTab=function(){if(this.tabHistorys.length>0){var lastIndex=void 0;for(var i=this.tabHistorys.length-1;i>=0;i--){if(this.tabHistorys[i]==this.menuParameter.openIndex){if(i>0){if(this.tabHistorys[i-1]!=this.menuParameter.openIndex){lastIndex=this.tabHistorys[i-1]}}}}if(lastIndex===undefined){this.menuBack()}else{this.openTab(lastIndex)}}};MWindow.prototype.clearTabHistorys=function(){this.tabHistorys=[]};MWindow.prototype.setChildWindow=function(com){if(com){com.moduleWindow=this;if(com._children){for(var i=0;i<com._children.length;i++){this.setChildWindow(com._children[i])}}}};MWindow.prototype.callChildOnWindowInited=function(com){if(com){var fun=com.onWindowInited;if(fun){fun.apply(com)}if(com._children){for(var i=0;i<com._children.length;i++){this.callChildOnWindowInited(com._children[i])}}}};MWindow.prototype.callChildOnWindowDestory=function(com){var container;if(com instanceof fairygui.GObject){container=com.displayObject}if(com){var fun=com.onWindowDestory;if(fun){if(fun.apply(com)){return}}for(var i=container.numChildren-1;i>=0;i--){var display=container.getChildAt(i);if(display["$owner"]){this.callChildOnWindowDestory(display["$owner"])}}}};MWindow.prototype.callChildOnWindowShow=function(com){if(com){var enbaleCall=true;var fun=com.onWindowShow;if(fun){if(com.whenSelfVisiableCallWindowShowAndHide!==undefined){var whenSelfVisiableCallWindowShowAndHide=com.whenSelfVisiableCallWindowShowAndHide;if(whenSelfVisiableCallWindowShowAndHide){if(com.visible==false){enbaleCall=false}}}if(enbaleCall){fun.apply(com)}}if(enbaleCall&&com._children){for(var i=0;i<com._children.length;i++){this.callChildOnWindowShow(com._children[i])}}}};MWindow.prototype.callChildOnWindowHide=function(com){if(com){var enbaleCall=true;var fun=com.onWindowHide;if(fun){if(com.whenSelfVisiableCallWindowShowAndHide!==undefined){var whenSelfVisiableCallWindowShowAndHide=com.whenSelfVisiableCallWindowShowAndHide;if(whenSelfVisiableCallWindowShowAndHide){if(com.visible==false){enbaleCall=false}}}if(enbaleCall){fun.apply(com)}}if(enbaleCall&&com._children){for(var i=0;i<com._children.length;i++){this.callChildOnWindowHide(com._children[i])}}}};MWindow.prototype.callChildOnTabShow=function(com){if(com){var fun=com.onTabShow;if(fun){fun.apply(com)}if(com._children){for(var i=0;i<com._children["length"];i++){this.callChildOnTabShow(com._children[i])}}}};MWindow.prototype.callChildOnTabHide=function(com){if(com){var fun=com.onTabHide;if(fun){fun.apply(com)}if(com._children){for(var i=0;i<com._children["length"];i++){this.callChildOnTabHide(com._children[i])}}}};return MWindow}(Games.FWindow));Games.MWindow=MWindow})(Games||(Games={}));var Games;(function(Games){var MSubwindow=(function(_super){__extends(MSubwindow,_super);function MSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this)||this;_this.whenOpenCloseOthersubwindow=true;_this.whenOpenCloseMainwindow=true;_this.subwindowIndex=subwindowIndex;_this.mainWindow=mainWindow;return _this}MSubwindow.prototype.addAssetForFguiPackagename=function(packagename){var item={url:packagename,type:Games.AssetItemType.FguiPackage};this._loadAssets.push(item);this.mainWindow.addAssetForFguiPackagename(packagename)};MSubwindow.prototype.windowShow=function(){if(this.mainWindow.windowContainer){this.showOn(this.mainWindow.windowContainer)}else{this.show()}};MSubwindow.prototype.menuShow=function(root){this.showOn(root)};MSubwindow.prototype.menuClose=function(){this.mainWindow.menuClose()};MSubwindow.prototype.menuBack=function(){this.mainWindow.menuBack()};MSubwindow.prototype.backToMainWindow=function(){this.mainWindow.onSubwindowBack(this)};MSubwindow.prototype.backPreWindow=function(){this.closeSelf();if(this.__backSubWindow){if(this.__backSubWindow.menuParameter.dontCloseOther){this.backToMainWindow()}(_a=this.mainWindow).openSubwindow.apply(_a,[this.__backSubWindow,this.__backSubWindow.menuParameter.dontCloseOther].concat(this.__backSubWindow.menuParameter.args))}else{this.backToMainWindow()}var _a};MSubwindow.prototype.closeSelf=function(){this.hide();this.mainWindow.__onSubWindowClose(this)};MSubwindow.prototype.onMenuOpen=function(parameter){this.menuParameter=parameter};return MSubwindow}(Games.MWindow));Games.MSubwindow=MSubwindow})(Games||(Games={}));var Games;(function(Games){var Age=(function(_super){__extends(Age,_super);function Age(){return _super.call(this)||this}Age.prototype.update=function(emitter,particle,time){particle.age+=time;if(particle.age>=particle.lifetime){particle.energy=0;particle.isDead=true}else{particle.energy=1-particle.age/particle.lifetime}};return Age}(Games.Actioner));Games.Age=Age})(Games||(Games={}));var Games;(function(Games){var Fade=(function(_super){__extends(Fade,_super);function Fade(startAlpha,endAlpha){if(startAlpha===void 0){startAlpha=1}if(endAlpha===void 0){endAlpha=0}var _this=_super.call(this)||this;_this.startAlpha=0;_this.endAlpha=0;_this.diffAlpha=0;_this.startAlpha=startAlpha;_this.endAlpha=endAlpha;_this.diffAlpha=startAlpha-endAlpha;return _this}Fade.prototype.update=function(emitter,particle,time){particle.alpha=this.endAlpha+this.diffAlpha*particle.energy};return Fade}(Games.Actioner));Games.Fade=Fade})(Games||(Games={}));var Games;(function(Games){var Move=(function(_super){__extends(Move,_super);function Move(velX,velY){if(velX===void 0){velX=1}if(velY===void 0){velY=1}var _this=_super.call(this)||this;_this.velX=0;_this.velY=0;_this.velX=velX;_this.velY=velY;return _this}Move.prototype.update=function(emitter,particle,time){particle.velX=this.velX;particle.velY=this.velY;particle.previousX=Math.sin(particle.rotation)*particle.velX*time*particle.energy;particle.previousY=Math.cos(particle.rotation)*particle.velY*time*particle.energy;particle.x+=particle.previousX;particle.y+=particle.previousY};return Move}(Games.Actioner));Games.Move=Move})(Games||(Games={}));var Games;(function(Games){var Initializer=(function(){function Initializer(){}Initializer.prototype.addedToEmitter=function(emitter){};Initializer.prototype.removedFromEmitter=function(emitter){};Initializer.prototype.initialize=function(emitter,particle){};return Initializer}());Games.Initializer=Initializer})(Games||(Games={}));var Games;(function(Games){var AlphaInit=(function(_super){__extends(AlphaInit,_super);function AlphaInit(minAlpha,maxAlpha){if(minAlpha===void 0){minAlpha=0.1}if(maxAlpha===void 0){maxAlpha=1}var _this=_super.call(this)||this;_this.minAlpha=0;_this.maxAlpha=0;_this.minAlpha=minAlpha;_this.maxAlpha=maxAlpha;return _this}AlphaInit.prototype.initialize=function(emitter,particle){var range=this.maxAlpha-this.minAlpha;var rand=Math.random();particle.alpha=this.minAlpha+range*rand};return AlphaInit}(Games.Initializer));Games.AlphaInit=AlphaInit})(Games||(Games={}));var Games;(function(Games){var LiftTimeInit=(function(_super){__extends(LiftTimeInit,_super);function LiftTimeInit(min,max){if(min===void 0){min=0.1}if(max===void 0){max=1}var _this=_super.call(this)||this;_this.min=0;_this.max=0;_this.min=min;_this.max=max;return _this}LiftTimeInit.prototype.initialize=function(emitter,particle){var range=this.max-this.min;var rand=Math.random();particle.lifetime=this.min+range*rand};return LiftTimeInit}(Games.Initializer));Games.LiftTimeInit=LiftTimeInit})(Games||(Games={}));var Games;(function(Games){var RotationInit=(function(_super){__extends(RotationInit,_super);function RotationInit(min,max){if(min===void 0){min=0}var _this=_super.call(this)||this;_this.min=0;_this.max=0;_this.min=min;_this.max=max;return _this}RotationInit.prototype.initialize=function(emitter,particle){var range=this.max-this.min;var rand=Math.random();particle.rotation=this.min+Math.round(range*rand)};return RotationInit}(Games.Initializer));Games.RotationInit=RotationInit})(Games||(Games={}));var Games;(function(Games){var ScaleInit=(function(_super){__extends(ScaleInit,_super);function ScaleInit(min,max){if(min===void 0){min=0}var _this=_super.call(this)||this;_this.min=0;_this.max=0;_this.min=min;_this.max=max;return _this}ScaleInit.prototype.initialize=function(emitter,particle){var range=this.max-this.min;var rand=Math.random();var scale=this.min+range*rand;particle.scale(scale,scale)};return ScaleInit}(Games.Initializer));Games.ScaleInit=ScaleInit})(Games||(Games={}));var Games;(function(Games){var TextureInit=(function(_super){__extends(TextureInit,_super);function TextureInit(){var _this=_super.call(this)||this;_this.rendererClassList=[];return _this}TextureInit.prototype.setRenderList=function(rendererClasses){this.rendererClassList=rendererClasses};Object.defineProperty(TextureInit.prototype,"rendererClass",{get:function(){var rd=Random.range(0,this.rendererClassList.length);return this.rendererClassList[rd]},enumerable:true,configurable:true});TextureInit.prototype.initialize=function(emitter,particle){if(particle.renderer==null){particle.renderer=this.rendererClass.createInstance()}else{particle.renderer=particle.renderer}if(emitter.parent){emitter.parent.addChild(particle);particle.x=emitter.x;particle.y=emitter.y}};return TextureInit}(Games.Initializer));Games.TextureInit=TextureInit})(Games||(Games={}));var Games;(function(Games){var ParticleFactoryStats=(function(){function ParticleFactoryStats(){}ParticleFactoryStats.numParticles=0;return ParticleFactoryStats}());Games.ParticleFactoryStats=ParticleFactoryStats;var ParticleFactory=(function(){function ParticleFactory(){this.particlePool=[]}ParticleFactory.prototype.creatParticle=function(){ParticleFactoryStats.numParticles++;for(var i=this.particlePool.length-1;i>=0;i--){if(!this.particlePool[i].getStyle()){this.particlePool.splice(i,1)}}if(this.particlePool.length>0){return this.particlePool.pop()}else{return new Particle2D()}};ParticleFactory.prototype.disposeParticle=function(particle){ParticleFactoryStats.numParticles--;particle.init();if(!particle.destroyed){this.particlePool.push(particle)}};ParticleFactory.prototype.clearPool=function(){for(var _i=0,_a=this.particlePool;_i<_a.length;_i++){var particle=_a[_i];particle.destroy()}this.particlePool.length=0};return ParticleFactory}());Games.ParticleFactory=ParticleFactory;var Particle=(function(_super){__extends(Particle,_super);function Particle(){var _this=_super.call(this)||this;_this.color="#FFFFFF";_this.mass=1;_this.energy=1;_this.age=0;_this.lifetime=0;_this.isDead=false;return _this}Particle.prototype.init=function(){this.color="#FFFFFF";this.alpha=1;this.scale(1,1,true);this.mass=1;this.energy=1;this.age=0;this.lifetime=0;this.isDead=false};return Particle}(laya.display.Sprite));Games.Particle=Particle;var Particle2D=(function(_super){__extends(Particle2D,_super);function Particle2D(){var _this=_super.call(this)||this;_this.x=0;_this.y=0;_this.previousX=0;_this.previousY=0;_this.velX=0;_this.velY=0;_this.rotation=0;_this.angVelocity=0;_this.init();return _this}Particle2D.prototype.init=function(){_super.prototype.init.call(this);this.x=0;this.y=0;this.previousX=0;this.previousY=0;this.velX=0;this.velY=0;this.rotation=0;this.angVelocity=0;if(this._renderer){this._renderer.visible=false}};Object.defineProperty(Particle2D.prototype,"renderer",{get:function(){return this._renderer},set:function(val){if(this._renderer){if(this._renderer!==val){this._renderer.removeFromParent();this._renderer=null}else{this._renderer.visible=true}}this._renderer=val;val.x=0;val.y=0;this.addChild(val.displayObject)},enumerable:true,configurable:true});Particle2D.prototype.remove=function(){this.removeSelf()};return Particle2D}(Particle));Games.Particle2D=Particle2D})(Games||(Games={}));var Games;(function(Games){var Sprite=laya.display.Sprite;var ParticleEmitter2D=(function(_super){__extends(ParticleEmitter2D,_super);function ParticleEmitter2D(){var _this=_super.call(this)||this;_this.DELTA_TIME=0.02;_this.isStart=false;_this.isRunning=false;_this._emitNum=2;_this.frameId=0;_this.isStart=false;_this.particles=[];_this.initializers=[];_this.actioners=[];_this.creater=new Games.ParticleFactory();return _this}ParticleEmitter2D.prototype.addInitializer=function(initializer){initializer.addedToEmitter(this);this.initializers.push(initializer)};ParticleEmitter2D.prototype.addActoiner=function(action){action.addedToEmitter(this);this.actioners.push(action)};ParticleEmitter2D.prototype.creatParticle=function(){var particle=this.creater.creatParticle();for(var _i=0,_a=this.initializers;_i<_a.length;_i++){var initializer=_a[_i];initializer.initialize(this,particle)}this.particles.push(particle);return particle};Object.defineProperty(ParticleEmitter2D.prototype,"emitNum",{get:function(){return this._emitNum},set:function(value){this._emitNum=value},enumerable:true,configurable:true});ParticleEmitter2D.prototype.start=function(){if(!this.isRunning){Laya.timer.loop(this.DELTA_TIME*1000,this,this.update,null,true,true)}this.isStart=true;this.isRunning=true;for(var i=0;i<this.emitNum;i++){this.creatParticle()}};ParticleEmitter2D.prototype.pause=function(){if(this.isRunning){Laya.timer.clear(this,this.update)}this.isRunning=false};ParticleEmitter2D.prototype.resume=function(){if(!this.isRunning){Laya.timer.loop(this.DELTA_TIME*1000,this,this.update,null,true,true)}this.isRunning=true};ParticleEmitter2D.prototype.stop=function(){var _this=this;this.isStart=false;this.isRunning=false;this.killAllParticles();this.removeChildren();this.removeSelf();Laya.timer.clear(this,this.update);setTimeout(function(){_this.creater.clearPool()},this.DELTA_TIME*1000)};ParticleEmitter2D.prototype.recover=function(){this.pause();this.removeChildren();this.removeSelf();this.killAllParticles()};ParticleEmitter2D.prototype.update=function(){if(!this.isRunning){return}this.frameId++;if(this.frameId%2==0){this.frameId=0;for(var i=0;i<this.emitNum;i++){this.creatParticle()}}var len=this.actioners.length;var len2=this.particles.length;var action;var particle2D;for(var i=0;i<len;i++){action=this.actioners[i];for(var j=len2-1;j>=0;j--){particle2D=this.particles[j];action.update(this,particle2D,this.DELTA_TIME)}}for(var i=len2-1;i>=0;i--){particle2D=this.particles[i];if(particle2D.isDead){this.particles.splice(i,1);this.creater.disposeParticle(particle2D)}}};ParticleEmitter2D.prototype.killAllParticles=function(){for(var i=this.particles.length-1;i>=0;i--){var particle2D=this.particles[i];this.creater.disposeParticle(particle2D)}this.particles.length=0};return ParticleEmitter2D}(Sprite));Games.ParticleEmitter2D=ParticleEmitter2D})(Games||(Games={}));var Games;(function(Games){var TrailEmitter=(function(_super){__extends(TrailEmitter,_super);function TrailEmitter(){var _this=_super.call(this)||this;_this.renderClassList=[];_this.displayIndex=-1;return _this}TrailEmitter.prototype.setRenderList=function(rendererClasses){this.renderClassList=rendererClasses;this.setup()};TrailEmitter.prototype.setRenderer=function(rendererClass){this.renderClassList.push(rendererClass);this.setup()};Object.defineProperty(TrailEmitter.prototype,"hasRenderer",{get:function(){return this.renderClassList.length>0},enumerable:true,configurable:true});TrailEmitter.prototype.setup=function(){this.emitNum=2;var textureInit=new Games.TextureInit();textureInit.setRenderList(this.renderClassList);this.addInitializer(textureInit);this.addInitializer(new Games.LiftTimeInit(0.6,1.2));this.addInitializer(new Games.RotationInit(0,360));this.addInitializer(new Games.ScaleInit(0.6,0.8));this.addActoiner(new Games.Age());this.addActoiner(new Games.Fade(1,0));this.addActoiner(new Games.Move(30,30))};TrailEmitter.prototype.showOn=function(root,displayIndex){if(displayIndex===void 0){displayIndex=-1}if(root instanceof laya.display.Sprite){this.root=root}else{this.root=root.displayObject}this.displayIndex=displayIndex;this.checkShow()};TrailEmitter.prototype.checkShow=function(){if(this.root){if(this.displayIndex>=0){this.root.addChildAt(this,this.displayIndex)}else{this.root.addChild(this)}}};return TrailEmitter}(Games.ParticleEmitter2D));Games.TrailEmitter=TrailEmitter})(Games||(Games={}));var Games;(function(Games){var Circle=(function(_super){__extends(Circle,_super);function Circle(){return _super.call(this)||this}Circle.prototype.onInit=function(){this.loaderCircle=fgui.System.GlobalModalWaiting.createInstance();this.contentPane=this.loaderCircle;this.center();this.setPivot(0.5,0.5)};Circle.prototype.show=function(){_super.prototype.showOn.call(this,Games.MenuLayer.loader)};return Circle}(fairygui.Window));Games.Circle=Circle})(Games||(Games={}));var Games;(function(Games){var EComponent=(function(){function EComponent(){this.isDisposed=false}Object.defineProperty(EComponent.prototype,"Type",{get:function(){return this["constructor"]["name"]},enumerable:true,configurable:true});EComponent.prototype.init=function(){};EComponent.prototype.onUpdate=function(){};EComponent.prototype.onRender=function(){};EComponent.prototype.onSeconds=function(){};EComponent.prototype.dispose=function(){this.recycle();this.isDisposed=true};EComponent.prototype.recycle=function(){Game.pool.componentPool.recycle(this)};return EComponent}());Games.EComponent=EComponent})(Games||(Games={}));var Games;(function(Games){var EEntity=(function(){function EEntity(){this.componentDict=new DictionaryList();this.entityId=0;this.isDisposed=false;this.isUpdateTick=false;this.isRenderTick=false;this.isSecondsTick=false;this.entityId=Games.IdGenerater.GenerateId()}EEntity.prototype.addComponent=function(component){if(!this.componentDict.hasKey(component.Type)){this.componentDict.add(component.Type,component)}};EEntity.prototype.getComponent=function(cls){return this.componentDict.getValue(cls.name)};EEntity.prototype.removeComponent=function(component){if(this.componentDict.hasKey(component.Type)){this.componentDict.remove(component.Type)}};EEntity.prototype.start=function(){};EEntity.prototype.stop=function(){};EEntity.prototype.onUpdate=function(){var components=this.componentDict.getValues();for(var i=0;i<components.length;i++){components[i].onUpdate()}};EEntity.prototype.onRender=function(){var components=this.componentDict.getValues();for(var i=0;i<components.length;i++){components[i].onRender()}};EEntity.prototype.onSeconds=function(){var components=this.componentDict.getValues();for(var i=0;i<components.length;i++){components[i].onSeconds()}};EEntity.prototype.dispose=function(){if(this.isDisposed){return}this.isDisposed=true;var components=this.componentDict.getValues();for(var i=0;i<components.length;i++){components[i].dispose()}this.componentDict.clear()};return EEntity}());Games.EEntity=EEntity})(Games||(Games={}));var Games;(function(Games){var ESystem=(function(){function ESystem(){this.isUpdateTick=false;this.isRenderTick=false;this.isSecondsTick=false}ESystem.prototype.start=function(){};ESystem.prototype.stop=function(){};ESystem.prototype.onUpdate=function(){};ESystem.prototype.onRender=function(){};ESystem.prototype.onSeconds=function(){};return ESystem}());Games.ESystem=ESystem})(Games||(Games={}));var Games;(function(Games){var BTree;(function(BTree){var Node=(function(){function Node(){this.isStart=false;this._isPaused=false}Node.Update=function(node){if(node==null||node.isPaused){return BTree.TaskState.Inactive}if(!node.isStart){node.onStart()}var state=node.onUpdate();if(state==BTree.TaskState.Failure||state==BTree.TaskState.Success){node.onEnd()}return state};Node.SetParentNode=function(node,parent){node.parentNode=parent};Object.defineProperty(Node.prototype,"isPaused",{get:function(){return this._isPaused},set:function(val){this._isPaused=val;val&&this.onPause();!val&&this.onResume()},enumerable:true,configurable:true});Node.prototype.onStart=function(){this.isStart=true};Node.prototype.update=function(){return Node.Update(this)};Node.prototype.onUpdate=function(){if(this.isPaused){return BTree.TaskState.Inactive}return BTree.TaskState.Running};Node.prototype.onPause=function(){};Node.prototype.onResume=function(){};Node.prototype.onEnd=function(){};return Node}());BTree.Node=Node})(BTree=Games.BTree||(Games.BTree={}))})(Games||(Games={}));var Games;(function(Games){var BTree;(function(BTree){var ActionNode=(function(_super){__extends(ActionNode,_super);function ActionNode(){return _super!==null&&_super.apply(this,arguments)||this}return ActionNode}(BTree.Node));BTree.ActionNode=ActionNode})(BTree=Games.BTree||(Games.BTree={}))})(Games||(Games={}));var Games;(function(Games){var BTree;(function(BTree){var CompositeNode=(function(_super){__extends(CompositeNode,_super);function CompositeNode(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.childrenNodes=[];return _this}CompositeNode.prototype.addNode=function(node){this.childrenNodes.push(node);BTree.Node.SetParentNode(node,this)};CompositeNode.prototype.removeNode=function(node){var index=this.childrenNodes.indexOf(node);if(index!=-1){this.childrenNodes.splice(index,1)}};CompositeNode.prototype.onChildrenNodesUpdate=function(){};return CompositeNode}(BTree.Node));BTree.CompositeNode=CompositeNode})(BTree=Games.BTree||(Games.BTree={}))})(Games||(Games={}));var Games;(function(Games){var BTree;(function(BTree){var SequenceNode=(function(_super){__extends(SequenceNode,_super);function SequenceNode(){return _super!==null&&_super.apply(this,arguments)||this}SequenceNode.prototype.onChildrenNodesUpdate=function(){for(var i=0;i<this.childrenNodes.length;i++){var node=this.childrenNodes[i];var state=node.update();if(state==BTree.TaskState.Inactive||(state==BTree.TaskState.Success)||state==BTree.TaskState.Running){continue}else{if(state==BTree.TaskState.Failure){return BTree.TaskState.Failure}}}return BTree.TaskState.Running};return SequenceNode}(BTree.CompositeNode));BTree.SequenceNode=SequenceNode})(BTree=Games.BTree||(Games.BTree={}))})(Games||(Games={}));var Games;(function(Games){var ActionNode=Games.BTree.ActionNode;var TaskState=Games.BTree.TaskState;var MoveAction=(function(_super){__extends(MoveAction,_super);function MoveAction(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.pointX=0;_this.animId=1004;_this.endAnimName="zhanli1";_this.endAnimLoop=true;_this.speed=100;_this.speedRun=150;return _this}Object.defineProperty(MoveAction.prototype,"run",{get:function(){return this.animId==1005},set:function(val){this.animId=val?1005:1004},enumerable:true,configurable:true});Object.defineProperty(MoveAction.prototype,"moveAnimId",{set:function(animId){this.animId=animId},enumerable:true,configurable:true});MoveAction.prototype.init=function(unitAgent){this.unitAgent=unitAgent};MoveAction.prototype.onUpdate=function(){if(this.unitAgent){this.unitAgent.playAction(this.animId);var distance=Math.abs(this.unitAgent.x-this.pointX);this.unitAgent.direction=this.unitAgent.x>this.pointX?Games.DirtionType.Left:Games.DirtionType.Right;var dir=(this.unitAgent.direction==Games.DirtionType.Right)?1:-1;var dspeed=this.run?this.speedRun:this.speed;this.unitAgent.x+=dspeed*Games.GameDriver.time.renderTime.deltaTime*dir;if(this.checkMoveToEnd()){this.unitAgent.x=this.pointX;this.unitAgent.play(this.endAnimName);if(this.completeHandler){this.completeHandler.run()}return TaskState.Success}}return TaskState.Running};MoveAction.prototype.checkMoveToEnd=function(){var dspeed=this.run?this.speedRun:this.speed;var deltaLength=dspeed*Games.GameDriver.time.updateTime.deltaTime;var distance=Math.abs(this.unitAgent.x-this.pointX);if(distance<=deltaLength){return true}return false};MoveAction.prototype.onEnd=function(){this.unitAgent=null;this.recycle()};MoveAction.prototype.recycle=function(){this.pointX=0;this.animId=1004;this.endAnimName="zhanli1";this.endAnimLoop=true;this.completeHandler=null;Pool.recover(this)};return MoveAction}(ActionNode));Games.MoveAction=MoveAction})(Games||(Games={}));var Games;(function(Games){var SequnceNode=Games.BTree.SequenceNode;var TaskState=Games.BTree.TaskState;var SequenceMove=(function(_super){__extends(SequenceMove,_super);function SequenceMove(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isStarted=false;_this.isComplete=true;return _this}SequenceMove.prototype.initAgent=function(agent){this.unitAgent=agent};SequenceMove.prototype.onStart=function(){var _this=this;this.isStarted=true;this.isComplete=false;this.childrenNodes.forEach(function(node){node.unitAgent=_this.unitAgent})};SequenceMove.prototype.onUpdate=function(){return this.onChildrenNodesUpdate()};SequenceMove.prototype.onChildrenNodesUpdate=function(){if(this.childrenNodes.length==0&&this.isCurrentNodeEnd){return TaskState.Success}if(!this.currentNode){this.nextChildNode()}if(this.currentNode){var state=this.currentNode.update();if(state==TaskState.Success){this.currentNode=null}}return TaskState.Running};SequenceMove.prototype.nextChildNode=function(){if(this.childrenNodes.length>0){this.currentNode=this.childrenNodes.shift()}};Object.defineProperty(SequenceMove.prototype,"isCurrentNodeEnd",{get:function(){return this.currentNode==null},enumerable:true,configurable:true});SequenceMove.prototype.onEnd=function(){this.recycle()};SequenceMove.prototype.recycle=function(){this.unitAgent=null;this.currentNode=null;this.isComplete=true;this.isStart=false;Pool.recover(this)};return SequenceMove}(SequnceNode));Games.SequenceMove=SequenceMove})(Games||(Games={}));var Games;(function(Games){var UnitComponent=(function(_super){__extends(UnitComponent,_super);function UnitComponent(entity){var _this=_super.call(this)||this;_this.unit=entity;return _this}UnitComponent.prototype.Start=function(){};UnitComponent.prototype.Pause=function(){};UnitComponent.prototype.Resume=function(){};UnitComponent.prototype.Stop=function(){};UnitComponent.prototype.Show=function(){};UnitComponent.prototype.Hide=function(){};return UnitComponent}(Games.EComponent));Games.UnitComponent=UnitComponent})(Games||(Games={}));var Games;(function(Games){var Event=laya.events.Event;var UnitAnimatorComponent=(function(_super){__extends(UnitAnimatorComponent,_super);function UnitAnimatorComponent(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.sPlayEnd=new Signal();_this.animSequence=[];_this.currentAnimId=0;_this.currentAnimName="";_this.currentAnimLoop=false;_this._nameOrIndex="zhanli1";_this._loop=true;return _this}UnitAnimatorComponent.prototype.onRender=function(){if(this.animator){if(this.currentAnimId!=this.unit.unitData.currentAnimId){this.playAction(this.unit.unitData.currentAnimId);this.currentAnimId=this.unit.unitData.currentAnimId}}};UnitAnimatorComponent.prototype.setAnimator=function(skeleton){if(!this.animator){this.animator=skeleton;this.animator.on(Event.STOPPED,this,this.onAnimatorPlayEnd)}};UnitAnimatorComponent.prototype.recycle=function(){if(this.animator){this.animator.off(Event.STOPPED,this,this.onAnimatorPlayEnd);this.animator=null}};UnitAnimatorComponent.prototype.pauseMoveAnim=function(){if(this.isMoveAnim){this.animator.play(this.unit.unitData.info.idleName,true)}};UnitAnimatorComponent.prototype.resumeMoveAnim=function(){if(this.isMoveAnim){this.animator.play(this.currentAnimName,this.currentAnimLoop)}};Object.defineProperty(UnitAnimatorComponent.prototype,"isMoveAnim",{get:function(){var currentAnimName=this.unit.unitData.currentAnimName;return currentAnimName=="zoulu1"||currentAnimName=="paodong1"},enumerable:true,configurable:true});UnitAnimatorComponent.prototype.playAction=function(actionId){var actionCfg=Game.config.action.getConfig(actionId);if(actionCfg){if(actionCfg.loop==1){this.animSequence.length=0;this.play(actionCfg.action,true)}else{this.playList(actionCfg.actionSequence)}}else{console.error("error: playAction -> "+actionId)}};UnitAnimatorComponent.prototype.playList=function(animSequence){this.animSequence=animSequence;this.playNextAnim()};UnitAnimatorComponent.prototype.onAnimatorPlayEnd=function(){this.playNextAnim();this.sPlayEnd.dispatch()};UnitAnimatorComponent.prototype.playNextAnim=function(){if(this.animSequence.length>0){var animId=this.animSequence.splice(0,1)[0];var animCfg=this.getAnimConfg(animId);if(animCfg){var loop=(animCfg.loop==0)?false:true;this.play(animCfg.action,loop)}}};UnitAnimatorComponent.prototype.play=function(anim,loop){if(anim!=""&&this.currentAnimName!=anim){this.currentAnimName=anim;this.currentAnimLoop=loop;this.__play(anim,loop);this.unit.unitData.currentAnimName=anim}};UnitAnimatorComponent.prototype.__play=function(nameOrIndex,loop,force,start,end,freshSkin){this._nameOrIndex=nameOrIndex;this._loop=loop;this._force=force;this._start=start;this._end=end;this._freshSkin=freshSkin;if(this.animator){this.animator.play(nameOrIndex,loop,force,start,end,freshSkin)}};UnitAnimatorComponent.prototype.playLast=function(){if(this.animator){this.animator.play(this._nameOrIndex,this._loop,this._force,this._start,this._end,this._freshSkin)}};UnitAnimatorComponent.prototype.getAnimConfg=function(animId){var cfg=Game.config.action.getConfig(animId);return cfg};return UnitAnimatorComponent}(Games.UnitComponent));Games.UnitAnimatorComponent=UnitAnimatorComponent})(Games||(Games={}));var Games;(function(Games){var TaskState=Games.BTree.TaskState;var UnitMoveComponent=(function(_super){__extends(UnitMoveComponent,_super);function UnitMoveComponent(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._pause=false;return _this}UnitMoveComponent.prototype.setSequenceMove=function(sequence){this.setMoveEnd();this.sequenceMove=sequence};UnitMoveComponent.prototype.onRender=function(){if(this.pause){return}if(this.sequenceMove){var state=this.sequenceMove.update();if(state==TaskState.Success){this.endMove()}}};UnitMoveComponent.prototype.setMoveEnd=function(){if(this.sequenceMove!=null){this.sequenceMove.onEnd();this.sequenceMove=null}};UnitMoveComponent.prototype.endMove=function(){this.sequenceMove=null};Object.defineProperty(UnitMoveComponent.prototype,"pause",{get:function(){return this._pause},set:function(val){val&&this.sequenceMove&&this.sequenceMove.unitAgent&&this.sequenceMove.unitAgent.stand();this._pause=val},enumerable:true,configurable:true});UnitMoveComponent.prototype.Pause=function(){this.pause=true};UnitMoveComponent.prototype.Resume=function(){this.pause=false};UnitMoveComponent.prototype.Stop=function(){this.setMoveEnd()};UnitMoveComponent.prototype.dispose=function(){this.setMoveEnd();_super.prototype.dispose.call(this)};return UnitMoveComponent}(Games.UnitComponent));Games.UnitMoveComponent=UnitMoveComponent})(Games||(Games={}));var Games;(function(Games){var EventHandler=(function(){function EventHandler(){}return EventHandler}());Games.EventHandler=EventHandler;var UnitViewCompoent=(function(_super){__extends(UnitViewCompoent,_super);function UnitViewCompoent(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.eventList=[];_this._direction=Games.DirtionType.Right;return _this}Object.defineProperty(UnitViewCompoent.prototype,"direction",{get:function(){return this._direction},set:function(value){this._direction=value},enumerable:true,configurable:true});UnitViewCompoent.prototype.size=function(w,h){};UnitViewCompoent.prototype.scale=function(scaleFactor){};Object.defineProperty(UnitViewCompoent.prototype,"x",{set:function(val){},enumerable:true,configurable:true});Object.defineProperty(UnitViewCompoent.prototype,"y",{set:function(val){},enumerable:true,configurable:true});UnitViewCompoent.prototype.pos=function(x,y){};UnitViewCompoent.prototype.setBounds=function(bounds){};Object.defineProperty(UnitViewCompoent.prototype,"hitArea",{set:function(bounds){},enumerable:true,configurable:true});UnitViewCompoent.prototype.addGuidUI=function(guideUI){};UnitViewCompoent.prototype.setTopHeadIcon=function(headIcon,sourceScale){if(sourceScale===void 0){sourceScale=0.26}};UnitViewCompoent.prototype.removeHeadIcon=function(){};UnitViewCompoent.prototype.openShadow=function(val){if(val===void 0){val=true}};UnitViewCompoent.prototype.loadAnim=function(texturePath,skeletonPath,caller,complete,error){};UnitViewCompoent.prototype.startAnimator=function(){};UnitViewCompoent.prototype.pauseAnimator=function(){};UnitViewCompoent.prototype.onRender=function(){};UnitViewCompoent.prototype.on=function(type,caller,listener,args){var eventHandler=new EventHandler();eventHandler.eventType=type;eventHandler.eventCaller=caller;eventHandler.eventListener=listener;eventHandler.eventArgs=args;this.eventList.push(eventHandler);this.displayObject&&this.displayObject.on(type,caller,listener,args)};UnitViewCompoent.prototype.off=function(type,caller,listener){for(var i=this.eventList.length-1;i>=0;i--){var evt=this.eventList[i];if(evt.eventType==type&&evt.eventCaller==caller&&evt.eventListener==listener){this.eventList.splice(i,1)}}this.displayObject&&this.displayObject.off(type,caller,listener)};UnitViewCompoent.prototype.hasListener=function(type){if(this.displayObject){return this.displayObject.hasListener(type)}return false};return UnitViewCompoent}(Games.UnitComponent));Games.UnitViewCompoent=UnitViewCompoent})(Games||(Games={}));var Games;(function(Games){var Sprite=laya.display.Sprite;var UnitSkeletonViewCompoent=(function(_super){__extends(UnitSkeletonViewCompoent,_super);function UnitSkeletonViewCompoent(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.enableHasSkeleton=true;return _this}UnitSkeletonViewCompoent.prototype.size=function(width,height){if(this.displayObject){this.displayObject.size(width,height)}};UnitSkeletonViewCompoent.prototype.scale=function(scaleFactor,speedMode){if(this.displayObject){this.displayObject.scale(scaleFactor,scaleFactor,speedMode)}};Object.defineProperty(UnitSkeletonViewCompoent.prototype,"x",{set:function(val){if(this.displayObject){this.displayObject.x=val}},enumerable:true,configurable:true});Object.defineProperty(UnitSkeletonViewCompoent.prototype,"y",{set:function(val){if(this.displayObject){this.displayObject.y=val}},enumerable:true,configurable:true});UnitSkeletonViewCompoent.prototype.pos=function(x,y){if(this.displayObject){this.displayObject.pos(x,y)}};Object.defineProperty(UnitSkeletonViewCompoent.prototype,"direction",{get:function(){return this.unit.unitData.info.direction},set:function(value){if(this.displayObject){if(value==Games.DirtionType.Right){this.displayObject.skewY=0;this.headIcon&&(this.headIcon.skewY=0)}else{this.displayObject.skewY=180;this.headIcon&&(this.headIcon.skewY=180)}}},enumerable:true,configurable:true});UnitSkeletonViewCompoent.prototype.setBounds=function(bounds){if(this.displayObject){this.displayObject.setBounds(bounds)}};Object.defineProperty(UnitSkeletonViewCompoent.prototype,"hitArea",{set:function(bounds){if(this.displayObject){this.displayObject.hitArea=bounds}},enumerable:true,configurable:true});UnitSkeletonViewCompoent.prototype.addGuidUI=function(guideUI){this.guideUI=guideUI;if(this.displayObject){this.displayObject.addChild(this.guideUI.displayObject)}};UnitSkeletonViewCompoent.prototype.setTopHeadIcon=function(headIcon,sourceScale){if(sourceScale===void 0){sourceScale=0.26}if(this.headIcon){this.headIcon.displayObject.removeSelf();this.headIcon=null}if(headIcon){this.headIcon=headIcon;var headIconScale=1/sourceScale;var dir=(this.direction==Games.DirtionType.Right)?1:-1;this.headIcon.skewY=(this.direction==Games.DirtionType.Right)?0:180;this.headIcon.setScale(headIconScale,headIconScale);var scaleBoundWidth=this.unit.unitData.boundWidth;var scaleBoundHeight=this.unit.unitData.boundHeight;this.headIcon.x=-(scaleBoundWidth/4+dir*headIcon.width*headIconScale/2);this.headIcon.y=-(scaleBoundHeight+headIcon.height)*headIconScale;if(this.displayObject){this.displayObject.addChild(headIcon.displayObject)}}};UnitSkeletonViewCompoent.prototype.removeHeadIcon=function(){if(this.headIcon){this.headIcon.dispose();this.headIcon=null}};UnitSkeletonViewCompoent.prototype.openShadow=function(val){if(val===void 0){val=true}if(this.shadow){this.shadow.visible=val}else{val&&this.createShadow()}};UnitSkeletonViewCompoent.prototype.createShadow=function(){this.shadow=fgui.Common.AvatarShadow.createInstance();var shadowScale=1/this.unit.unitData.scaleFactor;this.shadow.setScale(shadowScale,shadowScale);this.shadow.setXY(-this.shadow.sourceWidth*shadowScale/2,-this.shadow.sourceHeight*shadowScale/3);if(this.unit.unitView.displayObject){this.unit.unitView.displayObject.addChildAt(this.shadow.displayObject,0)}};UnitSkeletonViewCompoent.prototype.startAnimator=function(){this.getSkeleton()};UnitSkeletonViewCompoent.prototype.pauseAnimator=function(){this.recoverSkeleton()};UnitSkeletonViewCompoent.prototype.getSkeleton=function(){this.enableHasSkeleton=true;GameBoone.skeletonCache.requrestItem(this.texturePath,this.skeletonPath,this,this.onSkeletonComplete,this.onSkeletonError)};UnitSkeletonViewCompoent.prototype.recoverSkeleton=function(skeleton){this.enableHasSkeleton=false;if(!skeleton){skeleton=this.displayObject;this.displayObject=null}if(skeleton){if(!skeleton.destroyed){var animatorComp=this.unit.getComponent(Games.UnitAnimatorComponent);if(animatorComp){animatorComp.recycle()}this.eventList.forEach(function(value){skeleton.off(value.eventType,value.eventCaller,value.eventListener)});GameBoone.skeletonCache.recoverItem(this.texturePath,skeleton)}else{skeleton.destroy();console.log("骨骼动画已经销毁----"+this.texturePath)}}};UnitSkeletonViewCompoent.prototype.loadAnim=function(texturePath,skeletonPath,parent,caller,complete,error){this.texturePath=texturePath;this.skeletonPath=skeletonPath;this.unit.parent=parent;this.caller=caller;this.animLoadCompleteCallBack=complete;this.animLoadErrorCallBack=error};UnitSkeletonViewCompoent.prototype.onSkeletonComplete=function(skeleton){var _this=this;if(!this.enableHasSkeleton){this.recoverSkeleton(skeleton);this.displayObject=null;return}if(this.displayObject){this.recoverSkeleton()}this.displayObject=skeleton;if(!this.displayObject.destroyed){var animatorComp=this.unit.getComponent(Games.UnitAnimatorComponent);animatorComp.setAnimator(skeleton);animatorComp.playLast();this.displayObject.autoSize=true;this.size(this.unit.unitData.width,this.unit.unitData.height);this.scale(this.unit.unitData.scaleFactor);this.setBounds(this.unit.unitData.bounds);this.hitArea=this.unit.unitData.bounds;this.pos(this.unit.unitData.x,this.unit.unitData.y);this.direction=this.unit.unitData.info.direction;this.setShow();this.eventList.forEach(function(value){_this.displayObject.on(value.eventType,value.eventCaller,value.eventListener,value.eventArgs)});if(this.animLoadCompleteCallBack!=null){this.animLoadCompleteCallBack.apply(this.caller,[skeleton])}}};UnitSkeletonViewCompoent.prototype.debugDrawGraph=function(x,y,w,h){var sp=new Sprite();sp.graphics.drawRect(x,y,w,h,"#ff9900");sp.mouseEnabled=false;sp.size(w,h);this.displayObject.addChild(sp)};UnitSkeletonViewCompoent.prototype.setShow=function(){if(this.displayObject&&!this.displayObject.parent){if(this.unit.displayIndex>=0){this.unit.parent.addChildAt(this.displayObject,this.unit.displayIndex)}else{this.unit.parent.addChild(this.displayObject)}if(this.headIcon){this.displayObject.addChild(this.headIcon.displayObject)}if(this.shadow){this.displayObject.addChildAt(this.shadow.displayObject,0)}if(this.unit.talk.hasTalk&&this.talkBox){this.unit.parent.addChild(this.talkBox.displayObject)}if(this.guideUI){this.addGuidUI(this.guideUI)}}};UnitSkeletonViewCompoent.prototype.onSkeletonError=function(){if(this.animLoadErrorCallBack!=null){this.animLoadErrorCallBack.apply(null);this.animLoadErrorCallBack=null}};UnitSkeletonViewCompoent.prototype.setSlotSkinPath=function(slotName,slotTexturePath,useScale){var _this=this;if(useScale===void 0){useScale=true}var slotTexture;var onAssetsLoaded=function(result){slotTexture=Loader.getRes(slotTexturePath);_this.setSlotSkin(slotName,slotTexture,useScale)};Laya.loader.load([{url:slotTexturePath,type:Loader.IMAGE}],Handler.create(this,onAssetsLoaded));var slotBone=this.displayObject.getSlotByName(slotName)};UnitSkeletonViewCompoent.prototype.setSlotSkin=function(slotName,texture,useScale){if(useScale===void 0){useScale=true}var slotBone=this.displayObject.getSlotByName(slotName);texture.active();this.displayObject.setSlotSkin(slotName,texture);var scX=texture.width;var scY=texture.height;var scaleFactor=1;if(useScale){scaleFactor=1/Games.CAnimation.SCALE_DEFAULT}slotBone.currDisplayData.transform.scX=scX*scaleFactor;slotBone.currDisplayData.transform.scY=scY*scaleFactor};UnitSkeletonViewCompoent.prototype.resetSlotSkin=function(slotName){var slotBone=this.displayObject.getSlotByName(slotName);slotBone.currDisplayData.transform.scX=1;slotBone.currDisplayData.transform.scY=1;slotBone.currDisplayData.destory();this.displayObject.setSlotSkin(slotName,null)};UnitSkeletonViewCompoent.prototype.Show=function(){if(this.talkBox){this.talkBox.visible=true}if(this.headIcon){this.headIcon.visible=true}if(this.shadow){this.shadow.visible=true}if(this.guideUI){this.guideUI.visible=true}if(this.displayObject){this.displayObject.visible=true}};UnitSkeletonViewCompoent.prototype.Hide=function(){if(this.talkBox){this.talkBox.visible=false}if(this.headIcon){this.headIcon.visible=false}if(this.shadow){this.shadow.visible=false}if(this.guideUI){this.guideUI.visible=false}if(this.displayObject){this.displayObject.visible=false}};UnitSkeletonViewCompoent.prototype.dispose=function(){this.recoverSkeleton();if(this.shadow){this.shadow.displayObject.removeSelf();this.shadow=null}if(this.headIcon){this.headIcon.displayObject.removeSelf();this.headIcon=null}if(this.guideUI){this.guideUI.displayObject.removeSelf();this.guideUI=null}for(var i=0;i<this.eventList.length;i++){this.eventList[i].eventType=undefined;this.eventList[i].eventCaller=undefined;this.eventList[i].eventListener=undefined;this.eventList[i].eventArgs=undefined}this.eventList.length=0;this.caller=null;this.animLoadCompleteCallBack=null;this.animLoadErrorCallBack=null;_super.prototype.dispose.call(this)};return UnitSkeletonViewCompoent}(Games.UnitViewCompoent));Games.UnitSkeletonViewCompoent=UnitSkeletonViewCompoent})(Games||(Games={}));var Games;(function(Games){var UnitTalkComponent=(function(_super){__extends(UnitTalkComponent,_super);function UnitTalkComponent(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.DEFAULT_TALK_TIME=5;_this.isAllwaysShowTalk=false;_this.talkBoxOffsetY=0;_this.talkBoxOffsetX=0;_this.elapseTalkTime=0;_this.content="";_this._x=0;_this._y=0;_this._width=0;_this._height=0;_this._scaleFactor=1;_this._scaleX=1;_this._scaleY=1;_this._hasTalk=false;_this.isAutoPos=true;return _this}UnitTalkComponent.prototype.setScale=function(sx,sy){this._scaleX=sx;this._scaleY=sy;this._scaleFactor=this._scaleX;this.unit.unitView.talkBox&&this.unit.unitView.talkBox.setScale(sx,sy)};UnitTalkComponent.prototype.scaleAndOffset=function(scale,talkBoxOffsetY,talkBoxOffsetX){if(talkBoxOffsetY===void 0){talkBoxOffsetY=0}if(talkBoxOffsetX===void 0){talkBoxOffsetX=0}this.setScale(scale,scale)};Object.defineProperty(UnitTalkComponent.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:true,configurable:true});Object.defineProperty(UnitTalkComponent.prototype,"x",{get:function(){return this._x},set:function(val){if(this._x!=val){this._x=val;this.unit.unitView.talkBox&&(this.unit.unitView.talkBox.x=val)}},enumerable:true,configurable:true});Object.defineProperty(UnitTalkComponent.prototype,"y",{get:function(){return this._y},set:function(val){if(this._y!=val){this._y=val;this.unit.unitView.talkBox&&(this.unit.unitView.talkBox.y=val)}},enumerable:true,configurable:true});UnitTalkComponent.prototype.pos=function(x,y){this.x=x;this.y=y;this.unit.unitView.talkBox&&this.unit.unitView.talkBox.setXY(x,y)};Object.defineProperty(UnitTalkComponent.prototype,"width",{get:function(){if(this.unit.unitView.talkBox){return this.unit.unitView.talkBox.width}return 0},enumerable:true,configurable:true});Object.defineProperty(UnitTalkComponent.prototype,"height",{get:function(){if(this.unit.unitView.talkBox){return this.unit.unitView.talkBox.height}return 0},enumerable:true,configurable:true});Object.defineProperty(UnitTalkComponent.prototype,"boundHeight",{get:function(){var scaleRefUnit=this.unit.unitData.shrinkScaleRate;return this.height*scaleRefUnit*this._scaleFactor},enumerable:true,configurable:true});Object.defineProperty(UnitTalkComponent.prototype,"boundWidth",{get:function(){var scaleRefUnit=this.unit.unitData.shrinkScaleRate;return this.width*scaleRefUnit*this._scaleFactor},enumerable:true,configurable:true});UnitTalkComponent.prototype.onRender=function(){if(!this.isAllwaysShowTalk){this.elapseTalkTime+=Games.GameDriver.time.renderTime.deltaTime*1000;if(this.elapseTalkTime>this.DEFAULT_TALK_TIME*1000){this.elapseTalkTime=0;this.hideTalk()}}if(this.hasTalk){var dx=-this.boundWidth/2;var dy=-this.unit.unitData.boundHeight-this.boundHeight;this.pos(this.unit.unitData.x+dx,this.unit.unitData.y+dy);this.x+=this.talkBoxOffsetX;this.y+=this.talkBoxOffsetY}};UnitTalkComponent.prototype.setTalk=function(content,allwaysShow){this.unit&&this.unit.removeHeadIcon();this.isAllwaysShowTalk=allwaysShow;this.elapseTalkTime=0;this.hideTalk();this._hasTalk=true;this.content=content;this.unit.unitView.talkBox=Game.pool.talkBoxPool.requestItem();if(this.unit.unitView.talkBox){this.unit.unitView.talkBox.visible=true;this.unit.unitView.talkBox.setText(content);var talkBoxRefUnitScale=this.unit.unitData.shrinkScaleRate*this._scaleFactor;this.unit.unitView.talkBox.setScale(talkBoxRefUnitScale,talkBoxRefUnitScale)}if(this.unit.parent){this.unit.parent.addChild(this.unit.unitView.talkBox.displayObject)}var dx=-this.boundWidth/2;var dy=-this.unit.unitData.boundHeight-this.boundHeight;this.pos(this.unit.unitData.x+dx,this.unit.unitData.y+dy);this.x+=this.talkBoxOffsetX;this.y+=this.talkBoxOffsetY};UnitTalkComponent.prototype.hideTalk=function(){if(this.hasTalk){if(this.unit.unitView.talkBox){this.content="";this.unit.unitView.talkBox.setScale(1,1);this.unit.unitView.talkBox.setText("");this.unit.unitView.talkBox.displayObject.removeSelf();Game.pool.talkBoxPool.recoverItem(this.unit.unitView.talkBox)}this._hasTalk=false}};Object.defineProperty(UnitTalkComponent.prototype,"hasTalk",{get:function(){return this._hasTalk},enumerable:true,configurable:true});UnitTalkComponent.prototype.scaleTalkBox=function(scale,talkBoxOffsetX,talkBoxOffsetY){if(talkBoxOffsetX===void 0){talkBoxOffsetX=0}if(talkBoxOffsetY===void 0){talkBoxOffsetY=0}this.talkBoxOffsetX=talkBoxOffsetX;this.talkBoxOffsetY=talkBoxOffsetY;this.scaleAndOffset(scale)};UnitTalkComponent.prototype.dispose=function(){this.hideTalk();this.talkBoxOffsetX=0;this.talkBoxOffsetY=0;_super.prototype.dispose.call(this)};return UnitTalkComponent}(Games.UnitComponent));Games.UnitTalkComponent=UnitTalkComponent})(Games||(Games={}));var Games;(function(Games){var GameDriverSystem=(function(_super){__extends(GameDriverSystem,_super);function GameDriverSystem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.updateList=[];_this.renderList=[];_this.secondList=[];_this.isUpdateTick=true;_this.isRenderTick=true;_this.isSecondsTick=true;return _this}GameDriverSystem.prototype.start=function(){Games.GameDriver.registerDriver(this)};GameDriverSystem.prototype.stop=function(){Games.GameDriver.unregisterDriver(this)};GameDriverSystem.prototype.addComponent=function(driver){driver.isUpdateTick&&this.updateList.push(driver);driver.isRenderTick&&this.renderList.push(driver);driver.isSecondsTick&&this.secondList.push(driver)};GameDriverSystem.prototype.removeComponet=function(driver){var index=-1;if(driver.isUpdateTick){index=this.updateList.indexOf(driver);if(index!=-1){this.updateList.splice(index,1)}}if(driver.isRenderTick){index=this.renderList.indexOf(driver);if(index!=-1){this.renderList.splice(index,1)}}if(driver.isSecondsTick){index=this.secondList.indexOf(driver);if(index!=-1){this.secondList.splice(index,1)}}};GameDriverSystem.prototype.onUpdate=function(){this.updateList.forEach(function(value,index,array){value.onUpdate()})};GameDriverSystem.prototype.onRender=function(){this.renderList.forEach(function(value,index,array){value.onRender()})};GameDriverSystem.prototype.onSeconds=function(){this.secondList.forEach(function(value,index,array){value.onSeconds()})};return GameDriverSystem}(Games.ESystem));Games.GameDriverSystem=GameDriverSystem})(Games||(Games={}));var Games;(function(Games){var Scene=(function(_super){__extends(Scene,_super);function Scene(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.backgroundLayer=new Sprite();_this.contentBackLayer=new Sprite();_this.contentLayer=new Sprite();_this.contentFrontLayer=new Sprite();_this.uiLayer=new Sprite();_this.unitList=[];_this._width=0;_this._height=0;return _this}Object.defineProperty(Scene.prototype,"width",{get:function(){return this._width},set:function(val){this._width=val},enumerable:true,configurable:true});Object.defineProperty(Scene.prototype,"height",{get:function(){return this._height},set:function(val){this._height=val},enumerable:true,configurable:true});Scene.prototype.dispose=function(){_super.prototype.dispose.call(this);this.clearUnits()};Scene.prototype.addUnit=function(unit){this.unitList.push(unit)};Scene.prototype.getUnit=function(uid){return this.unitList.findOne(function(value){return value.unit.uid==uid})};Scene.prototype.clearUnits=function(isDestroy){if(isDestroy===void 0){isDestroy=true}if(isDestroy){for(var i=0;i<this.unitList.length;i++){this.unitList[i].dispose()}}this.unitList.length=0};Scene.prototype.removeUnit=function(uid){for(var i=0;i<this.unitList.length;i++){var unit=this.unitList[i];if(unit.unit.uid==uid){this.unitList.splice(i,1)[0].dispose()}}};Scene.prototype.getUnitById=function(id){throw"NoImplement"};Scene.prototype.onUpdate=function(){_super.prototype.onUpdate.call(this);for(var i=this.unitList.length-1;i>=0;i--){this.unitList[i].onUpdate()}};Scene.prototype.onRender=function(){_super.prototype.onRender.call(this);for(var i=this.unitList.length-1;i>=0;i--){this.unitList[i].onRender()}};Scene.prototype.onSeconds=function(){_super.prototype.onSeconds.call(this);for(var i=this.unitList.length-1;i>=0;i--){this.unitList[i].onSeconds()}};return Scene}(Games.EEntity));Games.Scene=Scene})(Games||(Games={}));var Games;(function(Games){var BuildScene=(function(_super){__extends(BuildScene,_super);function BuildScene(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.floorInfo=new Games.FloorInfo();_this.roomInfo=new Games.RoomInfo();_this.routeYList=[40,50];_this.isInitLoadRoomTexture=false;_this.point=new Point();_this.isUnBuildFloor=false;_this.isRoomInScreen=false;_this._roomTextureUrl="";return _this}BuildScene.creat=function(mainView){var buildScene=new BuildScene();(mainView===undefined)&&(mainView=fgui.Building.BuildRoom.createInstance());buildScene.setMainView(mainView);return buildScene};BuildScene.prototype.dispose=function(){_super.prototype.dispose.call(this);if(this.mainView){this.mainView.displayObject.removeSelf();this.mainView=null}if(this.processer){this.processer.dispose();this.processer=null}};BuildScene.prototype.setMainView=function(mainView){this.mainView=mainView};BuildScene.prototype.init=function(){this.mainView.m_buildSceneUI.m_btn_roomName.getChild("title").text=format(Games.TEXT.Floor,this.floorInfo.index);this.mainView.m_buildSceneUI.m_btn_buildFloor.getChild("Title").text=format(Games.TEXT.BuildFloor,this.floorInfo.index);this.mainView.m_buildSceneUI.m_failReason.visible=false;this.mainView.m_buildSceneUI.m_btn_buildRoom.visible=false;this.contentBackLayer=this.mainView.m_buildScene.m_avatarContainer0.displayObject;this.contentFrontLayer=this.mainView.m_buildScene.m_avatarContainer1.displayObject};Object.defineProperty(BuildScene.prototype,"roomTextureUrl",{get:function(){return this._roomTextureUrl},set:function(url){if(this._roomTextureUrl!=url){this._roomTextureUrl=url;if(this.isRoomInScreen){this.isInitLoadRoomTexture=false;this.tryLoadBuildTexture()}}},enumerable:true,configurable:true});BuildScene.prototype.tryLoadBuildTexture=function(){if(this.roomTextureUrl!=""){if(!this.isInitLoadRoomTexture){console.log("load floor "+this.floorInfo.index+" texture= "+this.roomTextureUrl);this.isInitLoadRoomTexture=true;this.mainView.m_buildScene.m_loader.url=this.roomTextureUrl}}};BuildScene.prototype.reLoadBuildTexture=function(url){this.isInitLoadRoomTexture=false;this.roomTextureUrl=url;this.tryLoadBuildTexture()};Object.defineProperty(BuildScene.prototype,"isBuilded",{get:function(){return this.roomInfo.id!=0},enumerable:true,configurable:true});Object.defineProperty(BuildScene.prototype,"roomWidth",{get:function(){return this.mainView.m_buildScene.width},enumerable:true,configurable:true});Object.defineProperty(BuildScene.prototype,"roomHeight",{get:function(){return this.mainView.m_buildScene.height},enumerable:true,configurable:true});Object.defineProperty(BuildScene.prototype,"width",{get:function(){return this._width},set:function(val){this._width=val;this.mainView.width=val},enumerable:true,configurable:true});Object.defineProperty(BuildScene.prototype,"height",{get:function(){return this._height},set:function(val){this._height=val;this.mainView.height=val},enumerable:true,configurable:true});BuildScene.prototype.setXY=function(xv,yv){this.mainView&&this.mainView.setXY(xv,yv)};BuildScene.prototype.setScale=function(sx,sy){this.mainView&&this.mainView.setScale(sx,sy)};BuildScene.prototype.buildFloor=function(){this.roomTextureUrl=Res.getRoom("expansion");this.isUnBuildFloor=true;this.setSceneSizeForState()};BuildScene.prototype.waitBuindRoom=function(){this.mainView.m_buildSceneUI.m_btn_buildFloor.visible=false;this.mainView.m_buildSceneUI.m_btn_buildRoom.visible=true;this.isUnBuildFloor=false;this.roomTextureUrl=Res.getRoom("construct")};BuildScene.prototype.onBuildComplete=function(info){this.setInfo(info);this.mainView.m_buildSceneUI.m_btn_buildRoom.visible=false;this.mainView.m_buildSceneUI.m_failReason.visible=false;this.installRoomProcesser()};BuildScene.prototype.setInfo=function(info){this.roomInfo=info;this.floorInfo.index=info.floor;this.roomInfo.sceneWidth=this.mainView.m_buildScene.width;this.roomInfo.sceneHeight=this.mainView.m_buildScene.height;var cfg=Game.config.buildingLevel.getConfig(info.id);this.mainView.m_buildSceneUI.m_btn_roomName.getChild("title").text=info.name+" "+format(Games.TEXT.Lv,cfg.level);this.roomTextureUrl=Res.getRoom(info.type);this.mainView.m_buildSceneUI.m_btn_buildFloor.visible=false;this.mainView.m_buildSceneUI.m_btn_buildRoom.visible=false;this.mainView.m_buildScene.m_loader.touchable=false;this.mainView.m_buildScene.m_canvasContainer.touchable=false;this.isUnBuildFloor=false};BuildScene.prototype.updateLoaderTexture=function(){this.mainView.m_buildScene.m_loader.url=this.roomTextureUrl};BuildScene.prototype.installRoomProcesser=function(){var processerData=Games.BuildingProcessMgr.get(this.roomInfo.type);if(processerData){this.processer=new processerData.newClass();this.processer.init(this)}};BuildScene.prototype.setRoomFrameVisible=function(val){this.mainView.m_buildSceneUI.m_frame.visible=val;this.mainView.m_buildSceneUI.m_frameTitleBg.visible=val;this.mainView.m_buildSceneUI.m_btn_roomName.visible=val;this.mainView.m_buildScene.m_bg.visible=val;Game.event.dispatch(GameEventKey.GameEventKey_SwitchUIRoom,this.roomInfo.type);if(!val){this.mainView.visible=true;this.tryLoadBuildTexture();this.setSceneSizeForSource()}else{this.setSceneSizeForState()}};BuildScene.prototype.showFailBuildFloorReason=function(reason){this.mainView.m_buildSceneUI.m_failReason.visible=true;this.mainView.m_buildSceneUI.m_btn_buildFloor.visible=false;this.mainView.m_buildSceneUI.m_buildFloorInfo.text=reason};BuildScene.prototype.hideFailBuildFloorReason=function(){this.mainView.m_buildSceneUI.m_failReason.visible=false;this.mainView.m_buildSceneUI.m_btn_buildFloor.visible=this.isUnBuildFloor};BuildScene.prototype.showBuildEffect=function(){if(!this.buildEffect){this.buildEffect=fgui.Fx.Effect_build02.createInstance()}this.mainView.m_buildSceneUI.m_effectContainer.addChild(this.buildEffect);this.buildEffect.setPivot(0,0);var scale=this.width/this.mainView.sourceWidth;this.buildEffect.setScale(scale,scale);var animTrans=this.buildEffect.getTransition("t000");if(animTrans){animTrans.play();this.buildEffect.visible=true}this.mouseDisableBg=fgui.System.BGModel.createInstance();this.mouseDisableBg.opaque=true;this.mouseDisableBg.setSize(ScreenSetting.screenWidth,ScreenSetting.screenHeight);this.mouseDisableBg.alpha=0.1;Laya.stage.addChild(this.mouseDisableBg.displayObject)};BuildScene.prototype.clearBuildEffect=function(){if(this.buildEffect){var animTrans=this.buildEffect.getTransition("t000");if(animTrans){animTrans.stop();this.buildEffect.visible=false;this.buildEffect.removeFromParent()}}if(this.mouseDisableBg){this.mouseDisableBg.displayObject.removeSelf();this.mouseDisableBg=null}};BuildScene.prototype.setRoomAvatar=function(unitData){var unit=Game.creator.creatEUnit(unitData.info);var routeY=this.routeYList[Random.range(0,this.routeYList.length)];var container;if(routeY==this.routeYList[0]){container=this.mainView.m_buildScene.m_avatarContainer1}else{container=this.mainView.m_buildScene.m_avatarContainer0}unit.pos(unitData.x,unitData.y);unit.openShadow();this.addUnit(unit);unit.setRoomInfo(this.roomInfo);unit.showOn(container)};BuildScene.prototype.avatarEnter=function(avatarInfo,direction,onEvent,route){var unitCtrl=Game.creator.requestUnit(avatarInfo);Game.moduleModel.building.addAvatar(this.roomInfo.type,unitCtrl.unitModel);unitCtrl.direction=direction;var routeY=this.routeYList[Random.range(0,this.routeYList.length)];var container;if(routeY==this.routeYList[0]){container=this.mainView.m_buildScene.m_avatarContainer1}else{container=this.mainView.m_buildScene.m_avatarContainer0}if(route){if(route==Games.DirtionType.Down){routeY=this.routeYList[0];container=this.mainView.m_buildScene.m_avatarContainer1}else{routeY=this.routeYList[1];container=this.mainView.m_buildScene.m_avatarContainer0}}this.addAvatar(unitCtrl,container);unitCtrl.y=this.roomHeight-routeY;if(direction==Games.DirtionType.Left){unitCtrl.pos(this.roomWidth+100,unitCtrl.y)}else{unitCtrl.pos(-100,unitCtrl.y)}unitCtrl.openShadow();unitCtrl.enter(onEvent)};BuildScene.prototype.onAvatarEnter=function(avatarUid){};BuildScene.prototype.avatarLeave=function(avatarUid,onEvent,isRun){var avatar=this.getAvatar(avatarUid);if(avatar){avatar.leave(onEvent,isRun)}};BuildScene.prototype.onAvatarLeave=function(avatarUid){Game.moduleModel.building.removeAvatar(this.roomInfo.type,avatarUid);for(var i=0;i<this.unitList.length;i++){var cUnit=this.unitList[i];if(cUnit.unitModel.info.uid==avatarUid){if(Games.AvatarManager.hasRoomCUnit(avatarUid)){cUnit.endEvent(false);cUnit.visible=false}else{console.error("艺人销毁---id="+cUnit.unitModel.info.id+" roomType="+this.roomInfo.type);cUnit.dispose()}this.unitList.splice(i,1);break}}};BuildScene.prototype.addAvatar=function(cUnit,container){_super.prototype.addUnit.call(this,cUnit);cUnit.setRoomInfo(this.roomInfo);cUnit.showOn(container);Game.moduleModel.building.addAvatar(this.roomInfo.type,cUnit.unitModel);Game.stageManager.homeSceneSet.unitViewSystem.addComponent(cUnit.unit.getComponent(Games.UnitSkeletonViewCompoent));Game.stageManager.homeSceneSet.unitMoveSystem.addComponent(cUnit.unit.getComponent(Games.UnitMoveComponent));Game.stageManager.homeSceneSet.unitTalkSystem.addComponent(cUnit.unit.getComponent(Games.UnitTalkComponent))};BuildScene.prototype.getAvatar=function(avatarUid){return this.unitList.findOne(function(value){return value.unitModel.info.uid==avatarUid})};BuildScene.prototype.getAvatarById=function(id){return this.unitList.findOne(function(value){return value.unitModel.info.id==id})};BuildScene.prototype.removeAvatar=function(cUnit){var index=this.unitList.findIndex(function(value){return value.unitModel.info.uid==cUnit.unitModel.info.uid});if(index!=-1){Game.moduleModel.building.removeAvatar(this.roomInfo.type,cUnit.unitModel.info.uid);this.unitList.splice(index,1)[0].dispose()}};BuildScene.prototype.clearAllAvatar=function(){for(var i=this.unitList.length-1;i>=0;i--){this.removeAvatar(this.unitList[i])}this.unitList.length=0};BuildScene.prototype.forEachAvatar=function(func){this.unitList.forEach(function(value,index,array){if(func){func(value)}})};BuildScene.prototype.executeLeaveRoomForEach=function(onEvent,exceptAvatarId){if(onEvent){this.unitList.forEach(function(value,index,array){if(value.unitModel.info.type==Games.AvatarType.Actor){if(value.unitModel.info.id!=exceptAvatarId){value.endEvent(false);value.leave(onEvent)}}})}};BuildScene.prototype.executeActionEvents=function(avatarUid,eventList){var avatar=this.unitList.findOne(function(value){return value.unitModel.info.uid==avatarUid});if(avatar){avatar.executeActionEvents(eventList)}};BuildScene.prototype.onRoomPauseEvent=function(){this.unitList.forEach(function(value,index,array){if(value.unitModel.info.type==Games.AvatarType.Actor){if(!Games.AvatarManager.isActorOnVisit(value.unitModel.info.id)){value.isPause=true}}})};BuildScene.prototype.onRoomResumeEvent=function(){this.unitList.forEach(function(value,index,array){if(value.unitModel.info.type==Games.AvatarType.Actor){if(!Games.AvatarManager.isActorOnVisit(value.unitModel.info.id)){value.isPause=false}}})};BuildScene.prototype.onRoomInScreen=function(){this.isRoomInScreen=true;this.tryLoadBuildTexture();this.unitList.forEach(function(value,index,array){value.inScreen()})};BuildScene.prototype.onRoomOutScreen=function(){this.isRoomInScreen=false;this.unitList.forEach(function(value,index,array){value.outScreen()})};BuildScene.prototype.setSceneSizeForState=function(){var scale=ScreenSetting.screenWidth/this.mainView.sourceWidth;this.mainView.m_buildSceneUI.width=ScreenSetting.screenWidth;this.mainView.m_buildSceneUI.height=this.mainView.sourceHeight*scale;this.mainView.m_buildScene.setScale(scale,scale);this.width=this.mainView.m_buildSceneUI.width;this.height=this.mainView.m_buildSceneUI.height;this.roomInfo.sceneWidth=this.mainView.m_buildScene.width;this.roomInfo.sceneHeight=this.mainView.m_buildScene.height};BuildScene.prototype.setSceneSizeForSource=function(){this.mainView.m_buildSceneUI.width=this.mainView.sourceWidth;this.mainView.m_buildSceneUI.height=this.mainView.sourceHeight;var scale=this.mainView.sourceWidth/this.mainView.m_buildScene.sourceWidth;this.mainView.m_buildScene.setScale(scale,scale);this.width=this.mainView.sourceWidth;this.height=this.mainView.sourceHeight;this.roomInfo.sceneWidth=this.mainView.m_buildScene.width;this.roomInfo.sceneHeight=this.mainView.m_buildScene.height};return BuildScene}(Games.Scene));Games.BuildScene=BuildScene})(Games||(Games={}));var Games;(function(Games){var HomeStage=(function(_super){__extends(HomeStage,_super);function HomeStage(){var _this=_super.call(this)||this;_this.sceneList=[];_this.unitViewSystem=new Games.UnitViewSystem();_this.unitMoveSystem=new Games.UnitMoveSystem();_this.unitTalkSystem=new Games.UnitTalkSystem();_this.isInited=false;_this.point=new Point();_this.isBuildListMouseDown=false;_this.isUpdateTick=true;_this.isRenderTick=true;return _this}HomeStage.prototype.addScene=function(scene){this.sceneList.push(scene)};HomeStage.prototype.init=function(mainView){this.mainView=mainView;Games.AvatarManager.init();Games.BuildingProcessMgr.install();this.isInited=true;Game.protoOkEvent.add(ProtoEventKey.CinemaBuild_ExtendFloor,this.onServerBuildFloor,this);Game.protoOkEvent.add(ProtoEventKey.CinemaBuild_BuildRoom,this.onServerBuildRoom,this);Game.protoOkEvent.add(ProtoEventKey.CinemaBuild_UpgradeRoom,this.onServerRoomUpgrade,this);Game.event.add(GameEventKey.GameEventKey_ScrollMainRoom,this.onScrollToRoom,this);Game.event.add(GameEventKey.GameEventKey_EnabledScrollMain,this.onEnabledScrollMain,this);Game.event.add(GameEventKey.GameEventKey_StartReception,this.onStartReception,this);Game.protoOkEvent.add(ProtoEventKey.city_HoldCity,this.setBuildFloorStatus,this);Game.event.add(GameEventKey.GameEventKey_PlayerLevelUp,this.setBuildFloorStatus,this);Game.event.add(GameEventKey.GameEventKey_SyncRoomInfo,this.reSyncRoomInfo,this);Games.AvatarManager.sAvatarMoveEnd.add(this.onAvatarMoveEnd,this);this.mainView.m_BuildList.touchable=true;this.mainView.m_BuildList.lineGap=-5;this.mainView.m_BuildList.ensureBoundsCorrect();this.mainView.m_BuildList.scrollItemToViewOnClick=false;this.mainView.m_main_bottom.visible=true;this.mainView.m_BuildList.addChild(this.mainView.m_main_bottom);this.mainView.m_main_top.visible=true;this.mainView.m_BuildList.addChildAt(this.mainView.m_main_top,0);this.syncServerBuildRoomInfo();this.mainView.m_BuildList.on(laya.events.Event.MOUSE_DOWN,this,this.onBuildListMouseDown);this.mainView.m_BuildList.on(fairygui.Events.SCROLL,this,this.onBuildListScroll);this.mainView.m_BuildList.on(fairygui.Events.SCROLL_END,this,this.onBuildListScrollEnd);Laya.stage.on(laya.events.Event.MOUSE_UP,this,this.stageMouseUp)};HomeStage.prototype.onWindowResize=function(){console.log("HomeStage -- onWindowResize()");var _loop_1=function(i){var item=this_1.mainView.m_BuildList.getChildAt(i);if(item.m_buildScene){var buildRoom_1=item;var buildScene=this_1.sceneList.findOne(function(value){return value.mainView==buildRoom_1});if(buildScene){buildScene.setSceneSizeForState()}}else{item.width=ScreenSetting.screenWidth;var scale=item.width/item.sourceWidth;item.height=item.sourceHeight*scale}};var this_1=this;for(var i=0;i<this.mainView.m_BuildList.numChildren;i++){_loop_1(i)}};HomeStage.prototype.onBuildListMouseDown=function(){this.isBuildListMouseDown=true};HomeStage.prototype.stageMouseUp=function(){var _this=this;if(this.isBuildListMouseDown&&Game.moduleModel.building.isBuildListScrolling){Game.moduleModel.building.isBuildListScrolling=false;setTimeout(function(){if(!Game.moduleModel.building.isBuildListScrolling){_this.onScrollEnd()}},100)}this.isBuildListMouseDown=false};HomeStage.prototype.onBuildListScroll=function(){if(!Game.moduleModel.building.isBuildListScrolling&&this.isBuildListMouseDown){this.onScroll()}Game.moduleModel.building.isBuildListScrolling=true};HomeStage.prototype.onBuildListScrollEnd=function(){var _this=this;setTimeout(function(){Game.moduleModel.building.isBuildListScrolling=false;_this.onScrollEnd()},500)};HomeStage.prototype.onScroll=function(){Game.moduleModel.building.sScrollStart.dispatch()};HomeStage.prototype.onScrollEnd=function(){Game.moduleModel.building.sScrollEnd.dispatch()};HomeStage.prototype.reSyncRoomInfo=function(delta){console.log("reSyncRoomInfo -- delta roomInfo:"+delta.length);delta.length&&this.mainView.m_BuildList.numChildren>2&&this.mainView.m_BuildList.removeChildToPoolAt(1);for(var i=0;i<delta.length;i++){var room=this.creatBuildRoom();room.onBuildComplete(delta[i])}if(User.info.buildRoomInfo.length<Game.moduleModel.building.floorIndex){this.creatBuildFloor(Game.moduleModel.building.floorIndex,true)}else{this.showNextFloor()}};HomeStage.prototype.syncServerBuildRoomInfo=function(){if(User.info.buildRoomInfo){this.setBuildRoomInfo()}else{User.sGameInfoUpdate.addOnce(this.setBuildRoomInfo,this)}};HomeStage.prototype.setBuildRoomInfo=function(){var roomInfoList=Game.moduleModel.building.getInfoList();for(var i=0;i<roomInfoList.length;i++){var room=this.creatBuildRoom();room.onBuildComplete(roomInfoList[i])}if(User.info.buildRoomInfo.length<Game.moduleModel.building.floorIndex){this.creatBuildFloor(Game.moduleModel.building.floorIndex,true)}else{this.showNextFloor()}Games.AvatarManager.allocAvatarListToRoom()};HomeStage.prototype.creatBuildFloor=function(floor,isBuildFloor){if(isBuildFloor===void 0){isBuildFloor=false}var roomMainView=this.mainView.m_BuildList.addItemFromPool();var room=Games.BuildScene.creat(roomMainView);room.floorInfo.index=floor;room.init();if(isBuildFloor){room.waitBuindRoom();room.mainView.m_buildSceneUI.m_btn_buildRoom.onClick(this,this.onBuildRoomClick)}else{room.buildFloor();room.mainView.m_buildSceneUI.m_btn_buildFloor.onClick(this,this.onBuildFloorClick,[room])}this.mainView.m_BuildList.setChildIndex(room.mainView,1);this.mainView.m_BuildList.scrollToView(1,true,true);this.currentFloorRoom=room;this.addScene(room);return room};HomeStage.prototype.creatBuildRoom=function(){var roomMainView=this.mainView.m_BuildList.addItemFromPool();var room=Games.BuildScene.creat(roomMainView);room.mainView.m_buildSceneUI.m_btn_roomName.onClick(this,this.onRoomTitleClick,[room]);this.mainView.m_BuildList.setChildIndex(room.mainView,1);this.mainView.m_BuildList.scrollToView(1,true,true);this.addScene(room);return room};HomeStage.prototype.showNextFloor=function(){if(Game.moduleModel.building.isTopFloor){return null}var room=this.creatBuildFloor(Game.moduleModel.building.floorIndex+1,false);this.setBuildFloorStatus();return room};HomeStage.prototype.setBuildFloorStatus=function(){if(Game.moduleModel.building.isTopFloor){return}if(Game.moduleModel.building.hasBuildFloorWithoutRoom(Game.moduleModel.building.floorIndex)){return}var result=Game.moduleModel.building.checkBuildFloorCityCondition();if(!result.result){this.currentFloorRoom.showFailBuildFloorReason(result.reason)}else{this.currentFloorRoom.hideFailBuildFloorReason()}};HomeStage.prototype.onBuildFloorClick=function(room){if(Game.moduleModel.building.checkBuildFloorCondition(true).result){var self_1={expandFloorCallBack:function(){Game.protosender.CinemaBuild.ExtendFloor(room.floorInfo.index)}};if(Game.moduleModel.building.isFreeFloor){Game.protosender.CinemaBuild.ExtendFloor(room.floorInfo.index)}else{var floorCfg=Game.config.floor.getConfig(room.floorInfo.index);Game.system.confirmTextIcon([floorCfg.cost],Games.TEXT.BuildTitle,format(Games.TEXT.BuildFloorAlert,room.floorInfo.index),self_1.expandFloorCallBack,self_1)}}};HomeStage.prototype.onServerBuildFloor=function(msg){var _this=this;this.currentFloorRoom.showBuildEffect();this.setRoomTouchable(false);Game.sound.playSound(SoundKey.MM06_Building);setTimeout(function(){_this.currentFloorRoom.clearBuildEffect();_this.setRoomTouchable(true);User.info.extendFloor=Game.moduleModel.building.floorIndex;_this.currentFloorRoom.waitBuindRoom();_this.currentFloorRoom.updateLoaderTexture();_this.currentFloorRoom.mainView.m_buildSceneUI.m_btn_buildRoom.onClick(_this,_this.onBuildRoomClick);Game.guide.finishFristStep(Game.moduleModel.building.floorIndex)},3000)};HomeStage.prototype.onServerBuildRoom=function(msg){var _this=this;this.setRoomTouchable(false);this.currentFloorRoom.showBuildEffect();Games.Static.Instance.onUserorbit("building",msg.floor+"&"+msg.roomId,"unlock");setTimeout(function(){_this.setRoomTouchable(true);_this.currentFloorRoom.clearBuildEffect();var roomInfo=Game.moduleModel.building.getRoomInfo(msg.roomId);_this.currentFloorRoom.onBuildComplete(roomInfo);_this.currentFloorRoom.updateLoaderTexture();_this.currentFloorRoom.mainView.m_buildSceneUI.m_btn_roomName.onClick(_this,_this.onRoomTitleClick,[_this.currentFloorRoom]);_this.showNextFloor();Games.AvatarManager.startTimeAlloc();Game.moduleModel.task.clientUpdateMainTaskProgress(Games.MainTaskRequireType.RequireType_1_MakeBuild);Game.story.triggerPlayStoryByType(Games.StoryTriggerType.FinishBuild,roomInfo.type,Handler.create(null,function(){Game.guide.dealyCheckGuide()}),true);Game.moduleModel.func.checkBuildLevel()},3000)};HomeStage.prototype.onServerRoomUpgrade=function(msg){var room=this.getRoomById(msg.roomId);if(room){var roomInfo=Game.moduleModel.building.getRoomInfo(msg.roomId);room.setInfo(roomInfo);Game.moduleModel.task.clientUpdateMainTaskProgress(Games.MainTaskRequireType.RequireType_2_UpgradeBuild);if(roomInfo.type==Games.RoomType.Depot){Games.Static.Instance.onUserorbit("warehouse","warehouseUpgrade","upgrade")}}};HomeStage.prototype.onBuildRoomClick=function(){Game.menu.open(Games.MenuId.BuildRoomList,Game.moduleModel.building.floorIndex)};HomeStage.prototype.onRoomTitleClick=function(room){if(room.isBuilded){Game.moduleModel.building.selectRoomType=room.roomInfo.type;Game.menu.open(Games.MenuId.BuildRoomUpgrade,room.roomInfo)}};HomeStage.prototype.onStartReception=function(){var roomType=Games.RoomType.Reception;var room=this.getRoomByType(roomType);room.processer.startReception()};HomeStage.prototype.onScrollToRoom=function(roomType,anim){this.scrollRoomTypeTop(roomType,anim)};HomeStage.prototype.onEnabledScrollMain=function(enable){this.setRoomTouchable(enable)};HomeStage.prototype.scrollRoomTypeTop=function(roomType,anim){var index=this.getRoomIndexByType(roomType);if(index<0||index>this.mainView.m_BuildList.numChildren-1){return}this.mainView.m_BuildList.scrollToView(index,anim,true)};HomeStage.prototype.setRoomTouchable=function(val){this.mainView.m_BuildList.touchable=val};HomeStage.prototype.executeActionEvents=function(roomType,avatarUid,eventList){var room=this.getRoomByType(roomType);if(room){room.executeActionEvents(avatarUid,eventList)}};HomeStage.prototype.startEnterRoom=function(roomType,info,direction,onEvent){var room=this.getRoomByType(roomType);if(room){room.avatarEnter(info,direction,onEvent)}};HomeStage.prototype.onEnterRoom=function(roomType,avatarUid){var room=this.getRoomByType(roomType);if(room){room.onAvatarEnter(avatarUid)}};HomeStage.prototype.startLeaveRoom=function(roomType,avatarUid,onEvent,isRun){var room=this.getRoomByType(roomType);if(room){room.avatarLeave(avatarUid,onEvent,isRun)}};HomeStage.prototype.onLeaveRoom=function(roomType,avatarUid){var room=this.getRoomByType(roomType);if(room){room.onAvatarLeave(avatarUid)}};HomeStage.prototype.getRoomByType=function(roomType){return this.sceneList.findOne(function(room){return room.roomInfo.type==roomType})};HomeStage.prototype.getRoomIndexByType=function(roomType){var room=this.sceneList.findOne(function(value){return value.roomInfo&&value.roomInfo.isBuilded&&value.roomInfo.type==roomType});var num=this.mainView.m_BuildList.numChildren;for(var i=0;i<num;i++){var mainView=this.mainView.m_BuildList.getChildAt(i);if(room.mainView===mainView){return i}}return -1};HomeStage.prototype.getRoomById=function(roomId){return this.sceneList.findOne(function(room){return room.roomInfo.id==roomId})};HomeStage.prototype.addRoomAt=function(room,index){if(index<0){index=0}if(index>this.mainView.m_BuildList.numChildren-1){index=this.mainView.m_BuildList.numChildren-1}this.mainView.m_BuildList.addChildAt(room.mainView,index)};HomeStage.prototype.getAvatar=function(roomType,avatarUid){var room=this.getRoomByType(roomType);if(room){return room.getAvatar(avatarUid)}return null};HomeStage.prototype.getAvatarById=function(roomType,avatarId){var room=this.getRoomByType(roomType);if(room){return room.getAvatarById(avatarId)}return null};HomeStage.prototype.onAvatarMoveEnd=function(eventData){var unitModel=Game.moduleModel.building.getAvatar(eventData.roomType,eventData.avatarUid);if(unitModel){this.fitAvatarGap(unitModel,eventData)}};HomeStage.prototype.fitAvatarGap=function(target,eventData){var _this=this;var safeLoopCount=70;var loopCount=0;var stepPointX=0;var step=10;var stepDir=(target.info.direction==Games.DirtionType.Right)?1:-1;var cUnit=this.getAvatar(target.roomInfo.type,target.info.uid);if(cUnit==null||cUnit.isDisposed){return}while(true){var isOnlimit=this.checkAvatarOnLimitDistance(target,stepPointX);if(!isOnlimit){if(stepPointX!=0){cUnit.moveTo(target.x+stepPointX,false,Handler.create(this,function(){stepPointX=0;var reCheckOnLimit=_this.checkAvatarOnLimitDistance(target,stepPointX);if(reCheckOnLimit){Math.random()>0.5&&cUnit.reverseDirection();_this.fitAvatarGap(target,eventData)}else{if(eventData.isEnterRoom){Games.AvatarManager.sAvatarEnter.dispatch(eventData)}else{cUnit.nextEvent()}}},null,true))}else{if(eventData.isEnterRoom){Games.AvatarManager.sAvatarEnter.dispatch(eventData)}else{cUnit.nextEvent()}}break}else{var distance=target.x+stepPointX;var sceneWidth=target.roomInfo.sceneWidth;if(distance>=sceneWidth-target.STAGE_OFFSET_ENTER){if(stepDir==1){stepDir*=-1}}if(distance<=target.STAGE_OFFSET_ENTER){if(stepDir==-1){stepDir*=-1}}stepPointX+=stepDir*step;loopCount++;if(loopCount>safeLoopCount){if(eventData.isEnterRoom){Games.AvatarManager.sAvatarEnter.dispatch(eventData)}else{cUnit.nextEvent()}loopCount=0;break}}}};HomeStage.prototype.checkAvatarOnLimitDistance=function(target,stepPointX){var isOnlimit=false;var unitList=Game.moduleModel.building.getRoomAvatarList(target.roomInfo.type);unitList.forEach(function(value,index,array){if(value.info.uid!=target.info.uid){var dx=Math.abs(target.x+stepPointX-value.x);if(dx<=Games.AvatarManager.MIN_AVATAR_GAP){isOnlimit=true}}});return isOnlimit};HomeStage.prototype.start=function(){Game.driverSystem.addComponent(this);Game.driverSystem.addComponent(this.unitViewSystem);Game.driverSystem.addComponent(this.unitMoveSystem);Game.driverSystem.addComponent(this.unitTalkSystem)};HomeStage.prototype.stop=function(){Game.driverSystem.removeComponet(this);Game.driverSystem.removeComponet(this.unitViewSystem);Game.driverSystem.removeComponet(this.unitMoveSystem);Game.driverSystem.removeComponet(this.unitTalkSystem)};HomeStage.prototype.onUpdate=function(){if(!this.isInited){return}var count=this.sceneList.length;for(var i=0;i<count;i++){this.sceneList[i].onUpdate()}var isOpenHomeWindow=Game.menu.isOpened(Games.MenuId.Home);var isScolling=Game.moduleModel.building.isBuildListScrolling;var sceneNum=this.sceneList.length;for(var i=0;i<sceneNum;i++){var scene=this.sceneList[i];if(isOpenHomeWindow){scene.onRoomResumeEvent()}else{scene.onRoomPauseEvent()}this.point.x=0;this.point.y=0;var globalPos=scene.mainView.displayObject.localToGlobal(this.point);if(globalPos.y+scene.mainView.height<=0||globalPos.y>=Laya.stage.height){scene.mainView.visible=false;scene.onRoomOutScreen()}else{scene.mainView.visible=true;scene.onRoomInScreen()}}};HomeStage.prototype.onRender=function(){var count=this.sceneList.length;for(var i=0;i<count;i++){this.sceneList[i].onRender()}};HomeStage.prototype.onSeconds=function(){var count=this.sceneList.length;for(var i=0;i<count;i++){this.sceneList[i].onSeconds()}};HomeStage.prototype.getRoomAndScrollTop=function(roomType,scrollIndexOffset){if(scrollIndexOffset===void 0){scrollIndexOffset=0}var index=this.getRoomIndexByType(roomType);if(index<0||index>this.mainView.m_BuildList.numChildren-1){return}var finalIndex=Math.max(0,index-scrollIndexOffset);this.mainView.m_BuildList.scrollToView(finalIndex,false,true);return this.sceneList.findOne(function(value){return value.roomInfo&&value.roomInfo.isBuilded&&value.roomInfo.type==roomType})};return HomeStage}(Games.ESystem));Games.HomeStage=HomeStage})(Games||(Games={}));var Games;(function(Games){var OscarScene=(function(_super){__extends(OscarScene,_super);function OscarScene(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(OscarScene.prototype,"mainView",{get:function(){if(!this._mainView){this._mainView=fgui.PfSkin.OscarAnim.createInstance();this._mainView.mainScene=this}return this._mainView},enumerable:true,configurable:true});return OscarScene}(Games.Scene));Games.OscarScene=OscarScene})(Games||(Games={}));var Games;(function(Games){var OscarStage=(function(_super){__extends(OscarStage,_super);function OscarStage(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._isActive=false;_this.isUpdateTick=true;_this.isRenderTick=true;return _this}Object.defineProperty(OscarStage.prototype,"mainScene",{get:function(){if(!this._mainScene){this._mainScene=new Games.OscarScene()}return this._mainScene},enumerable:true,configurable:true});Object.defineProperty(OscarStage.prototype,"isActive",{get:function(){return this._isActive},set:function(val){this._isActive=val;!val&&this.disposeMainScene()},enumerable:true,configurable:true});OscarStage.prototype.disposeMainScene=function(){if(this._mainScene){this._mainScene.dispose();this._mainScene=null}};OscarStage.prototype.start=function(){Game.driverSystem.addComponent(this)};OscarStage.prototype.stop=function(){Game.driverSystem.removeComponet(this)};OscarStage.prototype.onRender=function(){if(this.isActive){this.mainScene.onRender()}};OscarStage.prototype.onUpdate=function(){if(this.isActive){this.mainScene.onUpdate()}};return OscarStage}(Games.ESystem));Games.OscarStage=OscarStage})(Games||(Games={}));var Games;(function(Games){var RoadShowScene=(function(_super){__extends(RoadShowScene,_super);function RoadShowScene(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(RoadShowScene.prototype,"mainView",{get:function(){if(!this._mainView){this._mainView=fgui.PfSkin.LyShow.createInstance();this._mainView.mainScene=this}return this._mainView},enumerable:true,configurable:true});return RoadShowScene}(Games.Scene));Games.RoadShowScene=RoadShowScene})(Games||(Games={}));var Games;(function(Games){var RoadShowStage=(function(_super){__extends(RoadShowStage,_super);function RoadShowStage(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._isActive=false;_this.isUpdateTick=true;_this.isRenderTick=true;return _this}Object.defineProperty(RoadShowStage.prototype,"mainScene",{get:function(){if(!this._mainScene){this._mainScene=new Games.RoadShowScene()}return this._mainScene},enumerable:true,configurable:true});Object.defineProperty(RoadShowStage.prototype,"isActive",{get:function(){return this._isActive},set:function(val){this._isActive=val;!val&&this.delayDisposeMainScene()},enumerable:true,configurable:true});RoadShowStage.prototype.delayDisposeMainScene=function(){var _this=this;var updateDTime=Games.GameDriver.time.updateTime.deltaTime*1000;setTimeout(function(){_this.disposeMainScene()},updateDTime)};RoadShowStage.prototype.disposeMainScene=function(){if(this._mainScene){this._mainScene.dispose();this._mainScene=null}};RoadShowStage.prototype.start=function(){Game.driverSystem.addComponent(this)};RoadShowStage.prototype.stop=function(){Game.driverSystem.removeComponet(this)};RoadShowStage.prototype.onRender=function(){if(this.isActive){this.mainScene.onRender()}};RoadShowStage.prototype.onUpdate=function(){if(this.isActive){this.mainScene.onUpdate()}};return RoadShowStage}(Games.ESystem));Games.RoadShowStage=RoadShowStage})(Games||(Games={}));var Games;(function(Games){var UnitSystem=(function(_super){__extends(UnitSystem,_super);function UnitSystem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.components=[];return _this}UnitSystem.prototype.addComponent=function(comp){if(this.components.indexOf(comp)!=-1){return}this.components.push(comp)};UnitSystem.prototype.start=function(){Game.driverSystem.addComponent(this)};UnitSystem.prototype.stop=function(){Game.driverSystem.removeComponet(this)};UnitSystem.prototype.onUpdate=function(){var length=this.components.length;for(var i=0;i<length;i++){this.components[i].onUpdate()}};UnitSystem.prototype.onRender=function(){var length=this.components.length;for(var i=0;i<length;i++){this.components[i].onRender()}};UnitSystem.prototype.onSeconds=function(){var length=this.components.length;for(var i=0;i<length;i++){this.components[i].onSeconds()}};return UnitSystem}(Games.ESystem));Games.UnitSystem=UnitSystem})(Games||(Games={}));var Games;(function(Games){var UnitMoveSystem=(function(_super){__extends(UnitMoveSystem,_super);function UnitMoveSystem(){return _super!==null&&_super.apply(this,arguments)||this}UnitMoveSystem.prototype.Pause=function(){this.components.forEach(function(value){if(!value.isDisposed){value.Pause()}})};UnitMoveSystem.prototype.Resume=function(){this.components.forEach(function(value){if(!value.isDisposed){value.Resume()}})};UnitMoveSystem.prototype.Stop=function(){this.components.forEach(function(value){if(!value.isDisposed){value.Stop()}})};return UnitMoveSystem}(Games.UnitSystem));Games.UnitMoveSystem=UnitMoveSystem})(Games||(Games={}));var Games;(function(Games){var UnitTalkSystem=(function(_super){__extends(UnitTalkSystem,_super);function UnitTalkSystem(){return _super!==null&&_super.apply(this,arguments)||this}return UnitTalkSystem}(Games.UnitSystem));Games.UnitTalkSystem=UnitTalkSystem})(Games||(Games={}));var Games;(function(Games){var UnitViewSystem=(function(_super){__extends(UnitViewSystem,_super);function UnitViewSystem(){return _super!==null&&_super.apply(this,arguments)||this}UnitViewSystem.prototype.Show=function(){this.components.forEach(function(value){if(!value.isDisposed){value.Show()}})};UnitViewSystem.prototype.Hide=function(){this.components.forEach(function(value){if(!value.isDisposed){value.Hide()}})};return UnitViewSystem}(Games.UnitSystem));Games.UnitViewSystem=UnitViewSystem})(Games||(Games={}));var Games;(function(Games){var Event=laya.events.Event;var EUnit=(function(_super){__extends(EUnit,_super);function EUnit(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.uid=0;_this.id=0;_this.displayIndex=-1;return _this}EUnit.prototype.addComponent=function(component){_super.prototype.addComponent.call(this,component);if(component instanceof Games.UnitViewCompoent){this.unitView=component}if(component instanceof Games.UnitAnimatorComponent){this.animator=component}if(component instanceof Games.UnitMoveComponent){this.move=component}if(component instanceof Games.UnitTalkComponent){this.talk=component}};EUnit.prototype.creat=function(info,caller,complete,error){this.uid=info.uid;(this.uid==0)&&(this.uid=++Games.UnitCreator.incrementId);info.uid=this.uid;this.id=info.id;this.unitView.direction=info.direction;this.unitData.bounds=new Rectangle(-this.unitData.width/2,-this.unitData.height,this.unitData.width,this.unitData.height);this.unitView.setBounds(this.unitData.bounds);this.unitView.hitArea=this.unitData.bounds;this.unitView.on(Event.CLICK,this,this.onUnitClick);this.animator.play(info.idleName,true);this.unitView.loadAnim(info.texturePath,info.skeletonPath,caller,complete,error);this.startAnimator()};EUnit.prototype.showOn=function(parent,displayIndex){if(displayIndex===void 0){displayIndex=-1}if(parent instanceof laya.display.Sprite){this.parent=parent}else{this.parent=parent.displayObject}this.displayIndex=displayIndex;this.checkShow()};EUnit.prototype.checkShow=function(){if(this.parent&&this.unitView.displayObject){if(this.displayIndex>=0){this.parent.addChildAt(this.unitView.displayObject,this.displayIndex)}else{this.parent.addChild(this.unitView.displayObject)}}};EUnit.prototype.startAnimator=function(){this.unitView.startAnimator()};EUnit.prototype.pauseAnimator=function(){this.unitView.pauseAnimator()};EUnit.prototype.removeHeadIcon=function(){this.unitView.removeHeadIcon()};EUnit.prototype.onUnitClick=function(){Games.AvatarManager.sAvatarClick.dispatch(this.getEventData())};EUnit.prototype.getEventData=function(){var eventData=new Games.RoomAvatarData();eventData.onEvent=true;eventData.performType=this.unitData.performType;eventData.avatarUid=this.unitData.info.uid;eventData.avatarId=this.unitData.info.id;if(this.unitData.roomInfo){eventData.roomId=this.unitData.roomInfo.id;eventData.roomType=this.unitData.roomInfo.type}if(this.unitData.currAction!=null){eventData.eventId=this.unitData.currEventId}return eventData};return EUnit}(Games.EEntity));Games.EUnit=EUnit})(Games||(Games={}));var Games;(function(Games){var GuideWindow=(function(_super){__extends(GuideWindow,_super);function GuideWindow(){var _this=_super.call(this)||this;_this.checkBtnExistHandler=0;_this.isLoadComplete=false;_this.hasPlayGuide=false;_this.isLoading=false;_this.isShowDialog=false;_this.menuParameter={openType:Games.MenuOpenType.None,openIndex:0,args:[]};return _this}GuideWindow.prototype.loadAsset=function(){Game.asset.loadFguiByPackagename(Games.GuiPackageNames.Guide,this,this.onLoadedComplete)};GuideWindow.prototype.onLoadedComplete=function(){this.isLoadComplete=true;this.showOn(Games.MenuLayer.guide);if(this.hasPlayGuide){this.play(this.currentId,this.currentType)}};GuideWindow.prototype.show=function(){console.log("显示所有");if(this.conent){this.conent.visible=true}};GuideWindow.prototype.hideAll=function(){console.log("hideAll");if(this.conent){this.conent.hideAll()}this.hide()};GuideWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};GuideWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};GuideWindow.prototype.onMenuCreate=function(){this.conent=fgui.Guide.GuideUI.createInstance();this.contentPane=this.conent;this.contentPane.onClick(this,this.onClickToNext);_super.prototype.onMenuCreate.call(this)};GuideWindow.prototype.onMenuOpen=function(parameter){};GuideWindow.prototype.recyclingHand=function(){if(this.conent){this.conent.recyclingHand()}this.guideBtn=null};GuideWindow.prototype.closeDialog=function(){if(this.conent&&this.isShowDialog){this.isShowDialog=false;this.conent.m_dialog.m_t1.play(null,1)}};GuideWindow.prototype.hide=function(){this.recyclingHand();this.closeDialog();if(this.conent){this.conent.visible=false}};GuideWindow.prototype.onClickToNext=function(){switch(this.clickFullType){case Games.GuideFullClickType.NextGuide:case Games.GuideFullClickType.NextStory:this.playNext();break;case Games.GuideFullClickType.CompleteWrite:this.conent.directComplete();break;default:break}};GuideWindow.prototype.playNext=function(){switch(this.currentType){case Games.GuideType.Guide:Game.guide.playNextGuide();break;case Games.GuideType.Story:Game.story.playNextStory();break;default:break}};GuideWindow.prototype.play=function(id,type){this.show();this.currentId=id;this.currentType=type;this.clickFullType=Games.GuideFullClickType.None;if(this.isLoadComplete==false){this.hasPlayGuide=true;this.loadAsset()}else{switch(type){case Games.GuideType.Story:this.playStory(id);break;case Games.GuideType.Guide:this.playGuide(id);break;case Games.GuideType.Anima:this.playOpeningAnima();break;case Games.GuideType.Car:this.playStartCar();break;default:break}}};GuideWindow.prototype.onClickBtn=function(btn,config){this.recyclingHand();if(config.finish_type==Games.GuideFinishType.GuideFinishType_20_ClickTarget||config.finish_type==Games.GuideFinishType.GuideFinishType_29_Secretary||config.finish_type==Games.GuideFinishType.GuideFinishType_30_MarketSelectActor){Game.guide.finishId(this.guideSystemConfig.id)}else{Game.moduleModel.guide.addFinishGuideId(this.guideSystemConfig.id)}Laya.stage.off(Laya.Event.CLICK,this,this.onClickStageToNext);btn.off("click",this,this.onClickBtn)};GuideWindow.prototype.getGuideBtn=function(config){var btn=GuideHelp.getGuideUIByConfig(config);return btn};GuideWindow.prototype.playStory=function(id){this.clickFullType=Games.GuideFullClickType.None;var config=Game.config.storyline.getConfig(id);if(config){switch(config.ui_type){case Games.GuideUIType.NpcIntro:this.playNpcIntro(id);break;case Games.GuideUIType.HaiBao:this.playHaiBao(id);break;default:this.playStoryDialog(id);break}}this.storylineConfig=config};GuideWindow.prototype.playNpcIntro=function(id){var _this=this;var config=Game.config.storyline.getConfig(id);this.conent.showNpcUI(config,this,this.dialogClickComplete);setTimeout(function(){_this.clickFullType=Games.GuideFullClickType.NextStory},500)};GuideWindow.prototype.playHaiBao=function(id){var config=Game.config.storyline.getConfig(id);this.conent.showHaiBao(contentFormatCustom(config.name),contentFormatCustom(config.ui_content),this,this.dialogClickComplete)};GuideWindow.prototype.playStoryDialog=function(id){var _this=this;var config=Game.config.storyline.getConfig(id);var url=config.bodyIconUrl;var name=config.nName;var msg=config.contentFormatCustom;if(config){if(config.anchor==Games.GuideAnchor.Left){this.conent.showLeftDialog(url,name,msg,this,function(){_this.clickFullType=Games.GuideFullClickType.CompleteWrite},this.dialogShowComplete)}else{this.conent.showRightDialog(url,name,msg,this,function(){_this.clickFullType=Games.GuideFullClickType.CompleteWrite},this.dialogShowComplete)}}};GuideWindow.prototype.playGuide=function(id){var _this=this;this.clickFullType=Games.GuideFullClickType.None;var config=Game.config.guidesystem.getConfig(id);if(config){config.force=false;this.conent.setForce(config.force);Laya.stage.off(Laya.Event.CLICK,this,this.onClickStageToNext);if(config.assistant){this.conent.showDialog(config.content,config.position);if(this.guideSystemConfig!=config){this.isShowDialog=true;this.conent.m_dialog.m_t0.play(Handler.create(null,function(){Laya.stage.on(Laya.Event.CLICK,_this,_this.onClickStageToHideDialog)}),1)}}else{this.conent.hideDialog()}clearInterval(this.checkBtnExistHandler);this.checkBtnExistHandler=setInterval(function(){_this.checkBtn(config)},1000);this.checkBtn(config)}this.guideSystemConfig=config};GuideWindow.prototype.checkBtn=function(config){var _this=this;if(config.finish_type==Games.GuideFinishType.GuideFinishType_24_ClickAnyWhere){clearInterval(this.checkBtnExistHandler);Laya.stage.on(Laya.Event.CLICK,this,this.onClickStageToNext)}else{var btn_1=this.getGuideBtn(config);if(btn_1){clearInterval(this.checkBtnExistHandler);this.conent.showFinger(btn_1,config);if(config.force){btn_1.on("click",this,this.onClickBtn,[btn_1,config])}else{setTimeout(function(){btn_1.on("click",_this,_this.onClickBtn,[btn_1,config])},200)}}this.guideBtn=btn_1}};GuideWindow.prototype.onClickStageToHideDialog=function(){Laya.stage.off(Laya.Event.CLICK,this,this.onClickStageToHideDialog);if(this.guideSystemConfig&&this.guideSystemConfig.stay==false){this.closeDialog()}};GuideWindow.prototype.onClickStageToNext=function(event){Laya.stage.off(Laya.Event.CLICK,this,this.onClickStageToNext);clearInterval(this.checkBtnExistHandler);Game.guide.finishId(this.guideSystemConfig.id)};GuideWindow.prototype.dialogShowComplete=function(){this.clickFullType=Games.GuideFullClickType.NextGuide};GuideWindow.prototype.dialogClickComplete=function(){this.playNext()};GuideWindow.prototype.playOpeningAnima=function(){this.conent.playOpenAnima()};GuideWindow.prototype.playStartCar=function(){this.conent.playStartCar()};return GuideWindow}(Games.MWindow));Games.GuideWindow=GuideWindow})(Games||(Games={}));var Games;(function(Games){var MenuValidate=(function(){function MenuValidate(){this.dict=new Dictionary()}MenuValidate.getInstance=function(){var Class=this;if(Class.__instance==null){Class.__instance=new Class();Class.__instance.install()}return Class.__instance};MenuValidate.prototype.validate=function(menuId){if(this.dict.hasKey(menuId)){return this.dict.getValue(menuId).apply(this)}return true};MenuValidate.prototype.progress=function(menuId){return null};MenuValidate.prototype.add=function(menuId,fun){this.dict.add(menuId,fun)};MenuValidate.prototype.install=function(){};return MenuValidate}());Games.MenuValidate=MenuValidate;var MenuValidateOpening=(function(_super){__extends(MenuValidateOpening,_super);function MenuValidateOpening(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.closeDict=new Dictionary();return _this}MenuValidateOpening.prototype.install=function(){this.addClose(Games.MenuId.GuideComplete,this.isCloseGuideComplete);this.addClose(Games.MenuId.Goal,this.isCloseGoal);this.addClose(Games.MenuId.CupGift,this.isCloseCupGift)};MenuValidateOpening.prototype.isCloseGuideComplete=function(){return Game.moduleModel.guide.guideCompleteStatus==1};MenuValidateOpening.prototype.isCloseGoal=function(){return Game.moduleModel.targetPackage.isCloseLevelGift};MenuValidateOpening.prototype.isCloseCupGift=function(){return Game.moduleModel.targetPackage.isCloseCupGift};MenuValidateOpening.prototype.addClose=function(id,func){this.closeDict.add(id,func)};MenuValidateOpening.prototype.validate=function(menuId){var isClose=false;if(this.closeDict.hasKey(menuId)){isClose=this.closeDict.getValue(menuId).apply(this)}if(isClose==true){return false}var unlockConfig=Game.config.unlock.getUnlockConfig(menuId);if(this.dict.hasKey(menuId)){return this.dict.getValue(menuId).apply(this)}if(unlockConfig){switch(unlockConfig.open_type){case Games.UnlockType.None:return true;case Games.UnlockType.Level:return User.info.level>=unlockConfig.open_data;case Games.UnlockType.BuildingLevel:return Game.moduleModel.building.validataBuildLevel(unlockConfig.open_data);case Games.UnlockType.BlockLevel:return Game.moduleModel.street.validataBlockLevelId(unlockConfig.open_data);case Games.UnlockType.Other:return false;case Games.UnlockType.HoldCity:return Game.moduleModel.market.IsTaskCityFinish(unlockConfig.open_data);case Games.UnlockType.MainTask:return Game.moduleModel.task.isCompleteMainTask(unlockConfig.open_data)}}return _super.prototype.validate.call(this,menuId)};return MenuValidateOpening}(MenuValidate));Games.MenuValidateOpening=MenuValidateOpening;var MenuValidateUnlock=(function(_super){__extends(MenuValidateUnlock,_super);function MenuValidateUnlock(){return _super!==null&&_super.apply(this,arguments)||this}MenuValidateUnlock.prototype.install=function(){};MenuValidateUnlock.prototype.validate=function(menuId){return MenuValidateOpening.getInstance().validate(menuId)};return MenuValidateUnlock}(MenuValidate));Games.MenuValidateUnlock=MenuValidateUnlock;var MenuValidateEnableOpen=(function(_super){__extends(MenuValidateEnableOpen,_super);function MenuValidateEnableOpen(){return _super!==null&&_super.apply(this,arguments)||this}MenuValidateEnableOpen.prototype.install=function(){this.dict.add(Games.MenuId.Fans,this.fansEnableOpen);this.dict.add(Games.MenuId.Official,this.officialEnableOpen);this.dict.add(Games.MenuId.Meeting,this.meetingEnableOpen);this.dict.add(Games.MenuId.Order,this.orderEnableOpen);this.dict.add(Games.MenuId.War,this.warEnableOpen)};MenuValidateEnableOpen.prototype.validate=function(menuId){switch(menuId){case Games.MenuId.War:if(Game.moduleModel.street.canSign){Game.guide.readyPlayGuide(105401,true);return !Game.moduleModel.street.canSign}else{return _super.prototype.validate.call(this,menuId)}}return _super.prototype.validate.call(this,menuId)};MenuValidateEnableOpen.prototype.meetingEnableOpen=function(){var b=false;var isBuild=Game.moduleModel.building.hasBuildByType(Games.RoomType.Meeting);if(isBuild){var meetingData=Game.moduleModel.meeting.getMeetingData();if(meetingData){var nextNum=meetingData.nextMeetingNum;if(nextNum<=0){Game.system.toastMsg(MsgKey.meeting_time,Games.TimeHelper.TimeFormat4(meetingData.nextMeetingComeTime))}else{b=true}}}else{Game.system.toastText(Games.TEXT.Lock)}return b};MenuValidateEnableOpen.prototype.officialEnableOpen=function(){var b=false;var isBuild=Game.moduleModel.building.hasBuildByType(Games.RoomType.Office);if(isBuild){var businessData=Game.moduleModel.business.getBusinessData();if(businessData){if(businessData.isMaxDaily){Game.system.toastMsg(MsgKey.business_down)}else{var nextBusinessNum=businessData.nextBusinessNum;if(nextBusinessNum<=0){Game.system.toastMsg(MsgKey.business_countdown,Games.TimeHelper.TimeFormat4(businessData.nextBusinessComeTime))}else{b=true}}}}else{Game.system.toastText(Games.TEXT.Lock)}return b};MenuValidateEnableOpen.prototype.fansEnableOpen=function(){var b=false;var isBuild=Game.moduleModel.building.hasBuildByType(Games.RoomType.Reception);if(isBuild){var visitData=Game.moduleModel.visit.getVisitData();if(visitData){var nextFans=visitData.nextFansNum;if(nextFans<=0){Game.system.toastMsg(MsgKey.visit_countdown,Games.TimeHelper.TimeFormat4(visitData.nextFansComeTime))}else{if(visitData.isWaiting){Game.system.toastText(Games.TEXT.VisitHaveOtherFansWaiting)}else{if(Game.moduleModel.actor.hasCanVisitActor){if(Game.moduleModel.secretary.isAutoVisit==false){b=true}else{Game.system.toastText(Games.TEXT.ActorAutoVisit)}Game.protosender.manageVisit.StartVisit()}else{Game.system.toastMsg(MsgKey.visit_noone)}}}}}else{Game.system.toastText(Games.TEXT.Lock)}return b};MenuValidateEnableOpen.prototype.orderEnableOpen=function(){var b=false;var isBuild=Game.moduleModel.building.hasBuildByType(Games.RoomType.Spread);if(isBuild){b=true}else{Game.system.toastText(Games.TEXT.Lock)}return b};MenuValidateEnableOpen.prototype.warEnableOpen=function(){var b=false;if(User.isNineToFiftyFive&&!User.isTenTime&&(!Game.moduleModel.warData.moveData||(Game.moduleModel.warData.moveData!==null&&Game.moduleModel.warData.moveData.state<EMovieState.result))){Game.system.toastText(Games.TEXT.NineToFiftyFiveTip)}else{b=true}return b};return MenuValidateEnableOpen}(MenuValidate));Games.MenuValidateEnableOpen=MenuValidateEnableOpen;var MenuValidateNew=(function(_super){__extends(MenuValidateNew,_super);function MenuValidateNew(){return _super!==null&&_super.apply(this,arguments)||this}MenuValidateNew.prototype.install=function(){};MenuValidateNew.prototype.validate=function(menuId){if(this.dict.hasKey(menuId)){return this.dict.getValue(menuId).apply(this)}var isNew=Game.moduleModel.func.getIsNewMenu(menuId);if(isNew){return isNew}var menuConfig=Game.config.menu.getConfig(menuId);if(menuConfig.isSubbarMainButton){var list=Game.config.menu.getBarMenus(menuId);for(var i=0;i<list.length;i++){if(this.validate(list[i].menuId)){return true}}}return false};return MenuValidateNew}(MenuValidate));Games.MenuValidateNew=MenuValidateNew;var MenuValidateRed=(function(_super){__extends(MenuValidateRed,_super);function MenuValidateRed(){return _super!==null&&_super.apply(this,arguments)||this}MenuValidateRed.prototype.install=function(){this.add(Games.MenuId.Manage,this.getManageRed);this.add(Games.MenuId.Run,this.getRunRed)};MenuValidateRed.prototype.getManageRed=function(){return Game.moduleModel.story.isRed};MenuValidateRed.prototype.getRunRed=function(){return Game.moduleModel.order.redNum>0||Game.moduleModel.visit.isRed||Game.moduleModel.meeting.isRed||Game.moduleModel.business.isRed||Game.moduleModel.business.isRed};MenuValidateRed.prototype.validate=function(menuId){switch(menuId){case Games.MenuId.ArtistList:return Game.moduleModel.actor.isCanNoseActor;case Games.MenuId.War:return Game.moduleModel.warData.realLicenceNum;case Games.MenuId.Produce:return Game.moduleModel.produce.hasLineOutputFull;case Games.MenuId.StoryLibrary:return Game.moduleModel.story.isRed;case Games.MenuId.Order:return Game.moduleModel.order.redNum;case Games.MenuId.Fans:return Game.moduleModel.visit.isRed;case Games.MenuId.Meeting:return Game.moduleModel.meeting.isRed;case Games.MenuId.Official:return Game.moduleModel.business.isRed;case Games.MenuId.Mission:return Game.moduleModel.mission.getRead();case Games.MenuId.Bag:return Game.moduleModel.bag.RedNum;case Games.MenuId.Event:return Game.moduleModel.activity.waitForGetNum>0;case Games.MenuId.Weal:return !Game.moduleModel.activity.curIsSign||Game.moduleModel.secretary.isCanGetWelf||Game.moduleModel.secretary.isCanGetLicense;case Games.MenuId.Cooperation:return Game.moduleModel.cooperation.isHaveRedTip||Game.moduleModel.cooperation.isRewardBoxRedTip||Game.moduleModel.cooperation.isRewardTaskRedTip;case Games.MenuId.Mail:return Game.moduleModel.mail.RedNum;case Games.MenuId.Shop:return Game.moduleModel.shop.RedNum;case Games.MenuId.Rank:return Game.moduleModel.rank.RedNum;case Games.MenuId.Street:return Game.moduleModel.street.RedNum;case Games.MenuId.Market:return Game.moduleModel.market.RedNum}var menuConfig=Game.config.menu.getConfig(menuId);if(menuConfig.isSubbarMainButton){var list=Game.config.menu.getBarMenus(menuId);for(var i=0;i<list.length;i++){if(this.validate(list[i].menuId)){return true}}}if(this.dict.hasKey(menuId)){return this.dict.getValue(menuId).apply(this)}return false};return MenuValidateRed}(MenuValidate));Games.MenuValidateRed=MenuValidateRed;var MenuValidateProgress=(function(_super){__extends(MenuValidateProgress,_super);function MenuValidateProgress(){return _super!==null&&_super.apply(this,arguments)||this}MenuValidateProgress.prototype.install=function(){};MenuValidateProgress.prototype.progress=function(menuId){if(this.dict.hasKey(menuId)){return this.dict.getValue(menuId).apply(this)}switch(menuId){case Games.MenuId.GuideComplete:return Game.moduleModel.task.mainTaskProgressGoal;case Games.MenuId.Goal:return Game.moduleModel.targetPackage.progressLevelGoal;case Games.MenuId.CupGift:return Game.moduleModel.targetPackage.progressCupGoal;default:break}return null};return MenuValidateProgress}(MenuValidate));Games.MenuValidateProgress=MenuValidateProgress})(Games||(Games={}));var Games;(function(Games){var ModelManagerList=(function(){function ModelManagerList(){this.list=[];this.item=new Games.ItemModel();this.story=new Games.StoryModel();this.building=new Games.BuildingModel();this.playerInfo=new Games.PlayerInfoModel();this.actor=new Games.ActorModel();this.warData=new Games.WarModel();this.market=new Games.MarketModel();this.bag=new Games.BagModel();this.produce=new Games.ProduceModel();this.mail=new Games.MailModel();this.shop=new Games.ShopModel();this.recharge=new Games.RechargeModel();this.task=new Games.TaskModel();this.order=new Games.OrderModel();this.progressBox=new Games.ProgressBoxModel();this.setting=new Games.SystemSettingModel();this.visit=new Games.VisitModel();this.business=new Games.BusinessModel();this.meeting=new Games.MeetingModel();this.activity=new Games.ActivityModel();this.rank=new Games.RankModel();this.mission=new Games.MissionModel();this.street=new Games.StreetModel();this.oscar=new Games.OscarModel();this.notice=new Games.NoticeModel();this.secretary=new Games.SecretaryModel();this.cooperation=new Games.CooperationModel();this.guide=new Games.GuideModel();this.func=new Games.FunctionModel();this.targetPackage=new Games.TargetPackageModel()}ModelManagerList.prototype.initList=function(){this.list.push(this.item);this.list.push(this.story);this.list.push(this.building);this.list.push(this.actor);this.list.push(this.warData);this.list.push(this.market);this.list.push(this.bag);this.list.push(this.playerInfo);this.list.push(this.produce);this.list.push(this.mail);this.list.push(this.mission);this.list.push(this.shop);this.list.push(this.recharge);this.list.push(this.task);this.list.push(this.order);this.list.push(this.progressBox);this.list.push(this.setting);this.list.push(this.rank);this.list.push(this.visit);this.list.push(this.business);this.list.push(this.meeting);this.list.push(this.activity);this.list.push(this.street);this.list.push(this.oscar);this.list.push(this.notice);this.list.push(this.secretary);this.list.push(this.cooperation);this.list.push(this.guide);this.list.push(this.func);this.list.push(this.targetPackage)};return ModelManagerList}());Games.ModelManagerList=ModelManagerList})(Games||(Games={}));var Games;(function(Games){var ModelManager=(function(_super){__extends(ModelManager,_super);function ModelManager(){return _super!==null&&_super.apply(this,arguments)||this}ModelManager.prototype.install=function(){this.initList();for(var i=0;i<this.list.length;i++){this.list[i].install()}};return ModelManager}(Games.ModelManagerList));Games.ModelManager=ModelManager})(Games||(Games={}));var Games;(function(Games){var ActivityModel=(function(_super){__extends(ActivityModel,_super);function ActivityModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.preSingMsg=null;_this.curCycle=1;_this.haveSignList=new Array();_this.curSignDay=0;_this.curIsSign=false;_this.signDic=new Dictionary();_this.sendSignDayCount=0;_this.signDrop=null;_this.sUpdateSign=new Signal();_this.preSevenMsg=null;_this.waitForGetNum=0;_this.sevenDic=new Dictionary();_this.sevenGearNum=0;_this.sUpdateSeven=new Signal();return _this}ActivityModel.prototype.signInit=function(msg){if(msg!==null){this.preSingMsg=msg}if(this.preSingMsg===null){return}this.curSignDay=this.preSingMsg.count;this.curCycle=1;while(this.curSignDay>29){this.curSignDay-=30;this.curCycle++}var sevTime=Game.time.timestampToTime(this.preSingMsg.updateTime);var locTime=Game.time.localTimestamToTime();this.curIsSign=true;for(var i=0;i<3;i++){if(sevTime[i]<locTime[i]){this.curIsSign=false;break}}if(!this.curIsSign){this.curSignDay++}for(var i=1;i<31;i++){var state=0;if(i===this.curSignDay){if(this.curIsSign){state=2}else{state=1}}else{if(i<this.curSignDay){state=2}}this.signDic.add(i,state)}};ActivityModel.prototype.curSignStatus=function(index){if(this.signDic.hasKey(index)){return this.signDic.getValue(index)}return 0};ActivityModel.prototype.sendSign=function(){this.sendSignDayCount=this.curSignDay;Game.protosender.dailySign.sign()};ActivityModel.prototype.handlerSign=function(msg){Games.Static.Instance.onUserorbit("day","第"+this.sendSignDayCount+"天","sign");this.signDrop=msg.dropout;this.sUpdateSign.dispatch()};Object.defineProperty(ActivityModel.prototype,"sevenConfig",{get:function(){if(!this._sevenConfig||this._sevenConfig===null){this._sevenConfig=Game.config.countActivities.sevenConfigList()}return this._sevenConfig},enumerable:true,configurable:true});ActivityModel.prototype.sevenInit=function(msg,uuid){if(uuid===void 0){uuid=null}this.waitForGetNum=0;if(msg!==null){this.uuid=uuid;this.preSevenMsg=msg}if(this.preSevenMsg===null||this.sevenIsOver){this.preSevenMsg=null;return false}for(var i=1;i<this.sevenConfig.length+1;i++){if(this.preSevenMsg.progress>=i){var staus=(this.preSevenMsg.staus>>(i-1))&1;this.sevenDic.add(i,staus+1);if(staus===0){this.waitForGetNum++}}else{this.sevenDic.add(i,0)}}return true};ActivityModel.prototype.curSevenStatus=function(index){if(this.sevenDic.hasKey(index)){return this.sevenDic.getValue(index)}return 0};Object.defineProperty(ActivityModel.prototype,"sevenIsOver",{get:function(){var regTime=Game.time.timestampToTime(Game.time.registerSeconds);var regt=Date.UTC(regTime[0],regTime[1],regTime[2]);var locTime=Game.time.localTimestamToTime();var loct=Date.UTC(locTime[0],locTime[1],locTime[2]);var activityConfig=Game.config.activities.getConfig(1);return activityConfig.duration*24*3600<(loct-regt)*0.001},enumerable:true,configurable:true});ActivityModel.prototype.sendSevenGet=function(gear){this.sevenGearNum=gear+1;Game.protosender.sevenAddUp.GetReward(this.uuid,gear+1)};ActivityModel.prototype.handlerSevenGet=function(msg){this.curGear=msg.gear-1;var sevenConfig=Game.moduleModel.activity.sevenConfig;Games.Static.Instance.onUserorbit("award7",format("第{0}天&{1}",this.sevenGearNum,sevenConfig[this.curGear].reward[0].itemId),"get");this.sUpdateSeven.dispatch()};return ActivityModel}(Games.MModel));Games.ActivityModel=ActivityModel})(Games||(Games={}));var Games;(function(Games){var ActorModel=(function(_super){__extends(ActorModel,_super);function ActorModel(){var _this=_super.call(this)||this;_this.isSortArtist=false;_this.isSortFrozen=false;_this.sUpdateActorInfo=new TypedSignal();_this.sAddActorList=new TypedSignal();_this.isRecruiting=false;_this.giveAssetType=0;_this.giveAssetUUid="";_this.giveAssetNum=0;_this.actorExerciseMap=new Dictionary();_this._noEnoughStamina=[];_this.artistList=new Array();_this.frozenList=new Array();_this.actorMap=new Dictionary();_this.actorUUidMap=new Dictionary();return _this}ActorModel.prototype.setup=function(){var _this=this;clearTimeout(this.resetTimeOut);clearTimeout(this.leaveTimeOut);clearTimeout(this.clearTimeOut);clearTimeout(this.resetDayCultivateTimeOut);clearTimeout(this.resetStaminaTimeOut);var currSecond=Game.time.serverSeconds;var nextSecond=User.info.resetNoseIntoTime;if(currSecond<nextSecond){this.clearTimes=nextSecond-currSecond;this.clearTimeOut=setTimeout(function(){User.info.noseIntoNum=0;User.info.noseIntoTime=0;User.sGameInfoUpdate.dispatch();_this.setup()},this.clearTimes*1000)}else{User.info.noseIntoNum=0;User.info.noseIntoTime=0}var otherTime=GlobalConfig.getValue(GlobalKey.KEY_1002_XingTanQiaoMu__ChaCDFen)+GlobalConfig.getValue(GlobalKey.KEY_1003_MeiCiTanCha__JiaShiJianFen)*(User.info.noseIntoNum-1);var resetTimes=User.info.noseIntoTime+otherTime*60;this.resetTimes=0;if(resetTimes>currSecond){this.resetTimes=resetTimes-currSecond;this.resetTimeOut=setTimeout(function(){User.sGameInfoUpdate.dispatch()},this.resetTimes*1000)}var leaveTimes=User.info.noseIntoActorEffectTime;if(leaveTimes>currSecond){this.leaveTimes=leaveTimes-currSecond;this.leaveTimeOut=setTimeout(function(){User.info.noseIntoActorList.splice(0,User.info.noseIntoActorList.length);User.sGameInfoUpdate.dispatch()},this.leaveTimes*1000)}function resetTrainTimes(){User.info.daysCultivateCount=0;User.sGameInfoUpdate.dispatch()}var resetHour=GlobalConfig.getValue(GlobalKey.KEY_1031_GongSiPeiYang__WuQiShiJian);Games.TimeHelper.lastHourToReset(User.info.resetDaysCultivateCountTime,resetHour,resetTrainTimes);var nowHour=Games.TimeHelper.GetServerDateTime().getHours();nextSecond=Games.TimeHelper.TimeReformat(resetHour).getTime()/1000;if(nowHour>=resetHour){nextSecond+=Games.TimeHelper.OneDaySeconds}if(currSecond<nextSecond){var time=nextSecond-currSecond;this.resetDayCultivateTimeOut=setTimeout(function(){resetTrainTimes()},time*1000)}var t=Games.TimeHelper.SubSecondTimeInDay(Game.time.serverSeconds,GlobalConfig.getValue(GlobalKey.KEY_1011_TiLiChongZhi__WuQiShiJian));if(t>0){this.resetStaminaTimeOut=setTimeout(function(){for(var index=0;index<_this.artistList.length;index++){var element=_this.artistList[index];if(element){element.stamina=element.staminaLimit}}for(var index=0;index<_this.frozenList.length;index++){var element=_this.frozenList[index];if(element){element.stamina=element.staminaLimit}}},t*1000)}};ActorModel.prototype.sortArtist=function(list){list.sort(this.descActor)};ActorModel.prototype.descActor=function(b,a){var result=a.star-b.star;if(result==0){result=a.level-b.level;if(result==0){result=a.id-b.id}}return result};ActorModel.prototype.hasActor=function(id){var b=this.actorMap.hasKey(id);return b};ActorModel.prototype.hasActorByUUid=function(uuid){var b=this.actorUUidMap.hasKey(uuid);return b};ActorModel.prototype.getActor=function(id){return this.actorMap.getValue(id)};ActorModel.prototype.getActorByUUid=function(uuid){return this.actorUUidMap.getValue(uuid)};ActorModel.prototype.getActors=function(){if(this.isSortArtist==false){this.sortArtist(this.artistList);this.isSortArtist=true}return this.artistList};ActorModel.prototype.getHideActors=function(){if(this.isSortFrozen==false){this.sortArtist(this.frozenList);this.isSortFrozen=true}return this.frozenList};ActorModel.prototype.getHideActorLen=function(){return this.frozenList.length};ActorModel.prototype.getActorLen=function(){return this.artistList.length};ActorModel.prototype.getAllActorLen=function(){return this.getActorLen()+this.getHideActorLen()};Object.defineProperty(ActorModel.prototype,"actorIsMax",{get:function(){return User.info.maxActor<=this.artistList.length},enumerable:true,configurable:true});ActorModel.prototype.toMaxActor=function(){Game.system.confirmBuyText(Games.TEXT.AlertTextBuyActor,GlobalConfig.getValue1(GlobalKey.KEY_1009_ZuanDanZengJia__ShuLiangXiaoHao),null,function(){Game.protosender.Actor.addActorSlot()})};Object.defineProperty(ActorModel.prototype,"actorHideIsMax",{get:function(){return User.info.maxHideActor<=this.frozenList.length},enumerable:true,configurable:true});ActorModel.prototype.isHide=function(id){var data=this.getActor(id);var b=false;if(data){b=data.hide}return b};ActorModel.prototype.addToFrozen=function(id){var data=this.actorMap.getValue(id);if(this.frozenList.indexOf(data)<0){this.frozenList.push(data)}this.isSortFrozen=false;this.removeFromArtistList(id)};ActorModel.prototype.removeFromArtistList=function(id){var data=this.actorMap.getValue(id);var index=this.artistList.indexOf(data);if(index>=0){this.artistList.splice(index,1)}};ActorModel.prototype.removeFromFrozenList=function(id){var data=this.actorMap.getValue(id);var index=this.frozenList.indexOf(data);if(index>=0){this.frozenList.splice(index,1)}};ActorModel.prototype.addActorData=function(msg){var data=this.getActor(msg.actorId);if(data==null){data=new Games.ActorData()}data.uuid=msg.uuid;data.art=msg.art;data.hide=msg.hide;data.payCheck=msg.payCheck;data.stamina=msg.stamina;data.staminaLimit=msg.staminaLimit;data.loyaltyExp=msg.LoyaltyExp;if(data.loyaltyLevel&&data.loyaltyLevel<msg.LoyaltyLevel){Games.Static.Instance.onUpgrdae("starHeart",msg.actorId.toString(),data.loyaltyLevel.toString(),(msg.LoyaltyLevel-data.loyaltyLevel).toString(),msg.LoyaltyLevel.toString())}data.loyaltyLevel=msg.LoyaltyLevel;data.cultivateCountLimit=msg.cultivateCountLimit;data.giveAssetsCount=msg.giveAssetsCount;data.giveAssetsCountLimit=msg.giveAssetsCountLimit;data.giveAssetsList=msg.giveAssetsList;data.skillExp=msg.skillExp;data.skillList=msg.skillList;data.shootTypeList=msg.shootTypeList;data.spectacle=msg.spectacle;data.perform=msg.perform;data.plot=msg.plot;data.art=msg.art;data.entertainment=msg.entertainment;data.levelExp=msg.levelExp;data.assistantInfos=msg.assistantInfos;data.boxOfficeCount=msg.boxOfficeCount;data.cupCount=msg.cupCount;data.movieCount=msg.movieCount;data.setId(msg.actorId);data.setLevel(msg.level);data.setTrainCount(msg.cultivateCount);data.setSkills();data.setAssets();data.setAssistants();data.setTagData();this.addActor(msg.actorId,data);if(isNullOrEmpty(msg.name)){data.name=data.config.name}else{data.name=msg.name}Game.moduleModel.task.clientUpdateMainTaskProgress(Games.MainTaskRequireType.RequireType_3_UpgradeActor);return data};ActorModel.prototype.addActor=function(id,data){this.actorMap.add(id,data);this.actorUUidMap.add(data.uuid,data);if(data.hide){this.addToFrozen(id)}else{this.addToArist(id)}};ActorModel.prototype.addToArist=function(id){var data=this.actorMap.getValue(id);if(this.artistList.indexOf(data)<0){this.artistList.push(data)}this.isSortArtist=false;this.removeFromFrozenList(id)};ActorModel.prototype.removeActor=function(id){var actor=this.getActor(id);if(actor){this.actorMap.remove(id)}this.removeFromArtistList(id);this.removeFromFrozenList(id)};Object.defineProperty(ActorModel.prototype,"isCanNoseActor",{get:function(){var isRed=false;var isUnlock=Game.config.menu.getConfig(Games.MenuId.ArtistList).isUnlock;if(isUnlock){if(User.info.noseIntoTime>0){var resetTimes=User.info.noseIntoTime+this.noseCdReset;var nowTimes=Game.time.serverSeconds;if(resetTimes<=nowTimes&&this.actorIsMax==false&&this.isMaxNose==false){isRed=true}}else{if(this.isMaxNose==false&&this.actorIsMax==false){isRed=true}}}return isRed},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"isMaxNose",{get:function(){var max=GlobalConfig.getValue(GlobalKey.KEY_1004_TanChaCiShuShangXian);if(Game.moduleModel.secretary.isForever){max+=Game.moduleModel.secretary.noseIntoNum}return User.info.noseIntoNum>=max},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"noseCdReset",{get:function(){var otherTime=GlobalConfig.getValue(GlobalKey.KEY_1002_XingTanQiaoMu__ChaCDFen)+GlobalConfig.getValue(GlobalKey.KEY_1003_MeiCiTanCha__JiaShiJianFen)*(User.info.noseIntoNum-1);var resetTime=otherTime*60;if(Game.moduleModel.secretary.isForever){resetTime=resetTime*((100-Game.moduleModel.secretary.resetCdRate)/100)}return Math.ceil(resetTime)},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"isUnlockActorSkill",{get:function(){var isUnlock=false;isUnlock=User.info.level>=GlobalConfig.getValue(GlobalKey.KEY_1033_YiRenJiNeng__GongSiDengJi);return isUnlock},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"isUnlockActorTrain",{get:function(){var isUnlock=false;return false},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"isUnlockActorAsset",{get:function(){var isUnlock=false;isUnlock=User.info.level>=GlobalConfig.getValue(GlobalKey.KEY_1034_YiRenZiChan__GongSiDengJi);return false},enumerable:true,configurable:true});ActorModel.prototype.addActorExerciseData=function(msg,uuid){var actorExpercise=this.actorExerciseMap.getValue(uuid);if(!actorExpercise){actorExpercise=new Games.ActorExerciseData(msg)}actorExpercise.seatUuid=uuid;actorExpercise.uuid=msg.actorUuid;actorExpercise.seatIndex=msg.index;actorExpercise.startTime=msg.startTime;actorExpercise.isComplete=false;this.actorExerciseMap.add(uuid,actorExpercise)};ActorModel.prototype.setActorExerciseStaus=function(lineUuid,complete){var exerciseData=this.getActorExerciseDataByUuid(lineUuid);if(exerciseData){exerciseData.isComplete=complete}};ActorModel.prototype.getActorExerciseDataByActorUuid=function(uuid){var actorExperciseMapValues=this.actorExerciseMap.getValues();return actorExperciseMapValues.findOne(function(value){return value.uuid==uuid})};ActorModel.prototype.getActorExerciseDataByUuid=function(lineUuid){return this.actorExerciseMap.getValue(lineUuid)};ActorModel.prototype.isActorOnExercise=function(actorId){var actorData=this.getActor(actorId);var actorExerciseData=null;if(actorData){actorExerciseData=this.getActorExerciseDataByActorUuid(actorData.uuid)}return actorExerciseData!=null};ActorModel.prototype.getActorExerciseDataKeys=function(){return this.actorExerciseMap.getKeys()};ActorModel.prototype.getExperciseDataList=function(){return this.actorExerciseMap.getValues()};Object.defineProperty(ActorModel.prototype,"onExperciseCount",{get:function(){var actorExperciseMapValues=this.actorExerciseMap.getValues();return actorExperciseMapValues.filter(function(value){return value.uuid!=""}).length},enumerable:true,configurable:true});ActorModel.prototype.isUseInMovie=function(id){var b=false;if(Game.moduleModel.warData.moveData!=null){var list=Game.moduleModel.warData.getRealYRList.getValues();for(var index=0;index<list.length;index++){var element=list[index];if(element.id==id){b=true;break}}}return b};Object.defineProperty(ActorModel.prototype,"hasCanVisitActor",{get:function(){var b=false;for(var index=0;index<this.artistList.length;index++){var element=this.artistList[index];if(Games.AvatarManager.isActorReceptionOnLimit(element.id)==false){b=true}}return b},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"isOpenTrain",{get:function(){var isOpen=false;var config=Game.config.unlock.getConfig(Games.UnlockID.ActorTrain);if(config){isOpen=config.isUnlock}return isOpen},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"isOpenSkill",{get:function(){var lv=GlobalConfig.getValue(GlobalKey.KEY_1033_YiRenJiNeng__GongSiDengJi);return User.info.level>=lv},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"isOpenAsset",{get:function(){var lv=GlobalConfig.getValue(GlobalKey.KEY_1034_YiRenZiChan__GongSiDengJi);return User.info.level>=lv},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"openTrainTip",{get:function(){var config=Game.config.unlock.getConfig(Games.UnlockID.ActorTrain);var tip="";if(config){tip=config.touch_txt}return tip},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"openSkillTip",{get:function(){var lv=GlobalConfig.getValue(GlobalKey.KEY_1033_YiRenJiNeng__GongSiDengJi);var tip;tip=format(Games.TEXT.SkillOpen,lv);return tip},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"openAssetTip",{get:function(){var lv=GlobalConfig.getValue(GlobalKey.KEY_1034_YiRenZiChan__GongSiDengJi);var tip;tip=format(Games.TEXT.AssetOpen,lv);return tip},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"openAssistantTip",{get:function(){var lv=GlobalConfig.getValue(GlobalKey.KEY_1036);var tip;tip=format(Games.TEXT.AssistantOpen,lv);return tip},enumerable:true,configurable:true});ActorModel.prototype.getAllActors=function(){var result=[];var actors=this.getActors();var hideActors=this.getHideActors();for(var _i=0,actors_1=actors;_i<actors_1.length;_i++){var actor=actors_1[_i];result.push(actor)}for(var _a=0,hideActors_1=hideActors;_a<hideActors_1.length;_a++){var actorHide=hideActors_1[_a];result.push(actorHide)}return result};ActorModel.prototype.compareField=function(fieldName){var filterItem;var compareVal=0;var actors=this.getAllActors();for(var _i=0,actors_2=actors;_i<actors_2.length;_i++){var actor=actors_2[_i];if(actor[fieldName]>=compareVal){compareVal=actor.boxOfficeCount;filterItem=actor}}return filterItem};Object.defineProperty(ActorModel.prototype,"getTopBoxOfficeCount",{get:function(){return this.compareField("boxOfficeCount")},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"getTopCupCount",{get:function(){return this.compareField("cupCount")},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"getTopMovieCount",{get:function(){return this.compareField("movieCount")},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"getTopGiveAssetListCount",{get:function(){return this.compareField("giveAssetsCount")},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"getTopCultivateCount",{get:function(){return this.compareField("cultivateCount")},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"getTopSkillLevel",{get:function(){var filterItem;var compareVal=0;var actors=this.getAllActors();for(var _i=0,actors_3=actors;_i<actors_3.length;_i++){var actor=actors_3[_i];var totalSkillLevel=0;for(var _a=0,_b=actor.skillList;_a<_b.length;_a++){var skillInfo=_b[_a];var skillCfg=Game.config.skill.getConfig(skillInfo.skillId);totalSkillLevel+=skillCfg.lv}if(totalSkillLevel>=compareVal){compareVal=totalSkillLevel;filterItem=actor}}return filterItem},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"bestActorCupCount",{get:function(){var actors=this.getAllActors();var totalCount=0;for(var _i=0,actors_4=actors;_i<actors_4.length;_i++){var actor=actors_4[_i];totalCount+=actor.cupCount}return totalCount},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"isHaveNoseActor",{get:function(){var nowTimes=Game.time.serverSeconds;var leaveTimes=User.info.noseIntoActorEffectTime;var actorLeaveTime=0;if(leaveTimes>nowTimes){actorLeaveTime=leaveTimes-nowTimes}if(actorLeaveTime>0&&User.info.noseIntoActorList.length>0){return true}return false},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"noEnoughStaminaActors",{get:function(){this._noEnoughStamina.splice(0,this._noEnoughStamina.length);for(var index=0;index<this.artistList.length;index++){var element=this.artistList[index];if(element&&(element.stamina<element.staminaLimit)){this._noEnoughStamina.push(element)}}return this._noEnoughStamina},enumerable:true,configurable:true});Object.defineProperty(ActorModel.prototype,"noseActorIsWaiting",{get:function(){var nowTimes=Game.time.serverSeconds;var leaveTimes=User.info.noseIntoActorEffectTime;var actorLeaveTime=0;if(leaveTimes>nowTimes){actorLeaveTime=leaveTimes-nowTimes}return actorLeaveTime>0},enumerable:true,configurable:true});ActorModel.prototype.normalNoseActor=function(useCard){var cost=GlobalConfig.getValue1(GlobalKey.KEY_1001_TanChaXiaoHao);var enough=Games.ItemHelper.checkItemEnough3(cost);if(enough){if(useCard){var cost2=GlobalConfig.getValue1(GlobalKey.KEY_1008_JiangZhiTanCha__PinHeShuLiang);var enough=Games.ItemHelper.checkItemEnough3(cost2);if(enough){Game.protosender.Actor.noseInfoActor(true)}else{Game.system.openItemWay(cost[0],cost[1])}}else{Game.protosender.Actor.noseInfoActor(false)}}else{Game.system.openItemWay(cost[0],cost[1])}};Object.defineProperty(ActorModel.prototype,"assistantNpcUrl",{get:function(){return Game.config.npc.getConfig(105).avatarUrl},enumerable:true,configurable:true});ActorModel.assetLenth=4;return ActorModel}(Games.MModel));Games.ActorModel=ActorModel})(Games||(Games={}));var Games;(function(Games){var BagModel=(function(_super){__extends(BagModel,_super);function BagModel(){return _super!==null&&_super.apply(this,arguments)||this}BagModel.prototype.GetBagVolume=function(){var va;if(Game.config.global.getConfig(35)){va=Game.config.global.getConfig(35).value}else{va=0}var roomInfo=Game.moduleModel.building.getRoomByType(6);if(roomInfo==null){return va}var effectId=roomInfo.id*100+1;var effect=Game.config.buildingEffect.getConfig(effectId);if(effect){return va+effect.par1}return va};BagModel.prototype.GetItemNumByType=function(type){var num=0;var itemList=Game.moduleModel.item.itemList;for(var _i=0,itemList_1=itemList;_i<itemList_1.length;_i++){var item=itemList_1[_i];if(item.itemType==type){num+=item.itemNum}}return num};BagModel.prototype.GetItemType=function(itemId){return Game.config.item.getType(itemId)};BagModel.prototype.IsItemFull=function(itemId,itemNum){if(itemNum===void 0){itemNum=1}var type=this.GetItemType(itemId);if(type==4){return this.IsBagFull(itemNum)}if(itemId==Game.config.global.getConfig(GlobalKey.Movie_Licence_ID).value){var propNum=Game.moduleModel.item.getItemNum(itemId);return propNum+itemNum>Game.config.global.getConfig(GlobalKey.Licence_Store_Max).value}return false};BagModel.prototype.IsLicenceFull=function(itemId,itemNum){if(itemId==Game.config.global.getConfig(GlobalKey.Movie_Licence_ID).value){var propNum=Game.moduleModel.item.getItemNum(itemId);return propNum+itemNum>Game.config.global.getConfig(GlobalKey.Licence_Store_Max).value}return false};BagModel.prototype.IsBagFull=function(addNum){if(addNum===void 0){addNum=1}var volume=this.GetBagVolume();var propNum=this.GetItemNumByType(4);return propNum+addNum>volume};Object.defineProperty(BagModel.prototype,"RedNum",{get:function(){return this.RedGift+this.RedPact},enumerable:true,configurable:true});Object.defineProperty(BagModel.prototype,"RedGift",{get:function(){var list=Game.moduleModel.item.GetItemListByType([8,17]);return list.length},enumerable:true,configurable:true});Object.defineProperty(BagModel.prototype,"RedPact",{get:function(){var list=Game.moduleModel.item.GetItemListByType([7]);var num=0;for(var index=0;index<list.length;index++){var data=list[index];var actorId=data.itemConfig.actor_id;var actor=Game.moduleModel.actor.getActor(actorId);if(actor){continue}if(data.itemConfig.actor_num<=data.itemNum){num++}}num+=this.RedArtistPieces;return num},enumerable:true,configurable:true});Object.defineProperty(BagModel.prototype,"RedArtistPieces",{get:function(){var list=Game.moduleModel.item.GetItemListByType([16]);var num=0;for(var index=0;index<list.length;index++){var data=list[index];if(data.itemConfig.actor_num<=data.itemNum){num++}}return num},enumerable:true,configurable:true});return BagModel}(Games.MModel));Games.BagModel=BagModel})(Games||(Games={}));var Games;(function(Games){var FloorInfo=(function(){function FloorInfo(){this.index=0}return FloorInfo}());Games.FloorInfo=FloorInfo;var RoomInfo=(function(){function RoomInfo(){this.id=0;this.floor=0;this.name="room";this.type=0;this.isBuilded=false;this.sceneWidth=0;this.sceneHeight=0}Object.defineProperty(RoomInfo.prototype,"buildLevelConfig",{get:function(){return Game.config.buildingLevel.getConfig(this.id)},enumerable:true,configurable:true});Object.defineProperty(RoomInfo.prototype,"level",{get:function(){return this.buildLevelConfig.level},enumerable:true,configurable:true});RoomInfo.prototype.updateServer=function(info){this.id=info.roomId;this.floor=info.floor;var config=Game.config.buildingLevel.getConfig(info.roomId);this.name=config.name;this.type=config.type;this.isBuilded=true};RoomInfo.creatInfo=function(sinfo){var info=new RoomInfo();info.updateServer(sinfo);return info};return RoomInfo}());Games.RoomInfo=RoomInfo;var RoomAvatarData=(function(){function RoomAvatarData(){this.performType=Games.PerformType.FreeWalk;this.onEvent=true;this.eventId=0;this.roomId=0;this.roomType=0;this.avatarId=0;this.avatarUid=0;this.isEnterRoom=false}return RoomAvatarData}());Games.RoomAvatarData=RoomAvatarData;var BuildingModel=(function(_super){__extends(BuildingModel,_super);function BuildingModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.floorIndex=0;_this.roomInfoList=[];_this.roomInfoCacheList=[];_this.sScrollStart=new Signal();_this.sScrollEnd=new Signal();_this.isBuildListScrolling=false;_this.avatarLimitRoomType=[Games.RoomType.Cinema,Games.RoomType.Training];_this._isOnMeeting=false;_this.isInit=false;return _this}BuildingModel.prototype.install=function(){this.avatarDict=new Dictionary()};BuildingModel.prototype.addAvatar=function(roomType,unitData){var avatarList=this.getRoomAvatarList(roomType);if(!this.hasAvatar(roomType,unitData.info.uid)){avatarList.push(unitData)}};BuildingModel.prototype.removeAvatar=function(roomType,avatarUid){var avatarList=this.getRoomAvatarList(roomType);for(var i=0;i<avatarList.length;i++){if(avatarList[i].info.uid==avatarUid){avatarList.splice(i,1);break}}};BuildingModel.prototype.getRoomAvatarList=function(roomType){return this.avatarDict.getValue(roomType)||[]};BuildingModel.prototype.getAvatar=function(roomType,avatarUid){var avatarList=this.getRoomAvatarList(roomType);return avatarList.findOne(function(value){return value.info.uid==avatarUid})};BuildingModel.prototype.getAvatarRoomType=function(avatarId){var roomList=this.avatarDict.getValues();for(var i=0;i<roomList.length;i++){var avatarList=roomList[i];for(var j=0;j<avatarList.length;j++){var model=avatarList[j];if(model.info.id==avatarId){return model.roomInfo.type}}}return -1};Object.defineProperty(BuildingModel.prototype,"allRoomAvatarNum",{get:function(){var cnt=0;var allAvatarList=this.avatarDict.getValues();for(var _i=0,allAvatarList_1=allAvatarList;_i<allAvatarList_1.length;_i++){var avatarList=allAvatarList_1[_i];cnt+=avatarList.length}return cnt},enumerable:true,configurable:true});BuildingModel.prototype.findActorById=function(actorId){var roomAvatar;var allAvatarList=this.avatarDict.getValues();for(var _i=0,allAvatarList_2=allAvatarList;_i<allAvatarList_2.length;_i++){var avatarList=allAvatarList_2[_i];for(var _a=0,avatarList_1=avatarList;_a<avatarList_1.length;_a++){var unitData=avatarList_1[_a];if(unitData.info.id==actorId){roomAvatar=new RoomAvatarData();roomAvatar.avatarId=actorId;roomAvatar.avatarUid=unitData.info.uid;if(unitData.roomInfo){roomAvatar.roomType=unitData.roomInfo.type}return roomAvatar}}}return roomAvatar};BuildingModel.prototype.hasAvatar=function(roomType,avatarUid){return this.getAvatar(roomType,avatarUid)!=null};BuildingModel.prototype.getAvatarEnterRoomType=function(isCheckRoomLimit){if(isCheckRoomLimit===void 0){isCheckRoomLimit=true}var result=[];var roomTypes=this.avatarDict.getKeys();var maxActorCount=Games.AvatarManager.maxRoomActorCount;for(var _i=0,roomTypes_1=roomTypes;_i<roomTypes_1.length;_i++){var roomType=roomTypes_1[_i];roomType=Number(roomType);if(this.isAvatarLimitRoom(roomType)){continue}if(roomType==Games.RoomType.Meeting&&this.isOnMeeting){continue}if(roomType==Games.RoomType.Reception&&Games.AvatarManager.hasActorVisit){continue}if(Games.AvatarManager.isOnShoot){continue}if(isCheckRoomLimit){if(this.avatarDict.getValue(roomType).length<maxActorCount){result.push(roomType)}}else{result.push(roomType)}}if(result.length>0){var rdIndex=Random.range(0,result.length);return result[rdIndex]}return -1};BuildingModel.prototype.isAvatarLimitRoom=function(roomType){return this.avatarLimitRoomType.indexOf(roomType)!=-1};Object.defineProperty(BuildingModel.prototype,"isOnMeeting",{get:function(){return this._isOnMeeting},set:function(value){this._isOnMeeting=value},enumerable:true,configurable:true});BuildingModel.prototype.getRoomInfo=function(id){return this.roomInfoList.findOne(function(value){return value.id==id})};BuildingModel.prototype.getRoomByType=function(roomType){return this.roomInfoList.findOne(function(value){return value.type==roomType})};BuildingModel.prototype.getRoomLevel=function(roomType){var roomInfo=this.getRoomByType(roomType);if(roomInfo){return Game.config.buildingLevel.getConfig(roomInfo.id).level}return 0};BuildingModel.prototype.initRoomInfo=function(msg){this.roomInfoList.length=0;this.avatarDict.clear();for(var _i=0,_a=msg.buildRoomInfo;_i<_a.length;_i++){var rInfo=_a[_i];var cInfo=Games.RoomInfo.creatInfo(rInfo);this.addRoomInfo(cInfo)}this.floorIndex=User.info.extendFloor;if(!this.isInit){this.roomInfoCacheList=this.roomInfoList;this.isInit=true}else{this.syncRoomInfoList()}};BuildingModel.prototype.syncRoomInfoList=function(){var deltaList=[];var _loop_1=function(){var nInfo=this_1.roomInfoList[i];var index=this_1.roomInfoCacheList.findIndex(function(value){return value.type==nInfo.type});if(index==-1){deltaList.push(nInfo)}};var this_1=this;for(var i=0;i<this.roomInfoList.length;i++){_loop_1()}this.roomInfoCacheList=this.roomInfoList;if(deltaList.length>0){Game.event.dispatch(GameEventKey.GameEventKey_SyncRoomInfo,deltaList)}};BuildingModel.prototype.addRoomInfo=function(info){this.roomInfoList.push(info);this.avatarDict.add(info.type,[])};BuildingModel.prototype.upgradeRoom=function(preRoomId,roomId){var preRoomInfo=this.getRoomInfo(preRoomId);var cfg=Game.config.buildingLevel.getConfig(roomId);preRoomInfo.id=roomId;preRoomInfo.name=cfg.name};BuildingModel.prototype.getInfoList=function(){return this.roomInfoList};BuildingModel.prototype.validataBuildLevel=function(buildLevelId){var buildType=this.buildLevelId2BuildId(buildLevelId);var roomInfo=this.getRoomByType(buildType);if(roomInfo){var buildLevelCfg=Game.config.buildingLevel.getConfig(buildLevelId);if(buildLevelCfg){return buildLevelCfg.level<=roomInfo.level}}return false};BuildingModel.prototype.hasBuildById=function(buildId){return this.getRoomInfo(buildId)!=null};BuildingModel.prototype.hasBuildByType=function(buildType){return this.getRoomByType(buildType)!=null};BuildingModel.prototype.hasBuildFloorWithoutRoom=function(floorIndex){if(floorIndex===void 0){floorIndex=1}if(User.info.buildRoomInfo){return User.info.extendFloor==floorIndex&&User.info.buildRoomInfo.length<floorIndex}return false};BuildingModel.prototype.buildLevelId2BuildId=function(buildLevelId){return Math.floor(buildLevelId/1000)};Object.defineProperty(BuildingModel.prototype,"isTopFloor",{get:function(){return this.floorIndex>=Game.config.floor.getConfigList().length},enumerable:true,configurable:true});Object.defineProperty(BuildingModel.prototype,"isFreeFloor",{get:function(){var floorConfig=Game.config.floor.getConfig(this.floorIndex+1);if(floorConfig.cost.itemId==0||floorConfig.cost.itemNum==0){return true}return false},enumerable:true,configurable:true});BuildingModel.prototype.checkBuildFloorCondition=function(isShowAlert){if(isShowAlert===void 0){isShowAlert=false}var checkResult={result:true,reason:""};if(this.isTopFloor){return checkResult}var floorConfig=Game.config.floor.getConfig(this.floorIndex+1);if(User.info.level<floorConfig.level_req){checkResult.result=false;var msg=Game.config.msg.getTxtFormat(MsgKey.build_non_level,floorConfig.level_req);checkResult.reason=msg;if(isShowAlert){Game.system.toastText(msg);return checkResult}}if(this.isFreeFloor){checkResult.result=true}else{var itemcfg=Game.config.item.getConfig(floorConfig.cost.itemId);var hasItemNum=Game.moduleModel.item.getItemNum(floorConfig.cost.itemId);if(hasItemNum<floorConfig.cost.itemNum){checkResult.result=false;var msg=Game.config.msg.getTxtFormat(MsgKey.build_non_material,itemcfg.name);checkResult.reason=msg;if(isShowAlert){Game.system.openItemWay(floorConfig.cost.itemId,floorConfig.cost.itemNum)}}}return checkResult};BuildingModel.prototype.checkBuildFloorCityCondition=function(){var checkResult={result:true,reason:""};if(this.isTopFloor){return checkResult}var floorConfig=Game.config.floor.getConfig(this.floorIndex+1);if(User.info.level<floorConfig.level_req){checkResult.result=false;var msg=format(Games.TEXT.BuildFloorFailLevel,floorConfig.level_req);checkResult.reason=msg}var cityData=Game.moduleModel.market.GetMaxCity();if(floorConfig.city_req>0){if(cityData==null||cityData.id<floorConfig.city_req){checkResult.result=false;var cityCfg=Game.config.city.getConfig(floorConfig.city_req);var msg="";if(cityCfg){msg=format(Games.TEXT.BuildFloorFailCity,cityCfg.city_num,cityCfg.name)}checkResult.reason=msg}}return checkResult};BuildingModel.prototype.getBuildEffectPar=function(buildType,effectType){var buildInfo=this.getRoomByType(buildType);var par=0;if(buildInfo){var buildLvConfig=Game.config.buildingLevel.getConfig(buildInfo.id);if(buildLvConfig){var effects=buildLvConfig.effect_id;for(var index=0;index<effects.length;index++){var element=effects[index];var buildEffectCfg=Game.config.buildingEffect.getConfig(element);if(buildEffectCfg.effect==effectType){par=buildEffectCfg.par1}}}}return par};BuildingModel.prototype.getBuildEffectNum=function(buildType,itemId,itemNum){var buildInfo=this.getRoomByType(buildType);var num=itemNum;if(buildInfo){var buildLvConfig=Game.config.buildingLevel.getConfig(buildInfo.id);if(buildLvConfig){var effects=buildLvConfig.effect_id;for(var index=0;index<effects.length;index++){var element=effects[index];var buildEffectCfg=Game.config.buildingEffect.getConfig(element);switch(buildEffectCfg.effect){case Games.BuildingEffectType.effect_add_order_zan:if(itemId==buildEffectCfg.par1){num=Math.floor(itemNum*(buildEffectCfg.par2/100+1))}break;case Games.BuildingEffectType.effect_add_order_xuanchuan:if(itemId==buildEffectCfg.par1){num=itemNum+buildEffectCfg.par2}break;case Games.BuildingEffectType.effect_add_business_reward:num=Math.floor(itemNum*(buildEffectCfg.par1/100+1));break;case Games.BuildingEffectType.effect_add_fans_visit_reward:num=Math.floor(itemNum*(buildEffectCfg.par1/100+1));break;case Games.BuildingEffectType.effect_add_meeting_reward:num=Math.floor(itemNum*(buildEffectCfg.par1/100+1));break;default:break}}}}return num};Object.defineProperty(BuildingModel.prototype,"goldExchangeTimes",{get:function(){return 0},enumerable:true,configurable:true});return BuildingModel}(Games.MModel));Games.BuildingModel=BuildingModel})(Games||(Games={}));var Games;(function(Games){var BusinessModel=(function(_super){__extends(BusinessModel,_super);function BusinessModel(){return _super.call(this)||this}BusinessModel.prototype.getBusinessData=function(){return this.businessData};BusinessModel.prototype.addBusinessData=function(msg){if(this.businessData==null){this.businessData=new Games.BusinessData()}this.businessData.uuid=msg.uuid;this.businessData.id=msg.businessId;this.businessData.dailyCount=msg.dailyCount;this.businessData.lineLimit=msg.lineLimit;this.businessData.lastResetTime=msg.lastResetTime;this.businessData.lastUpdateTime=msg.lastUpdateTime;this.businessData.startToMaxTime();this.businessData.startResetDailyCountTime();return this.businessData};Object.defineProperty(BusinessModel.prototype,"isRed",{get:function(){var b=false;var isBuild=Game.moduleModel.building.hasBuildByType(Games.RoomType.Office);if(isBuild){if(this.businessData){b=this.businessData.isMax}}return b},enumerable:true,configurable:true});return BusinessModel}(Games.MModel));Games.BusinessModel=BusinessModel})(Games||(Games={}));var Games;(function(Games){var CooperationModel=(function(_super){__extends(CooperationModel,_super);function CooperationModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.cooperTaskData=null;_this.cooperateData=null;_this.sAccountCooperateDataUpdate=new Signal();_this.sCooperateTaskDataUpdate=new Signal();_this.taskIsHaveGetOne=false;_this.isHaveRedTip=false;_this.isRewardBoxRedTip=false;_this.isRewardTaskRedTip=false;_this.sReqTimeUpdate=new Signal();_this.lastReqTimeNum=0;_this._inviteCD=0;_this.btnDelayTime=0;_this.sSetDealyCanUseSignal=new Signal();_this.sReqTimeAutoUpdate=new Signal();_this.lastReqTimeAutoNum=0;_this._inviteCDAuto=0;_this.firstGetPartner=0;_this.partnerInfData=null;_this.sReqOtherInf=new TypedSignal();_this.searId=0;_this.sCallHavePartner=new Signal();_this.sUpdateBoxProgress=new TypedSignal();_this.sRewardGetCall=new TypedSignal();_this.sRewardHideCall=new Signal();return _this}CooperationModel.prototype.updateAccountCooperateData=function(msg,ops,uuid){if(ops===EGameDataOps.remove){console.error("================================删除");this.isHaveRedTip=false}else{this.cooperData=msg;if(this.havePartner){if(this.partnerInfData&&this.partnerInfData!==null&&this.partnerInfData.userId===parseInt(this.cooperData.friendEntityId)){}else{this.partnerInfData=null;this.sendGetOtherInf(parseInt(this.cooperData.friendEntityId))}if(this.cooperData.isRead){this.isHaveRedTip=true}else{this.isHaveRedTip=false}}else{this.isHaveRedTip=false;if(this.cooperData.appList&&this.cooperData.appList!==null&&this.cooperData.appList.length>0){if(this.partnerInfData&&this.partnerInfData!==null&&this.partnerInfData.userId===parseInt(this.cooperData.appList[0].entityId)){this.isHaveRedTip=true}else{this.sendGetOtherInf(parseInt(this.cooperData.appList[0].entityId))}}}this.sCallHavePartner.dispatch()}this.sAccountCooperateDataUpdate.dispatch()};CooperationModel.prototype.updateAutoCooperateData=function(msg,ops,uuid){if(ops===EGameDataOps.remove){this.cooperateData=null}else{this.cooperateData=msg}this.lastReqAutoTime()};CooperationModel.prototype.updatePlayerCooperateData=function(msg,ops,uuid){this.cooperPlayerData=msg;this.lastReqTime();this.lastReqAutoTime()};Object.defineProperty(CooperationModel.prototype,"isCanGetReward",{get:function(){if(Game.time.checkNewDayToRefrush(this.cooperPlayerData.lastTime,0)){return true}return false},enumerable:true,configurable:true});CooperationModel.prototype.updateCooperateTaskData=function(msg,ops,uuid){this.cooperTaskData=msg;if(ops===EGameDataOps.remove){this.isRewardBoxRedTip=false}else{this.sCooperateTaskDataUpdate.dispatch();this.isRewardBoxRedTip=false;for(var i=1;i<7;i++){var status_1=(this.cooperPlayerData.rewardStatus>>i)&1;if(this.isCanGetReward){status_1=0}var canGetReward=Game.moduleModel.cooperation.cooperTaskData.progree>i;if(status_1!==1){if(canGetReward){this.isRewardBoxRedTip=true}}}this.isRewardTaskRedTip=false;for(var i=0;i<this.cooperTaskData.tasks.length;i++){var task=this.cooperTaskData.tasks[i].starTasks;for(var j=0;j<task.length;j++){if(task[j].status===1){if(parseInt(task[j].receiveUuid)===User.info.entityId){this.isRewardTaskRedTip=true}}}}}};CooperationModel.prototype.lastReqTime=function(){if(this.cooperPlayerData&&this.cooperPlayerData!==null){if(!this.lastReqTimeTick||this.lastReqTimeTick===null){this.lastReqTimeTick=Game.tick.AddTick(1,-1,Handler.create(this,this.UpdatelastReqTime,null,false),null)}this.lastReqTimeTick.Restart()}};Object.defineProperty(CooperationModel.prototype,"inviteCD",{get:function(){if(this._inviteCD===0){this._inviteCD=Game.config.global.getConfig(GlobalKey.Cooperate_Invited_CD).value}return this._inviteCD},enumerable:true,configurable:true});CooperationModel.prototype.UpdatelastReqTime=function(){this.lastReqTimeNum=this.inviteCD-Game.time.getSubSecondsPre(this.cooperPlayerData.lastReqTime);if(this.lastReqTimeNum<=0){this.lastReqTimeNum=0;this.lastReqTimeTick.Stop()}this.sReqTimeUpdate.dispatch()};CooperationModel.prototype.setDealyCanUse=function(){var _this=this;if(this.btnDelayTime<=0){this.btnDelayTime=this.inviteCD*1000;setTimeout(function(){_this.btnDelayTime=0;_this.sSetDealyCanUseSignal.dispatch()},this.inviteCD*1000);return true}return false};CooperationModel.prototype.lastReqAutoTime=function(){if(this.cooperPlayerData&&this.cooperPlayerData!==null){if(!this.lastReqTimeAutoTick||this.lastReqTimeAutoTick===null){this.lastReqTimeAutoTick=Game.tick.AddTick(1,-1,Handler.create(this,this.UpdatelastReqAutoTime,null,false),null)}this.lastReqTimeAutoTick.Restart()}};Object.defineProperty(CooperationModel.prototype,"inviteCDAuto",{get:function(){if(this._inviteCDAuto===0){this._inviteCDAuto=Game.config.global.getConfig(GlobalKey.Cooperate_Public_Invited_Time).value}return this._inviteCDAuto},enumerable:true,configurable:true});CooperationModel.prototype.UpdatelastReqAutoTime=function(){if(this.cooperateData&&this.cooperateData!==null){this.lastReqTimeAutoNum=this.inviteCDAuto-Game.time.getSubSecondsPre(this.cooperPlayerData.lastAutoReqTime);if(this.lastReqTimeAutoNum<=0){this.lastReqTimeAutoNum=0;this.lastReqTimeAutoTick.Stop()}if(this.havePartner){this.cooperateData=null}}else{this.lastReqTimeAutoNum=0;if(this.lastReqTimeAutoTick&&this.lastReqTimeAutoTick!==null){this.lastReqTimeAutoTick.Stop()}}this.sReqTimeAutoUpdate.dispatch()};Object.defineProperty(CooperationModel.prototype,"havePartner",{get:function(){if(this.cooperData&&this.cooperData.friendEntityId&&this.cooperData.friendEntityId.length>0){return true}return false},enumerable:true,configurable:true});CooperationModel.prototype.sendGetOtherInf=function(entityId){this.searId=entityId;this.sReqOtherInf.add(this.handleGetOtherInf,this);Game.protosender.rank.GetPlayerShortData(entityId)};CooperationModel.prototype.handleGetOtherInf=function(msg){if(this.searId===msg.data.userId){this.partnerInfData=msg.data;this.sReqOtherInf.remove(this.handleGetOtherInf,this)}};CooperationModel.prototype.sendApply=function(entityId){Game.protosender.cooperate.Apply(entityId)};CooperationModel.prototype.sendRelieve=function(){Game.protosender.cooperate.Relieve()};CooperationModel.prototype.sendApprove=function(type,entityId){Game.protosender.cooperate.Approve(type,entityId)};CooperationModel.prototype.sendGetInfo=function(){Game.protosender.cooperate.GetInfo()};CooperationModel.prototype.sendTaskOperate=function(type,taskId,star){Game.protosender.cooperate.TaskOperate(type,taskId,star)};CooperationModel.prototype.sendGetTaskReward=function(taskId,star){Game.protosender.cooperate.GetTaskReward(taskId,star)};CooperationModel.prototype.sendGiveReward=function(itemId){Game.protosender.cooperate.GiveReward(itemId)};CooperationModel.prototype.sendGetProgressTask=function(index){Game.protosender.cooperate.GetProgressTask(index)};CooperationModel.prototype.sendCancelCooperate=function(){Game.protosender.cooperate.CancelCooperate()};CooperationModel.prototype.sendReadCooperate=function(){Game.protosender.cooperate.ReadCooperate()};CooperationModel.prototype.Apply=function(msg){};CooperationModel.prototype.Relieve=function(msg){};CooperationModel.prototype.Approve=function(msg){if(msg.type===1){this.partnerInfData=null}};CooperationModel.prototype.GetInfo=function(msg){};CooperationModel.prototype.TaskOperate=function(msg){};CooperationModel.prototype.GetTaskReward=function(msg){this.sRewardGetCall.dispatch(msg)};CooperationModel.prototype.GiveReward=function(msg){};CooperationModel.prototype.GetProgressTask=function(msg){this.sRewardGetCall.dispatch(msg)};CooperationModel.prototype.CancelCooperate=function(msg){};return CooperationModel}(Games.MModel));Games.CooperationModel=CooperationModel})(Games||(Games={}));var Games;(function(Games){var FunctionModel=(function(_super){__extends(FunctionModel,_super);function FunctionModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._isPlaying=false;_this._menuDict=new Dictionary();_this._menuList=[];_this._menuRedDict=new Dictionary();_this.submenuBarDict=new Dictionary();_this.submenus=[];return _this}FunctionModel.prototype.install=function(){_super.prototype.install.call(this);Game.protoOkEvent.add(ProtoEventKey.GameInfo,this.onUpdateGameInfoHandler,this);Game.protoOkEvent.add(ProtoEventKey.CityData,this.onUpdateCityDataHandler,this);Game.protoOkEvent.add(ProtoEventKey.CinemaBuild_UpgradeRoom,this.onUpgradeRoomHandler,this);Game.protoOobListOkEvent.add(ProtoEventKey.TaskData,this.onFinishTaskDataHandler,this);this._unlockDict=new Dictionary();this._initUnlockTypeDict=new Dictionary();this._allLockList=[];this._readyUnlockList=[];this.initFunc()};FunctionModel.prototype.onFinishTaskDataHandler=function(){this.initMainTask()};FunctionModel.prototype.onUpdateCityDataHandler=function(){this.initHoldCity()};FunctionModel.prototype.addMenuList=function(list){for(var i=0;i<list.length;i++){this.addMenu(list[i].menuId,list[i])}};FunctionModel.prototype.addSubMenu=function(subbarId,submenu){this.submenus.push(submenu);this.submenuBarDict.add(subbarId,submenu)};FunctionModel.prototype.getSubmenu=function(subbarId){return this.submenuBarDict.getValue(subbarId)};FunctionModel.prototype.getSubmenus=function(){return this.submenus};FunctionModel.prototype.getSubmenuIsOpened=function(subbarId){var subbar=this.getSubmenu(subbarId);if(subbar){return subbar.parent?true:false}return false};FunctionModel.prototype.addMenu=function(id,ctrl){this._menuDict.add(id,ctrl);this._menuList.push(ctrl)};FunctionModel.prototype.getMenuCtrl=function(id){var config=Game.config.unlock.getConfig(id);return this._menuDict.getValue(config.position)};FunctionModel.prototype.getMenuList=function(){return this._menuList};FunctionModel.prototype.getMenuCtrlByMenuId=function(menuId){var unlockConfig=Game.config.unlock.getUnlockConfig(menuId);var ctrl=null;if(unlockConfig){ctrl=this._menuDict.getValue(unlockConfig.id)}return ctrl};FunctionModel.prototype.onBuildRoomHandler=function(){this.checkBuildLevel()};FunctionModel.prototype.onUpgradeRoomHandler=function(){this.checkBuildLevel()};FunctionModel.prototype.checkBuildLevel=function(){this.checkUnlock(Games.UnlockType.BuildingLevel)};FunctionModel.prototype.checkHoldCity=function(){this.checkUnlock(Games.UnlockType.HoldCity)};FunctionModel.prototype.checkBlockLevel=function(){this.checkUnlock(Games.UnlockType.BlockLevel)};FunctionModel.prototype.checkLevelUp=function(){this.checkUnlock(Games.UnlockType.Level)};FunctionModel.prototype.checkMainTask=function(){this.checkUnlock(Games.UnlockType.MainTask)};FunctionModel.prototype.onUpdateGameInfoHandler=function(){this.addUnlockByType(Games.UnlockType.Level);this.addUnlockByType(Games.UnlockType.BlockLevel);this.addUnlockByType(Games.UnlockType.BuildingLevel)};FunctionModel.prototype.addUnlockByType=function(type){if(this._initUnlockTypeDict.getValue(type)!=true){this._initUnlockTypeDict.add(type,true);this.resetFuncByType(type)}};FunctionModel.prototype.initHoldCity=function(){var type=Games.UnlockType.HoldCity;this.addUnlockByType(type)};FunctionModel.prototype.initMainTask=function(){var type=Games.UnlockType.MainTask;this.addUnlockByType(type)};FunctionModel.prototype.initFunc=function(){this._unlockDict.clear();this._initUnlockTypeDict.clear();this._readyUnlockList.splice(0,this._readyUnlockList.length);this._allLockList=Game.config.unlock.getConfigList().concat()};FunctionModel.prototype.resetFuncByType=function(type){var list=this.getUnlockMenuId(type);for(var index=0;index<list.length;index++){var unlockId=list[index];this._unlockDict.add(unlockId,true)}if(list.length>0){Game.event.dispatch(GameEventKey.GameEventKey_UnlockInit,type)}};FunctionModel.prototype.checkUnlock=function(type){var newList=this.getUnlockMenuId(type);this._readyUnlockList=this._readyUnlockList.concat(newList);for(var index=0;index<newList.length;index++){var element=newList[index];var unlockConfig=Game.config.unlock.getConfig(element);if(unlockConfig&&unlockConfig.is_new){this._menuRedDict.add(unlockConfig.menuId,true)}}if(this._isPlaying==false){this.playUnlock()}};FunctionModel.prototype.playUnlock=function(){if(this._readyUnlockList.length>0){var id=this._readyUnlockList.shift();this._unlockDict.add(id,true);var config=Game.config.unlock.getConfig(id);if(config&&(config.isOpenShow||config.isOpenShowMenu)){if(config.isOpenShowMenu){Game.event.add(GameEventKey.GameFrame_CloseMenu,this.closeMenu,this);Game.event.dispatch(GameEventKey.GameEventKey_UnlockChange,id);this._isPlaying=false;Game.menu.open(config.menuId)}else{this._isPlaying=true;Game.system.openUnlock(id)}}else{Game.event.dispatch(GameEventKey.GameEventKey_UnlockChange,id);this.playUnlock()}}else{this._isPlaying=false}return this._isPlaying};FunctionModel.prototype.closeMenu=function(menuId){Game.event.remove(GameEventKey.GameFrame_CloseMenu,this.closeMenu,this);this.playUnlock()};FunctionModel.prototype.closeSubmenus=function(){var list=Game.moduleModel.func.getSubmenus();for(var i=0;i<list.length;i++){Games.MenuLayer.home.hidePopup(list[i])}};FunctionModel.prototype.getUnlockMenuId=function(type){var list=Game.config.unlock.getUnlocks(type);var unlocks=[];for(var index=0;index<list.length;index++){var config=list[index];if(config.isUnlock&&this.isUnlock(config.id)==false){unlocks.push(config.id)}}if(unlocks.length>0){unlocks.sort(function(a,b){return a-b})}return unlocks};FunctionModel.prototype.isUnlock=function(id){var unlock=false;if(this._unlockDict.hasKey(id)){unlock=this._unlockDict.getValue(id)}return unlock};FunctionModel.prototype.refreshProgress=function(id){var btnCtrl=this.getMenuCtrl(id);if(btnCtrl){btnCtrl.refreshProgress()}};FunctionModel.prototype.clearNewFlag=function(menuId){if(this._menuRedDict.hasKey(menuId)){this._menuRedDict.remove(menuId)}};FunctionModel.prototype.getIsNewMenu=function(menuId){var isNew=false;if(this._menuRedDict.hasKey(menuId)){isNew=this._menuRedDict.getValue(menuId)}return isNew};return FunctionModel}(Games.MModel));Games.FunctionModel=FunctionModel})(Games||(Games={}));var Games;(function(Games){var GuideModel=(function(_super){__extends(GuideModel,_super);function GuideModel(){var _this=_super.call(this)||this;_this.finishGuides=new Dictionary();_this.finishStorys=new Dictionary();_this.finishStoryList=new Array();_this.finishGuideList=new Array();_this.guideOffset=1000;_this._guideCompleteStatus=0;return _this}Object.defineProperty(GuideModel.prototype,"guideCompleteStatus",{get:function(){return this._guideCompleteStatus},set:function(value){this._guideCompleteStatus=value},enumerable:true,configurable:true});GuideModel.prototype.addFinishGuideId=function(id){if(id>0){if(this.isGuideFinished(id)!=true){this.finishGuides.add(id,true);this.addGuideFinishId(id);console.log("发送给服务器 引导id",id);Game.protosender.BeginnerGuide.CompleteGuide(id,Proto.SE.EGuideType.guide);Games.Static.Instance.onFinishTutorial(id)}}};GuideModel.prototype.addFinishStoryId=function(id){if(id>0){if(this.isStoryFinished(id)!=true){this.finishStorys.add(id,true);this.addStoryFinishId(id);console.log("发送给服务器 剧情id",id);Game.protosender.BeginnerGuide.CompleteGuide(id,Proto.SE.EGuideType.story)}}};GuideModel.prototype.initFinishId=function(guideIds,storyIds){this.clearFinishIds();if(storyIds){for(var index=0;index<storyIds.length;index++){var id=storyIds[index];this.finishStorys.add(id,true);this.addStoryFinishId(id)}}if(guideIds){for(var index=0;index<guideIds.length;index++){var id=guideIds[index];this.finishGuides.add(id,true);this.addFinishGuideId(id)}}};GuideModel.prototype.addStoryFinishId=function(id){if(this.finishStoryList.indexOf(id)==-1){this.finishStoryList.push(id)}};GuideModel.prototype.addGuideFinishId=function(id){if(this.finishGuideList.indexOf(id)==-1){this.finishGuideList.push(id)}};GuideModel.prototype.isStoryFinished=function(id){var finish=this.finishStorys.hasKey(id);return finish};GuideModel.prototype.isFinishStoryGroup=function(id){var configs=Game.config.storyline.getConfigListByGroup(id);var isFinished=true;for(var index=0;index<configs.length;index++){var element=configs[index];if(this.isStoryFinished(element.id)==false){isFinished=false}}return isFinished};GuideModel.prototype.isFinishMovieUp=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask&&mainTask.id==id){return mainTask.isFinished}return false};GuideModel.prototype.isGuideFinished=function(id){var finish=this.finishGuides.hasKey(id);return finish};GuideModel.prototype.isGuideOrStoryFinished=function(id,type){var finish=false;switch(type){case Proto.SE.EGuideType.story:if(this.finishStorys.hasKey(id)){finish=this.finishStorys.getValue(id)}break;case Proto.SE.EGuideType.guide:if(this.finishGuides.hasKey(id)){finish=this.finishGuides.getValue(id)}break;default:break}return finish};GuideModel.prototype.clearFinishIds=function(){this.finishGuides.clear();this.finishStorys.clear();this.finishStoryList.splice(0,this.finishStoryList.length)};Object.defineProperty(GuideModel.prototype,"finishGuideNums",{get:function(){return this.finishGuides.count},enumerable:true,configurable:true});Object.defineProperty(GuideModel.prototype,"finishStoryNums",{get:function(){return this.finishStorys.count},enumerable:true,configurable:true});Object.defineProperty(GuideModel.prototype,"storyLists",{get:function(){var list=[];for(var index=0;index<this.finishStoryList.length;index++){var element=this.finishStoryList[index];var config=Game.config.storyline.getConfig(element);if(config){if(isNaN(config.ui_type)||config.ui_type<=0){list.push(config)}}}list.sort(function(a,b){return a.id-b.id});return list},enumerable:true,configurable:true});GuideModel.prototype.getGuideIsMakeBuild=function(id){var hasBuild=Game.moduleModel.building.hasBuildById(id);return hasBuild};GuideModel.prototype.getGuideIsUpgradeBuild=function(id,lv){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsUpgradeActor=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsNoseActor=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsStreetPublicize=function(id){return Game.moduleModel.market.IsTaskCityPointFinish(id)};GuideModel.prototype.getGuideIsRoadShow=function(id){return Game.moduleModel.market.IsTaskRoadShowFinish(id)};GuideModel.prototype.getGuideIsCityFinish=function(id){return Game.moduleModel.market.IsTaskCityFinish(id)};GuideModel.prototype.getGuideIsTakeMovie=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsSeeMovieReward=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsGetMovieReward=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsUpgradeAttention=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsAppointActor=function(id,count){return Game.moduleModel.market.IsTaskAppointActor(id,count)};GuideModel.prototype.getGuideIsChooseFocusPointCity=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsGetCityReward=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsDoPuduct=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsCompleteOrder=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsDoBusiness=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsFansVisit=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsGetTotalRewardMovie=function(id){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask){return mainTask.isFinished}return false};GuideModel.prototype.getGuideIsExpendFloor=function(id){var expendFloor=Game.moduleModel.building.hasBuildFloorWithoutRoom(User.info.extendFloor);return expendFloor};GuideModel.prototype.getGuideIsSelectContory=function(id){var menuCtl=Game.menu.getMenuCtl(Games.MenuId.Market);if(menuCtl&&menuCtl.moduleWindow&&menuCtl.moduleWindow){var content=menuCtl.moduleWindow;return content.guideCurrentCountry==id}return false};GuideModel.prototype.getGuideIsSelectCity=function(id){var menuCtl=Game.menu.getMenuCtl(Games.MenuId.Market);if(menuCtl&&menuCtl.moduleWindow&&menuCtl.moduleWindow){var content=menuCtl.moduleWindow;return content.guideCurrentCity==id}return false};GuideModel.prototype.getGuideIsOrderIntoBox=function(num){return Game.moduleModel.order.getIsFinishedPutNum()>=num};GuideModel.prototype.getGuideIsSecretary=function(key){return Game.moduleModel.secretary.isAuto(key)};GuideModel.prototype.getGuideIsSetPublicizeActor=function(id){return Game.moduleModel.market.IsTaskPublicityActor(id)};Object.defineProperty(GuideModel.prototype,"isFinishFirst",{get:function(){return this.isGuideFinished(GuideModel.firstStepId)},enumerable:true,configurable:true});GuideModel.isFirstGuide=function(id){return this.firstStepId==id};Object.defineProperty(GuideModel.prototype,"isPopupGuideComplete",{get:function(){if(Game.moduleModel.task.getCurrentMainTask()==null&&Game.moduleModel.guide.guideCompleteStatus==0){return true}return false},enumerable:true,configurable:true});GuideModel.firstStepId=100101;GuideModel.initActorId=999901;GuideModel.goldExchangeStepId=105501;return GuideModel}(Games.MModel));Games.GuideModel=GuideModel})(Games||(Games={}));var Games;(function(Games){var ItemModel=(function(_super){__extends(ItemModel,_super);function ItemModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dict=new Dictionary();_this.dictByUuid=new Dictionary();return _this}ItemModel.prototype.CreateItem=function(id,num){var item=new Games.ItemData();item.itemId=id;item.itemNum=num;return item};Object.defineProperty(ItemModel.prototype,"itemList",{get:function(){var list=[];var items=this.dict.getValues();for(var i=0;i<items.length;i++){if(items[i].itemNum>0&&items[i].itemConfig){list.push(items[i])}}return list},enumerable:true,configurable:true});ItemModel.prototype.GetItemListByType=function(types){var list=[];var items=this.dict.getValues();for(var i=0;i<items.length;i++){for(var j=0;j<types.length;j++){var type=types[j];if(items[i].itemType==type&&items[i].itemNum>0&&items[i].itemConfig){list.push(items[i]);break}}}return list};ItemModel.prototype.getItemByUuid=function(uuid){if(this.dictByUuid.hasKey(uuid)){return this.dictByUuid.getValue(uuid)}else{return null}};ItemModel.prototype.getItemNumByUuid=function(uuid){var item=this.getItemByUuid(uuid);if(item){return item.itemNum}return 0};ItemModel.prototype.getItem=function(itemId){if(this.dict.hasKey(itemId)){return this.dict.getValue(itemId)}else{var item=Games.ItemData.Create(itemId,0);this.dict.add(itemId,item);return item}};ItemModel.prototype.getItemNumTxt=function(itemId){return formatNumberUnit(this.getItemNum(itemId))};ItemModel.prototype.getItemNum=function(itemId){var item=this.getItem(itemId);if(item){return item.itemNum}return 0};ItemModel.prototype.setItemNum=function(itemId,itemNum,uuid,createTime){var item;if(uuid){item=this.getItemByUuid(uuid);if(!item&&itemId>0){item=this.getItem(itemId);item.uuid=uuid;this.dictByUuid.add(uuid,item)}}if(!item){item=this.getItem(itemId)}item.itemNum=itemNum;if(createTime!==undefined){item.createTime=createTime}};ItemModel.prototype.hasItemNum=function(itemId,needNum){return this.getItemNum(itemId)>=needNum};return ItemModel}(Games.MModel));Games.ItemModel=ItemModel})(Games||(Games={}));var Games;(function(Games){var MailModel=(function(_super){__extends(MailModel,_super);function MailModel(){var _this=_super.call(this)||this;_this.lastDelectMail=[];_this.dict=new Dictionary();return _this}Object.defineProperty(MailModel.prototype,"mailList",{get:function(){var list=[];var items=this.dict.getValues();for(var i=0;i<items.length;i++){if(items[i]){list.push(items[i])}}return list},enumerable:true,configurable:true});MailModel.prototype.UpdateServeMailData=function(mail){var data=Games.MailData.Create(mail);this.dict.add(mail.uuid,data)};MailModel.prototype.RemoveMailData=function(uuid){this.dict.remove(uuid)};MailModel.prototype.GetMailList=function(){return this.mailList.sort(function(a,b){if(a.IsNew==true&&b.IsNew!=true){return -1}if(a.IsNew!=true&&b.IsNew==true){return 1}return b.createTime-a.createTime})};MailModel.prototype.GetMail=function(uuid){return this.dict.getValue(uuid)};MailModel.prototype.DeleteMail=function(uuid){this.lastDelectMail=[];var mail=this.GetMail(uuid);if(mail&&(mail.itemList.length==0||mail.IsRewardGot)){this.lastDelectMail.push(uuid);Game.protosender.Mail.MailDelete(uuid)}};MailModel.prototype.RewardMail=function(uuid,showError){if(showError==null){showError=true}var mail=this.GetMail(uuid);var rewardList=[];if(mail&&!mail.IsRewardGot&&mail.itemList.length>0){var itemNums=0;for(var _i=0,_a=mail.itemList;_i<_a.length;_i++){var item=_a[_i];var cfg=Game.config.item.getConfig(item.itemId);if(cfg&&cfg.type==4){itemNums+=item.amount}if(Game.moduleModel.bag.IsLicenceFull(item.itemId,item.amount)){if(showError){Game.system.toastText(Games.TEXT.LincenceMax)}return false}}if(Game.moduleModel.bag.IsBagFull(itemNums)){if(showError){Game.system.toastMsg(MsgKey.produce_warehouse_max)}return false}Game.protosender.Mail.MailGetReward(uuid);for(var _b=0,_c=mail.itemList;_b<_c.length;_b++){var item=_c[_b];var reward=new DTItemNum();reward.itemId=item.itemId;reward.itemNum=item.amount;rewardList.push(reward)}return rewardList}return false};MailModel.prototype.ReadMail=function(uuid){var mail=this.GetMail(uuid);if(mail&&mail.isNew){Game.protosender.Mail.MailRead(uuid)}};MailModel.prototype.DeleteAll=function(){var mailList=this.GetMailList();var deleteList=[];for(var _i=0,mailList_1=mailList;_i<mailList_1.length;_i++){var mail=mailList_1[_i];if(mail.IsNew){continue}if(mail.itemList.length>0&&!mail.IsRewardGot){continue}deleteList.push(mail.uuid)}if(deleteList.length==0){Game.system.toastMsg(MsgKey.non_deletable_mail)}else{this.lastDelectMail=deleteList;Game.protosender.Mail.MailDeleteMany(deleteList)}};MailModel.prototype.RewardAll=function(){var mailList=this.GetMailList();var rewardMailList=[];var itemNums=0;var isFull=false;var isLicenceLimit=false;var licenceAddNum=0;var Movie_Licence_ID=Game.config.global.getConfig(GlobalKey.Movie_Licence_ID).value;for(var _i=0,mailList_2=mailList;_i<mailList_2.length;_i++){var mail=mailList_2[_i];if(mail.itemList.length==0||mail.IsRewardGot){continue}var thItems=0;var thLicenceNum=0;for(var _a=0,_b=mail.itemList;_a<_b.length;_a++){var item=_b[_a];var cfg=Game.config.item.getConfig(item.itemId);if(cfg&&cfg.type==4){thItems+=item.amount}if(item.itemId==Movie_Licence_ID){thLicenceNum+=item.amount}}if(item.itemId==Movie_Licence_ID){if(Game.moduleModel.bag.IsLicenceFull(item.itemId,item.amount+licenceAddNum)){isLicenceLimit=true;continue}else{licenceAddNum++}}if(Game.moduleModel.bag.IsBagFull(itemNums+thItems)){isFull=true;continue}itemNums+=thItems;rewardMailList.push(mail.uuid)}if(rewardMailList.length>0){Game.protosender.Mail.MailGetRewardMany(rewardMailList)}if(isFull){Game.system.toastMsg(MsgKey.produce_warehouse_max)}if(isLicenceLimit){Game.system.toastText(Games.TEXT.LincenceMax)}if((!isLicenceLimit&&!isFull)&&rewardMailList.length==0){Game.system.toastMsg(MsgKey.non_can_receive_mail)}};Object.defineProperty(MailModel.prototype,"RedNum",{get:function(){var mailList=this.GetMailList();var num=0;for(var index=0;index<mailList.length;index++){var mail=mailList[index];if(mail.IsNew){num++}}return Math.min(num,999)},enumerable:true,configurable:true});return MailModel}(Games.MModel));Games.MailModel=MailModel})(Games||(Games={}));var Games;(function(Games){var MarketModel=(function(_super){__extends(MarketModel,_super);function MarketModel(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MarketModel.prototype,"IsGetCityReward",{get:function(){return this.isGetCityReward},set:function(value){this.isGetCityReward=value},enumerable:true,configurable:true});Object.defineProperty(MarketModel.prototype,"Info",{get:function(){if(this.info==null){console.log("Proto CityData is NULL!");return new Proto.SS.CityData()}return this.info},enumerable:true,configurable:true});MarketModel.prototype.GetMaxCity=function(){var lastCity=this.GetLastCity();if(lastCity==null){return null}var maxCityId=lastCity.cfg.pre_id;if(maxCityId==0){return null}return this.GetCity(maxCityId)};MarketModel.prototype.UpdateCityData=function(msg){this.info=msg;this.info.lastAreaProgress=Math.floor(this.info.lastAreaProgress/100)};MarketModel.prototype.GetCityCfg=function(id){return Game.config.city.getConfig(id)};MarketModel.prototype.GetStreetState=function(id){var streetCfg=Game.config.street.getConfig(id);var cityId=streetCfg.city;var cityState=this.GetCityState(cityId);if(cityState==Games.CityStateEnum.hasOccupy||cityState==Games.CityStateEnum.FinishPublicity||cityState==Games.CityStateEnum.FinishRoadShow){return Games.StreetStateEnum.HasOccupy}if(cityState==Games.CityStateEnum.Lock){return Games.StreetStateEnum.NotOccupy}if(cityState==Games.CityStateEnum.InOccupy){if(id==this.Info.lastArea){if(this.Info.lastAreaProgress>=100){return Games.StreetStateEnum.HasOccupy}return Games.StreetStateEnum.InOccupy}if(id<this.Info.lastArea){return Games.StreetStateEnum.HasOccupy}return Games.StreetStateEnum.NotOccupy}};MarketModel.prototype.GetCityState=function(id){var cityCfg=Game.config.city.getConfig(id);if(cityCfg==null){return Games.CityStateEnum.Lock}var countryId=cityCfg.country;var countryState=this.GetCountryState(countryId);if(countryState==Games.CountryStateEnum.HasOccupy){return Games.CityStateEnum.hasOccupy}if(countryState==Games.CountryStateEnum.NotOccupy){return Games.CityStateEnum.Lock}var sortValue=Game.config.city.sort(id,this.Info.lastCity);if(sortValue>0){return Games.CityStateEnum.Lock}if(sortValue<0){return Games.CityStateEnum.hasOccupy}if(this.Info.roadShowFlag){return Games.CityStateEnum.FinishRoadShow}var progress=this.GetCityProgress();if(progress==100){return Games.CityStateEnum.FinishPublicity}return Games.CityStateEnum.InOccupy};MarketModel.prototype.GetCountryState=function(id){var lastCountry=this.GetLastCountryId();var sortValue=Game.config.country.sort(id,lastCountry);if(sortValue==0){return Games.CountryStateEnum.InOccupy}if(sortValue>0){return Games.CountryStateEnum.NotOccupy}if(sortValue<0){return Games.CountryStateEnum.HasOccupy}};MarketModel.prototype.GetCity=function(id){if(id==null||id==0){return null}return new Games.CityData(id,this.GetCityState(id),id==this.Info.headquarters)};MarketModel.prototype.GetHomeCity=function(){if(this.Info.headquarters==0){return null}return this.GetCity(this.Info.headquarters)};MarketModel.prototype.GetLastCity=function(){if(this.Info.lastCity==0){return null}return this.GetCity(this.Info.lastCity)};MarketModel.prototype.GetLastStreet=function(){var state=Games.StreetStateEnum.InOccupy;if(this.Info.lastAreaProgress>=100){state=Games.StreetStateEnum.HasOccupy}return new Games.CityStreetData(this.Info.lastArea,state,this.Info.lastAreaProgress)};MarketModel.prototype.GetPublicRewards=function(street){var list=[];var item=new DTItemNum();item.itemId=2;item.itemNum=street.cfg.once_reward;list.push(item);return list};MarketModel.prototype.GetCityGoldSpeed=function(){return this.Info.speedGold/100};MarketModel.prototype.GetCityFansSpeed=function(){return this.Info.speedFans};MarketModel.prototype.GetCurGold=function(){var time=Game.time.getSubSecondsPre(this.Info.lastDropTimestamp);var speed=this.GetCityGoldSpeed();return Math.ceil(this.Info.lastGold+time*speed)};MarketModel.prototype.GetCurFans=function(){var time=Game.time.getSubSecondsPre(this.Info.lastDropTimestamp);var speed=this.GetCityFansSpeed();return Math.ceil(this.Info.lastFans+time*speed)};Object.defineProperty(MarketModel.prototype,"GoldLimit",{get:function(){return this.Info.maxGold},enumerable:true,configurable:true});Object.defineProperty(MarketModel.prototype,"FansLimit",{get:function(){return this.Info.maxFans},enumerable:true,configurable:true});Object.defineProperty(MarketModel.prototype,"FansLimitTime",{get:function(){return this.FansLimit/this.GetCityFansSpeed()/3600},enumerable:true,configurable:true});Object.defineProperty(MarketModel.prototype,"GoldLimitTime",{get:function(){return this.GoldLimit/this.GetCityGoldSpeed()/3600},enumerable:true,configurable:true});MarketModel.prototype.GetCityReward=function(cityId){var random_out=Game.config.city.getConfig(cityId).random_out;return random_out};MarketModel.prototype.GetCityRewardNum=function(itemId){for(var index=0;index<this.Info.dropList.length;index++){var item=this.Info.dropList[index];return item.amount}return 0};MarketModel.prototype.IsCityRewardUnlock=function(id){return true};MarketModel.prototype.GetAmbassadorNum=function(){var num=0;for(var index=0;index<this.Info.ambassador.length;index++){var element=this.Info.ambassador[index];if(element!=0){num++}}return num};MarketModel.prototype.GetAmbassador=function(){return this.Info.ambassador};Object.defineProperty(MarketModel.prototype,"IsUnlockFiveActor",{get:function(){var cfg=Game.config.blockLevel.getConfig(User.info.stall);if(cfg){return cfg.city_envoy_max==1}return true},enumerable:true,configurable:true});MarketModel.prototype.GetRoadShowCost=function(){return this.GetCityCfg(this.Info.lastCity).show_cost};MarketModel.prototype.GetCityProgress=function(){if(this.Info.lastArea==0){return 0}var occupyNum=0;var cfg=Game.config.street.getConfig(this.Info.lastArea);if(this.Info.lastAreaProgress>=100){occupyNum=cfg.city_schedule}var id=cfg.pre_id;while(id!=0){cfg=Game.config.street.getConfig(id);if(cfg.city!=this.Info.lastCity){break}occupyNum=occupyNum+cfg.city_schedule;id=cfg.pre_id}if(occupyNum>=99){occupyNum=100}return occupyNum};MarketModel.prototype.GetCountry=function(id){return new Games.CountryData(id)};MarketModel.prototype.GetCountryProgress=function(countryId){var lastCountry=this.GetLastCountryId();if(countryId!=lastCountry){return Game.config.country.getConfig(countryId).city_num}if(this.Info.lastCity==0){return 0}var cfg=Game.config.city.getConfig(this.Info.lastCity);var id=cfg.pre_id;var occupyNum=0;while(id!=0){cfg=Game.config.city.getConfig(id);if(cfg.country!=lastCountry){break}occupyNum++;id=cfg.pre_id}return occupyNum};MarketModel.prototype.GetPublicityCost=function(){return Game.config.street.getConfig(this.Info.lastArea).publicize_cost};MarketModel.prototype.GetStreetDemand=function(){return Game.config.street.GetRequire(this.Info.lastArea)};MarketModel.prototype.GetCityDemand=function(cityId,index){var list=Game.config.city.GetCityRequire(cityId);return list[index]};MarketModel.prototype.GetPublicityDemandText=function(){var demandList=this.GetStreetDemand();if(demandList.length==0){return""}var demand=this.GetDemandExplain(demandList[demandList.length-1]);return Games.TEXT.MarketPublicityInfo.format(demand)};MarketModel.prototype.GetStreetDemandText=function(){return this.GetDemandListText(this.GetStreetDemand())};MarketModel.prototype.GetDemandListText=function(list){var str="";for(var index=0;index<list.length;index++){var data=list[index];var demand=data;var value=data.value;str+=this.GetActorDemandText(demand,demand.value);if(index<list.length-1){str+="\n"}}return str};MarketModel.prototype.GetPropertyName=function(id){var cfg=Game.config.property.getConfig(id);if(cfg==null){return"error"}return cfg.name};MarketModel.prototype.GetPropertyIcon=function(id){var cfg=Game.config.property.getConfig(id);if(cfg==null){return"error"}return cfg.iconUrl};MarketModel.prototype.GetDemandExplain=function(demand){var name="";switch(demand.type){case Games.ActorRequireEnum.age:case Games.ActorRequireEnum.sex:case Games.ActorRequireEnum.type:case Games.ActorRequireEnum.Continents:name=this.GetPropertyName(demand.value);break;case Games.ActorRequireEnum.art:case Games.ActorRequireEnum.entertainment:case Games.ActorRequireEnum.performance:case Games.ActorRequireEnum.plot:case Games.ActorRequireEnum.scene:name=this.GetDemandTypeName(demand.type);break;default:break}return name};MarketModel.prototype.GetDemandTypeName=function(type){var name="";switch(type){case Games.ActorRequireEnum.age:name=Games.TEXT.age;break;case Games.ActorRequireEnum.sex:name=Games.TEXT.sex;break;case Games.ActorRequireEnum.type:name=Games.TEXT.type;break;case Games.ActorRequireEnum.Continents:name=Games.TEXT.country;break;case Games.ActorRequireEnum.art:name=this.GetPropertyName(1604);break;case Games.ActorRequireEnum.entertainment:name=this.GetPropertyName(1605);break;case Games.ActorRequireEnum.performance:name=this.GetPropertyName(1602);break;case Games.ActorRequireEnum.plot:name=this.GetPropertyName(1603);break;case Games.ActorRequireEnum.scene:name=this.GetPropertyName(1601);break;default:break}return name};MarketModel.prototype.GetDemandTypeIcon=function(type){var name="";switch(type){case Games.ActorRequireEnum.art:name=this.GetPropertyIcon(1604);break;case Games.ActorRequireEnum.entertainment:name=this.GetPropertyIcon(1605);break;case Games.ActorRequireEnum.performance:name=this.GetPropertyIcon(1602);break;case Games.ActorRequireEnum.plot:name=this.GetPropertyIcon(1603);break;case Games.ActorRequireEnum.scene:name=this.GetPropertyIcon(1601);break;default:break}return name};MarketModel.prototype.GetActorDemandText=function(demand,value){var type=demand.type;var name;var strValue;name=this.GetDemandTypeName(demand.type)+":";switch(type){case Games.ActorRequireEnum.age:case Games.ActorRequireEnum.Continents:case Games.ActorRequireEnum.sex:case Games.ActorRequireEnum.type:strValue=this.GetPropertyName(value);break;case Games.ActorRequireEnum.art:case Games.ActorRequireEnum.entertainment:case Games.ActorRequireEnum.performance:case Games.ActorRequireEnum.plot:case Games.ActorRequireEnum.scene:strValue=value.toString();break;default:break}return name+strValue};MarketModel.prototype.GetActorDemandValueText=function(demand,value){var type=demand.type;var strValue;switch(type){case Games.ActorRequireEnum.age:case Games.ActorRequireEnum.Continents:case Games.ActorRequireEnum.sex:case Games.ActorRequireEnum.type:strValue=this.GetPropertyName(value);break;case Games.ActorRequireEnum.art:case Games.ActorRequireEnum.entertainment:case Games.ActorRequireEnum.performance:case Games.ActorRequireEnum.plot:case Games.ActorRequireEnum.scene:strValue=value.toString();break;default:break}return strValue};MarketModel.prototype.GetLastCountryId=function(){var cfg=this.GetCityCfg(this.Info.lastCity);if(cfg==null){return 0}return cfg.country};MarketModel.prototype.GetHomeCountryId=function(){if(this.Info.headquarters==0){return 0}return this.GetCityCfg(this.Info.headquarters).country};MarketModel.prototype.GetNextUnlockCountryId=function(id){var cfg=Game.config.country.getConfig(id);if(cfg){var next=cfg.next_country;if(next!=0){var lastId=this.GetLastCountryId();if(Game.config.country.sort(lastId,next)>=0){return next}}}return null};MarketModel.prototype.GetPreUnlockCountryId=function(id){var cfg=Game.config.country.getConfig(id);if(cfg){var pre_1=cfg.pre_id;if(pre_1!=0){var lastId=this.GetLastCountryId();if(Game.config.country.sort(lastId,pre_1)>=0){return pre_1}}}return null};MarketModel.prototype.IsHomeCountry=function(countryId){return this.GetHomeCountryId()==countryId};MarketModel.prototype.IsLastCountry=function(countryId){return this.GetLastCountryId()==countryId};MarketModel.prototype.IsHomeCity=function(cityId){return this.Info.headquarters==cityId};MarketModel.prototype.IsLastCity=function(cityId){return this.Info.lastCity==cityId};MarketModel.prototype.GetPropagandaActor=function(){return this.Info.propagandaActor};MarketModel.prototype.GetCityList=function(countryId){var lastCountry=this.GetLastCountryId();if(countryId==null||lastCountry==countryId){return this.GetLastCityList()}var cityList=[];var cfgList=Game.config.city.getCitysByCountry(countryId);for(var index=0;index<cfgList.length;index++){var cfg=cfgList[index];cityList.push(new Games.CityData(cfg.id,Games.CityStateEnum.hasOccupy,cfg.id==this.Info.headquarters))}cityList=cityList.sort(function(a,b){return a.num-b.num});return cityList};MarketModel.prototype.GetLastCityList=function(){var cityList=[];if(this.Info.lastCity==0){return cityList}var city=this.GetLastCity();var lastCountry=city.country;cityList.push(city);if(city.cfg.next_city!=0){var nextCity=new Games.CityData(city.cfg.next_city,Games.CityStateEnum.Lock,false);if(nextCity.country==lastCountry){cityList.push(nextCity)}}var id=city.cfg.pre_id;while(id!=0){city=new Games.CityData(id,Games.CityStateEnum.hasOccupy,id==this.Info.headquarters);if(city.country!=lastCountry){break}cityList.push(city);id=city.cfg.pre_id}cityList=cityList.sort(function(a,b){return a.num-b.num});return cityList};MarketModel.prototype.GetCountryList=function(){var CountryList=[];var id=this.GetLastCountryId();var country=new Games.CountryData(id);var homeId=this.GetHomeCountryId();country.isHome=id==homeId;CountryList.push(country);id=country.preCountry;while(id!=0){country=new Games.CountryData(id);country.isHome=id==homeId;CountryList.push(country);id=country.preCountry}return CountryList.sort(function(a,b){return a.id-b.id})};MarketModel.prototype.GetStreetList=function(){var cityId=this.Info.lastCity;var streetList=[];var id=this.Info.lastArea;var street=this.GetLastStreet();streetList.push(street);if(street.next!=0){var nextStreet=new Games.CityStreetData(street.next,Games.StreetStateEnum.NotOccupy,0);if(nextStreet.city==cityId){streetList.push(nextStreet)}}id=street.pre;while(id!=0){street=new Games.CityStreetData(id,Games.StreetStateEnum.HasOccupy,100);if(street.city!=cityId){break}streetList.push(street);id=street.pre}return streetList};MarketModel.prototype.GetActorList=function(){return Game.moduleModel.actor.getActors()};MarketModel.prototype.SendSetAmbassador=function(uuid,cityId,index,actId){var actuuid=Game.moduleModel.market.GetActor(actId).uuid;Game.protosender.city.SetAmbassador(uuid,cityId,index,actuuid)};MarketModel.prototype.GetActor=function(id){return Game.moduleModel.actor.getActor(id)};MarketModel.prototype.GetActorRequire=function(id){var actor=Game.moduleModel.actor.getActor(id);if(actor==null){return[]}var map=Game.config.actor.GetRequire(id);map[Games.ActorRequireEnum.scene.toString()]=actor.spectacle;map[Games.ActorRequireEnum.performance.toString()]=actor.perform;map[Games.ActorRequireEnum.plot.toString()]=actor.plot;map[Games.ActorRequireEnum.art.toString()]=actor.art;map[Games.ActorRequireEnum.entertainment.toString()]=actor.entertainment;return map};MarketModel.prototype.IsDemandConform=function(demand,value){switch(demand.type){case Games.ActorRequireEnum.age:case Games.ActorRequireEnum.Continents:case Games.ActorRequireEnum.sex:case Games.ActorRequireEnum.type:return demand.value==value;case Games.ActorRequireEnum.art:case Games.ActorRequireEnum.entertainment:case Games.ActorRequireEnum.performance:case Games.ActorRequireEnum.plot:case Games.ActorRequireEnum.scene:return demand.value<=value;default:break}return false};MarketModel.prototype.GetActorIcon=function(id){if(id==null){return""}var actor=Game.moduleModel.actor.getActor(id);if(actor==null){return""}var cfg=actor.config;var avatarCfg=Game.config.avatar.getConfig(cfg.avatar);var iconUrl=avatarCfg.bodyIconUrl;return iconUrl};MarketModel.prototype.GetMovieCity=function(){var lastCity=this.GetLastCity();var preCitys=this.GetPreCityList(lastCity,5);var nextCitys=this.GetNextCityList(lastCity,4);var list=preCitys.concat([lastCity],nextCitys);return list};MarketModel.prototype.GetPreCityList=function(cityData,num){if(cityData==null||cityData.cfg==null){return[]}var list=[];var cityId=cityData.cfg.pre_id;for(var i=0;i<num;i++){var city=this.GetCity(cityId);if(city){list.push(city);cityId=city.cfg.pre_id}else{break}}list=list.sort(function(a,b){return a.num-b.num});return list};MarketModel.prototype.GetNextCityList=function(cityData,num){if(cityData==null||cityData.cfg==null){return[]}var list=[];var cityId=cityData.cfg.next_city;for(var i=0;i<num;i++){var city=this.GetCity(cityId);if(city){list.push(city);cityId=city.cfg.next_city}else{break}}list=list.sort(function(a,b){return a.num-b.num});return list};MarketModel.prototype.IsTaskCityPointFinish=function(id){var state=this.GetStreetState(id);if(state==Games.StreetStateEnum.HasOccupy){return true}return false};MarketModel.prototype.IsTaskCityFinish=function(id){var state=this.GetCityState(id);if(state==Games.CityStateEnum.hasOccupy){return true}return false};MarketModel.prototype.IsTaskRoadShowNum=function(num){var cfg=Game.config.city.GetCityByNum(num);if(cfg){var state=this.GetCityState(cfg.id);if(state==Games.CityStateEnum.hasOccupy){return true}}return false};MarketModel.prototype.IsTaskAppointActor=function(id,num){if(id!=this.Info.headquarters){return false}if(this.GetAmbassadorNum()==num){return true}return false};Object.defineProperty(MarketModel.prototype,"RedNum",{get:function(){var curGold=this.GetCurGold();var goldLimit=this.GoldLimit;if(curGold<=0){return false}return curGold>goldLimit},enumerable:true,configurable:true});MarketModel.prototype.IsTaskRoadShowFinish=function(id){var state=this.GetCityState(id);if(state==Games.CityStateEnum.FinishRoadShow){return true}return false};MarketModel.prototype.roadShowNum=function(){var city=this.GetLastCity();if(city){if(city.state==Games.CityStateEnum.FinishRoadShow){return city.num}else{return city.num-1}}return 0};MarketModel.prototype.appointActorNum=function(id,num){if(id!=this.Info.headquarters){return 0}return num<=this.GetAmbassadorNum()};MarketModel.prototype.TaskGetAmbassadorNum=function(id){if(id!=this.Info.headquarters){return 0}return this.GetAmbassadorNum()};MarketModel.prototype.IsTaskPublicityActor=function(id){if(id==this.Info.lastArea){return this.Info.propagandaActor>0}return false};return MarketModel}(Games.MModel));Games.MarketModel=MarketModel})(Games||(Games={}));var Games;(function(Games){var MeetingModel=(function(_super){__extends(MeetingModel,_super);function MeetingModel(){var _this=_super.call(this)||this;_this.isAutoVisit=false;_this._companyAvatarId=0;return _this}MeetingModel.prototype.getMeetingData=function(){return this.meetingData};MeetingModel.prototype.addMeetingData=function(msg){if(this.meetingData==null){this.meetingData=new Games.MeetingData()}this.meetingData.uuid=msg.uuid;this.meetingData.id=msg.meetID;this.meetingData.randResult=msg.randResult;this.meetingData.lastTime=msg.lastTime;this.meetingData.lineLimit=msg.lineLimit;this.meetingData.intervalTime=msg.intervalTime;this.meetingData.startToMaxTime();return this.meetingData};Object.defineProperty(MeetingModel.prototype,"meetingCompanyName",{get:function(){if(isNullOrEmpty(this._meetingCompanyName)){this._meetingCompanyName=getRandomRoleName()}return this._meetingCompanyName},set:function(value){this._meetingCompanyName=value},enumerable:true,configurable:true});Object.defineProperty(MeetingModel.prototype,"companyGoal",{get:function(){if(this._companyGoals==null){this._companyGoals=[Game.config.msg.getTxt(MsgKey.meeting_goal1),Game.config.msg.getTxt(MsgKey.meeting_goal2),Game.config.msg.getTxt(MsgKey.meeting_goal3),Game.config.msg.getTxt(MsgKey.meeting_goal4)]}var s=this._companyGoals[Math.floor(Math.random()*this._companyGoals.length)];return s},enumerable:true,configurable:true});Object.defineProperty(MeetingModel.prototype,"companyDelegateAvatarId",{get:function(){if(this._companyAvatarId<=0){this._companyAvatarId=7300+Math.max(1,Math.ceil(14*Math.random()))}return this._companyAvatarId},set:function(value){this._companyAvatarId=value},enumerable:true,configurable:true});Object.defineProperty(MeetingModel.prototype,"isRed",{get:function(){var b=false;var isBuild=Game.moduleModel.building.hasBuildByType(Games.RoomType.Meeting);if(isBuild){if(this.meetingData){b=this.meetingData.isMax}}return b},enumerable:true,configurable:true});return MeetingModel}(Games.MModel));Games.MeetingModel=MeetingModel})(Games||(Games={}));var Games;(function(Games){var MissionModel=(function(_super){__extends(MissionModel,_super);function MissionModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dict=new Dictionary();_this.list=[];return _this}MissionModel.prototype.getMissionData=function(id){return this.dict.getValue(id)};MissionModel.prototype.install=function(){var list=Game.config.task.getConfigList();for(var i=0;i<list.length;i++){var config=list[i];if(config.type==EAchievementType.daily){var item=new Games.MissionData();item.id=config.id;item.config=config;this.dict.add(item.id,item);this.list.push(item)}}};MissionModel.prototype.setData=function(msg){var data=this.getMissionData(msg.cid);if(data){data.protoData=msg}};MissionModel.prototype.getUnlockList=function(){var list=[];for(var i=0;i<this.list.length;i++){var data=this.list[i];var unlock=Game.moduleModel.building.validataBuildLevel(data.config.unlock);if(unlock){list.push(data)}}list.sort(function(a,b){var stateA=a.protoData.state;var stateB=b.protoData.state;switch(stateA){case EAchievementState.rewarded:stateA=-1;break}switch(stateB){case EAchievementState.rewarded:stateB=-1;break}if(stateB==stateA){if(a.config.goal>0&&b.config.goal>0){return b.protoData.progress/b.config.goal-a.protoData.progress/a.config.goal}}return stateB-stateA});return list};MissionModel.prototype.getRead=function(){var num=0;var list=this.getUnlockList();for(var _i=0,list_1=list;_i<list_1.length;_i++){var data=list_1[_i];if(data.protoData.state==EAchievementState.finished){num++}}var progressData=Game.moduleModel.progressBox.getProgressBoxData(EProgressBoxId.dailyTask);if(progressData){num+=progressData.getReadNum()}return num};return MissionModel}(Games.MModel));Games.MissionModel=MissionModel})(Games||(Games={}));var Games;(function(Games){var OrderModel=(function(_super){__extends(OrderModel,_super);function OrderModel(){var _this=_super.call(this)||this;_this.maxOrderMaking=9;_this.progressBox=[5,10,20,35,50];_this.isOrder=false;_this.orderDict=new Dictionary();_this.orderUUidDict=new Dictionary();_this.cooperateOrderList=new Array();_this.cooperateOrderPosDict=new Dictionary();_this.orderList=new Array();_this.currentOrderList=new Array();_this.deleteOrderUUidList=new Dictionary();return _this}Object.defineProperty(OrderModel.prototype,"curData",{get:function(){return this._curData},set:function(value){this._curData=value},enumerable:true,configurable:true});OrderModel.prototype.getOrderData=function(id){return this.orderDict.getValue(id)};OrderModel.prototype.getOrderDataByUUid=function(uuid){return this.orderUUidDict.getValue(uuid)};OrderModel.prototype.getCurrrentOrderList=function(){var list=[];if(this.isOrder==false){this.isOrder=true;this.orderList.sort(this.sortOrderFunc)}for(var index=0;index<Math.min(this.maxOrderMaking,this.orderList.length);index++){var element=this.orderList[index];list.push(element)}this.sortOrderMaking=Math.max(0,this.orderList.length-list.length);for(var index=0;index<list.length;index++){var e=list[index]}return list};OrderModel.prototype.getCooperationOrderList=function(){for(var index=0;index<this.cooperateOrderList.length;index++){var element=this.cooperateOrderList[index]}return this.cooperateOrderList};OrderModel.prototype.sortOrderFunc=function(a,b){if(a.position!==b.position){return b.position-a.position}else{return a.lastTime-b.lastTime}};OrderModel.prototype.removeOrderData=function(uuid){var data=this.orderUUidDict.getValue(uuid);if(data){this.orderDict.remove(data.id);this.orderUUidDict.remove(uuid);this.deleteOrderUUidList.add(data.uuid,data)}var index=this.orderList.indexOf(data);if(index>=0){this.orderList.splice(index,1)}index=this.cooperateOrderList.indexOf(data);if(index>=0){this.cooperateOrderList.splice(index,1)}return data};OrderModel.prototype.addOrderData=function(msg){var _this=this;var data=this.getDeleteDataByUUid(msg.uuid);var otherInto=false;if(data==null){data=new Games.OrderData()}else{if(data.isCooperationOrder==false&&msg.entityId==User.info.entityId){data.items=msg.items;if(data.isCooperationOrder){var item=Game.config.item.getConfig(data.cooperationOrderItem.itemId);Game.system.toastMsg(MsgKey.cooperative_order_notice,Game.moduleModel.cooperation.partnerInfData.name,data.cooperationOrderItem.amount,item.name)}}}data.uuid=msg.uuid;data.id=msg.orderId;data.items=msg.items;data.lastTime=msg.lastTime;data.deleteFlag=msg.delFlag;data.position=msg.position;data.entityId=msg.entityId;console.log(JSON.stringify(msg));this.orderDict.add(data.id,data);this.orderUUidDict.add(data.uuid,data);setTimeout(function(){data.isCooperation=msg.entityId!=User.info.entityId;if(data.isCooperation){if(_this.cooperateOrderList.indexOf(data)==-1){_this.cooperateOrderList.push(data)}}else{if(_this.orderList.indexOf(data)==-1){_this.orderList.push(data)}}_this.isOrder=false;data.clearTime();if(data.position!=-1){if(data.deleteFlag==true){data.startDelTime(function(uuid){_this.endTimeOrder(uuid)})}else{data.startExpiredTime(function(uuid){_this.endTimeOrder(uuid)})}}},200);return data};OrderModel.prototype.endTimeOrder=function(uuid){clearTimeout(this.timeOutDealHandler);this.timeOutDealHandler=setTimeout(function(){Game.protosender.manageOrder.DealOrder()},2000);this.removeOrderData(uuid)};OrderModel.prototype.getDeleteDataByUUid=function(uuid){var data=this.deleteOrderUUidList.getValue(uuid);if(data==null){data=this.getOrderDataByUUid(uuid)}return data};Object.defineProperty(OrderModel.prototype,"cooperateRedNum",{get:function(){var num=0;var isBuild=Game.moduleModel.building.hasBuildByType(Games.RoomType.Spread);if(isBuild){var list=this.getCooperationOrderList();num=list.length}return num},enumerable:true,configurable:true});Object.defineProperty(OrderModel.prototype,"oldOrderUUids",{get:function(){var list=[];for(var index=0;index<this.cooperateOrderList.length;index++){var element=this.cooperateOrderList[index];list.push(element.uuid)}return list},enumerable:true,configurable:true});Object.defineProperty(OrderModel.prototype,"redNum",{get:function(){var num=0;var isBuild=Game.moduleModel.building.hasBuildByType(Games.RoomType.Sale);if(isBuild){var list=this.getCurrrentOrderList();for(var index=0;index<list.length;index++){var element=list[index];if(element.isRemoved()==false){if(element.isAllComplete){num++}else{if(element.isCanPut){num++}}}}var status_1=0;var progress=0;var data=Game.moduleModel.progressBox.getProgressBoxData(EProgressBoxId.manageOrder);if(data){status_1=data.staus;progress=data.progress}for(var index=0;index<this.progressBox.length;index++){var needOrderNum=this.progressBox[index];if(progress>=needOrderNum){var result=(status_1>>index)&1;if(result){}else{num++}}else{}}}return num},enumerable:true,configurable:true});OrderModel.prototype.getIsFinishedPutNum=function(){if(this.curData){if(this.curData.isAllComplete){return this.curData.items.length}else{return this.curData.items.length}}return 0};return OrderModel}(Games.MModel));Games.OrderModel=OrderModel})(Games||(Games={}));var Games;(function(Games){var OscarModel=(function(_super){__extends(OscarModel,_super);function OscarModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.listOscarAwards=[];_this.listGameRewardInfo=[];_this.listEvent=[];_this.lastOscarDataTime=0;_this.listDanmu=[];_this.rewardFlags=[];_this.hasOpenNewOscarShow=false;_this.isLocalFinishReward=true;return _this}Object.defineProperty(OscarModel.prototype,"listDailyEvent",{get:function(){var list=[];for(var index=0;index<this.listEvent.length;index++){var data=this.listEvent[index];if(data.isToday){list.push(data)}}return list},enumerable:true,configurable:true});Object.defineProperty(OscarModel.prototype,"listYesterdatEvent",{get:function(){var list=[];for(var index=0;index<this.listEvent.length;index++){var data=this.listEvent[index];if(data.isYestody){list.push(data)}}return list},enumerable:true,configurable:true});Object.defineProperty(OscarModel.prototype,"OscarStreetId",{get:function(){return this.oscarStreetId},enumerable:true,configurable:true});OscarModel.prototype.install=function(){this.InitData()};OscarModel.prototype.OnOscarDataUpdate=function(){this.hasOpenNewOscarShow=false;this.TryOpenOscarShow()};OscarModel.prototype.TryOpenOscarShow=function(){if(!this.hasOpenNewOscarShow){if((!this.IsFinishOscar)&&this.isUnLockOscar&&(!Game.menu.isOpened(Games.MenuId.Awards))){Game.menu.open(Games.MenuId.Awards,Games.OscarSubEnum.OscarShow);this.hasOpenNewOscarShow=true}else{this.hasOpenNewOscarShow=false}}};OscarModel.prototype.UpdateOscarTick=function(){this.TryOpenOscarShow();if(Math.floor(this.OscarCD)<=1){this.onOscarTickFinish()}return false};OscarModel.prototype.GetOscarCDTxt=function(){return Games.TimeHelper.TimeFormat(this.OscarCD)};OscarModel.prototype.onOscarTickFinish=function(){console.log("奥斯卡倒计时结束");setTimeout(function(){Game.protosender.rank.GetOscarData()},1000)};OscarModel.prototype.UpdateOscarData=function(msg){this.oscarStreetId=msg.blockLevel;this.listOscarAwards=[];this.listOscarAwards.push(Games.AwardsData.Create(Games.OscarAwardsType.Man,msg.man,msg.bestMan));this.listOscarAwards.push(Games.AwardsData.Create(Games.OscarAwardsType.Woman,msg.woman,msg.bestWoman));this.listOscarAwards.push(Games.AwardsData.Create(Games.OscarAwardsType.Perform,msg.perform,msg.bestPerform));this.listOscarAwards.push(Games.AwardsData.Create(Games.OscarAwardsType.Art,msg.art,msg.bestArt));this.listOscarAwards.push(Games.AwardsData.Create(Games.OscarAwardsType.PublicPraise,msg.publicPraise,msg.bestPublicPraise))};OscarModel.prototype.UpdateRewardData=function(msg){this.lastOscarDataTime=Game.time.serverSeconds;this.timePropagandaDepartment=msg.propaganda_department;this.listGameRewardInfo=[];this.listGameRewardInfo.push(Games.OscarRewardData.Create(Proto.SE.EOscarType.bestBoxOffice,msg.bestBoxOffice,msg.bestBoxOfficeName,msg.bestBoxOfficeRank+1));this.listGameRewardInfo.push(Games.OscarRewardData.Create(Proto.SE.EOscarType.totalBoxOffice,msg.totalBoxOffice,msg.totalBoxOfficeRank+1,msg.historyBestTotalBexOfficeTotal,msg.historyBestTotalBoxOfficeRank+1,msg.historyIsNew));this.listGameRewardInfo.push(Games.OscarRewardData.Create(Proto.SE.EOscarType.movies,msg.movies));this.listGameRewardInfo.push(Games.OscarRewardData.Create(Proto.SE.EOscarType.bigSell,msg.big_sell));this.rewardFlags=msg.rewardFlags};OscarModel.prototype.UpdateDailyEventData=function(msg){this.listEvent=[];for(var index=0;index<msg.data.length;index++){var data=msg.data[index];var event=Games.DailyEventData.CreateByProto(data);this.listEvent.push(event)}};OscarModel.prototype.UpdateDanmu=function(msg){this.listDanmu=[];for(var index=0;index<msg.data.length;index++){var item=msg.data[index];this.listDanmu.push(Games.DanmuData.CreateByProto(item))}};OscarModel.prototype.AddOscarEvent=function(_list,isToday){var list=_list.slice(0);var hour=Game.config.global.OscarHour;var min=Game.config.global.OscarMin;var date=Games.TimeHelper.TimeReformat(hour,min,0);if(isToday){var time=date.valueOf()/1000;list.push(Games.DailyEventData.Create(Games.DailyEventType.Awards,time,Games.TEXT.OscarName))}else{var time=date.valueOf()/1000-24*60*60;var event_1=Games.DailyEventData.Create(Games.DailyEventType.Awards,time,Games.TEXT.OscarName);if(event_1.hasData){list.push(event_1)}}return list.sort(function(a,b){return a.TimeNum-b.TimeNum})};Object.defineProperty(OscarModel.prototype,"OscarAwardsList",{get:function(){var list=this.listOscarAwards.slice(0);return this.listOscarAwards},enumerable:true,configurable:true});Object.defineProperty(OscarModel.prototype,"OscarRewardList",{get:function(){return this.listGameRewardInfo},enumerable:true,configurable:true});Object.defineProperty(OscarModel.prototype,"OscarDailyEventList",{get:function(){if(Game.moduleModel.oscar.isUnLockNextOscar){return this.AddOscarEvent(this.listDailyEvent,true)}return this.listDailyEvent.sort(function(a,b){return a.TimeNum-b.TimeNum})},enumerable:true,configurable:true});Object.defineProperty(OscarModel.prototype,"OscarYesterdayEventList",{get:function(){if(Game.moduleModel.oscar.isUnLockOscar){return this.AddOscarEvent(this.listYesterdatEvent,false)}return this.listYesterdatEvent.sort(function(a,b){return a.TimeNum-a.TimeNum})},enumerable:true,configurable:true});Object.defineProperty(OscarModel.prototype,"DanmuList",{get:function(){return this.listDanmu},enumerable:true,configurable:true});OscarModel.prototype.GetDanmu=function(flag){var list=[];for(var index=0;index<this.listDanmu.length;index++){var danmu=this.listDanmu[index];if(danmu.flag==flag){list.push(danmu)}}return list};OscarModel.prototype.GetOscarAwards=function(type){return this.listOscarAwards[type]};Object.defineProperty(OscarModel.prototype,"lastMovieReward",{get:function(){var cfg=Game.config.blockLevel.getConfig(this.oscarStreetId);if(cfg){return cfg.movie_daily_reward}return[]},enumerable:true,configurable:true});OscarModel.prototype.InitData=function(){};OscarModel.prototype.LocalData=function(){var oscarDesc=new Proto.SS.OscarDesc();oscarDesc.name="Name";oscarDesc.playerName="PlayerName";oscarDesc.userId=0;oscarDesc.id=1001;var listCandidate=[];listCandidate.push(oscarDesc);listCandidate.push(oscarDesc);listCandidate.push(oscarDesc);this.listOscarAwards.push(Games.AwardsData.Create(Games.OscarAwardsType.Man,[],1));this.listOscarAwards.push(Games.AwardsData.Create(Games.OscarAwardsType.Woman,listCandidate,1));this.listOscarAwards.push(Games.AwardsData.Create(Games.OscarAwardsType.Perform,listCandidate,1));this.listOscarAwards.push(Games.AwardsData.Create(Games.OscarAwardsType.Art,[],1));this.listOscarAwards.push(Games.AwardsData.Create(Games.OscarAwardsType.PublicPraise,listCandidate,1));var time=Game.time.serverMilliseconds;this.listDailyEvent.push(Games.DailyEventData.Create(Games.DailyEventType.Movie,time+1000*60,"Movie"));this.listDailyEvent.push(Games.DailyEventData.Create(Games.DailyEventType.Movie,time+2000*60,"Movie"));this.listDailyEvent.push(Games.DailyEventData.Create(Games.DailyEventType.Movie,time+3000*60,"Movie"));this.listYesterdatEvent.push(Games.DailyEventData.Create(Games.DailyEventType.Movie,time-24*60*60*1000+4000*60,"Movie"));this.listYesterdatEvent.push(Games.DailyEventData.Create(Games.DailyEventType.Movie,time-24*60*60*1000+5000*60,"Movie"));this.listDailyEvent.sort(Games.DailyEventData.sort);this.listYesterdatEvent.sort(Games.DailyEventData.sort)};OscarModel.prototype.HasGetReward=function(type){if(this.rewardFlags[type-1]==1){return true}return false};OscarModel.prototype.SetIsFinishReward=function(){this.isLocalFinishReward=false};Object.defineProperty(OscarModel.prototype,"IsFinishReward",{get:function(){if(this.isLocalFinishReward==false){this.isLocalFinishReward=true;return false}for(var index=0;index<this.listGameRewardInfo.length;index++){var data=this.listGameRewardInfo[index];if(data.canReward&&!this.HasGetReward(data.type)){return false}}return true},enumerable:true,configurable:true});Object.defineProperty(OscarModel.prototype,"IsFinishOscar",{get:function(){if(Game.moduleModel.rank.rankInfo){if(Game.moduleModel.rank.rankInfo.lastGroupId==0){return true}if(Game.moduleModel.rank.rankInfo.isNew){return false}else{return this.IsFinishReward}}return true},enumerable:true,configurable:true});Object.defineProperty(OscarModel.prototype,"isUnLockOscar",{get:function(){var hasOscarData=true;var isRoomBuild=Game.moduleModel.building.hasBuildByType(Games.RoomType.Spread);if(isRoomBuild==false){}else{if(Game.moduleModel.rank.rankInfo&&Game.moduleModel.rank.rankInfo.lastGroupId==0){hasOscarData=false}if(this.timePropagandaDepartment){var oscarTime=this.LastOscarTime;if(oscarTime<this.timePropagandaDepartment){hasOscarData=false}}}return isRoomBuild&&hasOscarData},enumerable:true,configurable:true});Object.defineProperty(OscarModel.prototype,"isUnLockNextOscar",{get:function(){var isRoomBuild=Game.moduleModel.building.hasBuildByType(Games.RoomType.Spread);if(isRoomBuild==false){}return isRoomBuild},enumerable:true,configurable:true});Object.defineProperty(OscarModel.prototype,"OscarCD",{get:function(){return this.NextOscarTime-Game.time.serverSeconds},enumerable:true,configurable:true});Object.defineProperty(OscarModel.prototype,"NextOscarTime",{get:function(){var hour=Game.config.global.OscarHour;var min=Game.config.global.OscarMin;var date=Games.TimeHelper.TimeReformat(hour,min,0);if(Game.time.serverMilliseconds>date.valueOf()){return Math.floor(date.valueOf()/1000+24*60*60)}else{return Math.floor(date.valueOf()/1000)}},enumerable:true,configurable:true});Object.defineProperty(OscarModel.prototype,"LastOscarTime",{get:function(){return this.NextOscarTime-24*60*60},enumerable:true,configurable:true});Object.defineProperty(OscarModel.prototype,"LastOscarDay",{get:function(){var lastTime=Game.moduleModel.oscar.LastOscarTime;return Games.TimeHelper.DateTimeFormat3(lastTime)},enumerable:true,configurable:true});return OscarModel}(Games.MModel));Games.OscarModel=OscarModel})(Games||(Games={}));var Games;(function(Games){var PortraitType;(function(PortraitType){PortraitType[PortraitType.Dress=0]="Dress";PortraitType[PortraitType.Buy=1]="Buy"})(PortraitType=Games.PortraitType||(Games.PortraitType={}));var PlayerInfoModel=(function(_super){__extends(PlayerInfoModel,_super);function PlayerInfoModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.lastTimeRenameSignature=0;_this.playerLevelUpMsg=[];return _this}PlayerInfoModel.prototype.checkRenameSignatureTime=function(){return Game.time.serverSeconds-this.lastTimeRenameSignature>60};PlayerInfoModel.prototype.enqueuePlayerLevelUpMsg=function(msg){this.playerLevelUpMsg.push(msg)};PlayerInfoModel.prototype.dequeuePlayerLevelUpMsg=function(){if(this.hasPlayerLevelUpMsg){var msg=this.playerLevelUpMsg.splice(this.playerLevelUpMsg.length-1,1)[0];this.playerLevelUpMsg.length=0;return msg}return null};Object.defineProperty(PlayerInfoModel.prototype,"hasPlayerLevelUpMsg",{get:function(){return this.playerLevelUpMsg.length>0},enumerable:true,configurable:true});return PlayerInfoModel}(Games.MModel));Games.PlayerInfoModel=PlayerInfoModel})(Games||(Games={}));var Games;(function(Games){var ProduceModel=(function(_super){__extends(ProduceModel,_super);function ProduceModel(){var _this=_super.call(this)||this;_this.PAPER_ID=7;_this.FIRST_LINE=100;_this.PRODUCE_SKILL_GROUP=1002;_this.skillNames=[Games.TEXT.ProduceSkillType1,Games.TEXT.ProduceSkillType2,Games.TEXT.ProduceSkillType3,Games.TEXT.ProduceSkillType4];_this.produceMap=new Dictionary();return _this}ProduceModel.prototype.addProduceData=function(msg,uuid){console.log("addProduceData= "+msg.produceId);var data=this.getProduce(msg.produceId);if(data==null){data=new Games.ProduceData()}data.produceId=msg.produceId;data.itemNum=msg.hadNum;data.actorId=msg.actId;data.level=msg.level;data.produceSkillList.length=0;for(var _i=0,_a=msg.skills;_i<_a.length;_i++){var i=_a[_i];var pskill=new Games.ProduceSkill();pskill.id=i.skillId;pskill.level=i.level;data.produceSkillList.push(pskill)}data.outFactorList.length=0;for(var _b=0,_c=msg.randomNums;_b<_c.length;_b++){var m=_c[_b];data.outFactorList.push(m)}data.processNum=msg.produceNum;data.startTime=msg.lastTime;data.uuid=uuid;this.produceMap.add(data.produceId,data)};ProduceModel.prototype.getProduce=function(produceId){return this.produceMap.getValue(produceId)};ProduceModel.prototype.getProduceByUuid=function(uuid){var enumerator=this.produceMap.getValues();return enumerator.findOne(function(value){return value.uuid==uuid})};ProduceModel.prototype.getProduceSkillName=function(skillId){return this.skillNames[skillId-1]};ProduceModel.prototype.getProduceSkill=function(produceId,skillType){var produce=this.getProduce(produceId);if(produce){return produce.produceSkillList.findOne(function(value){return value.id==skillType})}return null};ProduceModel.prototype.checkProduceLvLimit=function(produceLevel,skill){var configId=skill.id*1000+skill.level;var config=Game.config.produceLv.getConfig(configId);if(config){return config.produce_lv>produceLevel}return false};ProduceModel.prototype.getProduceLvLimit=function(skill){var configId=skill.id*1000+skill.level;var config=Game.config.produceLv.getConfig(configId);if(config){return config.produce_lv}return 1};ProduceModel.prototype.getProduceUuid=function(produceId){var data=this.getProduce(produceId);if(data){return data.uuid}return""};ProduceModel.prototype.hasProduce=function(produceId){return this.getProduce(produceId)!=null};ProduceModel.prototype.getProduceDataList=function(){return this.produceMap.getValues()};ProduceModel.prototype.getActorList=function(){var result=[];var list=this.getProduceDataList();list.forEach(function(value,index,array){if(value.actorId>0){result.push(value.actorId)}});return result};Object.defineProperty(ProduceModel.prototype,"hasLineOutputFull",{get:function(){var produceLines=this.getProduceDataList();for(var _i=0,produceLines_1=produceLines;_i<produceLines_1.length;_i++){var produceLine=produceLines_1[_i];if(this.checkOutPutFull(produceLine.produceId)){return true}}return false},enumerable:true,configurable:true});ProduceModel.prototype.checkOutPutFull=function(produceId){var output=0;var data=this.getProduce(produceId);var totalTime=this.getProcessTotalTime(produceId);var timeProcessedlineNum=Math.floor(Game.time.getSubSecondsPre(data.startTime)/totalTime);var processedlineNum=(data.processNum>timeProcessedlineNum?timeProcessedlineNum:data.processNum);if(timeProcessedlineNum>data.processNum){output=data.itemNum+processedlineNum*this.perOutputNum(produceId)}if(this.isFirstLine){var cfg=Game.config.produceSouvenir.getConfig(User.info.level);return output>=cfg.max}return output>=this.getMaxStorage(produceId)};ProduceModel.prototype.getProcessTotalTime=function(produceId){var data=this.getProduce(produceId);var cd=Game.config.produce.getConfig(data.produceId).cd;var skillOutput=data.produceSkillList[Games.ProduceSkillType.Output];var extTime=this.getProduceLvEffect(skillOutput,1);var skillTime=data.produceSkillList[Games.ProduceSkillType.Time];var reduceTime=this.getProduceLvEffect(skillTime);var calcTime=cd+extTime-reduceTime;if(calcTime<=0){calcTime=1}return calcTime};ProduceModel.prototype.perOutputNum=function(produceId){var data=this.getProduce(produceId);if(this.isFirstLine(produceId)){var cfg=Game.config.produceSouvenir.getConfig(User.info.level);return cfg.once}var outputSkill=Game.moduleModel.produce.getProduceSkill(produceId,Games.ProduceSkillType.Output);var baseOutput=this.getProduceLvEffect(outputSkill);var baseOutputFactor=100;if(data.outFactorList.length>0){baseOutputFactor=data.outFactorList[0]}var produceSkillFactor=1;if(data.actorId>0){var actorData=Game.moduleModel.actor.getActor(data.actorId);if(actorData){var effectSkills=actorData.getEffectSkills();for(var _i=0,effectSkills_1=effectSkills;_i<effectSkills_1.length;_i++){var effectSkill=effectSkills_1[_i];if(effectSkill.config.group_id==this.PRODUCE_SKILL_GROUP){produceSkillFactor=effectSkill.config.value}}}}return baseOutput*(baseOutputFactor/100)*produceSkillFactor};ProduceModel.prototype.getMaxStorage=function(produceId){if(this.isFirstLine){var cfg=Game.config.produceSouvenir.getConfig(User.info.level);return cfg.max}var pSkillStorage=Game.moduleModel.produce.getProduceSkill(produceId,Games.ProduceSkillType.Storage);if(pSkillStorage){var save=this.getProduceLvEffect(pSkillStorage);return save}return 0};ProduceModel.prototype.isFirstLine=function(produceId){return produceId==this.FIRST_LINE};ProduceModel.prototype.getProduceLvEffect=function(skill,index){if(index===void 0){index=0}if(skill){var configId=skill.id*1000+skill.level;var config=Game.config.produceLv.getConfig(configId);if(config){return config.effect[index]}}return 1};ProduceModel.prototype.getStall=function(produceId){var cfg=Game.config.produce.getConfig(produceId);if(cfg){return cfg.grade}return 0};return ProduceModel}(Games.MModel));Games.ProduceModel=ProduceModel})(Games||(Games={}));var Games;(function(Games){var ProgressBoxModel=(function(_super){__extends(ProgressBoxModel,_super);function ProgressBoxModel(){var _this=_super.call(this)||this;_this.progressBoxDict=new Dictionary();_this.progressBoxUUidDict=new Dictionary();return _this}ProgressBoxModel.prototype.getProgressBoxData=function(id){if(!this.progressBoxDict.hasKey(id)){var data=new Games.ProgressBoxData();data.id=id;this.progressBoxDict.add(id,data)}return this.progressBoxDict.getValue(id)};ProgressBoxModel.prototype.getProgressBoxDataByUUid=function(uuid){return this.progressBoxUUidDict.getValue(uuid)};ProgressBoxModel.prototype.addProgressBoxData=function(msg){var data=this.getProgressBoxData(msg.moduleId);if(data==null){data=new Games.ProgressBoxData()}data.uuid=msg.uuid;data.id=msg.moduleId;data.lastTime=msg.lastTime;data.progress=msg.progress;data.staus=msg.staus;data.startResetTime();this.progressBoxDict.add(data.id,data);this.progressBoxUUidDict.add(data.uuid,data)};return ProgressBoxModel}(Games.MModel));Games.ProgressBoxModel=ProgressBoxModel})(Games||(Games={}));var Games;(function(Games){var RankServerData=Games.RankServerData;var RankGroupData=Games.RankGroupData;var RankGroupMovieData=Games.RankGroupMovieData;var RankModel=(function(_super){__extends(RankModel,_super);function RankModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.listServer=[];_this.listGroup=[];_this.listGroupMovie=[];_this.dicPlayer=new Dictionary();_this.dicMovie=new Dictionary();_this.listBoxOfficeIcon=[6023,6024,6025,6026,6027,6028];return _this}RankModel.prototype.install=function(){_super.prototype.install.call(this)};RankModel.prototype.UpdateRankListData=function(msg){this.rankInfo=msg;this.rankInfo.lastRank=this.rankInfo.lastRank+1;this.rankInfo.lastWeakRank=this.rankInfo.lastWeakRank+1};RankModel.prototype.UpdateSelfList=function(msg){this.selfInfo=msg;if(this.selfInfo==null){return}this.selfInfo.MainRank=this.selfInfo.MainRank+1;this.selfInfo.groupList=this.selfInfo.groupList+1};RankModel.prototype.UpdateServerRankList=function(msg){this.listServer=[];for(var index=0;index<msg.data.length;index++){var desc=msg.data[index];if(desc.movieId!=0){var rankdata=new RankServerData(index+1,desc);this.listServer.push(rankdata);this.RemovePlayerShortData(rankdata.desc.userId);this.RemoveMovieShortData(rankdata.desc.movieUuid)}}this.SetSelfServerRank(msg.selfData,msg.selfRank+1)};RankModel.prototype.SetSelfServerRank=function(data,rank){this.selfServerData=new Games.RankServerData(rank,data);if(this.selfServerData.desc.movieId!=0&&this.listServer.length<this.selfServerData.rank){this.listServer.push(this.selfServerData)}};RankModel.prototype.UpdateGroupRankList=function(msg){this.listGroup=[];for(var index=0;index<msg.data.length;index++){var desc=msg.data[index];var rankdata=new RankGroupData(index+1,desc);this.listGroup.push(rankdata);this.RemovePlayerShortData(rankdata.desc.userId)}this.SetSelfGroupRank(msg.selfData,msg.selfRank+1)};RankModel.prototype.SetSelfGroupRank=function(data,rank){this.selfGroupData=new Games.RankGroupData(rank,data);if(this.listGroup.length<this.selfGroupData.rank){this.listGroup.push(this.selfGroupData)}};RankModel.prototype.UpdateGroupMovieRankList=function(msg){this.listGroupMovie=[];for(var index=0;index<msg.data.length;index++){var desc=msg.data[index];var rankdata=new RankGroupMovieData(index+1,desc);if(rankdata.desc.totalBoxOffice>0){this.listGroupMovie.push(rankdata)}this.RemovePlayerShortData(rankdata.desc.userId)}this.SetSelfGroupMovieRank(msg.selfData,msg.selfRank+1)};RankModel.prototype.SetSelfGroupMovieRank=function(data,rank){this.selfGroupMovieData=new Games.RankGroupMovieData(rank,data);if(this.selfGroupMovieData.desc.totalBoxOffice>0&&this.listGroupMovie.length<this.selfGroupMovieData.rank){this.listGroupMovie.push(this.selfGroupMovieData)}};RankModel.prototype.UpdatePlayerShortData=function(msg){this.dicPlayer.add(msg.userId,msg)};RankModel.prototype.RemovePlayerShortData=function(userId){if(this.dicPlayer.hasKey(userId)){this.dicPlayer.remove(userId)}};RankModel.prototype.UpdateMovieShortData=function(msg){msg.mediaCommend=msg.mediaCommend/10;this.dicMovie.add(msg.uuid,msg);Game.system.movieInfo(msg)};RankModel.prototype.RemoveMovieShortData=function(uuid){if(this.dicMovie.hasKey(uuid)){this.dicMovie.remove(uuid)}};Object.defineProperty(RankModel.prototype,"SelfServerRankData",{get:function(){return this.selfServerData},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"LastWeakServerRank",{get:function(){return this.rankInfo.lastWeakRank},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"SelfServerRank",{get:function(){if(this.selfInfo==null){return 0}return this.selfInfo.MainRank},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"SelfGroupRankData",{get:function(){return this.selfGroupData},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"SelfGroupRank",{get:function(){if(this.selfInfo==null){return 0}return this.selfInfo.groupList},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"SelfGroupMovieRankData",{get:function(){return this.selfGroupMovieData},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"ServerRankList",{get:function(){return this.listServer.slice(0)},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"GroupRankList",{get:function(){return this.listGroup.slice(0)},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"GroupMovieRankList",{get:function(){return this.listGroupMovie.slice(0)},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"ServerName",{get:function(){if(this.selfInfo==null){return""}return this.selfInfo.serverName},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"ServerUuid",{get:function(){if(this.rankInfo==null){return null}return this.rankInfo.serverUuid},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"LastStreetId",{get:function(){if(this.rankInfo==null){return null}return this.rankInfo.lastGroupId},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"hasGetLastReward",{get:function(){return this.rankInfo.isGetLastReward},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"CanGetReward",{get:function(){if(this.rankInfo==null){return false}var list=this.LastRewardList;return list.length>0&&!this.rankInfo.isGetLastReward},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"cupNum",{get:function(){return User.info.cup},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"CanChangeName",{get:function(){if(this.rankInfo==null){return false}return this.rankInfo.lastWeakRank==1&&!this.rankInfo.isChangeServerName},enumerable:true,configurable:true});RankModel.prototype.GetMovieShort=function(uuid){if(this.dicMovie.hasKey(uuid)){return this.dicMovie.getValue(uuid)}return null};RankModel.prototype.GetPlayerShortData=function(userId){if(this.dicPlayer.hasKey(userId)){return this.dicPlayer.getValue(userId)}return null};RankModel.prototype.GetBoxOfficEvaluationIconUrl=function(index){var avatarIcon=this.listBoxOfficeIcon[index];if(avatarIcon){return Game.config.avatar.GetIconUrl(this.listBoxOfficeIcon[index])}console.log("票房等级"+index+"没有数据");return""};Object.defineProperty(RankModel.prototype,"RankRewardList",{get:function(){return Games.TimeHelper.IsWeek(Game.time.serverSeconds,0)?Game.config.serverRankingList.weekRewardList:Game.config.serverRankingList.dailyRewardList},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"LastRewardList",{get:function(){if(this.rankInfo==null){return[]}var isWeek7=Games.TimeHelper.IsWeek(Game.time.serverSeconds+2*60*60,1);var rank=isWeek7?this.rankInfo.lastWeakRank:this.rankInfo.lastRank;return Game.config.serverRankingList.GetRewards(this.rankInfo.lastRank,isWeek7)},enumerable:true,configurable:true});Object.defineProperty(RankModel.prototype,"RedNum",{get:function(){return this.CanGetReward&&!this.hasGetLastReward},enumerable:true,configurable:true});return RankModel}(Games.MModel));Games.RankModel=RankModel})(Games||(Games={}));var Games;(function(Games){var RechargeModel=(function(_super){__extends(RechargeModel,_super);function RechargeModel(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(RechargeModel.prototype,"rechargeList",{get:function(){var list=Game.config.recharge.getConfigList();var retList=[];for(var index=0;index<list.length;index++){var cfg=list[index];if(cfg.is_show){retList.push(cfg)}}return retList},enumerable:true,configurable:true});return RechargeModel}(Games.MModel));Games.RechargeModel=RechargeModel})(Games||(Games={}));var Games;(function(Games){var SecretaryModel=(function(_super){__extends(SecretaryModel,_super);function SecretaryModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.secretaryKeyValueDict=new Dictionary();_this._secretaryAutoDict=new Dictionary();_this._isAutoRead=false;_this._isAutoVisit=false;_this._isAutoPublicize=false;_this._isAutoActorTrain=false;_this.moneyRewardGot=false;_this._resetTimeHandler=0;_this.secretaryAvatarId=9991;_this.curSelectKey=0;_this.isSetIntervalStart=false;_this.isNewDayForLicense=false;_this.sGetLicenseUpdate=new Signal();return _this}SecretaryModel.prototype.install=function(){};SecretaryModel.prototype.addSecretaryByProto=function(msg){var _this=this;this._secretaryData=msg;if(!this.isSetIntervalStart){this.isSetIntervalStart=true;setInterval(function(){_this.secondUpdateActivity()},1000)}this.secretaryKeyValueDict.clear();this._secretaryAutoDict.clear();for(var index=0;index<this._secretaryData.timeList.length;index++){var element=this._secretaryData.timeList[index];this.secretaryKeyValueDict.add(element.key,element);switch(element.key){case ESecretary.cityTimes:this._isAutoPublicize=element.isOpen;break;case ESecretary.visitTimes:this._isAutoVisit=element.isOpen;break;case ESecretary.workTimes:this._isAutoRead=element.isOpen;break;case ESecretary.trainTime:this._isAutoActorTrain=element.isOpen;break;default:break}this._secretaryAutoDict.add(element.key,element.isOpen)}if(this.preMoneyReward&&this.isMoneyGetReward&&this.moneyRewardGot==false){this.moneyRewardGot=true}this.startResetTime()};SecretaryModel.prototype.secondUpdateActivity=function(){if(Game.time.checkNewDayToRefrush(this._secretaryData.applyLastTime,22)){this.isNewDayForLicense=true}};SecretaryModel.prototype.startResetTime=function(){var _this=this;if(this._resetTimeHandler>0){clearTimeout(this._resetTimeHandler);this._resetTimeHandler=0}if(this._secretaryData.secretaryType==ESecretaryType.temporaryHad){var nowTime=Game.time.serverSeconds;var endTime=Game.config.secretary.getConfig(10).par;if(endTime>nowTime){var duration=endTime-nowTime;this._resetTimeHandler=setTimeout(function(){_this._secretaryData.secretaryType=ESecretaryType.noHave},duration*1000)}}};Object.defineProperty(SecretaryModel.prototype,"secretaryData",{get:function(){return this._secretaryData},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"isInActivityTime",{get:function(){var startTime=Game.config.secretary.getConfig(9).par;var endTime=Game.config.secretary.getConfig(10).par;var nowTime=Game.time.serverSeconds;var isIn=false;if(nowTime>=startTime&&nowTime<endTime){isIn=true}return true},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"isForever",{get:function(){if(this.secretaryData){return this.secretaryData.secretaryType==ESecretaryType.had}return false},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"noseIntoNum",{get:function(){var config=Game.config.secretary.getConfig(5);var num=0;if(config){num=config.par}return num},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"resetCdRate",{get:function(){var config=Game.config.secretary.getConfig(4);var num=0;if(config){num=config.par}return num},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"isTempSecretary",{get:function(){if(this.isForever==false&&this.secretaryData){return this.secretaryData.secretaryType==ESecretaryType.temporaryHad}return false},enumerable:true,configurable:true});SecretaryModel.prototype.getValueByKey=function(key){if(this.secretaryKeyValueDict.hasKey(key)){return this.secretaryKeyValueDict.getValue(key).value}return 0};Object.defineProperty(SecretaryModel.prototype,"autoBusinessReadNum",{get:function(){var num=0;if(this.isForever){num=999}else{if(this.isTempSecretary){num=Game.config.secretary.getConfig(7).par-this.getValueByKey(ESecretary.workTimes)}}num=Math.max(0,num);return num},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"autoVisitNum",{get:function(){var num=0;if(this.isForever){num=999}else{if(this.isTempSecretary){num=Game.config.secretary.getConfig(8).par-this.getValueByKey(ESecretary.visitTimes)}}num=Math.max(0,num);return num},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"autoPublicizeNum",{get:function(){var num=0;if(this.isForever){num=999}else{if(this.isTempSecretary){num=Game.config.secretary.getConfig(6).par-this.getValueByKey(ESecretary.cityTimes)}}num=Math.max(0,num);return num},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"isMoneyGetReward",{get:function(){if(Games.TimeHelper.IsSameDay(this.secretaryData.lastTime,Game.time.serverSeconds)==false){return false}else{return this.getValueByKey(ESecretary.moneyGiftId)>0}},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"isFreeGetReward",{get:function(){if(Games.TimeHelper.IsSameDay(this.secretaryData.lastTime,Game.time.serverSeconds)==false){return false}else{return this.getValueByKey(ESecretary.freeGiftId)>0}},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"hasSetAuto",{get:function(){var has=false;if(this.isForever){has=true}else{if(this.isTempSecretary){has=true}}return has},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"isAutoRead",{get:function(){if(this.isForever==false&&this.autoBusinessReadNum<=0){this.isAutoRead=false}return this._isAutoRead},set:function(value){if(this._isAutoRead!=value&&this.hasSetAuto){Game.protosender.secretary.OpenSecretary(ESecretary.workTimes,value?1:0)}this._isAutoRead=value;this._secretaryAutoDict.add(ESecretary.workTimes,value)},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"isAutoActorTrain",{get:function(){return this._isAutoActorTrain},set:function(value){if(this._isAutoActorTrain!=value&&this.isForever){Game.protosender.secretary.OpenSecretary(ESecretary.trainTime,value?1:0)}this._isAutoActorTrain=value;this._secretaryAutoDict.add(ESecretary.trainTime,value)},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"isAutoVisit",{get:function(){if(this.isForever==false&&this.autoVisitNum<=0){return false}return this._isAutoVisit},set:function(value){if(this._isAutoVisit!=value&&this.hasSetAuto){Game.protosender.secretary.OpenSecretary(ESecretary.visitTimes,value?1:0)}this._isAutoVisit=value;this._secretaryAutoDict.add(ESecretary.visitTimes,value)},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"isAutoPublicize",{get:function(){if(this.isForever==false&&this.autoPublicizeNum<=0){return false}return this._isAutoPublicize},set:function(value){if(this._isAutoPublicize!=value&&this.hasSetAuto){Game.protosender.secretary.OpenSecretary(ESecretary.cityTimes,value?1:0)}this._isAutoPublicize=value;this._secretaryAutoDict.add(ESecretary.cityTimes,value)},enumerable:true,configurable:true});SecretaryModel.prototype.openSecretary=function(key){Game.protosender.secretary.OpenSecretary(key,1)};Object.defineProperty(SecretaryModel.prototype,"realAutoRead",{get:function(){return this._isAutoRead},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"realAutoPublicize",{get:function(){return this._isAutoPublicize},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"realAutoVisit",{get:function(){return this._isAutoVisit},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"isCanGetWelf",{get:function(){var can=false;if(this.isForever&&this.isFreeGetReward==false){can=true}return can},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"isCanGetLicense",{get:function(){var can=false;if(this.secretaryData.isApply){var overTime=Game.config.secretary.getConfig(11).par-Game.time.getSubSecondsPre(this.secretaryData.applyLastTime);if(overTime<=0){can=true}}return can},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"skillExpRate",{get:function(){var num=0;if(this.isForever){var config=Game.config.secretary.getConfig(2);if(config){num=config.par}}return num},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"dailyGift",{get:function(){return this.dailyGiftCfg.rechangeGifts},enumerable:true,configurable:true});Object.defineProperty(SecretaryModel.prototype,"dailyGiftCfg",{get:function(){return Game.config.recharge.getConfig(1009)},enumerable:true,configurable:true});SecretaryModel.prototype.isAuto=function(key){return this._secretaryAutoDict.getValue(key)};return SecretaryModel}(Games.MModel));Games.SecretaryModel=SecretaryModel})(Games||(Games={}));var Games;(function(Games){var ShopModel=(function(_super){__extends(ShopModel,_super);function ShopModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dict=new Dictionary();_this.lastDailyUpdateTime=0;_this.lastWeekUpdateTime=0;return _this}ShopModel.prototype.install=function(){this.InitLocalData()};ShopModel.prototype.ClearGoodsLimit=function(){var values=this.dict.getValues();for(var index=0;index<values.length;index++){var value=values[index];if(value!=null){if(value.LimitType==1){value.hasBuy=0}else{if(value.LimitType==2){if(Games.TimeHelper.IsWeek(Game.time.serverSeconds,1)){value.hasBuy=0}}}}}};ShopModel.prototype.UpdateGoodsLimit=function(msg,uuid){this.lastDailyUpdateTime=Game.time.serverMilliseconds;this.lastWeekUpdateTime=Game.time.serverMilliseconds;if(this.dict.hasKey(msg.id)){this.dict.getValue(msg.id).hasBuy=msg.amount}else{var goods=Games.GoodsData.Create(msg.id,msg.amount);this.dict.add(msg.id,goods)}};Object.defineProperty(ShopModel.prototype,"goodsList",{get:function(){this.TryUpdate();var list=[];var goodsList=this.dict.getValues();for(var key in goodsList){if(goodsList.hasOwnProperty(key)){var goods=goodsList[key];list.push(goods)}}return list},enumerable:true,configurable:true});ShopModel.prototype.TryUpdate=function(){var serverTime=Game.time.serverMilliseconds;var updateDailyTime=User.info.mallLimitDailyUpdateTime;var updateWeekTime=User.info.mallLimitWeeklyUpdateTime;if(serverTime>updateDailyTime&&this.lastDailyUpdateTime-updateDailyTime<24*60*60*1000){this.lastDailyUpdateTime=serverTime;this.InitDailyData()}if(serverTime>updateWeekTime&&this.lastWeekUpdateTime-updateWeekTime<7*24*60*60*1000){this.lastWeekUpdateTime=serverTime;this.InitWeekData()}};ShopModel.prototype.GetGoodsByShopType=function(shoptype){var list=[];var goodsList=this.goodsList;for(var key in goodsList){if(goodsList.hasOwnProperty(key)){var goods=goodsList[key];if(goods.ShopType==shoptype){if(goods.LimitType==3&&goods.saleNums<=0){continue}list.push(goods)}}}return list};ShopModel.prototype.InitLocalData=function(){this.dict.clear();var cfglist=Game.config.shop.getConfigList();for(var index=0;index<cfglist.length;index++){var cfg=cfglist[index];this.dict.add(cfg.id,Games.GoodsData.Create(cfg.id))}};ShopModel.prototype.InitDailyData=function(){var dailyType=1;var goodsList=this.dict.getValues();for(var key in goodsList){if(goodsList.hasOwnProperty(key)){var goods=goodsList[key];if(goods.ShopType==dailyType){goods.hasBuy=0;this.dict.add(goods.id,goods)}}}};ShopModel.prototype.InitWeekData=function(){var weekType=2;var goodsList=this.dict.getValues();for(var key in goodsList){if(goodsList.hasOwnProperty(key)){var goods=goodsList[key];if(goods.ShopType==weekType){goods.hasBuy=0;this.dict.add(goods.id,goods)}}}};ShopModel.prototype.SetDataToZero=function(){this.dict.clear();var cfglist=Game.config.shop.getConfigList();for(var index=0;index<cfglist.length;index++){var cfg=cfglist[index];this.dict.add(cfg.id,Games.GoodsData.Create(cfg.id,100))}};Object.defineProperty(ShopModel.prototype,"RedNum",{get:function(){return this.GetRedNumByType(1)+this.GetRedNumByType(2)},enumerable:true,configurable:true});ShopModel.prototype.GetRedNumByType=function(type){var lastOpenTime;if(type==1){lastOpenTime=Game.localStorage.lastOpenShopSingleTime}else{lastOpenTime=Game.localStorage.lastOpenShopSpecialTime}var goodsList=this.GetGoodsByShopType(type);var num=0;for(var index=0;index<goodsList.length;index++){var goods=goodsList[index];if(goods.isPeriodTime){var strTime=goods.Config.period.split("-");if(strTime.length>=2){var timeBegin=Games.TimeHelper.TimeReformat2(strTime[0]);if(timeBegin>lastOpenTime){if(goods.saleNums>0){num++}}}}}return num};return ShopModel}(Games.MModel));Games.ShopModel=ShopModel})(Games||(Games={}));var Games;(function(Games){var StoryModel=(function(_super){__extends(StoryModel,_super);function StoryModel(){var _this=_super.call(this)||this;_this.totalStarNum=0;_this.totalCompleteStoryNum=0;_this.timeDurationOut=0;_this.resetFindTimeOut=0;_this.storylist=new Array();_this.storyDict=new Dictionary();_this.storyUUidDict=new Dictionary();_this.storySuitlist=new Array();_this.storySuitDict=new Dictionary();_this.storySuitUUidDict=new Dictionary();_this.finishDict=new Dictionary();_this.totalStarNum=0;return _this}StoryModel.prototype.setup=function(){clearTimeout(this.timeDurationOut);clearTimeout(this.resetFindTimeOut);this.resetSou();this.resetFindTime()};StoryModel.prototype.resetFindTime=function(){var preTime=User.info.lastTimeFindStory;var nowTime=Game.time.serverSeconds;var nextTime=preTime+GlobalConfig.getValue(GlobalKey.story_stack_cd);if(nowTime<nextTime){var timeDuration=nextTime-nowTime+2;this.resetFindTimeOut=setTimeout(function(){Game.event.dispatch(GameEventKey.GameEventKey_ResetFindStoryTime)},timeDuration*1000)}};StoryModel.prototype.resetSou=function(){if(Games.TimeHelper.IsSameDay(User.info.lastResetTime,Game.time.serverSeconds)==false){User.info.findStoryTime=0}else{var currSecond=Game.time.serverSeconds;var nextSecond=Games.TimeHelper.NextDayZeroPointSecound();var timeDuration=nextSecond-currSecond;this.timeDurationOut=setTimeout(function(){User.info.findStoryTime=0;Game.event.dispatch(GameEventKey.GameEventKey_ResetFindStoryTime)},timeDuration*1000)}};StoryModel.prototype.addStoryByProto=function(msg){var data=this.getStoryDataByUUid(msg.uuid);var has=true;if(data==null){data=new Games.StoryData();has=false}data.id=msg.storyId;data.uuid=msg.uuid;data.status=msg.status;data.maxScore=msg.maxScore;data.progress=msg.progress;data.shootLastTime=msg.shootLastTime;data.storyProgressInfo=msg.storyProgressInfo;Games.Static.Instance.onUserorbit("script",format("{0}&{1}",data.isGold?1:0,msg.storyId),"unlock");if(data.config==null){console.error("没有剧本配置 "+data.id);return}if(has==false){this.totalStarNum+=data.config.starNumber}var alreadyFinish=this.finishDict.hasKey(data.id);if(data.isFinish&&alreadyFinish==false){this.totalCompleteStoryNum++}this.addStoryData(data)};StoryModel.prototype.addStorySuitByProto=function(msg){var data=this.getStorySuitData(msg.storySuitId);if(data==null){data=new Games.StorySuitData()}data.progress=msg.progress;data.progress2=msg.progress2;data.status=msg.status;data.id=msg.storySuitId;if(this.storySuitDict.hasKey(msg.storySuitId)==false){this.storySuitlist.push(data)}this.storySuitDict.add(msg.storySuitId,data);this.storySuitUUidDict.add(msg.uuid,data)};StoryModel.prototype.getStorySuitData=function(id){return this.storySuitDict.getValue(id)};StoryModel.prototype.getStorySuitDataByUUid=function(uuid){return this.storySuitUUidDict.getValue(uuid)};StoryModel.prototype.removeStorySuitData=function(uuid){var data=this.getStorySuitDataByUUid(uuid);if(data){this.storySuitDict.remove(data.id);this.storySuitUUidDict.remove(uuid)}};StoryModel.prototype.removeStoryByUUid=function(uuid){var story=this.getStoryDataByUUid(uuid);if(story){this.removeStory(story)}};StoryModel.prototype.removeStoryByid=function(id){var story=this.getStoryData(id);if(story){this.removeStory(story)}};StoryModel.prototype.removeStory=function(story){this.storyDict.remove(story.id);this.storyUUidDict.remove(story.uuid);var index=this.storylist.indexOf(story);if(index>=0){this.storylist.splice(index,1)}};StoryModel.prototype.addStoryData=function(data){var has=this.hasStoryData(data.id);if(has==false){this.storylist.push(data);this.storyUUidDict.add(data.uuid,data);this.storyDict.add(data.id,data)}};StoryModel.prototype.hasStoryData=function(id){return this.storyDict.hasKey(id)};StoryModel.prototype.hasStoryDataByUUid=function(uuid){return this.storyUUidDict.hasKey(uuid)};StoryModel.prototype.getStoryDataByUUid=function(uuid){return this.storyUUidDict.getValue(uuid)};StoryModel.prototype.getStoryData=function(id){return this.storyDict.getValue(id)};StoryModel.prototype.getStoryList=function(){return this.storylist};StoryModel.prototype.getTotalStoryNum=function(){return this.storylist.length};Object.defineProperty(StoryModel.prototype,"enoughItem",{get:function(){var item=Game.config.blockLevel.getConfig(User.info.stall).storysearchcost;var enough=Games.ItemHelper.checkItemEnough(item);return enough},enumerable:true,configurable:true});Object.defineProperty(StoryModel.prototype,"isFindMax",{get:function(){var b=User.info.findStoryTime>=GlobalConfig.getValue(GlobalKey.story_stack_daily_times);return b},enumerable:true,configurable:true});Object.defineProperty(StoryModel.prototype,"isClearCdUnlock",{get:function(){var blockStreetLevel=Game.config.global.getConfig(GlobalKey.story_stack_cd_block_level).value;var b=User.info.stall>=blockStreetLevel;return b},enumerable:true,configurable:true});Object.defineProperty(StoryModel.prototype,"isRed",{get:function(){var isUnlock=Game.config.menu.getConfig(Games.MenuId.StoryLibrary).isUnlock;var b=false;if(isUnlock){if((this.isFindMax==false&&this.remainTimers<=0&&this.enoughItem)||Game.moduleModel.task.isRedStoryAchievement){b=true}}return b},enumerable:true,configurable:true});Object.defineProperty(StoryModel.prototype,"remainTimers",{get:function(){var resetTime=0;var preTime=User.info.lastTimeFindStory;var nowTime=Game.time.serverSeconds;var nextTime=preTime+GlobalConfig.getValue(GlobalKey.story_stack_cd);if(nowTime<nextTime){resetTime=nextTime-nowTime}return resetTime},enumerable:true,configurable:true});StoryModel.prototype.getStorySuitList=function(){this.storySuitlist.sort(function(a,b){return a.id-b.id});return this.storySuitlist};return StoryModel}(Games.MModel));Games.StoryModel=StoryModel})(Games||(Games={}));var Games;(function(Games){var StreetModel=(function(_super){__extends(StreetModel,_super);function StreetModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.NextStreetNum=5;return _this}StreetModel.prototype.UpdateStreetCup=function(addNum){var cupNum=this.cupNum;var lastCupLimit=this.LastStreetCupLimit;if(cupNum-addNum<lastCupLimit){Game.system.streetLevelUp()}};Object.defineProperty(StreetModel.prototype,"LastStreetCupLimit",{get:function(){var lastCfg=Game.config.blockLevel.GetLastStreetCfg(this.streetCurrentId);if(lastCfg){return lastCfg.upgrade_req}return 0},enumerable:true,configurable:true});Object.defineProperty(StreetModel.prototype,"unlockStreetList",{get:function(){var streetId=this.streetCurrentId;var cfgList=Game.config.blockLevel.getConfigList();var retList=[];var index=0;for(;index<cfgList.length;index++){var cfg=cfgList[index];retList.push(Games.StreetData.CreateStreet(cfg.id));if(cfg.id==streetId){return retList}}return retList},enumerable:true,configurable:true});Object.defineProperty(StreetModel.prototype,"StreetList",{get:function(){var streetId=this.streetCurrentId;var cfgList=Game.config.blockLevel.getConfigList();var retList=[];var index=0;for(;index<cfgList.length;index++){var cfg=cfgList[index];retList.push(Games.StreetData.CreateStreet(cfg.id));if(cfg.id==streetId){break}}var lockIndex=++index+this.NextStreetNum;for(index;index<lockIndex;index++){var cfg=cfgList[index];if(cfg){retList.push(Games.StreetData.CreateStreet(cfg.id))}else{break}}retList=retList.sort(function(a,b){return b.id-a.id});return retList},enumerable:true,configurable:true});Object.defineProperty(StreetModel.prototype,"cupNum",{get:function(){return Game.moduleModel.rank.cupNum},enumerable:true,configurable:true});StreetModel.prototype.GetMaxCup=function(id){var cfg=Game.config.blockLevel.getConfig(id);return cfg.upgrade_req};StreetModel.prototype.GetStreetName=function(id){var cfg=Game.config.blockLevel.getConfig(id);if(cfg){return cfg.name}return""};StreetModel.prototype.GetStreetNameTips=function(id){var cfg=Game.config.blockLevel.getConfig(id);if(cfg){return cfg.name_tips}return""};Object.defineProperty(StreetModel.prototype,"streetCurrentId",{get:function(){return User.info.stall},enumerable:true,configurable:true});Object.defineProperty(StreetModel.prototype,"currentStreetData",{get:function(){return Games.StreetData.CreateStreet(this.streetCurrentId)},enumerable:true,configurable:true});Object.defineProperty(StreetModel.prototype,"selfStreetData",{get:function(){return Games.StreetData.CreateStreet(this.streetCurrentId)},enumerable:true,configurable:true});Object.defineProperty(StreetModel.prototype,"cinemaNumber",{get:function(){var nums=0;for(var index=0;index<User.info.theaterIds.length;index++){var treaterId=User.info.theaterIds[index];var cfg=Game.config.cinema.getConfig(treaterId);if(cfg){nums+=cfg.num}}return nums},enumerable:true,configurable:true});Object.defineProperty(StreetModel.prototype,"canReward",{get:function(){var hour=Game.config.global.getConfig(15).value;var date=Games.TimeHelper.TimeReformat(hour,0);if(Game.time.serverMilliseconds>date.valueOf()){return date.valueOf()>User.info.lastGetStreetRewardTimt*1000}else{return date.valueOf()-24*60*60*1000>User.info.lastGetStreetRewardTimt*1000}},enumerable:true,configurable:true});Object.defineProperty(StreetModel.prototype,"canSign",{get:function(){var cfg=Game.config.blockLevel.getConfig(User.info.stall);if(cfg==null){return true}if(cfg.cinema.length==0){return false}var cinemaList=cfg.cinema;for(var i=0;i<User.info.theaterIds.length;i++){var theaterId=User.info.theaterIds[i];for(var j=0;j<cinemaList.length;j++){var cinemaId=cinemaList[j];if(cinemaId==theaterId){return false}}}return true},enumerable:true,configurable:true});Object.defineProperty(StreetModel.prototype,"hasCongratulateNums",{get:function(){var total=Game.config.global.getConfig(18).value;var times=User.info.sendGroupRankListTimes||0;var resetH=Game.config.global.getConfig(GlobalKey.Block_Ranking_List_Reset).value;var lastTime=Math.max(User.info.lastSendGroupRankListTime,User.info.lastSendGroupMovieRankListTime);if(this.IsNeedReset(lastTime,resetH)){return true}return total>times},enumerable:true,configurable:true});StreetModel.prototype.IsNeedReset=function(lastResetTime,resetH,resetM,resetS){if(resetH===void 0){resetH=0}if(resetM===void 0){resetM=0}if(resetS===void 0){resetS=0}var resetDate=Games.TimeHelper.TimeReformat(resetH,resetM,resetS);var resetTime=resetDate.getTime();if(!Games.TimeHelper.IsBeyondTimeInSameDay(Game.time.serverSeconds,resetH,resetM,resetS)){resetTime=resetTime-24*60*60*1000}return lastResetTime*1000<resetTime};Object.defineProperty(StreetModel.prototype,"gronpRankCongratulateCD",{get:function(){var nowTime=Game.time.serverSeconds;var lastTime=User.info.lastSendGroupRankListTime;var cd=Game.config.global.getConfig(GlobalKey.Block_Ranking_List_Congratulate_Cd).value;return lastTime+cd-nowTime},enumerable:true,configurable:true});Object.defineProperty(StreetModel.prototype,"groupMovieRankCongratulateCD",{get:function(){var nowTime=Game.time.serverSeconds;var lastTime=User.info.lastSendGroupMovieRankListTime;var cd=Game.config.global.getConfig(GlobalKey.Block_Ranking_List_Congratulate_Cd).value;return lastTime+cd-nowTime},enumerable:true,configurable:true});Object.defineProperty(StreetModel.prototype,"groupRankCD",{get:function(){var hour=Game.config.global.getConfig(15).value;var date=Games.TimeHelper.TimeReformat(hour,0,0);if(Game.time.serverMilliseconds>date.valueOf()){return Math.floor(date.valueOf()/1000+24*60*60-Game.time.serverSeconds)}else{return Math.floor(date.valueOf()/1000-Game.time.serverSeconds)}},enumerable:true,configurable:true});Object.defineProperty(StreetModel.prototype,"CityEnvoyMaxStreet",{get:function(){return this.GetStreetName(Game.config.blockLevel.CityEnvoyMaxStreet)},enumerable:true,configurable:true});StreetModel.prototype.validataBlockLevelId=function(blockLevelId){return blockLevelId<=this.streetCurrentId};Object.defineProperty(StreetModel.prototype,"RedNum",{get:function(){var selfStreetData=Game.moduleModel.street.selfStreetData;if(selfStreetData==null){return false}return selfStreetData.isCurrent&&Game.moduleModel.street.canReward},enumerable:true,configurable:true});return StreetModel}(Games.MModel));Games.StreetModel=StreetModel})(Games||(Games={}));var Games;(function(Games){var SystemSettingModel=(function(_super){__extends(SystemSettingModel,_super);function SystemSettingModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.sCallLanguagePanel=new Signal();_this.sCallGiftPanel=new Signal();_this.sCallGiftGetOk=new Signal();_this.settingData=new Dictionary();return _this}Object.defineProperty(SystemSettingModel.prototype,"settingLanguageId",{get:function(){return Game.config.languageType.getConfigByValue(LangManager.Instance.lang).id},set:function(id){var lan=Game.config.languageType.getConfig(id).value;if(lan!=LangManager.Instance.lang){LangManager.Instance.lang=lan}},enumerable:true,configurable:true});SystemSettingModel.prototype.onClickResetYesButton=function(){window.location.reload()};SystemSettingModel.prototype.exchange=function(id){Game.protosender.Gift.Exchange(id)};SystemSettingModel.prototype.handlerExchange=function(msg){this.sCallGiftGetOk.dispatch()};SystemSettingModel.prototype.getBoolean=function(key){switch(key){case"music_switch":return !Game.sound.musicMuted;case"soundeffect_switch":return !Game.sound.soundMuted}if(!this.settingData.hasKey(key)){if(Game.localStorage.hasItem(key)){var value=Game.localStorage.getBoolean(key);this.setBoolean(key,value)}else{var value=Game.config.settingDefault.getConfig(key).OnOff;this.setBoolean(key,value)}}return this.settingData.getValue(key)};SystemSettingModel.prototype.setBoolean=function(key,value){this.settingData.add(key,value);Game.localStorage.setBoolean(key,value);switch(key){case"music_switch":Game.sound.musicMuted=!value;break;case"soundeffect_switch":Game.sound.soundMuted=!value;break}};return SystemSettingModel}(Games.MModel));Games.SystemSettingModel=SystemSettingModel})(Games||(Games={}));var Games;(function(Games){var TargetPackageModel=(function(_super){__extends(TargetPackageModel,_super);function TargetPackageModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.lgLength=0;_this.levelGoal=new Games.GoalData();_this.sGetLevelGiftSignal=new TypedSignal();_this.sCupSignalUpdate=new TypedSignal();_this.sGetCupGiftSignal=new TypedSignal();_this.sCupOverSignal=new Signal();return _this}TargetPackageModel.prototype.getTargetConfig=function(){var mainTask=Game.moduleModel.task.getCurrentMainTask();if(mainTask===null&&this.levelGiftData){if(!this.levelGiftConfList){this.levelGiftConfList=Game.config.levelGiftPackage.getConfigList();this.lgLength=this.levelGiftConfList.length}if(this.lgLength>0){if(this.levelGiftData.giftId===0){return this.levelGiftConfList[0]}else{for(var i=0;i<this.lgLength;i++){var item=this.levelGiftConfList[i];if(item.id===this.levelGiftData.giftId&&item.next_id!==0){return Game.config.levelGiftPackage.getConfig(this.levelGiftConfList[i].next_id)}}}}}return null};Object.defineProperty(TargetPackageModel.prototype,"progressLevelGoal",{get:function(){var Levelconf=this.getTargetConfig();if(Levelconf){this.levelGoal.initData(User.info.level,Levelconf.player_level)}else{return null}return this.levelGoal},enumerable:true,configurable:true});Object.defineProperty(TargetPackageModel.prototype,"progressCupGoal",{get:function(){var cupConfig=this.getCupConfig();if(cupConfig){this.levelGoal.initData(this.cupGiftData.process,cupConfig.target_num)}else{return null}return this.levelGoal},enumerable:true,configurable:true});TargetPackageModel.prototype.oobCupData=function(Data){this.cupGiftData=Data;Laya.timer.clear(this,this.CupTimeUpdate);if(this.cupGiftData&&this.cupGiftData.status===0&&this.cupGiftData.startTime>0&&this.cupGiftData.giftId>0){this.curCupConf=Game.config.cupPackage.getConfig(this.cupGiftData.giftId);var subTime=this.curCupConf.limit_time-Game.time.getSubSecondsPre(this.cupGiftData.startTime);if(subTime>0){Laya.timer.loop(1000,this,this.CupTimeUpdate)}}Game.event.dispatch(GameEventKey.GameEventKey_UnlockChange,Games.UnlockID.CupGift)};TargetPackageModel.prototype.CupTimeUpdate=function(){var subTime=this.curCupConf.limit_time-Game.time.getSubSecondsPre(this.cupGiftData.startTime);var cupDelayTime="00:00:00";if(subTime>0){cupDelayTime=Games.TimeHelper.TimeFormat(subTime)}else{this.sCupOverSignal.dispatch();Laya.timer.clear(this,this.CupTimeUpdate);Game.protosender.smallTarget.GetCupMail()}this.sCupSignalUpdate.dispatch(cupDelayTime)};TargetPackageModel.prototype.curTimeStr=function(){var subTime=0;if(this.curCupConf&&this.cupGiftData){subTime=this.curCupConf.limit_time-Game.time.getSubSecondsPre(this.cupGiftData.startTime)}subTime=Math.max(0,subTime);return Games.TimeHelper.TimeFormat(subTime)};TargetPackageModel.prototype.getCupConfig=function(){if(this.cupGiftData&&this.cupGiftData.status===0&&this.cupGiftData.startTime>0&&this.cupGiftData.giftId>0){return Game.config.cupPackage.getConfig(this.cupGiftData.giftId)}return null};Object.defineProperty(TargetPackageModel.prototype,"isCloseLevelGift",{get:function(){return this.getTargetConfig()==null},enumerable:true,configurable:true});Object.defineProperty(TargetPackageModel.prototype,"isCloseCupGift",{get:function(){var isClose=false;if(this.cupGiftData){isClose=this.cupGiftData.status==1}return isClose},enumerable:true,configurable:true});return TargetPackageModel}(Games.MModel));Games.TargetPackageModel=TargetPackageModel})(Games||(Games={}));var Games;(function(Games){var TaskModel=(function(_super){__extends(TaskModel,_super);function TaskModel(){var _this=_super.call(this)||this;_this._seeMovieRewardNum=0;_this._openRankNum=0;_this.mainGoal=new Games.GoalData();_this.taskTypeDict=new Dictionary();_this.taskTypeSortDict=new Dictionary();_this.tasklist=new Array();_this.taskDict=new Dictionary();_this.taskUUidDict=new Dictionary();_this.deleteTaskDict=new Dictionary();_this.mainTaskDict=new Dictionary();return _this}Object.defineProperty(TaskModel.prototype,"seeMovieRewardNum",{get:function(){return this._seeMovieRewardNum},set:function(value){this._seeMovieRewardNum=value;this.clientUpdateMainTaskProgress(Games.MainTaskRequireType.RequireType_9_SeeMovieReward)},enumerable:true,configurable:true});Object.defineProperty(TaskModel.prototype,"openRankNum",{get:function(){return this._openRankNum},set:function(value){this._openRankNum=value;this.clientUpdateMainTaskProgress(Games.MainTaskRequireType.RequireType_20_OpenRank)},enumerable:true,configurable:true});TaskModel.prototype.getTaskDataByUUid=function(uuid){return this.taskUUidDict.getValue(uuid)};TaskModel.prototype.getDelTaskDataByUUid=function(uuid){return this.deleteTaskDict.getValue(uuid)};TaskModel.prototype.getTaskDataById=function(id){return this.taskDict.getValue(id)};TaskModel.prototype.getTaskListByType=function(type,sort){if(sort===void 0){sort=true}var list=this.taskTypeDict.getValue(type);var isSort=this.getisSortByType(type);if(isSort==false&&sort&&list){this.taskTypeSortDict.add(type,true);if(type==EAchievementType.mainTask){list.sort(this.sortMainTaskData)}else{list.sort(this.sortTaskData)}}return list};TaskModel.prototype.getMainTaskListByType=function(type){var list=this.mainTaskDict.getValue(type);return list};TaskModel.prototype.getMainTaskList=function(){return this.getTaskListByType(EAchievementType.mainTask)};TaskModel.prototype.removeTaskDataByUUid=function(uuid){var data=this.taskUUidDict.getValue(uuid);if(data){this.taskDict.remove(data.id);this.taskUUidDict.remove(uuid);var list=this.taskTypeDict.getValue(data.type);var index=void 0;if(list){index=list.indexOf(data);if(index>=0){list.splice(index,1)}}if(data.isMainTask&&data.mainConfig){list=this.mainTaskDict.getValue(data.mainConfig.require);if(list){index=list.indexOf(data);if(index>=0){list.splice(index,1)}}if(GlobalConfig.getValue(GlobalKey.maintask_complete_end)==data.id){Games.Static.Instance.onFinishTutorial(data.id)}}this.deleteTaskDict.add(data.uuid,data)}};TaskModel.prototype.addTaskDataByProto=function(msg){var data=this.getTaskDataByUUid(msg.uuid);if(data==null){data=new Games.TaskData()}data.id=msg.cid;data.uuid=msg.uuid;data.state=msg.state;data.progress=msg.progress;data.type=msg.type;if(this.taskDict.hasKey(data.id)==false){this.tasklist.push(data)}this.taskDict.add(data.id,data);this.taskUUidDict.add(data.uuid,data);var list=this.getTaskListByType(data.type,false);if(list==null){list=new Array();this.taskTypeDict.add(data.type,list)}if(data.isMainTask&&data.mainConfig){var mainTaskList=this.getMainTaskListByType(data.mainConfig.require);if(mainTaskList==null){mainTaskList=new Array();this.mainTaskDict.add(data.mainConfig.require,mainTaskList)}data.calClientProgress();if(mainTaskList.indexOf(data)==-1){mainTaskList.push(data)}this.checkFinishGuide(data)}if(list.indexOf(data)==-1){list.push(data)}this.taskTypeSortDict.add(data.type,false)};TaskModel.prototype.getisSortByType=function(type){var b=false;if(this.taskTypeSortDict.hasKey(type)){b=this.taskTypeSortDict.getValue(type)}return b};TaskModel.prototype.getCurrentStoryTask=function(){var list=this.getTaskListByType(EAchievementType.story);return list};TaskModel.prototype.getCurrentMainTask=function(){var list=this.getTaskListByType(EAchievementType.mainTask);if(list&&list.length>0){return list[0]}return null};Object.defineProperty(TaskModel.prototype,"mainTaskId",{get:function(){var mainTask=this.getCurrentMainTask();var id=0;if(mainTask){id=mainTask.id}return id},enumerable:true,configurable:true});TaskModel.prototype.clientUpdateMainTaskProgress=function(type){var list=this.getMainTaskListByType(type);if(list){var mainId=this.mainTaskId;for(var index=0;index<list.length;index++){var data=list[index];data.calClientProgress();if(data.id==mainId){Game.event.dispatch(GameEventKey.GameEventKey_ClientUpdateMainTask)}this.checkFinishGuide(data)}}};TaskModel.prototype.checkFinishGuide=function(data){if(data.isFinished){Game.guide.endGuide(false)}};TaskModel.prototype.sortTaskData=function(a,b){return a.id-b.id};TaskModel.prototype.sortMainTaskData=function(a,b){if(a.mainConfig&&b.mainConfig){return a.mainConfig.pre_quest-b.mainConfig.pre_quest}return 0};Object.defineProperty(TaskModel.prototype,"isRedStoryAchievement",{get:function(){var b=false;var list=this.getTaskListByType(EAchievementType.story,false);for(var index=0;index<list.length;index++){var element=list[index];b=element.isFinished;if(b){break}}return b},enumerable:true,configurable:true});TaskModel.prototype.clientGetBuildRoomProgress=function(roomType){var progress=Game.moduleModel.building.hasBuildByType(roomType)?1:0;return progress};TaskModel.prototype.clientGetBuildUpgradeProgress=function(roomType){var progress=0;if(Game.moduleModel.building.hasBuildByType(roomType)){progress=Game.moduleModel.building.getRoomLevel(roomType)}return progress};TaskModel.prototype.clientGetUpgradeActorTimesProgress=function(lv){var progress=0;var actors=Game.moduleModel.actor.getActors();actors.forEach(function(element){if(element.level>=lv){progress++}});var hideAcotrs=Game.moduleModel.actor.getHideActors();hideAcotrs.forEach(function(element){if(element.level>=lv){progress++}});return progress};TaskModel.prototype.clientGetNoseActorProgress=function(){var progress=Game.moduleModel.actor.getAllActorLen();return progress};TaskModel.prototype.clientGetStreetPublicizeProgress=function(id){var progress=0;if(id>0){progress=Game.moduleModel.market.IsTaskCityPointFinish(id)?1:0}return progress};TaskModel.prototype.clientGetRoadShowProgress=function(){var progress=Game.moduleModel.market.roadShowNum();return progress};TaskModel.prototype.clientGetCityFinishProgress=function(id){var progress=0;if(id>0){progress=Game.moduleModel.market.IsTaskCityFinish(id)?1:0}return progress};TaskModel.prototype.clientGetAmbassadorNumProgress=function(id){var progress=0;if(id>0){progress=Game.moduleModel.market.TaskGetAmbassadorNum(id)}return progress};TaskModel.prototype.clientChooseFoucePointCityProgress=function(){var progress=0;var list=Game.moduleModel.warData.movieDataList;if(list&&list.length>0){for(var index=0;index<list.length;index++){var element=list[index];if(element.extendCity>0){progress=1;break}}}return progress};TaskModel.prototype.clientGetSeeMovieReward=function(){return this.seeMovieRewardNum};TaskModel.prototype.clientGetOpenRankWindow=function(){return this._openRankNum};TaskModel.prototype.isShowTaskPanel=function(){return Game.moduleModel.guide.isGuideFinished(100101)};Object.defineProperty(TaskModel.prototype,"allMainTaskCount",{get:function(){return Game.config.maintask.getConfigList().length},enumerable:true,configurable:true});Object.defineProperty(TaskModel.prototype,"remainMainTaskCount",{get:function(){var list=this.getMainTaskList();var len=0;if(list){len=list.length}return len},enumerable:true,configurable:true});Object.defineProperty(TaskModel.prototype,"guideCompleteRewardID",{get:function(){return GlobalConfig.getValue(GlobalKey.maintask_complete_reward)},enumerable:true,configurable:true});Object.defineProperty(TaskModel.prototype,"mainTaskProgressGoal",{get:function(){this.mainGoal.initData((this.allMainTaskCount-this.remainMainTaskCount),this.allMainTaskCount);return this.mainGoal},enumerable:true,configurable:true});TaskModel.prototype.isCompleteMainTask=function(id){var task=this.taskDict.getValue(id);if(task){return false}return true};return TaskModel}(Games.MModel));Games.TaskModel=TaskModel})(Games||(Games={}));var Games;(function(Games){var VisitModel=(function(_super){__extends(VisitModel,_super);function VisitModel(){var _this=_super.call(this)||this;_this.isAutoVisit=false;_this.visitTalkGroupId=1;_this.waitVisitActorId=0;return _this}VisitModel.prototype.getVisitData=function(){return this.visitData};VisitModel.prototype.getVisitName=function(){if(this.visitData.actorId>0){return this.visitData.actorData.name}return""};VisitModel.prototype.addVisitData=function(msg){if(this.visitData==null){this.visitData=new Games.VisitData()}this.visitData.uuid=msg.uuid;this.visitData.startTime=msg.startTime;this.visitData.isReceptior=msg.isReceptior;this.visitData.lastTime=msg.lastTime;this.visitData.lineLimit=msg.lineLimit;this.visitData.intervalTime=msg.intervalTime;this.visitData.id=msg.visitId;this.visitData.actorId=msg.actId;this.visitData.starTimeToVisit();this.visitData.startToMaxTime();return this.visitData};VisitModel.prototype.saveVisitId=function(){this.rewardVisitId=this.visitData.id};VisitModel.prototype.setRDTalkGroupId=function(){this.playActVisitList=Game.config.playAct.getConfigList();this.playActVisitList=this.playActVisitList.filter(function(value,index,array){return value.type==Games.PerformType.ReceptionFansTalk});this.visitTalkGroupId=Random.range(0,this.playActVisitList.length);return this.visitTalkGroupId};VisitModel.prototype.getFansStartTalk=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==Games.PerformType.ReceptionFansTalk});return playActList[this.visitTalkGroupId].eventList};VisitModel.prototype.getActorStartTalk=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==Games.PerformType.ReceptionActorTalk});return playActList[this.visitTalkGroupId].eventList};VisitModel.prototype.getReceptionDialog=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==Games.PerformType.Reception});return playActList[this.visitTalkGroupId].eventList};VisitModel.prototype.getWrongActorClickDialog=function(){var speeks=[];speeks.push(Game.config.msg.getTxt(MsgKey.visit_wrong1));speeks.push(Game.config.msg.getTxt(MsgKey.visit_wrong2));speeks.push(Game.config.msg.getTxt(MsgKey.visit_wrong3));return speeks[Random.range(0,speeks.length)]};Object.defineProperty(VisitModel.prototype,"isRed",{get:function(){var b=false;var isBuild=Game.moduleModel.building.hasBuildByType(Games.RoomType.Reception);if(isBuild){if(this.visitData&&Game.moduleModel.actor.hasCanVisitActor){b=this.visitData.isMax}}return b},enumerable:true,configurable:true});VisitModel.prototype.isActorOnAutoVisitStuts=function(actorId){if(Game.moduleModel.secretary.isAutoVisit){var data=Game.moduleModel.visit.getVisitData();if(data.actorId==actorId&&actorId!=0){return true}}return false};Object.defineProperty(VisitModel.prototype,"resultRewards",{get:function(){var items=[];if(Game.moduleModel.visit.rewardVisitId<=0){return items}var config=Game.config.visit.getConfig(Game.moduleModel.visit.rewardVisitId);for(var index=0;index<config.reward.length;index++){var element=config.reward[index];var item=new DTItemNum();item.itemId=element.itemId;var num=Game.moduleModel.building.getBuildEffectNum(Games.RoomType.Reception,item.itemId,element.itemNum);item.itemNum=num;items.push(item)}var expect=new DTItemNum();expect.itemId=EItemId.expect;expect.itemNum=Game.moduleModel.building.getBuildEffectNum(Games.RoomType.Reception,expect.itemId,config.expect);items.push(expect);return items},enumerable:true,configurable:true});return VisitModel}(Games.MModel));Games.VisitModel=VisitModel})(Games||(Games={}));var Games;(function(Games){var WarModel=(function(_super){__extends(WarModel,_super);function WarModel(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.sReGetLoginGameData=new Signal();_this.curBlockLV=0;_this.refreshTimes=-1;_this.sUpdateMediaCall=new TypedSignal();_this.filmExpectations=new Dictionary();_this.filmExpecteActor=new Dictionary();_this.curFilmType=-1;_this.storyShootType=-1;_this.theaterId=-1;_this.overBattle=0;_this.dropList=new Array();_this.isBattleOverCall=false;_this.sUpdateContinue=new Signal();_this.curGetStoryGoals=0;_this._curYRList=new Dictionary();_this.FilmingYRListdic=new Dictionary();_this.filmDataInit=false;_this.clientHideFilmOverResult=false;_this.filmStatusTick=null;_this.isFilmingShangying=false;_this.movieDataList=new Array();_this._movieFilming=false;_this.jiesuanName="";_this.filmInfoConfig=null;_this.emptyCinemalist=[0,0];_this.curStoryList=new Array();_this._movieHistogramTime=null;_this.endIncomeDic=new Dictionary();_this.endIncomeList=new Array();_this.endIncomeUpdate=false;_this.sUpdateEndIncomeTime=new Signal();_this.globalConf_Extension_box_office_con=0;_this.globalConf_Extension_con=0;_this.filmingSpeed=250;_this.warFilmingTSprogerss=new numVal();_this.warFilmingTSPause=false;_this.licenceAddWithCd=0;_this.preLicenceAddWithCD=0;_this.licenceSubTime=0;_this.sUpdateLicence=new Signal();_this.sUpdateLicenceForTime=new Signal();_this.isTick=false;_this.haveGuanzhong=false;_this.guanzhongList=new Array();_this.guanzhongMax=[0,0,0];_this.sFeedBackUpdate=new Signal();_this.sAudienceUpdate=new Signal();_this.sProficiencyUpdate=new Signal();return _this}WarModel.prototype.MakeFilm=function(){this.curGetStoryGoals=0;this.warFilmingTSprogerss.value=0;this.isBattleOverCall=false;Game.moduleModel.warData.filmExpectations.clear();Game.moduleModel.warData.filmExpecteActor.clear();this.overBattle=0;Game.protosender.movie.MakeFilm()};WarModel.prototype.handlerMakeFilm=function(){this.initFilmInf();Game.event.dispatch(GameEventKey.GameEventKey_MakeFilm)};WarModel.prototype.setRefrushData=function(msg,reset){if(reset){if(this.storyRefreshData){this.storyRefreshData.dayTime=0}}else{this.storyRefreshData=msg;if(!Game.time.isLocalTodayTimezone(this.storyRefreshData.lastTime)){this.storyRefreshData.dayTime=0}}};Object.defineProperty(WarModel.prototype,"curRefrushTimes",{get:function(){if(this.curBlockLV!==User.info.stall||this.refreshTimes===-1){this.curBlockLV=User.info.stall;this.refreshTimes=Game.config.blockLevel.getConfig(this.curBlockLV).story_refresh_times}var result=[this.refreshTimes,-1,0];if(this.storyRefreshData){if(this.refreshTimes>this.storyRefreshData.dayTime){result[1]=this.storyRefreshData.dayTime;result[2]=this.refreshTimes-this.storyRefreshData.dayTime}}else{if(this.refreshTimes>0){result[1]=0;result[2]=this.refreshTimes}}return result},enumerable:true,configurable:true});WarModel.prototype.refreshMovieStory=function(){Game.protosender.movie.RefreshMovieStory(this.moveData.uuid)};WarModel.prototype.handlerRefreshMovieStory=function(){Game.event.dispatch(GameEventKey.GameEventKey_MakeFilm)};WarModel.prototype.SendReName=function(newName,currData){Game.protosender.movie.SetMovieName(newName)};WarModel.prototype.handleReName=function(){this.filmInfoConfig=this.currData;Game.event.dispatch(GameEventKey.GameEventKey_MakeFilmRename)};WarModel.prototype.sendSetActor=function(index,actorId){Game.protosender.movie.SetActor(index,actorId)};WarModel.prototype.HandleSetActor=function(msg){Game.event.dispatch(GameEventKey.GameEventKey_MakeFilmSelectActor)};WarModel.prototype.ConfirmSetActor=function(){Game.protosender.movie.ConfirmSetActor()};WarModel.prototype.HandleConfirmSetActor=function(msg){Game.event.dispatch(GameEventKey.GameEventKey_MakeFilmConfirmSetActor)};WarModel.prototype.AcceptMediaVisit=function(mediaId){Game.protosender.movie.AcceptMediaVisit(mediaId)};WarModel.prototype.handleAcceptMediaVisit=function(msg){this.sUpdateMediaCall.dispatch(msg.addExpection)};WarModel.prototype.setSelectType=function(value){this.curFilmType=value;Game.protosender.movie.ChoseType(value)};WarModel.prototype.HandleSetSelectType=function(msg){this.storyShootType=msg.storyShootType;Game.event.dispatch(GameEventKey.GameEventKey_MakeFilmsetSelectType)};WarModel.prototype.setPublishMovie=function(index){this.theaterId=index;Game.protosender.movie.PublishMovie(index)};WarModel.prototype.PublishMovie=function(msg){Game.event.dispatch(GameEventKey.GameEventKey_MakeFilmsetPublishMovie)};WarModel.prototype.HandlersetBattleOver=function(msg){var _this=this;if(this.moveData){var items=format("{0}&{1}&{2}&{3}&{4}&{5}&{6}&{7}",User.info.stall,this.moveData.movieId,this.curGetStoryGoals===this.moveData.movieId?1:0,this.moveData.mediaCommend,this.moveData.publicPraise,this.moveData.premiereBoxOffice,this.moveData.totalBoxOffice,this.moveData.mExpected);Games.Static.Instance.onUserorbit("movie",items,"make");var drop=[];for(var i=0;i<msg.dropout.length;i++){var dropItem=new DTItemNum();dropItem.itemId=msg.dropout[i].itemId;dropItem.itemNum=msg.dropout[i].amount;drop.push(dropItem)}Games.Static.Instance.onResourceoutput(drop,"movieMake",this.moveData.movieId.toString())}this.isBattleOverCall=true;this.moveData=null;if(this.clientHideFilmOverResult){this.moveJieSuanData=null;this.sUpdateContinue.dispatch();this.isBattleOverCall=false}else{this.dropList=msg.dropout.sort(function(a,b){return a.itemId-b.itemId});setTimeout(function(){_this.isBattleOverCall=false;var menuCtl=Game.menu.getMenuCtl(Games.MenuId.War);if(menuCtl&&menuCtl.moduleWindow&&menuCtl.moduleWindow.contentPane){var mainUI=menuCtl.moduleWindow.contentPane;mainUI.checkStatus()}else{Game.menu.open(Games.MenuId.War)}},200)}};WarModel.prototype.delFimingMove=function(){this.moveData=null;this.moveJieSuanData=null;this.isBattleOverCall=false};WarModel.prototype.sendUpdateMovieState=function(){Game.protosender.movie.UpdateMovieState(Game.moduleModel.warData.moveData.state)};WarModel.prototype.handleUpdateMovieState=function(){Game.event.dispatch(GameEventKey.GameEventKey_MakeFilmUpdateMovieState)};WarModel.prototype.reqGetStoryGoals=function(){this.curGetStoryGoals=this.moveData.movieId;Game.protosender.movie.GetStoryGoals()};WarModel.prototype.handlerGetStoryGoals=function(){Game.event.dispatch(GameEventKey.GameEventKey_MakeFilmGetStoryGoals)};WarModel.prototype.reqSwitchCity=function(uuid,cityId){Game.protosender.movie.SwitchCity(uuid,cityId)};WarModel.prototype.handlerSwitchCity=function(){Game.event.dispatch(GameEventKey.GameEventKey_MakeFilmSwitchCity)};WarModel.prototype.reqSpreadMovie=function(uuid){Game.protosender.movie.SpreadMovie(uuid)};WarModel.prototype.handlerSpreadMovie=function(){Game.event.dispatch(GameEventKey.GameEventKey_MakeFilmSpreadMovie)};WarModel.prototype.reqGetRewardMovie=function(uuid){Game.protosender.movie.GetRewardMovie(uuid)};WarModel.prototype.handlerGetRewardMovie=function(msg){Game.event.dispatch(GameEventKey.GameEventKey_MakeFilmGetRewardMovie,msg)};WarModel.prototype.reqDeleteMovie=function(uuid){Game.protosender.movie.DeleteMovie(uuid)};WarModel.prototype.handlerDeleteMovie=function(msg){Game.event.dispatch(GameEventKey.GameEventKey_MakeFilmWarEndingIncome);this.sUpdateContinue.dispatch()};Object.defineProperty(WarModel.prototype,"temActor",{get:function(){if(!this._temActor||this._temActor===null){this._temActor=new Games.ActorData();this._temActor.setId(9999);this._temActor.name=this._temActor.config.name}return this._temActor},enumerable:true,configurable:true});Object.defineProperty(WarModel.prototype,"temActor2",{get:function(){if(!this._temActor2||this._temActor2===null){this._temActor2=new Games.ActorData();this._temActor2.setId(9997);this._temActor2.name=this._temActor2.config.name;this._temActor2.level=Game.config.global.getConfig(GlobalKey.story_leader_actor_level).value;this._temActor2.spectacle=this._temActor2.config.spectacle;this._temActor2.perform=this._temActor2.config.perform;this._temActor2.plot=this._temActor2.config.plot;this._temActor2.art=this._temActor2.config.art;this._temActor2.entertainment=this._temActor2.config.entertainment;this._temActor2.shootTypeList=[]}return this._temActor2},enumerable:true,configurable:true});Object.defineProperty(WarModel.prototype,"curYRList",{get:function(){var curData=this.moveData;if(curData===null){curData=this.moveJieSuanData}var actorList=Game.moduleModel.actor.getActors();this._curYRList=new Dictionary();for(var i=0;i<curData.data.length;i++){if(curData.data[i]>0){if(curData.data[i]===9999){this._curYRList.add(i,this.temActor)}else{if(curData.data[i]===9997){this._curYRList.add(i,this.temActor2)}else{for(var j=0;j<actorList.length;j++){if(actorList[j].id==curData.data[i]){this._curYRList.add(i,actorList[j])}}}}}}return this._curYRList},enumerable:true,configurable:true});Object.defineProperty(WarModel.prototype,"getRealYRList",{get:function(){this.proficiencyForActor=new Dictionary();var ryList=new Dictionary();var allList=this.curYRList;var keys=allList.getKeys();for(var i=0;i<keys.length;i++){var val=allList.getValue(keys[i]);if(val.id!=9999){ryList.add(ryList.count,val);this.proficiencyForActor.add(ryList.count,i)}}return ryList},enumerable:true,configurable:true});Object.defineProperty(WarModel.prototype,"filmingYRList",{get:function(){if(this.moveData&&this.moveData!==null&&this.moveData.state>=Proto.SE.EMovieState.costView&&this.moveData.state<=Proto.SE.EMovieState.audienceReputation){return this.getRealYRList}return this.FilmingYRListdic},enumerable:true,configurable:true});WarModel.prototype.initFilmInf=function(){this.filmDataInit=true;this.filmingMaxCur=0;this.filmingCurDay=0;this.filmingTotal=0;this.filmingMaxDay=0;this.refrushDataStart=false};WarModel.prototype.refrushFilmingStatus=function(){if(this.isBattleOverCall){return}if(!this.filmStatusTick||this.filmStatusTick===null){this.filmStatusTick=Game.tick.AddTick(this.movieHistogramTime/1000,-1,Handler.create(this,this.onRefrushFilmingStatus,null,false),null)}if(!this.isFilmingShangying){this.clientHideFilmOverResult=false;var lastTime=Game.time.getSubSecondsAfter(this.moveData.startTime);var haveDurDay=0;if(lastTime<0){lastTime*=-1;haveDurDay=Math.floor(lastTime/(this.movieHistogramTime/1000))}this.filmingMaxCur=0;this.filmingCurDay=0;this.filmingTotal=this.moveData.premiereBoxOffice+this.moveData.extBoxOffice;this.filmingMaxDay=this.moveData.runDays.length;if(haveDurDay<this.filmingMaxDay){if(haveDurDay>2){this.filmingCurDay=haveDurDay;for(var i=0;i<this.filmingCurDay;i++){this.filmingTotal+=this.moveData.runDays[i]}}this.filmStatusTick.Restart()}else{if(180/(this.movieHistogramTime/1000)+this.filmingMaxDay<haveDurDay){this.clientHideFilmOverResult=true}this.isFilmingShangying=false;this.filmingCurDay=this.filmingMaxDay+1;var expectnum=0;if(Game.moduleModel.warData.moveData&&Game.moduleModel.warData.moveData!==null){expectnum=Game.moduleModel.warData.moveData.mExpected}Game.event.dispatch(GameEventKey.GameEventKey_FilmEnd,expectnum);Game.event.dispatch(GameEventKey.GameEventKey_UpdateFilmingStatus);if(!this.isBattleOverCall){this.isBattleOverCall=true;Game.protosender.movie.BattleOver()}}}};Object.defineProperty(WarModel.prototype,"onCheckHaveDurDay",{get:function(){if(this.moveData){var lastTime=Game.time.getSubSecondsAfter(this.moveData.startTime);var haveDurDay=0;if(lastTime<0){lastTime*=-1;haveDurDay=Math.floor(lastTime/(this.movieHistogramTime/1000))}return haveDurDay<this.filmingMaxDay}return false},enumerable:true,configurable:true});WarModel.prototype.onRefrushFilmingStatus=function(){if(this.filmingCurDay<this.filmingMaxDay){this.isFilmingShangying=true;if(this.filmingMaxCur<this.moveData.runDays[this.filmingCurDay]){this.filmingMaxCur=this.moveData.runDays[this.filmingCurDay]}if(this.filmingCurDay>0){this.filmingTotal+=this.moveData.runDays[this.filmingCurDay-1]}this.filmingCurDay++;Game.event.dispatch(GameEventKey.GameEventKey_UpdateFilmingStatus)}else{this.isFilmingShangying=false;this.filmingCurDay=this.filmingMaxDay+1;this.filmStatusTick.Stop();var expectnum=0;if(Game.moduleModel.warData.moveData&&Game.moduleModel.warData.moveData!==null){expectnum=Game.moduleModel.warData.moveData.mExpected}Game.event.dispatch(GameEventKey.GameEventKey_FilmEnd,expectnum);Game.event.dispatch(GameEventKey.GameEventKey_UpdateFilmingStatus);if(!this.isBattleOverCall){this.isBattleOverCall=true;Game.protosender.movie.BattleOver()}}};Object.defineProperty(WarModel.prototype,"moveData",{get:function(){return this._movieData},set:function(val){this._movieData=val;this._movieFilming=val!==null;if(val!==null&&this._movieData.movieId>0){this._moveStory=Game.config.story.getConfig(this._movieData.movieId);this._moveStory.filmName=this._movieData.name}},enumerable:true,configurable:true});Object.defineProperty(WarModel.prototype,"moveStory",{get:function(){if(this.moveData===null){if(this.moveJieSuanData&&this.moveJieSuanData!==null&&this.moveJieSuanData.movieId>0){this._moveStory=Game.config.story.getConfig(this.moveJieSuanData.movieId);this._moveStory.filmName=this.moveJieSuanData.name}}return this._moveStory},enumerable:true,configurable:true});WarModel.prototype.getListForFilmYR=function(data){var actorList=Game.moduleModel.actor.getActors();var resList=new Array();for(var i=0;i<actorList.length;i++){if(data.sex===0||data.sex===actorList[i].config.sex){if(data.country===0||data.country===actorList[i].config.country){if(data.show_type===0||data.show_type===actorList[i].config.show_type){if(data.age_type===0||data.age_type===actorList[i].config.age_type){resList.push(actorList[i])}}}}}return resList};WarModel.prototype.cinemaList=function(){var result=new Array();var allList=Game.config.cinema.getConfigList();var serverList=User.info.theaterIds;var next1=0;var next2=0;for(var i=0;i<serverList.length;i++){var item=Game.config.cinema.getConfig(serverList[i]);if(item&&item!==null){result.push(item);var tem=parseInt((item.id/1000).toFixed(0))*1000;if(next1<tem){next1=tem;next2=tem+2000}}}var result2=new Array();for(var i=0;i<result.length;i++){var add2=true;for(var j=0;j<result2.length;j++){if(result2[j].level===result[i].level){if(result2[j].id<result[i].id){result2[j]=result[i]}add2=false}}if(add2){result2.push(result[i])}}result2=result2.sort(function(a,b){return b.id-a.id});return result2};Object.defineProperty(WarModel.prototype,"getStoryList",{get:function(){this.setStoryList();return this.curStoryList},enumerable:true,configurable:true});WarModel.prototype.setStoryList=function(){var curData=this.moveData;if(curData===null){curData=this.moveJieSuanData}if(curData.state==EMovieState.chooseScript&&curData.data.length>0){this.curStoryList=new Array();for(var i=0;i<curData.data.length;i++){var item=Game.config.story.getConfig(curData.data[i]);this.curStoryList.push(item)}}};Object.defineProperty(WarModel.prototype,"movieHistogramTime",{get:function(){if(this._movieHistogramTime||this._movieHistogramTime==null){this._movieHistogramTime=GlobalConfig.getValue(GlobalKey.Movie_Histogram_Time)}return this._movieHistogramTime},enumerable:true,configurable:true});WarModel.prototype.isHasContinueMovie=function(){for(var i=0;i<this.endIncomeList.length;i++){if(this.endIncomeList[i].remainingTime>0){return true}}return false};WarModel.prototype.isHasMovie=function(){return this.endingIncome.length>0};WarModel.prototype.endingIncome=function(uuid){if(uuid){this.endIncomeDic.remove(uuid);for(var i=0;i<this.endIncomeList.length;i++){if(this.endIncomeList[i]&&this.endIncomeList[i].uuid===uuid){this.endIncomeList.splice(i,1);break}}this.endIncomeList=this.endIncomeList.sort(function(a,b){return a.moveData.startTime-b.moveData.startTime})}var datas=Game.moduleModel.warData.movieDataList;if(datas.length>0){for(var i=0;i<datas.length;i++){if(!this.endIncomeDic.hasKey(datas[i].uuid)){var item=new EndIncomeDate();item.index=i;item.uuid=datas[i].uuid;item.moveData=datas[i];item.allTime=7200+datas[i].runDays.length*this.movieHistogramTime*0.001;item.remainingTime=item.allTime-Game.time.getSubSecondsPre(datas[i].startTime);this.endIncomeDic.add(datas[i].uuid,item);this.endIncomeList.push(item)}else{for(var i_1=0;i_1<this.endIncomeList.length;i_1++){if(this.endIncomeList[i_1]&&this.endIncomeList[i_1].uuid===datas[i_1].uuid){this.endIncomeList[i_1].moveData=datas[i_1]}}}}this.endIncomeList=this.endIncomeList.sort(function(a,b){return a.moveData.startTime-b.moveData.startTime});if(!this.endIncomeUpdate){this.endIncomeUpdate=true;Laya.timer.loop(1000,this,this.onEndIncomeUpdate)}}else{if(this.endIncomeUpdate){this.endIncomeUpdate=false;Laya.timer.clear(this,this.onEndIncomeUpdate)}}this.onEndIncomeUpdate()};WarModel.prototype.onEndIncomeUpdate=function(){if(this.globalConf_Extension_box_office_con===0||this.globalConf_Extension_con===0){this.globalConf_Extension_box_office_con=Game.config.global.getConfig(GlobalKey.Extension_box_office_con).value;this.globalConf_Extension_con=Game.config.global.getConfig(GlobalKey.Extension_con).value}if(this.endIncomeList.length>0){for(var i=0;i<this.endIncomeList.length;i++){var remain=this.endIncomeList[i].allTime-Game.time.getSubSecondsPre(this.endIncomeList[i].moveData.startTime);this.endIncomeList[i].remainingTime=remain>0?remain:0;var curData=this.endIncomeList[i].moveData;var attentionval=curData.totalBoxOffice/(this.globalConf_Extension_box_office_con/100)*(curData.attentionValue*this.globalConf_Extension_con/100+1);var lastToNow=Math.floor(Game.time.getSubSecondsPre(curData.lastTime));var lastVal=0;if(remain>0){lastVal=attentionval*lastToNow+curData.contineTransceiver}else{var startToNow=Math.floor(Game.time.getSubSecondsPre(this.endIncomeList[i].moveData.startTime));var last2=7200-(startToNow-lastToNow)+this.endIncomeList[i].moveData.runDays.length*Game.moduleModel.warData.movieHistogramTime*0.001;lastVal=attentionval*last2+curData.contineTransceiver}if(lastVal<0){lastVal=0}this.endIncomeList[i].incomeValue=lastVal}}this.sUpdateEndIncomeTime.dispatch()};WarModel.prototype.startWarFilming=function(startVal,isStart){if(isStart===void 0){isStart=true}if(isStart){if(this.warFilmingTSTween&&this.warFilmingTSTween!==null){this.warFilmingTSTween.clear()}this.warFilmingTSPause=false;if(!this.warFilmingTSprogerss.value||this.warFilmingTSprogerss.value===0){this.warFilmingTSprogerss.value=startVal}var curDuration=(100-startVal)*this.filmingSpeed;this.warFilmingTSTween=laya.utils.Tween.to(this.warFilmingTSprogerss,{value:100},curDuration,Laya.Ease.linearIn,null,0,true,true)}else{this.pauseWarFilmingProgress(false)}};WarModel.prototype.pauseWarFilmingProgress=function(stop){if(stop===void 0){stop=false}if(stop){if(this.warFilmingTSTween&&this.warFilmingTSTween!==null){this.warFilmingTSTween.pause()}this.warFilmingTSPause=true}else{if(this.warFilmingTSTween&&this.warFilmingTSTween!==null){this.warFilmingTSTween.resume()}this.warFilmingTSPause=false}};WarModel.prototype.clearWarFilmingProgress=function(){if(this.warFilmingTSTween&&this.warFilmingTSTween!==null){this.warFilmingTSTween.clear()}};Object.defineProperty(WarModel.prototype,"realLicenceNum",{get:function(){if(!this._movieFilming){var maxXKZ=Game.config.global.getConfig(GlobalKey.Licence_Store_Max).value;var itemCount=Game.moduleModel.item.getItemNum(Game.config.global.getConfig(GlobalKey.Movie_Licence_ID).value);var licenceCount=itemCount+this.preLicenceAddWithCD;if(licenceCount>maxXKZ){licenceCount=maxXKZ}return licenceCount}return 0},enumerable:true,configurable:true});Object.defineProperty(WarModel.prototype,"licenceNumInFilming",{get:function(){var maxXKZ=Game.config.global.getConfig(GlobalKey.Licence_Store_Max).value;var itemCount=Game.moduleModel.item.getItemNum(Game.config.global.getConfig(GlobalKey.Movie_Licence_ID).value);var licenceCount=itemCount+this.preLicenceAddWithCD;if(licenceCount>maxXKZ){licenceCount=maxXKZ}return licenceCount},enumerable:true,configurable:true});WarModel.prototype.licenceTimeLeft=function(){if(!this.isTick){this.isTick=true;Game.tick.AddTick(1,-1,Handler.create(this,this.licenceTick,null,false),null).Start()}};WarModel.prototype.newlicenceDataRefrush=function(){var serverTime22=new Date(this.licenceData.lastUpdateTime*1000).setHours(22)/1000;var subTime=serverTime22-this.licenceData.lastUpdateTime;var temLicence=0;if(subTime>0){if(this.licenceData.cd<=subTime){if(this.licenceData.dailyCount<Game.config.global.getConfig(GlobalKey.Licence_Restore_Max).value){temLicence=1}var movieLicenceConfig=Game.config.movieLicence.getConfig(this.licenceData.dailyCount+2);if(movieLicenceConfig&&subTime-this.licenceData.cd>movieLicenceConfig.cool_down){if(this.licenceData.dailyCount+1<Game.config.global.getConfig(GlobalKey.Licence_Restore_Max).value){temLicence=2}}}}this.licenceData.cd=Game.config.movieLicence.getConfig(1).cool_down;var delayTime=Game.time.serverSeconds-serverTime22;if(this.licenceData.cd<=delayTime&&temLicence<2){temLicence++;var movieLicenceConfig=Game.config.movieLicence.getConfig(2);if(temLicence<2&&movieLicenceConfig&&delayTime-this.licenceData.cd>movieLicenceConfig.cool_down){temLicence++}}this.licenceData.dailyCount=temLicence;this.licenceAddWithCd=temLicence;this.preLicenceAddWithCD=this.licenceAddWithCd};WarModel.prototype.licenceTick=function(){if(Game.time.checkNewDayToRefrush(this.licenceData.lastUpdateTime,22)){this.newlicenceDataRefrush();if(this.licenceAddWithCd>0){return}}var newDay=false;if(this.licenceData.dailyCount>=Game.config.global.getConfig(GlobalKey.Licence_Restore_Max).value){newDay=Game.time.checkNewDayToRefrush(this.licenceData.lastResetTime,22)}this.licenceAddWithCd=0;var subTime=Game.time.getSubSecondsPre(this.licenceData.lastUpdateTime);this.licenceSubTime=this.licenceData.cd-subTime;if(this.licenceData.cd<=subTime){if(newDay||this.licenceData.dailyCount<Game.config.global.getConfig(GlobalKey.Licence_Restore_Max).value){this.licenceAddWithCd=1}var movieLicenceConfig=Game.config.movieLicence.getConfig(this.licenceData.dailyCount+2);if(movieLicenceConfig&&subTime-this.licenceData.cd>movieLicenceConfig.cool_down){if(newDay||this.licenceData.dailyCount+1<Game.config.global.getConfig(GlobalKey.Licence_Restore_Max).value){this.licenceAddWithCd=2}}}else{this.licenceAddWithCd=0}if(this.preLicenceAddWithCD!==this.licenceAddWithCd){this.preLicenceAddWithCD=this.licenceAddWithCd;this.sUpdateLicence.dispatch()}if(this.preLicenceAddWithCD<2){this.sUpdateLicenceForTime.dispatch()}};Object.defineProperty(WarModel.prototype,"refrushGuanzhongInf",{get:function(){if(this.guanzhongList.length<10){this.guanzhongList=new Array();for(var i=0;i<10;i++){this.guanzhongList.push(Random.range(1,6))}}var aa=0;var bb=0;for(var i=0;i<10;i++){if(this.guanzhongList[i]>=3){aa++}if(this.guanzhongList[i]===5){bb++}}return[aa*10,bb*10]},enumerable:true,configurable:true});Object.defineProperty(WarModel.prototype,"isLicenceMax",{get:function(){return this.realLicenceNum>=GlobalConfig.getValue(GlobalKey.Licence_Store_Max)},enumerable:true,configurable:true});WarModel.prototype.movieDataToShotData=function(data){var movieData=new Proto.SS.MovieShortData();movieData.userId=User.info.entityId;movieData.uuid=data.uuid;movieData.movieId=data.movieId;movieData.name=data.name;movieData.type=data.type;movieData.totalBoxOffice=data.totalBoxOffice;movieData.boxOfficeEvaluation=data.boxOfficeEvaluation;movieData.mediaCommend=data.mediaCommend*0.1;movieData.publicPraise=data.publicPraise;movieData.data=new Array();var actorList=Game.moduleModel.actor.getActors();for(var i=0;i<data.data.length;i++){if(data.data[i]===9997){var item=new Proto.SS.ActorShortDesc();item.actorId=this.temActor2.id;item.name=this.temActor2.name;movieData.data.push(item)}else{if(data.data[i]>0&&data.data[i]!==9999){for(var j=0;j<actorList.length;j++){if(actorList[j].id==data.data[i]){var item=new Proto.SS.ActorShortDesc();item.actorId=actorList[j].id;item.name=actorList[j].name;movieData.data.push(item)}}}}}return movieData};return WarModel}(Games.MModel));Games.WarModel=WarModel;var numVal=(function(){function numVal(){}return numVal}());Games.numVal=numVal;var EndIncomeDate=(function(){function EndIncomeDate(){}return EndIncomeDate}());Games.EndIncomeDate=EndIncomeDate})(Games||(Games={}));var Games;(function(Games){var Ticks;(function(Ticks){var ClearSkeletonTickHandler=(function(_super){__extends(ClearSkeletonTickHandler,_super);function ClearSkeletonTickHandler(){return _super!==null&&_super.apply(this,arguments)||this}ClearSkeletonTickHandler.prototype.beginInit=function(){this.heartbeat=1000;this.endInit()};ClearSkeletonTickHandler.prototype.update=function(){};return ClearSkeletonTickHandler}(Games.TickHandler));Ticks.ClearSkeletonTickHandler=ClearSkeletonTickHandler})(Ticks=Games.Ticks||(Games.Ticks={}))})(Games||(Games={}));var Games;(function(Games){var Ticks;(function(Ticks){var ClearSpriteTickHandler=(function(_super){__extends(ClearSpriteTickHandler,_super);function ClearSpriteTickHandler(){return _super!==null&&_super.apply(this,arguments)||this}ClearSpriteTickHandler.prototype.beginInit=function(){this.heartbeat=2000;this.endInit()};ClearSpriteTickHandler.prototype.update=function(){FGLoader.clearFreeLong()};return ClearSpriteTickHandler}(Games.TickHandler));Ticks.ClearSpriteTickHandler=ClearSpriteTickHandler})(Ticks=Games.Ticks||(Games.Ticks={}))})(Games||(Games={}));var Games;(function(Games){var Ticks;(function(Ticks){var MenuTickHandler=(function(_super){__extends(MenuTickHandler,_super);function MenuTickHandler(){return _super!==null&&_super.apply(this,arguments)||this}MenuTickHandler.prototype.beginInit=function(){this.heartbeat=1000;this.endInit()};MenuTickHandler.prototype.update=function(){};return MenuTickHandler}(Games.TickHandler));Ticks.MenuTickHandler=MenuTickHandler})(Ticks=Games.Ticks||(Games.Ticks={}))})(Games||(Games={}));var Games;(function(Games){var Ticks;(function(Ticks){var NetworkTickHandler=(function(_super){__extends(NetworkTickHandler,_super);function NetworkTickHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isBackgroundTimeLong=false;_this.lastRefreshTokenTime=0;return _this}NetworkTickHandler.prototype.beginInit=function(){this.heartbeat=1000;this.endInit();var __mythis=this;if(BrowserDetect.isConch){window.conch.setNetworkEvtFunction(function(type){gameDeviceConfig.networkType=type;__mythis.refreshToken()})}else{if(BrowserDetect.isCrosswalk){Games.GameBridgerManager.Instance.networkBridger.sChange.add(function(){__mythis.refreshToken()},this)}}gameApplication.sAppResume.add(this.onAppResume,this);Game.protoFailEvent.add(ProtoEventKey.account_refreshToken,gameDeviceConfig.onRefreshTokenFail,gameDeviceConfig);Game.protoOkEvent.add(ProtoEventKey.account_refreshToken,gameDeviceConfig.onRefreshTokenOk,gameDeviceConfig)};NetworkTickHandler.prototype.update=function(){if(!this.isBackgroundTimeLong){gameDeviceConfig.checkNetwork()}};NetworkTickHandler.prototype.onAppResume=function(){if(gameApplication.atBackgroundTime>10*60*1000){this.isBackgroundTimeLong=true;Games.SystemMessag.Instance.alrtTextFull(LoadingStateTxt.NetworkState_Background,LoadingStateTxt.NetworkState_Title,this,this.onClickAlertExit,LoadingStateTxt.NetworkState_Button)}else{if(gameApplication.atBackgroundTime>5000){if(User.isLogined){this.refreshToken()}}}};NetworkTickHandler.prototype.onClickAlertExit=function(){gameDeviceConfig.exit()};NetworkTickHandler.prototype.refreshToken=function(){var _this=this;if(this.isBackgroundTimeLong){return}if(new Date().getTime()-this.lastRefreshTokenTime<5000){return}setTimeout(function(){_this.lastRefreshTokenTime=new Date().getTime();Game.protosender.account.refreshToken()},2000)};return NetworkTickHandler}(Games.TickHandler));Ticks.NetworkTickHandler=NetworkTickHandler})(Ticks=Games.Ticks||(Games.Ticks={}))})(Games||(Games={}));var Games;(function(Games){var ActorDetailWindow=(function(_super){__extends(ActorDetailWindow,_super);function ActorDetailWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.ActorDetailUI);return _this}ActorDetailWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.ActorDetailUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};ActorDetailWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.openUpdateView()};ActorDetailWindow.prototype.openUpdateView=function(){var args=this.menuParameter.args;if(args.length>0){this.conent.updateView(args[0])}};ActorDetailWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this);this.conent.m_closeBtn.onClick(this,this.onClickCloseBtn)};ActorDetailWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this);this.conent.m_closeBtn.offClick(this,this.onClickCloseBtn)};ActorDetailWindow.prototype.onClickCloseBtn=function(){this.menuClose()};return ActorDetailWindow}(Games.MWindow));Games.ActorDetailWindow=ActorDetailWindow})(Games||(Games={}));var Games;(function(Games){var ArtistDetailTabType;(function(ArtistDetailTabType){ArtistDetailTabType[ArtistDetailTabType.Base=0]="Base";ArtistDetailTabType[ArtistDetailTabType.Skill=1]="Skill";ArtistDetailTabType[ArtistDetailTabType.Asset=2]="Asset";ArtistDetailTabType[ArtistDetailTabType.Expert=3]="Expert";ArtistDetailTabType[ArtistDetailTabType.Assistant=4]="Assistant"})(ArtistDetailTabType=Games.ArtistDetailTabType||(Games.ArtistDetailTabType={}));var ArtistDetailWindow=(function(_super){__extends(ArtistDetailWindow,_super);function ArtistDetailWindow(){var _this=_super.call(this)||this;_this.tabstrs=[Games.TEXT.ActorTabBase,Games.TEXT.ActorTabSkill,Games.TEXT.ActorTabAsset,Games.TEXT.ActorTabExport,Games.TEXT.ActorTabAgent];_this.addAssetForFguiComponent(fgui.ArtistDetail.ArtistDetailUI);return _this}ArtistDetailWindow.prototype.onMenuCreate=function(){this.conent=fgui.ArtistDetail.ArtistDetailUI.createInstance();this.contentPane=this.conent;this.createTabPanel();_super.prototype.onMenuCreate.call(this)};ArtistDetailWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};ArtistDetailWindow.prototype.createTabPanel=function(){this.basePanel=this.conent.m_basePanel;this.skillPanel=this.conent.m_skillPanel;this.assetPanel=this.conent.m_assetPanel;this.expertPanel=this.conent.m_expertPanel;this.assistantPanel=this.conent.m_assistantPanel;this.registerTab(ArtistDetailTabType.Base,this.basePanel);this.registerTab(ArtistDetailTabType.Skill,this.skillPanel);this.registerTab(ArtistDetailTabType.Asset,this.assetPanel);this.registerTab(ArtistDetailTabType.Expert,this.expertPanel);this.registerTab(ArtistDetailTabType.Assistant,this.assistantPanel)};ArtistDetailWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};ArtistDetailWindow.prototype.openUpdateView=function(){laya.events.MouseManager.multiTouchEnabled=false;this.startTouchPos=new laya.maths.Point();var args=this.menuParameter.args;var tabIndex=0;if(args.length>1){tabIndex=args[1]}this.currentIndex=tabIndex;this.actors=Game.moduleModel.actor.getActors();this.currentActorIndex=0;this.conent.m_frozenBtn.visible=true;if(args.length>0){var actorId=args[0];var isHide=Game.moduleModel.actor.isHide(actorId);var actorData=Game.moduleModel.actor.getActor(actorId);if(isHide){this.actors=[actorData];this.conent.m_frozenBtn.visible=false}else{this.currentActorIndex=this.actors.indexOf(actorData)}}this.conent.m_tablist.selectedIndex=this.currentIndex;this.updateActor()};ArtistDetailWindow.prototype.onUpdateTabItem=function(index,itemObject){var tItem=itemObject;itemObject.text=this.tabstrs[index];tItem.m_red.visible=false;var isOpen=this.isOpenTab(index);if(isOpen){tItem.enabled=true}else{tItem.enabled=false}tItem.touchable=true};ArtistDetailWindow.prototype.isOpenTab=function(index){var isOpen=true;if(index==ArtistDetailTabType.Asset){isOpen=Game.moduleModel.actor.isOpenAsset}else{if(index==ArtistDetailTabType.Skill){isOpen=Game.moduleModel.actor.isOpenSkill}else{if(index==ArtistDetailTabType.Assistant&&this.currentActor){isOpen=this.currentActor.isOpenAssistant}}}return isOpen};ArtistDetailWindow.prototype.clickTabItem=function(itemObject){var index=this.conent.m_tablist.getChildIndex(itemObject);var isOpen=this.isOpenTab(index);var tip="";if(index==ArtistDetailTabType.Asset){tip=Game.moduleModel.actor.openAssetTip}else{if(index==ArtistDetailTabType.Skill){tip=Game.moduleModel.actor.openSkillTip}else{if(index==ArtistDetailTabType.Assistant){tip=Game.moduleModel.actor.openAssistantTip}}}if(isOpen){if(this.currentIndex!=index){this.currentIndex=index;this.openTab(index)}}else{this.conent.m_tablist.selectedIndex=this.currentIndex;Game.system.toastText(tip)}};ArtistDetailWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this);this.conent.m_closeBtn.onClick(this,this.onClickCloseBtn);this.conent.m_frozenBtn.onClick(this,this.onClickFrozenBtn);this.conent.m_renameBtn.onClick(this,this.onClickRenameBtn);this.conent.m_tablist.on(fairygui.Events.CLICK_ITEM,this,this.clickTabItem);this.conent.m_tablist.itemRenderer=Handler.create(this,this.onUpdateTabItem,null,false);Game.moduleModel.actor.sUpdateActorInfo.add(this.onUpdateActorInfo,this);Game.protoOkEvent.add(ProtoEventKey.ItemData,this.updateView,this);this.conent.on(laya.events.Event.MOUSE_DOWN,this,this.onMouseDown);this.conent.on(laya.events.Event.MOUSE_MOVE,this,this.onMouseMove);this.conent.on(laya.events.Event.MOUSE_UP,this,this.onMouseUp);Game.protoOkEvent.add(ProtoEventKey.Actor_HideActor,this.onHideActor,this)};ArtistDetailWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this);this.conent.clearProps();this.conent.m_closeBtn.offClick(this,this.onClickCloseBtn);this.conent.m_frozenBtn.offClick(this,this.onClickFrozenBtn);this.conent.m_renameBtn.offClick(this,this.onClickRenameBtn);this.conent.m_tablist.off(fairygui.Events.CLICK_ITEM,this,this.clickTabItem);this.conent.m_tablist.itemRenderer.recover();Game.moduleModel.actor.sUpdateActorInfo.remove(this.onUpdateActorInfo,this);Game.protoOkEvent.remove(ProtoEventKey.ItemData,this.updateView,this);Game.protoOkEvent.remove(ProtoEventKey.Actor_HideActor,this.onHideActor,this);this.conent.off(laya.events.Event.MOUSE_DOWN,this,this.onMouseDown);this.conent.off(laya.events.Event.MOUSE_MOVE,this,this.onMouseMove);this.conent.off(laya.events.Event.MOUSE_UP,this,this.onMouseUp)};ArtistDetailWindow.prototype.updateView=function(){this.conent.updateView(this.currentActor);this.updateTabView(this.currentIndex)};ArtistDetailWindow.prototype.onHideActor=function(msg){if(msg.result==0&&this.currentActor&&this.currentActor.hide){this.onClickCloseBtn()}};ArtistDetailWindow.prototype.onUpdateActorInfo=function(data){if(data.hide){return}if(this.currentActor.id==data.id){this.conent.updateView(data);this.currentActor=data}this.updateActor()};ArtistDetailWindow.prototype.onClickRenameBtn=function(){var _this=this;var url=Game.config.avatar.getConfig(this.currentActor.config.avatar).bodyIconUrl;Game.system.openRename(Games.TEXT.RenameTip,null,function(txt){if(txt==_this.currentActor.name){Game.system.toastText(Games.TEXT.SameActorName)}else{Game.protosender.Actor.actorChangeName(_this.currentActor.uuid,txt);Game.system.hideRename()}},null,Games.TEXT.Rename,"",Games.TEXT.Input4toNumChar,18,url,GlobalConfig.getValue1(GlobalKey.KEY_1010_ZiDingYiYi__MingChenXiaoHao),false,Game.config.gameRandomName.getConfig(this.currentActor.config.random_name).names)};ArtistDetailWindow.prototype.onClickCloseBtn=function(){this.menuBack()};ArtistDetailWindow.prototype.onClickFrozenBtn=function(){if(Game.moduleModel.actor.getActorLen()==1){Game.system.toastText(Games.TEXT.DisHideAllActor)}else{if(Game.moduleModel.actor.isUseInMovie(this.currentActor.id)){Game.system.toastText(Games.TEXT.DisHideActorInUse)}else{if(Game.moduleModel.actor.actorHideIsMax){Game.system.toastText(Games.TEXT.HideActorMax)}else{Game.system.confirmText(format(Games.TEXT.SureHideActor,this.currentActor.name),"",this,this.onClickComfirm)}}}};ArtistDetailWindow.prototype.onClickComfirm=function(){Game.protosender.Actor.hideActor(this.currentActor.uuid,true)};ArtistDetailWindow.prototype.onOpenTab=function(tabIndex){_super.prototype.onOpenTab.call(this,tabIndex);this.updateTabView(tabIndex)};ArtistDetailWindow.prototype.updateTabView=function(tabIndex){if(this.currentActor==null){return}this.conent.m_c_visble_panel.selectedIndex=tabIndex;switch(tabIndex){case ArtistDetailTabType.Base:this.basePanel.updateView(this.currentActor);break;case ArtistDetailTabType.Skill:this.skillPanel.updateView(this.currentActor);break;case ArtistDetailTabType.Asset:this.assetPanel.updateView(this.currentActor);break;case ArtistDetailTabType.Expert:this.expertPanel.updateView(this.currentActor);break;case ArtistDetailTabType.Assistant:this.assistantPanel.updateView(this.currentActor);break;default:break}};ArtistDetailWindow.prototype.onMouseDown=function(event){var touches=event.touches;if(touches==null){this.isMouseDown=true;this.startTouchPos.x=event.stageX;this.startTouchPos.y=event.stageY;this.snapDir=Games.DirtionType.None}else{if(touches.length==1){this.isMouseDown=true;this.startTouchPos.x=event.stageX;this.startTouchPos.y=event.stageY;this.snapDir=Games.DirtionType.None}else{this.isMouseDown=false;this.snapDir=Games.DirtionType.None}}};ArtistDetailWindow.prototype.onMouseMove=function(event){if(this.isMouseDown==true){var stageX=event.stageX;var stageY=event.stageY;var distanceY=Math.abs(this.startTouchPos.y-stageY);var distanceX=Math.abs(this.startTouchPos.x-stageX);if(distanceX>fairygui.GRoot.inst.width*0.3&&distanceY<fairygui.GRoot.inst.height*0.1){var dir;if(stageX>this.startTouchPos.x){dir=Games.DirtionType.Right}else{dir=Games.DirtionType.Left}if(this.snapDir!=dir){this.startTouchPos.x=stageX;this.startTouchPos.y=stageY}this.snapDir=dir}}};ArtistDetailWindow.prototype.onMouseUp=function(event){if(this.isMouseDown){this.isMouseDown=false;if(this.snapDir==Games.DirtionType.Left){this.changeLastActor()}else{if(this.snapDir==Games.DirtionType.Right){this.changePreActor()}}this.snapDir=Games.DirtionType.None}};ArtistDetailWindow.prototype.updateActor=function(){this.currentActor=this.actors[this.currentActorIndex];if(this.currentActor){this.conent.updateView(this.currentActor)}Game.moduleModel.actor.selectActor=this.currentActor;this.conent.m_tablist.numItems=this.tabstrs.length;if(this.isOpenTab(this.currentIndex)==false){this.currentIndex=ArtistDetailTabType.Base;this.conent.m_tablist.selectedIndex=this.currentIndex}this.openTab(this.currentIndex)};ArtistDetailWindow.prototype.changePreActor=function(){this.currentActorIndex--;if(this.currentActorIndex<0){this.currentActorIndex=this.actors.length-1}this.updateActor()};ArtistDetailWindow.prototype.changeLastActor=function(){this.currentActorIndex++;if(this.currentActorIndex>=this.actors.length){this.currentActorIndex=0}this.updateActor()};ArtistDetailWindow.prototype.effectAsset=function(){this.conent.m_tablist.selectedIndex=ArtistDetailTabType.Asset;this.currentIndex=ArtistDetailTabType.Asset;this.openTab(ArtistDetailTabType.Asset);this.assetPanel.playeffect()};ArtistDetailWindow.prototype.selectTab=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return this.conent.getSelectTab(args[0])};ArtistDetailWindow.prototype.trainBtn=function(){return this.basePanel.m_upgradeBtn};return ArtistDetailWindow}(Games.MWindow));Games.ArtistDetailWindow=ArtistDetailWindow})(Games||(Games={}));var Games;(function(Games){var ArtistFrozenWindow=(function(_super){__extends(ArtistFrozenWindow,_super);function ArtistFrozenWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.ArtistForzenUI);return _this}ArtistFrozenWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.ArtistForzenUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};ArtistFrozenWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.openUpdateView()};ArtistFrozenWindow.prototype.openUpdateView=function(){this.conent.updateView()};ArtistFrozenWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this);this.conent.m_closeBtn.onClick(this,this.onClickCloseBtn);Game.moduleModel.actor.sUpdateActorInfo.add(this.onUpdateActor,this)};ArtistFrozenWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this);this.conent.m_closeBtn.offClick(this,this.onClickCloseBtn);Game.moduleModel.actor.sUpdateActorInfo.remove(this.onUpdateActor,this)};ArtistFrozenWindow.prototype.onClickCloseBtn=function(){this.menuClose()};ArtistFrozenWindow.prototype.onUpdateActor=function(data){this.openUpdateView()};return ArtistFrozenWindow}(Games.MWindow));Games.ArtistFrozenWindow=ArtistFrozenWindow})(Games||(Games={}));var Games;(function(Games){var ArtistGetWindow=(function(_super){__extends(ArtistGetWindow,_super);function ArtistGetWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.ArtistGetUI);return _this}ArtistGetWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};ArtistGetWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.ArtistGetUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};ArtistGetWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.openView()};ArtistGetWindow.prototype.openView=function(){this.conent.updateView(this.menuParameter.args[0])};ArtistGetWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};ArtistGetWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return ArtistGetWindow}(Games.MWindow));Games.ArtistGetWindow=ArtistGetWindow})(Games||(Games={}));var Games;(function(Games){var ArtistScoutResultWindow=(function(_super){__extends(ArtistScoutResultWindow,_super);function ArtistScoutResultWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.ArtistScoutResultUI);return _this}ArtistScoutResultWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.ArtistScoutResultUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};ArtistScoutResultWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};ArtistScoutResultWindow.prototype.openUpdateView=function(){this.conent.updateView()};ArtistScoutResultWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this);this.conent.m_closeBtn.onClick(this,this.onClickCloseBtn);User.sGameInfoUpdate.add(this.onUpdateDataHandler,this)};ArtistScoutResultWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this);this.conent.m_closeBtn.offClick(this,this.onClickCloseBtn);User.sGameInfoUpdate.remove(this.onUpdateDataHandler,this)};ArtistScoutResultWindow.prototype.onUpdateDataHandler=function(){if(User.info.noseIntoActorList.length>0){this.conent.updateView()}else{this.onClickCloseBtn()}};ArtistScoutResultWindow.prototype.onClickCloseBtn=function(){this.menuBack()};return ArtistScoutResultWindow}(Games.MWindow));Games.ArtistScoutResultWindow=ArtistScoutResultWindow})(Games||(Games={}));var Games;(function(Games){var ArtistScoutSuccessWindow=(function(_super){__extends(ArtistScoutSuccessWindow,_super);function ArtistScoutSuccessWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.ArtistScoutSuccessUI);return _this}ArtistScoutSuccessWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.ArtistScoutSuccessUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};ArtistScoutSuccessWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.openUpdateView()};ArtistScoutSuccessWindow.prototype.openUpdateView=function(){if(this.menuParameter.args.length>1){this.conent.updateView(this.menuParameter.args[0],this.menuParameter.args[1])}else{this.conent.updateView(this.menuParameter.args[0])}};ArtistScoutSuccessWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this);this.conent.m_closeBtn.onClick(this,this.onClickCloseBtn)};ArtistScoutSuccessWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this);this.conent.m_closeBtn.offClick(this,this.onClickCloseBtn)};ArtistScoutSuccessWindow.prototype.onClickCloseBtn=function(){this.menuClose()};return ArtistScoutSuccessWindow}(Games.MWindow));Games.ArtistScoutSuccessWindow=ArtistScoutSuccessWindow})(Games||(Games={}));var Games;(function(Games){var ArtistShareWindow=(function(_super){__extends(ArtistShareWindow,_super);function ArtistShareWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.ArtistShareUI);return _this}ArtistShareWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};ArtistShareWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.ArtistShareUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};ArtistShareWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.openView()};ArtistShareWindow.prototype.openView=function(){this.conent.updateView(this.menuParameter.args[0])};ArtistShareWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};ArtistShareWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return ArtistShareWindow}(Games.MWindow));Games.ArtistShareWindow=ArtistShareWindow})(Games||(Games={}));var Games;(function(Games){var ArtistTrainResultWindow=(function(_super){__extends(ArtistTrainResultWindow,_super);function ArtistTrainResultWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.ArtistTrainResultUI);return _this}ArtistTrainResultWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.ArtistTrainResultUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};ArtistTrainResultWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.openUpdateView()};ArtistTrainResultWindow.prototype.openUpdateView=function(){this.conent.updateView(this.menuParameter.args)};ArtistTrainResultWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};ArtistTrainResultWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return ArtistTrainResultWindow}(Games.MWindow));Games.ArtistTrainResultWindow=ArtistTrainResultWindow})(Games||(Games={}));var Games;(function(Games){var ArtistTrainSubType;(function(ArtistTrainSubType){ArtistTrainSubType[ArtistTrainSubType.Success=1]="Success"})(ArtistTrainSubType=Games.ArtistTrainSubType||(Games.ArtistTrainSubType={}));var ArtistTrainWindow=(function(_super){__extends(ArtistTrainWindow,_super);function ArtistTrainWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.ArtistTrainUI);return _this}ArtistTrainWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.ArtistTrainUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};ArtistTrainWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.openUpdateView()};ArtistTrainWindow.prototype.openUpdateView=function(){this.conent.updateView(this.menuParameter.args[0])};ArtistTrainWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this);this.conent.m_bgCom.m_closeBtn.onClick(this,this.onClickCloseBtn)};ArtistTrainWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this);this.conent.m_bgCom.m_closeBtn.offClick(this,this.onClickCloseBtn)};ArtistTrainWindow.prototype.onClickCloseBtn=function(){this.menuClose()};return ArtistTrainWindow}(Games.MWindow));Games.ArtistTrainWindow=ArtistTrainWindow})(Games||(Games={}));var Games;(function(Games){var OscarRewardSubWindow=(function(_super){__extends(OscarRewardSubWindow,_super);function OscarRewardSubWindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Oscar.OscarRewardPanel);return _this}OscarRewardSubWindow.prototype.onMenuCreate=function(){this.conent=fgui.Oscar.OscarRewardPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};OscarRewardSubWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.onWindowOpen(parameter.args[0])};OscarRewardSubWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};OscarRewardSubWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return OscarRewardSubWindow}(Games.MSubwindow));Games.OscarRewardSubWindow=OscarRewardSubWindow})(Games||(Games={}));var Games;(function(Games){var OscarShowSubWindow=(function(_super){__extends(OscarShowSubWindow,_super);function OscarShowSubWindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Oscar.OscarShowPanel);return _this}OscarShowSubWindow.prototype.onMenuCreate=function(){this.conent=fgui.Oscar.OscarShowPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};OscarShowSubWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.onWindowOpen(parameter.args[0])};OscarShowSubWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};OscarShowSubWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return OscarShowSubWindow}(Games.MSubwindow));Games.OscarShowSubWindow=OscarShowSubWindow})(Games||(Games={}));var Games;(function(Games){var BuildingProcess1=(function(_super){__extends(BuildingProcess1,_super);function BuildingProcess1(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.SEAT_COUNT=6;_this.npcList=[];_this.avatarposList=[];_this.sitOffsetX=30;_this.sitOffsetY=30;_this.sitIndex=0;_this.isInitOnFilm=false;_this.screenAnimDict=new Dictionary();_this.animPackName="";return _this}BuildingProcess1.prototype.onInit=function(){this.roomPart=fgui.Building.BuildScene1.createInstance();this.refRoom.mainView.m_buildScene.m_scenePart.addChild(this.roomPart);this.roomPart.setSize(this.refRoom.mainView.m_buildScene.m_scenePart.width,this.refRoom.mainView.m_buildScene.m_scenePart.height);this.roomPart.addRelation(this.refRoom.mainView.m_buildScene.m_scenePart,fairygui.RelationType.Size);var scale=this.refRoom.width/this.refRoom.mainView.sourceWidth;this.cinemaScreenPart=fgui.Building.BuildCinemaScreen.createInstance();this.refRoom.mainView.m_buildScene.m_scenePartBottom.addChild(this.cinemaScreenPart);this.cinemaScreenPart.setSize(this.refRoom.mainView.m_buildScene.m_scenePart.width,this.refRoom.mainView.m_buildScene.m_scenePart.height);this.cinemaScreenPart.addRelation(this.refRoom.mainView.m_buildScene.m_scenePart,fairygui.RelationType.Size);this.sitIndex=this.SEAT_COUNT;this.initNpcList();this.initConfigSitPosList();this.initScreenAnimConfig()};BuildingProcess1.prototype.dispose=function(){this.roomPart&&this.roomPart.dispose();Game.event.remove(GameEventKey.GameEventKey_FilmStart,this.onFilmStart,this);Game.event.remove(GameEventKey.GameEventKey_FilmEnd,this.onFilmEnd,this);this.endFilm()};BuildingProcess1.prototype.onProcess=function(){console.log("RoomProcesser -> "+getClassName(this));Game.event.add(GameEventKey.GameEventKey_FilmStart,this.onFilmStart,this);Game.event.add(GameEventKey.GameEventKey_FilmEnd,this.onFilmEnd,this);if(this.isOnFilming){this.startFilm()}};BuildingProcess1.prototype.initNpcList=function(){this.npcList.length=0;this.npcList.push(Game.config.global.getConfig(GlobalKey.KEY_1051).value);this.npcList.push(Game.config.global.getConfig(GlobalKey.KEY_1052).value);this.npcList.push(Game.config.global.getConfig(GlobalKey.KEY_1053).value);this.npcList.push(Game.config.global.getConfig(GlobalKey.KEY_1054).value)};BuildingProcess1.prototype.initConfigSitPosList=function(){this.avatarposList.length=0;for(var i=0;i<this.SEAT_COUNT;i++){var posObject=this.roomPart.m_chairPart.getChild("sit"+(i)).asCom;posObject.getChild("sample").visible=false;this.avatarposList.push(posObject)}};BuildingProcess1.prototype.initScreenAnimConfig=function(){this.screenAnimDict.clear();this.screenAnimDict.add(1,fgui.FilmScreenAnim1.FilmScreenAnim1);this.screenAnimDict.add(2,fgui.FilmScreenAnim2.FilmScreenAnim2);this.screenAnimDict.add(3,fgui.FilmScreenAnim3.FilmScreenAnim3);this.screenAnimDict.add(4,fgui.FilmScreenAnim4.FilmScreenAnim4);this.screenAnimDict.add(5,fgui.FilmScreenAnim5.FilmScreenAnim5);this.screenAnimDict.add(6,fgui.FilmScreenAnim6.FilmScreenAnim6);this.screenAnimDict.add(7,fgui.FilmScreenAnim7.FilmScreenAnim7);this.screenAnimDict.add(8,fgui.FilmScreenAnim8.FilmScreenAnim8);this.screenAnimDict.add(9,fgui.FilmScreenAnim9.FilmScreenAnim9);this.screenAnimDict.add(10,fgui.FilmScreenAnim10.FilmScreenAnim10)};BuildingProcess1.prototype.start=function(){var _this=this;setTimeout(function(){_this.startFilm()},5000)};BuildingProcess1.prototype.onFilmStart=function(value){this.startFilm()};BuildingProcess1.prototype.onFilmEnd=function(){this.endFilm()};Object.defineProperty(BuildingProcess1.prototype,"isFilmStart",{get:function(){return Game.moduleModel.warData.filmingCurDay<=3},enumerable:true,configurable:true});BuildingProcess1.prototype.startFilm=function(){if(!this.isInitOnFilm){this.isInitOnFilm=true;this.sitIndex=this.SEAT_COUNT;Games.AvatarManager.sBehaviorFinish.add(this.onAvatarBehaviorFinish,this);this.cinemaPerformList=this.getPerformList();this.creatNpc();var stroyId=Game.moduleModel.warData.moveData.movieId;var stroyCfg=Game.config.story.getConfig(stroyId);var filmType=stroyCfg.type%50;if(this.screenAnimDict.hasKey(filmType)){var url=Res.getRoom("1_screen");this.refRoom.reLoadBuildTexture(url);this.loadScreenAnimRes(filmType)}}};BuildingProcess1.prototype.endFilm=function(){this.isInitOnFilm=false;Games.AvatarManager.sBehaviorFinish.remove(this.onAvatarBehaviorFinish,this);this.refRoom.clearAllAvatar();var url=Res.getRoom(Games.RoomType.Cinema);this.refRoom.reLoadBuildTexture(url);this.unloadScreenAnimRes()};BuildingProcess1.prototype.loadScreenAnimRes=function(animType){var _this=this;var animClass=this.screenAnimDict.getValue(animType);if(!animClass){return}this.animPackName=animClass.name;Game.asset.loadFguiByPackagename(this.animPackName,this,function(packageConfig){_this.screenAnim=animClass.createInstance();_this.cinemaScreenPart.m_screenPart.addChild(_this.screenAnim);var scale=_this.refRoom.width/_this.refRoom.mainView.sourceWidth;_this.screenAnim.setPivot(0.5,0.5);_this.screenAnim.setScale(scale,scale);var animTrans=_this.screenAnim.getTransition("t0")})};BuildingProcess1.prototype.unloadScreenAnimRes=function(){if(this.screenAnim){this.screenAnim.dispose();this.screenAnim=null;Game.asset.unloadFgui(this.animPackName)}};Object.defineProperty(BuildingProcess1.prototype,"isOnFilming",{get:function(){return Game.moduleModel.warData.onCheckHaveDurDay},enumerable:true,configurable:true});BuildingProcess1.prototype.onAvatarBehaviorFinish=function(data){if(data.performType==Games.PerformType.Cinema){var avatar=this.refRoom.getAvatar(data.avatarUid);avatar.executeActionEvents(this.getCinemaEventByStar(),Games.PerformType.Cinema)}};BuildingProcess1.prototype.creatNpc=function(npcId){if(npcId===void 0){npcId=101}var rd=Random.range(0,this.npcList.length);npcId=this.npcList[rd];var aInfo=Games.AvatarInfo.creatByNpcId(npcId);aInfo.idleName="zuoxia1";var cUnit=Game.creator.creatEUnit(aInfo);var bounds=cUnit.getBounds();cUnit.pos(bounds.width,bounds.height);var posCom=this.getPosCom();this.refRoom.addAvatar(cUnit,posCom);cUnit.sitDown(cUnit.x+this.sitOffsetX,cUnit.y-this.sitOffsetY);cUnit.scaleTalkBox(1/posCom.scaleX,-10,30*posCom.scaleX);if(this.sitIndex>0){cUnit.executeActionEvents(this.getCinemaEventByStar(),Games.PerformType.Cinema);this.creatNpc()}};BuildingProcess1.prototype.getPosCom=function(){this.sitIndex--;var posCom=this.avatarposList[this.sitIndex];return posCom};BuildingProcess1.prototype.getPerformList=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==Games.PerformType.Cinema});return playActList};BuildingProcess1.prototype.getCinemaEventByStar=function(){var filmEval=Game.moduleModel.warData.moveData.boxOfficeEvaluation;var index=Math.min(filmEval-1,this.cinemaPerformList.length-1);return this.cinemaPerformList[index].eventList};return BuildingProcess1}(Games.BaseBuildingProcess));Games.BuildingProcess1=BuildingProcess1})(Games||(Games={}));var Games;(function(Games){var PerformType=Games.PerformType;var Event=laya.events.Event;var BuildingProcess10=(function(_super){__extends(BuildingProcess10,_super);function BuildingProcess10(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moveWithFlowerId=1014;_this.npcList=[101,102,103,104];_this.receptionActorId=0;_this.isOnReception=false;_this.isFansReadyDialog=false;_this.isActorReadyDialog=false;_this.isStartDialog=false;return _this}BuildingProcess10.prototype.onInit=function(){console.log("RoomProcesser -> "+getClassName(this))};BuildingProcess10.prototype.addEventListener=function(){Games.AvatarManager.sAvatarEnter.add(this.onAvatarEnterRoom,this);Games.AvatarManager.sAvatarLeave.add(this.onAvatarLeaveRoom,this);Games.DialogManager.sDialogFinish.add(this.onDialogFinish,this);Game.event.add(GameEventKey.GameEventKey_UpdateVisitActor,this.onVisitActorUpdate,this);Game.event.add(GameEventKey.GameEventKey_UpdateActorHideInfo,this.onActorHideInfoUpdate,this);Game.event.add(GameEventKey.GameEventKey_ShootStartAddActor,this.onShootAddActorToRoom,this);Game.event.add(GameEventKey.GameEventKey_ActorExperciseStart,this.onActorExperciseStart,this);Game.protoOkEvent.add(ProtoEventKey.manageVisit_GetReward,this.onServerManagerVisitGetReward,this)};BuildingProcess10.prototype.removeEventListener=function(){Games.AvatarManager.sAvatarEnter.remove(this.onAvatarEnterRoom,this);Games.AvatarManager.sAvatarLeave.remove(this.onAvatarLeaveRoom,this);Games.DialogManager.sDialogFinish.remove(this.onDialogFinish,this);Game.event.remove(GameEventKey.GameEventKey_UpdateVisitActor,this.onVisitActorUpdate,this);Game.event.remove(GameEventKey.GameEventKey_UpdateActorHideInfo,this.onActorHideInfoUpdate,this);Game.event.remove(GameEventKey.GameEventKey_ShootStartAddActor,this.onShootAddActorToRoom,this);Game.event.remove(GameEventKey.GameEventKey_ActorExperciseStart,this.onActorExperciseStart,this);Game.protoOkEvent.remove(ProtoEventKey.manageVisit_GetReward,this.onServerManagerVisitGetReward,this)};BuildingProcess10.prototype.startReception=function(){if(!this.isOnReception){Game.moduleModel.visit.setRDTalkGroupId();this.addEventListener();this.creatReceptionNpc();this.isOnReception=true;this.receptionActorId=Game.moduleModel.visit.getVisitData().actorId;this.receptionActor=this.refRoom.getAvatarById(this.receptionActorId);this.refRoom.executeLeaveRoomForEach(true,this.receptionActorId);Games.AvatarManager.allocTargetActorToRoom(this.receptionActorId)}};BuildingProcess10.prototype.endReception=function(){Game.moduleModel.visit.saveVisitId();Game.protosender.manageVisit.GetReward();var data=Game.moduleModel.visit.getVisitData();if(data){Games.Static.Instance.onUserorbit("fan",data.actorId.toString(),"visit")}};BuildingProcess10.prototype.onVisitTimeEnd=function(isFansLeave){Game.moduleModel.visit.waitVisitActorId=0;if(isFansLeave){this.removeEventListener();this.isOnReception=false;this.isFansReadyDialog=false;this.isActorReadyDialog=false;this.isStartDialog=false;this.receptionActorId=0;if(this.currentDialog){this.currentDialog.dispose();this.currentDialog=null}if(this.receptionFans){this.receptionFans.endEvent(false);this.receptionFans.leave(false);this.receptionFans.off(Event.CLICK,this,this.onFansClick)}}if(this.receptionActor){this.receptionActor.endEvent(false);this.receptionActor.leave(true,false,this.moveWithFlowerId);this.receptionActor.off(Event.CLICK,this,this.onActorClick)}};BuildingProcess10.prototype.clearReceptionActor=function(){if(this.receptionActor){this.receptionActor.dispose();this.receptionActor=null}};BuildingProcess10.prototype.onServerManagerVisitGetReward=function(proto){this.onVisitTimeEnd(true)};BuildingProcess10.prototype.onVisitActorUpdate=function(){var visitData=Game.moduleModel.visit.getVisitData();if(visitData.isLeave){if(visitData.isReceptior==false&&!visitData.isActorHidden){if(this.isStartDialog){this.endReception()}else{this.onVisitTimeEnd(true)}}else{this.onVisitTimeEnd(true)}}};BuildingProcess10.prototype.onActorHideInfoUpdate=function(actor){if(actor.hide){if(Games.AvatarManager.isActorOnVisit(actor.id)){if(this.isStartDialog){this.endReception()}else{this.onVisitTimeEnd(false)}Games.AvatarManager.removeRoomActor(actor.id);this.clearReceptionActor()}}};BuildingProcess10.prototype.onShootAddActorToRoom=function(actors){console.log("onShootAddActorToRoom()");for(var _i=0,actors_1=actors;_i<actors_1.length;_i++){var actor=actors_1[_i];this.triggerVisitEnd(actor)}};BuildingProcess10.prototype.onActorExperciseStart=function(actorUuid){var actorData=Game.moduleModel.actor.getActorByUUid(actorUuid);if(actorData){this.triggerVisitEnd(actorData)}};BuildingProcess10.prototype.triggerVisitEnd=function(actor){if(actor){if(Games.AvatarManager.isActorOnVisit(actor.id)){if(this.isStartDialog){this.endReception()}else{this.onVisitTimeEnd(false)}this.clearReceptionActor()}}};BuildingProcess10.prototype.actorMoveRoute=function(){var _this=this;if(!this.isStartDialog){this.receptionActorId=Game.moduleModel.visit.getVisitData().actorId;this.receptionActor=this.refRoom.getAvatarById(this.receptionActorId);if(this.receptionActor){this.receptionActor.endEvent(false);this.receptionActor.moveTo(this.refRoom.roomWidth/2-50,false,Handler.create(this,function(){_this.receptionActor.direction=Games.DirtionType.Right;_this.isActorReadyDialog=true;if(_this.isFansReadyDialog){if(!_this.isStartDialog){_this.isStartDialog=true;_this.currentDialog=Games.DialogManager.startDialog(_this.receptionFans,_this.receptionActor,_this.receptionDialog,PerformType.Reception)}}}))}}};BuildingProcess10.prototype.onAvatarEnterRoom=function(data){var _this=this;if(this.isSelfRoom(data.roomType)){if(Games.AvatarManager.isActorOnVisit(data.avatarId)){Game.event.dispatch(GameEventKey.GameEventKey_ScrollMainRoom,Games.RoomType.Reception,true);this.receptionActor=this.refRoom.getAvatar(data.avatarUid);if(this.receptionActor){this.receptionActor.endEvent(false);this.receptionActor.on(Event.CLICK,this,this.onActorClick);this.receptionActor.moveTo(this.refRoom.roomWidth/2-50,true,Handler.create(this,function(){_this.receptionActor.direction=Games.DirtionType.Right;_this.isActorReadyDialog=true;if(_this.isFansReadyDialog){if(!_this.isStartDialog){_this.isStartDialog=true;_this.currentDialog=Games.DialogManager.startDialog(_this.receptionFans,_this.receptionActor,_this.receptionDialog,PerformType.Reception)}}}))}}}};BuildingProcess10.prototype.onAvatarLeaveRoom=function(data){if(!this.isSelfRoom(data.roomType)){if(!data.onEvent){var actor=Game.moduleModel.actor.getActor(data.avatarId);if(Games.AvatarManager.isActorOnVisit(data.avatarId)){console.log(data.avatarId+" -- 艺人离开房间 -- "+data.roomType);var avatarInfo=Games.AvatarInfo.creatByActor(actor);this.refRoom.avatarEnter(avatarInfo,Games.DirtionType.Right,false,Games.DirtionType.Up)}else{if(actor){Games.AvatarManager.allocActorToRoom(actor)}}}}};BuildingProcess10.prototype.onDialogFinish=function(performType){if(performType==PerformType.Reception){this.endReception()}};BuildingProcess10.prototype.onFansClick=function(){if(!this.isStartDialog){var events=Game.moduleModel.visit.getFansStartTalk();this.receptionFans.executeActionEvents(events,PerformType.ReceptionFansTalk)}};BuildingProcess10.prototype.onActorClick=function(){if(!this.isStartDialog){var events=Game.moduleModel.visit.getActorStartTalk();this.receptionActor.executeActionEvents(events,PerformType.ReceptionFansTalk)}};BuildingProcess10.prototype.creatReceptionNpc=function(npcId,direction){var _this=this;if(npcId===void 0){npcId=101}if(direction===void 0){direction=Games.DirtionType.Left}var rd=Random.range(0,this.npcList.length);npcId=this.npcList[rd];var moveCompleteCaller=function(){var events=Game.moduleModel.visit.getFansStartTalk();_this.receptionFans.executeActionEvents(events,PerformType.ReceptionFansTalk);_this.isFansReadyDialog=true;if(_this.isActorReadyDialog){if(!_this.isStartDialog){_this.isStartDialog=true;_this.currentDialog=Games.DialogManager.startDialog(_this.receptionFans,_this.receptionActor,_this.receptionDialog,PerformType.Reception)}}};var aInfo=Games.AvatarInfo.creatByNpcId(npcId);var actionName=Game.config.action.getConfig(1013).action;aInfo.idleName=actionName;this.receptionFans=Game.creator.creatEUnit(aInfo);var bounds=this.receptionFans.getBounds();this.receptionFans.pos(bounds.width,this.refRoom.roomHeight-this.refRoom.routeYList[0]);this.refRoom.addAvatar(this.receptionFans,this.refRoom.mainView.m_buildScene.m_avatarContainer1);this.receptionFans.enterTo(this.refRoom.roomWidth-50,this.receptionFans.y,Games.DirtionType.Left);this.receptionFans.openShadow();this.receptionFans.on(Event.CLICK,this,this.onFansClick);this.receptionFans.moveTo(this.refRoom.roomWidth/2+50,false,Handler.create(this,moveCompleteCaller),null,true,this.moveWithFlowerId)};Object.defineProperty(BuildingProcess10.prototype,"receptionDialog",{get:function(){var events=Game.moduleModel.visit.getReceptionDialog();this.setTalkParams(events);return events},enumerable:true,configurable:true});BuildingProcess10.prototype.setTalkParams=function(events){var actorCfg=Game.config.actor.getConfig(this.receptionActorId);if(actorCfg){var argName=actorCfg.name;for(var _i=0,events_1=events;_i<events_1.length;_i++){var event_1=events_1[_i];event_1.setTalkParams(argName)}}};BuildingProcess10.prototype.isNpc=function(avatarUid){var avatar=this.refRoom.getAvatar(avatarUid);if(avatar){return avatar.unitModel.info.type==Games.AvatarType.Npc}return false};return BuildingProcess10}(Games.BaseBuildingProcess));Games.BuildingProcess10=BuildingProcess10})(Games||(Games={}));var Games;(function(Games){var PerformType=Games.PerformType;var BuildingProcess11=(function(_super){__extends(BuildingProcess11,_super);function BuildingProcess11(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.npcMoveX=490;_this.assistantMoveX=213;_this.npcChairY=55;_this.assitantChairY=55;_this.scaleChair=0.9;_this.npcList=[101,102,103,104];_this.isNpcSitdown=false;_this.isAssistantSitdown=false;_this.dialogIndex=0;return _this}BuildingProcess11.prototype.onInit=function(){console.log("RoomProcesser -> "+getClassName(this));this.dialogList=this.meetingDialog;Game.event.add(GameEventKey.GameEventKey_MeetingStep,this.onMeetingStep,this);Game.event.add(GameEventKey.GameEventKey_EnabledScrollMain,this.onEnabledScrollMain,this);this.npcList.push(Game.config.global.getConfig(GlobalKey.KEY_1051).value);this.npcList.push(Game.config.global.getConfig(GlobalKey.KEY_1052).value);this.npcList.push(Game.config.global.getConfig(GlobalKey.KEY_1053).value);this.npcList.push(Game.config.global.getConfig(GlobalKey.KEY_1054).value)};BuildingProcess11.prototype.dispose=function(){this.npcList.length=0;Game.event.remove(GameEventKey.GameEventKey_MeetingStep,this.onMeetingStep,this);Game.event.remove(GameEventKey.GameEventKey_EnabledScrollMain,this.onEnabledScrollMain,this)};BuildingProcess11.prototype.start=function(){var _this=this;setTimeout(function(){_this.startMeeting()},1000)};BuildingProcess11.prototype.end=function(){var _this=this;setTimeout(function(){_this.endMeeting()},5000)};BuildingProcess11.prototype.addEventListener=function(){Games.DialogManager.sDialogFinish.add(this.onDialogFinish,this)};BuildingProcess11.prototype.removeEventListener=function(){Games.DialogManager.sDialogFinish.remove(this.onDialogFinish,this)};BuildingProcess11.prototype.startMeeting=function(){if(!Game.moduleModel.building.isOnMeeting){console.log("startMeeting");this.addEventListener();Game.moduleModel.building.isOnMeeting=true;this.refRoom.executeLeaveRoomForEach(true);this.creatNpc();this.creatAssistant()}};BuildingProcess11.prototype.endMeeting=function(){if(this.curDialog){this.curDialog.endEvent();this.curDialog=null}if(this.npc){this.isNpcSitdown=false;this.npc.stand(null,this.npc.x,this.npc.y+this.npcChairY);this.npc.resetScale();this.npc.leave(false);this.npc=null}if(this.assistant){this.isAssistantSitdown=false;this.assistant.stand(null,this.assistant.x,this.assistant.y+this.assitantChairY);this.assistant.resetScale();this.assistant.leave(false);this.assistant=null}Game.moduleModel.building.isOnMeeting=false;this.removeEventListener()};BuildingProcess11.prototype.onMeetingStep=function(step){console.log("onMeetingStep= "+step);this.dialogIndex=step;this.startMeeting();if(this.isNpcSitdown&&this.isAssistantSitdown){if(this.curDialog){this.curDialog.endEvent(false);this.curDialog=null}this.curDialog=Games.DialogManager.startDialog(this.assistant,this.npc,this.nextMeetingDialog(),PerformType.Meeting)}};BuildingProcess11.prototype.onEnabledScrollMain=function(enable,roomType){if(roomType==Games.RoomType.Meeting){if(enable){this.endMeeting();console.log("endMeeting")}}};BuildingProcess11.prototype.onDialogFinish=function(performType){if(performType==PerformType.Meeting){}};BuildingProcess11.prototype.creatNpc=function(direction){var _this=this;if(direction===void 0){direction=Games.DirtionType.Left}var npcId=this.npcList[Random.range(0,this.npcList.length)];var aInfo=Games.AvatarInfo.creatByNpcId(npcId);aInfo.idleName="zuoxia1";this.npc=Game.creator.creatEUnit(aInfo);this.refRoom.addAvatar(this.npc,this.refRoom.mainView.m_buildScene.m_avatarContainer0);this.npc.enterTo(this.refRoom.roomWidth+150,this.refRoom.roomHeight-40,Games.DirtionType.Left);this.npc.moveTo(this.npcMoveX,false,Handler.create(this,function(){var scale=_this.npc.unitModel.scaleFactor;_this.npc.setScale(scale*_this.scaleChair);_this.npc.sitDown(_this.npc.x,_this.npc.y-_this.npcChairY);_this.isNpcSitdown=true;if(_this.isAssistantSitdown){if(!_this.curDialog){_this.curDialog=Games.DialogManager.startDialog(_this.assistant,_this.npc,_this.nextMeetingDialog(),PerformType.Meeting)}}}))};BuildingProcess11.prototype.creatAssistant=function(direction){var _this=this;if(direction===void 0){direction=Games.DirtionType.Left}var assistantId=Game.config.global.getConfig(GlobalKey.KEY_1055).value;var aInfo=Games.AvatarInfo.creatByNpcId(assistantId);aInfo.idleName="zuoxia1";this.assistant=Game.creator.creatEUnit(aInfo);this.refRoom.addAvatar(this.assistant,this.refRoom.mainView.m_buildScene.m_avatarContainer0);this.assistant.enterTo(-150,this.refRoom.roomHeight-40,Games.DirtionType.Right);this.assistant.moveTo(this.assistantMoveX,false,Handler.create(this,function(){var scale=_this.assistant.unitModel.scaleFactor;_this.assistant.setScale(scale*_this.scaleChair);_this.assistant.sitDown(_this.assistant.x,_this.assistant.y-_this.assitantChairY);_this.isAssistantSitdown=true;if(_this.isNpcSitdown){if(!_this.curDialog){_this.curDialog=Games.DialogManager.startDialog(_this.assistant,_this.npc,_this.nextMeetingDialog(),PerformType.Meeting)}}}))};Object.defineProperty(BuildingProcess11.prototype,"meetingDialog",{get:function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==PerformType.Meeting});return playActList},enumerable:true,configurable:true});BuildingProcess11.prototype.nextMeetingDialog=function(){if(this.dialogIndex>this.dialogList.length-1){this.dialogIndex=0}return this.dialogList[this.dialogIndex].eventList};BuildingProcess11.prototype.isNpc=function(avatarUid){var avatar=this.refRoom.getAvatar(avatarUid);if(avatar){return avatar.unitModel.info.type==Games.AvatarType.Npc}return false};BuildingProcess11.prototype.isAssistant=function(avatarUid){var avatar=this.refRoom.getAvatar(avatarUid);if(avatar){return avatar.unitModel.info.type==Games.AvatarType.Assistant}return false};return BuildingProcess11}(Games.BaseBuildingProcess));Games.BuildingProcess11=BuildingProcess11})(Games||(Games={}));var Games;(function(Games){var BuildingProcess12=(function(_super){__extends(BuildingProcess12,_super);function BuildingProcess12(){return _super!==null&&_super.apply(this,arguments)||this}BuildingProcess12.prototype.onInit=function(){this.roomPart=fgui.Building.BuildScene12.createInstance();this.refRoom.mainView.m_buildScene.m_scenePart.addChild(this.roomPart);this.roomPart.setSize(this.refRoom.mainView.m_buildScene.m_scenePart.width,this.refRoom.mainView.m_buildScene.m_scenePart.height);this.roomPart.addRelation(this.refRoom.mainView.m_buildScene.m_scenePart,fairygui.RelationType.Size);var scale=this.refRoom.width/this.refRoom.mainView.sourceWidth;this.initNpc()};BuildingProcess12.prototype.onProcess=function(){console.log("RoomProcesser -> "+getClassName(this))};BuildingProcess12.prototype.initNpc=function(){var npcId=Game.config.global.getConfig(GlobalKey.KEY_1050).value;var aInfo=Games.AvatarInfo.creatByNpcId(npcId);var cUnit=Game.creator.creatEUnit(aInfo);var bounds=cUnit.getBounds();cUnit.showOn(this.roomPart.m_pos);cUnit.direction=Games.DirtionType.Right;var headIcon=fgui.Building.BtnNpcTips.createInstance();if(!headIcon){console.log("##### 财务室 NpcHeadIcon null"+headIcon)}headIcon.setItemInfo(EItemId.dollar,Games.TEXT.GoldExchangeBuildingTitle);cUnit.setTopHeadIcon(headIcon);cUnit.setHitArea(cUnit.unitModel.width*2,cUnit.unitModel.height*1.2);this.npcBtn=headIcon;cUnit.openShadow();cUnit.playAction(1027);headIcon.onClick(this,this.onNpcClick);cUnit.on(laya.events.Event.CLICK,this,this.onNpcClick)};BuildingProcess12.prototype.onNpcClick=function(){Game.menu.open(Games.MenuId.GoldExchange)};return BuildingProcess12}(Games.BaseBuildingProcess));Games.BuildingProcess12=BuildingProcess12})(Games||(Games={}));var Games;(function(Games){var Event=laya.events.Event;var BuildingProcess13=(function(_super){__extends(BuildingProcess13,_super);function BuildingProcess13(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.SeatCount=5;_this.tranSitList=[];return _this}BuildingProcess13.prototype.onInit=function(){this.roomPart=fgui.Building.BuildScene13.createInstance();this.refRoom.mainView.m_buildScene.m_scenePart.addChild(this.roomPart);this.roomPart.setSize(this.refRoom.mainView.m_buildScene.m_scenePart.width,this.refRoom.mainView.m_buildScene.m_scenePart.height);this.roomPart.addRelation(this.refRoom.mainView.m_buildScene.m_scenePart,fairygui.RelationType.Size);for(var i=0;i<this.SeatCount;i++){this.tranSitList[i]=this.roomPart.m_seat.getChild("trainSit"+(i+1)).asCom;this.tranSitList[i].getChild("sample").asCom.visible=false}};BuildingProcess13.prototype.onProcess=function(){console.log("RoomProcesser -> "+getClassName(this));this.creatNpc();this.initActorToTrainingRoom();Game.event.add(GameEventKey.GameEventKey_ActorExperciseStart,this.onActorExperciseStart,this);Game.event.add(GameEventKey.GameEventKey_ActorExperciseEnd,this.onActorExperciseEnd,this);Game.event.add(GameEventKey.GameEventKey_ActorBackToExperciseRoom,this.onActorBackToExperciseRoom,this);Games.AvatarManager.sBehaviorFinish.add(this.onAvatarBehaviorFinish,this)};BuildingProcess13.prototype.onActorExperciseStart=function(actorUuid){var _this=this;var actorData=Game.moduleModel.actor.getActorByUUid(actorUuid);var actorExperciseData=Game.moduleModel.actor.getActorExerciseDataByActorUuid(actorUuid);var seatIndex=-1;if(actorExperciseData){seatIndex=actorExperciseData.seatIndex}if(actorData){var experciseAvatarId=Games.AvatarManager.removeRoomActorList([actorData.id])[0];if(experciseAvatarId==undefined){experciseAvatarId=actorData.id}var aInfo=Games.AvatarInfo.creatByAvatarId(experciseAvatarId);var cUnit_1=Game.creator.requestUnit(aInfo);var bounds_1=cUnit_1.getBounds();cUnit_1.pos(bounds_1.width,bounds_1.height);cUnit_1.openShadow();cUnit_1.y=this.refRoom.roomHeight-this.refRoom.routeYList[0];this.refRoom.addAvatar(cUnit_1,this.refRoom.mainView.m_buildScene.m_avatarContainer0);if(seatIndex!=-1){var seatCom_1=this.tranSitList[seatIndex];cUnit_1.moveTo(seatCom_1.x+this.roomPart.m_seat.x,false,Handler.create(this,function(){cUnit_1.showOn(seatCom_1);cUnit_1.pos(0,bounds_1.height-_this.refRoom.routeYList[0]);cUnit_1.executeActionEvents(_this.getRDEvent(),Games.PerformType.Training)}))}}};BuildingProcess13.prototype.onActorExperciseEnd=function(actorUuid,lineUuid){var actorData=Game.moduleModel.actor.getActorByUUid(actorUuid);if(actorData){var actorExperciseData=Game.moduleModel.actor.getActorExerciseDataByUuid(lineUuid);var seatIndex=actorExperciseData.seatIndex;var cUnit=this.refRoom.getAvatarById(actorData.id);if(cUnit){var seatCom=this.tranSitList[seatIndex];cUnit.showOn(this.refRoom.mainView.m_buildScene.m_avatarContainer0);cUnit.pos(seatCom.x+this.roomPart.m_seat.x,this.refRoom.roomHeight-this.refRoom.routeYList[0]);var expVal=Game.config.global.getConfig(GlobalKey.Actor_Train_Exp).value;var totalExpVal=MathDesign.calcActorExperciseExp();cUnit.endEvent(false);cUnit.setTalk(Game.config.msg.getTxtFormat(MsgKey.train_actor_tips,totalExpVal));Game.system.toastText(Game.config.msg.getTxtFormat(MsgKey.train_exp,totalExpVal));cUnit.leave(true)}}};BuildingProcess13.prototype.onActorBackToExperciseRoom=function(actorId){var _this=this;var actorData=Game.moduleModel.actor.getActor(actorId);var actorExperciseData=Game.moduleModel.actor.getActorExerciseDataByActorUuid(actorData.uuid);var seatIndex=-1;if(actorExperciseData){seatIndex=actorExperciseData.seatIndex}if(actorData){var aInfo=Games.AvatarInfo.creatByAvatarId(actorId);var cUnit_2=Game.creator.requestUnit(aInfo);var bounds_2=cUnit_2.getBounds();cUnit_2.pos(bounds_2.width,bounds_2.height);cUnit_2.openShadow();cUnit_2.y=this.refRoom.roomHeight-this.refRoom.routeYList[0];this.refRoom.addAvatar(cUnit_2,this.refRoom.mainView.m_buildScene.m_avatarContainer0);if(seatIndex!=-1){var seatCom_2=this.tranSitList[seatIndex];cUnit_2.moveTo(seatCom_2.x+this.roomPart.m_seat.x,false,Handler.create(this,function(){cUnit_2.showOn(seatCom_2);cUnit_2.pos(0,bounds_2.height-_this.refRoom.routeYList[0]);cUnit_2.executeActionEvents(_this.getRDEvent(),Games.PerformType.Training)}))}}};BuildingProcess13.prototype.initActorToTrainingRoom=function(){var _this=this;var experciseActors=Game.moduleModel.actor.getExperciseDataList();var actorids=[];for(var _i=0,experciseActors_1=experciseActors;_i<experciseActors_1.length;_i++){var experciseActor=experciseActors_1[_i];var actorData=Game.moduleModel.actor.getActorByUUid(experciseActor.uuid);if(actorData){if(!Game.moduleModel.actor.isHide(actorData.id)){actorids.push(actorData.id)}}}var _loop_1=function(avatarId){var info=Games.AvatarInfo.creatByAvatarId(avatarId);var cUnit=Game.creator.requestUnit(info);var bounds=cUnit.getBounds();cUnit.openShadow();cUnit.pos(bounds.width,bounds.height);cUnit.y=this_1.refRoom.roomHeight-this_1.refRoom.routeYList[0];this_1.refRoom.addAvatar(cUnit,this_1.refRoom.mainView.m_buildScene.m_avatarContainer0);var actorData=Game.moduleModel.actor.getActor(avatarId);var actorExperciseData=Game.moduleModel.actor.getActorExerciseDataByActorUuid(actorData.uuid);var seatIndex=actorExperciseData.seatIndex;var seatCom=this_1.tranSitList[seatIndex];cUnit.moveTo(seatCom.x+this_1.roomPart.m_seat.x,false,Handler.create(this_1,function(){cUnit.showOn(seatCom);cUnit.pos(0,bounds.height-_this.refRoom.routeYList[0]);cUnit.executeActionEvents(_this.getRDEvent(),Games.PerformType.Training)}))};var this_1=this;for(var _a=0,actorids_1=actorids;_a<actorids_1.length;_a++){var avatarId=actorids_1[_a];_loop_1(avatarId)}};BuildingProcess13.prototype.onAvatarBehaviorFinish=function(data){if(data.performType==Games.PerformType.Training){var avatar=this.refRoom.getAvatar(data.avatarUid);avatar.executeActionEvents(this.getRDEvent(),Games.PerformType.Training)}};BuildingProcess13.prototype.getRDEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==Games.PerformType.Training&&(value.data%(value.type*10))==1});if(playActList.length>0){return playActList[0].eventList}return[]};BuildingProcess13.prototype.creatNpc=function(){var npcId=Game.config.global.getConfig(GlobalKey.KEY_1048).value;var aInfo=Games.AvatarInfo.creatByNpcId(npcId);var cUnit=Game.creator.requestUnit(aInfo);var bounds=cUnit.getBounds();cUnit.pos(bounds.width,this.refRoom.roomHeight-this.refRoom.routeYList[1]);this.refRoom.addAvatar(cUnit,this.refRoom.mainView.m_buildScene.m_avatarContainer1);var headIcon=fgui.Building.BtnNpcTips.createInstance();headIcon.setInfo(5042,Games.TEXT.ActorExperciser);cUnit.enterTo(this.refRoom.roomWidth-150,cUnit.y+15,Games.DirtionType.Left);cUnit.on(Event.CLICK,this,this.onNpcClick);this.npcBtn=headIcon;cUnit.setTopHeadIcon(headIcon);cUnit.openShadow();cUnit.setHitArea(cUnit.unitModel.width*2,cUnit.unitModel.height*1.2);cUnit.playAction(1027)};BuildingProcess13.prototype.onNpcClick=function(){Game.menu.open(Games.MenuId.ArtListExercise)};return BuildingProcess13}(Games.BaseBuildingProcess));Games.BuildingProcess13=BuildingProcess13})(Games||(Games={}));var Games;(function(Games){var BuildingProcess2=(function(_super){__extends(BuildingProcess2,_super);function BuildingProcess2(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.isShooting=false;_this.timeId=0;return _this}BuildingProcess2.prototype.dispose=function(){this.timeId&&clearTimeout(this.timeId);this.timeId=0;this.shootCanvas&&this.shootCanvas.dispose();Game.event.remove(GameEventKey.GameEventKey_ShootStart,this.onShootStart,this);Game.event.remove(GameEventKey.GameEventKey_ShootEnd,this.onShootEnd,this)};BuildingProcess2.prototype.onProcess=function(){console.log("RoomProcesser -> "+getClassName(this));Game.event.add(GameEventKey.GameEventKey_ShootStart,this.onShootStart,this);Game.event.add(GameEventKey.GameEventKey_ShootEnd,this.onShootEnd,this);this.initShootCanvas()};BuildingProcess2.prototype.initShootCanvas=function(){var aInfo=new Games.AvatarInfo();aInfo.type=Games.AvatarType.Npc;aInfo.texturePath=Res.getCinemaCanvasSkin();aInfo.skeletonPath=Res.getCinemaCanvasSK();this.shootCanvas=Game.creator.creatEUnit(aInfo,this.refRoom.roomWidth,this.refRoom.roomHeight,1);this.onShootEnd();if(Games.AvatarManager.isOnShoot){this.onShootStart(false)}var scale=this.refRoom.width/this.refRoom.mainView.sourceWidth;this.shootCanvas.pos(this.refRoom.mainView.sourceWidth/2,this.refRoom.mainView.sourceHeight+50);this.shootCanvas.setRoomInfo(this.refRoom.roomInfo);this.shootCanvas.showOn(this.refRoom.mainView.m_buildScene.m_canvasContainer)};BuildingProcess2.prototype.onShootStart=function(onShooting){var _this=this;if(!this.isShooting){this.isShooting=true;this.shootCanvas.playAction(2002);Games.AvatarManager.sBehaviorFinish.add(this.onAvatarBehaviorFinish,this);var actorDataList_1=Game.moduleModel.warData.getRealYRList.getValues();Game.event.dispatch(GameEventKey.GameEventKey_ShootStartAddActor,actorDataList_1);console.log("start add ActorToShootRoom....");this.refRoom.executeLeaveRoomForEach(true);setTimeout(function(){_this.addActorToShootRoom(actorDataList_1)},100)}};BuildingProcess2.prototype.onShootEnd=function(){var _this=this;if(this.isShooting){this.isShooting=false;this.shootCanvas.playAction(2004);Games.AvatarManager.sBehaviorFinish.remove(this.onAvatarBehaviorFinish,this);this.refRoom.forEachAvatar(function(avatar){avatar.executeActionEvents(_this.getEndEvent(),Games.PerformType.Shoot)});this.timeId=setTimeout(function(){_this.refRoom.executeLeaveRoomForEach(true)},2000)}};BuildingProcess2.prototype.addActorToShootRoom=function(actors){var _this=this;var actorids=[];for(var _i=0,actors_1=actors;_i<actors_1.length;_i++){var actor=actors_1[_i];actorids.push(actor.id)}var avatarIdList=Games.AvatarManager.removeRoomActorList(actorids);var _loop_1=function(avatarId){var info=Games.AvatarInfo.creatByAvatarId(avatarId);var cUnit=Game.creator.requestUnit(info);var bounds=cUnit.getBounds();cUnit.pos(bounds.width,bounds.height);cUnit.y=this_1.refRoom.roomHeight-this_1.refRoom.routeYList[0];this_1.refRoom.addAvatar(cUnit,this_1.refRoom.mainView.m_buildScene.m_avatarContainer0);var randomX=Random.rangeBetween(0,Laya.stage.width);cUnit.moveTo(randomX,false,Handler.create(this_1,function(){cUnit.executeActionEvents(_this.getRDEvent(),Games.PerformType.Shoot)},null,true))};var this_1=this;for(var _a=0,avatarIdList_1=avatarIdList;_a<avatarIdList_1.length;_a++){var avatarId=avatarIdList_1[_a];_loop_1(avatarId)}};BuildingProcess2.prototype.onAvatarBehaviorFinish=function(data){if(data.performType==Games.PerformType.Shoot){var avatar=this.refRoom.getAvatar(data.avatarUid);if(avatar){avatar.executeActionEvents(this.getRDEvent(),Games.PerformType.Shoot)}}};BuildingProcess2.prototype.getRDEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==Games.PerformType.Shoot&&(value.data%(value.type*10))==1});if(playActList.length>0){return playActList[0].eventList}return[]};BuildingProcess2.prototype.getEndEvent=function(){var playActList=Game.config.playAct.getConfigList();playActList=playActList.filter(function(value,index,array){return value.type==Games.PerformType.Shoot&&(value.data%(value.type*10))==2});if(playActList.length>0){return playActList[0].eventList}return[]};return BuildingProcess2}(Games.BaseBuildingProcess));Games.BuildingProcess2=BuildingProcess2})(Games||(Games={}));var Games;(function(Games){var Event=laya.events.Event;var BuildingProcess3=(function(_super){__extends(BuildingProcess3,_super);function BuildingProcess3(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.sitOffsetX=30;_this.sitOffsetY=30;_this.avatarposList=[];return _this}BuildingProcess3.prototype.onInit=function(){this.roomPart=fgui.Building.BuildScene3.createInstance();this.refRoom.mainView.m_buildScene.m_scenePart.addChild(this.roomPart);this.roomPart.setSize(this.refRoom.mainView.m_buildScene.m_scenePart.width,this.refRoom.mainView.m_buildScene.m_scenePart.height);this.roomPart.addRelation(this.refRoom.mainView.m_buildScene.m_scenePart,fairygui.RelationType.Size);var scale=this.refRoom.width/this.refRoom.mainView.sourceWidth;this.initConfigSitPosList();Game.protoOkEvent.add(ProtoEventKey.city_HoldCity,this.showTrainer,this)};BuildingProcess3.prototype.dispose=function(){this.roomPart&&this.roomPart.dispose();this.starNpc&&this.starNpc.dispose();this.trainerNpc&&this.trainerNpc.dispose();Game.protoOkEvent.remove(ProtoEventKey.city_HoldCity,this.showTrainer,this)};BuildingProcess3.prototype.onProcess=function(){console.log("RoomProcesser -> "+getClassName(this));this.starNpcId=Game.config.global.getConfig(GlobalKey.KEY_1046).value;this.trainerNpcId=Game.config.global.getConfig(GlobalKey.KEY_1047).value;this.starNpc=this.creatNpc(this.starNpcId,this.starCom);this.starNpc.setHitArea(this.starNpc.unitModel.width*2,this.starNpc.unitModel.height*1.2,-this.starNpc.unitModel.width*0.8,this.starNpc.unitModel.height*0.2);this.trainerNpc=this.creatNpc(this.trainerNpcId,this.trainerCom);this.trainerNpc.setHitArea(this.trainerNpc.unitModel.width*2,this.trainerNpc.unitModel.height*1.2,-this.trainerNpc.unitModel.width*0.8,this.trainerNpc.unitModel.height*0.2);var trainerNpcTip=this.roomPart.m_seat.m_btnNpcTip1;var starNpcTip=this.roomPart.m_seat.m_btnNpcTip2;starNpcTip.m_title.text=Games.TEXT.BuildActorRoomTalentNpc;starNpcTip.onClick(this,this.onNpcClick,[this.starNpcId]);trainerNpcTip.m_title.text=Games.TEXT.BuildActorRoomTrainerNpc;trainerNpcTip.onClick(this,this.onNpcClick,[this.trainerNpcId]);this.showTrainer()};BuildingProcess3.prototype.showTrainer=function(){var checkShowTrainer=Game.moduleModel.actor.isOpenTrain;if(!checkShowTrainer){this.trainerNpc.visible=false;this.roomPart.m_seat.m_btnNpcTip1.visible=false}else{this.trainerNpc.visible=true;this.roomPart.m_seat.m_btnNpcTip1.visible=true}};BuildingProcess3.prototype.creatNpc=function(npcId,posCom){var aInfo=Games.AvatarInfo.creatByNpcId(npcId);aInfo.idleName="zuoxia1";var cUnit=Game.creator.creatEUnit(aInfo);var bounds=cUnit.getBounds();cUnit.pos(bounds.width,bounds.height);this.refRoom.addAvatar(cUnit,posCom);cUnit.sitDown(cUnit.x+this.sitOffsetX,cUnit.y-this.sitOffsetY);cUnit.on(Event.CLICK,this,this.onNpcClick,[aInfo.id]);return cUnit};BuildingProcess3.prototype.initConfigSitPosList=function(){this.trainerCom=this.roomPart.m_seat.getChild("pos1").asCom;this.trainerCom.getChild("sample").visible=false;this.starCom=this.roomPart.m_seat.getChild("pos2").asCom;this.starCom.getChild("sample").visible=false};BuildingProcess3.prototype.onNpcClick=function(npcId){if(npcId==this.starNpcId){if(Game.moduleModel.actor.noseActorIsWaiting&&User.info.noseIntoActorList.length>0){Game.menu.open(Games.MenuId.ArtistScoutResult)}else{Game.menu.openTab(Games.MenuId.ArtistList,Games.ArtistListSubType.FindPanel)}}else{if(npcId==this.trainerNpcId){Game.menu.open(Games.MenuId.ArtistTrain)}}};return BuildingProcess3}(Games.BaseBuildingProcess));Games.BuildingProcess3=BuildingProcess3})(Games||(Games={}));var Games;(function(Games){var CooperationAchievedSubwindow=(function(_super){__extends(CooperationAchievedSubwindow,_super);function CooperationAchievedSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Cooperation.CooperationAchieved);return _this}CooperationAchievedSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Cooperation.CooperationAchieved.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};CooperationAchievedSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};CooperationAchievedSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return CooperationAchievedSubwindow}(Games.MSubwindow));Games.CooperationAchievedSubwindow=CooperationAchievedSubwindow})(Games||(Games={}));var Games;(function(Games){var CooperationApplySubwindow=(function(_super){__extends(CooperationApplySubwindow,_super);function CooperationApplySubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Cooperation.CooperationApply);return _this}CooperationApplySubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Cooperation.CooperationApply.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};CooperationApplySubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};CooperationApplySubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return CooperationApplySubwindow}(Games.MSubwindow));Games.CooperationApplySubwindow=CooperationApplySubwindow})(Games||(Games={}));var Games;(function(Games){var CooperationEndSubwindow=(function(_super){__extends(CooperationEndSubwindow,_super);function CooperationEndSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Cooperation.CooperationEnd);return _this}CooperationEndSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Cooperation.CooperationEnd.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};CooperationEndSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};CooperationEndSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return CooperationEndSubwindow}(Games.MSubwindow));Games.CooperationEndSubwindow=CooperationEndSubwindow})(Games||(Games={}));var Games;(function(Games){var CooperationMainPanelSubwindow=(function(_super){__extends(CooperationMainPanelSubwindow,_super);function CooperationMainPanelSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Cooperation.CooperationMainPanel);return _this}CooperationMainPanelSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Cooperation.CooperationMainPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};CooperationMainPanelSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};CooperationMainPanelSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return CooperationMainPanelSubwindow}(Games.MSubwindow));Games.CooperationMainPanelSubwindow=CooperationMainPanelSubwindow})(Games||(Games={}));var Games;(function(Games){var CooperationRealtionshipSubwindow=(function(_super){__extends(CooperationRealtionshipSubwindow,_super);function CooperationRealtionshipSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Cooperation.CooperationRealtionship);return _this}CooperationRealtionshipSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Cooperation.CooperationRealtionship.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};CooperationRealtionshipSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};CooperationRealtionshipSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return CooperationRealtionshipSubwindow}(Games.MSubwindow));Games.CooperationRealtionshipSubwindow=CooperationRealtionshipSubwindow})(Games||(Games={}));var Games;(function(Games){var MailContentSubwindow=(function(_super){__extends(MailContentSubwindow,_super);function MailContentSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.PfSkin.MailContentPanel);return _this}MailContentSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.MailContentPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};MailContentSubwindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.OnWindowOpen(parameter.args[0])};MailContentSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};MailContentSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return MailContentSubwindow}(Games.MSubwindow));Games.MailContentSubwindow=MailContentSubwindow})(Games||(Games={}));var Games;(function(Games){var MarketCountryListSubwindow=(function(_super){__extends(MarketCountryListSubwindow,_super);function MarketCountryListSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Market.MarketCountryListPanel);return _this}MarketCountryListSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Market.MarketCountryListPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};MarketCountryListSubwindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};MarketCountryListSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};MarketCountryListSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return MarketCountryListSubwindow}(Games.MSubwindow));Games.MarketCountryListSubwindow=MarketCountryListSubwindow})(Games||(Games={}));var Games;(function(Games){var MarketPublicitySubwindow=(function(_super){__extends(MarketPublicitySubwindow,_super);function MarketPublicitySubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Market.MarketPublicityPanel);return _this}MarketPublicitySubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Market.MarketPublicityPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};MarketPublicitySubwindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};MarketPublicitySubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};MarketPublicitySubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return MarketPublicitySubwindow}(Games.MSubwindow));Games.MarketPublicitySubwindow=MarketPublicitySubwindow})(Games||(Games={}));var Games;(function(Games){var MarketRoadShowSubwindow=(function(_super){__extends(MarketRoadShowSubwindow,_super);function MarketRoadShowSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Market.MarketRoadShowPanel);return _this}MarketRoadShowSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Market.MarketRoadShowPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};MarketRoadShowSubwindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};MarketRoadShowSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};MarketRoadShowSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return MarketRoadShowSubwindow}(Games.MSubwindow));Games.MarketRoadShowSubwindow=MarketRoadShowSubwindow})(Games||(Games={}));var Games;(function(Games){var MarketSelectActorSubwindow=(function(_super){__extends(MarketSelectActorSubwindow,_super);function MarketSelectActorSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Market.MarketSelectActorPanel);return _this}MarketSelectActorSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Market.MarketSelectActorPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};MarketSelectActorSubwindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};MarketSelectActorSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};MarketSelectActorSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return MarketSelectActorSubwindow}(Games.MSubwindow));Games.MarketSelectActorSubwindow=MarketSelectActorSubwindow})(Games||(Games={}));var Games;(function(Games){var RankRewardSubwindow=(function(_super){__extends(RankRewardSubwindow,_super);function RankRewardSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Rank.RankRewardPanel);return _this}RankRewardSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Rank.RankRewardPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};RankRewardSubwindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.OnWindowOpen()};RankRewardSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};RankRewardSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return RankRewardSubwindow}(Games.MSubwindow));Games.RankRewardSubwindow=RankRewardSubwindow})(Games||(Games={}));var Games;(function(Games){var StreetCinemaSelectedSubwindow=(function(_super){__extends(StreetCinemaSelectedSubwindow,_super);function StreetCinemaSelectedSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Street.StreetCinemaSelectedPanel);return _this}StreetCinemaSelectedSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Street.StreetCinemaSelectedPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};StreetCinemaSelectedSubwindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.onWindowOpen(parameter.args[0])};StreetCinemaSelectedSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};StreetCinemaSelectedSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return StreetCinemaSelectedSubwindow}(Games.MSubwindow));Games.StreetCinemaSelectedSubwindow=StreetCinemaSelectedSubwindow})(Games||(Games={}));var Games;(function(Games){var StreetInfoSubwindow=(function(_super){__extends(StreetInfoSubwindow,_super);function StreetInfoSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Street.StreetInfoPanel);return _this}StreetInfoSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Street.StreetInfoPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};StreetInfoSubwindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.onWindowOpen(parameter.args[0])};StreetInfoSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};StreetInfoSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return StreetInfoSubwindow}(Games.MSubwindow));Games.StreetInfoSubwindow=StreetInfoSubwindow})(Games||(Games={}));var Games;(function(Games){var StreetLvUpInfoSubwindow=(function(_super){__extends(StreetLvUpInfoSubwindow,_super);function StreetLvUpInfoSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Street.StreetLvUpInfoPanel);return _this}StreetLvUpInfoSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Street.StreetLvUpInfoPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};StreetLvUpInfoSubwindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.onWindowOpen(parameter.args[0])};StreetLvUpInfoSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};StreetLvUpInfoSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return StreetLvUpInfoSubwindow}(Games.MSubwindow));Games.StreetLvUpInfoSubwindow=StreetLvUpInfoSubwindow})(Games||(Games={}));var Games;(function(Games){var StreetSelectCinemaSubwindow=(function(_super){__extends(StreetSelectCinemaSubwindow,_super);function StreetSelectCinemaSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.Street.StreetSelectCinemaPanel);return _this}StreetSelectCinemaSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.Street.StreetSelectCinemaPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};StreetSelectCinemaSubwindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.onWindowOpen(parameter.args[0])};StreetSelectCinemaSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};StreetSelectCinemaSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return StreetSelectCinemaSubwindow}(Games.MSubwindow));Games.StreetSelectCinemaSubwindow=StreetSelectCinemaSubwindow})(Games||(Games={}));var Games;(function(Games){var CurrentMarketInfoSubwindow=(function(_super){__extends(CurrentMarketInfoSubwindow,_super);function CurrentMarketInfoSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarCurrentMarketInfo);return _this}CurrentMarketInfoSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarCurrentMarketInfo.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};CurrentMarketInfoSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};CurrentMarketInfoSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return CurrentMarketInfoSubwindow}(Games.MSubwindow));Games.CurrentMarketInfoSubwindow=CurrentMarketInfoSubwindow})(Games||(Games={}));var Games;(function(Games){var FilmInfoSubwindow=(function(_super){__extends(FilmInfoSubwindow,_super);function FilmInfoSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarFilmInfo);return _this}FilmInfoSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarFilmInfo.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};FilmInfoSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};FilmInfoSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return FilmInfoSubwindow}(Games.MSubwindow));Games.FilmInfoSubwindow=FilmInfoSubwindow})(Games||(Games={}));var Games;(function(Games){var SelectyirenSubwindow=(function(_super){__extends(SelectyirenSubwindow,_super);function SelectyirenSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarSelectActor);return _this}SelectyirenSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarSelectActor.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};SelectyirenSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};SelectyirenSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return SelectyirenSubwindow}(Games.MSubwindow));Games.SelectyirenSubwindow=SelectyirenSubwindow})(Games||(Games={}));var Games;(function(Games){var WarAudienceReputationSubwindow=(function(_super){__extends(WarAudienceReputationSubwindow,_super);function WarAudienceReputationSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarAudienceReputation);return _this}WarAudienceReputationSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarAudienceReputation.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarAudienceReputationSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarAudienceReputationSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarAudienceReputationSubwindow}(Games.MSubwindow));Games.WarAudienceReputationSubwindow=WarAudienceReputationSubwindow})(Games||(Games={}));var Games;(function(Games){var WarCinemaSelectionSubwindow=(function(_super){__extends(WarCinemaSelectionSubwindow,_super);function WarCinemaSelectionSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarCinemaSelection);return _this}WarCinemaSelectionSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarCinemaSelection.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarCinemaSelectionSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarCinemaSelectionSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarCinemaSelectionSubwindow}(Games.MSubwindow));Games.WarCinemaSelectionSubwindow=WarCinemaSelectionSubwindow})(Games||(Games={}));var Games;(function(Games){var WarCostViewSubwindow=(function(_super){__extends(WarCostViewSubwindow,_super);function WarCostViewSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarCostView);return _this}WarCostViewSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarCostView.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarCostViewSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarCostViewSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarCostViewSubwindow}(Games.MSubwindow));Games.WarCostViewSubwindow=WarCostViewSubwindow})(Games||(Games={}));var Games;(function(Games){var WarEndingIncomeSubwindow=(function(_super){__extends(WarEndingIncomeSubwindow,_super);function WarEndingIncomeSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarEndingIncome);return _this}WarEndingIncomeSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarEndingIncome.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarEndingIncomeSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarEndingIncomeSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarEndingIncomeSubwindow}(Games.MSubwindow));Games.WarEndingIncomeSubwindow=WarEndingIncomeSubwindow})(Games||(Games={}));var Games;(function(Games){var WarFilmingSubwindow=(function(_super){__extends(WarFilmingSubwindow,_super);function WarFilmingSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarFilming);return _this}WarFilmingSubwindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};WarFilmingSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarFilming.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarFilmingSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarFilmingSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};WarFilmingSubwindow.prototype.show=function(){_super.prototype.show.call(this)};WarFilmingSubwindow.prototype.showOn=function(root){_super.prototype.showOn.call(this,root)};WarFilmingSubwindow.prototype.windowShow=function(){var preParent=this.parent;_super.prototype.windowShow.call(this);if(preParent){this.onShown()}};return WarFilmingSubwindow}(Games.MSubwindow));Games.WarFilmingSubwindow=WarFilmingSubwindow})(Games||(Games={}));var Games;(function(Games){var WarFilmJiesuanSubwindow=(function(_super){__extends(WarFilmJiesuanSubwindow,_super);function WarFilmJiesuanSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarFilmJiesuan);return _this}WarFilmJiesuanSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarFilmJiesuan.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarFilmJiesuanSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarFilmJiesuanSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarFilmJiesuanSubwindow}(Games.MSubwindow));Games.WarFilmJiesuanSubwindow=WarFilmJiesuanSubwindow})(Games||(Games={}));var Games;(function(Games){var WarFilmOverMarketInfoSubwindow=(function(_super){__extends(WarFilmOverMarketInfoSubwindow,_super);function WarFilmOverMarketInfoSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarFilmOverMarketInfo);return _this}WarFilmOverMarketInfoSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarFilmOverMarketInfo.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarFilmOverMarketInfoSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarFilmOverMarketInfoSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarFilmOverMarketInfoSubwindow}(Games.MSubwindow));Games.WarFilmOverMarketInfoSubwindow=WarFilmOverMarketInfoSubwindow})(Games||(Games={}));var Games;(function(Games){var WarFilmSelectingSubwindow=(function(_super){__extends(WarFilmSelectingSubwindow,_super);function WarFilmSelectingSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarFilmSelecting);return _this}WarFilmSelectingSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarFilmSelecting.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarFilmSelectingSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarFilmSelectingSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarFilmSelectingSubwindow}(Games.MSubwindow));Games.WarFilmSelectingSubwindow=WarFilmSelectingSubwindow})(Games||(Games={}));var Games;(function(Games){var WarFilmShangYingSubwindow=(function(_super){__extends(WarFilmShangYingSubwindow,_super);function WarFilmShangYingSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarFilmShangYing);return _this}WarFilmShangYingSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarFilmShangYing.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarFilmShangYingSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarFilmShangYingSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarFilmShangYingSubwindow}(Games.MSubwindow));Games.WarFilmShangYingSubwindow=WarFilmShangYingSubwindow})(Games||(Games={}));var Games;(function(Games){var WarFilmSQSubwindow=(function(_super){__extends(WarFilmSQSubwindow,_super);function WarFilmSQSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarFilmSQ);return _this}WarFilmSQSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarFilmSQ.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarFilmSQSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarFilmSQSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarFilmSQSubwindow}(Games.MSubwindow));Games.WarFilmSQSubwindow=WarFilmSQSubwindow})(Games||(Games={}));var Games;(function(Games){var WarFilmSQViewSubwindow=(function(_super){__extends(WarFilmSQViewSubwindow,_super);function WarFilmSQViewSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarFilmSQView);return _this}WarFilmSQViewSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarFilmSQView.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarFilmSQViewSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarFilmSQViewSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarFilmSQViewSubwindow}(Games.MSubwindow));Games.WarFilmSQViewSubwindow=WarFilmSQViewSubwindow})(Games||(Games={}));var Games;(function(Games){var WarFilmSYPFSubwindow=(function(_super){__extends(WarFilmSYPFSubwindow,_super);function WarFilmSYPFSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarFilmSYPF);return _this}WarFilmSYPFSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarFilmSYPF.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarFilmSYPFSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarFilmSYPFSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarFilmSYPFSubwindow}(Games.MSubwindow));Games.WarFilmSYPFSubwindow=WarFilmSYPFSubwindow})(Games||(Games={}));var Games;(function(Games){var WarFilmYRShowSubwindow=(function(_super){__extends(WarFilmYRShowSubwindow,_super);function WarFilmYRShowSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarFilmYRShow);return _this}WarFilmYRShowSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarFilmYRShow.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarFilmYRShowSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarFilmYRShowSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarFilmYRShowSubwindow}(Games.MSubwindow));Games.WarFilmYRShowSubwindow=WarFilmYRShowSubwindow})(Games||(Games={}));var Games;(function(Games){var WarNoticeFeedBackSubwindow=(function(_super){__extends(WarNoticeFeedBackSubwindow,_super);function WarNoticeFeedBackSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarFeedBack);return _this}WarNoticeFeedBackSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarFeedBack.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarNoticeFeedBackSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarNoticeFeedBackSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarNoticeFeedBackSubwindow}(Games.MSubwindow));Games.WarNoticeFeedBackSubwindow=WarNoticeFeedBackSubwindow})(Games||(Games={}));var Games;(function(Games){var WarPaishequerenSubwindow=(function(_super){__extends(WarPaishequerenSubwindow,_super);function WarPaishequerenSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarPaishequeren);return _this}WarPaishequerenSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarPaishequeren.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarPaishequerenSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarPaishequerenSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarPaishequerenSubwindow}(Games.MSubwindow));Games.WarPaishequerenSubwindow=WarPaishequerenSubwindow})(Games||(Games={}));var Games;(function(Games){var WarSelectFilmTypeSubwindow=(function(_super){__extends(WarSelectFilmTypeSubwindow,_super);function WarSelectFilmTypeSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarSelectFilmType);return _this}WarSelectFilmTypeSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarSelectFilmType.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarSelectFilmTypeSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarSelectFilmTypeSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarSelectFilmTypeSubwindow}(Games.MSubwindow));Games.WarSelectFilmTypeSubwindow=WarSelectFilmTypeSubwindow})(Games||(Games={}));var Games;(function(Games){var WarSelectNoticeSubwindow=(function(_super){__extends(WarSelectNoticeSubwindow,_super);function WarSelectNoticeSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarNotice);return _this}WarSelectNoticeSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarNotice.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarSelectNoticeSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarSelectNoticeSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarSelectNoticeSubwindow}(Games.MSubwindow));Games.WarSelectNoticeSubwindow=WarSelectNoticeSubwindow})(Games||(Games={}));var Games;(function(Games){var WarXKHuifuSubwindow=(function(_super){__extends(WarXKHuifuSubwindow,_super);function WarXKHuifuSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarXKHuifu);return _this}WarXKHuifuSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarXKHuifu.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarXKHuifuSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarXKHuifuSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarXKHuifuSubwindow}(Games.MSubwindow));Games.WarXKHuifuSubwindow=WarXKHuifuSubwindow})(Games||(Games={}));var Games;(function(Games){var WarXukezhengOverSubwindow=(function(_super){__extends(WarXukezhengOverSubwindow,_super);function WarXukezhengOverSubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarXukezhengOver);return _this}WarXukezhengOverSubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarXukezhengOver.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarXukezhengOverSubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarXukezhengOverSubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarXukezhengOverSubwindow}(Games.MSubwindow));Games.WarXukezhengOverSubwindow=WarXukezhengOverSubwindow})(Games||(Games={}));var Games;(function(Games){var WarYRCompatibilitySubwindow=(function(_super){__extends(WarYRCompatibilitySubwindow,_super);function WarYRCompatibilitySubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarYRForFilm);return _this}WarYRCompatibilitySubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarYRForFilm.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarYRCompatibilitySubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarYRCompatibilitySubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarYRCompatibilitySubwindow}(Games.MSubwindow));Games.WarYRCompatibilitySubwindow=WarYRCompatibilitySubwindow})(Games||(Games={}));var Games;(function(Games){var WarYRProficiencySubwindow=(function(_super){__extends(WarYRProficiencySubwindow,_super);function WarYRProficiencySubwindow(subwindowIndex,mainWindow){var _this=_super.call(this,subwindowIndex,mainWindow)||this;_this.addAssetForFguiComponent(fgui.WarMovie.WarYRProficiency);return _this}WarYRProficiencySubwindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarYRProficiency.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarYRProficiencySubwindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarYRProficiencySubwindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return WarYRProficiencySubwindow}(Games.MSubwindow));Games.WarYRProficiencySubwindow=WarYRProficiencySubwindow})(Games||(Games={}));var Games;(function(Games){var ActivityWindow=(function(_super){__extends(ActivityWindow,_super);function ActivityWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Activity.ActivityMain);_this.addAssetForFguiComponent(fgui.Fx.Effect_num1);return _this}ActivityWindow.prototype.onMenuCreate=function(){this.conent=fgui.Activity.ActivityMain.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};ActivityWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};ActivityWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};ActivityWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return ActivityWindow}(Games.MWindow));Games.ActivityWindow=ActivityWindow})(Games||(Games={}));var Games;(function(Games){var ArtistAssistantWindow=(function(_super){__extends(ArtistAssistantWindow,_super);function ArtistAssistantWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.ArtistDetail.AssistantUI);return _this}ArtistAssistantWindow.prototype.onMenuCreate=function(){this.conent=fgui.ArtistDetail.AssistantUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};ArtistAssistantWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};ArtistAssistantWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};ArtistAssistantWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return ArtistAssistantWindow}(Games.MWindow));Games.ArtistAssistantWindow=ArtistAssistantWindow})(Games||(Games={}));var Games;(function(Games){var ArtistDirectoryWindow=(function(_super){__extends(ArtistDirectoryWindow,_super);function ArtistDirectoryWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.ArtistDic.ArtistDicUI);return _this}ArtistDirectoryWindow.prototype.onMenuCreate=function(){this.conent=fgui.ArtistDic.ArtistDicUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};ArtistDirectoryWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};ArtistDirectoryWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};ArtistDirectoryWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return ArtistDirectoryWindow}(Games.MWindow));Games.ArtistDirectoryWindow=ArtistDirectoryWindow})(Games||(Games={}));var Games;(function(Games){var ArtistListSubType;(function(ArtistListSubType){ArtistListSubType[ArtistListSubType.ListPanel=0]="ListPanel";ArtistListSubType[ArtistListSubType.FindPanel=1]="FindPanel"})(ArtistListSubType=Games.ArtistListSubType||(Games.ArtistListSubType={}));var ArtistListWindow=(function(_super){__extends(ArtistListWindow,_super);function ArtistListWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.ArtistUI);return _this}ArtistListWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this);this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(1001));this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(6001))};ArtistListWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.ArtistUI.createInstance();this.contentPane=this.conent;this.registerTab(ArtistListSubType.ListPanel,this.conent.m_listPanel);this.registerTab(ArtistListSubType.FindPanel,this.conent.m_findPanel);_super.prototype.onMenuCreate.call(this)};ArtistListWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);if(parameter.openType==Games.MenuOpenType.None){this.openTab(ArtistListSubType.ListPanel)}};ArtistListWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};ArtistListWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};ArtistListWindow.prototype.onOpenTab=function(tabIndex){this.conent.onOpenTab(tabIndex)};ArtistListWindow.prototype.selectActor=function(lv){return this.conent.selectActor(lv)};return ArtistListWindow}(Games.MWindow));Games.ArtistListWindow=ArtistListWindow})(Games||(Games={}));var Games;(function(Games){var ArtListExerciseWindow=(function(_super){__extends(ArtListExerciseWindow,_super);function ArtListExerciseWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.ArtListExerciseUI);return _this}ArtListExerciseWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};ArtListExerciseWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.ArtListExerciseUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};ArtListExerciseWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.onUpdateView()};ArtListExerciseWindow.prototype.onUpdateView=function(){};ArtListExerciseWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};ArtListExerciseWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return ArtListExerciseWindow}(Games.MWindow));Games.ArtListExerciseWindow=ArtListExerciseWindow})(Games||(Games={}));var Games;(function(Games){var BagWindow=(function(_super){__extends(BagWindow,_super);function BagWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiPackagename(Games.GuiPackageNames.Common);_this.addAssetForFguiComponent(fgui.Bag.BagMainPanel);return _this}BagWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this);this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(1001))};BagWindow.prototype.onMenuCreate=function(){this.conent=fgui.Bag.BagMainPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};BagWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};BagWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return BagWindow}(Games.MWindow));Games.BagWindow=BagWindow})(Games||(Games={}));var Games;(function(Games){var BuildRoomListWindow=(function(_super){__extends(BuildRoomListWindow,_super);function BuildRoomListWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Building.BuildRoomList);return _this}BuildRoomListWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};BuildRoomListWindow.prototype.onMenuCreate=function(){this.conent=fgui.Building.BuildRoomList.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};BuildRoomListWindow.prototype.onShowComplete=function(){var floorIndex=this.menuParameter.args[0];this.conent.init(floorIndex);_super.prototype.onShowComplete.call(this)};BuildRoomListWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};BuildRoomListWindow.prototype.getWaitBuildRoomTouch=function(roomType){var room=this.conent.getRoomAndScrollTop(roomType);if(room){return room.m_touch}return null};return BuildRoomListWindow}(Games.MWindow));Games.BuildRoomListWindow=BuildRoomListWindow})(Games||(Games={}));var Games;(function(Games){var BuildRoomUpgradeWindow=(function(_super){__extends(BuildRoomUpgradeWindow,_super);function BuildRoomUpgradeWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Building.BuildRoomUpgrade);return _this}BuildRoomUpgradeWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};BuildRoomUpgradeWindow.prototype.onMenuCreate=function(){this.conent=fgui.Building.BuildRoomUpgrade.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};BuildRoomUpgradeWindow.prototype.onShowComplete=function(){var roomInfo=this.menuParameter.args[0];this.conent.setInfo(roomInfo);_super.prototype.onShowComplete.call(this)};BuildRoomUpgradeWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};BuildRoomUpgradeWindow.prototype.btnLevelUp=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return this.conent.btnLevelUp(args[0])};return BuildRoomUpgradeWindow}(Games.MWindow));Games.BuildRoomUpgradeWindow=BuildRoomUpgradeWindow})(Games||(Games={}));var Games;(function(Games){var BusinessWindow=(function(_super){__extends(BusinessWindow,_super);function BusinessWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Manage.BusinessUI);return _this}BusinessWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};BusinessWindow.prototype.onMenuCreate=function(){this.conent=fgui.Manage.BusinessUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};return BusinessWindow}(Games.MWindow));Games.BusinessWindow=BusinessWindow})(Games||(Games={}));var Games;(function(Games){var CooperationWindow=(function(_super){__extends(CooperationWindow,_super);function CooperationWindow(){var _this=_super.call(this)||this;_this.serachOther=new Games.CooperationMainPanelSubwindow(Games.CooperationSubwindowType.serachOther,_this);_this.cooperationApplySubwindow=new Games.CooperationApplySubwindow(Games.CooperationSubwindowType.cooperationApply,_this);_this.cooperationRealtionshipSubwindow=new Games.CooperationRealtionshipSubwindow(Games.CooperationSubwindowType.cooperationRealtionship,_this);_this.cooperationEndSubwindow=new Games.CooperationEndSubwindow(Games.CooperationSubwindowType.CooperationEnd,_this);_this.cooperationAchievedSubwindow=new Games.CooperationAchievedSubwindow(Games.CooperationSubwindowType.CooperationAchieved,_this);_this.registerSubwindow(_this.serachOther);_this.registerSubwindow(_this.cooperationApplySubwindow);_this.registerSubwindow(_this.cooperationRealtionshipSubwindow);_this.registerSubwindow(_this.cooperationEndSubwindow);_this.registerSubwindow(_this.cooperationAchievedSubwindow);_this.addAssetForFguiComponent(fgui.Cooperation.CooperationMain);return _this}CooperationWindow.prototype.onMenuCreate=function(){this.conent=fgui.Cooperation.CooperationMain.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};CooperationWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};CooperationWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};CooperationWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return CooperationWindow}(Games.MWindow));Games.CooperationWindow=CooperationWindow})(Games||(Games={}));var Games;(function(Games){var CreateRoleTabType;(function(CreateRoleTabType){CreateRoleTabType[CreateRoleTabType.Default=0]="Default";CreateRoleTabType[CreateRoleTabType.InitialActor=1]="InitialActor"})(CreateRoleTabType=Games.CreateRoleTabType||(Games.CreateRoleTabType={}));var CreateRoleWindow=(function(_super){__extends(CreateRoleWindow,_super);function CreateRoleWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Login.CreatRole);return _this}CreateRoleWindow.prototype.onMenuCreate=function(){this.conent=fgui.Login.CreatRole.createInstance();this.contentPane=this.conent;this.registerTab(CreateRoleTabType.InitialActor,this.conent.m_initialActor);_super.prototype.onMenuCreate.call(this)};CreateRoleWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this);Game.protoOkEvent.add(ProtoEventKey.GameData_InitGameData,this.onInitGameData,this);Game.moduleModel.actor.sAddActorList.add(this.onAddActorHandler,this);Game.protoOkEvent.add(ProtoEventKey.Actor_ActorChangeName,this.onActorChangeName,this)};CreateRoleWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this);Game.protoOkEvent.remove(ProtoEventKey.GameData_InitGameData,this.onInitGameData,this);Game.moduleModel.actor.sAddActorList.remove(this.onAddActorHandler,this)};CreateRoleWindow.prototype.onInitGameData=function(msg,ops,uuid){};CreateRoleWindow.prototype.onAddActorHandler=function(data){Game.menu.open(Games.MenuId.ArtistScoutSuccess,data);Game.menu.close(Games.MenuId.Login);Game.menu.close(Games.MenuId.CreateRole)};CreateRoleWindow.prototype.onActorChangeName=function(msg){Game.protoOkEvent.remove(ProtoEventKey.Actor_ActorChangeName,this.onActorChangeName,this)};return CreateRoleWindow}(Games.MWindow));Games.CreateRoleWindow=CreateRoleWindow})(Games||(Games={}));var Games;(function(Games){var CupGiftWindow=(function(_super){__extends(CupGiftWindow,_super);function CupGiftWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.LevelPackage.CupGiftMain);return _this}CupGiftWindow.prototype.onMenuCreate=function(){this.conent=fgui.LevelPackage.CupGiftMain.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};CupGiftWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};CupGiftWindow.prototype.menuShow=function(root){this.showOn(root)};CupGiftWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};CupGiftWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return CupGiftWindow}(Games.MWindow));Games.CupGiftWindow=CupGiftWindow})(Games||(Games={}));var Games;(function(Games){var GoldExchangeWindow=(function(_super){__extends(GoldExchangeWindow,_super);function GoldExchangeWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.GoldExchange.GoldExchangeView);return _this}GoldExchangeWindow.prototype.onMenuCreate=function(){this.conent=fgui.GoldExchange.GoldExchangeView.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};return GoldExchangeWindow}(Games.MWindow));Games.GoldExchangeWindow=GoldExchangeWindow})(Games||(Games={}));var Games;(function(Games){var GuideCompleteWindow=(function(_super){__extends(GuideCompleteWindow,_super);function GuideCompleteWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.GuideComplete.GuideCompleteUI);return _this}GuideCompleteWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};GuideCompleteWindow.prototype.onMenuCreate=function(){this.conent=fgui.GuideComplete.GuideCompleteUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};GuideCompleteWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};GuideCompleteWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return GuideCompleteWindow}(Games.MWindow));Games.GuideCompleteWindow=GuideCompleteWindow})(Games||(Games={}));var Games;(function(Games){var HomeWindow=(function(_super){__extends(HomeWindow,_super);function HomeWindow(){var _this=_super.call(this)||this;_this.refreshRedTimeOutHandler=0;_this.addAssetForFguiComponent(fgui.MainUI.MainUI);_this.addAssetForFguiComponent(fgui.Building.Main);_this.addAssetForFguiComponent(fgui.PlayerInfo.Main);_this.addAssetForFguiComponent(fgui.PopUp.PopUpMain);return _this}HomeWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this);this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(1501));this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(2001));this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(2201));this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(7101));this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(7301));this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(5001));this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(6001));this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(8001));this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(1001));this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(3001));this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(9999))};HomeWindow.prototype.onMenuCreate=function(){this.conent=fgui.MainUI.MainUI.createInstance();this.contentPane=this.conent;this.setPivot(0.5,0.5);_super.prototype.onMenuCreate.call(this);Game.stageManager.homeSceneSet.init(this.conent.m_builder)};HomeWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};HomeWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this);User.sGameInfoUpdate.add(this.onUpdateGameInfo,this);Game.moduleModel.actor.sUpdateActorInfo.add(this.refreshRed,this);Game.moduleModel.actor.sAddActorList.add(this.refreshRed,this);Game.moduleModel.warData.sUpdateLicence.add(this.refreshRed,this);Game.moduleModel.warData.sUpdateContinue.add(this.refreshContinue,this);Game.protoOkEvent.add(ProtoEventKey.TaskData,this.refreshRed,this);Game.event.add(GameEventKey.GameEventKey_ResetFindStoryTime,this.refreshRed,this);Game.event.add(GameEventKey.GameEventKey_UpdateMainUIRed,this.refreshRed,this);Game.event.add(GameEventKey.GameEventKey_UpdateCoopreationOrderView,this.refreshRed,this);Game.event.add(GameEventKey.GameEventKey_UpdateOrderView,this.refreshRed,this);Game.protoOkEvent.add(ProtoEventKey.ItemData,this.refreshRed,this);Game.protoOkEvent.add(ProtoEventKey.AccountCooperateData,this.refreshRed,this);Game.moduleModel.cooperation.sCallHavePartner.add(this.onUpdateGameInfo,this);this.conent.onCreateExpect();this.conent.onCreateCooperation()};HomeWindow.prototype.onHideComplete=function(){Game.moduleModel.actor.sUpdateActorInfo.remove(this.refreshRed,this);Game.moduleModel.actor.sAddActorList.remove(this.refreshRed,this);Game.moduleModel.warData.sUpdateLicence.remove(this.refreshRed,this);Game.moduleModel.warData.sUpdateContinue.remove(this.refreshContinue,this);Game.protoOkEvent.remove(ProtoEventKey.TaskData,this.refreshRed,this);Game.event.remove(GameEventKey.GameEventKey_ResetFindStoryTime,this.refreshRed,this);Game.event.remove(GameEventKey.GameEventKey_UpdateMainUIRed,this.refreshRed,this);Game.event.remove(GameEventKey.GameEventKey_UpdateCoopreationOrderView,this.refreshRed,this);Game.event.remove(GameEventKey.GameEventKey_UpdateOrderView,this.refreshRed,this);Game.protoOkEvent.remove(ProtoEventKey.ItemData,this.refreshRed,this);Game.protoOkEvent.remove(ProtoEventKey.AccountCooperateData,this.refreshRed,this);User.sGameInfoUpdate.remove(this.onUpdateGameInfo,this);Game.moduleModel.cooperation.sCallHavePartner.remove(this.onUpdateGameInfo,this);_super.prototype.onHideComplete.call(this)};HomeWindow.prototype.onUpdateGameInfo=function(){this.refreshRed();this.conent.onCreateExpect();this.conent.onCreateCooperation()};HomeWindow.prototype.refreshRed=function(){var _this=this;if(this.refreshRedTimeOutHandler>0){clearTimeout(this.refreshRedTimeOutHandler);this.refreshRedTimeOutHandler=0}this.refreshRedTimeOutHandler=setTimeout(function(){_this.conent.refreshRed()},500)};HomeWindow.prototype.refreshContinue=function(){this.conent.onCreateFilmContinue()};Object.defineProperty(HomeWindow.prototype,"filmContinueFirst",{get:function(){for(var i=0;i<this.conent.filmContinueList.length;i++){if(this.conent.filmContinueList[i].visible&&this.conent.filmContinueList[i].incomeData.remainingTime>0){return this.conent.filmContinueList[i]}}return null},enumerable:true,configurable:true});Object.defineProperty(HomeWindow.prototype,"filmContinue",{get:function(){for(var i=0;i<this.conent.filmContinueList.length;i++){if(this.conent.filmContinueList[i].visible){return this.conent.filmContinueList[i]}}return null},enumerable:true,configurable:true});HomeWindow.prototype.getRoomTitleBtn=function(roomType){var room=Game.stageManager.homeSceneSet.getRoomAndScrollTop(roomType,1);if(room){return room.mainView.m_buildSceneUI.m_btn_roomName}return null};HomeWindow.prototype.getCooperationBtn=function(){var arg=[];for(var _i=0;_i<arguments.length;_i++){arg[_i]=arguments[_i]}return this.conent.cooperationBtn(arg[0])};HomeWindow.prototype.goldExchangeBtn=function(){var room=Game.stageManager.homeSceneSet.getRoomAndScrollTop(Games.RoomType.Finance,1);if(room){var financeRoomProcesser=room.processer;if(financeRoomProcesser){return financeRoomProcesser.npcBtn}}return null};HomeWindow.prototype.trainBtn=function(){var room=Game.stageManager.homeSceneSet.getRoomAndScrollTop(Games.RoomType.Training,1);if(room){var trainRoomProcesser=room.processer;if(trainRoomProcesser){return trainRoomProcesser.npcBtn}}return null};HomeWindow.prototype.setHomeShow=function(){if(this.contentPane&&!this.contentPane.visible){this.contentPane.visible=true;this.onShown()}};HomeWindow.prototype.setHomeHide=function(){if(this.contentPane&&this.contentPane.visible){this.contentPane.visible=false;this.onHide()}};HomeWindow.prototype.getBuildSceneActor=function(){var visitData=Game.moduleModel.visit.getVisitData();if(visitData==null){return null}var actorId=visitData.actorId;var actorRoomType=Game.moduleModel.building.getAvatarRoomType(actorId);var cUnit=Games.AvatarManager.context.getAvatarById(actorRoomType,actorId);return cUnit};HomeWindow.prototype.getMainTaskBtn=function(){var arg=[];for(var _i=0;_i<arguments.length;_i++){arg[_i]=arguments[_i]}return this.conent.getMainTaskBtn(arg[0])};return HomeWindow}(Games.MWindow));Games.HomeWindow=HomeWindow})(Games||(Games={}));var Games;(function(Games){var LevelGiftWindow=(function(_super){__extends(LevelGiftWindow,_super);function LevelGiftWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.LevelPackage.LevelPackageMain);return _this}LevelGiftWindow.prototype.onMenuCreate=function(){this.conent=fgui.LevelPackage.LevelPackageMain.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};LevelGiftWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};LevelGiftWindow.prototype.menuShow=function(root){this.showOn(root)};LevelGiftWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};LevelGiftWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return LevelGiftWindow}(Games.MWindow));Games.LevelGiftWindow=LevelGiftWindow})(Games||(Games={}));var Games;(function(Games){var LoginTabType;(function(LoginTabType){LoginTabType[LoginTabType.Login=0]="Login";LoginTabType[LoginTabType.Register=1]="Register";LoginTabType[LoginTabType.LoginGuest=2]="LoginGuest";LoginTabType[LoginTabType.Agreement=3]="Agreement"})(LoginTabType=Games.LoginTabType||(Games.LoginTabType={}));var LoginWindow=(function(_super){__extends(LoginWindow,_super);function LoginWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Login.Main);return _this}LoginWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};LoginWindow.prototype.onMenuCreate=function(){var windowUI=fgui.Login.LoginWindowUI.createInstance();this.conent=windowUI.m_conent;this.contentPane=windowUI;this.registerTab(LoginTabType.Login,this.conent.m_login);this.registerTab(LoginTabType.Register,this.conent.m_register);this.registerTab(LoginTabType.LoginGuest,this.conent.m_login_guest);this.registerTab(LoginTabType.Agreement,this.conent.m_agreement);this.openTab(LoginTabType.Login);_super.prototype.onMenuCreate.call(this)};LoginWindow.prototype.onMenuOpen=function(parameter){if(parameter.openType==Games.MenuOpenType.None){if(Game.localStorage.isGuest){parameter.openType=Games.MenuOpenType.Tab;parameter.openIndex=LoginTabType.LoginGuest}}_super.prototype.onMenuOpen.call(this,parameter)};LoginWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};LoginWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return LoginWindow}(Games.MWindow));Games.LoginWindow=LoginWindow})(Games||(Games={}));var Games;(function(Games){var MailWindow=(function(_super){__extends(MailWindow,_super);function MailWindow(){var _this=_super.call(this)||this;_this.mailContentSubwindow=new Games.MailContentSubwindow("mailContent",_this);_this.registerSubwindow(_this.mailContentSubwindow);_this.addAssetForFguiComponent(fgui.PfSkin.MailMainPanel);return _this}MailWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.MailMainPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};MailWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.onWindowOpen(parameter.args)};MailWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};MailWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return MailWindow}(Games.MWindow));Games.MailWindow=MailWindow})(Games||(Games={}));var Games;(function(Games){var MainTaskWindow=(function(_super){__extends(MainTaskWindow,_super);function MainTaskWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Guide.GuideTaskUI);return _this}MainTaskWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};MainTaskWindow.prototype.onMenuCreate=function(){this.conent=fgui.Guide.GuideTaskUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};MainTaskWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};MainTaskWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return MainTaskWindow}(Games.MWindow));Games.MainTaskWindow=MainTaskWindow})(Games||(Games={}));var Games;(function(Games){var MarketSubEnum;(function(MarketSubEnum){MarketSubEnum[MarketSubEnum.Main=1]="Main";MarketSubEnum[MarketSubEnum.CountryList=2]="CountryList";MarketSubEnum[MarketSubEnum.Publicity=3]="Publicity";MarketSubEnum[MarketSubEnum.RoadShow=4]="RoadShow";MarketSubEnum[MarketSubEnum.SelectActor=5]="SelectActor"})(MarketSubEnum=Games.MarketSubEnum||(Games.MarketSubEnum={}));var MarketTabEnum;(function(MarketTabEnum){MarketTabEnum[MarketTabEnum.CityInfo=0]="CityInfo";MarketTabEnum[MarketTabEnum.Occupy=1]="Occupy"})(MarketTabEnum=Games.MarketTabEnum||(Games.MarketTabEnum={}));var MarketWindow=(function(_super){__extends(MarketWindow,_super);function MarketWindow(){var _this=_super.call(this)||this;_this.countryListSubwindow=new Games.MarketCountryListSubwindow(MarketSubEnum.CountryList,_this);_this.publicitySubwindow=new Games.MarketPublicitySubwindow(MarketSubEnum.Publicity,_this);_this.roadShowSubwindow=new Games.MarketRoadShowSubwindow(MarketSubEnum.RoadShow,_this);_this.selectActorSubwindow=new Games.MarketSelectActorSubwindow(MarketSubEnum.SelectActor,_this);_this.registerSubwindow(_this.countryListSubwindow);_this.registerSubwindow(_this.publicitySubwindow);_this.registerSubwindow(_this.roadShowSubwindow);_this.registerSubwindow(_this.selectActorSubwindow);_this.addAssetForFguiPackagename(Games.GuiPackageNames.Common);_this.addAssetForFguiComponent(fgui.Market.MarketMainPanel);return _this}MarketWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this);this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(1001));this.addDynmicAssetForAvatarAll(Game.config.avatar.getConfig(6101))};MarketWindow.prototype.onMenuCreate=function(){this.conent=fgui.Market.MarketMainPanel.createInstance();this.contentPane=this.conent;this.registerTab(MarketTabEnum.CityInfo,this.conent.m_cityInfoPanel);this.registerTab(MarketTabEnum.Occupy,this.conent.m_occupyPanel);_super.prototype.onMenuCreate.call(this)};MarketWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};MarketWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};MarketWindow.prototype.destory=function(){console.log("destory");this.conent.OnDestory();_super.prototype.destory.call(this)};MarketWindow.prototype.guideStreetBtn=function(){return this.conent.m_occupyPanel.guideGetCityPointBtn()};MarketWindow.prototype.guidFreeActorBtn=function(){var list=this.conent.m_cityInfoPanel.dispatchList;if(list==null){return this.conent.m_cityInfoPanel.m_listActor.getChildAt(0)}for(var index=0;index<list.length;index++){var data=list[index];if(data==0){if(this.conent.m_cityInfoPanel.m_listActor.numItems>=index){return this.conent.m_cityInfoPanel.m_listActor.getChildAt(index)}}}return this.conent.m_cityInfoPanel.m_listActor.getChildAt(0)};Object.defineProperty(MarketWindow.prototype,"guideCurrentCountry",{get:function(){if(this.conent==undefined){return 0}return this.conent.countryId|0},enumerable:true,configurable:true});Object.defineProperty(MarketWindow.prototype,"guideCurrentCity",{get:function(){if(this.conent==undefined){return 0}if(this.conent.CurrentCity==undefined){return 0}return this.conent.CurrentCity.id},enumerable:true,configurable:true});MarketWindow.prototype.guideSelectCity=function(){var arg=[];for(var _i=0;_i<arguments.length;_i++){arg[_i]=arguments[_i]}if(this.conent==undefined){return null}for(var index=0;index<this.conent.cityDatas.length;index++){var data=this.conent.cityDatas[index];if(data.id==arg[0]){if(this.conent.m_list.numItems>=index){this.conent.m_list.scrollToView(index);return this.conent.m_list.getChildAt(this.conent.m_list.itemIndexToChildIndex(index))}else{return null}}}return null};MarketWindow.prototype.guideHomeCityBtn=function(){return this.guideSelectCity(Game.moduleModel.market.Info.headquarters)};return MarketWindow}(Games.MWindow));Games.MarketWindow=MarketWindow})(Games||(Games={}));var Games;(function(Games){var MeetingWindow=(function(_super){__extends(MeetingWindow,_super);function MeetingWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Manage.MeetingUI);return _this}MeetingWindow.prototype.onMenuCreate=function(){this.conent=fgui.Manage.MeetingUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};return MeetingWindow}(Games.MWindow));Games.MeetingWindow=MeetingWindow})(Games||(Games={}));var Games;(function(Games){var MissionWindow=(function(_super){__extends(MissionWindow,_super);function MissionWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Mission.MissionMainPanel);_this.addAssetForFguiComponent(fgui.Common.TipReward);return _this}MissionWindow.prototype.onMenuCreate=function(){this.conent=fgui.Mission.MissionMainPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};return MissionWindow}(Games.MWindow));Games.MissionWindow=MissionWindow})(Games||(Games={}));var Games;(function(Games){var OrderPanelType;(function(OrderPanelType){OrderPanelType[OrderPanelType.NonePanel=0]="NonePanel";OrderPanelType[OrderPanelType.NeedPanel=1]="NeedPanel"})(OrderPanelType=Games.OrderPanelType||(Games.OrderPanelType={}));var OrderWindow=(function(_super){__extends(OrderWindow,_super);function OrderWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Manage.ManagerOrderUI);return _this}OrderWindow.prototype.onMenuCreate=function(){this.conent=fgui.Manage.ManagerOrderUI.createInstance();this.contentPane=this.conent;this.registerTab(OrderPanelType.NonePanel,this.conent.m_noneGroup);this.registerTab(OrderPanelType.NeedPanel,this.conent.m_needPanel);_super.prototype.onMenuCreate.call(this)};OrderWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};OrderWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};OrderWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};OrderWindow.prototype.guideSelectOrder=function(){if(this.conent){return this.conent.guideSelectOrder()}return null};OrderWindow.prototype.guideBoxItem=function(){var arg=[];for(var _i=0;_i<arguments.length;_i++){arg[_i]=arguments[_i]}if(this.conent){return this.conent.guideBoxItem(arg[0])}return null};return OrderWindow}(Games.MWindow));Games.OrderWindow=OrderWindow})(Games||(Games={}));var Games;(function(Games){var OscarSubEnum;(function(OscarSubEnum){OscarSubEnum[OscarSubEnum.None=0]="None";OscarSubEnum[OscarSubEnum.OscarShow=1]="OscarShow";OscarSubEnum[OscarSubEnum.OscarReward=2]="OscarReward"})(OscarSubEnum=Games.OscarSubEnum||(Games.OscarSubEnum={}));var OscarWindow=(function(_super){__extends(OscarWindow,_super);function OscarWindow(){var _this=_super.call(this)||this;_this.oscarShowSubWindow=new Games.OscarShowSubWindow(OscarSubEnum.OscarShow,_this);_this.oscarRewardSubWindow=new Games.OscarRewardSubWindow(OscarSubEnum.OscarReward,_this);_this.registerSubwindow(_this.oscarShowSubWindow);_this.registerSubwindow(_this.oscarRewardSubWindow);_this.addAssetForFguiPackagename(Games.GuiPackageNames.Common);_this.addAssetForFguiComponent(fgui.Oscar.OscarAwardsListPanel);return _this}OscarWindow.prototype.onMenuCreate=function(){this.conent=fgui.Oscar.OscarAwardsListPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};OscarWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.onWindowOpen(parameter.args[0])};OscarWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};OscarWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return OscarWindow}(Games.MWindow));Games.OscarWindow=OscarWindow})(Games||(Games={}));var Games;(function(Games){var PlayerInfoTabType;(function(PlayerInfoTabType){PlayerInfoTabType[PlayerInfoTabType.HOME=1]="HOME";PlayerInfoTabType[PlayerInfoTabType.CAREER=2]="CAREER";PlayerInfoTabType[PlayerInfoTabType.TROPHY=3]="TROPHY";PlayerInfoTabType[PlayerInfoTabType.FILMS=4]="FILMS";PlayerInfoTabType[PlayerInfoTabType.ACTORS=5]="ACTORS"})(PlayerInfoTabType=Games.PlayerInfoTabType||(Games.PlayerInfoTabType={}));var PlayerInfoWindow=(function(_super){__extends(PlayerInfoWindow,_super);function PlayerInfoWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PlayerInfo.Main);return _this}PlayerInfoWindow.prototype.onMenuCreate=function(){this.conent=fgui.PlayerInfo.Main.createInstance();this.contentPane=this.conent;this.conent.visible=false;_super.prototype.onMenuCreate.call(this)};PlayerInfoWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};PlayerInfoWindow.prototype.onShowComplete=function(){Game.protoOkEvent.add(ProtoEventKey.GameInfoExt,this.onGameInfoExt,this);Game.protosender.GameData.GetGameInfoExt();_super.prototype.onShowComplete.call(this)};PlayerInfoWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this);Game.protoOkEvent.remove(ProtoEventKey.GameInfoExt,this.onGameInfoExt,this)};PlayerInfoWindow.prototype.onGameInfoExt=function(proto){Game.protoOkEvent.remove(ProtoEventKey.GameInfoExt,this.onGameInfoExt,this);this.conent.visible=true;this.conent.onWindowShowCall()};return PlayerInfoWindow}(Games.MWindow));Games.PlayerInfoWindow=PlayerInfoWindow})(Games||(Games={}));var Games;(function(Games){var PopUpWindow=(function(_super){__extends(PopUpWindow,_super);function PopUpWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PopUp.PopUpMain);return _this}PopUpWindow.prototype.onMenuCreate=function(){this.conent=fgui.PopUp.PopUpMain.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};PopUpWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};PopUpWindow.prototype.menuShow=function(root){this.showOn(root)};PopUpWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};PopUpWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return PopUpWindow}(Games.MWindow));Games.PopUpWindow=PopUpWindow})(Games||(Games={}));var Games;(function(Games){var ProduceTab;(function(ProduceTab){ProduceTab[ProduceTab.Rank0=0]="Rank0";ProduceTab[ProduceTab.Rank1=1]="Rank1";ProduceTab[ProduceTab.Rank2=2]="Rank2"})(ProduceTab=Games.ProduceTab||(Games.ProduceTab={}));var ProduceWindow=(function(_super){__extends(ProduceWindow,_super);function ProduceWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Produce.Main);return _this}ProduceWindow.prototype.onMenuCreate=function(){this.conent=fgui.Produce.Main.createInstance();this.contentPane=this.conent;this.createTabPanel();_super.prototype.onMenuCreate.call(this)};ProduceWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};ProduceWindow.prototype.createTabPanel=function(){this.registerTab(ProduceTab.Rank0,this.conent.m_produceList);this.registerTab(ProduceTab.Rank1,this.conent.m_produceList);this.registerTab(ProduceTab.Rank2,this.conent.m_produceList)};ProduceWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};ProduceWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return ProduceWindow}(Games.MWindow));Games.ProduceWindow=ProduceWindow})(Games||(Games={}));var Games;(function(Games){var PublicNoticeWindow=(function(_super){__extends(PublicNoticeWindow,_super);function PublicNoticeWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Notice.PublicNoticePanel);return _this}PublicNoticeWindow.prototype.onMenuCreate=function(){this.conent=fgui.Notice.PublicNoticePanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};PublicNoticeWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};PublicNoticeWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};PublicNoticeWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return PublicNoticeWindow}(Games.MWindow));Games.PublicNoticeWindow=PublicNoticeWindow})(Games||(Games={}));var Games;(function(Games){var RankWindow=(function(_super){__extends(RankWindow,_super);function RankWindow(){var _this=_super.call(this)||this;_this.rankRewardSubwindow=new Games.RankRewardSubwindow("rankReward",_this);_this.registerSubwindow(_this.rankRewardSubwindow);_this.addAssetForFguiComponent(fgui.Rank.RankMainPanel);return _this}RankWindow.prototype.onMenuCreate=function(){this.conent=fgui.Rank.RankMainPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};RankWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.onWindowOpen()};RankWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};RankWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return RankWindow}(Games.MWindow));Games.RankWindow=RankWindow})(Games||(Games={}));var Games;(function(Games){var RechargeWindow=(function(_super){__extends(RechargeWindow,_super);function RechargeWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.RechargeMainPanel);return _this}RechargeWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.RechargeMainPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};RechargeWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.onWindowOpen(parameter.args)};RechargeWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};RechargeWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return RechargeWindow}(Games.MWindow));Games.RechargeWindow=RechargeWindow})(Games||(Games={}));var Games;(function(Games){var ShopWindow=(function(_super){__extends(ShopWindow,_super);function ShopWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.ShopMainPanel);return _this}ShopWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.ShopMainPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};ShopWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.onWindowOpen(parameter.args)};ShopWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};ShopWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return ShopWindow}(Games.MWindow));Games.ShopWindow=ShopWindow})(Games||(Games={}));var Games;(function(Games){var StoryInfoWindow=(function(_super){__extends(StoryInfoWindow,_super);function StoryInfoWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.StoryInfoUI);return _this}StoryInfoWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};StoryInfoWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.StoryInfoUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};StoryInfoWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};StoryInfoWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};StoryInfoWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return StoryInfoWindow}(Games.MWindow));Games.StoryInfoWindow=StoryInfoWindow})(Games||(Games={}));var Games;(function(Games){var StoryLibraryWindow=(function(_super){__extends(StoryLibraryWindow,_super);function StoryLibraryWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.PfSkin.StoryLibraryUI);return _this}StoryLibraryWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};StoryLibraryWindow.prototype.onMenuCreate=function(){this.conent=fgui.PfSkin.StoryLibraryUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};StoryLibraryWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};StoryLibraryWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};StoryLibraryWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return StoryLibraryWindow}(Games.MWindow));Games.StoryLibraryWindow=StoryLibraryWindow})(Games||(Games={}));var Games;(function(Games){var StreetWindowSubEnum;(function(StreetWindowSubEnum){StreetWindowSubEnum[StreetWindowSubEnum.StreetInfoPanel=0]="StreetInfoPanel";StreetWindowSubEnum[StreetWindowSubEnum.StreetLvUpInfoPanel=1]="StreetLvUpInfoPanel";StreetWindowSubEnum[StreetWindowSubEnum.StreetCinemaSelectedPanel=2]="StreetCinemaSelectedPanel";StreetWindowSubEnum[StreetWindowSubEnum.StreetSelectCinemaPanel=3]="StreetSelectCinemaPanel"})(StreetWindowSubEnum=Games.StreetWindowSubEnum||(Games.StreetWindowSubEnum={}));var StreetWindow=(function(_super){__extends(StreetWindow,_super);function StreetWindow(){var _this=_super.call(this)||this;_this.cinemaSelectedSubwindow=new Games.StreetCinemaSelectedSubwindow(StreetWindowSubEnum.StreetCinemaSelectedPanel,_this);_this.infoSubwindow=new Games.StreetInfoSubwindow(StreetWindowSubEnum.StreetInfoPanel,_this);_this.lvUpInfoSubwindow=new Games.StreetLvUpInfoSubwindow(StreetWindowSubEnum.StreetLvUpInfoPanel,_this);_this.selectCinemaSubwindow=new Games.StreetSelectCinemaSubwindow(StreetWindowSubEnum.StreetSelectCinemaPanel,_this);_this.registerSubwindow(_this.cinemaSelectedSubwindow);_this.registerSubwindow(_this.infoSubwindow);_this.registerSubwindow(_this.lvUpInfoSubwindow);_this.registerSubwindow(_this.selectCinemaSubwindow);_this.addAssetForFguiPackagename(Games.GuiPackageNames.Common);_this.addAssetForFguiComponent(fgui.Street.StreetMainPanel);return _this}StreetWindow.prototype.onMenuCreate=function(){this.conent=fgui.Street.StreetMainPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};StreetWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter);this.conent.onWindowOpen()};StreetWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};StreetWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};StreetWindow.prototype.listTab=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return this.conent.m_rankPanel.m_listTab.getChildAt(args[0])};Object.defineProperty(StreetWindow.prototype,"CurrentSignCinemaBtn",{get:function(){var streetList=Game.moduleModel.street.StreetList;for(var index=0;index<streetList.length;index++){var street=streetList[index];if(street.canSign){var realIndex=this.conent.m_streetPanel.m_list.itemIndexToChildIndex(index);if(realIndex<0){return null}var item=this.conent.m_streetPanel.m_list.getChildAt(realIndex);if(item!=null){return item.m_cinemaView.m_btnSign}}}return null},enumerable:true,configurable:true});return StreetWindow}(Games.MWindow));Games.StreetWindow=StreetWindow})(Games||(Games={}));var Games;(function(Games){var SysSettingWindow=(function(_super){__extends(SysSettingWindow,_super);function SysSettingWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.SystemSettings.SettingsPanel);return _this}SysSettingWindow.prototype.onMenuCreate=function(){this.conent=fgui.SystemSettings.SettingsPanel.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};SysSettingWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};SysSettingWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};SysSettingWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return SysSettingWindow}(Games.MWindow));Games.SysSettingWindow=SysSettingWindow})(Games||(Games={}));var Games;(function(Games){var TempleteWindow=(function(_super){__extends(TempleteWindow,_super);function TempleteWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Login.Main);return _this}TempleteWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};TempleteWindow.prototype.onMenuCreate=function(){this.conent=fgui.Login.Main.createInstance();this.contentPane=this.conent;this.center();this.setPivot(0.5,0.5);this.registerTab(Games.LoginTabType.Login,this.conent.m_login);this.registerTab(Games.LoginTabType.Register,this.conent.m_register);this.registerTab(Games.LoginTabType.LoginGuest,this.conent.m_login_guest);this.registerTab(Games.LoginTabType.Agreement,this.conent.m_agreement);_super.prototype.onMenuCreate.call(this);this.openTab(Games.LoginTabType.Login)};TempleteWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};TempleteWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return TempleteWindow}(Games.MWindow));Games.TempleteWindow=TempleteWindow})(Games||(Games={}));var Games;(function(Games){var VisitWindow=(function(_super){__extends(VisitWindow,_super);function VisitWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.Manage.VisitUI);return _this}VisitWindow.prototype.generateAssetsForDynmic=function(){_super.prototype.generateAssetsForDynmic.call(this)};VisitWindow.prototype.onMenuCreate=function(){this.conent=fgui.Manage.VisitUI.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};VisitWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};VisitWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return VisitWindow}(Games.MWindow));Games.VisitWindow=VisitWindow})(Games||(Games={}));var Games;(function(Games){var WarContinueWindow=(function(_super){__extends(WarContinueWindow,_super);function WarContinueWindow(){var _this=_super.call(this)||this;_this.addAssetForFguiComponent(fgui.WarContinue.WarContinuousIncome);_this.addAssetForFguiComponent(fgui.WarMovie.WarMain);return _this}WarContinueWindow.prototype.onMenuCreate=function(){this.conent=fgui.WarContinue.WarContinuousIncome.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarContinueWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};WarContinueWindow.prototype.menuShow=function(root){this.showOn(root)};WarContinueWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarContinueWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};Object.defineProperty(WarContinueWindow.prototype,"filmContinueFirstRewardBtn",{get:function(){return this.conent.m_okBtn},enumerable:true,configurable:true});Object.defineProperty(WarContinueWindow.prototype,"filmContinueFirstpromotionBtn",{get:function(){if(this.conent&&this.conent.m_promotionBtn){return this.conent.m_promotionBtn}return null},enumerable:true,configurable:true});Object.defineProperty(WarContinueWindow.prototype,"cityBtn",{get:function(){for(var i=0;i<this.conent.cityList.length;i++){if(this.conent.curCity===null||this.conent.cityList[i].id!==this.conent.curCity.id){if(this.conent.cityList[i].state===Games.CityStateEnum.hasOccupy){this.conent.m_cityList.scrollToView(i);return this.conent.m_cityList.getChildAt(this.conent.m_cityList.itemIndexToChildIndex(i))}}}return null},enumerable:true,configurable:true});Object.defineProperty(WarContinueWindow.prototype,"citySwitch",{get:function(){if(this.conent.m_ChangeCity.selectedIndex===1){if(this.conent.m_okBtn2.visible){return this.conent.m_okBtn2}}return null},enumerable:true,configurable:true});return WarContinueWindow}(Games.MWindow));Games.WarContinueWindow=WarContinueWindow})(Games||(Games={}));var Games;(function(Games){var WarWindow=(function(_super){__extends(WarWindow,_super);function WarWindow(){var _this=_super.call(this)||this;_this.warFilmSelectingSubwindow=new Games.WarFilmSelectingSubwindow(Games.WarSubwindowType.FilmSelect,_this);_this.filmInfoSubwindow=new Games.FilmInfoSubwindow(Games.WarSubwindowType.FilmInfo,_this);_this.currentMarketInfoSubwindow=new Games.CurrentMarketInfoSubwindow(Games.WarSubwindowType.CurrentMarketInf,_this);_this.selectyirenSubwindow=new Games.SelectyirenSubwindow(Games.WarSubwindowType.SelectYiren,_this);_this.costViewSubwindow=new Games.WarCostViewSubwindow(Games.WarSubwindowType.CostView,_this);_this.warFilmYRShowSubwindow=new Games.WarFilmYRShowSubwindow(Games.WarSubwindowType.YRShowView,_this);_this.warYRCompatibilitySubwindow=new Games.WarYRCompatibilitySubwindow(Games.WarSubwindowType.Compatibility,_this);_this.warSelectFilmTypeSubwindow=new Games.WarSelectFilmTypeSubwindow(Games.WarSubwindowType.SelectFilmType,_this);_this.warFilmingSubwindow=new Games.WarFilmingSubwindow(Games.WarSubwindowType.Filming,_this);_this.warSelectNoticeSubwindow=new Games.WarSelectNoticeSubwindow(Games.WarSubwindowType.SelectNotice,_this);_this.warFilmSQSubwindow=new Games.WarFilmSQSubwindow(Games.WarSubwindowType.FilmSQ,_this);_this.warYRProficiencySubwindow=new Games.WarYRProficiencySubwindow(Games.WarSubwindowType.proficiency,_this);_this.warFilmSQViewSubwindow=new Games.WarFilmSQViewSubwindow(Games.WarSubwindowType.FilmSQView,_this);_this.warCinemaSelectionSubwindow=new Games.WarCinemaSelectionSubwindow(Games.WarSubwindowType.CinemaSelection,_this);_this.warNoticeFeedBackSubwindow=new Games.WarNoticeFeedBackSubwindow(Games.WarSubwindowType.NoticeFeedBack,_this);_this.warFilmSYPFSubwindow=new Games.WarFilmSYPFSubwindow(Games.WarSubwindowType.SYPF,_this);_this.warAudienceReputationSubwindow=new Games.WarAudienceReputationSubwindow(Games.WarSubwindowType.AudienceReputation,_this);_this.warFilmShangYingSubwindow=new Games.WarFilmShangYingSubwindow(Games.WarSubwindowType.Shangying,_this);_this.warFilmOverMarketInfoSubwindow=new Games.WarFilmOverMarketInfoSubwindow(Games.WarSubwindowType.overMarket,_this);_this.warFilmJiesuanSubwindow=new Games.WarFilmJiesuanSubwindow(Games.WarSubwindowType.Jiesuan,_this);_this.warPaishequerenSubwindow=new Games.WarPaishequerenSubwindow(Games.WarSubwindowType.ShootingConfirmation,_this);_this.warEndingIncomeSubwindow=new Games.WarEndingIncomeSubwindow(Games.WarSubwindowType.EndIncome,_this);_this.warXukezhengOverSubwindow=new Games.WarXukezhengOverSubwindow(Games.WarSubwindowType.XukeOver,_this);_this.warXKHuifuSubwindow=new Games.WarXKHuifuSubwindow(Games.WarSubwindowType.XukeHuifu,_this);_this.registerSubwindow(_this.warFilmSelectingSubwindow);_this.registerSubwindow(_this.filmInfoSubwindow);_this.registerSubwindow(_this.currentMarketInfoSubwindow);_this.registerSubwindow(_this.selectyirenSubwindow);_this.registerSubwindow(_this.costViewSubwindow);_this.registerSubwindow(_this.warFilmYRShowSubwindow);_this.registerSubwindow(_this.warYRCompatibilitySubwindow);_this.registerSubwindow(_this.warSelectFilmTypeSubwindow);_this.registerSubwindow(_this.warFilmingSubwindow);_this.registerSubwindow(_this.warSelectNoticeSubwindow);_this.registerSubwindow(_this.warFilmSQSubwindow);_this.registerSubwindow(_this.warYRProficiencySubwindow);_this.registerSubwindow(_this.warFilmSQViewSubwindow);_this.registerSubwindow(_this.warCinemaSelectionSubwindow);_this.registerSubwindow(_this.warNoticeFeedBackSubwindow);_this.registerSubwindow(_this.warFilmSYPFSubwindow);_this.registerSubwindow(_this.warAudienceReputationSubwindow);_this.registerSubwindow(_this.warFilmShangYingSubwindow);_this.registerSubwindow(_this.warFilmOverMarketInfoSubwindow);_this.registerSubwindow(_this.warFilmJiesuanSubwindow);_this.registerSubwindow(_this.warPaishequerenSubwindow);_this.registerSubwindow(_this.warEndingIncomeSubwindow);_this.registerSubwindow(_this.warXukezhengOverSubwindow);_this.registerSubwindow(_this.warXKHuifuSubwindow);_this.addAssetForFguiComponent(fgui.WarMovie.WarMain);return _this}WarWindow.prototype.onMenuCreate=function(){this.conent=fgui.WarMovie.WarMain.createInstance();this.contentPane=this.conent;_super.prototype.onMenuCreate.call(this)};WarWindow.prototype.onMenuOpen=function(parameter){_super.prototype.onMenuOpen.call(this,parameter)};WarWindow.prototype.menuShow=function(root){this.showOn(root)};WarWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};WarWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};Object.defineProperty(WarWindow.prototype,"selectSecondFilm",{get:function(){if(this.conent&&this.warFilmSelectingSubwindow.conent.m_filmItemList.numItems>2){var item=this.warFilmSelectingSubwindow.conent.m_filmItemList.getChildAt(1);if(item.m_selectBtn.visible){return item.m_selectBtn}}return null},enumerable:true,configurable:true});Object.defineProperty(WarWindow.prototype,"selectThirdFilm",{get:function(){if(this.conent&&this.warFilmSelectingSubwindow.conent.m_filmItemList.numItems>2){var item=this.warFilmSelectingSubwindow.conent.m_filmItemList.getChildAt(2);if(item.m_selectBtn.visible){return item.m_selectBtn}}return null},enumerable:true,configurable:true});Object.defineProperty(WarWindow.prototype,"selectActorOkBtn",{get:function(){if(this.conent&&this.selectyirenSubwindow.conent.m_okBtnContorl.selectedIndex===1){return this.selectyirenSubwindow.conent.m_okBtn}return null},enumerable:true,configurable:true});return WarWindow}(Games.MWindow));Games.WarWindow=WarWindow})(Games||(Games={}));var Games;(function(Games){var GMWindow=(function(_super){__extends(GMWindow,_super);function GMWindow(){var _this=_super.call(this)||this;_this.isloaded=false;_this.menuParameter={openType:Games.MenuOpenType.Tab,openIndex:0,args:[]};return _this}GMWindow.prototype.load=function(){fgui.GM.GMBinder.bindAll();Laya.loader.load([{url:"res/fgui/GM.bin",type:Laya.Loader.BUFFER}],Laya.Handler.create(this,this.onLoaded))};GMWindow.prototype.onLoaded=function(){Games.GuiSetting.addPackage("res/fgui/GM");this.isloaded=true;this.showOn(Games.MenuLayer.gm)};GMWindow.prototype.show=function(){if(this.isloaded){this.showOn(Games.MenuLayer.gm)}else{this.load()}};GMWindow.prototype.onMenuCreate=function(){this.conent=fgui.GM.GMMain.createInstance();this.contentPane=this.conent;this.registerTab(Games.GMMenuType.ADD,this.conent.m_addPage);this.registerTab(Games.GMMenuType.CMD,this.conent.m_cmdPage);this.registerTab(Games.GMMenuType.SELECTSERVER,this.conent.m_selectServerPage);this.registerTab(Games.GMMenuType.LOG,this.conent.m_debugPage);this.registerTab(Games.GMMenuType.DisplayTree,this.conent.m_displayTreePage);this.registerTab(Games.GMMenuType.TimeLoop,this.conent.m_timeLoopPage);this.registerTab(Games.GMMenuType.Tick,this.conent.m_tickPage);this.openTab(Games.GMMenuType.ADD);_super.prototype.onMenuCreate.call(this)};GMWindow.prototype.menuClose=function(){this.onMenuClose()};GMWindow.prototype.onOpenTab=function(tabIndex){this.conent.m_mainMenu.setSelect(tabIndex)};GMWindow.prototype.onShowComplete=function(){_super.prototype.onShowComplete.call(this)};GMWindow.prototype.onHideComplete=function(){_super.prototype.onHideComplete.call(this)};return GMWindow}(Games.MWindow));Games.GMWindow=GMWindow})(Games||(Games={}));var Games;(function(Games){var ProtoHandler=(function(_super){__extends(ProtoHandler,_super);function ProtoHandler(){return _super!==null&&_super.apply(this,arguments)||this}return ProtoHandler}(Games.ProtoBaseController));Games.ProtoHandler=ProtoHandler})(Games||(Games={}));var Games;(function(Games){var accountHandler=(function(_super){__extends(accountHandler,_super);function accountHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.account;return _this}accountHandler.prototype.auth=function(msg){User.account.account=msg.account;Game.protosender.account.Login(msg.account,msg.token)};accountHandler.prototype.login=function(msg){User.isLogined=true;User.account.userId=msg.userId;Game.proto.httpChannel.userId=msg.userId;Game.proto.httpChannel.jwt=msg.jwt;if(Game.protosender.account.isRister){Game.protosender.GameData.Auth(Game.localStorage.password)}else{if(Game.protosender.account.isGuestBind){Game.protosender.GameData.VisitorAuth(Game.localStorage.username,Game.localStorage.password)}else{Game.protosender.GameData.GetLoginGameData(Game.localStorage.password,"1")}}};accountHandler.prototype.refreshToken=function(msg){console.log("refreshTokenResponse");Game.proto.httpChannel.jwt=msg.jwt;Game.proto.isEnableSendProto=true;Games.Static.Instance.onloadstart(true);Games.Static.Instance.onLoadStep("load_start");Games.Static.Instance.onLoadStep("load_end");if(Game.proto.isNeedReGetLoginGameData){Game.protosender.GameData.ReGetLoginGameData()}};return accountHandler}(Games.ProtoHandler));Games.accountHandler=accountHandler})(Games||(Games={}));var Games;(function(Games){var ProtoSender=(function(_super){__extends(ProtoSender,_super);function ProtoSender(){return _super!==null&&_super.apply(this,arguments)||this}return ProtoSender}(Games.ProtoBaseController));Games.ProtoSender=ProtoSender})(Games||(Games={}));var Games;(function(Games){var accountSender=(function(_super){__extends(accountSender,_super);function accountSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.account;_this.isRister=false;_this.isGuestBind=false;return _this}accountSender.prototype.generateGuestAccount=function(){var guset="#"+BrowserDetect.deviceId;return guset};accountSender.prototype.getGuestAccount=function(){if(!isNullOrEmpty(Game.localStorage.guestusername)){return Game.localStorage.guestusername}return this.generateGuestAccount()};accountSender.prototype.GuestAuth=function(){var account=this.getGuestAccount();Game.localStorage.guestusername=account;Game.localStorage.isGuest=true;Game.localStorage.isGameGuest=true;this.isGuestBind=false;var reqData=new Proto.API.account.authRequest();reqData.account=account;reqData.__delayTime=0;reqData.__showTime=30000;this.sendByCommand(reqData,"account/auth")};accountSender.prototype.Auth=function(account,password,isRister){if(isRister===void 0){isRister=false}this.isRister=isRister;if(isNullOrEmpty(account)||(account.length<6||account.length>12)){Game.system.toastMsg(MsgKey.account_load_long1,6,12);return}if(isNullOrEmpty(password)||(password.length<6||password.length>12)){Game.system.toastMsg(MsgKey.account_load_long2,6,12);return}if(password&&password.indexOf(" ")!=-1){Game.system.toastMsg(MsgKey.Error_Password_HasSpace);return}var patt=/[^a-zA-Z0-9\.@_\u4e00-\u9fa5]/;if(patt.test(account)){Game.system.toastMsg(MsgKey.account_name_blockword);return}this.isGuestBind=false;Game.localStorage.username=account;Game.localStorage.password=password;Game.localStorage.addUseraccount(Game.localStorage.username,Game.localStorage.password);Game.localStorage.isGuest=false;var reqData=new Proto.API.account.authRequest();reqData.account=account;reqData.__delayTime=0;reqData.__showTime=30000;this.sendByCommand(reqData,"account/auth")};accountSender.prototype.GuestBind=function(account,password){if(isNullOrEmpty(account)||(account.length<6||account.length>12)){Game.system.toastMsg(MsgKey.account_load_long1,6,12);return}if(isNullOrEmpty(password)||(password.length<6||password.length>12)){Game.system.toastMsg(MsgKey.account_load_long2,6,12);return}var patt=/[^a-zA-Z0-9\.@_\u4e00-\u9fa5]/;if(patt.test(account)){Game.system.toastMsg(MsgKey.account_name_blockword);return}Game.localStorage.username=account;Game.localStorage.password=password;Game.localStorage.addUseraccount(Game.localStorage.username,Game.localStorage.password);this.GuestAuth();this.isGuestBind=true;Game.localStorage.isGuest=false};accountSender.prototype.Login=function(account,token){var reqData=new Proto.API.account.loginRequest();reqData.account=account;reqData.token=token;reqData.__delayTime=0;reqData.__showTime=30000;this.sendByCommand(reqData,"account/login")};accountSender.prototype.auth=function(account){var req=new Proto.API.account.authRequest();req.account=account;req.__delayTime=0;req.__showTime=30000;this.send(req)};accountSender.prototype.refreshToken=function(){Game.proto.httpChannel.recreateHttpRequest();Game.proto.isEnableSendProto=false;var req=new Proto.API.account.refreshTokenRequest();req.__delayTime=0;req.__showTime=30000;req.jwt=Game.proto.httpChannel.jwt;this.sendByCommand(req,"account/refreshToken")};return accountSender}(Games.ProtoSender));Games.accountSender=accountSender})(Games||(Games={}));var Games;(function(Games){var ActorHandler=(function(_super){__extends(ActorHandler,_super);function ActorHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.Actor;return _this}ActorHandler.prototype.RecruitActor=function(msg){if(msg.result==0){var data=Game.moduleModel.actor.getActor(msg.actorId);if(data){Game.menu.open(Games.MenuId.ArtistScoutSuccess,data,msg.isNewActor==false);Games.Static.Instance.onUserorbit("star","starGet&"+data.star+"&"+data.id,"get");Games.Static.Instance.onUpgrdae("starUnlock",data.id.toString(),"","unlock","")}}Game.moduleModel.actor.isRecruiting=false};ActorHandler.prototype.hideActor=function(msg){};ActorHandler.prototype.AddActorSlot=function(msg){};ActorHandler.prototype.upgradeActor=function(msg){Game.moduleModel.task.clientUpdateMainTaskProgress(Games.MainTaskRequireType.RequireType_3_UpgradeActor)};ActorHandler.prototype.giveActorAssets=function(msg){};ActorHandler.prototype.upgradeActorSkill=function(msg){};ActorHandler.prototype.ActorTrain=function(msg){if(msg.result==0){Game.menu.open(Games.MenuId.ArtistTrainResult,msg.uuid,msg.attrChangeList,msg.trainType)}};ActorHandler.prototype.NoseInfoActor=function(msg){Games.Static.Instance.onUserorbit("star","starFind","find")};ActorHandler.prototype.HideActor=function(msg){};ActorHandler.prototype.UpgradeActor=function(msg){};ActorHandler.prototype.GiveActorAssets=function(msg){};ActorHandler.prototype.UpgradeActorSkill=function(msg){};ActorHandler.prototype.ActorChangeName=function(msg){};ActorHandler.prototype.ActorExerciseStart=function(msg){};ActorHandler.prototype.ActorExerciseReward=function(msg){};ActorHandler.prototype.ActorExerciseAdd=function(msg){};ActorHandler.prototype.GiveLoyaltyCard=function(msg){};ActorHandler.prototype.AssistantUpLv=function(msg){var data=Game.moduleModel.actor.getActorByUUid(msg.uuid);if(data&&data.assitantList[msg.id-1].level==1){var lesson=data.assitantList[msg.id-1];if(lesson&&lesson.config){Game.system.openUnlockLessonFunc(lesson.iconUrl,lesson.config.name)}}};return ActorHandler}(Games.ProtoHandler));Games.ActorHandler=ActorHandler})(Games||(Games={}));var Games;(function(Games){var ActorSender=(function(_super){__extends(ActorSender,_super);function ActorSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.Actor;return _this}ActorSender.prototype.noseInfoActor=function(isUseCard){if(isUseCard){var cost=GlobalConfig.getValue1(GlobalKey.KEY_1008_JiangZhiTanCha__PinHeShuLiang);var dtCost=new DTItemNum();if(cost.length===2){dtCost.itemId=cost[0];dtCost.itemNum=cost[1]}Games.Static.Instance.onResourceinput([dtCost],"star&clearCD",-1,-1)}var req=new Proto.API.Actor.NoseInfoActorRequest();req.isUseCard=isUseCard;this.send(req)};ActorSender.prototype.recruitActor=function(actorId){var req=new Proto.API.Actor.RecruitActorRequest();req.actorId=actorId;this.send(req)};ActorSender.prototype.hideActor=function(uuid,isHide){var req=new Proto.API.Actor.HideActorRequest();req.uuid=uuid;req.isHide=isHide;this.send(req)};ActorSender.prototype.addActorSlot=function(){var req=new Proto.API.Actor.AddActorSlotRequest();this.send(req)};ActorSender.prototype.upgradeActor=function(uuid){var req=new Proto.API.Actor.UpgradeActorRequest();req.uuid=uuid;this.send(req)};ActorSender.prototype.giveActorAssets=function(uuid,giveType,giveLevel,giveNum){var req=new Proto.API.Actor.GiveActorAssetsRequest();req.uuid=uuid;req.giveLevel=giveLevel;req.giveNum=giveNum;req.giveType=giveType;this.send(req)};ActorSender.prototype.upgradeActorSkill=function(uuid,skillId){var req=new Proto.API.Actor.UpgradeActorSkillRequest();req.uuid=uuid;req.skillId=skillId;this.send(req)};ActorSender.prototype.actorChangeName=function(uuid,name){var req=new Proto.API.Actor.ActorChangeNameRequest();req.uuid=uuid;req.name=name;this.send(req)};ActorSender.prototype.actorTrain=function(uuid,trainType,useDiamond){var req=new Proto.API.Actor.ActorTrainRequest();req.uuid=uuid;req.trainType=trainType;req.useDiamond=useDiamond;this.send(req)};ActorSender.prototype.NoseInfoActor=function(isUseCard){var req=new Proto.API.Actor.NoseInfoActorRequest();req.isUseCard=isUseCard;this.send(req)};ActorSender.prototype.RecruitActor=function(actorId){var req=new Proto.API.Actor.RecruitActorRequest();req.actorId=actorId;this.send(req)};ActorSender.prototype.HideActor=function(uuid,isHide){var req=new Proto.API.Actor.HideActorRequest();req.uuid=uuid;req.isHide=isHide;this.send(req)};ActorSender.prototype.AddActorSlot=function(){var req=new Proto.API.Actor.AddActorSlotRequest();this.send(req)};ActorSender.prototype.UpgradeActor=function(uuid){var req=new Proto.API.Actor.UpgradeActorRequest();req.uuid=uuid;this.send(req)};ActorSender.prototype.GiveActorAssets=function(uuid,giveType,giveLevel,giveNum){var req=new Proto.API.Actor.GiveActorAssetsRequest();req.uuid=uuid;req.giveType=giveType;req.giveLevel=giveLevel;req.giveNum=giveNum;this.send(req)};ActorSender.prototype.UpgradeActorSkill=function(uuid,skillId){var req=new Proto.API.Actor.UpgradeActorSkillRequest();req.uuid=uuid;req.skillId=skillId;this.send(req)};ActorSender.prototype.ActorTrain=function(uuid,trainType,useDiamond){var req=new Proto.API.Actor.ActorTrainRequest();req.uuid=uuid;req.trainType=trainType;req.useDiamond=useDiamond;this.send(req)};ActorSender.prototype.ActorChangeName=function(uuid,name){var req=new Proto.API.Actor.ActorChangeNameRequest();req.uuid=uuid;req.name=name;this.send(req)};ActorSender.prototype.ActorExerciseStart=function(aId,eId){var req=new Proto.API.Actor.ActorExerciseStartRequest();req.aId=aId;req.eId=eId;this.send(req)};ActorSender.prototype.ActorExerciseReward=function(eId,useMoney){var req=new Proto.API.Actor.ActorExerciseRewardRequest();req.eId=eId;req.useMoney=useMoney;this.send(req)};ActorSender.prototype.ActorExerciseAdd=function(){var req=new Proto.API.Actor.ActorExerciseAddRequest();this.send(req)};ActorSender.prototype.GiveLoyaltyCard=function(uuid,giveType,num){var req=new Proto.API.Actor.GiveLoyaltyCardRequest();req.uuid=uuid;req.giveType=giveType;req.num=num;this.send(req)};ActorSender.prototype.AssistantUpLv=function(uuid,id){var req=new Proto.API.Actor.AssistantUpLvRequest();req.uuid=uuid;req.id=id;this.send(req)};return ActorSender}(Games.ProtoSender));Games.ActorSender=ActorSender})(Games||(Games={}));var Games;(function(Games){var BeginnerGuideHandler=(function(_super){__extends(BeginnerGuideHandler,_super);function BeginnerGuideHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.BeginnerGuide;return _this}BeginnerGuideHandler.prototype.CompleteGuide=function(msg){};BeginnerGuideHandler.prototype.GuideEndReward=function(msg){var data=Game.moduleModel.actor.getActor(Game.moduleModel.task.guideCompleteRewardID);if(data){Game.menu.open(Games.MenuId.ArtistScoutSuccess,data,false)}Game.event.dispatch(GameEventKey.GameEventKey_UnlockChange,Games.UnlockID.GuideComplete)};return BeginnerGuideHandler}(Games.ProtoHandler));Games.BeginnerGuideHandler=BeginnerGuideHandler})(Games||(Games={}));var Games;(function(Games){var BeginnerGuideSender=(function(_super){__extends(BeginnerGuideSender,_super);function BeginnerGuideSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.BeginnerGuide;return _this}BeginnerGuideSender.prototype.CompleteGuide=function(gId,type){var req=new Proto.API.BeginnerGuide.CompleteGuideRequest();req.gId=gId;req.type=type;this.send(req,false,false)};BeginnerGuideSender.prototype.GuideEndReward=function(){var req=new Proto.API.BeginnerGuide.GuideEndRewardRequest();this.send(req)};return BeginnerGuideSender}(Games.ProtoSender));Games.BeginnerGuideSender=BeginnerGuideSender})(Games||(Games={}));var Games;(function(Games){var chatHandler=(function(_super){__extends(chatHandler,_super);function chatHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.chat;return _this}chatHandler.prototype.MessageNotice=function(msg){};chatHandler.prototype.NewMessage=function(msg){};chatHandler.prototype.AllMessage=function(msg){};chatHandler.prototype.SendMessage=function(msg){};chatHandler.prototype.PullMessage=function(msg){};chatHandler.prototype.Sheielding=function(msg){};chatHandler.prototype.ReleaseShield=function(msg){};chatHandler.prototype.recruit=function(msg){};return chatHandler}(Games.ProtoHandler));Games.chatHandler=chatHandler})(Games||(Games={}));var Games;(function(Games){var chatSender=(function(_super){__extends(chatSender,_super);function chatSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.chat;return _this}chatSender.prototype.MessageNotice=function(channel){var req=new Proto.API.chat.MessageNoticeRequest();req.channel=channel;this.send(req)};chatSender.prototype.NewMessage=function(){var req=new Proto.API.chat.NewMessageRequest();this.send(req)};chatSender.prototype.AllMessage=function(){var req=new Proto.API.chat.AllMessageRequest();this.send(req)};chatSender.prototype.SendMessage=function(message,recipient,roomId,channel){var req=new Proto.API.chat.SendMessageRequest();req.message=message;req.recipient=recipient;req.roomId=roomId;req.channel=channel;this.send(req)};chatSender.prototype.PullMessage=function(channel,roomId,messageId){var req=new Proto.API.chat.PullMessageRequest();req.channel=channel;req.roomId=roomId;req.messageId=messageId;this.send(req)};chatSender.prototype.Sheielding=function(userId){var req=new Proto.API.chat.SheieldingRequest();req.userId=userId;this.send(req)};chatSender.prototype.ReleaseShield=function(userId){var req=new Proto.API.chat.ReleaseShieldRequest();req.userId=userId;this.send(req)};chatSender.prototype.recruit=function(){var req=new Proto.API.chat.recruitRequest();this.send(req)};return chatSender}(Games.ProtoSender));Games.chatSender=chatSender})(Games||(Games={}));var Games;(function(Games){var CinemaBuildHandler=(function(_super){__extends(CinemaBuildHandler,_super);function CinemaBuildHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.CinemaBuild;return _this}CinemaBuildHandler.prototype.ExtendFloor=function(resData){console.log("["+this.moduleName+"] ExtendFloor Response "+resData+" ");if(resData.result==0){Game.moduleModel.building.floorIndex=resData.floor}};CinemaBuildHandler.prototype.BuildRoom=function(resData){console.log("["+this.moduleName+"] BuildRoom Response "+resData+" ");if(resData.result==0){var proto=new Proto.SS.RoomInfo();proto.floor=resData.floor;proto.roomId=resData.roomId;var roomInfo=Games.RoomInfo.creatInfo(proto);Game.moduleModel.building.addRoomInfo(roomInfo)}};CinemaBuildHandler.prototype.UpgradeRoom=function(resData){console.log("["+this.moduleName+"]  UpgradeRoom Response "+resData+" ");if(resData.result==0){Game.moduleModel.building.upgradeRoom(resData.preRoomId,resData.roomId)}};CinemaBuildHandler.prototype.goldExchange=function(msg){};return CinemaBuildHandler}(Games.ProtoHandler));Games.CinemaBuildHandler=CinemaBuildHandler})(Games||(Games={}));var Games;(function(Games){var CinemaBuildSender=(function(_super){__extends(CinemaBuildSender,_super);function CinemaBuildSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.CinemaBuild;return _this}CinemaBuildSender.prototype.ExtendFloor=function(floor){var reqData=new Proto.API.CinemaBuild.ExtendFloorRequest();reqData.floor=floor;this.send(reqData);console.log("ExtendFloor -> "+floor)};CinemaBuildSender.prototype.BuildRoom=function(floor,roomType){var reqData=new Proto.API.CinemaBuild.BuildRoomRequest();reqData.floor=floor;reqData.roomType=roomType;this.send(reqData)};CinemaBuildSender.prototype.UpgradeRoom=function(roomId){var reqData=new Proto.API.CinemaBuild.UpgradeRoomRequest();reqData.roomId=roomId;this.send(reqData)};CinemaBuildSender.prototype.goldExchange=function(count){var req=new Proto.API.CinemaBuild.goldExchangeRequest();req.count=count;this.send(req)};return CinemaBuildSender}(Games.ProtoSender));Games.CinemaBuildSender=CinemaBuildSender})(Games||(Games={}));var Games;(function(Games){var cityHandler=(function(_super){__extends(cityHandler,_super);function cityHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.city;_this.sSetAmbassador=new Signal();_this.sHoldCity=new Signal();return _this}cityHandler.prototype.SetPropagandaActor=function(resData){};cityHandler.prototype.Propaganda=function(resData){Game.moduleModel.task.clientUpdateMainTaskProgress(Games.MainTaskRequireType.RequireType_5_StreetPublicize)};cityHandler.prototype.Roadshow=function(resData){Game.moduleModel.task.clientUpdateMainTaskProgress(Games.MainTaskRequireType.RequireType_6_RoadShow)};cityHandler.prototype.SetAmbassador=function(resData){this.sSetAmbassador.dispatch();Game.moduleModel.task.clientUpdateMainTaskProgress(Games.MainTaskRequireType.RequireType_12_AppointActor)};cityHandler.prototype.GetReward=function(resData){Game.moduleModel.market.IsGetCityReward=true};cityHandler.prototype.HoldCity=function(resData){this.sHoldCity.dispatch();Game.moduleModel.task.clientUpdateMainTaskProgress(Games.MainTaskRequireType.RequireType_7_CityFinish)};return cityHandler}(Games.ProtoHandler));Games.cityHandler=cityHandler})(Games||(Games={}));var Games;(function(Games){var citySender=(function(_super){__extends(citySender,_super);function citySender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.city;return _this}citySender.prototype.SetPropagandaActor=function(uuid,cityId,areaId,actorId){uuid="";var reqData=new Proto.API.city.SetPropagandaActorRequest();reqData.uuid=uuid;reqData.cityId=cityId;reqData.areaId=areaId;reqData.actorId=actorId;this.send(reqData)};citySender.prototype.Propaganda=function(uuid,cityId,areaId){uuid="";var reqData=new Proto.API.city.PropagandaRequest();reqData.uuid=uuid;reqData.cityId=cityId;reqData.areaId=areaId;this.send(reqData)};citySender.prototype.Roadshow=function(uuid,cityId,areaId){uuid="";var reqData=new Proto.API.city.RoadshowRequest();reqData.uuid=uuid;reqData.cityId=cityId;reqData.areaId=areaId;this.send(reqData)};citySender.prototype.SetAmbassador=function(uuid,cityId,psition,actuuid){var reqData=new Proto.API.city.SetAmbassadorRequest();reqData.uuid=uuid;reqData.cityId=cityId;reqData.psition=psition;reqData.actuuid=actuuid;this.send(reqData)};citySender.prototype.GetReward=function(uuid,cityId){var reqData=new Proto.API.city.GetRewardRequest();reqData.uuid=uuid;reqData.cityId=cityId;this.send(reqData)};citySender.prototype.HoldCity=function(uuid){if(uuid===void 0){uuid=""}var reqData=new Proto.API.city.HoldCityRequest();reqData.uuid=uuid;this.send(reqData)};return citySender}(Games.ProtoSender));Games.citySender=citySender})(Games||(Games={}));var Games;(function(Games){var ClientGMHandler=(function(_super){__extends(ClientGMHandler,_super);function ClientGMHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.ClientGM;return _this}ClientGMHandler.prototype.gmTest=function(msg){};ClientGMHandler.prototype.gmUpdateOscar=function(msg){};ClientGMHandler.prototype.gmPrintMem=function(msg){gameDeviceConfig.printInfo()};ClientGMHandler.prototype.gmTestLocalStorageSave=function(msg){};ClientGMHandler.prototype.gmTestLocalStorageRead=function(msg){};ClientGMHandler.prototype.gmTestTimerLoop=function(msg){};ClientGMHandler.prototype.gmTestRelogin=function(msg){Game.protosender.account.refreshToken()};ClientGMHandler.prototype.gmTestRelogin2=function(msg){Game.protosender.GameData.ReGetLoginGameData()};ClientGMHandler.prototype.gmTestPrintTotalActiveTweens=function(msg){};ClientGMHandler.prototype.gmTestKillAlphaTransition=function(msg){};ClientGMHandler.prototype.gmPause=function(msg){};ClientGMHandler.prototype.gmPauseRebder=function(msg){};ClientGMHandler.prototype.gmCacheAs=function(msg){};ClientGMHandler.prototype.gmStopAllTransform=function(msg){};ClientGMHandler.prototype.gmEnablePrinLoop=function(msg){};return ClientGMHandler}(Games.ProtoHandler));Games.ClientGMHandler=ClientGMHandler})(Games||(Games={}));var Games;(function(Games){var ClientGMSender=(function(_super){__extends(ClientGMSender,_super);function ClientGMSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.ClientGM;return _this}ClientGMSender.prototype.gmTest=function(){var req=new Proto.API.ClientGM.gmTestRequest();this.send(req)};ClientGMSender.prototype.gmUpdateOscar=function(){Game.protosender.rank.GetOscarData()};ClientGMSender.prototype.gmPrintMem=function(){gameDeviceConfig.printInfo()};ClientGMSender.prototype.gmTestLocalStorageSave=function(){var req=new Proto.API.ClientGM.gmTestLocalStorageSaveRequest();this.send(req)};ClientGMSender.prototype.gmTestLocalStorageRead=function(){var req=new Proto.API.ClientGM.gmTestLocalStorageReadRequest();this.send(req)};ClientGMSender.prototype.gmTestTimerLoop=function(){var req=new Proto.API.ClientGM.gmTestTimerLoopRequest();this.send(req)};ClientGMSender.prototype.gmTestRelogin=function(){var req=new Proto.API.ClientGM.gmTestReloginRequest();this.send(req)};ClientGMSender.prototype.gmTestRelogin2=function(){var req=new Proto.API.ClientGM.gmTestRelogin2Request();this.send(req)};ClientGMSender.prototype.gmTestPrintTotalActiveTweens=function(){var req=new Proto.API.ClientGM.gmTestPrintTotalActiveTweensRequest();this.send(req)};ClientGMSender.prototype.gmTestKillAlphaTransition=function(){var req=new Proto.API.ClientGM.gmTestKillAlphaTransitionRequest();this.send(req)};ClientGMSender.prototype.gmPause=function(){var req=new Proto.API.ClientGM.gmPauseRequest();this.send(req)};ClientGMSender.prototype.gmPauseRebder=function(){var req=new Proto.API.ClientGM.gmPauseRebderRequest();this.send(req)};ClientGMSender.prototype.gmCacheAs=function(){var req=new Proto.API.ClientGM.gmCacheAsRequest();this.send(req)};ClientGMSender.prototype.gmStopAllTransform=function(){var req=new Proto.API.ClientGM.gmStopAllTransformRequest();this.send(req)};ClientGMSender.prototype.gmEnablePrinLoop=function(){var req=new Proto.API.ClientGM.gmEnablePrinLoopRequest();this.send(req)};return ClientGMSender}(Games.ProtoSender));Games.ClientGMSender=ClientGMSender})(Games||(Games={}));var Games;(function(Games){var cooperateHandler=(function(_super){__extends(cooperateHandler,_super);function cooperateHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.cooperate;return _this}cooperateHandler.prototype.Apply=function(msg){Game.moduleModel.cooperation.Apply(msg)};cooperateHandler.prototype.Relieve=function(msg){Game.moduleModel.cooperation.Relieve(msg)};cooperateHandler.prototype.Approve=function(msg){Game.moduleModel.cooperation.Approve(msg)};cooperateHandler.prototype.GetInfo=function(msg){Game.moduleModel.cooperation.GetInfo(msg)};cooperateHandler.prototype.TaskOperate=function(msg){Game.moduleModel.cooperation.TaskOperate(msg)};cooperateHandler.prototype.GetTaskReward=function(msg){Game.moduleModel.cooperation.GetTaskReward(msg)};cooperateHandler.prototype.GiveReward=function(msg){Game.moduleModel.cooperation.GiveReward(msg)};cooperateHandler.prototype.GetProgressTask=function(msg){Game.moduleModel.cooperation.GetProgressTask(msg)};cooperateHandler.prototype.CancelCooperate=function(msg){Game.moduleModel.cooperation.CancelCooperate(msg)};cooperateHandler.prototype.ReadCooperate=function(msg){};cooperateHandler.prototype.GetTaskInfo=function(msg){};cooperateHandler.prototype.GetOrderInfo=function(msg){};return cooperateHandler}(Games.ProtoHandler));Games.cooperateHandler=cooperateHandler})(Games||(Games={}));var Games;(function(Games){var cooperateSender=(function(_super){__extends(cooperateSender,_super);function cooperateSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.cooperate;return _this}cooperateSender.prototype.Apply=function(entityId){var req=new Proto.API.cooperate.ApplyRequest();req.entityId=entityId;this.send(req)};cooperateSender.prototype.Relieve=function(){var req=new Proto.API.cooperate.RelieveRequest();this.send(req)};cooperateSender.prototype.Approve=function(type,entityId){var req=new Proto.API.cooperate.ApproveRequest();req.type=type;req.entityId=entityId;this.send(req)};cooperateSender.prototype.GetInfo=function(){var req=new Proto.API.cooperate.GetInfoRequest();this.send(req)};cooperateSender.prototype.TaskOperate=function(type,taskId,star){var req=new Proto.API.cooperate.TaskOperateRequest();req.type=type;req.taskId=taskId;req.star=star;this.send(req)};cooperateSender.prototype.GetTaskReward=function(taskId,star){var req=new Proto.API.cooperate.GetTaskRewardRequest();req.taskId=taskId;req.star=star;this.send(req)};cooperateSender.prototype.GiveReward=function(itemId){var req=new Proto.API.cooperate.GiveRewardRequest();req.itemId=itemId;this.send(req)};cooperateSender.prototype.GetProgressTask=function(index){var req=new Proto.API.cooperate.GetProgressTaskRequest();req.index=index;this.send(req)};cooperateSender.prototype.CancelCooperate=function(){var req=new Proto.API.cooperate.CancelCooperateRequest();this.send(req)};cooperateSender.prototype.ReadCooperate=function(){var req=new Proto.API.cooperate.ReadCooperateRequest();this.send(req)};cooperateSender.prototype.GetTaskInfo=function(){var req=new Proto.API.cooperate.GetTaskInfoRequest();this.send(req)};cooperateSender.prototype.GetOrderInfo=function(oldOrderUuids){var req=new Proto.API.cooperate.GetOrderInfoRequest();req.oldOrderUuids=oldOrderUuids;this.send(req)};return cooperateSender}(Games.ProtoSender));Games.cooperateSender=cooperateSender})(Games||(Games={}));var Games;(function(Games){var dailySignHandler=(function(_super){__extends(dailySignHandler,_super);function dailySignHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.dailySign;return _this}dailySignHandler.prototype.sign=function(msg){Game.moduleModel.activity.handlerSign(msg)};return dailySignHandler}(Games.ProtoHandler));Games.dailySignHandler=dailySignHandler})(Games||(Games={}));var Games;(function(Games){var dailySignSender=(function(_super){__extends(dailySignSender,_super);function dailySignSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.dailySign;return _this}dailySignSender.prototype.sign=function(){var req=new Proto.API.dailySign.signRequest();this.send(req)};return dailySignSender}(Games.ProtoSender));Games.dailySignSender=dailySignSender})(Games||(Games={}));var Games;(function(Games){var DanmuHandler=(function(_super){__extends(DanmuHandler,_super);function DanmuHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.Danmu;return _this}DanmuHandler.prototype.set=function(msg){};DanmuHandler.prototype.get=function(msg){Game.moduleModel.oscar.UpdateDanmu(msg)};return DanmuHandler}(Games.ProtoHandler));Games.DanmuHandler=DanmuHandler})(Games||(Games={}));var Games;(function(Games){var DanmuSender=(function(_super){__extends(DanmuSender,_super);function DanmuSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.Danmu;return _this}DanmuSender.prototype.set=function(id,msg){var req=new Proto.API.Danmu.setRequest();req.id=id;req.msg=msg;this.send(req)};DanmuSender.prototype.get=function(id,time){var req=new Proto.API.Danmu.getRequest();req.id=id;req.time=time;this.send(req)};return DanmuSender}(Games.ProtoSender));Games.DanmuSender=DanmuSender})(Games||(Games={}));var Games;(function(Games){var GameDataHandler=(function(_super){__extends(GameDataHandler,_super);function GameDataHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.GameData;_this.isFirstLoginGameData=true;return _this}GameDataHandler.prototype.InitGameData=function(resData){Game.checkEnterGame(true)};GameDataHandler.prototype.GetInitActor=function(resData){};GameDataHandler.prototype.Auth=function(msg){if(msg.result!=0){Game.system.toastMsg(MsgKey.account_load_again);return}Game.protosender.GameData.GetLoginGameData(Game.localStorage.password,"1");Games.Static.Instance.onRegistation(true)};GameDataHandler.prototype.GetLoginGameData=function(resData){Game.time.serverTimezone=resData.timeZone;Games.GameLocalStorage.Instance.setBoolean("__PopUpMain_HavePopToday",false,false);User.startTimeTick();Game.moduleModel.notice.UpdateNoticeMsg(resData.noticeList);Games.Static.Instance.onInstall();Games.Static.Instance.onLoadStep("load_start");Games.Static.Instance.onLoadStep("load_end");Games.Static.Instance.onLoadEnd();Game.protosender.pay.FinishOrderForLast();if(this.isFirstLoginGameData){Game.checkEnterGame()}else{Game.event.dispatch(GameEventKey.GameFrame_ReLoginData_End)}this.isFirstLoginGameData=false;Game.proto.isNeedReGetLoginGameData=false};GameDataHandler.prototype.RenameGameData=function(resData){};GameDataHandler.prototype.RePerSignatureGameData=function(resData){};GameDataHandler.prototype.RePortraitGameData=function(resData){};GameDataHandler.prototype.GetInitGameData=function(msg){};GameDataHandler.prototype.GetGameInfoExt=function(msg){};GameDataHandler.prototype.GetNoticeList=function(msg){Game.moduleModel.notice.UpdateNoticeMsg(msg.noticeList)};GameDataHandler.prototype.VisitorAuth=function(msg){if(msg.result==0){Game.localStorage.isGameGuest=false;Game.protosender.GameData.GetLoginGameData(Game.localStorage.password,"1")}else{var txt=Games.TEXT.GuestBindError_2;switch(msg.result){case 1:txt=Games.TEXT.GuestBindError_1;break;case 2:txt=Games.TEXT.GuestBindError_2;break;case 3:txt=Games.TEXT.GuestBindError_3;break}Game.system.toastText(txt)}};return GameDataHandler}(Games.ProtoHandler));Games.GameDataHandler=GameDataHandler})(Games||(Games={}));var Games;(function(Games){var GameDataSender=(function(_super){__extends(GameDataSender,_super);function GameDataSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.GameData;_this.channel="1";return _this}GameDataSender.prototype.InitGameData=function(name,sex){Game.proto.httpChannel.http.isInitGameData=true;var reqData=new Proto.API.GameData.InitGameDataRequest();reqData.name=name;reqData.sex=sex;reqData.__delayTime=0;reqData.__showTime=30000;this.send(reqData)};GameDataSender.prototype.GetInitActor=function(initialActorId){var reqData=new Proto.API.GameData.GetInitActorRequest();reqData.index=initialActorId;this.send(reqData)};GameDataSender.prototype.Auth=function(pass){this.pass=pass;var req=new Proto.API.GameData.AuthRequest();req.pass=pass;this.send(req)};GameDataSender.prototype.GetLoginGameData=function(pass,channel){if(channel===void 0){channel="1"}this.pass=pass;this.channel=channel;var reqData=new Proto.API.GameData.GetLoginGameDataRequest();reqData.channel=channel;reqData.pass=pass;reqData.__delayTime=0;reqData.__showTime=30000;this.send(reqData)};GameDataSender.prototype.ReGetLoginGameData=function(){var reqData=new Proto.API.GameData.GetLoginGameDataRequest();reqData.channel=this.channel;reqData.pass=this.pass;reqData.__delayTime=0;reqData.__showTime=30000;reqData.__isReGetLoginGameData=true;this.send(reqData)};GameDataSender.prototype.GetGameInfoExt=function(){var reqData=new Proto.API.GameData.GetGameInfoExtRequest();this.send(reqData)};GameDataSender.prototype.RenameGameData=function(playerName){var reqData=new Proto.API.GameData.RenameGameDataRequest();reqData.playerName=playerName;this.send(reqData)};GameDataSender.prototype.RePerSignatureGameData=function(perSignature){var reqData=new Proto.API.GameData.RePerSignatureGameDataRequest();reqData.perSignature=perSignature;this.send(reqData)};GameDataSender.prototype.RePortraitGameData=function(type,portraitId){var reqData=new Proto.API.GameData.RePortraitGameDataRequest();reqData.type=type;reqData.portraitId=portraitId;this.send(reqData)};GameDataSender.prototype.GetInitGameData=function(nameList){var req=new Proto.API.GameData.GetInitGameDataRequest();req.nameList=nameList;this.send(req)};GameDataSender.prototype.GetNoticeList=function(){var req=new Proto.API.GameData.GetNoticeListRequest();this.send(req)};GameDataSender.prototype.VisitorAuth=function(name,pass){var req=new Proto.API.GameData.VisitorAuthRequest();req.name=name;req.pass=pass;req.__delayTime=0;req.__showTime=30000;this.send(req)};return GameDataSender}(Games.ProtoSender));Games.GameDataSender=GameDataSender})(Games||(Games={}));var Games;(function(Games){var GiftHandler=(function(_super){__extends(GiftHandler,_super);function GiftHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.Gift;return _this}GiftHandler.prototype.Exchange=function(msg){Game.moduleModel.setting.handlerExchange(msg)};return GiftHandler}(Games.ProtoHandler));Games.GiftHandler=GiftHandler})(Games||(Games={}));var Games;(function(Games){var GiftSender=(function(_super){__extends(GiftSender,_super);function GiftSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.Gift;return _this}GiftSender.prototype.Exchange=function(id){var req=new Proto.API.Gift.ExchangeRequest();req.id=id;this.send(req)};return GiftSender}(Games.ProtoSender));Games.GiftSender=GiftSender})(Games||(Games={}));var Games;(function(Games){var itemHandler=(function(_super){__extends(itemHandler,_super);function itemHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.item;return _this}itemHandler.prototype.SellOut=function(resData){};itemHandler.prototype.Compound=function(resData){};itemHandler.prototype.Split=function(resData){};itemHandler.prototype.Use=function(resData){var dropList=resData.dropout;if(dropList&&dropList.length>0){var list=Games.ItemData.BinningItemList(dropList);Game.system.getItemText(list)}};itemHandler.prototype.CompoundActor=function(resData){if(resData.actorId==0){var dropList=resData.items;if(dropList&&dropList.length>0){var list=Games.ItemData.BinningItemList(dropList);Game.system.getItemText(list)}}};itemHandler.prototype.UseActorSkillWater=function(msg){};itemHandler.prototype.UsePiecesGiftBag=function(msg){var dropList=msg.dropout;if(dropList&&dropList.length>0){var list=Games.ItemData.BinningItemList(dropList);Game.system.getItemText(list)}};return itemHandler}(Games.ProtoHandler));Games.itemHandler=itemHandler})(Games||(Games={}));var Games;(function(Games){var itemSender=(function(_super){__extends(itemSender,_super);function itemSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.item;return _this}itemSender.prototype.SellOut=function(uuid,itemId,amount){var reqData=new Proto.API.item.SellOutRequest();reqData.uuid=uuid;reqData.itemId=itemId;reqData.amount=amount;this.send(reqData)};itemSender.prototype.Compound=function(uuid,itemId,amount){var reqData=new Proto.API.item.CompoundRequest();reqData.uuid=uuid;reqData.itemId=itemId;reqData.amount=amount;this.send(reqData)};itemSender.prototype.Split=function(uuid,itemId,amount){var reqData=new Proto.API.item.SplitRequest();reqData.uuid=uuid;reqData.itemId=itemId;reqData.amount=amount;this.send(reqData)};itemSender.prototype.Use=function(uuid,itemId,amount){var reqData=new Proto.API.item.UseRequest();reqData.uuid=uuid;reqData.itemId=itemId;reqData.amount=amount;this.send(reqData)};itemSender.prototype.CompoundActor=function(uuid,itemId){var reqData=new Proto.API.item.CompoundActorRequest();reqData.uuid=uuid;reqData.itemId=itemId;this.send(reqData)};itemSender.prototype.UseActorSkillWater=function(uuid,itemId,actorId,amount){var req=new Proto.API.item.UseActorSkillWaterRequest();req.uuid=uuid;req.actorId=actorId;req.amount=amount;this.send(req)};itemSender.prototype.UsePiecesGiftBag=function(uuid,itemId,amount,selItemId){var req=new Proto.API.item.UsePiecesGiftBagRequest();req.uuid=uuid;req.itemId=itemId;req.amount=amount;req.selItemId=selItemId;this.send(req)};return itemSender}(Games.ProtoSender));Games.itemSender=itemSender})(Games||(Games={}));var Games;(function(Games){var LicenceHandler=(function(_super){__extends(LicenceHandler,_super);function LicenceHandler(){return _super!==null&&_super.apply(this,arguments)||this}return LicenceHandler}(Games.ProtoHandler));Games.LicenceHandler=LicenceHandler})(Games||(Games={}));var Games;(function(Games){var LicenceSender=(function(_super){__extends(LicenceSender,_super);function LicenceSender(){return _super!==null&&_super.apply(this,arguments)||this}return LicenceSender}(Games.ProtoHandler));Games.LicenceSender=LicenceSender})(Games||(Games={}));var Games;(function(Games){var MailHandler=(function(_super){__extends(MailHandler,_super);function MailHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.Mail;return _this}MailHandler.prototype.MailGetReward=function(msg){if(msg.dropout&&msg.dropout.length>0){Game.system.getItemText(msg.dropout,null,null)}};MailHandler.prototype.MailDelete=function(msg){};MailHandler.prototype.MailRead=function(msg){};MailHandler.prototype.MailGetRewardMany=function(msg){if(msg.dropout&&msg.dropout.length>0){Game.system.getItemText(msg.dropout,null,null)}};MailHandler.prototype.MailDeleteMany=function(msg){};return MailHandler}(Games.ProtoHandler));Games.MailHandler=MailHandler})(Games||(Games={}));var Games;(function(Games){var MailSender=(function(_super){__extends(MailSender,_super);function MailSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.Mail;return _this}MailSender.prototype.MailGetReward=function(uuid){var reqData=new Proto.API.Mail.MailGetRewardRequest();reqData.uuid=uuid;this.send(reqData)};MailSender.prototype.MailDelete=function(uuid){var reqData=new Proto.API.Mail.MailDeleteRequest();reqData.uuid=uuid;this.send(reqData,false,false)};MailSender.prototype.MailRead=function(uuid){var reqData=new Proto.API.Mail.MailReadRequest();reqData.uuid=uuid;this.send(reqData,false,false)};MailSender.prototype.MailGetRewardMany=function(uuid){var req=new Proto.API.Mail.MailGetRewardManyRequest();req.uuid=uuid;this.send(req)};MailSender.prototype.MailDeleteMany=function(uuid){var req=new Proto.API.Mail.MailDeleteManyRequest();req.uuid=uuid;this.send(req)};return MailSender}(Games.ProtoSender));Games.MailSender=MailSender})(Games||(Games={}));var Games;(function(Games){var mallHandler=(function(_super){__extends(mallHandler,_super);function mallHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.mall;return _this}mallHandler.prototype.buy=function(msg){};return mallHandler}(Games.ProtoHandler));Games.mallHandler=mallHandler})(Games||(Games={}));var Games;(function(Games){var mallSender=(function(_super){__extends(mallSender,_super);function mallSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.mall;return _this}mallSender.prototype.buy=function(goodsId,amount,itemId){var req=new Proto.API.mall.buyRequest();req.goodsId=goodsId;req.amount=amount;this.send(req,true)};return mallSender}(Games.ProtoSender));Games.mallSender=mallSender})(Games||(Games={}));var Games;(function(Games){var manageBusinessHandler=(function(_super){__extends(manageBusinessHandler,_super);function manageBusinessHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.manageBusiness;return _this}manageBusinessHandler.prototype.GetReward=function(msg){};return manageBusinessHandler}(Games.ProtoHandler));Games.manageBusinessHandler=manageBusinessHandler})(Games||(Games={}));var Games;(function(Games){var manageBusinessSender=(function(_super){__extends(manageBusinessSender,_super);function manageBusinessSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.manageBusiness;return _this}manageBusinessSender.prototype.GetReward=function(){var req=new Proto.API.manageBusiness.GetRewardRequest();this.send(req)};return manageBusinessSender}(Games.ProtoSender));Games.manageBusinessSender=manageBusinessSender})(Games||(Games={}));var Games;(function(Games){var manageMeetingHandler=(function(_super){__extends(manageMeetingHandler,_super);function manageMeetingHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.manageMeeting;return _this}manageMeetingHandler.prototype.GetReward=function(msg){Game.moduleModel.meeting.meetingCompanyName="";Game.moduleModel.meeting.companyDelegateAvatarId=0;Game.menu.close(Games.MenuId.Meeting);var rewardItems=Game.moduleModel.meeting.rewardItems;function next(){var data=Game.moduleModel.meeting.getMeetingData();if(data){var num=data.nextMeetingNum;if(num>0){Game.system.confirmText(format(Games.TEXT.MeetingNext,Game.moduleModel.meeting.meetingCompanyName),Games.TEXT.MeetingNextMeet,null,function(){var unlock=Games.MenuValidateUnlock.getInstance().validate(Games.MenuId.Meeting);if(!unlock){Game.system.toastText(Games.TEXT.Lock);return}var enableOpen=Games.MenuValidateEnableOpen.getInstance().validate(Games.MenuId.Meeting);if(enableOpen){Game.menu.open(Games.MenuId.Meeting,Games.MeetingPanelType.AskPirce)}})}}}if(msg.type==0){if(rewardItems){Game.system.openAwardsAlert(rewardItems,Games.TEXT.MeetingRewardTitle,function(){next()})}else{next()}}else{next()}};manageMeetingHandler.prototype.Markup=function(msg){};return manageMeetingHandler}(Games.ProtoHandler));Games.manageMeetingHandler=manageMeetingHandler})(Games||(Games={}));var Games;(function(Games){var manageMeetingSender=(function(_super){__extends(manageMeetingSender,_super);function manageMeetingSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.manageMeeting;return _this}manageMeetingSender.prototype.GetReward=function(type){var req=new Proto.API.manageMeeting.GetRewardRequest();req.type=type;this.send(req)};manageMeetingSender.prototype.Markup=function(type){var req=new Proto.API.manageMeeting.MarkupRequest();req.type=type;this.send(req)};return manageMeetingSender}(Games.ProtoSender));Games.manageMeetingSender=manageMeetingSender})(Games||(Games={}));var Games;(function(Games){var manageOrderHandler=(function(_super){__extends(manageOrderHandler,_super);function manageOrderHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.manageOrder;return _this}manageOrderHandler.prototype.PutItem=function(msg){if(msg.type==1){Game.system.getItemText([msg.itemInfo])}};manageOrderHandler.prototype.DelOrder=function(msg){};manageOrderHandler.prototype.FinishOrder=function(msg){if(isNullOrEmpty(msg.uuid)==false){var data=Game.moduleModel.order.getDeleteDataByUUid(msg.uuid);if(data){Game.system.playEffects(data.rewardItems);Game.sound.playSound(SoundKey.MM09_GoldReward);Game.system.getItemText(data.rewardItems);Games.Static.Instance.onResourceoutput(data.rewardItems,"order&End",User.info.stall+"&"+data.id)}}};manageOrderHandler.prototype.DealOrder=function(msg){};return manageOrderHandler}(Games.ProtoHandler));Games.manageOrderHandler=manageOrderHandler})(Games||(Games={}));var Games;(function(Games){var manageOrderSender=(function(_super){__extends(manageOrderSender,_super);function manageOrderSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.manageOrder;return _this}manageOrderSender.prototype.PutItem=function(uuid,entityId,itemId,type,responseRequired,limitTime){if(limitTime===void 0){limitTime=true}var req=new Proto.API.manageOrder.PutItemRequest();req.uuid=uuid;req.itemId=itemId;req.type=type;req.entityId=entityId;this.send(req,responseRequired,limitTime)};manageOrderSender.prototype.DelOrder=function(uuid){var req=new Proto.API.manageOrder.DelOrderRequest();req.uuid=uuid;this.send(req)};manageOrderSender.prototype.FinishOrder=function(uuid){var req=new Proto.API.manageOrder.FinishOrderRequest();req.uuid=uuid;this.send(req)};manageOrderSender.prototype.DealOrder=function(){var req=new Proto.API.manageOrder.DealOrderRequest();this.send(req)};return manageOrderSender}(Games.ProtoSender));Games.manageOrderSender=manageOrderSender})(Games||(Games={}));var Games;(function(Games){var manageProduceHandler=(function(_super){__extends(manageProduceHandler,_super);function manageProduceHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.manageProduce;return _this}manageProduceHandler.prototype.Produce=function(resData){console.log("["+this.moduleName+"] Produce "+resData+" ")};manageProduceHandler.prototype.GetReward=function(resData){console.log("["+this.moduleName+"] GetReward  "+resData+" ")};manageProduceHandler.prototype.Uplevel=function(resData){console.log("["+this.moduleName+"] Uplevel "+resData+" ")};manageProduceHandler.prototype.SendActor=function(resData){console.log("["+this.moduleName+"] SendActor  "+resData+" ")};manageProduceHandler.prototype.Deblocking=function(resData){console.log("["+this.moduleName+"] Deblocking  "+resData+" ")};manageProduceHandler.prototype.QuickGetReward=function(resData){console.log("["+this.moduleName+"] QuickGetReward  "+resData+" ")};manageProduceHandler.prototype.QuickProduce=function(resData){console.log("["+this.moduleName+"] QuickProduce  "+resData+" ")};manageProduceHandler.prototype.cleanTime=function(resData){console.log("["+this.moduleName+"] cleanTime  "+resData+" ")};return manageProduceHandler}(Games.ProtoHandler));Games.manageProduceHandler=manageProduceHandler})(Games||(Games={}));var Games;(function(Games){var manageProduceSender=(function(_super){__extends(manageProduceSender,_super);function manageProduceSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.manageProduce;return _this}manageProduceSender.prototype.Produce=function(produceId){var reqData=new Proto.API.manageProduce.ProduceRequest();var uuid=Game.moduleModel.produce.getProduceUuid(produceId);reqData.uuid=uuid;this.send(reqData)};manageProduceSender.prototype.GetReward=function(produceId){var reqData=new Proto.API.manageProduce.GetRewardRequest();var uuid=Game.moduleModel.produce.getProduceUuid(produceId);reqData.uuid=uuid;this.send(reqData)};manageProduceSender.prototype.Uplevel=function(produceId,produceSkillId){var reqData=new Proto.API.manageProduce.UplevelRequest();var uuid=Game.moduleModel.produce.getProduceUuid(produceId);reqData.uuid=uuid;reqData.skillId=produceSkillId;this.send(reqData)};manageProduceSender.prototype.SendActor=function(produceId,actorId){var reqData=new Proto.API.manageProduce.SendActorRequest();var uuid=Game.moduleModel.produce.getProduceUuid(produceId);reqData.uuid=uuid;reqData.actBaseId=actorId;this.send(reqData)};manageProduceSender.prototype.Deblocking=function(produceId){var reqData=new Proto.API.manageProduce.DeblockingRequest();reqData.produceId=produceId;this.send(reqData)};manageProduceSender.prototype.QuickGetReward=function(stall){var reqData=new Proto.API.manageProduce.QuickGetRewardRequest();reqData.stall=stall;this.send(reqData)};manageProduceSender.prototype.QuickProduce=function(stall){var reqData=new Proto.API.manageProduce.QuickProduceRequest();reqData.stall=stall;this.send(reqData)};manageProduceSender.prototype.cleanTime=function(produceId){var reqData=new Proto.API.manageProduce.cleanTimeRequest();var uuid=Game.moduleModel.produce.getProduceUuid(produceId);reqData.uuid=uuid;this.send(reqData)};return manageProduceSender}(Games.ProtoSender));Games.manageProduceSender=manageProduceSender})(Games||(Games={}));var Games;(function(Games){var manageVisitHandler=(function(_super){__extends(manageVisitHandler,_super);function manageVisitHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.manageVisit;return _this}manageVisitHandler.prototype.StartVisit=function(msg){if(Game.moduleModel.secretary.isAutoVisit){Game.menu.close(Games.MenuId.Fans);var data=Game.moduleModel.visit.getVisitData();if(data.actorId>0){Games.AvatarManager.autoActorToReception(data.actorId)}}};manageVisitHandler.prototype.GetReward=function(msg){Game.moduleModel.visit.isReward=true;if(Game.moduleModel.visit.rewardVisitId<=0){return}var config=Game.config.visit.getConfig(Game.moduleModel.visit.rewardVisitId);if(!config){return}var items=Game.moduleModel.visit.resultRewards;var isAuto=Game.moduleModel.secretary.isAutoVisit;Game.system.getItemText(items,function(){Game.system.playEffects(items);var data=Game.moduleModel.visit.getVisitData();var fansnnum=data.nextFansNum;if(fansnnum<1){return}if(Game.moduleModel.secretary.isTempSecretary&&Game.moduleModel.secretary.autoVisitNum<=0&&Game.moduleModel.secretary.realAutoVisit){isAuto=false;Game.moduleModel.secretary.isAutoVisit=false;Game.system.confirmText(Game.config.msg.getTxtFormat(MsgKey.secretary_experience,Game.config.msg.getTxt(MsgKey.secretary_auto2)),Games.TEXT.SecretaryForeverAgent,null,function(){Game.menu.open(Games.MenuId.Weal,1)},function(){Game.system.confirmText(format(Games.TEXT.VisitNextVisitActor,fansnnum),Games.TEXT.VisitNextFans,null,function(){var enableOpen=Games.MenuValidateEnableOpen.getInstance().validate(Games.MenuId.Fans);if(enableOpen){Game.menu.open(Games.MenuId.Fans)}})},Game.config.msg.getTxt(MsgKey.go_to_hire),Games.TEXT.ButtonCannel,false)}else{if(isAuto){Game.system.toastText(Games.TEXT.ActorAutoVisit);if(Game.moduleModel.actor.hasCanVisitActor){Game.protosender.manageVisit.StartVisit()}else{Game.system.toastMsg(MsgKey.visit_noone)}}else{Game.system.confirmText(format(Games.TEXT.VisitNextVisitActor,fansnnum),Games.TEXT.VisitNextFans,null,function(){var enableOpen=Games.MenuValidateEnableOpen.getInstance().validate(Games.MenuId.Fans);if(enableOpen){Game.menu.open(Games.MenuId.Fans)}})}}},isAuto)};manageVisitHandler.prototype.StartRece=function(msg){};return manageVisitHandler}(Games.ProtoHandler));Games.manageVisitHandler=manageVisitHandler})(Games||(Games={}));var Games;(function(Games){var manageVisitSender=(function(_super){__extends(manageVisitSender,_super);function manageVisitSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.manageVisit;return _this}manageVisitSender.prototype.StartVisit=function(){var req=new Proto.API.manageVisit.StartVisitRequest();this.send(req)};manageVisitSender.prototype.GetReward=function(){var req=new Proto.API.manageVisit.GetRewardRequest();this.send(req)};manageVisitSender.prototype.StartRece=function(){var req=new Proto.API.manageVisit.StartReceRequest();this.send(req)};return manageVisitSender}(Games.ProtoSender));Games.manageVisitSender=manageVisitSender})(Games||(Games={}));var Games;(function(Games){var movieHandler=(function(_super){__extends(movieHandler,_super);function movieHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.movie;return _this}movieHandler.prototype.MakeFilm=function(msg){Game.moduleModel.warData.handlerMakeFilm()};movieHandler.prototype.SetMovieName=function(msg){Game.moduleModel.warData.handleReName()};movieHandler.prototype.SetActor=function(msg){Game.moduleModel.warData.HandleSetActor(msg)};movieHandler.prototype.ConfirmSetActor=function(msg){Game.moduleModel.warData.HandleConfirmSetActor(msg)};movieHandler.prototype.ChoseType=function(msg){Game.moduleModel.warData.HandleSetSelectType(msg)};movieHandler.prototype.PublishMovie=function(msg){Game.moduleModel.warData.PublishMovie(msg)};movieHandler.prototype.BattleOver=function(msg){Game.moduleModel.warData.HandlersetBattleOver(msg)};movieHandler.prototype.AcceptMediaVisit=function(msg){Game.moduleModel.warData.handleAcceptMediaVisit(msg)};movieHandler.prototype.UpdateMovieState=function(msg){Game.moduleModel.warData.handleUpdateMovieState()};movieHandler.prototype.GetRewardMovie=function(msg){Game.moduleModel.warData.handlerGetRewardMovie(msg)};movieHandler.prototype.DeleteMovie=function(msg){Game.moduleModel.warData.handlerDeleteMovie(msg)};movieHandler.prototype.GetStoryGoals=function(msg){Game.moduleModel.warData.handlerGetStoryGoals()};movieHandler.prototype.SpreadMovie=function(msg){Game.moduleModel.warData.handlerSpreadMovie()};movieHandler.prototype.SwitchCity=function(msg){Game.moduleModel.warData.handlerSwitchCity()};movieHandler.prototype.RefreshMovieStory=function(msg){Game.moduleModel.warData.handlerRefreshMovieStory()};return movieHandler}(Games.ProtoHandler));Games.movieHandler=movieHandler})(Games||(Games={}));var Games;(function(Games){var movie=Proto.API.movie;var movieSender=(function(_super){__extends(movieSender,_super);function movieSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.movie;_this.sendRequyireDict=new Dictionary();return _this}movieSender.prototype.MakeFilm=function(){var reqData=new movie.MakeFilmRequest();this.mySend(reqData)};movieSender.prototype.SetMovieName=function(newName){var reqData=new movie.SetMovieNameRequest();reqData.uuid=Game.moduleModel.warData.moveData.uuid;reqData.index=Game.moduleModel.warData.filmIndexOf;reqData.name=newName;this.mySend(reqData)};movieSender.prototype.SetActor=function(index,actorId){var reqData=new movie.SetActorRequest();reqData.uuid=Game.moduleModel.warData.moveData.uuid;reqData.index=index;reqData.actorId=actorId;this.send(reqData,false,false)};movieSender.prototype.ConfirmSetActor=function(){var reqData=new movie.ConfirmSetActorRequest();reqData.uuid=Game.moduleModel.warData.moveData.uuid;this.mySend(reqData)};movieSender.prototype.ChoseType=function(type){var reqData=new movie.ChoseTypeRequest();reqData.uuid=Game.moduleModel.warData.moveData.uuid;reqData.type=type;this.mySend(reqData)};movieSender.prototype.PublishMovie=function(theaterId){var reqData=new movie.PublishMovieRequest();reqData.uuid=Game.moduleModel.warData.moveData.uuid;reqData.theaterId=theaterId;this.mySend(reqData)};movieSender.prototype.BattleOver=function(){var reqData=new movie.BattleOverRequest();reqData.uuid=Game.moduleModel.warData.moveData.uuid;this.mySend(reqData)};movieSender.prototype.AcceptMediaVisit=function(mediaId){var reqData=new movie.AcceptMediaVisitRequest();reqData.uuid=Game.moduleModel.warData.moveData.uuid;reqData.mediaId=mediaId;this.send(reqData,false,false)};movieSender.prototype.UpdateMovieState=function(state){var reqData=new movie.UpdateMovieStateRequest();reqData.uuid=Game.moduleModel.warData.moveData.uuid;reqData.state=state;this.mySend(reqData)};movieSender.prototype.GetRewardMovie=function(uuid){var reqData=new movie.GetRewardMovieRequest();reqData.uuid=uuid;this.send(reqData,false,false)};movieSender.prototype.GetStoryGoals=function(){var reqData=new movie.GetStoryGoalsRequest();reqData.uuid=Game.moduleModel.warData.moveData.uuid;this.mySend(reqData)};movieSender.prototype.DeleteMovie=function(uuid){var reqData=new movie.DeleteMovieRequest();reqData.uuid=uuid;this.mySend(reqData)};movieSender.prototype.SpreadMovie=function(uuid){var req=new Proto.API.movie.SpreadMovieRequest();req.uuid=uuid;this.send(req,false,false)};movieSender.prototype.SwitchCity=function(uuid,cityId){var req=new Proto.API.movie.SwitchCityRequest();req.uuid=uuid;req.cityId=cityId;this.send(req,false,false)};movieSender.prototype.mySend=function(msg){var clsname=getClassName(msg).replace("Request","");var lastMsg=this.sendRequyireDict.getValue(clsname);if(lastMsg&&lastMsg.__isRespond===false){return}this.sendRequyireDict.add(clsname,msg);msg.__isRespond=false;this.send(msg,false,false)};movieSender.prototype.RefreshMovieStory=function(uuid){var req=new Proto.API.movie.RefreshMovieStoryRequest();req.uuid=uuid;this.send(req)};return movieSender}(Games.ProtoSender));Games.movieSender=movieSender})(Games||(Games={}));var Games;(function(Games){var payHandler=(function(_super){__extends(payHandler,_super);function payHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.pay;return _this}payHandler.prototype.StartOrder=function(msg){var conList=Game.config.recharge.getConfigList();for(var i=0;i<conList.length;i++){if(conList[i].id===msg.id){var conchMarketJson=new Games.ConchMarketJson();conchMarketJson.amount=msg.amount;conchMarketJson.order_id=msg.orderId;conchMarketJson.product_id=conList[i].product_id;if(!Games.RechargeAttributes.Instance.orderDic.hasKey(msg.orderId)){Games.RechargeAttributes.Instance.orderDic.add(msg.orderId,conList[i])}Games.Recharge.Instance.onRecharge(conchMarketJson);break}}};payHandler.prototype.FinishOrder=function(msg){fairygui.GRoot.inst.closeModalWait();if(msg.result===0){if(Games.RechargeAttributes.Instance.orderDic.hasKey(msg.orderId)){var rechargeConf=Games.RechargeAttributes.Instance.orderDic.getValue(msg.orderId);Games.Static.Instance.onPurchase(rechargeConf.cost_dollar,msg.orderId,rechargeConf.name,rechargeConf.id);switch(rechargeConf.id){case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 1007:case 1009:Game.system.getItemText(rechargeConf.rechangeGifts);break;case 1008:break}}}else{Game.system.alrtTextFull(Games.TEXT.rechargeError,Games.TEXT.systemTip)}};return payHandler}(Games.ProtoHandler));Games.payHandler=payHandler})(Games||(Games={}));var Games;(function(Games){var paySender=(function(_super){__extends(paySender,_super);function paySender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.pay;_this.holdOrderTime=0;_this.isLoginOver=false;_this.finishList=new Array();return _this}paySender.prototype.StartOrder=function(id,amount){if(Game.time.localTime-this.holdOrderTime<500){return}this.holdOrderTime=Game.time.localTime;if(Game.localStorage.isGuest){Game.system.alrtTextFull(Games.TEXT.cannotRecharge,Games.TEXT.systemTip);return}if(!BrowserDetect.isIOS){Game.system.alrtTextFull(Games.TEXT.cannotRechargeNoIos,Games.TEXT.systemTip);return}fairygui.GRoot.inst.showModalWait();var req=new Proto.API.pay.StartOrderRequest();req.id=id;req.amount=amount;this.send(req)};paySender.prototype.FinishOrder=function(orderId,result){if(!this.isLoginOver){var item=new lastOrderForFinish();item.orderId=orderId;item.result=result;this.finishList.push(item);return}var req=new Proto.API.pay.FinishOrderRequest();req.orderId=orderId;req.result=result;this.send(req)};paySender.prototype.FinishOrderForLast=function(){this.isLoginOver=true;if(this.finishList.length>0){for(var index=0;index<this.finishList.length;index++){this.FinishOrder(this.finishList[index].orderId,this.finishList[index].result)}this.finishList=new Array()}};return paySender}(Games.ProtoSender));Games.paySender=paySender;var lastOrderForFinish=(function(){function lastOrderForFinish(){}return lastOrderForFinish}());Games.lastOrderForFinish=lastOrderForFinish})(Games||(Games={}));var Games;(function(Games){var progressBoxHandler=(function(_super){__extends(progressBoxHandler,_super);function progressBoxHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.progressBox;return _this}progressBoxHandler.prototype.GetReward=function(msg){if(msg){var data=Game.moduleModel.progressBox.getProgressBoxDataByUUid(msg.uuid);if(data){var config=Game.config.complete.getConfig(data.id*1000+msg.gear);if(config){Game.system.openAwardsAlert(config.reward,Games.TEXT.OrderRewardTitle)}if(data.id==EProgressBoxId.manageOrder){Games.Static.Instance.onUserorbit("order",config.completion+"&"+config.id,"award");Games.Static.Instance.onResourceoutput(config.reward,"orderAward",config.id.toString())}}}};return progressBoxHandler}(Games.ProtoHandler));Games.progressBoxHandler=progressBoxHandler})(Games||(Games={}));var Games;(function(Games){var progressBoxSender=(function(_super){__extends(progressBoxSender,_super);function progressBoxSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.progressBox;return _this}progressBoxSender.prototype.GetReward=function(uuid,gear){var req=new Proto.API.progressBox.GetRewardRequest();req.uuid=uuid;req.gear=gear;this.send(req)};return progressBoxSender}(Games.ProtoSender));Games.progressBoxSender=progressBoxSender})(Games||(Games={}));var Games;(function(Games){var rankHandler=(function(_super){__extends(rankHandler,_super);function rankHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.rank;return _this}rankHandler.prototype.GetOscarData=function(msg){Game.moduleModel.oscar.OnOscarDataUpdate()};rankHandler.prototype.GetOscarReward=function(msg){var dropList=msg.dropout;if(dropList&&dropList.length>0){dropList=dropList.sort(function(a,b){return a.itemId-b.itemId});Game.system.getItemText(dropList,function(){for(var index=0;index<dropList.length;index++){var item=dropList[index];if(Game.config.item.getType(item.itemId)==14){Game.moduleModel.street.UpdateStreetCup(item.amount)}}})}};rankHandler.prototype.ChoseTheater=function(msg){};rankHandler.prototype.GetStreetReward=function(msg){var dropList=msg.dropout;var list=[];for(var index=0;index<dropList.length;index++){var element=dropList[index];var item=new DTItemNum();item.itemId=element.itemId;item.itemNum=element.amount;list.push(item)}Game.system.getRewardText(list,Games.TEXT.MarketReward,0)};rankHandler.prototype.GetSelfList=function(msg){Game.moduleModel.rank.UpdateSelfList(msg.data)};rankHandler.prototype.GetServerRankList=function(msg){Game.moduleModel.rank.UpdateServerRankList(msg)};rankHandler.prototype.GetGroupRankList=function(msg){Game.moduleModel.rank.UpdateGroupRankList(msg)};rankHandler.prototype.GetGroupMovieRankList=function(msg){Game.moduleModel.rank.UpdateGroupMovieRankList(msg)};rankHandler.prototype.GetMovieShortData=function(msg){Game.moduleModel.rank.UpdateMovieShortData(msg.data)};rankHandler.prototype.GetPlayerShortData=function(msg){Game.moduleModel.rank.UpdatePlayerShortData(msg.data);Game.moduleModel.cooperation.sReqOtherInf.dispatch(msg)};rankHandler.prototype.GetServerListReward=function(msg){var dropList=msg.dropout;var list=[];for(var index=0;index<dropList.length;index++){var element=dropList[index];var item=new DTItemNum();item.itemId=element.itemId;item.itemNum=element.amount;list.push(item)}Game.system.getRewardText(list,Games.TEXT.MarketReward,0);var rewardId=0;if(list.length>0){rewardId=list[0].itemId}Games.Static.Instance.onUserorbit("rank",User.info.stall+"&"+Game.moduleModel.rank.rankInfo.lastGroupId+"&"+Game.moduleModel.rank.rankInfo.lastRank+"&"+rewardId,"end")};rankHandler.prototype.ChangeServerName=function(msg){};return rankHandler}(Games.ProtoHandler));Games.rankHandler=rankHandler})(Games||(Games={}));var Games;(function(Games){var rankSender=(function(_super){__extends(rankSender,_super);function rankSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.rank;return _this}rankSender.prototype.GetSelfList=function(){var req=new Proto.API.rank.GetSelfListRequest();this.send(req)};rankSender.prototype.GetServerRankList=function(){var req=new Proto.API.rank.GetServerRankListRequest();this.send(req)};rankSender.prototype.GetGroupRankList=function(){var req=new Proto.API.rank.GetGroupRankListRequest();this.send(req)};rankSender.prototype.GetGroupMovieRankList=function(){var req=new Proto.API.rank.GetGroupMovieRankListRequest();this.send(req)};rankSender.prototype.GetMovieShortData=function(uuid){var req=new Proto.API.rank.GetMovieShortDataRequest();req.uuid=uuid;this.send(req)};rankSender.prototype.GetPlayerShortData=function(userId){var req=new Proto.API.rank.GetPlayerShortDataRequest();req.userId=userId;this.send(req)};rankSender.prototype.GetServerListReward=function(uuid){var req=new Proto.API.rank.GetServerListRewardRequest();req.uuid=uuid;this.send(req)};rankSender.prototype.ChangeServerName=function(uuid,name){var req=new Proto.API.rank.ChangeServerNameRequest();req.uuid=uuid;req.name=name;this.send(req)};rankSender.prototype.GetOscarData=function(){var req=new Proto.API.rank.GetOscarDataRequest();this.send(req)};rankSender.prototype.GetOscarReward=function(type){var req=new Proto.API.rank.GetOscarRewardRequest();req.type=type;this.send(req)};rankSender.prototype.ChoseTheater=function(theaterId){var req=new Proto.API.rank.ChoseTheaterRequest();req.theaterId=theaterId;this.send(req);var cfg=Game.config.cinema.getConfig(theaterId);if(cfg){Games.Static.Instance.onUserorbit("cinema",format("{0}&{1}&{2}",cfg.level,cfg.id,cfg.sign_level),"sign")}};rankSender.prototype.GetStreetReward=function(type){var req=new Proto.API.rank.GetStreetRewardRequest();req.type=type;this.send(req)};return rankSender}(Games.ProtoSender));Games.rankSender=rankSender})(Games||(Games={}));var Games;(function(Games){var secretaryHandler=(function(_super){__extends(secretaryHandler,_super);function secretaryHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.secretary;return _this}secretaryHandler.prototype.GetDailyReward=function(msg){var config=Game.config.secretaryGift.getConfig(1001);if(config){Game.system.getItemText(config.items)}};secretaryHandler.prototype.OpenSecretary=function(msg){};secretaryHandler.prototype.ApplyMovieLicence=function(msg){};secretaryHandler.prototype.RewardMovieLicence=function(msg){Game.moduleModel.secretary.sGetLicenseUpdate.dispatch()};return secretaryHandler}(Games.ProtoHandler));Games.secretaryHandler=secretaryHandler})(Games||(Games={}));var Games;(function(Games){var secretarySender=(function(_super){__extends(secretarySender,_super);function secretarySender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.secretary;return _this}secretarySender.prototype.GetDailyReward=function(){var req=new Proto.API.secretary.GetDailyRewardRequest();this.send(req)};secretarySender.prototype.OpenSecretary=function(key,type){var req=new Proto.API.secretary.OpenSecretaryRequest();req.key=key;req.type=type;this.send(req)};secretarySender.prototype.ApplyMovieLicence=function(){var req=new Proto.API.secretary.ApplyMovieLicenceRequest();this.send(req)};secretarySender.prototype.RewardMovieLicence=function(){var req=new Proto.API.secretary.RewardMovieLicenceRequest();this.send(req)};return secretarySender}(Games.ProtoSender));Games.secretarySender=secretarySender})(Games||(Games={}));var Games;(function(Games){var sevenAddUpHandler=(function(_super){__extends(sevenAddUpHandler,_super);function sevenAddUpHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.sevenAddUp;return _this}sevenAddUpHandler.prototype.GetReward=function(msg){Game.moduleModel.activity.handlerSevenGet(msg)};sevenAddUpHandler.prototype.Touch=function(msg){};return sevenAddUpHandler}(Games.ProtoHandler));Games.sevenAddUpHandler=sevenAddUpHandler})(Games||(Games={}));var Games;(function(Games){var sevenAddUpSender=(function(_super){__extends(sevenAddUpSender,_super);function sevenAddUpSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.sevenAddUp;return _this}sevenAddUpSender.prototype.GetReward=function(uuid,gear){var req=new Proto.API.sevenAddUp.GetRewardRequest();req.uuid=uuid;req.gear=gear;this.send(req)};sevenAddUpSender.prototype.Touch=function(){var req=new Proto.API.sevenAddUp.TouchRequest();this.send(req)};return sevenAddUpSender}(Games.ProtoSender));Games.sevenAddUpSender=sevenAddUpSender})(Games||(Games={}));var Games;(function(Games){var smallTargetHandler=(function(_super){__extends(smallTargetHandler,_super);function smallTargetHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.smallTarget;return _this}smallTargetHandler.prototype.LevGift=function(msg){Game.moduleModel.targetPackage.sGetLevelGiftSignal.dispatch(msg.giftId);Game.event.dispatch(GameEventKey.GameEventKey_UnlockChange,Games.UnlockID.LevelGift)};smallTargetHandler.prototype.CupGift=function(msg){Game.moduleModel.targetPackage.sGetCupGiftSignal.dispatch(msg.giftId);Game.event.dispatch(GameEventKey.GameEventKey_UnlockChange,Games.UnlockID.CupGift)};smallTargetHandler.prototype.GetCupMail=function(msg){};return smallTargetHandler}(Games.ProtoHandler));Games.smallTargetHandler=smallTargetHandler})(Games||(Games={}));var Games;(function(Games){var smallTargetSender=(function(_super){__extends(smallTargetSender,_super);function smallTargetSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.smallTarget;return _this}smallTargetSender.prototype.LevGift=function(){var req=new Proto.API.smallTarget.LevGiftRequest();this.send(req)};smallTargetSender.prototype.CupGift=function(){var req=new Proto.API.smallTarget.CupGiftRequest();this.send(req)};smallTargetSender.prototype.GetCupMail=function(){var req=new Proto.API.smallTarget.GetCupMailRequest();this.send(req)};return smallTargetSender}(Games.ProtoSender));Games.smallTargetSender=smallTargetSender})(Games||(Games={}));var Games;(function(Games){var storyHandler=(function(_super){__extends(storyHandler,_super);function storyHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.story;return _this}storyHandler.prototype.findStory=function(msg){};storyHandler.prototype.cleanFindStory=function(msg){if(msg.result==0){Game.system.toastMsg(MsgKey.story_cd_success)}};storyHandler.prototype.getReward=function(msg){if(msg.result==0){var config=Game.config.storyStackSort.getConfig(msg.storySuitId);if(config){var items=config.rewards;Game.system.openAwardsAlert(items,Games.TEXT.StoryRewardTitle)}}};storyHandler.prototype.GetMessage=function(msg){};storyHandler.prototype.SetMessage=function(msg){};return storyHandler}(Games.ProtoHandler));Games.storyHandler=storyHandler})(Games||(Games={}));var Games;(function(Games){var storySender=(function(_super){__extends(storySender,_super);function storySender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.story;return _this}storySender.prototype.findStory=function(){var req=new Proto.API.story.findStoryRequest();this.send(req)};storySender.prototype.cleanFindStory=function(){var req=new Proto.API.story.cleanFindStoryRequest();this.send(req)};storySender.prototype.getReward=function(storySuitId){var req=new Proto.API.story.getRewardRequest();req.storySuitId=storySuitId;this.send(req)};storySender.prototype.getMessage=function(storyId){var req=new Proto.API.story.GetMessageRequest();req.stroyId=storyId;this.send(req)};storySender.prototype.setMessage=function(storyId,content){var req=new Proto.API.story.SetMessageRequest();req.stroyId=storyId;req.content=content;this.send(req)};storySender.prototype.GetMessage=function(stroyId){var req=new Proto.API.story.GetMessageRequest();req.stroyId=stroyId;this.send(req)};storySender.prototype.SetMessage=function(stroyId,content){var req=new Proto.API.story.SetMessageRequest();req.stroyId=stroyId;req.content=content;this.send(req)};return storySender}(Games.ProtoSender));Games.storySender=storySender})(Games||(Games={}));var Games;(function(Games){var taskHandler=(function(_super){__extends(taskHandler,_super);function taskHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.task;return _this}taskHandler.prototype.reward=function(msg){if(msg&&msg.dropout){Game.system.openAwardsAlertByProtoItems(msg.dropout,Games.TEXT.OrderRewardTitle,function(){var addFans=0;for(var index=0;index<msg.dropout.length;index++){var reward=msg.dropout[index];if(reward.itemId==5){addFans=reward.amount}}function triggerStory(){var data=Game.moduleModel.task.getDelTaskDataByUUid(msg.tId);if(data&&data.isMainTask){Game.story.triggerPlayStoryByType(Games.StoryTriggerType.FinishMainTask,data.id,Handler.create(null,function(){if(addFans>0){Game.moduleModel.func.checkLevelUp()}Game.moduleModel.func.checkMainTask();if(data.id==GlobalConfig.getValue(GlobalKey.maintask_complete_end)){Games.PopupManage.getInstance().pushMenu(Games.MenuId.GuideComplete)}}),true)}else{if(addFans>0){Game.moduleModel.func.checkLevelUp()}}}if(addFans>0){Game.system.addFansText(addFans,Handler.create(null,function(){triggerStory()}),Games.TEXT.MainTaskAddFansTip,3)}else{triggerStory()}},true)}};return taskHandler}(Games.ProtoHandler));Games.taskHandler=taskHandler})(Games||(Games={}));var Games;(function(Games){var taskSender=(function(_super){__extends(taskSender,_super);function taskSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.task;return _this}taskSender.prototype.reward=function(tId){var req=new Proto.API.task.rewardRequest();req.tId=tId;this.send(req)};return taskSender}(Games.ProtoSender));Games.taskSender=taskSender})(Games||(Games={}));var Games;(function(Games){var testHandler=(function(_super){__extends(testHandler,_super);function testHandler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.test;return _this}testHandler.prototype.AddItem=function(msg){};testHandler.prototype.AddFans=function(msg){};testHandler.prototype.AddExpect=function(msg){};testHandler.prototype.DeleteMovie=function(msg){};testHandler.prototype.AddStory=function(msg){};testHandler.prototype.AddActorSkillExp=function(msg){};testHandler.prototype.debug=function(msg){};testHandler.prototype.AddStoryProgress=function(msg){};testHandler.prototype.AddGift=function(msg){};testHandler.prototype.SetBlockLevel=function(msg){};testHandler.prototype.RefreshTime=function(msg){};testHandler.prototype.UpdateOscar=function(msg){};testHandler.prototype.PutOrderItems=function(msg){};testHandler.prototype.setAllStoryGold=function(msg){};testHandler.prototype.SetSecretaryStatus=function(msg){};testHandler.prototype.CleanSecretaryTimes=function(msg){};testHandler.prototype.GetRechargeGift=function(msg){};testHandler.prototype.GetAutoCooperate=function(msg){};testHandler.prototype.LockAllProduce=function(msg){};testHandler.prototype.GotoCity=function(msg){};testHandler.prototype.AddStarStory=function(msg){};testHandler.prototype.GotoCityBefore=function(msg){};testHandler.prototype.FinishGuide=function(msg){};testHandler.prototype.AddManage=function(msg){};testHandler.prototype.SetAllActorLv=function(msg){};return testHandler}(Games.ProtoHandler));Games.testHandler=testHandler})(Games||(Games={}));var Games;(function(Games){var testSender=(function(_super){__extends(testSender,_super);function testSender(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleName=Games.ProtoModuleNames.test;return _this}testSender.prototype.AddItem=function(itemId,amount){var reqData=new Proto.API.test.AddItemRequest();reqData.itemId=itemId;reqData.amount=amount;this.send(reqData);if(Game.config.item.getType(itemId)==14){Game.moduleModel.street.UpdateStreetCup(amount)}};testSender.prototype.BuildRoom=function(floor,roomType){var reqData=new Proto.API.CinemaBuild.BuildRoomRequest();reqData.floor=floor;reqData.roomType=roomType;this.send(reqData)};testSender.prototype.UpgradeRoom=function(roomId){var reqData=new Proto.API.CinemaBuild.UpgradeRoomRequest();reqData.roomId=roomId;this.send(reqData)};testSender.prototype.AddFans=function(amount){var reqData=new Proto.API.test.AddFansRequest();reqData.amount=amount;this.send(reqData)};testSender.prototype.AddSkillExp=function(actorId,amount){var reqData=new Proto.API.test.AddActorSkillExpRequest();reqData.amount=amount;reqData.actorId=actorId;this.send(reqData)};testSender.prototype.AddExpect=function(amount){var req=new Proto.API.test.AddExpectRequest();req.amount=amount;this.send(req)};testSender.prototype.DeleteMovie=function(uuid){var req=new Proto.API.test.DeleteMovieRequest();req.uuid=uuid;this.send(req)};testSender.prototype.AddStory=function(storyId){var req=new Proto.API.test.AddStoryRequest();req.storyId=storyId;this.send(req)};testSender.prototype.AddActorSkillExp=function(actorId,amount){var req=new Proto.API.test.AddActorSkillExpRequest();req.actorId=actorId;req.amount=amount;this.send(req)};testSender.prototype.debug=function(num){var req=new Proto.API.test.debugRequest();req.num=num;this.send(req)};testSender.prototype.AddStoryProgress=function(storyId,index){var req=new Proto.API.test.AddStoryProgressRequest();req.index=index;req.storyId=storyId;this.send(req)};testSender.prototype.AddGift=function(giftUuid,giftId,targetId,startTime,endTime,total){var req=new Proto.API.test.AddGiftRequest();req.giftUuid=giftUuid;req.giftId=giftId;req.targetId=targetId;req.startTime=startTime;req.endTime=endTime;req.total=total;this.send(req)};testSender.prototype.SetBlockLevel=function(level){var req=new Proto.API.test.SetBlockLevelRequest();req.level=level;this.send(req)};testSender.prototype.RefreshTime=function(type){var req=new Proto.API.test.RefreshTimeRequest();req.type=type;this.send(req)};testSender.prototype.addStory=function(id){var req=new Proto.API.test.AddStoryRequest();req.storyId=id;this.send(req)};testSender.prototype.UpdateOscar=function(){var req=new Proto.API.test.UpdateOscarRequest();this.send(req)};testSender.prototype.PutOrderItems=function(uuid){var req=new Proto.API.test.PutOrderItemsRequest();req.uuid=uuid;this.send(req)};testSender.prototype.setAllStoryGold=function(){var req=new Proto.API.test.setAllStoryGoldRequest();this.send(req)};testSender.prototype.SetSecretaryStatus=function(status){var req=new Proto.API.test.SetSecretaryStatusRequest();req.status=status;this.send(req)};testSender.prototype.CleanSecretaryTimes=function(){var req=new Proto.API.test.CleanSecretaryTimesRequest();this.send(req)};testSender.prototype.GetRechargeGift=function(){var req=new Proto.API.test.GetRechargeGiftRequest();this.send(req)};testSender.prototype.GetAutoCooperate=function(){var req=new Proto.API.test.GetAutoCooperateRequest();this.send(req)};testSender.prototype.LockAllProduce=function(){var req=new Proto.API.test.LockAllProduceRequest();this.send(req)};testSender.prototype.GotoCity=function(id){var req=new Proto.API.test.GotoCityRequest();req.id=id;this.send(req)};testSender.prototype.AddStarStory=function(starId,amount){var req=new Proto.API.test.AddStarStoryRequest();req.starId=starId;req.amount=amount;this.send(req)};testSender.prototype.GotoCityBefore=function(id){var req=new Proto.API.test.GotoCityBeforeRequest();req.id=id;this.send(req)};testSender.prototype.FinishGuide=function(){var req=new Proto.API.test.FinishGuideRequest();this.send(req)};testSender.prototype.AddManage=function(){var req=new Proto.API.test.AddManageRequest();this.send(req)};testSender.prototype.SetAllActorLv=function(){var req=new Proto.API.test.SetAllActorLvRequest();this.send(req)};return testSender}(Games.ProtoSender));Games.testSender=testSender})(Games||(Games={}));var Proto;(function(Proto){var SS;(function(SS){var DBBase=(function(){function DBBase(){}return DBBase}());SS.DBBase=DBBase;var DBObject=(function(_super){__extends(DBObject,_super);function DBObject(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.uuid="";return _this}return DBObject}(DBBase));SS.DBObject=DBObject;var ShardDBObject=(function(_super){__extends(ShardDBObject,_super);function ShardDBObject(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.uuid="";_this.entityId=0;return _this}return ShardDBObject}(DBBase));SS.ShardDBObject=ShardDBObject;var UsrData=(function(_super){__extends(UsrData,_super);function UsrData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.usrName="";_this.channel="";_this.registerTime=0;_this.registerIP="";_this.lastLoginTime=0;_this.lastLoginIP="";_this.usrState=0;_this.usrRemark="";_this.usrFreezeTime=0;return _this}return UsrData}(ShardDBObject));SS.UsrData=UsrData;var RoomInfo=(function(){function RoomInfo(){this.roomId=0;this.floor=0}return RoomInfo}());SS.RoomInfo=RoomInfo;var GameInfo=(function(_super){__extends(GameInfo,_super);function GameInfo(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.name="";_this.portrait=0;_this.sex=0;_this.level=0;_this.fans=0;_this.cup=0;_this.stall=0;_this.vipLevel=0;_this.vipExp=0;_this.extendFloor=0;_this.buildRoomInfo=null;_this.maxActor=0;_this.maxHideActor=0;_this.noseIntoNum=0;_this.noseIntoTime=0;_this.resetNoseIntoTime=0;_this.noseIntoActorEffectTime=0;_this.noseIntoActorList=null;_this.expected=0;_this.daysCultivateCount=0;_this.resetDaysCultivateCountTime=0;_this.dailyTaskUpdateTime=0;_this.achievementTaskUpdateTime=0;_this.mallLimitDailyUpdateTime=0;_this.mallLimitWeeklyUpdateTime=0;_this.findStoryTime=0;_this.lastTimeFindStory=0;_this.lastResetTime=0;_this.theaterIds=null;_this.lastGetStreetRewardTimt=0;_this.lastSendGroupRankListTime=0;_this.lastSendGroupMovieRankListTime=0;_this.sendGroupRankListTimes=0;_this.initActorId=0;return _this}return GameInfo}(ShardDBObject));SS.GameInfo=GameInfo;var GameInfoExt=(function(_super){__extends(GameInfoExt,_super);function GameInfoExt(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.perSignature="";_this.totalFilm=0;_this.numBoxOffice=0;_this.numOrders=0;_this.numProductionLine=0;_this.numOfficialBusiness=0;_this.numMeeting=0;_this.numVisit=0;_this.numGroupBest=0;_this.numBestArtDirection=0;_this.numBestPerformer=0;_this.numBestPublicPraise=0;_this.numGoldenOliveAward=0;_this.bestWordOfMouth=0;_this.bestWordOfMouthFilm="";_this.bestBoxOffice=0;_this.bestBoxOfficeFilm="";_this.numNarrativeFilm=0;_this.numActionFilm=0;_this.numAffectionalFilm=0;_this.numCartoonFilm=0;_this.numComedyFilm=0;_this.numMusicalFilm=0;_this.numHorrorFilm=0;_this.numSuspense=0;_this.portraitList=null;return _this}return GameInfoExt}(ShardDBObject));SS.GameInfoExt=GameInfoExt;var ItemDesc=(function(){function ItemDesc(){this.itemId=0;this.amount=0}return ItemDesc}());SS.ItemDesc=ItemDesc;var GMMsgLog=(function(_super){__extends(GMMsgLog,_super);function GMMsgLog(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.messageId=0;_this.publishTypeCode=0;_this.receiveCount=0;_this.receiveTime=0;return _this}return GMMsgLog}(ShardDBObject));SS.GMMsgLog=GMMsgLog;var OrderData=(function(_super){__extends(OrderData,_super);function OrderData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.entityId=0;_this.orderId=0;_this.outerOrderId="";_this.productId="";_this.productNum=0;_this.createTime=0;_this.paymentTime=0;_this.handleCount=0;return _this}return OrderData}(DBObject));SS.OrderData=OrderData;var Notice=(function(){function Notice(){this.title="";this.content="";this.messageDetailUrl="";this.itemList=null}return Notice}());SS.Notice=Notice;var MailDesc=(function(){function MailDesc(){this.title="";this.content="";this.itemList=null;this.createTime=0;this.endTime=0;this.IsRewardGot=false;this.isNew=false}return MailDesc}());SS.MailDesc=MailDesc;var ItemData=(function(_super){__extends(ItemData,_super);function ItemData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.itemId=0;_this.amount=0;_this.createTime=0;return _this}return ItemData}(ShardDBObject));SS.ItemData=ItemData;var StorySuitData=(function(_super){__extends(StorySuitData,_super);function StorySuitData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.storySuitId=0;_this.progress=0;_this.progress2=0;_this.status=0;return _this}return StorySuitData}(ShardDBObject));SS.StorySuitData=StorySuitData;var StoryData=(function(_super){__extends(StoryData,_super);function StoryData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.storyId=0;_this.storyProgressInfo=null;_this.status=0;_this.progress=0;_this.maxScore=0;_this.shootLastTime=0;return _this}return StoryData}(ShardDBObject));SS.StoryData=StoryData;var StoryProgress=(function(){function StoryProgress(){this.id=0;this.progress=0;this.status=0}return StoryProgress}());SS.StoryProgress=StoryProgress;var Assets=(function(){function Assets(){this.giveType=0;this.giveLevel=0;this.giveItemList=null;this.extraGiveACLimit=0}return Assets}());SS.Assets=Assets;var shootInfo=(function(){function shootInfo(){this.type=0;this.proficiencyExp=0;this.proficiencyLevel=0}return shootInfo}());SS.shootInfo=shootInfo;var skillTriggerCondition=(function(){function skillTriggerCondition(){this.type=0;this.value=0}return skillTriggerCondition}());SS.skillTriggerCondition=skillTriggerCondition;var skillInfo=(function(){function skillInfo(){this.skillId=0;this.isEffect=false;this.triggerCondition=null}return skillInfo}());SS.skillInfo=skillInfo;var ActorData=(function(_super){__extends(ActorData,_super);function ActorData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.actorId=0;_this.name="";_this.hide=false;_this.level=0;_this.levelExp=0;_this.payCheck=0;_this.stamina=0;_this.staminaLimit=0;_this.LoyaltyExp=0;_this.LoyaltyLevel=0;_this.cultivateCount=0;_this.cultivateCountLimit=0;_this.giveAssetsCount=0;_this.giveAssetsCountLimit=0;_this.giveAssetsList=null;_this.skillExp=0;_this.skillList=null;_this.shootTypeList=null;_this.spectacle=0;_this.perform=0;_this.plot=0;_this.art=0;_this.boxOfficeCount=0;_this.cupCount=0;_this.movieCount=0;_this.entertainment=0;_this.produceId=0;_this.assistantInfos=null;return _this}return ActorData}(ShardDBObject));SS.ActorData=ActorData;var AssistantInfo=(function(){function AssistantInfo(){this.id=0;this.level=0;this.actorSign=0}return AssistantInfo}());SS.AssistantInfo=AssistantInfo;var CityData=(function(_super){__extends(CityData,_super);function CityData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.lastCity=0;_this.headquarters=0;_this.ambassador=null;_this.maxGold=0;_this.maxFans=0;_this.speedGold=0;_this.speedFans=0;_this.lastGold=0;_this.lastFans=0;_this.lastDropTimestamp=0;_this.lastTime=0;_this.dropList=null;_this.lastArea=0;_this.lastAreaProgress=0;_this.propagandaActor=0;_this.roadShowFlag=false;return _this}return CityData}(ShardDBObject));SS.CityData=CityData;var skillEffectInfo=(function(){function skillEffectInfo(){this.actId=0;this.value=0}return skillEffectInfo}());SS.skillEffectInfo=skillEffectInfo;var ActorSkillEffect=(function(_super){__extends(ActorSkillEffect,_super);function ActorSkillEffect(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.getGoldSpeed=0;_this.productionEarnings=0;_this.actorPaycheck=null;_this.boxOfficeEarnings=null;_this.cityGetGoldTime=0;_this.upgradeGoldCost=null;_this.shootTotalAttrIncrease=null;return _this}return ActorSkillEffect}(ShardDBObject));SS.ActorSkillEffect=ActorSkillEffect;var TempData=(function(_super){__extends(TempData,_super);function TempData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.lastResetTime=0;return _this}return TempData}(ShardDBObject));SS.TempData=TempData;var MovieData=(function(_super){__extends(MovieData,_super);function MovieData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.movieId=0;_this.name="";_this.state=0;_this.data=null;_this.movieCost=null;_this.expected=null;_this.battleData=null;_this.battleDataEx=null;_this.type=0;_this.actorShootType=null;_this.isTired=false;_this.isGetStoryGoals=false;_this.mediaVisit=null;_this.mExpected=0;_this.mediaCommend=0;_this.mediaCommendArr=null;_this.praise=0;_this.premiereBoxOffice=0;_this.extBoxOffice=0;_this.publicPraise=0;_this.runDays=null;_this.totalBoxOffice=0;_this.totalMovieCost=0;_this.evaluationCon=0;_this.attribute=null;_this.maxAttribute=null;_this.avrAttribute=null;_this.dropCount=0;_this.boxOfficeEvaluation=0;_this.extendCity=0;_this.attentionValue=0;_this.attentionProgress=0;_this.dropItemList=null;_this.contineTransceiver=0;_this.startTime=0;_this.lastTime=0;return _this}return MovieData}(ShardDBObject));SS.MovieData=MovieData;var BattleData=(function(){function BattleData(){this.actorId=0;this.propertyId=0;this.value=0}return BattleData}());SS.BattleData=BattleData;var CityGainsInfo=(function(){function CityGainsInfo(){this.itemId=0;this.speed=0;this.limit=0;this.baseNum=0}return CityGainsInfo}());SS.CityGainsInfo=CityGainsInfo;var MediaVisitDesc=(function(){function MediaVisitDesc(){this.mediaId=0;this.level=0;this.bAccept=false}return MediaVisitDesc}());SS.MediaVisitDesc=MediaVisitDesc;var ManageOrderData=(function(_super){__extends(ManageOrderData,_super);function ManageOrderData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.orderId=0;_this.items=null;_this.position=0;_this.lastTime=0;_this.delFlag=false;return _this}return ManageOrderData}(ShardDBObject));SS.ManageOrderData=ManageOrderData;var OrderItems=(function(){function OrderItems(){this.itemId=0;this.amount=0;this.portrait=0}return OrderItems}());SS.OrderItems=OrderItems;var ProgressBoxData=(function(_super){__extends(ProgressBoxData,_super);function ProgressBoxData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.moduleId=0;_this.progress=0;_this.staus=0;_this.lastTime=0;return _this}return ProgressBoxData}(ShardDBObject));SS.ProgressBoxData=ProgressBoxData;var ManageProduceData=(function(_super){__extends(ManageProduceData,_super);function ManageProduceData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.produceId=0;_this.hadNum=0;_this.actId=0;_this.level=0;_this.skills=null;_this.randomNums=null;_this.produceNum=0;_this.lastTime=0;_this.hadProduceTimes=0;return _this}return ManageProduceData}(ShardDBObject));SS.ManageProduceData=ManageProduceData;var SkillLevel=(function(){function SkillLevel(){this.skillId=0;this.level=0}return SkillLevel}());SS.SkillLevel=SkillLevel;var AttrChangeInfo=(function(){function AttrChangeInfo(){this.attrId=0;this.value=0}return AttrChangeInfo}());SS.AttrChangeInfo=AttrChangeInfo;var MovieLicenceResetTimeData=(function(_super){__extends(MovieLicenceResetTimeData,_super);function MovieLicenceResetTimeData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.lastResetTime=0;_this.dailyCount=0;_this.lastUpdateTime=0;_this.cd=0;return _this}return MovieLicenceResetTimeData}(ShardDBObject));SS.MovieLicenceResetTimeData=MovieLicenceResetTimeData;var ManageBusinessData=(function(_super){__extends(ManageBusinessData,_super);function ManageBusinessData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.businessId=0;_this.dailyCount=0;_this.lineLimit=0;_this.lastUpdateTime=0;_this.lastResetTime=0;return _this}return ManageBusinessData}(ShardDBObject));SS.ManageBusinessData=ManageBusinessData;var ManageVisitData=(function(_super){__extends(ManageVisitData,_super);function ManageVisitData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.visitId=0;_this.actId=0;_this.startTime=0;_this.lastTime=0;_this.lineLimit=0;_this.intervalTime=0;_this.isReceptior=false;return _this}return ManageVisitData}(ShardDBObject));SS.ManageVisitData=ManageVisitData;var StoryMessageDesc=(function(){function StoryMessageDesc(){this.name="";this.userId=0;this.portrait=0;this.sex=0;this.level=0;this.timestamp=0;this.message=""}return StoryMessageDesc}());SS.StoryMessageDesc=StoryMessageDesc;var StoryMessage=(function(_super){__extends(StoryMessage,_super);function StoryMessage(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.storyId=0;_this.message=null;return _this}return StoryMessage}(DBObject));SS.StoryMessage=StoryMessage;var ActorShortDesc=(function(){function ActorShortDesc(){this.actorId=0;this.name=""}return ActorShortDesc}());SS.ActorShortDesc=ActorShortDesc;var MovieShortData=(function(){function MovieShortData(){this.userId=0;this.uuid="";this.movieId=0;this.name="";this.data=null;this.type=0;this.totalBoxOffice=0;this.boxOfficeEvaluation=0;this.mediaCommend=0;this.publicPraise=0}return MovieShortData}());SS.MovieShortData=MovieShortData;var BestMovieDesc=(function(){function BestMovieDesc(){this.movieUuid="";this.movieId=0;this.name="";this.totalBoxOffice=0;this.boxOfficeEvaluation=0}return BestMovieDesc}());SS.BestMovieDesc=BestMovieDesc;var PlayerShortData=(function(){function PlayerShortData(){this.userId=0;this.portrait=0;this.sex=0;this.name="";this.level=0;this.blockLevel=0;this.perSignature="";this.city=0;this.numActor=0;this.numBuilding=0;this.boxOfficeEvaluation=null;this.dailyBestMovie="";this.bestMovie=null}return PlayerShortData}());SS.PlayerShortData=PlayerShortData;var ServerListDesc=(function(){function ServerListDesc(){this.portrait=0;this.sex=0;this.name="";this.userId=0;this.movieUuid="";this.movieId=0;this.movieName="";this.totalBoxOffice=0}return ServerListDesc}());SS.ServerListDesc=ServerListDesc;var GroupListDesc=(function(){function GroupListDesc(){this.portrait=0;this.sex=0;this.name="";this.userId=0;this.totalBoxOffice=0}return GroupListDesc}());SS.GroupListDesc=GroupListDesc;var GroupMovieListDesc=(function(){function GroupMovieListDesc(){this.name="";this.movieUuid="";this.movieId=0;this.movieName="";this.userId=0;this.totalBoxOffice=0}return GroupMovieListDesc}());SS.GroupMovieListDesc=GroupMovieListDesc;var SelfRankListDesc=(function(){function SelfRankListDesc(){this.MainRank=0;this.groupList=0;this.serverName=""}return SelfRankListDesc}());SS.SelfRankListDesc=SelfRankListDesc;var RankListData=(function(_super){__extends(RankListData,_super);function RankListData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.entityId=0;_this.serverId=0;_this.serverUuid="";_this.groupId=0;_this.lastGroupId=0;_this.lastRank=0;_this.lastWeakRank=0;_this.propaganda_department=0;_this.isGetLastReward=false;_this.isChangeServerName=false;_this.big_sell=0;_this.totalBoxOffice=0;_this.totalBoxOfficeRank=0;_this.historyBestTotalBoxOffice=0;_this.historyBestTotalBoxOfficeRank=0;_this.historyBestTotalBexOfficeBlockLevel=0;_this.historyBestTotalBexOfficeTotal=0;_this.historyIsNew=false;_this.movies=0;_this.bestBoxOffice=0;_this.bestBoxOfficeName="";_this.bestBoxOfficeRank=0;_this.rewardFlags=null;_this.isNew=false;return _this}return RankListData}(DBObject));SS.RankListData=RankListData;var TaskData=(function(_super){__extends(TaskData,_super);function TaskData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.cid=0;_this.type=0;_this.progress=0;_this.state=0;return _this}return TaskData}(ShardDBObject));SS.TaskData=TaskData;var MallItemLimitData=(function(_super){__extends(MallItemLimitData,_super);function MallItemLimitData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.id=0;_this.type=0;_this.amount=0;return _this}return MallItemLimitData}(ShardDBObject));SS.MallItemLimitData=MallItemLimitData;var MailData=(function(_super){__extends(MailData,_super);function MailData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.title="";_this.content="";_this.itemList=null;_this.createTime=0;_this.endTime=0;_this.IsRewardGot=false;_this.isNew=false;return _this}return MailData}(ShardDBObject));SS.MailData=MailData;var ManageMeetingData=(function(_super){__extends(ManageMeetingData,_super);function ManageMeetingData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.meetID=0;_this.randResult=0;_this.lastTime=0;_this.lineLimit=0;_this.intervalTime=0;return _this}return ManageMeetingData}(ShardDBObject));SS.ManageMeetingData=ManageMeetingData;var DanmuItem=(function(){function DanmuItem(){this.id=0;this.name="";this.time=0;this.msg=""}return DanmuItem}());SS.DanmuItem=DanmuItem;var DanmuData=(function(_super){__extends(DanmuData,_super);function DanmuData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.data=null;return _this}return DanmuData}(DBObject));SS.DanmuData=DanmuData;var DailySign=(function(_super){__extends(DailySign,_super);function DailySign(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.count=0;_this.updateTime=0;return _this}return DailySign}(ShardDBObject));SS.DailySign=DailySign;var SecretaryData=(function(_super){__extends(SecretaryData,_super);function SecretaryData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.secretaryType=0;_this.timeList=null;_this.lastTime=0;_this.applyFrequency=0;_this.applyLastTime=0;_this.isApply=false;return _this}return SecretaryData}(ShardDBObject));SS.SecretaryData=SecretaryData;var SecretaryKeyValue=(function(){function SecretaryKeyValue(){this.key=0;this.value=0;this.isOpen=false}return SecretaryKeyValue}());SS.SecretaryKeyValue=SecretaryKeyValue;var SevenAddUpData=(function(_super){__extends(SevenAddUpData,_super);function SevenAddUpData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.progress=0;_this.staus=0;_this.lastTime=0;return _this}return SevenAddUpData}(ShardDBObject));SS.SevenAddUpData=SevenAddUpData;var ActortExerciseData=(function(_super){__extends(ActortExerciseData,_super);function ActortExerciseData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.index=0;_this.actorUuid="";_this.startTime=0;return _this}return ActortExerciseData}(ShardDBObject));SS.ActortExerciseData=ActortExerciseData;var OscarDesc=(function(){function OscarDesc(){this.id=0;this.name="";this.playerName="";this.userId=0}return OscarDesc}());SS.OscarDesc=OscarDesc;var OscarData=(function(){function OscarData(){this.man=null;this.woman=null;this.perform=null;this.art=null;this.publicPraise=null;this.bestMan=0;this.bestWoman=0;this.bestPerform=0;this.bestArt=0;this.bestPublicPraise=0;this.blockLevel=0}return OscarData}());SS.OscarData=OscarData;var PlayerOscarData=(function(){function PlayerOscarData(){this.big_sell=0;this.movies=0}return PlayerOscarData}());SS.PlayerOscarData=PlayerOscarData;var DailyEventItem=(function(){function DailyEventItem(){this.time=0;this.uuid="";this.name=""}return DailyEventItem}());SS.DailyEventItem=DailyEventItem;var DailyEvent=(function(_super){__extends(DailyEvent,_super);function DailyEvent(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.data=null;return _this}return DailyEvent}(ShardDBObject));SS.DailyEvent=DailyEvent;var GuideData=(function(_super){__extends(GuideData,_super);function GuideData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.guide=null;_this.story=null;return _this}return GuideData}(ShardDBObject));SS.GuideData=GuideData;var PlayerCooperateData=(function(_super){__extends(PlayerCooperateData,_super);function PlayerCooperateData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.lastReqTime=0;_this.lastAutoReqTime=0;_this.rewardStatus=0;_this.giveGoldTime=0;_this.giveDollarTime=0;_this.lastTime=0;return _this}return PlayerCooperateData}(ShardDBObject));SS.PlayerCooperateData=PlayerCooperateData;var AccountCooperateData=(function(_super){__extends(AccountCooperateData,_super);function AccountCooperateData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.friendEntityId="";_this.appList=null;_this.weekTimes=0;_this.lastWeek=0;_this.firstCooperate=false;_this.firstACooperate=false;_this.isCaptain=false;_this.isRead=false;return _this}return AccountCooperateData}(DBObject));SS.AccountCooperateData=AccountCooperateData;var ApplyInfo=(function(){function ApplyInfo(){this.entityId="";this.lastTime=0}return ApplyInfo}());SS.ApplyInfo=ApplyInfo;var AutoCooperateData=(function(_super){__extends(AutoCooperateData,_super);function AutoCooperateData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.applyEntityId="";_this.lastTime=0;return _this}return AutoCooperateData}(DBObject));SS.AutoCooperateData=AutoCooperateData;var CooperateTaskData=(function(_super){__extends(CooperateTaskData,_super);function CooperateTaskData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.tasks=null;_this.currentStar=0;_this.progree=0;_this.lastTime=0;return _this}return CooperateTaskData}(DBObject));SS.CooperateTaskData=CooperateTaskData;var Ctask=(function(){function Ctask(){this.star=0;this.progree=0;this.starTasks=null}return Ctask}());SS.Ctask=Ctask;var StarTask=(function(){function StarTask(){this.taskid=0;this.taskType=0;this.itemId=0;this.captainItemNum=0;this.itemNum=0;this.needParam=null;this.progress=0;this.status=0;this.helpUuid="";this.receiveUuid=""}return StarTask}());SS.StarTask=StarTask;var CooperateOrderData=(function(_super){__extends(CooperateOrderData,_super);function CooperateOrderData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.entityId=0;_this.portrait=0;_this.orderUuid="";_this.itemId=0;_this.amount=0;_this.lastTime=0;return _this}return CooperateOrderData}(DBObject));SS.CooperateOrderData=CooperateOrderData;var PlayerLevelUp=(function(){function PlayerLevelUp(){this.old_level=0;this.now_level=0;this.story=null}return PlayerLevelUp}());SS.PlayerLevelUp=PlayerLevelUp;var GoldExchange=(function(){function GoldExchange(){this.count=0}return GoldExchange}());SS.GoldExchange=GoldExchange;var NewMessageInfo=(function(){function NewMessageInfo(){this.num=0;this.type="";this.userMsg=null;this.systemMsg=null}return NewMessageInfo}());SS.NewMessageInfo=NewMessageInfo;var MessageInfo=(function(){function MessageInfo(){this.userId=0;this.name="";this.portrait=0;this.sex=0;this.messageId=0;this.message="";this.time=0}return MessageInfo}());SS.MessageInfo=MessageInfo;var SystemMessage=(function(){function SystemMessage(){this.userId=0;this.messageId=0;this.message=0;this.time=0;this.fieldInfo=null}return SystemMessage}());SS.SystemMessage=SystemMessage;var FieldInfo=(function(){function FieldInfo(){this.type=0;this.text="";this.args=""}return FieldInfo}());SS.FieldInfo=FieldInfo;var PrivateListInfo=(function(){function PrivateListInfo(){this.roomId=0;this.userId=0;this.name="";this.portrait=0;this.sex=0;this.message=null;this.newMsgNum=0}return PrivateListInfo}());SS.PrivateListInfo=PrivateListInfo;var PushMessageInfo=(function(){function PushMessageInfo(){this.roomId=0;this.message=null}return PushMessageInfo}());SS.PushMessageInfo=PushMessageInfo;var RoomMember=(function(){function RoomMember(){this.member=0;this.name="";this.portrait=0;this.sex=0;this.lastRead=0}return RoomMember}());SS.RoomMember=RoomMember;var LevelGiftData=(function(_super){__extends(LevelGiftData,_super);function LevelGiftData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.giftId=0;return _this}return LevelGiftData}(ShardDBObject));SS.LevelGiftData=LevelGiftData;var GetGuideReward=(function(_super){__extends(GetGuideReward,_super);function GetGuideReward(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.staus=0;return _this}return GetGuideReward}(ShardDBObject));SS.GetGuideReward=GetGuideReward;var CupPackage=(function(_super){__extends(CupPackage,_super);function CupPackage(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.giftId=0;_this.process=0;_this.status=0;_this.startTime=0;return _this}return CupPackage}(ShardDBObject));SS.CupPackage=CupPackage;var StoryRefreshData=(function(_super){__extends(StoryRefreshData,_super);function StoryRefreshData(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.dayTime=0;_this.lastTime=0;return _this}return StoryRefreshData}(ShardDBObject));SS.StoryRefreshData=StoryRefreshData})(SS=Proto.SS||(Proto.SS={}))})(Proto||(Proto={}));var HttpComm=frame.comm.HttpComm;var frame;(function(frame){var comm;(function(comm){var HttpChannel=(function(_super){__extends(HttpChannel,_super);function HttpChannel(host,port,useHttps){if(useHttps===void 0){useHttps=false}var _this=_super.call(this)||this;_this._account="";_this._token="";_this._userId=0;_this._http=new comm.HttpComm(host,port,useHttps);return _this}HttpChannel.prototype.destroy=function(){this._http.destroy();this._http=null};HttpChannel.prototype.login=function(account){this._account=account};HttpChannel.prototype.loginRespondHandle=function(rsp){if(rsp&&rsp.OK){}this.event(frame.event.HttpChannelEvent.LOGIN_COMPLETE,rsp)};Object.defineProperty(HttpChannel.prototype,"http",{get:function(){return this._http},enumerable:true,configurable:true});Object.defineProperty(HttpChannel.prototype,"account",{get:function(){return this._account},set:function(value){this._account=value},enumerable:true,configurable:true});Object.defineProperty(HttpChannel.prototype,"token",{get:function(){return this._token},enumerable:true,configurable:true});Object.defineProperty(HttpChannel.prototype,"userId",{get:function(){return this._userId},set:function(value){this._userId=value},enumerable:true,configurable:true});Object.defineProperty(HttpChannel.prototype,"jwt",{get:function(){return this.http.jwt},set:function(jwt){this.http.setJwt(jwt)},enumerable:true,configurable:true});HttpChannel.prototype.recreateHttpRequest=function(){this.http.recreateHttpRequest()};return HttpChannel}(laya.events.EventDispatcher));comm.HttpChannel=HttpChannel})(comm=frame.comm||(frame.comm={}))})(frame||(frame={}));var frame;(function(frame){var system;(function(system){var CallbackMappingCenter=(function(_super){__extends(CallbackMappingCenter,_super);function CallbackMappingCenter(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._callbackFunctionList=[];_this._callbackThisList=[];_this._vClassList=[];return _this}CallbackMappingCenter.prototype.register=function(callbackFunction,callbackThis,vClass){this._callbackFunctionList.push(callbackFunction);this._callbackThisList.push(callbackThis);this._vClassList.push(vClass)};CallbackMappingCenter.prototype.unRegister=function(callbackFunction){for(var i=this._callbackFunctionList.length-1;i>=0;i--){if(this._callbackFunctionList[i]==callbackFunction){this._callbackFunctionList.splice(i,1);this._callbackThisList.splice(i,1);this._vClassList.splice(i,1)}}};CallbackMappingCenter.prototype.unRegisterByThisObj=function(thisObj){for(var i=this._callbackThisList.length-1;i>=0;i--){if(this._callbackThisList[i]==thisObj){this._callbackFunctionList.splice(i,1);this._callbackThisList.splice(i,1);this._vClassList.splice(i,1)}}};CallbackMappingCenter.prototype.doCallback=function(vClassInstance,type,value){if(value===void 0){value=null}var callBackFuncList=Frame.CallbackMappingCenter.getCallFunctionList(vClassInstance);if(callBackFuncList.length>0){var callBackFunc;var callBackThis;for(var i=0;i<callBackFuncList.length;i++){callBackFunc=callBackFuncList[i];callBackThis=Frame.CallbackMappingCenter.getCallFunctionThis(vClassInstance,callBackFunc);if(callBackFunc!=null&&callBackThis!=null){callBackFunc.call(callBackThis,type,value)}}}};CallbackMappingCenter.prototype.getCallFunctionList=function(vClassInstance){var funcList=[];for(var i=0;i<this._vClassList.length;i++){if(vClassInstance instanceof this._vClassList[i]){funcList.push(this._callbackFunctionList[i])}}return funcList};CallbackMappingCenter.prototype.getCallFunctionThis=function(vClassInstance,callbackFunction){for(var i=0;i<this._vClassList.length;i++){if(this._callbackFunctionList[i]==callbackFunction&&vClassInstance instanceof this._vClassList[i]){return this._callbackThisList[i]}}return null};return CallbackMappingCenter}(frame.base.BaseSingleton));system.CallbackMappingCenter=CallbackMappingCenter})(system=frame.system||(frame.system={}))})(frame||(frame={}));var frame;(function(frame){var system;(function(system){var MessageCenter=(function(_super){__extends(MessageCenter,_super);function MessageCenter(){var _this=_super.call(this)||this;_this._typeList=[];_this._listenerList=[];_this._thisObjList=[];_this._groupList=[];return _this}MessageCenter.prototype.on=function(type,listener,thisObj,group){if(group===void 0){group=null}if(type&&listener&&type.length>0){this.off(type,listener,thisObj);this._typeList.push(type);this._listenerList.push(listener);this._thisObjList.push(thisObj);this._groupList.push(group)}};MessageCenter.prototype.off=function(type,listener,thisObj){var idx=this._listenerList.indexOf(listener);if(idx>=0&&this._typeList[idx]==type&&this._thisObjList[idx]==thisObj){this.offByIdx(idx)}};MessageCenter.prototype.offByType=function(type){if(type){for(var idx=this._typeList.length-1;idx>=0;idx--){if(this._typeList[idx]==type){this.offByIdx(idx)}}}};MessageCenter.prototype.offByThisObj=function(thisObj){if(thisObj){for(var idx=this._thisObjList.length-1;idx>=0;idx--){if(this._thisObjList[idx]==thisObj){this.offByIdx(idx)}}}};MessageCenter.prototype.offByGroup=function(group){if(group){for(var idx=this._groupList.length-1;idx>=0;idx--){if(this._groupList[idx]==group){this.offByIdx(idx)}}}};MessageCenter.prototype.offByIdx=function(idx){this._typeList.splice(idx,1);this._listenerList.splice(idx,1);this._thisObjList.splice(idx,1);this._groupList.splice(idx,1)};MessageCenter.prototype.event=function(type,data){if(data===void 0){data=null}var idx;var dispatchListenerList=[];var dispatchThisObjList=[];for(idx=0;idx<this._typeList.length;idx++){if(this._typeList[idx]==type){dispatchListenerList.push(this._listenerList[idx]);dispatchThisObjList.push(this._thisObjList[idx])}}if(dispatchListenerList.length>0){var listener;var thisObj;for(idx=0;idx<dispatchListenerList.length;idx++){listener=dispatchListenerList[idx];thisObj=dispatchThisObjList[idx];if(data==null){listener.apply(thisObj)}else{listener.apply(thisObj,[data])}}Frame.Tool.clearArray(dispatchListenerList);Frame.Tool.clearArray(dispatchThisObjList)}};return MessageCenter}(frame.base.BaseSingleton));system.MessageCenter=MessageCenter})(system=frame.system||(frame.system={}))})(frame||(frame={}));var frame;(function(frame){var system;(function(system){var ToolMod=(function(_super){__extends(ToolMod,_super);function ToolMod(){return _super!==null&&_super.apply(this,arguments)||this}ToolMod.prototype.convertAmount=function(n){if(n==undefined||n<0){return"0"}var str=n.toString();var newStr="";var idx=0;for(var i=str.length-1;i>=0;i--){newStr=str.charAt(i)+newStr;idx++;if(idx==3){if(i>0){newStr=","+newStr}idx=0}}return newStr};ToolMod.prototype.convertIntegerNum=function(amount){var str;var value;value=amount/100000000;if(value>=1&&Math.floor(value)==value){return Math.floor(value)+"亿"}value=amount/10000;if(value>=1&&Math.floor(value)==value){return Math.floor(value)+"万"}value=amount/1000;if(value>=1&&value<=9&&Math.floor(value)==value){return Math.floor(value)+"千"}return Frame.Tool.convertAmountToWan(amount)};ToolMod.prototype.convertAmountToWan=function(n,digits){if(digits===void 0){digits=1}if(n==undefined){return"0"}var bv=Math.pow(10,digits);var n1;var n2;var dot;var i;if(Math.abs(n)>=99999999){n1=Math.floor(n/(100000000));n2=Math.floor(n/(100000000/bv))-n1*bv;if(n2==0||digits<=0){return n1+"亿"}dot=".";for(i=0;i<digits-n2.toString().length;i++){dot=dot+"0"}return n1+dot+n2+"亿"}else{if(Math.abs(n)>9999){n1=Math.floor(n/(10000));n2=Math.floor(n/(10000/bv))-n1*bv;if(n2==0||digits<=0){return n1+"万"}dot=".";for(i=0;i<digits-n2.toString().length;i++){dot=dot+"0"}return n1+dot+n2+"万"}}return n.toString()};ToolMod.prototype.addArrayItem=function(arr,item){if(arr&&arr.indexOf(item)<0){arr.push(item)}};ToolMod.prototype.deleteArrayItem=function(arr,item){if(arr){var idx=arr.indexOf(item);if(idx>=0){arr.splice(idx,1)}}};ToolMod.prototype.clearArray=function(arr){if(arr){arr.splice(0,arr.length)}};ToolMod.prototype.getUnixTime=function(){return Math.floor(new Date().getTime()/1000)};ToolMod.prototype.getCurrentTime=function(){var time=new Date(Frame.Tool.getUnixTime()*1000).toString();time=time.substring(time.indexOf(":")-2);time=time.substring(0,time.lastIndexOf(":")+3);return time};ToolMod.prototype.convertResName=function(fileName){return fileName.replace(".","_")};ToolMod.prototype.filterChars=function(txt,reservedChars){var newTxt="";var mchar;for(var i=0;i<txt.length;i++){mchar=txt.charAt(i);if(reservedChars.indexOf(mchar)>=0){newTxt+=mchar}}return newTxt};ToolMod.prototype.getUrlParam=function(url,paramName){if(url&&paramName){var s1=url.indexOf("?"+paramName+"=");if(s1==-1){s1=url.indexOf("&"+paramName+"=")}if(s1>=0){s1+=paramName.length+2;var s2=url.indexOf("&",s1);var value;if(s2<0){value=url.substring(s1)}else{value=url.substring(s1,s2)}return value}}return null};ToolMod.prototype.getHostAddress=function(url,gameName){var idx=url.indexOf(gameName);if(idx>0){return url.substring(0,idx)}return url};ToolMod.prototype.getResPath=function(){var path=location.href;var idx;idx=path.indexOf("?");if(idx>0){path=path.substring(0,idx)}idx=path.indexOf("index.");if(idx>0){path=path.substring(0,idx)}if(path.substr(path.length-1,1)=="/"){path=path.substr(0,path.length-1)}path+="/resource/";return path};ToolMod.prototype.objectToStr=function(obj){var str="[";var value;for(var key in obj){value=obj[key];if(value instanceof Object||value instanceof Array){str+=this.objectToStr(value)}else{str+=(key+"="+obj[key]+" ")}}str+="]";return str};ToolMod.prototype.trimStr=function(str,maxLen,addDots){if(addDots===void 0){addDots=false}var resultStr=str;if(resultStr.length>maxLen){resultStr=resultStr.substr(0,maxLen);if(addDots){resultStr+="..."}}return resultStr};ToolMod.prototype.lightenDarkenColor=function(color,amt){var r=((color&16711680)>>16)+amt;if(r>255){r=255}var g=((color&65280)>>8)+amt;if(g>255){g=255}var b=(color&255)+amt;if(b>255){b=255}return(b|(g<<8)|(r<<16))};return ToolMod}(frame.base.BaseSingleton));system.ToolMod=ToolMod})(system=frame.system||(frame.system={}))})(frame||(frame={}));var Proto;(function(Proto){var Tooks;(function(Tooks){var GetCooperationInfoTook=(function(_super){__extends(GetCooperationInfoTook,_super);function GetCooperationInfoTook(){return _super!==null&&_super.apply(this,arguments)||this}GetCooperationInfoTook.prototype.init=function(){this.moduleName=Game.protosender.cooperate.moduleName;this.req=new Proto.API.cooperate.GetInfoRequest();this.heartbeat=10000;this.preconditionMenuIds=[MenuId.Home];this.menuId=MenuId.Cooperation};GetCooperationInfoTook.prototype.setParameter=function(){this.req.oldOrderUuids=Game.moduleModel.order.oldOrderUUids};return GetCooperationInfoTook}(Games.ProtoTookHandler));Tooks.GetCooperationInfoTook=GetCooperationInfoTook})(Tooks=Proto.Tooks||(Proto.Tooks={}))})(Proto||(Proto={}));var Proto;(function(Proto){var Tooks;(function(Tooks){var GetNoticeListTook=(function(_super){__extends(GetNoticeListTook,_super);function GetNoticeListTook(){return _super!==null&&_super.apply(this,arguments)||this}GetNoticeListTook.prototype.init=function(){};GetNoticeListTook.prototype.validate=function(){return true};GetNoticeListTook.prototype.setParameter=function(){};return GetNoticeListTook}(Games.ProtoTookHandler));Tooks.GetNoticeListTook=GetNoticeListTook})(Tooks=Proto.Tooks||(Proto.Tooks={}))})(Proto||(Proto={}));var Proto;(function(Proto){var Tooks;(function(Tooks){var GetOrderInfo=(function(_super){__extends(GetOrderInfo,_super);function GetOrderInfo(){return _super!==null&&_super.apply(this,arguments)||this}GetOrderInfo.prototype.init=function(){this.moduleName=Game.protosender.cooperate.moduleName;this.req=new Proto.API.cooperate.GetOrderInfoRequest();this.heartbeat=2000;this.preconditionMenuIds=[MenuId.Order];this.menuId=MenuId.Cooperation};GetOrderInfo.prototype.setParameter=function(){this.req.oldOrderUuids=Game.moduleModel.order.oldOrderUUids};return GetOrderInfo}(Games.ProtoTookHandler));Tooks.GetOrderInfo=GetOrderInfo})(Tooks=Proto.Tooks||(Proto.Tooks={}))})(Proto||(Proto={}));var Proto;(function(Proto){var Tooks;(function(Tooks){var GetSelfListTook=(function(_super){__extends(GetSelfListTook,_super);function GetSelfListTook(){return _super!==null&&_super.apply(this,arguments)||this}GetSelfListTook.prototype.init=function(){this.moduleName=Game.protosender.rank.moduleName;this.req=new Proto.API.rank.GetSelfListRequest();this.heartbeat=5000;this.preconditionMenuIds=[MenuId.Home]};GetSelfListTook.prototype.validate=function(){return true};GetSelfListTook.prototype.setParameter=function(){};return GetSelfListTook}(Games.ProtoTookHandler));Tooks.GetSelfListTook=GetSelfListTook})(Tooks=Proto.Tooks||(Proto.Tooks={}))})(Proto||(Proto={}));var Proto;(function(Proto){var Tooks;(function(Tooks){var GetTaskInfo=(function(_super){__extends(GetTaskInfo,_super);function GetTaskInfo(){return _super!==null&&_super.apply(this,arguments)||this}GetTaskInfo.prototype.init=function(){this.moduleName=Game.protosender.cooperate.moduleName;this.req=new Proto.API.cooperate.GetTaskInfoRequest();this.heartbeat=2000;this.preconditionMenuIds=[MenuId.Cooperation];this.menuId=MenuId.Cooperation};GetTaskInfo.prototype.setParameter=function(){};return GetTaskInfo}(Games.ProtoTookHandler));Tooks.GetTaskInfo=GetTaskInfo})(Tooks=Proto.Tooks||(Proto.Tooks={}))})(Proto||(Proto={}));var Games;(function(Games){var appsFlyerAndNative=(function(){function appsFlyerAndNative(){}appsFlyerAndNative.prototype.onRecharge=function(conchMarketJson){Laya.conchMarket.recharge(conchMarketJson.toJson(),function(jsonString){var pJson=JSON.parse(jsonString);if(parseInt(pJson.code)===0){Game.protosender.pay.FinishOrder(pJson.order_id,parseInt(pJson.code))}else{fairygui.GRoot.inst.closeModalWait();Game.system.alrtTextFull(Games.TEXT.rechargeError,Games.TEXT.systemTip)}})};return appsFlyerAndNative}());Games.appsFlyerAndNative=appsFlyerAndNative})(Games||(Games={}));var Games;(function(Games){var Recharge=(function(){function Recharge(){this.rechargeIFList=[];this.listLength=0;this.addDispatch(new Games.appsFlyerAndNative())}Object.defineProperty(Recharge,"Instance",{get:function(){if(!Recharge._Instance){Recharge._Instance=new Recharge()}return Recharge._Instance},enumerable:true,configurable:true});Recharge.prototype.addDispatch=function(staticDispatch){this.rechargeIFList.push(staticDispatch);this.listLength=this.rechargeIFList.length};Recharge.prototype.onRecharge=function(rechargeInf){if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.rechargeIFList[i].onRecharge(rechargeInf)}}};return Recharge}());Games.Recharge=Recharge})(Games||(Games={}));var Games;(function(Games){var StaticAbstractDispatch=(function(){function StaticAbstractDispatch(){}StaticAbstractDispatch.prototype.initNewDay=function(){};StaticAbstractDispatch.prototype.onInstall=function(){};StaticAbstractDispatch.prototype.onRegistation=function(first){};StaticAbstractDispatch.prototype.onloadstart=function(isForceSend){};StaticAbstractDispatch.prototype.onLoadStep=function(loadStep){};StaticAbstractDispatch.prototype.onLoadEnd=function(){};StaticAbstractDispatch.prototype.onPurchase=function(dollar,order_id,item,confId){};StaticAbstractDispatch.prototype.onUserItemInfo=function(){};StaticAbstractDispatch.prototype.onUserStatus=function(){};StaticAbstractDispatch.prototype.onUserorbit=function(tid,item,action){};StaticAbstractDispatch.prototype.onUpgrdae=function(tid,item,fromlevel,changelev,targetlev){};StaticAbstractDispatch.prototype.onResourceinput=function(item,type,grade,id){};StaticAbstractDispatch.prototype.onResourceoutput=function(item,type,id){};StaticAbstractDispatch.prototype.onUseGold=function(item,cost,market){};StaticAbstractDispatch.prototype.onFinishTutorial=function(id){};StaticAbstractDispatch.prototype.onLevelAchieved=function(lv){};return StaticAbstractDispatch}());Games.StaticAbstractDispatch=StaticAbstractDispatch})(Games||(Games={}));var Games;(function(Games){var AppsFlyerStatic=(function(_super){__extends(AppsFlyerStatic,_super);function AppsFlyerStatic(){var _this=_super.call(this)||this;_this.isIos=false;_this.isAndroid=false;if(Games.StaticAttributes.Instance.enableAppflyer){_this.OcNativeClass=Laya.PlatformClass.createClass("OcNativeClass");_this.OcNativeObj=_this.OcNativeClass.newObject();if(_this.OcNativeClass&&_this.OcNativeObj){_this.isIos=true}}if(Games.StaticAttributes.Instance.enableAppflyerAndorid){_this.OcNativeClass=Laya.PlatformClass.createClass("com.shinezone.movie.OcNativeClass");_this.OcNativeObj=_this.OcNativeClass.newObject();if(_this.OcNativeClass&&_this.OcNativeObj){_this.isAndroid=true}}return _this}AppsFlyerStatic.prototype.onRegistation=function(first){if(this.isAndroid){this.OcNativeObj.callWithBack(null,"onAppsFlyerRegistation")}else{if(this.isIos){this.OcNativeObj.call("onAppsFlyerRegistation:",1)}}};AppsFlyerStatic.prototype.onloadstart=function(isForceSend){if(this.isAndroid){this.OcNativeObj.callWithBack(null,"onAppsFlyerLogin")}else{if(this.isIos){this.OcNativeObj.call("onAppsFlyerLogin:",1)}}};AppsFlyerStatic.prototype.onPurchase=function(dollar,order_id,item,confId){if(this.isAndroid){this.OcNativeObj.callWithBack(null,"onAppsFlyerPurchase",confId,dollar)}else{if(this.isIos){this.OcNativeObj.call("onAppsFlyerPurchase:and:",confId,dollar)}}};AppsFlyerStatic.prototype.onFinishTutorial=function(id){if(id===GlobalConfig.getValue(GlobalKey.maintask_complete_end)){if(this.isAndroid){this.OcNativeObj.callWithBack(null,"onAppsFlyerTutorial")}else{if(this.isIos){this.OcNativeObj.call("onAppsFlyerTutorial:")}}}};AppsFlyerStatic.prototype.onLevelAchieved=function(lv){if(this.isAndroid){this.OcNativeObj.callWithBack(null,"onAppsFlyerLevelAchieved",lv)}else{if(this.isIos){this.OcNativeObj.call("onAppsFlyerLevelAchieved:",lv)}}};return AppsFlyerStatic}(Games.StaticAbstractDispatch));Games.AppsFlyerStatic=AppsFlyerStatic})(Games||(Games={}));var Games;(function(Games){var CrosswalkViewAppsFlyerStatic=(function(_super){__extends(CrosswalkViewAppsFlyerStatic,_super);function CrosswalkViewAppsFlyerStatic(){var _this=_super.call(this)||this;_this.jsClassName="CrosswalkViewAppsFlyerStatic";Games.GameBridgerManager.Instance.registerHandler(_this);return _this}CrosswalkViewAppsFlyerStatic.prototype.onRegistation=function(first){this.callNative("onAppsFlyerRegistation")};CrosswalkViewAppsFlyerStatic.prototype.initNewDay=function(){};CrosswalkViewAppsFlyerStatic.prototype.onInstall=function(){};CrosswalkViewAppsFlyerStatic.prototype.onloadstart=function(isForceSend){this.callNative("onAppsFlyerLogin")};CrosswalkViewAppsFlyerStatic.prototype.onLoadStep=function(loadStep){};CrosswalkViewAppsFlyerStatic.prototype.onLoadEnd=function(){};CrosswalkViewAppsFlyerStatic.prototype.onPurchase=function(dollar,order_id,item,confId){this.callNative("onAppsFlyerPurchase",{appContentID:confId,costVal:dollar})};CrosswalkViewAppsFlyerStatic.prototype.onUserItemInfo=function(){};CrosswalkViewAppsFlyerStatic.prototype.onUserStatus=function(){};CrosswalkViewAppsFlyerStatic.prototype.onUserorbit=function(tid,item,action){};CrosswalkViewAppsFlyerStatic.prototype.onUpgrdae=function(tid,item,fromlevel,changelev,targetlev){};CrosswalkViewAppsFlyerStatic.prototype.onResourceinput=function(item,type,grade,id){};CrosswalkViewAppsFlyerStatic.prototype.onResourceoutput=function(item,type,id){};CrosswalkViewAppsFlyerStatic.prototype.onUseGold=function(item,cost,market){};CrosswalkViewAppsFlyerStatic.prototype.onFinishTutorial=function(id){if(id===GlobalConfig.getValue(GlobalKey.maintask_complete_end)){this.callNative("onAppsFlyerTutorial")}};CrosswalkViewAppsFlyerStatic.prototype.onLevelAchieved=function(lv){this.callNative("onAppsFlyerLevelAchieved",{level:lv})};return CrosswalkViewAppsFlyerStatic}(Games.GameBridger));Games.CrosswalkViewAppsFlyerStatic=CrosswalkViewAppsFlyerStatic})(Games||(Games={}));var Games;(function(Games){var HttpRequest=laya.net.HttpRequest;var Event=laya.events.Event;var ShinezoneStatic=(function(_super){__extends(ShinezoneStatic,_super);function ShinezoneStatic(){var _this=_super.call(this)||this;_this.DEFAULT_URL="http://52.1.149.109:81/logs";_this.msgList=[];_this.httpErrorNum=0;_this.httpIsSending=false;var httpRequest=new HttpRequest();httpRequest.http.timeout=10000;httpRequest.on(Event.COMPLETE,_this,_this.onHttpComplete);httpRequest.on(Event.ERROR,_this,_this.onHttpError);_this.httpRequest=httpRequest;return _this}Object.defineProperty(ShinezoneStatic.prototype,"url",{get:function(){if(!Games.ChannelManager.getInstance().serverItem||!Games.ChannelManager.getInstance().serverItem.staticUrl){return this.DEFAULT_URL}return Games.ChannelManager.getInstance().serverItem.staticUrl},enumerable:true,configurable:true});ShinezoneStatic.prototype.onRegistation=function(first){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="User_info";this.baseDate(sm);sm.tid=format("name:{0}|gdr:|loc:|uname:|tz:|em:|",User.info.name);sm.value=0;sm.value2=0;this.sendHttp(msg)};ShinezoneStatic.prototype.onInstall=function(){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="install";sm.rtime=Games.StaticAttributes.Instance.DateTimeFormat();sm.time=Games.StaticAttributes.Instance.DateTimeFormat();sm.value=2;sm.value2=1;sm.uid=Games.StaticAttributes.Instance.DeviceId;sm.token=Games.StaticAttributes.Instance.curToken;this.sendHttp(msg)};ShinezoneStatic.prototype.onloadstart=function(isForceSend){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="visit_web";this.baseDate(sm);sm.value=0;sm.value2=0;this.sendHttp(msg)};ShinezoneStatic.prototype.onLoadStep=function(loadStep){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="load_step";this.baseDate(sm);sm.item=loadStep;sm.value=0;sm.value2=0;this.sendHttp(msg)};ShinezoneStatic.prototype.onLoadEnd=function(){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="explorer";this.baseDate(sm);sm.tid="device_info";sm.item=format("device:{2}|debug:false|os:{1}|width:|height:|memory:|network:|deviceId:{0}|",Games.StaticAttributes.Instance.DeviceId,BrowserDetect.deviceInfo.os,BrowserDetect.deviceInfo.devicename);sm.value=2;sm.value2=0;this.sendHttp(msg)};ShinezoneStatic.prototype.onPurchase=function(dollar,order_id,item,confId){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="FB_Credit";this.baseDate(sm);sm.tid=order_id;sm.item=item;sm.value=dollar*10;sm.value2=0;this.sendHttp(msg)};ShinezoneStatic.prototype.onUserItemInfo=function(){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="User_item_info";this.baseDate(sm);sm.tid="";var itemConfig=Game.config.item.getConfigList();for(var i=0;i<itemConfig.length;i++){if(itemConfig[i].User_item_info===1){var itemCount=Game.moduleModel.item.getItemNum(itemConfig[i].id);sm.tid+=format("{0}:{1}|",itemConfig[i].id,itemCount)}}sm.item="";sm.value=0;sm.value2=0;this.sendHttp(msg)};ShinezoneStatic.prototype.onUserStatus=function(){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="user_status";this.baseDate(sm);sm.tid="status_info";sm.item=User.info.stall+"&"+Game.moduleModel.rank.SelfGroupRank+"&"+Game.moduleModel.rank.SelfServerRank;sm.value=0;sm.value2=0;this.sendHttp(msg)};ShinezoneStatic.prototype.onUserorbit=function(tid,item,action){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="userorbit";this.baseDate(sm);sm.tid=format("Module:{0}|action:{1}|",tid,action);sm.item=item;sm.value=1;sm.value2=0;this.sendHttp(msg)};ShinezoneStatic.prototype.onUpgrdae=function(tid,item,fromlevel,changelev,targetlev){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="upgrade";this.baseDate(sm);sm.tid=format("objective:{0}|item:{1}|",tid,item);sm.item=format("fromlevel:{0}|changelev:{1}|targetlev:{2}|",fromlevel,changelev,targetlev);sm.value=1;sm.value2=0;this.sendHttp(msg)};ShinezoneStatic.prototype.onResourceinput=function(item,type,grade,id){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="resourceinput";this.baseDate(sm);sm.tid="";if(item.length>0){for(var i=0;i<item.length;i++){sm.tid+=format("{0}:{1}|",item[i].itemId,item[i].itemNum)}}if(grade===-1){sm.item=type}else{if(id===-1){sm.item=format("{0}&{1}",type,grade)}else{sm.item=format("{0}&{1}&{2}",type,grade,id)}}sm.value=0;sm.value2=0;this.sendHttp(msg)};ShinezoneStatic.prototype.onResourceoutput=function(item,type,id){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="resourceoutput";this.baseDate(sm);sm.tid="";if(item.length>0){for(var i=0;i<item.length;i++){sm.tid+=format("{0}:{1}|",item[i].itemId,item[i].itemNum)}}if(id&&id.length>1){sm.item=format("{0}&{1}",type,id)}else{sm.item=type}sm.value=0;sm.value2=0;this.sendHttp(msg)};ShinezoneStatic.prototype.onUseGold=function(item,cost,market){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="Use_Gold";this.baseDate(sm);sm.item=market+item;sm.value=cost;sm.value2=0;this.sendHttp(msg)};ShinezoneStatic.prototype.onFinishTutorial=function(id){var msg=new Games.StatisProto();msg.time=Game.time.serverSeconds;var sm=msg.message;sm.act="tutorial-step";this.baseDate(sm);sm.item=id.toString();this.sendHttp(msg)};ShinezoneStatic.prototype.baseDate=function(sm){sm.rtime=Games.StaticAttributes.Instance.rTime;sm.time=Games.StaticAttributes.Instance.lTime;sm.uid=Games.StaticAttributes.Instance.uuid;sm.cash=Games.StaticAttributes.Instance.cashs;sm.coin=Games.StaticAttributes.Instance.coins;sm.level=Games.StaticAttributes.Instance.levels;sm.token=Games.StaticAttributes.Instance.curToken};ShinezoneStatic.prototype.sendHttp=function(msg){if(Games.StaticAttributes.Instance.enableShinezone){this.msgList.push(msg);if(!this.httpIsSending){this.dohttpSend()}}};ShinezoneStatic.prototype.dohttpSend=function(){if(this.msgList.length==0){return}if(!this.httpRequest){return}this.httpIsSending=true;var msg=this.msgList[0];console.log(this.url+" Static Data burying point :======================  "+msg.message.act+"\n"+msg.toJson());this.httpRequest.send(this.url,msg.toJson(),"post","json",ShinezoneStatic.HEADERS)};ShinezoneStatic.prototype.onHttpComplete=function(msg){console.log("Static onHttpComplete: "+msg);this.httpErrorNum=0;this.httpIsSending=false;this.msgList.shift();this.dohttpSend()};ShinezoneStatic.prototype.onHttpError=function(data){if(data&&data.toString().indexOf("success")){this.onHttpComplete({});return}console.log("Static onHttpError: "+data);this.httpIsSending=false;this.httpErrorNum++;if(this.httpErrorNum<1){this.dohttpSend()}};ShinezoneStatic.HEADERS=["content-type","application/json","accept-language","zh-CN"];return ShinezoneStatic}(Games.StaticAbstractDispatch));Games.ShinezoneStatic=ShinezoneStatic})(Games||(Games={}));var Games;(function(Games){var Static=(function(_super){__extends(Static,_super);function Static(){var _this=_super.call(this)||this;_this.staticDispathList=[];_this.listLength=0;_this.isRegistationInf=false;_this.isActLoadStart=false;_this.isLoadStepOver=new Dictionary();_this.isLoadEnd=false;_this._userItemInfo=false;_this._userStatus=false;if(BrowserDetect.isCrosswalk){_this.addDispatch(new Games.CrosswalkViewAppsFlyerStatic())}else{if(BrowserDetect.isConch){_this.addDispatch(new Games.AppsFlyerStatic())}}if(BrowserDetect.isApp){_this.addDispatch(new Games.ShinezoneStatic())}return _this}Object.defineProperty(Static,"Instance",{get:function(){if(!Static._Instance){Static._Instance=new Static()}return Static._Instance},enumerable:true,configurable:true});Static.prototype.addDispatch=function(staticDispatch){this.staticDispathList.push(staticDispatch);this.listLength=this.staticDispathList.length};Static.prototype.onRegistation=function(first){if(!first&&!this.isRegistationInf){this.isRegistationInf=true;if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onRegistation(first)}}}};Static.prototype.initNewDay=function(){this._userItemInfo=false};Static.prototype.onInstall=function(){if(!Games.GameLocalStorage.Instance.hasItem("__Static_httpActInstall",true)){Games.GameLocalStorage.Instance.setBoolean("__Static_httpActInstall",true,true);if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onInstall()}}}};Static.prototype.onloadstart=function(isForceSend){if(!this.isActLoadStart||isForceSend){this.isActLoadStart=true;if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onloadstart(isForceSend)}}}};Static.prototype.onLoadStep=function(loadStep){if(!this.isLoadStepOver.hasKey(loadStep)){this.isLoadStepOver.add(loadStep,true);if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onLoadStep(loadStep)}}}};Static.prototype.onLoadEnd=function(){if(!this.isLoadEnd){this.isLoadEnd=true;if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onLoadEnd()}}}};Static.prototype.onPurchase=function(dollar,order_id,item,confId){if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onPurchase(dollar,order_id,item,confId)}}};Static.prototype.onUserItemInfo=function(){if(!this._userItemInfo){this._userItemInfo=true;if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onUserItemInfo()}}}};Static.prototype.onUserStatus=function(){if(!this._userStatus){this._userStatus=true;if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onUserStatus()}}}};Static.prototype.onUserorbit=function(tid,item,action){if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onUserorbit(tid,item,action)}}};Static.prototype.onUpgrdae=function(tid,item,fromlevel,changelev,targetlev){if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onUpgrdae(tid,item,fromlevel,changelev,targetlev)}}};Static.prototype.onResourceinput=function(item,type,grade,id){if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onResourceinput(item,type,grade,id)}}};Static.prototype.onResourceoutput=function(item,type,id){if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onResourceoutput(item,type,id)}}};Static.prototype.onUseGold=function(item,cost,market){if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onUseGold(item,cost,market)}}};Static.prototype.onFinishTutorial=function(id){if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onFinishTutorial(id)}}};Static.prototype.onLevelAchieved=function(lv){if(this.listLength>0){for(var i=0;i<this.listLength;i++){this.staticDispathList[i].onLevelAchieved(lv)}}};return Static}(Games.StaticAbstractDispatch));Games.Static=Static})(Games||(Games={}));var EGameDataOps=Proto.SE.EGameDataOps;var EError=Proto.SE.EError;var ECommon=Proto.SE.ECommon;var EMoneyType=Proto.SE.EMoneyType;var EGoodsFlag=Proto.SE.EGoodsFlag;var EAcceptCondition=Proto.SE.EAcceptCondition;var ECompleteCondition=Proto.SE.ECompleteCondition;var ECompleteReward=Proto.SE.ECompleteReward;var EUsrState=Proto.SE.EUsrState;var EItemNumber=Proto.SE.EItemNumber;var EPublishTypeCode=Proto.SE.EPublishTypeCode;var EChannel=Proto.SE.EChannel;var EUserSex=Proto.SE.EUserSex;var EItemCategory=Proto.SE.EItemCategory;var EItemId=Proto.SE.EItemId;var EGameDataRename=Proto.SE.EGameDataRename;var EStoryStack=Proto.SE.EStoryStack;var EStoryModule=Proto.SE.EStoryModule;var EMovieState=Proto.SE.EMovieState;var EGlobalId=Proto.SE.EGlobalId;var EMovieType=Proto.SE.EMovieType;var EBoxOfficeEvaluation=Proto.SE.EBoxOfficeEvaluation;var EProgressBoxId=Proto.SE.EProgressBoxId;var EManageProduce=Proto.SE.EManageProduce;var ERankListType=Proto.SE.ERankListType;var EAchievementState=Proto.SE.EAchievementState;var EAchievementType=Proto.SE.EAchievementType;var EMallItemLimitType=Proto.SE.EMallItemLimitType;var EManageBusiness=Proto.SE.EManageBusiness;var EManageVisit=Proto.SE.EManageVisit;var EManageOrder=Proto.SE.EManageOrder;var EMailId=Proto.SE.EMailId;var ESecretaryType=Proto.SE.ESecretaryType;var ESecretary=Proto.SE.ESecretary;var EManageMeet=Proto.SE.EManageMeet;var EOscarType=Proto.SE.EOscarType;var EGMRefreshType=Proto.SE.EGMRefreshType;var EItemUseType=Proto.SE.EItemUseType;var EItemType=Proto.SE.EItemType;var EGuideType=Proto.SE.EGuideType;var ENoticeType=Proto.SE.ENoticeType;var ECooperate=Proto.SE.ECooperate;var EChatChannel=Proto.SE.EChatChannel;var ESystemMessageId=Proto.SE.ESystemMessageId;var ESystemType=Proto.SE.ESystemType;var configs;(function(configs){var ConfigManagerList=(function(){function ConfigManagerList(){this.renders=[];this.action=new configs.ActionConfigReader();this.activities=new configs.ActivitiesConfigReader();this.actor=new configs.ActorConfigReader();this.actorAide=new configs.ActorAideConfigReader();this.actorAideattach=new configs.ActorAideattachConfigReader();this.actorAideIntimacy=new configs.ActorAideIntimacyConfigReader();this.actorAideLv=new configs.ActorAideLvConfigReader();this.actorAssets=new configs.ActorAssetsConfigReader();this.actorAssetsLv=new configs.ActorAssetsLvConfigReader();this.actorLevel=new configs.ActorLevelConfigReader();this.actorLoyalty=new configs.ActorLoyaltyConfigReader();this.actorProficiency=new configs.ActorProficiencyConfigReader();this.actorTrain=new configs.ActorTrainConfigReader();this.actorTrainLv=new configs.ActorTrainLvConfigReader();this.avatar=new configs.AvatarConfigReader();this.battleLevel=new configs.BattleLevelConfigReader();this.battleShootType=new configs.BattleShootTypeConfigReader();this.blockLevel=new configs.BlockLevelConfigReader();this.blockRankingList=new configs.BlockRankingListConfigReader();this.blockWords=new configs.BlockWordsConfigReader();this.blockWordsII=new configs.BlockWordsIIConfigReader();this.boxTarget=new configs.BoxTargetConfigReader();this.buildingEffect=new configs.BuildingEffectConfigReader();this.buildingLevel=new configs.BuildingLevelConfigReader();this.business=new configs.BusinessConfigReader();this.cinema=new configs.CinemaConfigReader();this.city=new configs.CityConfigReader();this.cityPopularize=new configs.CityPopularizeConfigReader();this.complete=new configs.CompleteConfigReader();this.compound=new configs.CompoundConfigReader();this.cooperateTask=new configs.CooperateTaskConfigReader();this.countActivities=new configs.CountActivitiesConfigReader();this.country=new configs.CountryConfigReader();this.cupPackage=new configs.CupPackageConfigReader();this.dailySign=new configs.DailySignConfigReader();this.dailySignTrailer=new configs.DailySignTrailerConfigReader();this.dialogue=new configs.DialogueConfigReader();this.event=new configs.EventConfigReader();this.floor=new configs.FloorConfigReader();this.gameLevel=new configs.GameLevelConfigReader();this.gameRandomName=new configs.GameRandomNameConfigReader();this.gameVersion=new configs.GameVersionConfigReader();this.giftPackage=new configs.GiftPackageConfigReader();this.global=new configs.GlobalConfigReader();this.guidePath=new configs.GuidePathConfigReader();this.guidesystem=new configs.GuidesystemConfigReader();this.headPortrait=new configs.HeadPortraitConfigReader();this.image=new configs.ImageConfigReader();this.initialActor=new configs.InitialActorConfigReader();this.item=new configs.ItemConfigReader();this.languageType=new configs.LanguageTypeConfigReader();this.levelGiftPackage=new configs.LevelGiftPackageConfigReader();this.loader=new configs.LoaderConfigReader();this.loading=new configs.LoadingConfigReader();this.mail=new configs.MailConfigReader();this.maintask=new configs.MaintaskConfigReader();this.meetingGame=new configs.MeetingGameConfigReader();this.meetingRewards=new configs.MeetingRewardsConfigReader();this.menu=new configs.MenuConfigReader();this.menuIndex=new configs.MenuIndexConfigReader();this.monthCard=new configs.MonthCardConfigReader();this.movieAdaptationMsg=new configs.MovieAdaptationMsgConfigReader();this.movieAudienceEvaluation=new configs.MovieAudienceEvaluationConfigReader();this.movieDrop=new configs.MovieDropConfigReader();this.movieExpect=new configs.MovieExpectConfigReader();this.movieLicence=new configs.MovieLicenceConfigReader();this.movieMediaVisit=new configs.MovieMediaVisitConfigReader();this.movieMidiaEvaluation=new configs.MovieMidiaEvaluationConfigReader();this.movieMidiaEvaluationMsg=new configs.MovieMidiaEvaluationMsgConfigReader();this.moviePopularize=new configs.MoviePopularizeConfigReader();this.movieShootType=new configs.MovieShootTypeConfigReader();this.msg=new configs.MsgConfigReader();this.msgChat=new configs.MsgChatConfigReader();this.msgProtoError=new configs.MsgProtoErrorConfigReader();this.npc=new configs.NpcConfigReader();this.operationTasks=new configs.OperationTasksConfigReader();this.operationTasksScore=new configs.OperationTasksScoreConfigReader();this.operationTasksTerms=new configs.OperationTasksTermsConfigReader();this.order=new configs.OrderConfigReader();this.oscar=new configs.OscarConfigReader();this.perform=new configs.PerformConfigReader();this.playAct=new configs.PlayActConfigReader();this.playerDefault=new configs.PlayerDefaultConfigReader();this.playerLevel=new configs.PlayerLevelConfigReader();this.popUp=new configs.PopUpConfigReader();this.position=new configs.PositionConfigReader();this.produce=new configs.ProduceConfigReader();this.produceLevel=new configs.ProduceLevelConfigReader();this.produceLv=new configs.ProduceLvConfigReader();this.produceSouvenir=new configs.ProduceSouvenirConfigReader();this.property=new configs.PropertyConfigReader();this.randomName=new configs.RandomNameConfigReader();this.randomSurname=new configs.RandomSurnameConfigReader();this.recharge=new configs.RechargeConfigReader();this.roadshow=new configs.RoadshowConfigReader();this.secretary=new configs.SecretaryConfigReader();this.secretaryGift=new configs.SecretaryGiftConfigReader();this.secretaryType=new configs.SecretaryTypeConfigReader();this.serverRankingList=new configs.ServerRankingListConfigReader();this.settingDefault=new configs.SettingDefaultConfigReader();this.shop=new configs.ShopConfigReader();this.skill=new configs.SkillConfigReader();this.skillEffect=new configs.SkillEffectConfigReader();this.skillTrigger=new configs.SkillTriggerConfigReader();this.speak=new configs.SpeakConfigReader();this.starCon=new configs.StarConConfigReader();this.story=new configs.StoryConfigReader();this.storyCharacters=new configs.StoryCharactersConfigReader();this.storyGoals=new configs.StoryGoalsConfigReader();this.storyline=new configs.StorylineConfigReader();this.storyRate=new configs.StoryRateConfigReader();this.storyRefreshPrice=new configs.StoryRefreshPriceConfigReader();this.storyStackItem=new configs.StoryStackItemConfigReader();this.storyStackSort=new configs.StoryStackSortConfigReader();this.street=new configs.StreetConfigReader();this.sysTime=new configs.SysTimeConfigReader();this.task=new configs.TaskConfigReader();this.test=new configs.TestConfigReader();this.turntableComplete=new configs.TurntableCompleteConfigReader();this.turntableReward=new configs.TurntableRewardConfigReader();this.type=new configs.TypeConfigReader();this.unlock=new configs.UnlockConfigReader();this.visit=new configs.VisitConfigReader();this.weeklyQuest=new configs.WeeklyQuestConfigReader();this.welfare=new configs.WelfareConfigReader();this.wheelDrop=new configs.WheelDropConfigReader();this.writer=new configs.WriterConfigReader();this.writerAbility=new configs.WriterAbilityConfigReader();this.writerAdaptEffect=new configs.WriterAdaptEffectConfigReader();this.writerLevel=new configs.WriterLevelConfigReader();this.writerSkill=new configs.WriterSkillConfigReader();this.writerStation=new configs.WriterStationConfigReader()}ConfigManagerList.prototype.initList=function(){this.renders.push(this.action);this.renders.push(this.activities);this.renders.push(this.actor);this.renders.push(this.actorAide);this.renders.push(this.actorAideattach);this.renders.push(this.actorAideIntimacy);this.renders.push(this.actorAideLv);this.renders.push(this.actorAssets);this.renders.push(this.actorAssetsLv);this.renders.push(this.actorLevel);this.renders.push(this.actorLoyalty);this.renders.push(this.actorProficiency);this.renders.push(this.actorTrain);this.renders.push(this.actorTrainLv);this.renders.push(this.avatar);this.renders.push(this.battleLevel);this.renders.push(this.battleShootType);this.renders.push(this.blockLevel);this.renders.push(this.blockRankingList);this.renders.push(this.blockWords);this.renders.push(this.blockWordsII);this.renders.push(this.boxTarget);this.renders.push(this.buildingEffect);this.renders.push(this.buildingLevel);this.renders.push(this.business);this.renders.push(this.cinema);this.renders.push(this.city);this.renders.push(this.cityPopularize);this.renders.push(this.complete);this.renders.push(this.compound);this.renders.push(this.cooperateTask);this.renders.push(this.countActivities);this.renders.push(this.country);this.renders.push(this.cupPackage);this.renders.push(this.dailySign);this.renders.push(this.dailySignTrailer);this.renders.push(this.dialogue);this.renders.push(this.event);this.renders.push(this.floor);this.renders.push(this.gameLevel);this.renders.push(this.gameRandomName);this.renders.push(this.gameVersion);this.renders.push(this.giftPackage);this.renders.push(this.global);this.renders.push(this.guidePath);this.renders.push(this.guidesystem);this.renders.push(this.headPortrait);this.renders.push(this.image);this.renders.push(this.initialActor);this.renders.push(this.item);this.renders.push(this.languageType);this.renders.push(this.levelGiftPackage);this.renders.push(this.loader);this.renders.push(this.loading);this.renders.push(this.mail);this.renders.push(this.maintask);this.renders.push(this.meetingGame);this.renders.push(this.meetingRewards);this.renders.push(this.menu);this.renders.push(this.menuIndex);this.renders.push(this.monthCard);this.renders.push(this.movieAdaptationMsg);this.renders.push(this.movieAudienceEvaluation);this.renders.push(this.movieDrop);this.renders.push(this.movieExpect);this.renders.push(this.movieLicence);this.renders.push(this.movieMediaVisit);this.renders.push(this.movieMidiaEvaluation);this.renders.push(this.movieMidiaEvaluationMsg);this.renders.push(this.moviePopularize);this.renders.push(this.movieShootType);this.renders.push(this.msg);this.renders.push(this.msgChat);this.renders.push(this.msgProtoError);this.renders.push(this.npc);this.renders.push(this.operationTasks);this.renders.push(this.operationTasksScore);this.renders.push(this.operationTasksTerms);this.renders.push(this.order);this.renders.push(this.oscar);this.renders.push(this.perform);this.renders.push(this.playAct);this.renders.push(this.playerDefault);this.renders.push(this.playerLevel);this.renders.push(this.popUp);this.renders.push(this.position);this.renders.push(this.produce);this.renders.push(this.produceLevel);this.renders.push(this.produceLv);this.renders.push(this.produceSouvenir);this.renders.push(this.property);this.renders.push(this.randomName);this.renders.push(this.randomSurname);this.renders.push(this.recharge);this.renders.push(this.roadshow);this.renders.push(this.secretary);this.renders.push(this.secretaryGift);this.renders.push(this.secretaryType);this.renders.push(this.serverRankingList);this.renders.push(this.settingDefault);this.renders.push(this.shop);this.renders.push(this.skill);this.renders.push(this.skillEffect);this.renders.push(this.skillTrigger);this.renders.push(this.speak);this.renders.push(this.starCon);this.renders.push(this.story);this.renders.push(this.storyCharacters);this.renders.push(this.storyGoals);this.renders.push(this.storyline);this.renders.push(this.storyRate);this.renders.push(this.storyRefreshPrice);this.renders.push(this.storyStackItem);this.renders.push(this.storyStackSort);this.renders.push(this.street);this.renders.push(this.sysTime);this.renders.push(this.task);this.renders.push(this.test);this.renders.push(this.turntableComplete);this.renders.push(this.turntableReward);this.renders.push(this.type);this.renders.push(this.unlock);this.renders.push(this.visit);this.renders.push(this.weeklyQuest);this.renders.push(this.welfare);this.renders.push(this.wheelDrop);this.renders.push(this.writer);this.renders.push(this.writerAbility);this.renders.push(this.writerAdaptEffect);this.renders.push(this.writerLevel);this.renders.push(this.writerSkill);this.renders.push(this.writerStation)};return ConfigManagerList}());configs.ConfigManagerList=ConfigManagerList})(configs||(configs={}));var configs;(function(configs){var ConfigManager=(function(_super){__extends(ConfigManager,_super);function ConfigManager(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.sLoadProgress=new TypedSignal();_this.sLoaded=new Signal();_this.loadProgress=0;return _this}ConfigManager.prototype.loadAll=function(){var _this=this;this.loadProgress=0;var count=this.renders.length;var loadedNum=0;var onItemLoaded=function(){loadedNum++;_this.loadProgress=loadedNum/count;_this.sLoadProgress.dispatch(_this.loadProgress);gameLaunchLoding.onLoadedConfig(loadedNum,count);if(loadedNum>=count){_this.onGameLoadedAll()}};for(var i=0;i<this.renders.length;i++){this.renders[i].load(this.configLoader,onItemLoaded)}};ConfigManager.prototype.reloadAll=function(){var _this=this;this.loadProgress=0;var count=this.renders.length;var loadedNum=0;var onItemLoaded=function(){loadedNum++;_this.loadProgress=loadedNum/count;_this.sLoadProgress.dispatch(_this.loadProgress);gameLaunchLoding.onLoadedConfig(loadedNum,count);if(loadedNum>=count){_this.onGameLoadedAll()}};for(var i=0;i<this.renders.length;i++){this.renders[i].reload(this.configLoader,onItemLoaded)}};ConfigManager.prototype.onGameLoadedAll=function(){for(var i=0;i<this.renders.length;i++){this.renders[i].onGameLoadedAll()}this.sLoaded.dispatch()};return ConfigManager}(configs.ConfigManagerList));configs.ConfigManager=ConfigManager})(configs||(configs={}));var DTItemNum=configs.DTItemNum;var DTStoryNum=configs.DTStoryNum;var DTVector2=configs.DTVector2;var DTActorSkill=configs.DTActorSkill;var DTActorStory=configs.DTActorStory;var DTActorFeature=configs.DTActorFeature;var DTActorCharacter=configs.DTActorCharacter;var DTRandomInterval=configs.DTRandomInterval;var DTShootType=configs.DTShootType;var DTStoryEffect=configs.DTStoryEffect;var DTBuildingReq=configs.DTBuildingReq;var DTlValue2=configs.DTlValue2;var DTlValue3=configs.DTlValue3;var DTDrop=configs.DTDrop;var DTPerformActoin=configs.DTPerformActoin;var DTPerformSpeak=configs.DTPerformSpeak;var DTParts=configs.DTParts;var DTProficiency=configs.DTProficiency;var DTDate=configs.DTDate;var DTTime=configs.DTTime;var DTDateTime=configs.DTDateTime;var ActionConfig=configs.ActionConfig;var ActivitiesConfig=configs.ActivitiesConfig;var ActorConfig=configs.ActorConfig;var ActorAideConfig=configs.ActorAideConfig;var ActorAideattachConfig=configs.ActorAideattachConfig;var ActorAideIntimacyConfig=configs.ActorAideIntimacyConfig;var ActorAideLvConfig=configs.ActorAideLvConfig;var ActorAssetsConfig=configs.ActorAssetsConfig;var ActorAssetsLvConfig=configs.ActorAssetsLvConfig;var ActorLevelConfig=configs.ActorLevelConfig;var ActorLoyaltyConfig=configs.ActorLoyaltyConfig;var ActorProficiencyConfig=configs.ActorProficiencyConfig;var ActorTrainConfig=configs.ActorTrainConfig;var ActorTrainLvConfig=configs.ActorTrainLvConfig;var AvatarConfig=configs.AvatarConfig;var BattleLevelConfig=configs.BattleLevelConfig;var BattleShootTypeConfig=configs.BattleShootTypeConfig;var BlockLevelConfig=configs.BlockLevelConfig;var BlockRankingListConfig=configs.BlockRankingListConfig;var BlockWordsConfig=configs.BlockWordsConfig;var BlockWordsIIConfig=configs.BlockWordsIIConfig;var BoxTargetConfig=configs.BoxTargetConfig;var BuildingEffectConfig=configs.BuildingEffectConfig;var BuildingLevelConfig=configs.BuildingLevelConfig;var BusinessConfig=configs.BusinessConfig;var CinemaConfig=configs.CinemaConfig;var CityConfig=configs.CityConfig;var CityPopularizeConfig=configs.CityPopularizeConfig;var CompleteConfig=configs.CompleteConfig;var CompoundConfig=configs.CompoundConfig;var CooperateTaskConfig=configs.CooperateTaskConfig;var CountActivitiesConfig=configs.CountActivitiesConfig;var CountryConfig=configs.CountryConfig;var CupPackageConfig=configs.CupPackageConfig;var DailySignConfig=configs.DailySignConfig;var DailySignTrailerConfig=configs.DailySignTrailerConfig;var DialogueConfig=configs.DialogueConfig;var EventConfig=configs.EventConfig;var FloorConfig=configs.FloorConfig;var GameLevelConfig=configs.GameLevelConfig;var GameRandomNameConfig=configs.GameRandomNameConfig;var GameVersionConfig=configs.GameVersionConfig;var GiftPackageConfig=configs.GiftPackageConfig;var GlobalConfig=configs.GlobalConfig;var GuidePathConfig=configs.GuidePathConfig;var GuidesystemConfig=configs.GuidesystemConfig;var HeadPortraitConfig=configs.HeadPortraitConfig;var ImageConfig=configs.ImageConfig;var InitialActorConfig=configs.InitialActorConfig;var ItemConfig=configs.ItemConfig;var LanguageTypeConfig=configs.LanguageTypeConfig;var LevelGiftPackageConfig=configs.LevelGiftPackageConfig;var LoaderConfig=configs.LoaderConfig;var LoadingConfig=configs.LoadingConfig;var MailConfig=configs.MailConfig;var MaintaskConfig=configs.MaintaskConfig;var MeetingGameConfig=configs.MeetingGameConfig;var MeetingRewardsConfig=configs.MeetingRewardsConfig;var MenuConfig=configs.MenuConfig;var MenuIndexConfig=configs.MenuIndexConfig;var MonthCardConfig=configs.MonthCardConfig;var MovieAdaptationMsgConfig=configs.MovieAdaptationMsgConfig;var MovieAudienceEvaluationConfig=configs.MovieAudienceEvaluationConfig;var MovieDropConfig=configs.MovieDropConfig;var MovieExpectConfig=configs.MovieExpectConfig;var MovieLicenceConfig=configs.MovieLicenceConfig;var MovieMediaVisitConfig=configs.MovieMediaVisitConfig;var MovieMidiaEvaluationConfig=configs.MovieMidiaEvaluationConfig;var MovieMidiaEvaluationMsgConfig=configs.MovieMidiaEvaluationMsgConfig;var MoviePopularizeConfig=configs.MoviePopularizeConfig;var MovieShootTypeConfig=configs.MovieShootTypeConfig;var MsgConfig=configs.MsgConfig;var MsgChatConfig=configs.MsgChatConfig;var MsgProtoErrorConfig=configs.MsgProtoErrorConfig;var NpcConfig=configs.NpcConfig;var OperationTasksConfig=configs.OperationTasksConfig;var OperationTasksScoreConfig=configs.OperationTasksScoreConfig;var OperationTasksTermsConfig=configs.OperationTasksTermsConfig;var OrderConfig=configs.OrderConfig;var OscarConfig=configs.OscarConfig;var PerformConfig=configs.PerformConfig;var PlayActConfig=configs.PlayActConfig;var PlayerDefaultConfig=configs.PlayerDefaultConfig;var PlayerLevelConfig=configs.PlayerLevelConfig;var PopUpConfig=configs.PopUpConfig;var PositionConfig=configs.PositionConfig;var ProduceConfig=configs.ProduceConfig;var ProduceLevelConfig=configs.ProduceLevelConfig;var ProduceLvConfig=configs.ProduceLvConfig;var ProduceSouvenirConfig=configs.ProduceSouvenirConfig;var PropertyConfig=configs.PropertyConfig;var RandomNameConfig=configs.RandomNameConfig;var RandomSurnameConfig=configs.RandomSurnameConfig;var RechargeConfig=configs.RechargeConfig;var RoadshowConfig=configs.RoadshowConfig;var SecretaryConfig=configs.SecretaryConfig;var SecretaryGiftConfig=configs.SecretaryGiftConfig;var SecretaryTypeConfig=configs.SecretaryTypeConfig;var ServerRankingListConfig=configs.ServerRankingListConfig;var SettingDefaultConfig=configs.SettingDefaultConfig;var ShopConfig=configs.ShopConfig;var SkillConfig=configs.SkillConfig;var SkillEffectConfig=configs.SkillEffectConfig;var SkillTriggerConfig=configs.SkillTriggerConfig;var SpeakConfig=configs.SpeakConfig;var StarConConfig=configs.StarConConfig;var StoryConfig=configs.StoryConfig;var StoryCharactersConfig=configs.StoryCharactersConfig;var StoryGoalsConfig=configs.StoryGoalsConfig;var StorylineConfig=configs.StorylineConfig;var StoryRateConfig=configs.StoryRateConfig;var StoryRefreshPriceConfig=configs.StoryRefreshPriceConfig;var StoryStackItemConfig=configs.StoryStackItemConfig;var StoryStackSortConfig=configs.StoryStackSortConfig;var StreetConfig=configs.StreetConfig;var SysTimeConfig=configs.SysTimeConfig;var TaskConfig=configs.TaskConfig;var TestConfig=configs.TestConfig;var TurntableCompleteConfig=configs.TurntableCompleteConfig;var TurntableRewardConfig=configs.TurntableRewardConfig;var TypeConfig=configs.TypeConfig;var UnlockConfig=configs.UnlockConfig;var VisitConfig=configs.VisitConfig;var WeeklyQuestConfig=configs.WeeklyQuestConfig;var WelfareConfig=configs.WelfareConfig;var WheelDropConfig=configs.WheelDropConfig;var WriterConfig=configs.WriterConfig;var WriterAbilityConfig=configs.WriterAbilityConfig;var WriterAdaptEffectConfig=configs.WriterAdaptEffectConfig;var WriterLevelConfig=configs.WriterLevelConfig;var WriterSkillConfig=configs.WriterSkillConfig;var WriterStationConfig=configs.WriterStationConfig;var Games;(function(Games){var ProtoHandlerList=(function(){function ProtoHandlerList(){this.list=[];this.account=new Games.accountHandler();this.ClientGM=new Games.ClientGMHandler();this.GameData=new Games.GameDataHandler();this.CinemaBuild=new Games.CinemaBuildHandler();this.test=new Games.testHandler();this.item=new Games.itemHandler();this.city=new Games.cityHandler();this.movie=new Games.movieHandler();this.Actor=new Games.ActorHandler();this.story=new Games.storyHandler();this.manageOrder=new Games.manageOrderHandler();this.progressBox=new Games.progressBoxHandler();this.manageProduce=new Games.manageProduceHandler();this.rank=new Games.rankHandler();this.task=new Games.taskHandler();this.mall=new Games.mallHandler();this.Mail=new Games.MailHandler();this.Gift=new Games.GiftHandler();this.manageBusiness=new Games.manageBusinessHandler();this.manageVisit=new Games.manageVisitHandler();this.manageMeeting=new Games.manageMeetingHandler();this.dailySign=new Games.dailySignHandler();this.secretary=new Games.secretaryHandler();this.sevenAddUp=new Games.sevenAddUpHandler();this.BeginnerGuide=new Games.BeginnerGuideHandler();this.Danmu=new Games.DanmuHandler();this.cooperate=new Games.cooperateHandler();this.pay=new Games.payHandler();this.chat=new Games.chatHandler();this.smallTarget=new Games.smallTargetHandler()}ProtoHandlerList.prototype.install=function(){this.initList()};ProtoHandlerList.prototype.initList=function(){this.list.push(this.account);this.list.push(this.ClientGM);this.list.push(this.GameData);this.list.push(this.CinemaBuild);this.list.push(this.test);this.list.push(this.item);this.list.push(this.city);this.list.push(this.movie);this.list.push(this.Actor);this.list.push(this.story);this.list.push(this.manageOrder);this.list.push(this.progressBox);this.list.push(this.manageProduce);this.list.push(this.rank);this.list.push(this.task);this.list.push(this.mall);this.list.push(this.Mail);this.list.push(this.Gift);this.list.push(this.manageBusiness);this.list.push(this.manageVisit);this.list.push(this.manageMeeting);this.list.push(this.dailySign);this.list.push(this.secretary);this.list.push(this.sevenAddUp);this.list.push(this.BeginnerGuide);this.list.push(this.Danmu);this.list.push(this.cooperate);this.list.push(this.pay);this.list.push(this.chat);this.list.push(this.smallTarget)};return ProtoHandlerList}());Games.ProtoHandlerList=ProtoHandlerList})(Games||(Games={}));var Games;(function(Games){var ProtoSenderList=(function(){function ProtoSenderList(){this.list=[];this.account=new Games.accountSender();this.ClientGM=new Games.ClientGMSender();this.GameData=new Games.GameDataSender();this.CinemaBuild=new Games.CinemaBuildSender();this.test=new Games.testSender();this.item=new Games.itemSender();this.city=new Games.citySender();this.movie=new Games.movieSender();this.Actor=new Games.ActorSender();this.story=new Games.storySender();this.manageOrder=new Games.manageOrderSender();this.progressBox=new Games.progressBoxSender();this.manageProduce=new Games.manageProduceSender();this.rank=new Games.rankSender();this.task=new Games.taskSender();this.mall=new Games.mallSender();this.Mail=new Games.MailSender();this.Gift=new Games.GiftSender();this.manageBusiness=new Games.manageBusinessSender();this.manageVisit=new Games.manageVisitSender();this.manageMeeting=new Games.manageMeetingSender();this.dailySign=new Games.dailySignSender();this.secretary=new Games.secretarySender();this.sevenAddUp=new Games.sevenAddUpSender();this.BeginnerGuide=new Games.BeginnerGuideSender();this.Danmu=new Games.DanmuSender();this.cooperate=new Games.cooperateSender();this.pay=new Games.paySender();this.chat=new Games.chatSender();this.smallTarget=new Games.smallTargetSender()}ProtoSenderList.prototype.install=function(){this.initList()};ProtoSenderList.prototype.initList=function(){this.list.push(this.account);this.list.push(this.ClientGM);this.list.push(this.GameData);this.list.push(this.CinemaBuild);this.list.push(this.test);this.list.push(this.item);this.list.push(this.city);this.list.push(this.movie);this.list.push(this.Actor);this.list.push(this.story);this.list.push(this.manageOrder);this.list.push(this.progressBox);this.list.push(this.manageProduce);this.list.push(this.rank);this.list.push(this.task);this.list.push(this.mall);this.list.push(this.Mail);this.list.push(this.Gift);this.list.push(this.manageBusiness);this.list.push(this.manageVisit);this.list.push(this.manageMeeting);this.list.push(this.dailySign);this.list.push(this.secretary);this.list.push(this.sevenAddUp);this.list.push(this.BeginnerGuide);this.list.push(this.Danmu);this.list.push(this.cooperate);this.list.push(this.pay);this.list.push(this.chat);this.list.push(this.smallTarget)};return ProtoSenderList}());Games.ProtoSenderList=ProtoSenderList})(Games||(Games={}));var AssetManager=Games.AssetManager;var ConfigManager=configs.ConfigManager;var ModelManager=Games.ModelManager;var Handler=laya.utils.Handler;var Loader=laya.net.Loader;var TEXT=Games.TEXT;var Skeleton=laya.ani.bone.Skeleton;var Templet=laya.ani.bone.Templet;var Texture=Laya.Texture;var Sprite=laya.display.Sprite;var Rectangle=laya.maths.Rectangle;var Game=(function(){function Game(){}Object.defineProperty(Game,"protosender",{get:function(){if(!Game._protosender){Game._protosender=new Games.ProtoSenderList();var server=Game.channel.serverItem;console.log("服务器：name="+server.name+", ip="+server.ip+", port="+server.port+", https="+server.https);Game.installProto(server.ip,server.port,server.https)}return Game._protosender},enumerable:true,configurable:true});Game.initProperty=function(){Game.stageManager=new Games.StageManager();Game.driverSystem=new Games.GameDriverSystem();Game.stageManager.init();Games.GameDriver.init();Games.GameDriver.registerDriver(this.driverSystem)};Game.install=function(){if(!Games.GameLaunch.isRunEnd&&window.__isloaded){return}if(Game._isInstall){return}Game._isInstall=true;gameLaunchLoding.onLoadedAllScript();var stage=Laya.stage;var fstage=fairygui.GRoot.inst;Game.system=Games.SystemMessag.Instance;Game.guide=Games.GuideManager.Instance;Game.story=Games.StoryManager.Instance;Game.loader=Games.LoaderManager.getInstance();Game.installer.install();Game.initProperty()};Game.installProto=function(ip,port,useHttps){if(ip===void 0){ip="172.16.0.116"}if(port===void 0){port=8360}if(useHttps===void 0){useHttps=false}Game.protosender.install();Game.protohandler.install();Game.proto.install(ip,port,useHttps)};Object.defineProperty(Game,"guideUI",{get:function(){if(this._guideUI==null){this._guideUI=new Games.GuideWindow()}return this._guideUI},enumerable:true,configurable:true});Game.onInstallComplete=function(){console.log("Game.onInstallComplete");Game.sound.install();Game.tick.install();Game.tickhandler.start();Game.menu.open(MenuId.Login);Game.sound.autoStopMusic=false;gameLaunchLoding.onEnd();var test=Proto.API.test};Game.checkEnterGame=function(isInitGameData){if(isInitGameData===void 0){isInitGameData=false}if(User.protoUserData.usrState==Proto.SE.EUsrState.usual||isInitGameData){Game.guide.checkPlayOpenAnima();Game.menu.close(MenuId.Login);Game.menu.close(MenuId.CreateRole)}};Game.onReLoginDataBeginHandler=function(){};Game.test1=function(){};Game.installer=new Games.GameInstaller();Game.menu=new Games.MenuManager();Game.guiRes=new Games.GuiResPackageConfigReader();Game.spriteRes=new Games.SpriteResPackageConfigReader();Game.typeWrite=new Games.TypeWriteManager();Game.localStorage=Games.GameLocalStorage.Instance;Game.proto=new Games.ProtoManager();Game.protohandler=new Games.ProtoHandlerList();Game.protoOkEvent=new Emitter();Game.protoOobListOkEvent=new Emitter();Game.protoFailEvent=new Emitter();Game.event=new Emitter();Game.time=new Games.GameTimeData;Game.Fx=new FxManager();Game.pool=new Games.GamePools();Game.creator=new Games.UnitCreator();Game.asset=new AssetManager();Game.config=new ConfigManager();Game.lang=LangManager.Instance;Game.moduleModel=new ModelManager();Game.sound=new Games.AudioManager();Game.tick=new Games.TickManager();Game.tickhandler=Games.TickHandlerManager.Instance;Game._isInstall=false;return Game}());var User=new Games.UserData();setTimeout(function(){Game.install()},500);